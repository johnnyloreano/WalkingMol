{"version":3,"sources":["webpack:///src/assets/icn3d/lib/three_0.99.0.min.js","webpack:///src/assets/icn3d/icn3d_full_ui.js","webpack:///src/assets/icn3d/lib/jquery-ui.min.js"],"names":[],"mappings":"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;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA,iBAAiB;;AAEjB;AACA;;AAEA;AACA;;AAEA;;AAEA,KAAK;;AAEL;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA,SAAS;;AAET;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA,iBAAiB;;AAEjB;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA,iBAAiB;;AAEjB;;AAEA;;AAEA;AACA;;AAEA,KAAK;;AAEL;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;;AAGA;;AAEA;;AAEA,SAAS;;AAET;;AAEA,SAAS;;AAET;;AAEA,SAAS;;AAET;;AAEA;;;AAGA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,SAAS;;AAET;AACA;;AAEA,SAAS;;AAET;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,SAAS;;AAET;;AAEA,SAAS;;AAET;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AA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uBAAuB;AACvB,wBAAwB;AACxB,+BAA+B;AAC/B,qBAAqB;AACrB;AACA,uBAAuB;AACvB,yBAAyB;AACzB,qBAAqB;AACrB,iCAAiC;AACjC;AACA;AACA,4BAA4B;AAC5B,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,uBAAuB;AACvB,gBAAgB;AAChB,mBAAmB;AACnB;AACA;AACA,sCAAsC;AACtC,iFAAiF;AACjF,4CAA4C;AAC5C,EAAE;AACF;AACA,kCAAkC;AAClC,iFAAiF;AACjF,EAAE;AACF;AACA,4DAA4D;AAC5D;AACA,gDAAgD;AAChD,kCAAkC;AAClC;AACA,kEAAkE;AAClE,kFAAkF;AAClF,uFAAuF;AACvF;AACA,oDAAoD;AACpD,6EAA6E;AAC7E;AACA,qBAAqB;AACrB,iBAAiB;AACjB,sBAAsB;AACtB,MAAM;AACN,qCAAqC;AACrC,6DAA6D;AAC7D,6DAA6D;AAC7D;AACA,qDAAqD;AACrD;AACA;AACA,qCAAqC;AACrC,iDAAiD;AACjD,qBAAqB;AACrB,kBAAkB;AAClB,EAAE,uCAAuC;AACzC,iDAAiD;AACjD,qBAAqB;AACrB,kBAAkB;AAClB,kBAAkB;AAClB,EAAE,KAAK;AACP,6DAA6D;AAC7D,EAAE;AACF;AACA,qCAAqC;AACrC,iDAAiD;AACjD,qBAAqB;AACrB,kBAAkB;AAClB,EAAE,KAAK;AACP,6DAA6D;AAC7D,EAAE;AACF;AACA;AACA,iEAAiE;AACjE,sDAAsD;AACtD,2BAA2B;AAC3B;AACA,EAAE;AACF;AACA,iBAAiB;AACjB;AACA,qDAAqD;AACrD;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,8CAA8C;AAC9C,iBAAiB;AACjB;AACA;AACA;AACA;AACA,aAAa;AACb,uGAAuG;AACvG,EAAE,kCAAkC;AACpC,qDAAqD;AACrD,EAAE;AACF;AACA,8BAA8B;AAC9B,qDAAqD;AACrD,EAAE;AACF;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,iBAAiB;AACjB;AACA,iBAAiB;AACjB;AACA;AACA;AACA,wDAAwD;AACxD;AACA;AACA;AACA,qCAAqC;AACrC,yCAAyC;AACzC;AACA,sDAAsD;AACtD,8GAA8G;AAC9G,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,mLAAmL;AACnL;AACA,8DAA8D;AAC9D,gFAAgF;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;AAEA,oFAAoF;AACpF,wBAAwB;AACxB;AACA,uBAAuB;AACvB,yBAAyB;AACzB,qBAAqB;AACrB,iCAAiC;AACjC,wBAAwB;AACxB;AACA,wBAAwB;AACxB,2BAA2B;AAC3B,wBAAwB;AACxB;AACA;AACA;AACA,iCAAiC;AACjC,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC,qBAAqB;AACrB,wEAAwE;AACxE,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,qCAAqC;AACrC,2BAA2B;AAC3B,2BAA2B;AAC3B,2BAA2B;AAC3B,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,sBAAsB;AACtB,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD;AACrD;AACA,cAAc;AACd,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,kEAAkE;AAClE,yCAAyC;AACzC,gDAAgD;AAChD,yCAAyC;AACzC,mEAAmE;AACnE,mEAAmE;AACnE,iDAAiD;AACjD;AACA,mCAAmC;AACnC,0CAA0C;AAC1C,mCAAmC;AACnC,mEAAmE;AACnE,mEAAmE;AACnE,kDAAkD;AAClD;AACA,+EAA+E;AAC/E,gDAAgD;AAChD,qCAAqC;AACrC;AACA,EAAE;AACF;AACA,iBAAiB;AACjB;AACA;AACA,oDAAoD;AACpD;AACA;AACA;AACA;AACA,uDAAuD;AACvD;AACA,+DAA+D;AAC/D;AACA,6BAA6B;AAC7B;AACA,kEAAkE;AAClE,oDAAoD;AACpD;AACA;AACA,mCAAmC;AACnC,0DAA0D;AAC1D,sCAAsC;AACtC,yDAAyD;AACzD;AACA,EAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB,uBAAuB;AACvB,yBAAyB;AACzB,yBAAyB;AACzB,uBAAuB;AACvB,wBAAwB;AACxB,+BAA+B;AAC/B,qBAAqB;AACrB;AACA,mBAAmB;AACnB,0BAA0B;AAC1B,oBAAoB;AACpB,gBAAgB;AAChB,gBAAgB;AAChB,gBAAgB;AAChB;AACA;AACA,4BAA4B;AAC5B,gCAAgC;AAChC;AACA,0BAA0B;AAC1B,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA,OAAO;AACP,EAAE;AACF;AACA;AACA,sCAAsC;AACtC,iFAAiF;AACjF,4CAA4C;AAC5C,EAAE;AACF;AACA,kCAAkC;AAClC,iFAAiF;AACjF,EAAE;AACF;AACA,aAAa;AACb;AACA,8BAA8B;AAC9B;AACA;AACA,iCAAiC;AACjC,mCAAmC;AACnC,0BAA0B;AAC1B,uBAAuB;AACvB;AACA,wBAAwB;AACxB,gCAAgC;AAChC;AACA,qCAAqC;AACrC,iCAAiC;AACjC,8FAA8F;AAC9F,qCAAqC;AACrC;AACA,qDAAqD;AACrD,2BAA2B;AAC3B;AACA;AACA,2CAA2C;AAC3C;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA,qBAAqB;AACrB,4CAA4C;AAC5C,kCAAkC;AAClC,kCAAkC;AAClC;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,iBAAiB;AACjB;AACA,uCAAuC;AACvC;AACA;AACA,wDAAwD;AACxD;AACA,uCAAuC;AACvC,yEAAyE;AACzE;AACA,0DAA0D;AAC1D;AACA;AACA,mDAAmD;AACnD,2DAA2D;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iFAAiF;AACjF,6CAA6C;AAC7C;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,+CAA+C;AAC/C;AACA,qBAAqB;AACrB,+CAA+C;AAC/C,8DAA8D;AAC9D;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qCAAqC;AACrC,4BAA4B;AAC5B;AACA,+EAA+E;AAC/E,6CAA6C;AAC7C,6CAA6C;AAC7C,4DAA4D;AAC5D;AACA,yBAAyB;AACzB,6BAA6B;AAC7B;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,8CAA8C;AAC9C;AACA,qBAAqB;AACrB,+CAA+C;AAC/C,4DAA4D;AAC5D;AACA;AACA,qBAAqB;AACrB;AACA;AACA,mCAAmC;AACnC,4BAA4B;AAC5B;AACA,+EAA+E;AAC/E,6CAA6C;AAC7C,6CAA6C;AAC7C,4DAA4D;AAC5D;AACA,yBAAyB;AACzB,6BAA6B;AAC7B;AACA,MAAM;AACN;AACA,8CAA8C;AAC9C;AACA;AACA,2CAA2C;AAC3C,yCAAyC;AACzC,2DAA2D;AAC3D;AACA,yBAAyB;AACzB,6BAA6B;AAC7B,sDAAsD;AACtD,0CAA0C;AAC1C,mHAAmH;AACnH,cAAc;AACd,UAAU,kCAAkC;AAC5C,yCAAyC;AACzC,2DAA2D;AAC3D,6BAA6B;AAC7B,sDAAsD;AACtD,0CAA0C;AAC1C,iEAAiE;AACjE,cAAc;AACd,UAAU;AACV;AACA,sCAAsC;AACtC,yCAAyC;AACzC,2DAA2D;AAC3D,6BAA6B;AAC7B,sDAAsD;AACtD,0CAA0C;AAC1C,iEAAiE;AACjE,cAAc;AACd,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,iBAAiB;AACjB;AACA;AACA;AACA,wDAAwD;AACxD;AACA;AACA;AACA,yCAAyC;AACzC,gCAAgC;AAChC,qBAAqB;AACrB;AACA,0EAA0E;AAC1E,2BAA2B;AAC3B,kCAAkC;AAClC,cAAc,KAAK;AACnB,kCAAkC;AAClC,cAAc;AACd,UAAU,KAAK;AACf,2BAA2B;AAC3B,kCAAkC;AAClC,cAAc,KAAK;AACnB,kCAAkC;AAClC,cAAc;AACd,UAAU;AACV;AACA,sDAAsD;AACtD,8GAA8G;AAC9G,4CAA4C;AAC5C;AACA;AACA;AACA,oCAAoC;AACpC,oCAAoC;AACpC,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,mLAAmL;AACnL;AACA,8DAA8D;AAC9D,gFAAgF;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB,0BAA0B;AAC1B,0BAA0B;AAC1B,wBAAwB;AACxB;AACA,mBAAmB;AACnB,0BAA0B;AAC1B,oBAAoB;AACpB,gBAAgB;AAChB,gBAAgB;AAChB,gBAAgB;AAChB,wBAAwB;AACxB;AACA;AACA;AACA,iCAAiC;AACjC,gCAAgC;AAChC;AACA,4BAA4B;AAC5B,2BAA2B;AAC3B,0BAA0B;AAC1B,0BAA0B;AAC1B;AACA;AACA,qCAAqC;AACrC,qBAAqB;AACrB;AACA;AACA,gCAAgC;AAChC,qBAAqB;AACrB,wEAAwE;AACxE,EAAE;AACF;AACA,aAAa;AACb;AACA;AACA,oDAAoD;AACpD;AACA,yBAAyB;AACzB,0BAA0B;AAC1B;AACA;AACA,yBAAyB;AACzB,6DAA6D;AAC7D;AACA,8BAA8B;AAC9B,mDAAmD;AACnD,mDAAmD;AACnD,uDAAuD;AACvD;AACA;AACA,uFAAuF;AACvF,kBAAkB;AAClB,wBAAwB;AACxB,gFAAgF;AAChF,MAAM,KAAK;AACX,uEAAuE;AACvE,MAAM;AACN,oCAAoC;AACpC;AACA,eAAe;AACf;AACA,mCAAmC;AACnC,iBAAiB;AACjB;AACA;AACA,2BAA2B;AAC3B;AACA;AACA,0BAA0B;AAC1B;AACA,qDAAqD;AACrD,0BAA0B;AAC1B,yDAAyD;AACzD;AACA;AACA,6CAA6C;AAC7C,wCAAwC;AACxC,0CAA0C;AAC1C;AACA,+DAA+D;AAC/D,2CAA2C;AAC3C;AACA,sEAAsE;AACtE,8BAA8B;AAC9B,mCAAmC;AACnC;AACA;AACA;AACA,OAAO;AACP;AACA,wCAAwC;AACxC;AACA;AACA,0BAA0B;AAC1B;AACA,EAAE;AACF;;AAEA;;AAEA,sFAAsF;AACtF,wBAAwB;AACxB;AACA,uBAAuB;AACvB,yBAAyB;AACzB,qBAAqB;AACrB,iCAAiC;AACjC,wBAAwB;AACxB;AACA,wBAAwB;AACxB,2BAA2B;AAC3B,wBAAwB;AACxB,wBAAwB;AACxB,wBAAwB;AACxB,wBAAwB;AACxB,wBAAwB;AACxB;AACA;AACA;AACA,iCAAiC;AACjC,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC,qBAAqB;AACrB,wEAAwE;AACxE,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,qCAAqC;AACrC,2BAA2B;AAC3B,2BAA2B;AAC3B,2BAA2B;AAC3B,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,sBAAsB;AACtB,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE;AACxE;AACA,cAAc;AACd,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,kEAAkE;AAClE,yCAAyC;AACzC,gDAAgD;AAChD,yCAAyC;AACzC,mEAAmE;AACnE,mEAAmE;AACnE,iDAAiD;AACjD;AACA,mCAAmC;AACnC,0CAA0C;AAC1C,mCAAmC;AACnC,mEAAmE;AACnE,mEAAmE;AACnE,kDAAkD;AAClD;AACA,+EAA+E;AAC/E,gDAAgD;AAChD,qCAAqC;AACrC;AACA,EAAE;AACF;AACA,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,IAAI;AACJ;AACA,iBAAiB;AACjB;AACA;AACA,oDAAoD;AACpD;AACA;AACA;AACA;AACA,uDAAuD;AACvD;AACA,kEAAkE;AAClE,wDAAwD;AACxD;AACA,iEAAiE;AACjE,yEAAyE;AACzE;AACA,6BAA6B;AAC7B;AACA,oEAAoE;AACpE,kEAAkE;AAClE,kEAAkE;AAClE;AACA;AACA,mCAAmC;AACnC,0DAA0D;AAC1D,sCAAsC;AACtC,yDAAyD;AACzD;AACA,EAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB,0BAA0B;AAC1B,0BAA0B;AAC1B,wBAAwB;AACxB,wBAAwB;AACxB,wBAAwB;AACxB,wBAAwB;AACxB,wBAAwB;AACxB;AACA,mBAAmB;AACnB,0BAA0B;AAC1B,oBAAoB;AACpB,gBAAgB;AAChB,gBAAgB;AAChB,gBAAgB;AAChB,wBAAwB;AACxB;AACA;AACA;AACA,iCAAiC;AACjC,gCAAgC;AAChC;AACA,4BAA4B;AAC5B,2BAA2B;AAC3B,0BAA0B;AAC1B,0BAA0B;AAC1B;AACA;AACA,qCAAqC;AACrC,qBAAqB;AACrB;AACA;AACA,gCAAgC;AAChC,qBAAqB;AACrB,wEAAwE;AACxE,EAAE;AACF;AACA,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,IAAI;AACJ;AACA,aAAa;AACb;AACA;AACA,oDAAoD;AACpD;AACA,yBAAyB;AACzB,0BAA0B;AAC1B;AACA;AACA,yBAAyB;AACzB,6DAA6D;AAC7D;AACA,qDAAqD;AACrD;AACA,kEAAkE;AAClE,0DAA0D;AAC1D,0DAA0D;AAC1D,uEAAuE;AACvE;AACA,qDAAqD;AACrD,uEAAuE;AACvE,uDAAuD;AACvD;AACA;AACA,uFAAuF;AACvF,kBAAkB;AAClB,wBAAwB;AACxB,gFAAgF;AAChF,MAAM,KAAK;AACX,uEAAuE;AACvE,MAAM;AACN,oCAAoC;AACpC;AACA,eAAe;AACf;AACA,mCAAmC;AACnC,iBAAiB;AACjB;AACA;AACA,2BAA2B;AAC3B;AACA;AACA,0BAA0B;AAC1B;AACA,qDAAqD;AACrD,0BAA0B;AAC1B,yDAAyD;AACzD;AACA;AACA,6CAA6C;AAC7C,wCAAwC;AACxC,0CAA0C;AAC1C;AACA,+DAA+D;AAC/D,2CAA2C;AAC3C;AACA,sEAAsE;AACtE,8BAA8B;AAC9B,mCAAmC;AACnC;AACA;AACA;AACA,OAAO;AACP;AACA,wCAAwC;AACxC;AACA;AACA,0BAA0B;AAC1B;AACA,EAAE;AACF;;AAEA;AACA,sBAAsB;AACtB,uBAAuB;AACvB,yBAAyB;AACzB,yBAAyB;AACzB,uBAAuB;AACvB,wBAAwB;AACxB,0BAA0B;AAC1B,+BAA+B;AAC/B,qBAAqB;AACrB,yBAAyB;AACzB;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA,4BAA4B;AAC5B,gCAAgC;AAChC;AACA,yBAAyB;AACzB;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,wDAAwD;AACxD;AACA;AACA;AACA,gDAAgD;AAChD;AACA;AACA;AACA,sDAAsD;AACtD,8GAA8G;AAC9G,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mLAAmL;AACnL;AACA;AACA;AACA,8DAA8D;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA,sCAAsC;AACtC,wBAAwB;AACxB,yBAAyB;AACzB,wBAAwB;AACxB,wBAAwB;AACxB,wBAAwB;AACxB,wBAAwB;AACxB,0BAA0B;AAC1B,yBAAyB;AACzB;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA,iCAAiC;AACjC,gCAAgC;AAChC;AACA,yBAAyB;AACzB;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,IAAI;AACJ;AACA,aAAa;AACb,0BAA0B;AAC1B;AACA,kEAAkE;AAClE,wDAAwD;AACxD;AACA;AACA,oDAAoD;AACpD;AACA,wBAAwB;AACxB;AACA;AACA;AACA,8CAA8C;AAC9C,6DAA6D;AAC7D;AACA;AACA;AACA,sDAAsD;AACtD;AACA;AACA;AACA;AACA,2CAA2C;AAC3C;AACA,kEAAkE;AAClE,iDAAiD;AACjD;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA,0EAA0E;AAC1E;AACA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA;;AAEA,oCAAoC;;AAEpC;AACA;;AAEA;;AAEA,6BAA6B;;AAE7B;;AAEA;;AAEA;;AAEA,wBAAwB;AACxB,iCAAiC;;AAEjC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,sBAAsB;;AAEtB;AACA,gBAAgB;AAChB,4BAA4B;;AAE5B,0BAA0B;AAC1B;;AAEA;AACA;;AAEA,uBAAuB;AACvB,wBAAwB;;AAExB,6BAA6B;AAC7B,6BAA6B;AAC7B,2BAA2B;;AAE3B,0BAA0B;;AAE1B,oCAAoC;;AAEpC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAoB;AACpB,6BAA6B;AAC7B;;AAEA,+BAA+B;AAC/B;;AAEA;AACA,uBAAuB;AACvB,0BAA0B;AAC1B,mBAAmB;;AAEnB,wBAAwB;;AAExB;AACA;;AAEA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,kCAAkC;;AAElC;AACA,4BAA4B;AAC5B;;AAEA,0BAA0B;AAC1B,yBAAyB,OAAO;AAChC,8BAA8B;AAC9B,2BAA2B,OAAO;AAClC,8BAA8B;AAC9B,4BAA4B;AAC5B,mCAAmC;;AAEnC,+BAA+B,QAAQ;AACvC,+BAA+B;AAC/B,gCAAgC;;AAEhC,yBAAyB;AACzB,qCAAqC;;AAErC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;;AAEA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA,qEAAqE;AACrE;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA,+BAA+B;AAC/B;;AAEA,+CAA+C;AAC/C;AACA;AACA,qDAAqD;AACrD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;;AAEA,+CAA+C;AAC/C;AACA;AACA;AACA,qDAAqD;AACrD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,oCAAoC;AACpC;AACA;;AAEA;AACA;AACA,oCAAoC;AACpC;AACA;;AAEA;AACA;AACA,oCAAoC;AACpC;AACA;;AAEA;AACA;AACA,oCAAoC;AACpC;AACA;;AAEA;AACA;;AAEA,oCAAoC;AACpC;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA,KAAK;AACL;;AAEA;;AAEA;;AAEA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA,6BAA6B;AAC7B;;AAEA;AACA,iDAAiD;AACjD;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE;AACjE,0CAA0C;AAC1C,2FAA2F;AAC3F;AACA,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE;AACjE,0CAA0C;AAC1C,6GAA6G;AAC7G;;AAEA,yEAAyE;;AAEzE;;AAEA;AACA;AACA;AACA,oDAAoD;;AAEpD;AACA,qFAAqF;;AAErF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA,+EAA+E;;AAE/E;AACA;AACA;AACA,wDAAwD;;AAExD;AACA,yFAAyF;;AAEzF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,KAAK;;AAEL,wCAAwC;AACxC;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C,kCAAkC;AAClC,8FAA8F;AAC9F,8DAA8D;AAC9D,sBAAsB;AACtB;;AAEA;AACA,iCAAiC;AACjC,mEAAmE;AACnE,sBAAsB;AACtB;AACA;AACA;;AAEA;AACA;AACA,4BAA4B;AAC5B,8DAA8D;AAC9D,iBAAiB;AACjB;AACA;AACA;AACA;AACA,4BAA4B;AAC5B,8DAA8D;AAC9D,iBAAiB;AACjB;AACA;AACA;AACA;AACA,4BAA4B;AAC5B,8DAA8D;AAC9D,iBAAiB;AACjB;AACA;;AAEA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;;AAEA,eAAe,aAAa,YAAY;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL,eAAe;;AAEf;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,2BAA2B;AAC3B,8BAA8B;AAC9B,4BAA4B;;AAE5B,4BAA4B;AAC5B,8BAA8B;AAC9B,6BAA6B;AAC7B,2BAA2B;AAC3B,gCAAgC;;AAEhC,+BAA+B,sDAAsD;AACrF,gCAAgC;AAChC,iCAAiC;;AAEjC,yBAAyB;AACzB,yBAAyB;;AAEzB,iCAAiC;;AAEjC;AACA;AACA;AACA;AACA;;AAEA,oCAAoC;AACpC,iCAAiC;AACjC,iCAAiC;AACjC,mCAAmC;;AAEnC,iCAAiC;;AAEjC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,+BAA+B;;AAE/B;AACA;AACA;;AAEA;;AAEA,8BAA8B;AAC9B,yBAAyB;AACzB;AACA,wBAAwB;AACxB;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;;AAEA,6BAA6B;;AAE7B,wBAAwB,qCAAqC;;AAE7D;AACA;;AAEA;AACA;AACA,4BAA4B;AAC5B,KAAK;;AAEL;AACA,iDAAiD;AACjD,iDAAiD;;AAEjD;AACA;AACA;AACA;AACA;;AAEA,yBAAyB;AACzB;AACA,wBAAwB;AACxB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,uBAAuB;AACvB,yBAAyB;;AAEzB;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,SAAS;AACT;AACA;;AAEA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA,kCAAkC,cAAc;AAChD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;;AAEA;AACA;AACA;;AAEA,kCAAkC,cAAc;AAChD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,yDAAyD;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,8BAA8B;AAC9B;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gDAAgD;AAChD;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,SAAS;AACT;AACA,2BAA2B,OAAO;AAClC;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA,8CAA8C,QAAQ;AACtD;;AAEA;;AAEA;;AAEA;AACA,2DAA2D,QAAQ;AACnE;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,wBAAwB,qBAAqB;AAC7C;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA,+BAA+B,OAAO;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,4FAA4F;AAC5F;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,0CAA0C;;AAE1C;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,OAAO;AACtC;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,+BAA+B,OAAO;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,yBAAyB;AACzB;AACA;AACA,8BAA8B;AAC9B;AACA;;AAEA;;AAEA;;AAEA,8EAA8E,wGAAwG;;AAEtL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,8EAA8E,uEAAuE;AACrJ;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oFAAoF,wGAAwG;;AAE5L;AACA;AACA;AACA,oFAAoF,uEAAuE;AAC3J;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yEAAyE,wFAAwF;AACjK;;AAEA,+CAA+C,QAAQ;AACvD;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA,qDAAqD;AACrD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,4DAA4D;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,2DAA2D,QAAQ;AACnE;AACA;AACA;AACA;;AAEA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,kCAAkC,SAAS;AAC3C;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,kCAAkC,SAAS;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D;AAC1D;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,gDAAgD;AACtH,4EAA4E,gDAAgD;AAC5H;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2BAA2B;;AAE3B;AACA;;AAEA;;AAEA;AACA,2CAA2C,SAAS;AACpD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,0DAA0D,eAAe;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,uBAAuB,SAAS;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb,SAAS;AACT,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,2BAA2B;;AAE3B;AACA;;AAEA;;AAEA;AACA,2CAA2C,SAAS;AACpD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,0DAA0D,eAAe;AACzE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,uBAAuB,SAAS;AAChC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb,SAAS;AACT,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,wCAAwC,QAAQ,YAAY;AAC5D;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,+BAA+B;AAC/B;;AAEA;AACA;AACA;AACA;AACA,gDAAgD,QAAQ;AACxD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,6CAA6C,iBAAiB;AAC9D;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,iBAAiB;AAC9D;AACA;AACA;AACA;AACA;;AAEA,sEAAsE,uCAAuC;AAC7G,oEAAoE,uCAAuC;AAC3G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,0BAA0B;;AAE1B;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB;AACjB,yCAAyC,QAAQ;;AAEjD;AACA;AACA,oCAAoC;AACpC;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,mCAAmC,QAAQ;AAC3C,qDAAqD,gBAAgB;AACrE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,yCAAyC,QAAQ;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,qDAAqD,gBAAgB;AACrE;;AAEA,mFAAmF,uCAAuC;AAC1H;AACA,+BAA+B,SAAS;AACxC;AACA,oCAAoC;AACpC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2CAA2C,QAAQ;AACnD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,+BAA+B;AAC/B;;AAEA;AACA;AACA;;AAEA,0CAA0C,QAAQ;AAClD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,SAAS;AACjD,iCAAiC;AACjC,yBAAyB;AACzB,iCAAiC;AACjC,yBAAyB;AACzB;AACA;AACA;AACA,mDAAmD;AACnD,yBAAyB;AACzB,mDAAmD;AACnD,yBAAyB;AACzB;AACA;;AAEA,0DAA0D,SAAS;AACnE;AACA;AACA;AACA,2BAA2B,OAAO;AAClC;AACA;AACA;AACA;AACA,kCAAkC;AAClC,uBAAuB,OAAO;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,kEAAkE,kJAAkJ;;AAEpN;AACA;AACA;AACA;AACA,kEAAkE,iHAAiH;;AAEnL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,+CAA+C,OAAO;AACtD;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,sCAAsC,oBAAoB;AAC1D;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,8CAA8C,mBAAmB;AACjE;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAkB,gBAAgB,SAAS;AAC3C;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;;AAEA;AACA,0DAA0D;;AAE1D;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,qBAAqB;;AAErB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wDAAwD;AACxD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,sCAAsC;AACtC;AACA;AACA;;AAEA,kEAAkE,SAAS;AAC3E;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,+DAA+D;AAC/D,4CAA4C;AAC5C;AACA;AACA;AACA;AACA,wDAAwD;AACxD;AACA;AACA,8BAA8B;AAC9B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,sCAAsC;AACtC;AACA;AACA;;AAEA,kEAAkE,SAAS;AAC3E;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,uCAAuC,kBAAkB;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD;AACtD;AACA;AACA;AACA;AACA,uCAAuC,SAAS;;AAEhD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;;AAErB;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA,uCAAuC,kBAAkB;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,uCAAuC,SAAS;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,SAAS;AACT,KAAK;;AAEL;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,kBAAkB,gBAAgB,SAAS;AAC3C;AACA;AACA,mBAAmB,OAAO;AAC1B;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAAkD,SAAS;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,sCAAsC,SAAS;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,gBAAgB,aAAa;AAC5D;AACA,8BAA8B;AAC9B,SAAS;AACT,8BAA8B;AAC9B;AACA,uBAAuB,eAAe;AACtC,uDAAuD;AACvD;AACA;AACA;AACA;AACA,0CAA0C,SAAS;AACnD;AACA;;AAEA;AACA;AACA;AACA,sBAAsB,SAAS,SAAS;AACxC,uBAAuB,eAAe;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,8DAA8D,kJAAkJ;AAChN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,iHAAiH;AAC/K;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;;AAEvB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,4DAA4D,kFAAkF;AAC9I;AACA,0BAA0B,aAAa,YAAY,cAAc;AACjE;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,gDAAgD,kFAAkF;AAClI;;AAEA,iEAAiE,QAAQ;AACzE;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,6CAA6C;AAC7C,OAAO;AACP;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB,YAAY,SAAS;AACtC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,2DAA2D;AAC3D;AACA;AACA;AACA,6BAA6B,SAAS;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,uBAAuB;AACjD;AACA,6BAA6B,YAAY,SAAS;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,6BAA6B,cAAc,WAAW;AACtD;AACA;AACA,2DAA2D;AAC3D;AACA;AACA;AACA;AACA;AACA,uBAAuB,SAAS;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,uBAAuB;AACrC;AACA;;AAEA;AACA;AACA;;AAEA;AACA,4CAA4C,2EAA2E;AACvH,KAAK;AACL,2CAA2C,gCAAgC;AAC3E;;AAEA;AACA;AACA,2CAA2C;;AAE3C;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,+EAA+E,wGAAwG;AACvL;AACA;AACA;;AAEA,+EAA+E,uEAAuE;AACtJ;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,gHAAgH;AAChH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,4JAA4J;;AAE5J;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,sDAAsD,4CAA4C;AAClG;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,+CAA+C,QAAQ;AACvD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,sDAAsD,uJAAuJ;AAC7M;AACA;AACA;AACA,0DAA0D,uJAAuJ;AACjN;AACA;AACA,0DAA0D,uJAAuJ;AACjN;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,iDAAiD;AACjD;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,kDAAkD,QAAQ;AAC1D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,4FAA4F;AAC5F;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,0BAA0B,WAAW;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,gCAAgC;AAChC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,0EAA0E;AAC1E;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,uDAAuD,cAAc,EAAE;AACvE;;AAEA;AACA;AACA;AACA,2GAA2G;AAC3G;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,6EAA6E,eAAe;AAC5F;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,gFAAgF;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;;AAET;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA,uEAAuE;AACvE;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,6BAA6B;AAC7B,6DAA6D;AAC7D;;AAEA;AACA;AACA;AACA,cAAc;AACd;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL,uCAAuC;AACvC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,0CAA0C;AAC1C;AACA;AACA,qDAAqD,QAAQ;AAC7D;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,uDAAuD;AACvD;;AAEA;AACA;;AAEA;AACA,mDAAmD,QAAQ;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,yDAAyD,QAAQ;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,wCAAwC;;AAExC,oCAAoC;AACpC,6CAA6C;AAC7C,4CAA4C;;AAE5C;AACA;AACA;;AAEA;AACA,0CAA0C;AAC1C;;AAEA;AACA;;AAEA;AACA,sBAAsB;AACtB,4BAA4B;AAC5B;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,mDAAmD;AACnD;AACA;AACA,oDAAoD;AACpD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,2DAA2D;AAC3D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA,6DAA6D;AAC7D;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,0BAA0B,6BAA6B;AACvD,iCAAiC,6BAA6B;AAC9D,0CAA0C,6BAA6B;AACvE,oCAAoC,6BAA6B;AACjE,2CAA2C,6BAA6B;AACxE,2BAA2B,6BAA6B;AACxD,kCAAkC,6BAA6B;;AAE/D,8BAA8B,wCAAwC;AACtE,kBAAkB,qCAAqC;AACvD,mBAAmB,mCAAmC;AACtD,oBAAoB,wBAAwB;AAC5C,oBAAoB,wBAAwB;AAC5C,kBAAkB,iCAAiC;AACnD,mBAAmB,wBAAwB;AAC3C,gBAAgB,wBAAwB;AACxC,iBAAiB,yBAAyB;AAC1C,mBAAmB,gEAAgE;AACnF,kBAAkB,yBAAyB;AAC3C,iBAAiB,wBAAwB;AACzC,qBAAqB;AACrB,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,kDAAkD;AAClD;;AAEA;AACA;AACA;AACA;;AAEA,6CAA6C;AAC7C;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH;AACA;;AAEA,yKAAyK;AACzK;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,mBAAmB,WAAW;AAC9B;AACA;;AAEA;;AAEA,uBAAuB,wBAAwB;AAC/C;AACA;AACA;;;AAGA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,uBAAuB,WAAW;;AAElC;AACA;;AAEA,2BAA2B,iBAAiB;;AAE5C;;AAEA,+BAA+B,eAAe;;AAE9C;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,mBAAmB,WAAW;AAC9B;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,sEAAsE;AACtE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,sBAAsB,0BAA0B;AAChD,kBAAkB,0BAA0B;AAC5C,sBAAsB,0BAA0B;AAChD,mBAAmB,0BAA0B;AAC7C,mBAAmB,yBAAyB;AAC5C,oBAAoB;AACpB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,oEAAoE;AACpE;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,qBAAqB,0BAA0B;AAC/C,kBAAkB,0BAA0B;AAC5C,mBAAmB,yBAAyB;AAC5C,oBAAoB;AACpB;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,mBAAmB,OAAO;;AAE1B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,mBAAmB,OAAO;;AAE1B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;;AAGA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,mBAAmB,OAAO;;AAE1B;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,mBAAmB,OAAO;;AAE1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA,sCAAsC,UAAU,EAAE;;AAElD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe;AACf;;AAEA;AACA;;AAEA,kBAAkB,+BAA+B,OAAO;AACxD;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA,mDAAmD,QAAQ;AAC3D;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,oDAAoD,QAAQ;AAC5D;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,wEAAwE;AACxE;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE;AACvE;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,eAAe;AACf;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,sBAAsB,+BAA+B,OAAO;AAC5D;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gDAAgD,QAAQ;AACxD;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,wDAAwD,QAAQ;AAChE;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA,kCAAkC;AAClC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,sDAAsD;AACtD;AACA;AACA;AACA;AACA;AACA;;AAEA,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gDAAgD;AAChD;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,iDAAiD;AACjD;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,8CAA8C;AAC9C;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gDAAgD;AAChD;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,8DAA8D;AAC9D;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,+DAA+D;AAC/D;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,4DAA4D;AAC5D;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,8DAA8D;AAC9D;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,+FAA+F;AAC/F;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;;AAExB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,cAAc;AACd;;AAEA;AACA;;AAEA,yCAAyC,sBAAsB;AAC/D;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,oDAAoD;AACpD,qCAAqC;AACrC;;AAEA,wDAAwD;AACxD,0CAA0C;AAC1C,oCAAoC;;AAEpC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,+FAA+F;;AAE/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,+BAA+B,EAAE,UAAU,EAAE,UAAU,EAAE;AACzD;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,uCAAuC,OAAO;AAC9C;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,8BAA8B,qBAAqB;AACnD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,kCAAkC,mBAAmB;AACrD;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kCAAkC,cAAc;AAChD;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,uBAAuB;;AAEvB;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,uBAAuB;;AAEvB;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kCAAkC;;AAElC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,CAAC;AACD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,sCAAsC,gBAAgB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+EAA+E;AAC/E,qEAAqE;AACrE,sEAAsE,gBAAgB;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sGAAsG,GAAG,yBAAyB;AAClI;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,CAAC;AACD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,wGAAwG;AACxG;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,yGAAyG;AACzG;AACA,oCAAoC;;AAEpC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT,wBAAwB;AACxB;;AAEA;AACA;;AAEA;;AAEA,yCAAyC,QAAQ;AACjD;;AAEA;AACA;;AAEA;AACA,sBAAsB;AACtB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,sBAAsB,2BAA2B;AACjD,aAAa;AACb;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA,mBAAmB,UAAU;;AAE7B,2BAA2B,UAAU;;AAErC,+BAA+B,UAAU;;AAEzC;;AAEA,mCAAmC,OAAO;AAC1C;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,mCAAmC,mBAAmB;;AAEtD;AACA;AACA;;AAEA;AACA,iDAAiD;AACjD,iDAAiD;AACjD,iDAAiD;AACjD;;;AAGA,sCAAsC,eAAe;AACrD;;AAEA;;AAEA;;AAEA;;;AAGA;;AAEA;AACA;AACA;AACA,0CAA0C,QAAQ;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,QAAQ;AAC/B;AACA,0CAA0C,QAAQ;AAClD;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA,4DAA4D,QAAQ;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,QAAQ;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,QAAQ;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,QAAQ;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,gCAAgC;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,QAAQ;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mDAAmD;AACnD,uBAAuB,aAAa;AACpC,kDAAkD,QAAQ;AAC1D;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,mEAAmE,QAAQ;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,mEAAmE,QAAQ;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,QAAQ;AAC1D;AACA;AACA;AACA;AACA;AACA,qCAAqC,gBAAgB,gBAAgB,OAAO;AAC5E,kDAAkD,iBAAiB;AACnE,6CAA6C;AAC7C,qCAAqC,6CAA6C;AAClF;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;AAKA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yCAAyC,kBAAkB;AAC3D;AACA;AACA;AACA;AACA,sBAAsB;AACtB,0BAA0B;AAC1B,wBAAwB;AACxB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAgB,SAAS;AACzB;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yCAAyC,QAAQ;AACjD;AACA;AACA,yCAAyC,QAAQ;AACjD;AACA;AACA;AACA;;AAEA;AACA,sCAAsC,QAAQ;AAC9C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,iCAAiC,uBAAuB;AACxD;;AAEA;;AAEA;AACA,sBAAsB;AACtB,0BAA0B;AAC1B,wBAAwB;;AAExB;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA,6CAA6C;AAC7C;AACA;AACA,6BAA6B;AAC7B,6BAA6B;AAC7B,6BAA6B;;AAE7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,kEAAkE;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,uBAAuB,cAAc;AACrC,2BAA2B,cAAc;AACzC;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iDAAiD;AACjD;AACA;AACA;AACA;AACA,uCAAuC,QAAQ;AAC/C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,uCAAuC,QAAQ;AAC/C;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,kCAAkC,OAAO;AACzC,uBAAuB,OAAO;AAC9B;AACA,iCAAiC,QAAQ;AACzC,qCAAqC,QAAQ;AAC7C,yCAAyC,QAAQ;AACjD;AACA;AACA;AACA,+CAA+C,sBAAsB;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC;AACrC,iCAAiC;AACjC,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB,iBAAiB;AACjB;AACA,aAAa;AACb,SAAS;AACT;;AAEA;AACA;AACA,uCAAuC,QAAQ;AAC/C,iCAAiC;;AAEjC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,kCAAkC,OAAO;AACzC,uBAAuB,OAAO;AAC9B;AACA,iCAAiC,QAAQ;AACzC,qCAAqC,QAAQ;AAC7C,yCAAyC,QAAQ;AACjD;AACA;AACA;AACA,+CAA+C,sBAAsB;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC,iCAAiC;AACjC,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB,iBAAiB;AACjB;AACA,aAAa;AACb,SAAS;AACT;;AAEA;AACA;AACA,mBAAmB,aAAa;AAChC,uBAAuB,aAAa;AACpC,2BAA2B,YAAY;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,mBAAmB,aAAa;AAChC,uBAAuB,YAAY;AACnC,2BAA2B,aAAa;AACxC;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,aAAa;AAChC,uBAAuB,YAAY;AACnC,2BAA2B,aAAa;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,OAAO;AAC/C;AACA;AACA;AACA;;AAEA,uBAAuB,OAAO;AAC9B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;;AAErB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,uCAAuC,OAAO;AAC9C;AACA;AACA;AACA;;AAEA,uBAAuB,QAAQ;AAC/B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,uCAAuC,OAAO;AAC9C;AACA;AACA;AACA;;AAEA,wBAAwB,QAAQ;AAChC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,6CAA6C,SAAS;AACtD,6BAA6B;AAC7B;AACA,aAAa,uBAAuB;AACpC;AACA;AACA;AACA;AACA,aAAa,uBAAuB;AACpC;AACA;AACA;AACA;AACA,aAAa,uBAAuB;AACpC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAwB,SAAS;AACjC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,4BAA4B,qBAAqB;AACjD;AACA;AACA,gCAAgC,kBAAkB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,4BAA4B,kBAAkB;AAC9C;AACA,gCAAgC,qBAAqB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA,4CAA4C,UAAU;AACtD;AACA;AACA;;AAEA;;AAEA;;;AAGA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,mCAAmC;;AAEnC;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,qBAAqB;AACrB,yBAAyB;AACzB,uBAAuB;;AAEvB;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,yCAAyC,kBAAkB;AAC3D;AACA;AACA;AACA;AACA,sBAAsB;AACtB,0BAA0B;AAC1B,wBAAwB;AACxB;AACA;;AAEA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yCAAyC,QAAQ;AACjD;AACA;;AAEA,yCAAyC,QAAQ;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,sCAAsC,QAAQ;AAC9C;AACA;;AAEA;AACA,iCAAiC,uBAAuB;AACxD;AACA;;AAEA;AACA,sBAAsB;AACtB,0BAA0B;AAC1B,wBAAwB;;AAExB;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA,sCAAsC;AACtC;AACA;AACA,4CAA4C;AAC5C,+DAA+D;AAC/D;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,6CAA6C;AAC7C;AACA;;AAEA,kBAAkB;AAClB,kBAAkB;AAClB,kBAAkB;;AAElB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,oEAAoE;AACpE;AACA;AACA;AACA;;AAEA,iDAAiD;AACjD;AACA;AACA;AACA;AACA,uCAAuC,QAAQ;AAC/C;AACA;AACA;AACA;;AAEA;;AAEA;AACA,oCAAoC;AACpC;AACA;;AAEA;AACA;AACA;;AAEA,6EAA6E,SAAS;AACtF;AACA,iFAAiF,QAAQ;AACzF;AACA,qFAAqF,QAAQ;AAC7F;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,0CAA0C,QAAQ;AAClD;AACA;AACA;AACA,oEAAoE;AACpE;AACA;AACA;AACA,kEAAkE;AAClE;AACA;AACA;AACA,oEAAoE;AACpE;AACA;;AAEA;AACA;AACA,kBAAkB,aAAa;AAC/B,sBAAsB,YAAY;AAClC,0BAA0B,aAAa;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,uCAAuC,QAAQ;AAC/C;AACA;;AAEA;;AAEA;AACA;AACA,mBAAmB,aAAa;AAChC,uBAAuB,aAAa;AACpC,2BAA2B,YAAY;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,6CAA6C,SAAS;AACtD,6BAA6B;AAC7B;AACA,aAAa,uBAAuB;AACpC;AACA;AACA;AACA;AACA,aAAa,uBAAuB;AACpC;AACA;AACA;AACA;AACA,aAAa,uBAAuB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAwB,SAAS;AACjC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,4BAA4B,qBAAqB;AACjD;AACA;AACA,gCAAgC,kBAAkB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,4BAA4B,kBAAkB;AAC9C;AACA,gCAAgC,qBAAqB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB;;AAEnB;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA,4CAA4C,UAAU;AACtD;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA,qBAAqB;AACrB,2BAA2B;AAC3B,uBAAuB;;AAEvB;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA,0FAA0F;AAC1F;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA,qBAAqB;;AAErB;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB;;AAEpB;;AAEA;AACA,oBAAoB;AACpB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,yBAAyB;AACzB,oBAAoB;;AAEpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA,iCAAiC;AACjC;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA,KAAK;;;AAGL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,yBAAyB;;AAEzB;AACA;;AAEA,sBAAsB;AACtB;AACA;;AAEA,uCAAuC,QAAQ;AAC/C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,gDAAgD,QAAQ;AACxD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,kCAAkC;;AAElC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA,+BAA+B;AAC/B;AACA,0DAA0D,QAAQ;AAClE;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,8DAA8D,QAAQ;AACtE;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA,6BAA6B;;AAE7B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,mIAAmI;AACnI,iIAAiI;;AAEjI,mIAAmI;AACnI,kIAAkI;;AAElI,mIAAmI;AACnI,kIAAkI;;AAElI;AACA;;AAEA,+CAA+C;AAC/C;AACA;AACA;;AAEA,8CAA8C,QAAQ;AACtD;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,2BAA2B,YAAY;AACvC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,6EAA6E,uEAAuE;;AAEpJ;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,oFAAoF;AACpF;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,oDAAoD,QAAQ;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,kCAAkC,QAAQ;AAC1C;;AAEA;;AAEA,mFAAmF,SAAS;AAC5F,4EAA4E,QAAQ;AACpF;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yDAAyD;AACzD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX,OAAO;AACP,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,kDAAkD,QAAQ;AAC1D;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,sDAAsD;AACtD;AACA;;AAEA;AACA,2FAA2F;AAC3F;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA,8DAA8D;AAC9D;AACA;AACA;AACA,uFAAuF;AACvF;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,2DAA2D,SAAS;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,gCAAgC;;AAEhC;AACA;AACA,sCAAsC;AACtC,0DAA0D,SAAS;AACnE;AACA;AACA;AACA;AACA,gCAAgC;;AAEhC;AACA;AACA;;AAEA;;AAEA;AACA;AACA,iDAAiD,QAAQ;AACzD;AACA;AACA;;AAEA;AACA;AACA,mDAAmD,QAAQ;AAC3D;AACA;AACA;;AAEA;AACA;AACA,qDAAqD,QAAQ;AAC7D;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,mDAAmD;AACnD;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA,oCAAoC;AACpC;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,uEAAuE;AACvE;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;;AAEA,uEAAuE;AACvE;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,+BAA+B,2CAA2C;AAC1E,+BAA+B,2DAA2D;;AAE1F;AACA;;AAEA;AACA,SAAS;AACT;AACA,KAAK;;AAEL;;AAEA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,sBAAsB;;;AAGlD;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,YAAY;AACZ;;AAEA;AACA;AACA,gDAAgD,QAAQ;AACxD;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;;AAEA;AACA;;AAEA;AACA;AACA,8CAA8C,QAAQ;AACtD;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA,2BAA2B;;AAE3B,mBAAmB;AACnB,oBAAoB;;AAEpB,0BAA0B;AAC1B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yBAAyB;AACzB;AACA,yBAAyB;AACzB;AACA;;AAEA;AACA,8IAA8I;;AAE9I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kDAAkD;AAClD,kDAAkD;AAClD,4CAA4C;AAC5C,6CAA6C;AAC7C,8CAA8C;AAC9C,yDAAyD;AACzD;AACA,8CAA8C;AAC9C,0CAA0C;AAC1C,yCAAyC;AACzC,8CAA8C;AAC9C,0CAA0C;AAC1C,8CAA8C;AAC9C,0CAA0C;AAC1C,4CAA4C;AAC5C,8CAA8C;AAC9C,6CAA6C;AAC7C,yCAAyC;AACzC,6CAA6C;AAC7C,0CAA0C;AAC1C,sDAAsD;AACtD,yCAAyC;AACzC,yCAAyC;AACzC,yCAAyC;AACzC,8CAA8C;AAC9C,6CAA6C;;AAE7C;AACA;AACA;;AAEA;;AAEA;;AAEA;;;AAGA;;AAEA;;AAEA;;AAEA,uBAAuB;AACvB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA,6BAA6B;AAC7B;AACA,KAAK;;AAEL,wCAAwC;AACxC;;AAEA,6CAA6C;AAC7C;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mFAAmF;AACnF;;AAEA;;AAEA;AACA;AACA,oDAAoD,QAAQ;AAC5D;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL,0CAA0C;AAC1C;;AAEA,sIAAsI;AACtI;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL,sCAAsC;AACtC;AACA,8BAA8B;AAC9B;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mCAAmC;AACnC;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL,iCAAiC;AACjC;AACA,KAAK;;AAEL,kCAAkC;AAClC;;AAEA;AACA,KAAK;;AAEL,wCAAwC;AACxC;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,kDAAkD;AAClD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;;AAEA;AACA;;AAEA;AACA,mGAAmG;;AAEnG;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,iCAAiC;AACjC;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iDAAiD;;AAEjD;AACA;;AAEA;;AAEA;;AAEA;;;AAGA;;AAEA,kCAAkC;;AAElC;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;;AAEZ;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,qDAAqD;;AAErD;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA,KAAK;;AAEL,0BAA0B;AAC1B;AACA;AACA;;AAEA;AACA,KAAK;;AAEL,0BAA0B;AAC1B;AACA;AACA;;AAEA;AACA,KAAK;;AAEL,mDAAmD;AACnD;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL,qCAAqC;AACrC;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA,KAAK;;AAEL,sDAAsD;AACtD;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL,kCAAkC;AAClC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,OAAO;AACP,KAAK;;AAEL,oCAAoC;AACpC;;AAEA;;AAEA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA,QAAQ;;AAER;;AAEA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,QAAQ;;AAER;AACA,KAAK;;AAEL,yCAAyC;AACzC;AACA,8CAA8C,QAAQ;AACtD;AACA;;AAEA;;AAEA;AACA,KAAK;;AAEL,6CAA6C;AAC7C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;;AAErB;AACA;AACA;AACA,2DAA2D,QAAQ;AACnE;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL,yCAAyC,iBAAiB;AAC1D;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,yBAAyB;;AAEzB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,wDAAwD,gBAAgB;AACxE;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,wBAAwB;AACxB,KAAK;;AAEL;AACA,sCAAsC;AACtC;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,6BAA6B;;AAE7B;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA,8BAA8B;AAC9B;;AAEA;;AAEA;;AAEA,0BAA0B;;AAE1B;;AAEA,mDAAmD,QAAQ;AAC3D;;AAEA;;AAEA,yFAAyF,SAAS;AAClG;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL,qEAAqE;AACrE,sBAAsB;AACtB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,KAAK;;AAEL,uBAAuB;AACvB;;AAEA;;AAEA;AACA;AACA,0BAA0B;;AAE1B;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;;AAEL,0BAA0B;AAC1B;;AAEA;;AAEA;AACA;AACA,0BAA0B;;AAE1B;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;;AAEL,kCAAkC;AAClC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,KAAK;;AAEL,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL,2CAA2C;AAC3C;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL,kCAAkC;AAClC;AACA,iCAAiC;AACjC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;;AAEL,uCAAuC;AACvC;AACA;;AAEA;AACA,KAAK;;AAEL,sCAAsC;AACtC;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,KAAK;;AAEL,wCAAwC;AACxC;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,2BAA2B;;AAE3B;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA,wCAAwC;AACxC;AACA;AACA,QAAQ;;AAER;AACA;AACA,QAAQ;;AAER;AACA,6CAA6C;AAC7C;AACA;AACA;AACA,KAAK;;AAEL,wCAAwC;AACxC;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA,KAAK;;AAEL,kCAAkC;AAClC;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL,2BAA2B;AAC3B;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,YAAY;AACZ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uEAAuE,mBAAmB;AAClH,wBAAwB,+EAA+E;AACvG,sBAAsB,8EAA8E;AACpG;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,eAAe;AACf;AACA;;AAEA;AACA;;AAEA;AACA;AACA,YAAY;AACZ,KAAK;;AAEL,oCAAoC;AACpC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;;AAEL,2BAA2B;AAC3B;AACA;AACA;AACA;AACA,KAAK;;AAEL,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,KAAK;;AAEL,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA,2BAA2B;AAC3B;AACA;;AAEA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,8BAA8B;AAC9B;AACA;;AAEA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,6BAA6B;AAC7B;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,oCAAoC;AACpC;AACA;AACA;AACA;AACA,2BAA2B;AAC3B,SAAS;AACT,KAAK;;AAEL,mCAAmC;AACnC;AACA;AACA;AACA;AACA,2BAA2B;AAC3B,SAAS;AACT,KAAK;;AAEL,iCAAiC;AACjC;AACA;AACA;AACA;AACA,2BAA2B;AAC3B,SAAS;AACT,KAAK;;AAEL,qCAAqC;AACrC;AACA;AACA;;AAEA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,oCAAoC;AACpC;AACA;AACA;;AAEA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,kCAAkC;AAClC;AACA;;AAEA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,gCAAgC;AAChC;AACA;AACA;;AAEA;;AAEA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA,+BAA+B;AAC/B;AACA;AACA,SAAS;AACT,KAAK;;AAEL,8BAA8B;AAC9B;AACA;AACA,SAAS;AACT,KAAK;;AAEL,8BAA8B;AAC9B;AACA;AACA,SAAS;AACT,KAAK;;AAEL,gCAAgC;AAChC;AACA;AACA,SAAS;AACT,KAAK;;AAEL,iCAAiC;AACjC;AACA;AACA,SAAS;AACT,KAAK;AACL,gCAAgC;AAChC;AACA;AACA,SAAS;AACT,KAAK;AACL,gCAAgC;AAChC;AACA;AACA,SAAS;AACT,KAAK;AACL,gCAAgC;AAChC;AACA;AACA,SAAS;AACT,KAAK;;AAEL,kCAAkC;AAClC;AACA;AACA,SAAS;AACT,KAAK;;AAEL,gCAAgC;AAChC;AACA;AACA,SAAS;AACT,KAAK;;AAEL,+BAA+B;AAC/B;AACA;AACA,SAAS;AACT,KAAK;;AAEL,qCAAqC;AACrC;AACA;AACA,SAAS;AACT,KAAK;;AAEL,2BAA2B;AAC3B;AACA;AACA,SAAS;AACT,KAAK;;AAEL,4BAA4B;AAC5B;AACA;AACA,SAAS;AACT,KAAK;;AAEL,iCAAiC;AACjC;AACA;AACA,SAAS;AACT,KAAK;;AAEL,8BAA8B;AAC9B;AACA;AACA,SAAS;AACT,KAAK;;AAEL,kCAAkC;AAClC;AACA;AACA,SAAS;AACT,KAAK;;AAEL,oCAAoC;AACpC;AACA;;AAEA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,sCAAsC;AACtC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,2BAA2B,mCAAmC,OAAO;AACrE;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;;AAEf;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL,uCAAuC;AACvC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,2BAA2B,mCAAmC,OAAO;AACrE;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;;AAEf;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL,kCAAkC;AAClC;AACA;;AAEA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,mCAAmC;AACnC;AACA;;AAEA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,sCAAsC;AACtC;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,uCAAuC;AACvC;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,0CAA0C;AAC1C;AACA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,qCAAqC;AACrC;AACA;;AAEA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,qCAAqC;AACrC;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA,iDAAiD,QAAQ;AACzD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,yCAAyC;AACzC;AACA;;AAEA;;AAEA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,kCAAkC;AAClC;AACA;AACA,SAAS;AACT,KAAK;;AAEL,uCAAuC;AACvC;AACA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,kCAAkC;AAClC;AACA;AACA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,qCAAqC;AACrC;AACA;AACA;;AAEA;AACA;AACA,gDAAgD,QAAQ;AACxD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL;AACA,0CAA0C;AAC1C;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,kCAAkC;AAClC;AACA;;AAEA;;AAEA;;AAEA;;AAEA,SAAS;;AAET;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,SAAS;;AAET,KAAK;;AAEL,yCAAyC;AACzC;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,yCAAyC;AACzC;AACA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,kCAAkC;AAClC;AACA;AACA,SAAS;AACT,KAAK;;AAEL,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,oCAAoC;AACpC;AACA;;AAEA;AACA,SAAS;;AAET;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT,KAAK;;AAEL,6BAA6B;AAC7B;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,8BAA8B;AAC9B;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,kCAAkC;AAClC;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,iCAAiC;AACjC;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,gCAAgC;AAChC;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,qCAAqC;AACrC;AACA;AACA,SAAS;AACT,KAAK;;AAEL,qCAAqC;AACrC;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA,uCAAuC;AACvC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,uCAAuC;AACvC;AACA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,yCAAyC;AACzC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,0CAA0C;AAC1C;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,uCAAuC;AACvC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,wCAAwC;AACxC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,sCAAsC;AACtC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,sCAAsC;AACtC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,0CAA0C;AAC1C;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,uCAAuC;AACvC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,mCAAmC;AACnC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,mCAAmC;AACnC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,mCAAmC;AACnC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,uCAAuC;AACvC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,oCAAoC;AACpC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,gCAAgC;AAChC;AACA;AACA;AACA,SAAS;AACT,KAAK;;;AAGL,oCAAoC;AACpC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,sCAAsC;AACtC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,iCAAiC;AACjC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,kCAAkC;AAClC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,kCAAkC;AAClC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,sCAAsC;AACtC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,mCAAmC;AACnC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,+BAA+B;AAC/B;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,iCAAiC;AACjC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,iCAAiC;AACjC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,qCAAqC;AACrC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,qCAAqC;AACrC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,kCAAkC;AAClC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,8BAA8B;AAC9B;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,mCAAmC;AACnC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,gCAAgC;AAChC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,+BAA+B;AAC/B;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,oCAAoC;AACpC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,iCAAiC;AACjC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,gCAAgC;AAChC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA,oCAAoC;AACpC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,iCAAiC;AACjC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,mCAAmC;AACnC;AACA;;AAEA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,oCAAoC;AACpC;AACA;;AAEA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,mCAAmC;AACnC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,kCAAkC;AAClC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,uCAAuC;AACvC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,gCAAgC;AAChC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,mCAAmC;AACnC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,uCAAuC;AACvC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,oCAAoC;AACpC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,qCAAqC;AACrC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,+BAA+B;AAC/B;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,iCAAiC;AACjC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,gCAAgC;AAChC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,mCAAmC;AACnC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,kCAAkC;AAClC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,gCAAgC;AAChC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,iCAAiC;AACjC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,gCAAgC;AAChC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,kCAAkC;AAClC;AACA;AACA,SAAS;AACT,KAAK;;AAEL,gCAAgC;AAChC;AACA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,qCAAqC;AACrC;AACA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,kCAAkC;AAClC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,uCAAuC;AACvC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA,qCAAqC;AACrC;AACA;;AAEA;AACA;AACA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,oCAAoC;AACpC;AACA;;AAEA;AACA;AACA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,mCAAmC;AACnC;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,mCAAmC;AACnC;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,yCAAyC;AACzC;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,0CAA0C;AAC1C;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,0CAA0C;AAC1C;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,gDAAgD;AAChD;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,kCAAkC;AAClC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,kCAAkC;AAClC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,kCAAkC;AAClC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,kCAAkC;AAClC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,kCAAkC;AAClC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,kCAAkC;AAClC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,kCAAkC;AAClC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,kCAAkC;AAClC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,kCAAkC;AAClC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,kCAAkC;AAClC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,kCAAkC;AAClC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,qCAAqC;AACrC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,oCAAoC;AACpC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,qCAAqC;AACrC;AACA;AACA,SAAS;AACT,KAAK;;AAEL,oCAAoC;AACpC;AACA;AACA,SAAS;AACT,KAAK;;AAEL,kCAAkC;AAClC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,oCAAoC;AACpC;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA,gEAAgE;AAChE,SAAS;AACT,KAAK;;AAEL,mCAAmC;AACnC;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA,8DAA8D;AAC9D,SAAS;AACT,KAAK;;AAEL,wCAAwC;AACxC;AACA;;AAEA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,uCAAuC;AACvC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,8BAA8B;AAC9B;AACA;AACA,SAAS;AACT,KAAK;;AAEL,gCAAgC;AAChC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,iCAAiC;AACjC;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,mEAAmE;AACnE,SAAS;AACT,KAAK;;AAEL,0CAA0C;AAC1C;AACA;;AAEA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,yCAAyC;AACzC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,mCAAmC;AACnC;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,yCAAyC;AACzC;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,uCAAuC;AACvC;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,wCAAwC;AACxC;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,0CAA0C;AAC1C;AACA;AACA,SAAS;AACT,KAAK;;AAEL,sCAAsC;AACtC;AACA;AACA,SAAS;AACT,KAAK;;AAEL,mCAAmC;AACnC;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,mCAAmC;AACnC;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,uCAAuC;AACvC;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,+BAA+B;AAC/B;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,yCAAyC;AACzC;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,4CAA4C;AAC5C;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,4CAA4C;AAC5C;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,mCAAmC;AACnC;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,oCAAoC;AACpC;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,iCAAiC;AACjC;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,mCAAmC;AACnC;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,mCAAmC;AACnC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,mCAAmC;AACnC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,kCAAkC;AAClC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,iCAAiC;AACjC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,kCAAkC;AAClC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,wCAAwC;AACxC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,mCAAmC;AACnC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,kCAAkC;AAClC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,oCAAoC;AACpC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,mCAAmC;AACnC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,oCAAoC;AACpC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,mCAAmC;AACnC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,kCAAkC;AAClC;AACA;AACA,SAAS;AACT,KAAK;;AAEL,iCAAiC;AACjC;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,sCAAsC;AACtC;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,qCAAqC;AACrC;AACA;AACA;;AAEA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,qCAAqC;AACrC;AACA;AACA,SAAS;AACT,KAAK;;AAEL,qCAAqC;AACrC;AACA;AACA,SAAS;AACT,KAAK;;AAEL,uCAAuC;AACvC;AACA;AACA;;AAEA;;AAEA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,mCAAmC;AACnC;AACA;AACA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,kCAAkC;AAClC;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,mCAAmC;AACnC;AACA;AACA;;AAEA;;AAEA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,kCAAkC;AAClC;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA,iCAAiC;AACjC;AACA;AACA,2DAA2D;AAC3D;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,uCAAuC;AACvC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,oCAAoC;AACpC;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,0CAA0C;AAC1C;AACA;AACA,SAAS;AACT,KAAK;;AAEL,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,gCAAgC;AAChC;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,kCAAkC;AAClC;AACA;;AAEA;;AAEA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,iCAAiC;AACjC;AACA;;AAEA;;AAEA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,2CAA2C;AAC3C;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,uCAAuC;AACvC;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,mCAAmC;AACnC;AACA;;AAEA;;AAEA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,kCAAkC;AAClC;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,0CAA0C;AAC1C;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,qEAAqE,oBAAoB,wBAAwB,mCAAmC;AACpJ;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,gCAAgC;AAChC;AACA;;AAEA;;AAEA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,iCAAiC;AACjC;AACA;;AAEA;;AAEA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,sCAAsC;AACtC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,8CAA8C;;AAE9C;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,iIAAiI;;AAEjI;AACA;AACA;AACA;AACA;;AAEA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,SAAS;AACT,KAAK;;AAEL,mCAAmC;AACnC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,6CAA6C;;AAE7C;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,SAAS;AACT,KAAK;;AAEL,2CAA2C;AAC3C;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,6CAA6C;;AAE7C;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,SAAS;AACT,KAAK;;AAEL,qCAAqC;AACrC;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,6CAA6C;;AAE7C;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,SAAS;AACT,KAAK;;AAEL,sCAAsC;AACtC;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,6CAA6C;;AAE7C;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,SAAS;AACT,KAAK;;AAEL,qCAAqC;AACrC;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,6CAA6C;;AAE7C;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,SAAS;AACT,KAAK;;AAEL,qCAAqC;AACrC;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,6CAA6C;;AAE7C;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,SAAS;AACT,KAAK;;AAEL,qCAAqC;AACrC;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,uCAAuC;AACvC;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,6CAA6C;;AAE7C;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,0BAA0B,qBAAqB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;;AAEA;AACA;;AAEA,SAAS;AACT,KAAK;;AAEL,uCAAuC;AACvC;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,6CAA6C;AAC7C;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,kCAAkC;AAClC;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,uCAAuC;AACvC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,4CAA4C;AAC5C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,2CAA2C;AAC3C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA;AACA,2BAA2B;AAC3B;;AAEA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,8CAA8C;AAC9C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,gDAAgD;AAChD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,sCAAsC;AACtC;AACA;AACA;;AAEA;;AAEA,yFAAyF,OAAO;AAChG,wFAAwF,OAAO;AAC/F,8FAA8F,OAAO;AACrG,2FAA2F,OAAO;AAClG,+FAA+F,OAAO;;AAEtG,kGAAkG,OAAO;AACzG,qGAAqG,OAAO;AAC5G,6GAA6G,OAAO;;AAEpH;;AAEA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;;AAEA,uFAAuF,OAAO;AAC9F,sFAAsF,OAAO;AAC7F,4FAA4F,OAAO;AACnG,yFAAyF,OAAO;AAChG,6FAA6F,OAAO;;AAEpG,gGAAgG,OAAO;AACvG,mGAAmG,OAAO;AAC1G,2GAA2G,OAAO;;AAElH;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,4BAA4B;AAC5B;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,sCAAsC;AACtC;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;AACA,SAAS;;AAET;AACA;;AAEA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,kCAAkC;AAClC;AACA,+BAA+B;;AAE/B;;AAEA,2BAA2B;AAC3B;;AAEA;;AAEA;;AAEA;AACA,uFAAuF;AACvF;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,uCAAuC;AACvC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,4CAA4C;AAC5C;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,8BAA8B;AAC9B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA,mCAAmC;AACnC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,oCAAoC;AACpC,mCAAmC;;AAEnC;AACA,sDAAsD;AACtD;AACA;AACA;;AAEA;;AAEA;;AAEA,2BAA2B;;AAE3B;AACA,yCAAyC,QAAQ,OAAO;AACxD;AACA;AACA;;AAEA,wDAAwD;AACxD;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA,iFAAiF;AACjF,+CAA+C;;AAE/C;AACA,KAAK;AACL;AACA;;AAEA,6DAA6D;AAC7D;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,0BAA0B,wBAAwB,EAAE;AACpD;;AAEA,0CAA0C;AAC1C;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,8DAA8D;;AAE9D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,CAAC;;AAED,qCAAqC;AACrC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,0DAA0D;AAC1D;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B,gDAAgD;AAChD;AACA;AACA;;AAEA,uDAAuD;AACvD;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B,6CAA6C;AAC7C;AACA;AACA;;AAEA,wDAAwD;AACxD;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B,8CAA8C;AAC9C;AACA;AACA;;AAEA,wDAAwD;AACxD;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B,8CAA8C;AAC9C;AACA;AACA;;AAEA;;AAEA,wDAAwD;AACxD;AACA;;AAEA,uDAAuD;AACvD;AACA;;AAEA,mEAAmE;AACnE;AACA;AACA;AACA;AACA;AACA;;AAEA,0EAA0E;AAC1E,kCAAkC;;AAElC;AACA,oBAAoB,kBAAkB;AACtC;AACA;;AAEA;;AAEA;AACA,kBAAkB,iBAAiB;AACnC;AACA;;AAEA,uBAAuB;;AAEvB,2CAA2C,kCAAkC;AAC7E,wCAAwC,kCAAkC;AAC1E,yCAAyC,kCAAkC;;AAE3E,qCAAqC,kCAAkC;AACvE,mCAAmC,mBAAmB;;AAEtD;AACA;;AAEA,mEAAmE;AACnE,2BAA2B,+BAA+B,eAAe,iBAAiB,mCAAmC;AAC7H;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,gEAAgE;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,6DAA6D;AAC7D;AACA;;AAEA;AACA;AACA,qDAAqD,QAAQ;AAC7D;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,gCAAgC,aAAa,cAAc,EAAE;AAC7D;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,sDAAsD;;AAEtD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D;;AAE1D;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA,gCAAgC,kBAAkB,cAAc,EAAE;AAClE;AACA;AACA;AACA;;AAEA,kCAAkC,aAAa,cAAc,EAAE;;AAE/D,wBAAwB;;AAExB,8BAA8B,aAAa,cAAc,EAAE;AAC3D;AACA;AACA,wBAAwB;;AAExB,kCAAkC,kCAAkC;AACpE,8BAA8B,kCAAkC;AAChE;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA,gFAAgF;AAChF;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,kDAAkD;AAClD;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;;AAEA,KAAK;AACL;;AAEA,6CAA6C;AAC7C;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,SAAS;AACT;AACA;;AAEA,qDAAqD;AACrD;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,6CAA6C;AAC7C;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,wDAAwD,QAAQ;AAChE;;AAEA;AACA;;AAEA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,sFAAsF;AACtF,mBAAmB;;AAEnB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,6CAA6C;AAC7C;AACA;AACA;AACA;;AAEA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA,sDAAsD;AACtD;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,sBAAsB,kBAAkB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA,eAAe;AACf;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA,oEAAoE;AACpE;AACA;AACA;AACA,GAAG,EAAE;;AAEL;AACA;;AAEA,wEAAwE;AACxE;;AAEA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,sBAAsB,oBAAoB;AAC1C;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,mEAAmE,QAAQ;;AAE3E;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;;AAEA,kDAAkD;AAClD;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,4CAA4C,QAAQ;AACpD;;AAEA,iDAAiD,QAAQ;AACzD;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA,4DAA4D;AAC5D;AACA;AACA;AACA;AACA;AACA;;AAEA,sDAAsD;AACtD;AACA;AACA;;AAEA,wCAAwC,QAAQ;AAChD;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,mDAAmD;AACnD;AACA;AACA;AACA;;AAEA;;AAEA;AACA,8BAA8B;;AAE9B;;AAEA;AACA;;AAEA,+BAA+B,kBAAkB;AACjD;;AAEA;AACA;AACA,4BAA4B,kBAAkB;AAC9C;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,wCAAwC;AACxC;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA,gCAAgC;AAChC;AACA;;AAEA;;AAEA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;;AAEA,yDAAyD;AACzD;AACA,6BAA6B;;AAE7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,gEAAgE;;AAEhE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA,gEAAgE;;AAEhE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA,eAAe;AACf;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe;AACf,aAAa,EAAE;AACf;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,OAAO;AACP,KAAK,EAAE;AACP;;AAEA,mDAAmD;AACnD,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,wDAAwD;AACxD;;AAEA,8CAA8C;AAC9C;AACA;AACA;AACA;;AAEA,4EAA4E;AAC5E;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,2EAA2E;AAC3E;AACA;AACA;;AAEA,wCAAwC,QAAQ;AAChD;AACA,qDAAqD,qBAAqB;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,kDAAkD;AAClD,cAAc;AACd;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,wEAAwE;AACxE;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,8BAA8B;AAC9B,0BAA0B;;AAE1B;;AAEA,wBAAwB,mBAAmB;AAC3C;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,4DAA4D,QAAQ;AACpE;;AAEA;AACA,kDAAkD;AAClD;;AAEA;AACA;;AAEA,oFAAoF,SAAS;AAC7F;AACA;AACA;;AAEA,yDAAyD,QAAQ;AACjE;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,iMAAiM;;AAEjM;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,UAAU;AACV;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,2DAA2D;AAC3D;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA,sBAAsB;AACtB;AACA;AACA,4CAA4C;AAC5C;;AAEA;AACA;AACA,8CAA8C;AAC9C,iCAAiC;;AAEjC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,6KAA6K;AAC7K;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,4BAA4B;AAC5B;;AAEA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,yEAAyE;AACzE;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,sBAAsB,gBAAgB;AACtC;AACA;AACA;AACA;;AAEA;;AAEA;AACA,8CAA8C;AAC9C,4CAA4C;AAC5C;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,sDAAsD,QAAQ;AAC9D;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,sDAAsD,QAAQ;AAC9D;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,sDAAsD,QAAQ;AAC9D;;AAEA;;AAEA;;AAEA,mEAAmE,QAAQ;AAC3E;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;;AAEA,+CAA+C,QAAQ;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wBAAwB,KAAK;AAC7B;AACA;AACA;;AAEA,gDAAgD,QAAQ;AACxD,wDAAwD,QAAQ;AAChE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,oDAAoD;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA,8DAA8D;AAC9D;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA,6EAA6E,QAAQ;AACrF;;AAEA,6FAA6F,QAAQ;AACrG;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA,wCAAwC;AACxC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA,sCAAsC;AACtC;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA,8CAA8C;AAC9C;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA,4HAA4H;AAC5H;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iCAAiC,QAAQ;AACzC,uCAAuC,QAAQ;;AAE/C;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,8CAA8C;AAC9C,4CAA4C;AAC5C;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,wDAAwD;AACxD;;;;AAIA;AACA;AACA;;AAEA,kDAAkD;AAClD;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA,sDAAsD;AACtD;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA,gDAAgD;AAChD,6BAA6B;;AAE7B;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,8FAA8F;AAC9F;;AAEA;AACA,OAAO,EAAE;;AAET;AACA;AACA;AACA;AACA;AACA;;AAEA,gEAAgE;AAChE;;AAEA;AACA;AACA;AACA,aAAa,sDAAsD;AACnE;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,4DAA4D,QAAQ;AACpE;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,wCAAwC;;AAExC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe;AACf,WAAW;AACX,SAAS;;AAET;;AAEA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA,wDAAwD;AACxD;;AAEA;AACA;AACA;;AAEA,gDAAgD;AAChD;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA,8DAA8D;AAC9D;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,0DAA0D;AAC1D;AACA;;AAEA,0DAA0D;AAC1D;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,yBAAyB;;AAEzB;AACA;AACA,mBAAmB,SAAS;AAC5B;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kDAAkD;AAClD;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,eAAe,eAAe;AAC9B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;;AAGL;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gD;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,qDAAqD,QAAQ;AAC7D;AACA;;AAEA;;AAEA;AACA;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA;AACA;;AAEA,2DAA2D,QAAQ;AACnE;AACA;;AAEA;;AAEA;AACA;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA;AACA;;AAEA,uBAAuB;;AAEvB;;AAEA;AACA;AACA;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA;;AAEA;;AAEA,kBAAkB,QAAQ;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,wCAAwC,kCAAkC;;AAE1E;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,uBAAuB,mCAAmC,OAAO;AACjE;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,sEAAsE;AACtE,wCAAwC,QAAQ;AAChD;AACA;AACA;AACA;;AAEA,wEAAwE;AACxE,4CAA4C,QAAQ;AACpD;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA,0CAA0C,QAAQ;AAClD;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,6CAA6C,kCAAkC;AAC/E;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iDAAiD;AACjD;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,kCAAkC;AAClC;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,uBAAuB,mCAAmC,OAAO;AACjE;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,wBAAwB;;AAExB;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uFAAuF;AACvF,4CAA4C,QAAQ;AACpD;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,mCAAmC;AACnC,qDAAqD;;AAErD,8CAA8C;;AAE9C;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,gCAAgC;;AAEhC;AACA;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,4DAA4D,QAAQ;AACpE;AACA;AACA;AACA;;AAEA;AACA,6CAA6C,6BAA6B;AAC1E;AACA;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,4DAA4D,QAAQ;AACpE;AACA;AACA;AACA;;AAEA;AACA,6CAA6C,6BAA6B;AAC1E;;AAEA,+BAA+B;AAC/B,6BAA6B;AAC7B;;AAEA,YAAY;AACZ;;AAEA;AACA;AACA;;AAEA,yDAAyD;AACzD,4BAA4B,OAAO;AACnC,6BAA6B,OAAO;AACpC,kCAAkC,OAAO;AACzC,6BAA6B,OAAO;AACpC,kCAAkC,OAAO;;AAEzC,gCAAgC;AAChC,yCAAyC;;AAEzC,mCAAmC,OAAO;AAC1C,mCAAmC,OAAO;AAC1C,oCAAoC,OAAO;AAC3C;;AAEA,mDAAmD;AACnD;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,2DAA2D,QAAQ;AACnE;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,gEAAgE,QAAQ;AACxE;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,8DAA8D,QAAQ;AACtE;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,mDAAmD;AACnD;AACA;AACA;AACA,2DAA2D,QAAQ;AACnE;AACA;AACA;AACA;;AAEA;AACA,8DAA8D,QAAQ;AACtE;AACA;AACA;AACA;;AAEA,gCAAgC;AAChC,+BAA+B;AAC/B,oCAAoC;AACpC,iCAAiC,OAAO;AACxC,oCAAoC;AACpC,kCAAkC;AAClC,yCAAyC;;AAEzC,qCAAqC;AACrC,qCAAqC;AACrC,sCAAsC;;AAEtC;AACA;AACA;;AAEA,+DAA+D;AAC/D;AACA,kDAAkD,QAAQ;AAC1D;AACA;;AAEA;AACA,mDAAmD,QAAQ;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,4CAA4C;AAC5C;AACA;;AAEA,gDAAgD;AAChD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA,4CAA4C,QAAQ;AACpD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,+CAA+C;AAC/C,wBAAwB;;AAExB;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,gCAAgC,eAAe,WAAW;AAC1D;AACA;AACA,iBAAiB;AACjB;;AAEA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA,uBAAuB,SAAS;AAChC,+BAA+B,SAAS;AACxC;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb,SAAS;;AAET;AACA,4BAA4B;;AAE5B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA;AACA;AACA,mEAAmE,QAAQ;AAC3E;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,gDAAgD,QAAQ;AACxD;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,gEAAgE;AAChE,2CAA2C;;AAE3C;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;;AAEA,yDAAyD,QAAQ;AACjE,wCAAwC;AACxC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;;AAET;;AAEA;AACA;AACA;;AAEA,gDAAgD;AAChD;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,wDAAwD;AACxD;AACA;;AAEA;AACA,mGAAmG;AACnG;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA,8DAA8D;AAC9D;AACA;AACA;AACA,uFAAuF;AACvF;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,yDAAyD;AACzD;AACA;;AAEA;AACA,mGAAmG;AACnG;AACA;AACA;AACA;AACA;AACA,0DAA0D;AAC1D;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA,wDAAwD;AACxD;AACA;;AAEA;AACA,4BAA4B;;AAE5B;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,iEAAiE;;AAEjE;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,8BAA8B,QAAQ;AACtC;AACA;;AAEA;AACA;AACA,yCAAyC;;AAEzC,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,8BAA8B,QAAQ;AACtC;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,4CAA4C,QAAQ;AACpD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL,mCAAmC;AACnC;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,iEAAiE,QAAQ;AACzE;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA,eAAe;;AAEf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,gEAAgE;AAChE;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA,uEAAuE;AACvE;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT,IAAI;;AAEJ;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,IAAI;AACJ;;AAEA,oEAAoE;AACpE;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA,qDAAqD;AACrD;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,wEAAwE;AACxE;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,2CAA2C,QAAQ;AACnD;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,wDAAwD,QAAQ;AAChE;AACA;AACA;AACA;AACA;;AAEA,+DAA+D;;AAE/D;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;;AAEA,iCAAiC;AACjC;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,sDAAsD,QAAQ;AAC9D,4BAA4B,UAAU;AACtC;AACA;AACA;AACA;AACA;;AAEA,kEAAkE;;AAElE,iEAAiE;;AAEjE;AACA,iCAAiC;AACjC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E;AAC3E,6EAA6E;AAC7E;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E;AAC3E,6EAA6E;AAC7E;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,+DAA+D;;AAE/D;AACA;AACA,kEAAkE;;AAElE;AACA,WAAW;AACX,OAAO;;AAEP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,0DAA0D;AAC1D;AACA;;AAEA,sDAAsD;AACtD;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA,sCAAsC,QAAQ;AAC9C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;;AAEA;;AAEA;AACA;AACA,0CAA0C;AAC1C;AACA;;AAEA;AACA;AACA,kDAAkD;AAClD;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,kDAAkD;AAClD;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,0DAA0D;AAC1D;AACA;;AAEA,0FAA0F;AAC1F;AACA;;AAEA,kDAAkD;AAClD;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,2CAA2C,QAAQ;AACnD;;AAEA,mDAAmD,QAAQ;AAC3D;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,qDAAqD;AACrD;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,sCAAsC,QAAQ;AAC9C;AACA;;AAEA,yCAAyC;AACzC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uCAAuC;AACvC;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA,6DAA6D;AAC7D;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,kEAAkE;AAClE;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,sDAAsD;AACtD;AACA;;AAEA,uDAAuD;AACvD;AACA;;AAEA,qDAAqD;AACrD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,KAAK;AACL;AACA,iCAAiC;AACjC,2CAA2C,OAAO;AAClD;;AAEA;AACA;AACA;;AAEA;AACA,mCAAmC;AACnC;;AAEA,oCAAoC;AACpC;AACA;;AAEA,kCAAkC;AAClC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,oBAAoB,cAAc;AAClC,sBAAsB,cAAc;AACpC,wBAAwB,cAAc;AACtC;AACA,yBAAyB,OAAO;AAChC;AACA,2BAA2B,OAAO;AAClC;AACA,6BAA6B,OAAO;AACpC;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,gBAAgB;AAChB;;AAEA;AACA,eAAe;AACf;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,gDAAgD;AAChD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA,wEAAwE;AACxE;AACA,wCAAwC;;AAExC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,sEAAsE;AACtE;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,sBAAsB;AACtB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,sBAAsB;AACtB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,sBAAsB;AACtB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,qDAAqD;AACrD;AACA;;AAEA;;AAEA;AACA,wCAAwC,QAAQ;AAChD;AACA;;AAEA;;AAEA;AACA;;AAEA,8CAA8C;AAC9C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;AACA;;AAEA,2BAA2B,yCAAyC;;AAEpE;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,wBAAwB,SAAS;AACjC;AACA,4BAA4B,SAAS;AACrC;AACA,gCAAgC,SAAS;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAgB;AAChB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,qBAAqB;AACrB;;AAEA;AACA;;AAEA,gDAAgD;AAChD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,sEAAsE,wBAAwB,EAAE;AAChG;AACA,wDAAwD,gBAAgB;AACxE;AACA;AACA;AACA;AACA;AACA,kCAAkC,0BAA0B,EAAE;AAC9D;AACA;AACA,aAAa;AACb,+DAA+D,mCAAmC;AAClG;AACA;AACA;AACA,oEAAoE,mBAAmB,EAAE;AACzF;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,gBAAgB;AACnE;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,4BAA4B,EAAE;AAChE;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA,uEAAuE,aAAa;AACpF;AACA,wEAAwE,UAAU;AAClF,sEAAsE,YAAY;AAClF,8EAA8E,6BAA6B;AAC3G,mFAAmF,aAAa;AAChG,iFAAiF,uBAAuB;AACxG;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE,UAAU,4CAA4C,EAAE,EAAE;AACjI,+BAA+B,mBAAmB;AAClD;AACA,yDAAyD,uBAAuB;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,6BAA6B,oDAAoD;AACjF;AACA;AACA;AACA,4CAA4C,OAAO;AACnD,+BAA+B,WAAW;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,kCAAkC;AAChE,+BAA+B,mCAAmC;AAClE,8BAA8B,kCAAkC;AAChE,+BAA+B,mCAAmC;AAClE,gCAAgC,oCAAoC;AACpE,gCAAgC,oCAAoC;AACpE;AACA;AACA;AACA;AACA,2BAA2B,OAAO;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,OAAO;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,QAAQ;AACrD,oCAAoC;AACpC,2CAA2C;AAC3C,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,OAAO;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,4DAA4D;AAC9F,kCAAkC,8CAA8C;AAChF;AACA;AACA;AACA,iDAAiD,uBAAuB;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kDAAkD,QAAQ;AAC1D;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,aAAa;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gEAAgE,4BAA4B;AAC5F,iEAAiE,2BAA2B;AAC5F,+DAA+D,6BAA6B;AAC5F,0EAA0E,kEAAkE;AAC5I,4EAA4E,4CAA4C;AACxH,uEAAuE,wBAAwB;AAC/F;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,wEAAwE;AAC9I,uEAAuE,gEAAgE;AACvI,qEAAqE,gEAAgE;AACrI,gFAAgF,4IAA4I;AAC5N,kFAAkF,4CAA4C;AAC9H,6EAA6E,uBAAuB;AACpG;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,+DAA+D,uBAAuB;AACtF,gEAAgE,wBAAwB,qCAAqC;AAC7H,8DAA8D,wBAAwB,uCAAuC;AAC7H,yEAAyE,iCAAiC;AAC1G,2EAA2E,4CAA4C;AACvH,sEAAsE,wBAAwB;AAC9F;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE,mEAAmE;AACxI,sEAAsE;AACtE,yBAAyB,wBAAwB,mDAAmD;AACpG,oEAAoE;AACpE,yBAAyB,wBAAwB,qDAAqD;AACtG,+EAA+E,iCAAiC;AAChH,iFAAiF,4CAA4C;AAC7H,4EAA4E,uBAAuB;AACnG;AACA,SAAS;;AAET;AACA;AACA,4EAA4E,yBAAyB,EAAE;AACvG;AACA;AACA,iEAAiE,mBAAmB,EAAE;AACtF;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,sDAAsD;AACtD;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,QAAQ;AACxB,gBAAgB,OAAO;AACvB;AACA;AACA;AACA,uBAAuB,YAAY;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,QAAQ;AACxB,gBAAgB,WAAW;AAC3B;AACA;AACA;AACA;AACA,kEAAkE;AAClE;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,YAAY;AACnC;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,QAAQ;AAC5B,oBAAoB,MAAM;AAC1B;AACA;AACA;AACA,uBAAuB,YAAY;AACnC;AACA;AACA;AACA;;AAEA;AACA;AACA,gBAAgB,QAAQ;AACxB,gBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uBAAuB,UAAU;AACjC;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,mDAAmD,SAAS;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gDAAgD;AAChD;;AAEA;AACA;AACA,0FAA0F;;AAE1F;;AAEA;AACA;;AAEA;AACA;;AAEA,kCAAkC;AAClC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,uDAAuD;;AAEvD;AACA;AACA;AACA;AACA;AACA;;AAEA,mCAAmC,uBAAuB;AAC1D;;AAEA,8CAA8C,QAAQ;AACtD;AACA,mCAAmC;;AAEnC;AACA;AACA;;AAEA;AACA,iDAAiD;AACjD;;AAEA;AACA;AACA;AACA;AACA;;AAEA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6EAA6E,QAAQ;AACrF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB,aAAa;AACb,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gDAAgD;AAChD;;AAEA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD;AACpD;AACA,0BAA0B;;AAE1B;AACA;AACA;AACA,8DAA8D,QAAQ;AACtE;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,+DAA+D,QAAQ;AACvE;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;;AAEA;AACA;;AAEA,kGAAkG;AAClG;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iDAAiD;AACjD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,kDAAkD;AAClD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,oDAAoD;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,2FAA2F;AAC3F,gGAAgG,gBAAgB,kBAAkB,iCAAiC,wDAAwD,aAAa,uBAAuB,kCAAkC,kBAAkB;AACnT;;AAEA,kEAAkE;AAClE,8GAA8G;AAC9G,8GAA8G;;AAE9G;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kEAAkE;AAClE,8GAA8G;AAC9G,8GAA8G;;AAE9G;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,kDAAkD;AAClD,gEAAgE,UAAU,EAAE;;AAE5E;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA,8IAA8I,yNAAyN,MAAM,MAAM;AACnX,6GAA6G,MAAM,MAAM;AACzH,kLAAkL;AAClL,kLAAkL;AAClL;;AAEA;;AAEA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,8CAA8C,QAAQ;AACtD;;AAEA;AACA,wCAAwC;AACxC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,8BAA8B,gDAAgD;AAC9E;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,+FAA+F;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,sDAAsD,QAAQ;AAC9D;AACA,iCAAiC;AACjC,iFAAiF;AACjF,6DAA6D;AAC7D;AACA;AACA,sFAAsF;AACtF,yDAAyD,iBAAiB;AAC1E,uDAAuD;AACvD;AACA;AACA;;AAEA,oCAAoC,8BAA8B;AAClE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,uDAAuD,QAAQ;AAC/D;AACA;AACA,+DAA+D,6BAA6B;AAC5F;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,oEAAoE;AACpE;;AAEA,iEAAiE,6DAA6D;AAC9H;AACA;AACA;AACA,oEAAoE;AACpE;;AAEA,iEAAiE,6DAA6D;AAC9H;AACA;AACA;AACA,oEAAoE;;AAEpE,iEAAiE,4DAA4D;AAC7H;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gEAAgE,QAAQ;AACxE;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb,SAAS;;AAET;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;;AAEA,kEAAkE;AAClE;AACA;;AAEA;;AAEA,wCAAwC,QAAQ;AAChD;AACA;AACA;;AAEA;AACA;AACA;;AAEA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,+EAA+E;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,6EAA6E;AAC7E;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,mJAAmJ,+JAA+J,gBAAgB,kBAAkB,sBAAsB,qEAAqE,aAAa,YAAY,kCAAkC,kBAAkB;AAC5f;;AAEA,0CAA0C;AAC1C;AACA;AACA;;AAEA;;AAEA;AACA;AACA,kBAAkB,sCAAsC;AACxD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,+EAA+E;;AAE/E;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,0CAA0C;AAC1C;;AAEA;;;AAGA;AACA;;AAEA;;AAEA,4FAA4F;;AAE5F,2EAA2E;AAC3E;;AAEA;AACA;AACA;;AAEA,0CAA0C,QAAQ;AAClD;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA,wEAAwE,aAAa,kBAAkB,gCAAgC,mFAAmF;AAC1N;AACA;AACA,sEAAsE,aAAa,kBAAkB,gCAAgC,uBAAuB,QAAQ;;AAEpK;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,wEAAwE;AACxE;;AAEA;AACA,oBAAoB,2EAA2E;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,iEAAiE;AACjE;;AAEA;AACA;;AAEA,iDAAiD,uBAAuB,uBAAuB,YAAY,QAAQ;AACnH;;AAEA;AACA;;AAEA,0GAA0G;AAC1G;;AAEA;AACA;AACA;;AAEA;AACA,sBAAsB,4BAA4B;AAClD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,4EAA4E;AAC5E;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,yCAAyC,QAAQ;AACjD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,wEAAwE;AACxE;AACA;;AAEA;AACA;;AAEA,qCAAqC,QAAQ;AAC7C;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA,oDAAoD;AACpD;AACA;AACA,qDAAqD;AACrD;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A;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wDAAwD;AACxD;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB;AACtB;;AAEA;AACA,sCAAsC,mBAAmB;AACzD;AACA,sEAAsE;AACtE,8DAA8D;;AAE9D;AACA;AACA,gEAAgE,QAAQ;AACxE;AACA;AACA,sDAAsD;AACtD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,yBAAyB;AACzB,qBAAqB,sBAAsB,mBAAmB;;AAE9D;AACA,iBAAiB,UAAU;;AAE3B;;AAEA;AACA;AACA;AACA,iDAAiD,SAAS;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA,qCAAqC;AACrC;AACA,SAAS;AACT,KAAK;;AAEL;AACA;AACA,4EAA4E;AAC5E;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,oBAAoB;;AAEpB;AACA,yCAAyC,QAAQ;AACjD;AACA,sGAAsG,sBAAsB,eAAe,yCAAyC,wBAAwB,wBAAwB;AACpO;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,kDAAkD,yDAAyD;AAC3G;AACA,kDAAkD,mFAAmF;;AAErI;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;AACL;;AAEA,sEAAsE;AACtE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA,yDAAyD;AACzD;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,+CAA+C;AAC/C,gEAAgE,UAAU,EAAE;AAC5E;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,0DAA0D,mBAAmB;AAC7E;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA,8BAA8B,gBAAgB;AAC9C;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,6DAA6D,QAAQ;AACrE;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,yEAAyE,QAAQ;AACjF;AACA;;AAEA;AACA;;AAEA,+CAA+C,eAAe;AAC9D;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,qDAAqD,sBAAsB,+IAA+I,wKAAwK,YAAY;AAC9Y,gEAAgE;AAChE;;AAEA;AACA,+DAA+D,QAAQ;AACvE;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,iDAAiD;AACjD;AACA;;;AAGA;AACA;;AAEA,iEAAiE,4EAA4E;AAC7I,iEAAiE,uBAAuB,kBAAkB,iCAAiC,6FAA6F;;AAExO,sDAAsD;AACtD,6DAA6D,QAAQ;AACrE;AACA,uEAAuE,4BAA4B,QAAQ;;AAE3G,uEAAuE,uBAAuB,kBAAkB,iCAAiC,iGAAiG;AAClP;AACA;AACA,0BAA0B;AAC1B;AACA,6DAA6D,QAAQ;AACrE;;AAEA,qDAAqD,iBAAiB;AACtE;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,8DAA8D,QAAQ;AACtE;;AAEA;AACA,uEAAuE,4BAA4B,QAAQ;;AAE3G,uEAAuE,uBAAuB,kBAAkB,iCAAiC,oHAAoH;AACrQ;AACA;;AAEA,0FAA0F;;AAE1F;AACA;;AAEA;AACA;;AAEA,gHAAgH,oBAAoB;AACpI,iBAAiB;AACjB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,8BAA8B,gBAAgB;AAC9C;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,uDAAuD,QAAQ;AAC/D;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,2DAA2D,QAAQ;AACnE;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,+DAA+D,4BAA4B,QAAQ;AACnG,+DAA+D,uBAAuB,6BAA6B,gCAAgC;;AAEnJ;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;;AAEA,sFAAsF;AACtF;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA,4DAA4D;AAC5D;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,QAAQ;AAChE;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,QAAQ;AAChE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA,8CAA8C;AAC9C;AACA;AACA;;AAEA;AACA;;AAEA;AACA,wCAAwC,QAAQ;AAChD;AACA;;AAEA,wCAAwC,QAAQ;AAChD;AACA;AACA;;AAEA,8DAA8D;AAC9D;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,uDAAuD,gBAAgB;AACvE;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,sDAAsD,QAAQ;AAC9D,sEAAsE;AACtE;;AAEA;;AAEA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,uCAAuC,eAAe;AACtD;AACA;AACA;;AAEA;;AAEA;;AA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AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,+CAA+C;AAC/C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,gDAAgD;AAChD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,kDAAkD;AAClD;AACA;AACA;;AAEA,mDAAmD;AACnD;AACA;AACA;;AAEA,mDAAmD;AACnD;AACA;;AAEA;AACA;;AAEA,oDAAoD;AACpD;AACA;AACA;;AAEA,+CAA+C;AAC/C;AACA;;AAEA;AACA;;AAEA,gDAAgD;AAChD;AACA;AACA;;AAEA,+CAA+C;AAC/C;AACA;AACA;;AAEA,gDAAgD;AAChD;AACA;AACA;;AAEA,oDAAoD;AACpD;AACA;;AAEA;AACA;;AAEA,qDAAqD;AACrD;AACA;AACA;;AAEA,gDAAgD;AAChD;AACA;AACA;;AAEA,iDAAiD;AACjD;AACA;AACA;;AAEA,uDAAuD;AACvD;AACA;;AAEA;AACA;;AAEA,wDAAwD;AACxD;AACA;AACA;;AAEA,kDAAkD;AAClD;AACA;;AAEA;AACA;;AAEA,mDAAmD;AACnD;AACA;AACA;;AAEA,yCAAyC;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,GAAG;AACH;;AAEA,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,mDAAmD;AACnD;AACA;;AAEA,gDAAgD;AAChD;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,UAAU;AACV;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,+CAA+C;AAC/C,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,+CAA+C;AAC/C,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,0DAA0D;AAC1D;AACA;;AAEA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;;AAEA;;AAEA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA,8CAA8C;AAC9C;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA,iDAAiD;AACjD;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,KAAK;AACL;;AAEA,iDAAiD;AACjD;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,KAAK;AACL;;AAEA,gDAAgD;AAChD;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,KAAK;AACL;;AAEA,gDAAgD;AAChD;AACA;AACA;AACA,KAAK;AACL;;AAEA,6DAA6D;AAC7D;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,mDAAmD,QAAQ;AAC3D;AACA,2DAA2D,QAAQ;AACnE;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iDAAiD;AACjD,iBAAiB;AACjB;;AAEA;AACA,gCAAgC,QAAQ;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,6EAA6E;AAC7E;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,0CAA0C,QAAQ;AAClD;AACA,wBAAwB,8BAA8B;AACtD;AACA;AACA;;AAEA;AACA,2CAA2C,QAAQ;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,oDAAoD;AACpD;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kBAAkB,kCAAkC;AACpD;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAkB,qCAAqC;AACvD;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,yCAAyC;;AAEzC;;AAEA;AACA;AACA,gDAAgD,QAAQ;AACxD;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB;AACrB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,2EAA2E;AAC3E;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gDAAgD,QAAQ;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD;;AAEvD;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA,oDAAoD,QAAQ;AAC5D;;AAEA;AACA;AACA;AACA,2BAA2B;AAC3B;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,KAAK;;AAEL;;AAEA,gGAAgG;AAChG;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE,QAAQ;AACzE;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,iKAAiK;AACjK,yIAAyI;AACzI;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,oCAAoC,QAAQ;AAC5C;;AAEA;;AAEA;AACA;AACA;;AAEA,2EAA2E;;AAE3E;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,qDAAqD,4BAA4B,QAAQ;AACzF;AACA,yDAAyD,2CAA2C,6BAA6B,6CAA6C;AAC9K;AACA;AACA,yDAAyD,uBAAuB,6BAA6B,6CAA6C;AAC1J;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,uEAAuE;AACvE;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,0BAA0B,gDAAgD,EAAE;AAC5E;;AAEA,iDAAiD;AACjD;;AAEA;AACA;AACA,yCAAyC,QAAQ;AACjD;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,sBAAsB,6BAA6B;AACnD;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,sBAAsB,8BAA8B;AACpD;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,mDAAmD;AACnD;AACA;;AAEA;AACA;AACA,KAAK;AACL;;AAEA,iDAAiD;AACjD;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,gDAAgD;AAChD;AACA,uDAAuD;AACvD;AACA;AACA,cAAc;AACd;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;AACL;;AAEA,0CAA0C;AAC1C;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,sDAAsD;AACtD,wBAAwB;AACxB;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,UAAU;AACV;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,4CAA4C;AAC5C,wBAAwB;AACxB;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,+DAA+D;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,wDAAwD;AACxD;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,kFAAkF;AAClF;AACA;;AAEA,0BAA0B;;AAE1B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA,uCAAuC,QAAQ,OAAO;AACtD;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,mHAAmH;AACnH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,uHAAuH;AACvH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,kDAAkD;AAClD;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,mDAAmD;AACnD;AACA;;AAEA;;AAEA,0EAA0E;AAC1E,4EAA4E;;AAE5E;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;;AAEA,2EAA2E;AAC3E,4EAA4E;;AAE5E;AACA;AACA;AACA,KAAK;;AAEL;;AAEA,uEAAuE;AACvE;;AAEA;AACA;;AAEA,uCAAuC,QAAQ;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,iFAAiF;AACjF;AACA,yBAAyB;AACzB;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,mDAAmD,QAAQ;AAC3D;AACA;;AAEA;;AAEA,mEAAmE;AACnE;;AAEA;AACA;AACA,wEAAwE;AACxE;;AAEA;AACA;AACA,qBAAqB;AACrB;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,wFAAwF;AACxF;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,yCAAyC,QAAQ;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iCAAiC;AACjC;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qDAAqD;;AAErD,6CAA6C,QAAQ;AACrD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,QAAQ;AAC1D;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kDAAkD,QAAQ;AAC1D;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,0EAA0E;AAC1E;AACA;AACA;AACA;AACA,kDAAkD;AAClD;AACA;AACA,0MAA0M;AAC1M;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAA4D,UAAU;AACtE;;AAEA;AACA,2CAA2C,oBAAoB;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kBAAkB;;AAElB;AACA;AACA;AACA,iFAAiF,QAAQ;AACzF;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,uDAAuD,QAAQ;AAC/D;;AAEA,sEAAsE,QAAQ;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB,oBAAoB;AACpB;AACA,gBAAgB;AAChB,cAAc;AACd,YAAY;AACZ,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,yCAAyC;AACzC;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,iDAAiD;AACjD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;AACL;;AAEA,mDAAmD;AACnD;;AAEA,iBAAiB,sBAAsB;AACvC;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;;AAEA,4EAA4E;AAC5E;;AAEA,iBAAiB,sBAAsB;AACvC;;AAEA;;AAEA;AACA;;AAEA,8CAA8C,QAAQ;AACtD;AACA;AACA;;AAEA;AACA;;AAEA;AACA,oDAAoD,QAAQ;AAC5D;AACA;;AAEA;AACA;AACA,IAAI;;AAEJ;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,wCAAwC,QAAQ;AAChD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;;AAEA,kEAAkE;AAClE,iBAAiB,sBAAsB;AACvC;;AAEA;;AAEA;AACA;;AAEA;AACA,kDAAkD,QAAQ;AAC1D;AACA;AACA;AACA;AACA;AACA,kDAAkD,QAAQ;AAC1D;AACA;;AAEA;AACA;AACA;AACA,kDAAkD,QAAQ;AAC1D;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,oDAAoD,QAAQ;AAC5D;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA,uEAAuE;AACvE;AACA;AACA,wCAAwC,QAAQ;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;;AAEA,qFAAqF;AACrF;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,sDAAsD;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iDAAiD;AACjD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,+DAA+D;AAC/D;AACA;;AAEA;AACA;;AAEA;AACA,kDAAkD;;AAElD;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,sDAAsD;AACtD;;AAEA,8CAA8C,QAAQ;AACtD;AACA;AACA;;AAEA,qCAAqC;;AAErC;AACA;AACA;;AAEA,+DAA+D;AAC/D;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,mEAAmE;AACnE,kBAAkB,UAAU;AAC5B;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,6DAA6D;AAC7D;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,mBAAmB;AACnB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,8BAA8B;AACzC;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,4EAA4E,8BAA8B;AAC1G;;AAEA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,oFAAoF,8BAA8B;AAClH;;AAEA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,+EAA+E,8BAA8B;AAC7G;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,4GAA4G,8BAA8B;AAC1I;;AAEA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,qDAAqD;AACrD;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA,4DAA4D;AAC5D;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,sCAAsC;AACtC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,GAAG,EAAE;;AAEL;AACA;;AAEA,wDAAwD;AACxD;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG,EAAE;;AAEL;AACA;;AAEA,0DAA0D;AAC1D;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG,EAAE;;AAEL;AACA;;AAEA,8EAA8E;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,0EAA0E;AAC1E;AACA;AACA;AACA,GAAG,EAAE;;AAEL;AACA;;AAEA,mEAAmE;AACnE;AACA,yCAAyC;AACzC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,+DAA+D;AAC/D;AACA;AACA;AACA,GAAG,EAAE;;AAEL;AACA;;AAEA,iEAAiE;AACjE;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,6DAA6D;AAC7D;AACA;AACA;AACA,GAAG,EAAE;;AAEL;AACA;;AAEA,wEAAwE;AACxE;AACA;AACA;AACA;AACA;AACA;;AAEA,oEAAoE;AACpE;AACA;AACA;AACA,GAAG,EAAE;;AAEL;AACA;;AAEA,wDAAwD;AACxD;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD;AACpD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE;AACnE;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,4CAA4C;;AAE5C;;AAEA;AACA,qEAAqE;;AAErE,iBAAiB;AACjB;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,uCAAuC,QAAQ;AAC/C;AACA;AACA;AACA;AACA;;AAEA;AACA,uCAAuC,QAAQ;AAC/C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,yCAAyC,QAAQ;AACjD;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yCAAyC,QAAQ;AACjD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,4CAA4C;;AAE5C;AACA,0CAA0C,QAAQ;AAClD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,4CAA4C;;AAE5C;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,uCAAuC;AACvC;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,uDAAuD;AACvD;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,sEAAsE;;AAEtE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,gDAAgD;AAChD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA,2CAA2C;AAC3C;AACA,6DAA6D,QAAQ;AACrE;AACA;;AAEA,6CAA6C,SAAS;AACtD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,4CAA4C;AAC5C;AACA,4DAA4D,QAAQ;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;;AAEA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;;AAEA;AACA,kCAAkC;;AAElC;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,WAAW;AACX;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU;AACV,GAAG;AACH;;AAEA,4DAA4D;AAC5D,4CAA4C;AAC5C;AACA;;AAEA;AACA;AACA;AACA;;AAEA,8CAA8C;AAC9C;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,qDAAqD;AACrD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;;AAEA;AACA,+BAA+B;;AAE/B;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA,kDAAkD;AAClD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,SAAS;AACT,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;;AAGA;AACA;AACA;;AAEA,oDAAoD;AACpD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,2DAA2D;AAC3D,2CAA2C,QAAQ;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;;AAEA,gDAAgD;AAChD;AACA;;AAEA;AACA,4CAA4C;AAC5C;AACA;AACA;;AAEA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,8CAA8C;AAC9C;AACA;;AAEA,+FAA+F;AAC/F;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,+DAA+D;AAC/D;;AAEA;AACA;AACA;AACA;;AAEA;AACA,+EAA+E;AAC/E;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,2EAA2E;AAC3E;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,mDAAmD,QAAQ;AAC3D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,mFAAmF,QAAQ;AAC3F;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,uDAAuD;AACvD;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,8CAA8C,QAAQ;AACtD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gDAAgD,QAAQ;AACxD;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,8DAA8D;AAC9D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Aa,4DAA4D,EAAE;;AAElM,qDAAqD,4DAA4D,EAAE,aAAa,2DAA2D,EAAE;AAC7L;;AAEA,gDAAgD;AAChD;AACA;;AAEA,gEAAgE;AAChE;AACA;;AAEA,oEAAoE;AACpE;AACA;;AAEA;AACA;AACA;;AAEA,yCAAyC;AACzC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,yCAAyC;AACzC;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,0CAA0C;AAC1C;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,yCAAyC;AACzC;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,yCAAyC;AACzC;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qDAAqD;AACrD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qDAAqD;AACrD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iDAAiD;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,yCAAyC;AACzC;;AAEA;AACA;AACA,0EAA0E;AAC1E;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,yCAAyC;AACzC;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,6CAA6C;AAC7C;;AAEA,gEAAgE,kBAAkB,aAAa;;AAE/F,kFAAkF,iCAAiC,cAAc,aAAa,oCAAoC;AAClL;;AAEA;AACA;;AAEA,iDAAiD;AACjD;;AAEA;;AAEA;AACA;AACA;AACA;AACA,wDAAwD,MAAM,MAAM;AACpE;;AAEA;;AAEA;;AAEA,wDAAwD,gBAAgB,sBAAsB,mIAAmI,4JAA4J,YAAY;;AAEzY,mFAAmF;;AAEnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA,2CAA2C;AAC3C;;AAEA;;AAEA;;AAEA;AACA,sEAAsE,mBAAmB;AACzF,+CAA+C,oBAAoB;AACnE,mFAAmF;AACnF;AACA;AACA;;AAEA;AACA;;AAEA;AACA,kFAAkF;AAClF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qGAAqG;AACrG;AACA,qDAAqD;AACrD,mEAAmE,gBAAgB,sBAAsB,oHAAoH,6IAA6I,YAAY;AACtX;;AAEA,wEAAwE;AACxE;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,+QAA+Q,MAAM,MAAM,MAAM,MAAM,MAAM;AAC7S,yGAAyG,MAAM,MAAM;AACrH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,4EAA4E;AAC5E;AACA;AACA,yGAAyG,oCAAoC,cAAc,aAAa;AACxK;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,+EAA+E;AAC/E;;AAEA;AACA;AACA,4EAA4E;AAC5E;;AAEA;AACA;AACA,oFAAoF;AACpF;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,qCAAqC;AACrC,+CAA+C,iBAAiB;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,wCAAwC,kBAAkB;AACzF;;AAEA;AACA,+CAA+C,iBAAiB;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,wCAAwC,kBAAkB,mGAAmG,kBAAkB;AAC/M;;AAEA;AACA,+CAA+C,iBAAiB;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,wCAAwC,kBAAkB,kGAAkG,kBAAkB;AAC9M;;AAEA;AACA,+CAA+C,iBAAiB;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0FAA0F,kBAAkB,gGAAgG,kBAAkB;AAC9N;;AAEA;AACA,6JAA6J;AAC7J;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,4EAA4E;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sGAAsG,sCAAsC,cAAc,aAAa;AACvK;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iFAAiF,sCAAsC,cAAc,aAAa;AAClJ;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,+CAA+C,qGAAqG,kBAAkB;AACtK;;;AAGA;AACA;AACA;AACA;AACA;;AAEA,iHAAiH;;AAEjH;;AAEA;AACA;AACA;AACA,iDAAiD,qBAAqB,0DAA0D;AAChI,8JAA8J,aAAa,2BAA2B,sCAAsC;AAC5O;AACA;AACA,4DAA4D,WAAW,aAAa;AACpF;AACA;AACA;;AAEA;AACA,qDAAqD;AACrD,8JAA8J,aAAa,sBAAsB,2BAA2B,sCAAsC;AAClQ,+EAA+E;;AAE/E,+CAA+C;AAC/C;;AAEA,yEAAyE,aAAa;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,6DAA6D,uBAAuB;AACpF,+CAA+C,8DAA8D,MAAM;AACnH,gDAAgD,oFAAoF,MAAM;AAC1I,+CAA+C,sEAAsE,MAAM;AAC3H,gDAAgD,+EAA+E,MAAM;AACrI,gDAAgD,6EAA6E,MAAM;AACnI;AACA,+CAA+C,oEAAoE,MAAM;AACzH,gDAAgD,qEAAqE,MAAM;AAC3H,+CAA+C,+DAA+D,MAAM;AACpH,gDAAgD,4EAA4E,MAAM;AAClI;AACA;;AAEA,+CAA+C,iBAAiB;AAChE;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,sDAAsD;AACtD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iIAAiI,MAAM,MAAM;AAC7I,iIAAiI,MAAM,MAAM;AAC7I,oIAAoI,MAAM,MAAM;AAChJ,oIAAoI,MAAM,MAAM;;AAEhJ,8IAA8I,MAAM,MAAM;AAC1J,wJAAwJ,MAAM,MAAM;AACpK,yKAAyK,MAAM,MAAM;;AAErL,oIAAoI,MAAM,MAAM;;AAEhJ;;AAEA;AACA;;AAEA,gEAAgE;AAChE;;AAEA;;AAEA;AACA;AACA;AACA;AACA,8CAA8C,iBAAiB,sBAAsB,gIAAgI,yJAAyJ,YAAY;;AAE1X,qDAAqD,sBAAsB,yIAAyI,MAAM,kIAAkI,MAAM,kCAAkC,qGAAqG,kBAAkB;AAC3f,mDAAmD,sBAAsB,yIAAyI,MAAM,kCAAkC,qGAAqG,kBAAkB;;AAEjX,0FAA0F,oBAAoB;AAC9G;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,qGAAqG,+HAA+H;AACpO;;AAEA;;AAEA;AACA;;AAEA,kIAAkI;AAClI,oGAAoG,kFAAkF;AACtL;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,kDAAkD,yKAAyK,MAAM,6LAA6L,4FAA4F,kBAAkB;AAC5gB,gDAAgD,yKAAyK,MAAM,kCAAkC,4FAA4F,kBAAkB;;AAE/W;;AAEA;;AAEA;AACA;AACA,iDAAiD,QAAQ;AACzD;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,gCAAgC,QAAQ;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,mDAAmD;;AAEnD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA,kGAAkG,aAAa;AAC/G;;AAEA,+CAA+C;;AAE/C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,iCAAiC,QAAQ;AACzC;;AAEA,sEAAsE;;AAEtE,qEAAqE;AACrE,4DAA4D,QAAQ;AACpE;;AAEA;;AAEA;AACA;AACA,yEAAyE;AACzE;AACA;AACA,0EAA0E;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,kFAAkF;AAClF;AACA;AACA,iFAAiF;AACjF;AACA;AACA;AACA;AACA;AACA,oEAAoE;AACpE;AACA;AACA,qEAAqE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE;AACrE;;AAEA;;AAEA;AACA,6BAA6B,QAAQ;AACrC;AACA;AACA,qFAAqF;AACrF,mFAAmF;AACnF;;AAEA;AACA;;AAEA,UAAU;AACV;;;AAGA;AACA;AACA;;AAEA,0FAA0F;AAC1F;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,qBAAqB;AACrB,mBAAmB;AACnB;AACA;AACA,mBAAmB;AACnB;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gHAAgH;AAChH,gGAAgG;AAChG,0FAA0F;AAC1F,6FAA6F;;AAE7F;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA,2EAA2E;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,qBAAqB;AACrB,mBAAmB;;AAEnB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gHAAgH;AAChH,gGAAgG;AAChG,0FAA0F;AAC1F,6FAA6F;;AAE7F;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA,qDAAqD;AACrD;AACA;;AAEA,wGAAwG;AACxG,wFAAwF;AACxF,kFAAkF;AAClF,qFAAqF;;AAErF;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,2BAA2B;;AAE3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wHAAwH;AACxH,wGAAwG;AACxG,kGAAkG;AAClG,qGAAqG;;AAErG;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA,2BAA2B;AAC3B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,+EAA+E;AAC/E;;AAEA;AACA;;AAEA;AACA,wBAAwB,kBAAkB,iBAAiB;AAC3D;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,0DAA0D,QAAQ;AAClE;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,oDAAoD,QAAQ;AAC5D;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA,qEAAqE;AACrE;AACA;AACA,4EAA4E;AAC5E;AACA;AACA,qEAAqE;AACrE;AACA;AACA,yEAAyE;AACzE;AACA;AACA,sEAAsE;AACtE;AACA;;AAEA;;AAEA;;AAEA;;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,6CAA6C,QAAQ;AACrD;AACA;;AAEA,iCAAiC;;AAEjC;AACA;AACA;AACA,kDAAkD,QAAQ;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,qDAAqD,gBAAgB;AACrE;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kDAAkD,QAAQ;AAC1D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;;AAEA;AACA,mGAAmG;AACnG;AACA;;AAEA,sEAAsE,QAAQ;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAkB;AAClB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,qCAAqC,QAAQ;AAC7C;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,oCAAoC;;AAEpC;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,mDAAmD;AACnD;AACA,8CAA8C,SAAS;AACvD,8CAA8C,SAAS;AACvD,8CAA8C,SAAS;;;AAGvD;AACA,gDAAgD,SAAS;AACzD,gDAAgD,SAAS;AACzD,gDAAgD,SAAS;AACzD,gDAAgD,sBAAsB,wBAAwB,SAAS;AACvG;AACA;AACA,gDAAgD;AAChD,gDAAgD,SAAS;AACzD,gDAAgD,SAAS;AACzD,gDAAgD,sBAAsB,wBAAwB,SAAS;AACvG;;AAEA,2DAA2D;AAC3D;AACA;;AAEA;AACA;;AAEA,0EAA0E;AAC1E;AACA,wBAAwB;;AAExB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,2CAA2C;AAC3C;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mDAAmD,QAAQ;AAC3D;AACA,mEAAmE,QAAQ;AAC3E;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,KAAK;AACL;;AAEA,qEAAqE;AACrE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,0EAA0E,iBAAiB;AAC3F;;AAEA;AACA;;AAEA;;AAEA,4CAA4C,QAAQ;AACpD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,iIAAiI;AACjI;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA,2HAA2H,4BAA4B;;AAEvJ,gKAAgK,iCAAiC,kBAAkB;;AAEnN;;AAEA;AACA;;AAEA,oIAAoI;AACpI;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,oJAAoJ,4BAA4B;;AAEhL,iLAAiL,iCAAiC,kBAAkB;;AAEpO;;AAEA;AACA;;AAEA,+IAA+I;AAC/I;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,qIAAqI,iCAAiC;;AAEtK,sKAAsK,iCAAiC,kBAAkB;;AAEzN;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,sDAAsD,EAAE,SAAS,EAAE;AACnE;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA,yBAAyB;AACzB;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,4CAA4C,SAAS;AACrD;AACA;AACA;;AAEA;AACA;AACA;AACA,4CAA4C,SAAS;AACrD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,8CAA8C;AAC9C,kDAAkD;AAClD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,KAAK;;AAEL,CAAC;;CCnvmCD;AACA;AACA;AACA,qDAAqD;;AAErD,aAAa,qEAAqE,cAAc,cAAc,8BAA8B,cAAc,oCAAoC,mBAAmB,cAAc,YAAY,0BAA0B,EAAE,iIAAiI,aAAa,SAAS,aAAa,0hBAA0hB,qjBAAqjB,iBAAiB,+CAA+C,mkBAAmkB,2EAA2E,yDAAyD,8JAA8J,cAAc,uFAAuF,oCAAoC,4OAA4O,sBAAsB,aAAa,qYAAqY,gBAAgB,cAAc,uCAAuC,SAAS,cAAc,kBAAkB,yBAAyB,yFAAyF,aAAa,uBAAuB,gCAAgC,wBAAwB,mBAAmB,UAAU,Q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","file":"scripts.js","sourcesContent":["// threejs.org/license\n(function(l,ja){\"object\"===typeof exports&&\"undefined\"!==typeof module?ja(exports):\"function\"===typeof define&&define.amd?define([\"exports\"],ja):ja(l.THREE={})})(this,function(l){function ja(){}function z(a,b){this.x=a||0;this.y=b||0}function O(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];0<arguments.length&&console.error(\"THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.\")}function ka(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._w=void 0!==d?d:1}function n(a,\nb,c){this.x=a||0;this.y=b||0;this.z=c||0}function da(){this.elements=[1,0,0,0,1,0,0,0,1];0<arguments.length&&console.error(\"THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.\")}function X(a,b,c,d,e,f,g,h,k,m){Object.defineProperty(this,\"id\",{value:Mf++});this.uuid=R.generateUUID();this.name=\"\";this.image=void 0!==a?a:X.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=void 0!==b?b:X.DEFAULT_MAPPING;this.wrapS=void 0!==c?c:1001;this.wrapT=void 0!==d?d:1001;this.magFilter=void 0!==\ne?e:1006;this.minFilter=void 0!==f?f:1008;this.anisotropy=void 0!==k?k:1;this.format=void 0!==g?g:1023;this.type=void 0!==h?h:1009;this.offset=new z(0,0);this.repeat=new z(1,1);this.center=new z(0,0);this.rotation=0;this.matrixAutoUpdate=!0;this.matrix=new da;this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this.encoding=void 0!==m?m:3E3;this.version=0;this.onUpdate=null}function ca(a,b,c,d){this.x=a||0;this.y=b||0;this.z=c||0;this.w=void 0!==d?d:1}function jb(a,\nb,c){this.width=a;this.height=b;this.scissor=new ca(0,0,a,b);this.scissorTest=!1;this.viewport=new ca(0,0,a,b);c=c||{};this.texture=new X(void 0,void 0,c.wrapS,c.wrapT,c.magFilter,c.minFilter,c.format,c.type,c.anisotropy,c.encoding);this.texture.generateMipmaps=void 0!==c.generateMipmaps?c.generateMipmaps:!1;this.texture.minFilter=void 0!==c.minFilter?c.minFilter:1006;this.depthBuffer=void 0!==c.depthBuffer?c.depthBuffer:!0;this.stencilBuffer=void 0!==c.stencilBuffer?c.stencilBuffer:!0;this.depthTexture=\nvoid 0!==c.depthTexture?c.depthTexture:null}function Ib(a,b,c){jb.call(this,a,b,c);this.activeMipMapLevel=this.activeCubeFace=0}function kb(a,b,c,d,e,f,g,h,k,m,q,p){X.call(this,null,f,g,h,k,m,d,e,q,p);this.image={data:a,width:b,height:c};this.magFilter=void 0!==k?k:1003;this.minFilter=void 0!==m?m:1003;this.flipY=this.generateMipmaps=!1;this.unpackAlignment=1}function Wa(a,b){this.min=void 0!==a?a:new n(Infinity,Infinity,Infinity);this.max=void 0!==b?b:new n(-Infinity,-Infinity,-Infinity)}function Ea(a,\nb){this.center=void 0!==a?a:new n;this.radius=void 0!==b?b:0}function Pa(a,b){this.normal=void 0!==a?a:new n(1,0,0);this.constant=void 0!==b?b:0}function td(a,b,c,d,e,f){this.planes=[void 0!==a?a:new Pa,void 0!==b?b:new Pa,void 0!==c?c:new Pa,void 0!==d?d:new Pa,void 0!==e?e:new Pa,void 0!==f?f:new Pa]}function Jb(a){var b={},c;for(c in a){b[c]={};for(var d in a[c]){var e=a[c][d];e&&(e.isColor||e.isMatrix3||e.isMatrix4||e.isVector2||e.isVector3||e.isVector4||e.isTexture)?b[c][d]=e.clone():Array.isArray(e)?\nb[c][d]=e.slice():b[c][d]=e}}return b}function ua(a){for(var b={},c=0;c<a.length;c++){var d=Jb(a[c]),e;for(e in d)b[e]=d[e]}return b}function J(a,b,c){return void 0===b&&void 0===c?this.set(a):this.setRGB(a,b,c)}function Wd(){function a(e,f){!1!==c&&(d(e,f),b.requestAnimationFrame(a))}var b=null,c=!1,d=null;return{start:function(){!0!==c&&null!==d&&(b.requestAnimationFrame(a),c=!0)},stop:function(){c=!1},setAnimationLoop:function(a){d=a},setContext:function(a){b=a}}}function Nf(a){function b(b,c){var d=\nb.array,e=b.dynamic?35048:35044,h=a.createBuffer();a.bindBuffer(c,h);a.bufferData(c,d,e);b.onUploadCallback();c=5126;d instanceof Float32Array?c=5126:d instanceof Float64Array?console.warn(\"THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.\"):d instanceof Uint16Array?c=5123:d instanceof Int16Array?c=5122:d instanceof Uint32Array?c=5125:d instanceof Int32Array?c=5124:d instanceof Int8Array?c=5120:d instanceof Uint8Array&&(c=5121);return{buffer:h,type:c,bytesPerElement:d.BYTES_PER_ELEMENT,\nversion:b.version}}var c=new WeakMap;return{get:function(a){a.isInterleavedBufferAttribute&&(a=a.data);return c.get(a)},remove:function(b){b.isInterleavedBufferAttribute&&(b=b.data);var d=c.get(b);d&&(a.deleteBuffer(d.buffer),c.delete(b))},update:function(d,e){d.isInterleavedBufferAttribute&&(d=d.data);var f=c.get(d);if(void 0===f)c.set(d,b(d,e));else if(f.version<d.version){var g=d,h=g.array,k=g.updateRange;a.bindBuffer(e,f.buffer);!1===g.dynamic?a.bufferData(e,h,35044):-1===k.count?a.bufferSubData(e,\n0,h):0===k.count?console.error(\"THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.\"):(a.bufferSubData(e,k.offset*h.BYTES_PER_ELEMENT,h.subarray(k.offset,k.offset+k.count)),k.count=-1);f.version=d.version}}}}function Kb(a,b,c,d,e,f){this.a=a;this.b=b;this.c=c;this.normal=d&&d.isVector3?d:new n;this.vertexNormals=Array.isArray(d)?d:[];this.color=e&&e.isColor?e:new J;this.vertexColors=\nArray.isArray(e)?e:[];this.materialIndex=void 0!==f?f:0}function lb(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._order=d||lb.DefaultOrder}function Xd(){this.mask=1}function C(){Object.defineProperty(this,\"id\",{value:Of++});this.uuid=R.generateUUID();this.name=\"\";this.type=\"Object3D\";this.parent=null;this.children=[];this.up=C.DefaultUp.clone();var a=new n,b=new lb,c=new ka,d=new n(1,1,1);b.onChange(function(){c.setFromEuler(b,!1)});c.onChange(function(){b.setFromQuaternion(c,void 0,!1)});\nObject.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:a},rotation:{configurable:!0,enumerable:!0,value:b},quaternion:{configurable:!0,enumerable:!0,value:c},scale:{configurable:!0,enumerable:!0,value:d},modelViewMatrix:{value:new O},normalMatrix:{value:new da}});this.matrix=new O;this.matrixWorld=new O;this.matrixAutoUpdate=C.DefaultMatrixAutoUpdate;this.matrixWorldNeedsUpdate=!1;this.layers=new Xd;this.visible=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.renderOrder=\n0;this.userData={}}function Q(){Object.defineProperty(this,\"id\",{value:Pf+=2});this.uuid=R.generateUUID();this.name=\"\";this.type=\"Geometry\";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=\n!1}function E(a,b,c){if(Array.isArray(a))throw new TypeError(\"THREE.BufferAttribute: array should be a Typed Array.\");this.name=\"\";this.array=a;this.itemSize=b;this.count=void 0!==a?a.length/b:0;this.normalized=!0===c;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.version=0}function tc(a,b,c){E.call(this,new Int8Array(a),b,c)}function uc(a,b,c){E.call(this,new Uint8Array(a),b,c)}function vc(a,b,c){E.call(this,new Uint8ClampedArray(a),b,c)}function wc(a,b,c){E.call(this,new Int16Array(a),\nb,c)}function mb(a,b,c){E.call(this,new Uint16Array(a),b,c)}function xc(a,b,c){E.call(this,new Int32Array(a),b,c)}function nb(a,b,c){E.call(this,new Uint32Array(a),b,c)}function B(a,b,c){E.call(this,new Float32Array(a),b,c)}function yc(a,b,c){E.call(this,new Float64Array(a),b,c)}function Je(){this.vertices=[];this.normals=[];this.colors=[];this.uvs=[];this.uvs2=[];this.groups=[];this.morphTargets={};this.skinWeights=[];this.skinIndices=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=\nthis.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function Ke(a){if(0===a.length)return-Infinity;for(var b=a[0],c=1,d=a.length;c<d;++c)a[c]>b&&(b=a[c]);return b}function D(){Object.defineProperty(this,\"id\",{value:Qf+=2});this.uuid=R.generateUUID();this.name=\"\";this.type=\"BufferGeometry\";this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.drawRange={start:0,count:Infinity};this.userData={}}\nfunction Lb(a,b,c,d,e,f){Q.call(this);this.type=\"BoxGeometry\";this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:f};this.fromBufferGeometry(new ob(a,b,c,d,e,f));this.mergeVertices()}function ob(a,b,c,d,e,f){function g(a,b,c,d,e,f,g,l,W,A,Mb){var t=f/W,v=g/A,w=f/2,u=g/2,y=l/2;g=W+1;var G=A+1,H=f=0,N,z,B=new n;for(z=0;z<G;z++){var C=z*v-u;for(N=0;N<g;N++)B[a]=(N*t-w)*d,B[b]=C*e,B[c]=y,m.push(B.x,B.y,B.z),B[a]=0,B[b]=0,B[c]=0<l?1:-1,q.push(B.x,B.y,B.z),p.push(N/\nW),p.push(1-z/A),f+=1}for(z=0;z<A;z++)for(N=0;N<W;N++)a=r+N+g*(z+1),b=r+(N+1)+g*(z+1),c=r+(N+1)+g*z,k.push(r+N+g*z,a,c),k.push(a,b,c),H+=6;h.addGroup(x,H,Mb);x+=H;r+=f}D.call(this);this.type=\"BoxBufferGeometry\";this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:f};var h=this;a=a||1;b=b||1;c=c||1;d=Math.floor(d)||1;e=Math.floor(e)||1;f=Math.floor(f)||1;var k=[],m=[],q=[],p=[],r=0,x=0;g(\"z\",\"y\",\"x\",-1,-1,c,b,a,f,e,0);g(\"z\",\"y\",\"x\",1,-1,c,b,-a,f,e,1);g(\"x\",\"z\",\"y\",\n1,1,a,c,b,d,f,2);g(\"x\",\"z\",\"y\",1,-1,a,c,-b,d,f,3);g(\"x\",\"y\",\"z\",1,-1,a,b,c,d,e,4);g(\"x\",\"y\",\"z\",-1,-1,a,b,-c,d,e,5);this.setIndex(k);this.addAttribute(\"position\",new B(m,3));this.addAttribute(\"normal\",new B(q,3));this.addAttribute(\"uv\",new B(p,2))}function zc(a,b,c,d){Q.call(this);this.type=\"PlaneGeometry\";this.parameters={width:a,height:b,widthSegments:c,heightSegments:d};this.fromBufferGeometry(new pb(a,b,c,d));this.mergeVertices()}function pb(a,b,c,d){D.call(this);this.type=\"PlaneBufferGeometry\";\nthis.parameters={width:a,height:b,widthSegments:c,heightSegments:d};a=a||1;b=b||1;var e=a/2,f=b/2;c=Math.floor(c)||1;d=Math.floor(d)||1;var g=c+1,h=d+1,k=a/c,m=b/d,q=[],p=[],r=[],x=[];for(a=0;a<h;a++){var l=a*m-f;for(b=0;b<g;b++)p.push(b*k-e,-l,0),r.push(0,0,1),x.push(b/c),x.push(1-a/d)}for(a=0;a<d;a++)for(b=0;b<c;b++)e=b+g*(a+1),f=b+1+g*(a+1),h=b+1+g*a,q.push(b+g*a,e,h),q.push(e,f,h);this.setIndex(q);this.addAttribute(\"position\",new B(p,3));this.addAttribute(\"normal\",new B(r,3));this.addAttribute(\"uv\",\nnew B(x,2))}function L(){Object.defineProperty(this,\"id\",{value:Rf++});this.uuid=R.generateUUID();this.name=\"\";this.type=\"Material\";this.lights=this.fog=!0;this.blending=1;this.side=0;this.flatShading=!1;this.vertexColors=0;this.opacity=1;this.transparent=!1;this.blendSrc=204;this.blendDst=205;this.blendEquation=100;this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null;this.depthFunc=3;this.depthWrite=this.depthTest=!0;this.clippingPlanes=null;this.clipShadows=this.clipIntersection=!1;\nthis.shadowSide=null;this.colorWrite=!0;this.precision=null;this.polygonOffset=!1;this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.dithering=!1;this.alphaTest=0;this.premultipliedAlpha=!1;this.visible=!0;this.userData={};this.needsUpdate=!0}function Ba(a){L.call(this);this.type=\"ShaderMaterial\";this.defines={};this.uniforms={};this.vertexShader=\"void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}\";this.fragmentShader=\"void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}\";\nthis.linewidth=1;this.wireframe=!1;this.wireframeLinewidth=1;this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1;this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1};this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=void 0;this.uniformsNeedUpdate=!1;void 0!==a&&(void 0!==a.attributes&&console.error(\"THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.\"),this.setValues(a))}\nfunction qb(a,b){this.origin=void 0!==a?a:new n;this.direction=void 0!==b?b:new n}function ha(a,b,c){this.a=void 0!==a?a:new n;this.b=void 0!==b?b:new n;this.c=void 0!==c?c:new n}function Da(a){L.call(this);this.type=\"MeshBasicMaterial\";this.color=new J(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.envMap=this.alphaMap=this.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=\n1;this.wireframeLinejoin=this.wireframeLinecap=\"round\";this.lights=this.morphTargets=this.skinning=!1;this.setValues(a)}function pa(a,b){C.call(this);this.type=\"Mesh\";this.geometry=void 0!==a?a:new D;this.material=void 0!==b?b:new Da({color:16777215*Math.random()});this.drawMode=0;this.updateMorphTargets()}function Sf(a,b,c,d){function e(a,c){b.buffers.color.setClear(a.r,a.g,a.b,c,d)}var f=new J(0),g=0,h,k,m=null,q=0;return{getClearColor:function(){return f},setClearColor:function(a,b){f.set(a);g=\nvoid 0!==b?b:1;e(f,g)},getClearAlpha:function(){return g},setClearAlpha:function(a){g=a;e(f,g)},render:function(b,d,x,l){d=d.background;null===d?(e(f,g),m=null,q=0):d&&d.isColor&&(e(d,1),l=!0,m=null,q=0);(a.autoClear||l)&&a.clear(a.autoClearColor,a.autoClearDepth,a.autoClearStencil);if(d&&(d.isCubeTexture||d.isWebGLRenderTargetCube)){void 0===k&&(k=new pa(new ob(1,1,1),new Ba({type:\"BackgroundCubeMaterial\",uniforms:Jb(Qa.cube.uniforms),vertexShader:Qa.cube.vertexShader,fragmentShader:Qa.cube.fragmentShader,\nside:1,depthTest:!0,depthWrite:!1,fog:!1})),k.geometry.removeAttribute(\"normal\"),k.geometry.removeAttribute(\"uv\"),k.onBeforeRender=function(a,b,c){this.matrixWorld.copyPosition(c.matrixWorld)},Object.defineProperty(k.material,\"map\",{get:function(){return this.uniforms.tCube.value}}),c.update(k));l=d.isWebGLRenderTargetCube?d.texture:d;k.material.uniforms.tCube.value=l;k.material.uniforms.tFlip.value=d.isWebGLRenderTargetCube?1:-1;if(m!==d||q!==l.version)k.material.needsUpdate=!0,m=d,q=l.version;b.unshift(k,\nk.geometry,k.material,0,null)}else if(d&&d.isTexture){void 0===h&&(h=new pa(new pb(2,2),new Ba({type:\"BackgroundMaterial\",uniforms:Jb(Qa.background.uniforms),vertexShader:Qa.background.vertexShader,fragmentShader:Qa.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.removeAttribute(\"normal\"),Object.defineProperty(h.material,\"map\",{get:function(){return this.uniforms.t2D.value}}),c.update(h));h.material.uniforms.t2D.value=d;!0===d.matrixAutoUpdate&&d.updateMatrix();h.material.uniforms.uvTransform.value.copy(d.matrix);\nif(m!==d||q!==d.version)h.material.needsUpdate=!0,m=d,q=d.version;b.unshift(h,h.geometry,h.material,0,null)}}}}function Tf(a,b,c,d){var e;this.setMode=function(a){e=a};this.render=function(b,d){a.drawArrays(e,b,d);c.update(d,e)};this.renderInstances=function(f,g,h){if(d.isWebGL2)var k=a;else if(k=b.get(\"ANGLE_instanced_arrays\"),null===k){console.error(\"THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.\");return}k[d.isWebGL2?\n\"drawArraysInstanced\":\"drawArraysInstancedANGLE\"](e,g,h,f.maxInstancedCount);c.update(h,e,f.maxInstancedCount)}}function Uf(a,b,c){function d(b){if(\"highp\"===b){if(0<a.getShaderPrecisionFormat(35633,36338).precision&&0<a.getShaderPrecisionFormat(35632,36338).precision)return\"highp\";b=\"mediump\"}return\"mediump\"===b&&0<a.getShaderPrecisionFormat(35633,36337).precision&&0<a.getShaderPrecisionFormat(35632,36337).precision?\"mediump\":\"lowp\"}var e,f=\"undefined\"!==typeof WebGL2RenderingContext&&a instanceof\nWebGL2RenderingContext,g=void 0!==c.precision?c.precision:\"highp\",h=d(g);h!==g&&(console.warn(\"THREE.WebGLRenderer:\",g,\"not supported, using\",h,\"instead.\"),g=h);c=!0===c.logarithmicDepthBuffer;h=a.getParameter(34930);var k=a.getParameter(35660),m=a.getParameter(3379),q=a.getParameter(34076),p=a.getParameter(34921),r=a.getParameter(36347),l=a.getParameter(36348),t=a.getParameter(36349),v=0<k,w=f||!!b.get(\"OES_texture_float\");return{isWebGL2:f,getMaxAnisotropy:function(){if(void 0!==e)return e;var c=\nb.get(\"EXT_texture_filter_anisotropic\");return e=null!==c?a.getParameter(c.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:d,precision:g,logarithmicDepthBuffer:c,maxTextures:h,maxVertexTextures:k,maxTextureSize:m,maxCubemapSize:q,maxAttributes:p,maxVertexUniforms:r,maxVaryings:l,maxFragmentUniforms:t,vertexTextures:v,floatFragmentTextures:w,floatVertexTextures:v&&w}}function Vf(){function a(){m.value!==d&&(m.value=d,m.needsUpdate=0<e);c.numPlanes=e;c.numIntersection=0}function b(a,b,d,e){var f=\nnull!==a?a.length:0,g=null;if(0!==f){g=m.value;if(!0!==e||null===g){e=d+4*f;b=b.matrixWorldInverse;k.getNormalMatrix(b);if(null===g||g.length<e)g=new Float32Array(e);for(e=0;e!==f;++e,d+=4)h.copy(a[e]).applyMatrix4(b,k),h.normal.toArray(g,d),g[d+3]=h.constant}m.value=g;m.needsUpdate=!0}c.numPlanes=f;return g}var c=this,d=null,e=0,f=!1,g=!1,h=new Pa,k=new da,m={value:null,needsUpdate:!1};this.uniform=m;this.numIntersection=this.numPlanes=0;this.init=function(a,c,g){var h=0!==a.length||c||0!==e||f;\nf=c;d=b(a,g,0);e=a.length;return h};this.beginShadows=function(){g=!0;b(null)};this.endShadows=function(){g=!1;a()};this.setState=function(c,h,k,l,t,v){if(!f||null===c||0===c.length||g&&!k)g?b(null):a();else{k=g?0:e;var q=4*k,p=t.clippingState||null;m.value=p;p=b(c,l,q,v);for(c=0;c!==q;++c)p[c]=d[c];t.clippingState=p;this.numIntersection=h?this.numPlanes:0;this.numPlanes+=k}}}function Wf(a){var b={};return{get:function(c){if(void 0!==b[c])return b[c];switch(c){case \"WEBGL_depth_texture\":var d=a.getExtension(\"WEBGL_depth_texture\")||\na.getExtension(\"MOZ_WEBGL_depth_texture\")||a.getExtension(\"WEBKIT_WEBGL_depth_texture\");break;case \"EXT_texture_filter_anisotropic\":d=a.getExtension(\"EXT_texture_filter_anisotropic\")||a.getExtension(\"MOZ_EXT_texture_filter_anisotropic\")||a.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\");break;case \"WEBGL_compressed_texture_s3tc\":d=a.getExtension(\"WEBGL_compressed_texture_s3tc\")||a.getExtension(\"MOZ_WEBGL_compressed_texture_s3tc\")||a.getExtension(\"WEBKIT_WEBGL_compressed_texture_s3tc\");break;\ncase \"WEBGL_compressed_texture_pvrtc\":d=a.getExtension(\"WEBGL_compressed_texture_pvrtc\")||a.getExtension(\"WEBKIT_WEBGL_compressed_texture_pvrtc\");break;default:d=a.getExtension(c)}null===d&&console.warn(\"THREE.WebGLRenderer: \"+c+\" extension not supported.\");return b[c]=d}}}function Xf(a,b,c){function d(a){var g=a.target;a=e[g.id];null!==a.index&&b.remove(a.index);for(var k in a.attributes)b.remove(a.attributes[k]);g.removeEventListener(\"dispose\",d);delete e[g.id];if(k=f[a.id])b.remove(k),delete f[a.id];\nc.memory.geometries--}var e={},f={};return{get:function(a,b){var f=e[b.id];if(f)return f;b.addEventListener(\"dispose\",d);b.isBufferGeometry?f=b:b.isGeometry&&(void 0===b._bufferGeometry&&(b._bufferGeometry=(new D).setFromObject(a)),f=b._bufferGeometry);e[b.id]=f;c.memory.geometries++;return f},update:function(a){var c=a.index,d=a.attributes;null!==c&&b.update(c,34963);for(var e in d)b.update(d[e],34962);a=a.morphAttributes;for(e in a){c=a[e];d=0;for(var f=c.length;d<f;d++)b.update(c[d],34962)}},getWireframeAttribute:function(a){var c=\nf[a.id];if(c)return c;c=[];var d=a.index,e=a.attributes;if(null!==d){d=d.array;e=0;for(var g=d.length;e<g;e+=3){var p=d[e+0],r=d[e+1],l=d[e+2];c.push(p,r,r,l,l,p)}}else for(d=e.position.array,e=0,g=d.length/3-1;e<g;e+=3)p=e+0,r=e+1,l=e+2,c.push(p,r,r,l,l,p);c=new (65535<Ke(c)?nb:mb)(c,1);b.update(c,34963);return f[a.id]=c}}}function Yf(a,b,c,d){var e,f,g;this.setMode=function(a){e=a};this.setIndex=function(a){f=a.type;g=a.bytesPerElement};this.render=function(b,d){a.drawElements(e,d,f,b*g);c.update(d,\ne)};this.renderInstances=function(h,k,m){if(d.isWebGL2)var q=a;else if(q=b.get(\"ANGLE_instanced_arrays\"),null===q){console.error(\"THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.\");return}q[d.isWebGL2?\"drawElementsInstanced\":\"drawElementsInstancedANGLE\"](e,m,f,k*g,h.maxInstancedCount);c.update(m,e,h.maxInstancedCount)}}function Zf(a){var b={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,\ntextures:0},render:b,programs:null,autoReset:!0,reset:function(){b.frame++;b.calls=0;b.triangles=0;b.points=0;b.lines=0},update:function(a,d,e){e=e||1;b.calls++;switch(d){case 4:b.triangles+=a/3*e;break;case 5:case 6:b.triangles+=e*(a-2);break;case 1:b.lines+=a/2*e;break;case 3:b.lines+=e*(a-1);break;case 2:b.lines+=e*a;break;case 0:b.points+=e*a;break;default:console.error(\"THREE.WebGLInfo: Unknown draw mode:\",d)}}}}function $f(a,b){return Math.abs(b[1])-Math.abs(a[1])}function ag(a){var b={},c=\nnew Float32Array(8);return{update:function(d,e,f,g){var h=d.morphTargetInfluences,k=h.length;d=b[e.id];if(void 0===d){d=[];for(var m=0;m<k;m++)d[m]=[m,0];b[e.id]=d}var q=f.morphTargets&&e.morphAttributes.position;f=f.morphNormals&&e.morphAttributes.normal;for(m=0;m<k;m++){var p=d[m];0!==p[1]&&(q&&e.removeAttribute(\"morphTarget\"+m),f&&e.removeAttribute(\"morphNormal\"+m))}for(m=0;m<k;m++)p=d[m],p[0]=m,p[1]=h[m];d.sort($f);for(m=0;8>m;m++){if(p=d[m])if(h=p[0],k=p[1]){q&&e.addAttribute(\"morphTarget\"+m,\nq[h]);f&&e.addAttribute(\"morphNormal\"+m,f[h]);c[m]=k;continue}c[m]=0}g.getUniforms().setValue(a,\"morphTargetInfluences\",c)}}}function bg(a,b){var c={};return{update:function(d){var e=b.render.frame,f=d.geometry,g=a.get(d,f);c[g.id]!==e&&(f.isGeometry&&g.updateFromObject(d),a.update(g),c[g.id]=e);return g},dispose:function(){c={}}}}function Xa(a,b,c,d,e,f,g,h,k,m){a=void 0!==a?a:[];X.call(this,a,void 0!==b?b:301,c,d,e,f,g,h,k,m);this.flipY=!1}function Nb(a,b,c,d){X.call(this,null);this.image={data:a,\nwidth:b,height:c,depth:d};this.minFilter=this.magFilter=1003;this.flipY=this.generateMipmaps=!1}function Ob(a,b,c){var d=a[0];if(0>=d||0<d)return a;var e=b*c,f=Le[e];void 0===f&&(f=new Float32Array(e),Le[e]=f);if(0!==b)for(d.toArray(f,0),d=1,e=0;d!==b;++d)e+=c,a[d].toArray(f,e);return f}function ea(a,b){if(a.length!==b.length)return!1;for(var c=0,d=a.length;c<d;c++)if(a[c]!==b[c])return!1;return!0}function sa(a,b){for(var c=0,d=b.length;c<d;c++)a[c]=b[c]}function Me(a,b){var c=Ne[b];void 0===c&&(c=\nnew Int32Array(b),Ne[b]=c);for(var d=0;d!==b;++d)c[d]=a.allocTextureUnit();return c}function cg(a,b){var c=this.cache;c[0]!==b&&(a.uniform1f(this.addr,b),c[0]=b)}function dg(a,b){var c=this.cache;c[0]!==b&&(a.uniform1i(this.addr,b),c[0]=b)}function eg(a,b){var c=this.cache;if(void 0!==b.x){if(c[0]!==b.x||c[1]!==b.y)a.uniform2f(this.addr,b.x,b.y),c[0]=b.x,c[1]=b.y}else ea(c,b)||(a.uniform2fv(this.addr,b),sa(c,b))}function fg(a,b){var c=this.cache;if(void 0!==b.x){if(c[0]!==b.x||c[1]!==b.y||c[2]!==\nb.z)a.uniform3f(this.addr,b.x,b.y,b.z),c[0]=b.x,c[1]=b.y,c[2]=b.z}else if(void 0!==b.r){if(c[0]!==b.r||c[1]!==b.g||c[2]!==b.b)a.uniform3f(this.addr,b.r,b.g,b.b),c[0]=b.r,c[1]=b.g,c[2]=b.b}else ea(c,b)||(a.uniform3fv(this.addr,b),sa(c,b))}function gg(a,b){var c=this.cache;if(void 0!==b.x){if(c[0]!==b.x||c[1]!==b.y||c[2]!==b.z||c[3]!==b.w)a.uniform4f(this.addr,b.x,b.y,b.z,b.w),c[0]=b.x,c[1]=b.y,c[2]=b.z,c[3]=b.w}else ea(c,b)||(a.uniform4fv(this.addr,b),sa(c,b))}function hg(a,b){var c=this.cache,d=b.elements;\nvoid 0===d?ea(c,b)||(a.uniformMatrix2fv(this.addr,!1,b),sa(c,b)):ea(c,d)||(Oe.set(d),a.uniformMatrix2fv(this.addr,!1,Oe),sa(c,d))}function ig(a,b){var c=this.cache,d=b.elements;void 0===d?ea(c,b)||(a.uniformMatrix3fv(this.addr,!1,b),sa(c,b)):ea(c,d)||(Pe.set(d),a.uniformMatrix3fv(this.addr,!1,Pe),sa(c,d))}function jg(a,b){var c=this.cache,d=b.elements;void 0===d?ea(c,b)||(a.uniformMatrix4fv(this.addr,!1,b),sa(c,b)):ea(c,d)||(Qe.set(d),a.uniformMatrix4fv(this.addr,!1,Qe),sa(c,d))}function kg(a,b,c){var d=\nthis.cache,e=c.allocTextureUnit();d[0]!==e&&(a.uniform1i(this.addr,e),d[0]=e);c.setTexture2D(b||Re,e)}function lg(a,b,c){var d=this.cache,e=c.allocTextureUnit();d[0]!==e&&(a.uniform1i(this.addr,e),d[0]=e);c.setTexture3D(b||mg,e)}function ng(a,b,c){var d=this.cache,e=c.allocTextureUnit();d[0]!==e&&(a.uniform1i(this.addr,e),d[0]=e);c.setTextureCube(b||Se,e)}function Te(a,b){var c=this.cache;ea(c,b)||(a.uniform2iv(this.addr,b),sa(c,b))}function Ue(a,b){var c=this.cache;ea(c,b)||(a.uniform3iv(this.addr,\nb),sa(c,b))}function Ve(a,b){var c=this.cache;ea(c,b)||(a.uniform4iv(this.addr,b),sa(c,b))}function og(a){switch(a){case 5126:return cg;case 35664:return eg;case 35665:return fg;case 35666:return gg;case 35674:return hg;case 35675:return ig;case 35676:return jg;case 35678:case 36198:return kg;case 35679:return lg;case 35680:return ng;case 5124:case 35670:return dg;case 35667:case 35671:return Te;case 35668:case 35672:return Ue;case 35669:case 35673:return Ve}}function pg(a,b){var c=this.cache;ea(c,\nb)||(a.uniform1fv(this.addr,b),sa(c,b))}function qg(a,b){var c=this.cache;ea(c,b)||(a.uniform1iv(this.addr,b),sa(c,b))}function rg(a,b){var c=this.cache;b=Ob(b,this.size,2);ea(c,b)||(a.uniform2fv(this.addr,b),this.updateCache(b))}function sg(a,b){var c=this.cache;b=Ob(b,this.size,3);ea(c,b)||(a.uniform3fv(this.addr,b),this.updateCache(b))}function tg(a,b){var c=this.cache;b=Ob(b,this.size,4);ea(c,b)||(a.uniform4fv(this.addr,b),this.updateCache(b))}function ug(a,b){var c=this.cache;b=Ob(b,this.size,\n4);ea(c,b)||(a.uniformMatrix2fv(this.addr,!1,b),this.updateCache(b))}function vg(a,b){var c=this.cache;b=Ob(b,this.size,9);ea(c,b)||(a.uniformMatrix3fv(this.addr,!1,b),this.updateCache(b))}function wg(a,b){var c=this.cache;b=Ob(b,this.size,16);ea(c,b)||(a.uniformMatrix4fv(this.addr,!1,b),this.updateCache(b))}function xg(a,b,c){var d=this.cache,e=b.length,f=Me(c,e);!1===ea(d,f)&&(a.uniform1iv(this.addr,f),sa(d,f));for(a=0;a!==e;++a)c.setTexture2D(b[a]||Re,f[a])}function yg(a,b,c){var d=this.cache,\ne=b.length,f=Me(c,e);!1===ea(d,f)&&(a.uniform1iv(this.addr,f),sa(d,f));for(a=0;a!==e;++a)c.setTextureCube(b[a]||Se,f[a])}function zg(a){switch(a){case 5126:return pg;case 35664:return rg;case 35665:return sg;case 35666:return tg;case 35674:return ug;case 35675:return vg;case 35676:return wg;case 35678:return xg;case 35680:return yg;case 5124:case 35670:return qg;case 35667:case 35671:return Te;case 35668:case 35672:return Ue;case 35669:case 35673:return Ve}}function Ag(a,b,c){this.id=a;this.addr=\nc;this.cache=[];this.setValue=og(b.type)}function We(a,b,c){this.id=a;this.addr=c;this.cache=[];this.size=b.size;this.setValue=zg(b.type)}function Xe(a){this.id=a;this.seq=[];this.map={}}function cb(a,b,c){this.seq=[];this.map={};this.renderer=c;c=a.getProgramParameter(b,35718);for(var d=0;d<c;++d){var e=a.getActiveUniform(b,d),f=a.getUniformLocation(b,e.name),g=this,h=e.name,k=h.length;for(Zd.lastIndex=0;;){var m=Zd.exec(h),q=Zd.lastIndex,p=m[1],r=m[3];\"]\"===m[2]&&(p|=0);if(void 0===r||\"[\"===r&&\nq+2===k){h=g;e=void 0===r?new Ag(p,e,f):new We(p,e,f);h.seq.push(e);h.map[e.id]=e;break}else r=g.map[p],void 0===r&&(r=new Xe(p),p=g,g=r,p.seq.push(g),p.map[g.id]=g),g=r}}}function Bg(a){a=a.split(\"\\n\");for(var b=0;b<a.length;b++)a[b]=b+1+\": \"+a[b];return a.join(\"\\n\")}function Ye(a,b,c){var d=a.createShader(b);a.shaderSource(d,c);a.compileShader(d);!1===a.getShaderParameter(d,35713)&&console.error(\"THREE.WebGLShader: Shader couldn't compile.\");\"\"!==a.getShaderInfoLog(d)&&console.warn(\"THREE.WebGLShader: gl.getShaderInfoLog()\",\n35633===b?\"vertex\":\"fragment\",a.getShaderInfoLog(d),Bg(c));return d}function Ze(a){switch(a){case 3E3:return[\"Linear\",\"( value )\"];case 3001:return[\"sRGB\",\"( value )\"];case 3002:return[\"RGBE\",\"( value )\"];case 3004:return[\"RGBM\",\"( value, 7.0 )\"];case 3005:return[\"RGBM\",\"( value, 16.0 )\"];case 3006:return[\"RGBD\",\"( value, 256.0 )\"];case 3007:return[\"Gamma\",\"( value, float( GAMMA_FACTOR ) )\"];default:throw Error(\"unsupported encoding: \"+a);}}function vd(a,b){b=Ze(b);return\"vec4 \"+a+\"( vec4 value ) { return \"+\nb[0]+\"ToLinear\"+b[1]+\"; }\"}function Cg(a,b){b=Ze(b);return\"vec4 \"+a+\"( vec4 value ) { return LinearTo\"+b[0]+b[1]+\"; }\"}function Dg(a,b){switch(b){case 1:b=\"Linear\";break;case 2:b=\"Reinhard\";break;case 3:b=\"Uncharted2\";break;case 4:b=\"OptimizedCineon\";break;case 5:b=\"ACESFilmic\";break;default:throw Error(\"unsupported toneMapping: \"+b);}return\"vec3 \"+a+\"( vec3 color ) { return \"+b+\"ToneMapping( color ); }\"}function Eg(a,b,c){a=a||{};return[a.derivatives||b.envMapCubeUV||b.bumpMap||b.normalMap&&!b.objectSpaceNormalMap||\nb.flatShading?\"#extension GL_OES_standard_derivatives : enable\":\"\",(a.fragDepth||b.logarithmicDepthBuffer)&&c.get(\"EXT_frag_depth\")?\"#extension GL_EXT_frag_depth : enable\":\"\",a.drawBuffers&&c.get(\"WEBGL_draw_buffers\")?\"#extension GL_EXT_draw_buffers : require\":\"\",(a.shaderTextureLOD||b.envMap)&&c.get(\"EXT_shader_texture_lod\")?\"#extension GL_EXT_shader_texture_lod : enable\":\"\"].filter(Ac).join(\"\\n\")}function Fg(a){var b=[],c;for(c in a){var d=a[c];!1!==d&&b.push(\"#define \"+c+\" \"+d)}return b.join(\"\\n\")}\nfunction Ac(a){return\"\"!==a}function $e(a,b){return a.replace(/NUM_DIR_LIGHTS/g,b.numDirLights).replace(/NUM_SPOT_LIGHTS/g,b.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,b.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,b.numPointLights).replace(/NUM_HEMI_LIGHTS/g,b.numHemiLights)}function af(a,b){return a.replace(/NUM_CLIPPING_PLANES/g,b.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,b.numClippingPlanes-b.numClipIntersection)}function $d(a){return a.replace(/^[ \\t]*#include +<([\\w\\d./]+)>/gm,\nfunction(a,c){a=I[c];if(void 0===a)throw Error(\"Can not resolve #include <\"+c+\">\");return $d(a)})}function bf(a){return a.replace(/#pragma unroll_loop[\\s]+?for \\( int i = (\\d+); i < (\\d+); i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g,function(a,c,d,e){a=\"\";for(c=parseInt(c);c<parseInt(d);c++)a+=e.replace(/\\[ i \\]/g,\"[ \"+c+\" ]\");return a})}function Gg(a,b,c,d,e,f,g){var h=a.context,k=d.defines,m=e.vertexShader,q=e.fragmentShader,p=\"SHADOWMAP_TYPE_BASIC\";1===f.shadowMapType?p=\"SHADOWMAP_TYPE_PCF\":2===f.shadowMapType&&\n(p=\"SHADOWMAP_TYPE_PCF_SOFT\");var r=\"ENVMAP_TYPE_CUBE\",l=\"ENVMAP_MODE_REFLECTION\",t=\"ENVMAP_BLENDING_MULTIPLY\";if(f.envMap){switch(d.envMap.mapping){case 301:case 302:r=\"ENVMAP_TYPE_CUBE\";break;case 306:case 307:r=\"ENVMAP_TYPE_CUBE_UV\";break;case 303:case 304:r=\"ENVMAP_TYPE_EQUIREC\";break;case 305:r=\"ENVMAP_TYPE_SPHERE\"}switch(d.envMap.mapping){case 302:case 304:l=\"ENVMAP_MODE_REFRACTION\"}switch(d.combine){case 0:t=\"ENVMAP_BLENDING_MULTIPLY\";break;case 1:t=\"ENVMAP_BLENDING_MIX\";break;case 2:t=\"ENVMAP_BLENDING_ADD\"}}var v=\n0<a.gammaFactor?a.gammaFactor:1,w=g.isWebGL2?\"\":Eg(d.extensions,f,b),n=Fg(k),u=h.createProgram();d.isRawShaderMaterial?(k=[n].filter(Ac).join(\"\\n\"),0<k.length&&(k+=\"\\n\"),b=[w,n].filter(Ac).join(\"\\n\"),0<b.length&&(b+=\"\\n\")):(k=[\"precision \"+f.precision+\" float;\",\"precision \"+f.precision+\" int;\",\"#define SHADER_NAME \"+e.name,n,f.supportsVertexTextures?\"#define VERTEX_TEXTURES\":\"\",\"#define GAMMA_FACTOR \"+v,\"#define MAX_BONES \"+f.maxBones,f.useFog&&f.fog?\"#define USE_FOG\":\"\",f.useFog&&f.fogExp?\"#define FOG_EXP2\":\n\"\",f.map?\"#define USE_MAP\":\"\",f.envMap?\"#define USE_ENVMAP\":\"\",f.envMap?\"#define \"+l:\"\",f.lightMap?\"#define USE_LIGHTMAP\":\"\",f.aoMap?\"#define USE_AOMAP\":\"\",f.emissiveMap?\"#define USE_EMISSIVEMAP\":\"\",f.bumpMap?\"#define USE_BUMPMAP\":\"\",f.normalMap?\"#define USE_NORMALMAP\":\"\",f.normalMap&&f.objectSpaceNormalMap?\"#define OBJECTSPACE_NORMALMAP\":\"\",f.displacementMap&&f.supportsVertexTextures?\"#define USE_DISPLACEMENTMAP\":\"\",f.specularMap?\"#define USE_SPECULARMAP\":\"\",f.roughnessMap?\"#define USE_ROUGHNESSMAP\":\n\"\",f.metalnessMap?\"#define USE_METALNESSMAP\":\"\",f.alphaMap?\"#define USE_ALPHAMAP\":\"\",f.vertexColors?\"#define USE_COLOR\":\"\",f.flatShading?\"#define FLAT_SHADED\":\"\",f.skinning?\"#define USE_SKINNING\":\"\",f.useVertexTexture?\"#define BONE_TEXTURE\":\"\",f.morphTargets?\"#define USE_MORPHTARGETS\":\"\",f.morphNormals&&!1===f.flatShading?\"#define USE_MORPHNORMALS\":\"\",f.doubleSided?\"#define DOUBLE_SIDED\":\"\",f.flipSided?\"#define FLIP_SIDED\":\"\",f.shadowMapEnabled?\"#define USE_SHADOWMAP\":\"\",f.shadowMapEnabled?\"#define \"+\np:\"\",f.sizeAttenuation?\"#define USE_SIZEATTENUATION\":\"\",f.logarithmicDepthBuffer?\"#define USE_LOGDEPTHBUF\":\"\",f.logarithmicDepthBuffer&&(g.isWebGL2||b.get(\"EXT_frag_depth\"))?\"#define USE_LOGDEPTHBUF_EXT\":\"\",\"uniform mat4 modelMatrix;\",\"uniform mat4 modelViewMatrix;\",\"uniform mat4 projectionMatrix;\",\"uniform mat4 viewMatrix;\",\"uniform mat3 normalMatrix;\",\"uniform vec3 cameraPosition;\",\"attribute vec3 position;\",\"attribute vec3 normal;\",\"attribute vec2 uv;\",\"#ifdef USE_COLOR\",\"\\tattribute vec3 color;\",\n\"#endif\",\"#ifdef USE_MORPHTARGETS\",\"\\tattribute vec3 morphTarget0;\",\"\\tattribute vec3 morphTarget1;\",\"\\tattribute vec3 morphTarget2;\",\"\\tattribute vec3 morphTarget3;\",\"\\t#ifdef USE_MORPHNORMALS\",\"\\t\\tattribute vec3 morphNormal0;\",\"\\t\\tattribute vec3 morphNormal1;\",\"\\t\\tattribute vec3 morphNormal2;\",\"\\t\\tattribute vec3 morphNormal3;\",\"\\t#else\",\"\\t\\tattribute vec3 morphTarget4;\",\"\\t\\tattribute vec3 morphTarget5;\",\"\\t\\tattribute vec3 morphTarget6;\",\"\\t\\tattribute vec3 morphTarget7;\",\"\\t#endif\",\"#endif\",\n\"#ifdef USE_SKINNING\",\"\\tattribute vec4 skinIndex;\",\"\\tattribute vec4 skinWeight;\",\"#endif\",\"\\n\"].filter(Ac).join(\"\\n\"),b=[w,\"precision \"+f.precision+\" float;\",\"precision \"+f.precision+\" int;\",\"#define SHADER_NAME \"+e.name,n,f.alphaTest?\"#define ALPHATEST \"+f.alphaTest+(f.alphaTest%1?\"\":\".0\"):\"\",\"#define GAMMA_FACTOR \"+v,f.useFog&&f.fog?\"#define USE_FOG\":\"\",f.useFog&&f.fogExp?\"#define FOG_EXP2\":\"\",f.map?\"#define USE_MAP\":\"\",f.matcap?\"#define USE_MATCAP\":\"\",f.envMap?\"#define USE_ENVMAP\":\"\",f.envMap?\n\"#define \"+r:\"\",f.envMap?\"#define \"+l:\"\",f.envMap?\"#define \"+t:\"\",f.lightMap?\"#define USE_LIGHTMAP\":\"\",f.aoMap?\"#define USE_AOMAP\":\"\",f.emissiveMap?\"#define USE_EMISSIVEMAP\":\"\",f.bumpMap?\"#define USE_BUMPMAP\":\"\",f.normalMap?\"#define USE_NORMALMAP\":\"\",f.normalMap&&f.objectSpaceNormalMap?\"#define OBJECTSPACE_NORMALMAP\":\"\",f.specularMap?\"#define USE_SPECULARMAP\":\"\",f.roughnessMap?\"#define USE_ROUGHNESSMAP\":\"\",f.metalnessMap?\"#define USE_METALNESSMAP\":\"\",f.alphaMap?\"#define USE_ALPHAMAP\":\"\",f.vertexColors?\n\"#define USE_COLOR\":\"\",f.gradientMap?\"#define USE_GRADIENTMAP\":\"\",f.flatShading?\"#define FLAT_SHADED\":\"\",f.doubleSided?\"#define DOUBLE_SIDED\":\"\",f.flipSided?\"#define FLIP_SIDED\":\"\",f.shadowMapEnabled?\"#define USE_SHADOWMAP\":\"\",f.shadowMapEnabled?\"#define \"+p:\"\",f.premultipliedAlpha?\"#define PREMULTIPLIED_ALPHA\":\"\",f.physicallyCorrectLights?\"#define PHYSICALLY_CORRECT_LIGHTS\":\"\",f.logarithmicDepthBuffer?\"#define USE_LOGDEPTHBUF\":\"\",f.logarithmicDepthBuffer&&(g.isWebGL2||b.get(\"EXT_frag_depth\"))?\"#define USE_LOGDEPTHBUF_EXT\":\n\"\",f.envMap&&(g.isWebGL2||b.get(\"EXT_shader_texture_lod\"))?\"#define TEXTURE_LOD_EXT\":\"\",\"uniform mat4 viewMatrix;\",\"uniform vec3 cameraPosition;\",0!==f.toneMapping?\"#define TONE_MAPPING\":\"\",0!==f.toneMapping?I.tonemapping_pars_fragment:\"\",0!==f.toneMapping?Dg(\"toneMapping\",f.toneMapping):\"\",f.dithering?\"#define DITHERING\":\"\",f.outputEncoding||f.mapEncoding||f.matcapEncoding||f.envMapEncoding||f.emissiveMapEncoding?I.encodings_pars_fragment:\"\",f.mapEncoding?vd(\"mapTexelToLinear\",f.mapEncoding):\"\",\nf.matcapEncoding?vd(\"matcapTexelToLinear\",f.matcapEncoding):\"\",f.envMapEncoding?vd(\"envMapTexelToLinear\",f.envMapEncoding):\"\",f.emissiveMapEncoding?vd(\"emissiveMapTexelToLinear\",f.emissiveMapEncoding):\"\",f.outputEncoding?Cg(\"linearToOutputTexel\",f.outputEncoding):\"\",f.depthPacking?\"#define DEPTH_PACKING \"+d.depthPacking:\"\",\"\\n\"].filter(Ac).join(\"\\n\"));m=$d(m);m=$e(m,f);m=af(m,f);q=$d(q);q=$e(q,f);q=af(q,f);m=bf(m);q=bf(q);g.isWebGL2&&!d.isRawShaderMaterial&&(g=!1,p=/^\\s*#version\\s+300\\s+es\\s*\\n/,\nd.isShaderMaterial&&null!==m.match(p)&&null!==q.match(p)&&(g=!0,m=m.replace(p,\"\"),q=q.replace(p,\"\")),k=\"#version 300 es\\n\\n#define attribute in\\n#define varying out\\n#define texture2D texture\\n\"+k,b=[\"#version 300 es\\n\\n#define varying in\",g?\"\":\"out highp vec4 pc_fragColor;\",g?\"\":\"#define gl_FragColor pc_fragColor\",\"#define gl_FragDepthEXT gl_FragDepth\\n#define texture2D texture\\n#define textureCube texture\\n#define texture2DProj textureProj\\n#define texture2DLodEXT textureLod\\n#define texture2DProjLodEXT textureProjLod\\n#define textureCubeLodEXT textureLod\\n#define texture2DGradEXT textureGrad\\n#define texture2DProjGradEXT textureProjGrad\\n#define textureCubeGradEXT textureGrad\"].join(\"\\n\")+\n\"\\n\"+b);q=b+q;m=Ye(h,35633,k+m);q=Ye(h,35632,q);h.attachShader(u,m);h.attachShader(u,q);void 0!==d.index0AttributeName?h.bindAttribLocation(u,0,d.index0AttributeName):!0===f.morphTargets&&h.bindAttribLocation(u,0,\"position\");h.linkProgram(u);f=h.getProgramInfoLog(u).trim();g=h.getShaderInfoLog(m).trim();p=h.getShaderInfoLog(q).trim();l=r=!0;if(!1===h.getProgramParameter(u,35714))r=!1,console.error(\"THREE.WebGLProgram: shader error: \",h.getError(),\"35715\",h.getProgramParameter(u,35715),\"gl.getProgramInfoLog\",\nf,g,p);else if(\"\"!==f)console.warn(\"THREE.WebGLProgram: gl.getProgramInfoLog()\",f);else if(\"\"===g||\"\"===p)l=!1;l&&(this.diagnostics={runnable:r,material:d,programLog:f,vertexShader:{log:g,prefix:k},fragmentShader:{log:p,prefix:b}});h.deleteShader(m);h.deleteShader(q);var H;this.getUniforms=function(){void 0===H&&(H=new cb(h,u,a));return H};var G;this.getAttributes=function(){if(void 0===G){for(var a={},b=h.getProgramParameter(u,35721),c=0;c<b;c++){var d=h.getActiveAttrib(u,c).name;a[d]=h.getAttribLocation(u,\nd)}G=a}return G};this.destroy=function(){h.deleteProgram(u);this.program=void 0};Object.defineProperties(this,{uniforms:{get:function(){console.warn(\"THREE.WebGLProgram: .uniforms is now .getUniforms().\");return this.getUniforms()}},attributes:{get:function(){console.warn(\"THREE.WebGLProgram: .attributes is now .getAttributes().\");return this.getAttributes()}}});this.name=e.name;this.id=Hg++;this.code=c;this.usedTimes=1;this.program=u;this.vertexShader=m;this.fragmentShader=q;return this}function Ig(a,\nb,c){function d(a,b){if(a)a.isTexture?c=a.encoding:a.isWebGLRenderTarget&&(console.warn(\"THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.\"),c=a.texture.encoding);else var c=3E3;3E3===c&&b&&(c=3007);return c}var e=[],f={MeshDepthMaterial:\"depth\",MeshDistanceMaterial:\"distanceRGBA\",MeshNormalMaterial:\"normal\",MeshBasicMaterial:\"basic\",MeshLambertMaterial:\"lambert\",MeshPhongMaterial:\"phong\",MeshToonMaterial:\"phong\",MeshStandardMaterial:\"physical\",\nMeshPhysicalMaterial:\"physical\",MeshMatcapMaterial:\"matcap\",LineBasicMaterial:\"basic\",LineDashedMaterial:\"dashed\",PointsMaterial:\"points\",ShadowMaterial:\"shadow\",SpriteMaterial:\"sprite\"},g=\"precision supportsVertexTextures map mapEncoding matcap matcapEncoding envMap envMapMode envMapEncoding lightMap aoMap emissiveMap emissiveMapEncoding bumpMap normalMap objectSpaceNormalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering\".split(\" \");\nthis.getParameters=function(b,e,g,q,p,r,l){var h=f[b.type];if(l.isSkinnedMesh){var k=l.skeleton.bones;if(c.floatVertexTextures)k=1024;else{var m=Math.min(Math.floor((c.maxVertexUniforms-20)/4),k.length);m<k.length?(console.warn(\"THREE.WebGLRenderer: Skeleton has \"+k.length+\" bones. This GPU supports \"+m+\".\"),k=0):k=m}}else k=0;m=c.precision;null!==b.precision&&(m=c.getMaxPrecision(b.precision),m!==b.precision&&console.warn(\"THREE.WebGLProgram.getParameters:\",b.precision,\"not supported, using\",m,\"instead.\"));\nvar x=a.getRenderTarget();return{shaderID:h,precision:m,supportsVertexTextures:c.vertexTextures,outputEncoding:d(x?x.texture:null,a.gammaOutput),map:!!b.map,mapEncoding:d(b.map,a.gammaInput),matcap:!!b.matcap,matcapEncoding:d(b.matcap,a.gammaInput),envMap:!!b.envMap,envMapMode:b.envMap&&b.envMap.mapping,envMapEncoding:d(b.envMap,a.gammaInput),envMapCubeUV:!!b.envMap&&(306===b.envMap.mapping||307===b.envMap.mapping),lightMap:!!b.lightMap,aoMap:!!b.aoMap,emissiveMap:!!b.emissiveMap,emissiveMapEncoding:d(b.emissiveMap,\na.gammaInput),bumpMap:!!b.bumpMap,normalMap:!!b.normalMap,objectSpaceNormalMap:1===b.normalMapType,displacementMap:!!b.displacementMap,roughnessMap:!!b.roughnessMap,metalnessMap:!!b.metalnessMap,specularMap:!!b.specularMap,alphaMap:!!b.alphaMap,gradientMap:!!b.gradientMap,combine:b.combine,vertexColors:b.vertexColors,fog:!!q,useFog:b.fog,fogExp:q&&q.isFogExp2,flatShading:b.flatShading,sizeAttenuation:b.sizeAttenuation,logarithmicDepthBuffer:c.logarithmicDepthBuffer,skinning:b.skinning&&0<k,maxBones:k,\nuseVertexTexture:c.floatVertexTextures,morphTargets:b.morphTargets,morphNormals:b.morphNormals,maxMorphTargets:a.maxMorphTargets,maxMorphNormals:a.maxMorphNormals,numDirLights:e.directional.length,numPointLights:e.point.length,numSpotLights:e.spot.length,numRectAreaLights:e.rectArea.length,numHemiLights:e.hemi.length,numClippingPlanes:p,numClipIntersection:r,dithering:b.dithering,shadowMapEnabled:a.shadowMap.enabled&&l.receiveShadow&&0<g.length,shadowMapType:a.shadowMap.type,toneMapping:a.toneMapping,\nphysicallyCorrectLights:a.physicallyCorrectLights,premultipliedAlpha:b.premultipliedAlpha,alphaTest:b.alphaTest,doubleSided:2===b.side,flipSided:1===b.side,depthPacking:void 0!==b.depthPacking?b.depthPacking:!1}};this.getProgramCode=function(b,c){var d=[];c.shaderID?d.push(c.shaderID):(d.push(b.fragmentShader),d.push(b.vertexShader));if(void 0!==b.defines)for(var e in b.defines)d.push(e),d.push(b.defines[e]);for(e=0;e<g.length;e++)d.push(c[g[e]]);d.push(b.onBeforeCompile.toString());d.push(a.gammaOutput);\nd.push(a.gammaFactor);return d.join()};this.acquireProgram=function(d,f,g,q){for(var h,k=0,m=e.length;k<m;k++){var l=e[k];if(l.code===q){h=l;++h.usedTimes;break}}void 0===h&&(h=new Gg(a,b,q,d,f,g,c),e.push(h));return h};this.releaseProgram=function(a){if(0===--a.usedTimes){var b=e.indexOf(a);e[b]=e[e.length-1];e.pop();a.destroy()}};this.programs=e}function Jg(){var a=new WeakMap;return{get:function(b){var c=a.get(b);void 0===c&&(c={},a.set(b,c));return c},remove:function(b){a.delete(b)},update:function(b,\nc,d){a.get(b)[c]=d},dispose:function(){a=new WeakMap}}}function Kg(a,b){return a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.program&&b.program&&a.program!==b.program?a.program.id-b.program.id:a.material.id!==b.material.id?a.material.id-b.material.id:a.z!==b.z?a.z-b.z:a.id-b.id}function Lg(a,b){return a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.z!==b.z?b.z-a.z:a.id-b.id}function cf(){function a(a,d,e,k,m){var f=b[c];void 0===f?(f={id:a.id,object:a,geometry:d,material:e,\nprogram:e.program,renderOrder:a.renderOrder,z:k,group:m},b[c]=f):(f.id=a.id,f.object=a,f.geometry=d,f.material=e,f.program=e.program,f.renderOrder=a.renderOrder,f.z=k,f.group=m);c++;return f}var b=[],c=0,d=[],e=[];return{opaque:d,transparent:e,init:function(){c=0;d.length=0;e.length=0},push:function(b,c,h,k,m){b=a(b,c,h,k,m);(!0===h.transparent?e:d).push(b)},unshift:function(b,c,h,k,m){b=a(b,c,h,k,m);(!0===h.transparent?e:d).unshift(b)},sort:function(){1<d.length&&d.sort(Kg);1<e.length&&e.sort(Lg)}}}\nfunction Mg(){var a={};return{get:function(b,c){var d=a[b.id];if(void 0===d){var e=new cf;a[b.id]={};a[b.id][c.id]=e}else e=d[c.id],void 0===e&&(e=new cf,d[c.id]=e);return e},dispose:function(){a={}}}}function Ng(){var a={};return{get:function(b){if(void 0!==a[b.id])return a[b.id];switch(b.type){case \"DirectionalLight\":var c={direction:new n,color:new J,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new z};break;case \"SpotLight\":c={position:new n,direction:new n,color:new J,distance:0,coneCos:0,\npenumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new z};break;case \"PointLight\":c={position:new n,color:new J,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new z,shadowCameraNear:1,shadowCameraFar:1E3};break;case \"HemisphereLight\":c={direction:new n,skyColor:new J,groundColor:new J};break;case \"RectAreaLight\":c={color:new J,position:new n,halfWidth:new n,halfHeight:new n}}return a[b.id]=c}}}function Og(){var a=new Ng,b={id:Pg++,hash:{stateID:-1,directionalLength:-1,\npointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},c=new n,d=new O,e=new O;return{setup:function(f,g,h){var k=0,m=0,q=0,p=0,r=0,l=0,t=0,v=0;h=h.matrixWorldInverse;for(var w=0,n=f.length;w<n;w++){var u=f[w],H=u.color,G=u.intensity,N=u.distance,W=u.shadow&&u.shadow.map?u.shadow.map.texture:\nnull;if(u.isAmbientLight)k+=H.r*G,m+=H.g*G,q+=H.b*G;else if(u.isDirectionalLight){var A=a.get(u);A.color.copy(u.color).multiplyScalar(u.intensity);A.direction.setFromMatrixPosition(u.matrixWorld);c.setFromMatrixPosition(u.target.matrixWorld);A.direction.sub(c);A.direction.transformDirection(h);if(A.shadow=u.castShadow)H=u.shadow,A.shadowBias=H.bias,A.shadowRadius=H.radius,A.shadowMapSize=H.mapSize;b.directionalShadowMap[p]=W;b.directionalShadowMatrix[p]=u.shadow.matrix;b.directional[p]=A;p++}else if(u.isSpotLight){A=\na.get(u);A.position.setFromMatrixPosition(u.matrixWorld);A.position.applyMatrix4(h);A.color.copy(H).multiplyScalar(G);A.distance=N;A.direction.setFromMatrixPosition(u.matrixWorld);c.setFromMatrixPosition(u.target.matrixWorld);A.direction.sub(c);A.direction.transformDirection(h);A.coneCos=Math.cos(u.angle);A.penumbraCos=Math.cos(u.angle*(1-u.penumbra));A.decay=u.decay;if(A.shadow=u.castShadow)H=u.shadow,A.shadowBias=H.bias,A.shadowRadius=H.radius,A.shadowMapSize=H.mapSize;b.spotShadowMap[l]=W;b.spotShadowMatrix[l]=\nu.shadow.matrix;b.spot[l]=A;l++}else if(u.isRectAreaLight)A=a.get(u),A.color.copy(H).multiplyScalar(G),A.position.setFromMatrixPosition(u.matrixWorld),A.position.applyMatrix4(h),e.identity(),d.copy(u.matrixWorld),d.premultiply(h),e.extractRotation(d),A.halfWidth.set(.5*u.width,0,0),A.halfHeight.set(0,.5*u.height,0),A.halfWidth.applyMatrix4(e),A.halfHeight.applyMatrix4(e),b.rectArea[t]=A,t++;else if(u.isPointLight){A=a.get(u);A.position.setFromMatrixPosition(u.matrixWorld);A.position.applyMatrix4(h);\nA.color.copy(u.color).multiplyScalar(u.intensity);A.distance=u.distance;A.decay=u.decay;if(A.shadow=u.castShadow)H=u.shadow,A.shadowBias=H.bias,A.shadowRadius=H.radius,A.shadowMapSize=H.mapSize,A.shadowCameraNear=H.camera.near,A.shadowCameraFar=H.camera.far;b.pointShadowMap[r]=W;b.pointShadowMatrix[r]=u.shadow.matrix;b.point[r]=A;r++}else u.isHemisphereLight&&(A=a.get(u),A.direction.setFromMatrixPosition(u.matrixWorld),A.direction.transformDirection(h),A.direction.normalize(),A.skyColor.copy(u.color).multiplyScalar(G),\nA.groundColor.copy(u.groundColor).multiplyScalar(G),b.hemi[v]=A,v++)}b.ambient[0]=k;b.ambient[1]=m;b.ambient[2]=q;b.directional.length=p;b.spot.length=l;b.rectArea.length=t;b.point.length=r;b.hemi.length=v;b.hash.stateID=b.id;b.hash.directionalLength=p;b.hash.pointLength=r;b.hash.spotLength=l;b.hash.rectAreaLength=t;b.hash.hemiLength=v;b.hash.shadowsLength=g.length},state:b}}function df(){var a=new Og,b=[],c=[];return{init:function(){b.length=0;c.length=0},state:{lightsArray:b,shadowsArray:c,lights:a},\nsetupLights:function(d){a.setup(b,c,d)},pushLight:function(a){b.push(a)},pushShadow:function(a){c.push(a)}}}function Qg(){var a={};return{get:function(b,c){if(void 0===a[b.id]){var d=new df;a[b.id]={};a[b.id][c.id]=d}else void 0===a[b.id][c.id]?(d=new df,a[b.id][c.id]=d):d=a[b.id][c.id];return d},dispose:function(){a={}}}}function db(a){L.call(this);this.type=\"MeshDepthMaterial\";this.depthPacking=3200;this.morphTargets=this.skinning=!1;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=\n1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.lights=this.fog=!1;this.setValues(a)}function eb(a){L.call(this);this.type=\"MeshDistanceMaterial\";this.referencePosition=new n;this.nearDistance=1;this.farDistance=1E3;this.morphTargets=this.skinning=!1;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.lights=this.fog=!1;this.setValues(a)}function ef(a,b,c){function d(b,c,d,e,f,g){var h=b.geometry;var k=p;var m=b.customDepthMaterial;\nd&&(k=r,m=b.customDistanceMaterial);m?k=m:(m=!1,c.morphTargets&&(h&&h.isBufferGeometry?m=h.morphAttributes&&h.morphAttributes.position&&0<h.morphAttributes.position.length:h&&h.isGeometry&&(m=h.morphTargets&&0<h.morphTargets.length)),b.isSkinnedMesh&&!1===c.skinning&&console.warn(\"THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:\",b),b=b.isSkinnedMesh&&c.skinning,h=0,m&&(h|=1),b&&(h|=2),k=k[h]);a.localClippingEnabled&&!0===c.clipShadows&&0!==c.clippingPlanes.length&&(h=\nk.uuid,m=c.uuid,b=l[h],void 0===b&&(b={},l[h]=b),h=b[m],void 0===h&&(h=k.clone(),b[m]=h),k=h);k.visible=c.visible;k.wireframe=c.wireframe;k.side=null!=c.shadowSide?c.shadowSide:t[c.side];k.clipShadows=c.clipShadows;k.clippingPlanes=c.clippingPlanes;k.clipIntersection=c.clipIntersection;k.wireframeLinewidth=c.wireframeLinewidth;k.linewidth=c.linewidth;d&&k.isMeshDistanceMaterial&&(k.referencePosition.copy(e),k.nearDistance=f,k.farDistance=g);return k}function e(c,g,h,k){if(!1!==c.visible){if(c.layers.test(g.layers)&&\n(c.isMesh||c.isLine||c.isPoints)&&c.castShadow&&(!c.frustumCulled||f.intersectsObject(c))){c.modelViewMatrix.multiplyMatrices(h.matrixWorldInverse,c.matrixWorld);var m=b.update(c),p=c.material;if(Array.isArray(p))for(var r=m.groups,l=0,t=r.length;l<t;l++){var x=r[l],W=p[x.materialIndex];W&&W.visible&&(W=d(c,W,k,q,h.near,h.far),a.renderBufferDirect(h,null,m,W,c,x))}else p.visible&&(W=d(c,p,k,q,h.near,h.far),a.renderBufferDirect(h,null,m,W,c,null))}c=c.children;m=0;for(p=c.length;m<p;m++)e(c[m],g,h,\nk)}}var f=new td,g=new O,h=new z,k=new z(c,c),m=new n,q=new n,p=Array(4),r=Array(4),l={},t={0:1,1:0,2:2},v=[new n(1,0,0),new n(-1,0,0),new n(0,0,1),new n(0,0,-1),new n(0,1,0),new n(0,-1,0)],w=[new n(0,1,0),new n(0,1,0),new n(0,1,0),new n(0,1,0),new n(0,0,1),new n(0,0,-1)],y=[new ca,new ca,new ca,new ca,new ca,new ca];for(c=0;4!==c;++c){var u=0!==(c&1),H=0!==(c&2),G=new db({depthPacking:3201,morphTargets:u,skinning:H});p[c]=G;u=new eb({morphTargets:u,skinning:H});r[c]=u}var N=this;this.enabled=!1;\nthis.autoUpdate=!0;this.needsUpdate=!1;this.type=1;this.render=function(b,c,d){if(!1!==N.enabled&&(!1!==N.autoUpdate||!1!==N.needsUpdate)&&0!==b.length){var p=a.state;p.disable(3042);p.buffers.color.setClear(1,1,1,1);p.buffers.depth.setTest(!0);p.setScissorTest(!1);for(var r,l=0,t=b.length;l<t;l++){var x=b[l];r=x.shadow;var W=x&&x.isPointLight;if(void 0===r)console.warn(\"THREE.WebGLShadowMap:\",x,\"has no shadow.\");else{var A=r.camera;h.copy(r.mapSize);h.min(k);if(W){var n=h.x,u=h.y;y[0].set(2*n,u,\nn,u);y[1].set(0,u,n,u);y[2].set(3*n,u,n,u);y[3].set(n,u,n,u);y[4].set(3*n,0,n,u);y[5].set(n,0,n,u);h.x*=4;h.y*=2}null===r.map&&(r.map=new jb(h.x,h.y,{minFilter:1003,magFilter:1003,format:1023}),r.map.texture.name=x.name+\".shadowMap\",A.updateProjectionMatrix());r.isSpotLightShadow&&r.update(x);n=r.map;u=r.matrix;q.setFromMatrixPosition(x.matrixWorld);A.position.copy(q);W?(r=6,u.makeTranslation(-q.x,-q.y,-q.z)):(r=1,m.setFromMatrixPosition(x.target.matrixWorld),A.lookAt(m),A.updateMatrixWorld(),u.set(.5,\n0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),u.multiply(A.projectionMatrix),u.multiply(A.matrixWorldInverse));a.setRenderTarget(n);a.clear();for(x=0;x<r;x++)W&&(m.copy(A.position),m.add(v[x]),A.up.copy(w[x]),A.lookAt(m),A.updateMatrixWorld(),p.viewport(y[x])),g.multiplyMatrices(A.projectionMatrix,A.matrixWorldInverse),f.setFromMatrix(g),e(c,d,A,W)}}N.needsUpdate=!1}}}function Rg(a,b,c,d){function e(b,c,d){var e=new Uint8Array(4),f=a.createTexture();a.bindTexture(b,f);a.texParameteri(b,10241,9728);a.texParameteri(b,\n10240,9728);for(b=0;b<d;b++)a.texImage2D(c+b,0,6408,1,1,0,6408,5121,e);return f}function f(c,e){y[c]=1;0===u[c]&&(a.enableVertexAttribArray(c),u[c]=1);H[c]!==e&&((d.isWebGL2?a:b.get(\"ANGLE_instanced_arrays\"))[d.isWebGL2?\"vertexAttribDivisor\":\"vertexAttribDivisorANGLE\"](c,e),H[c]=e)}function g(b){!0!==G[b]&&(a.enable(b),G[b]=!0)}function h(b){!1!==G[b]&&(a.disable(b),G[b]=!1)}function k(b,d,e,f,k,m,p,q){if(0===b)A&&(h(3042),A=!1);else if(A||(g(3042),A=!0),5!==b){if(b!==Mb||q!==F){if(100!==z||100!==\nB)a.blendEquation(32774),B=z=100;if(q)switch(b){case 1:a.blendFuncSeparate(1,771,1,771);break;case 2:a.blendFunc(1,1);break;case 3:a.blendFuncSeparate(0,0,769,771);break;case 4:a.blendFuncSeparate(0,768,0,770);break;default:console.error(\"THREE.WebGLState: Invalid blending: \",b)}else switch(b){case 1:a.blendFuncSeparate(770,771,1,771);break;case 2:a.blendFunc(770,1);break;case 3:a.blendFunc(0,769);break;case 4:a.blendFunc(0,768);break;default:console.error(\"THREE.WebGLState: Invalid blending: \",b)}D=\nC=Y=Yd=null;Mb=b;F=q}}else{k=k||d;m=m||e;p=p||f;if(d!==z||k!==B)a.blendEquationSeparate(c.convert(d),c.convert(k)),z=d,B=k;if(e!==Yd||f!==Y||m!==C||p!==D)a.blendFuncSeparate(c.convert(e),c.convert(f),c.convert(m),c.convert(p)),Yd=e,Y=f,C=m,D=p;Mb=b;F=null}}function m(b){J!==b&&(b?a.frontFace(2304):a.frontFace(2305),J=b)}function q(b){0!==b?(g(2884),b!==K&&(1===b?a.cullFace(1029):2===b?a.cullFace(1028):a.cullFace(1032))):h(2884);K=b}function p(b,c,d){if(b){if(g(32823),Q!==c||L!==d)a.polygonOffset(c,\nd),Q=c,L=d}else h(32823)}function r(b){void 0===b&&(b=33984+R-1);I!==b&&(a.activeTexture(b),I=b)}var l=new function(){var b=!1,c=new ca,d=null,e=new ca(0,0,0,0);return{setMask:function(c){d===c||b||(a.colorMask(c,c,c,c),d=c)},setLocked:function(a){b=a},setClear:function(b,d,f,g,h){!0===h&&(b*=g,d*=g,f*=g);c.set(b,d,f,g);!1===e.equals(c)&&(a.clearColor(b,d,f,g),e.copy(c))},reset:function(){b=!1;d=null;e.set(-1,0,0,0)}}},t=new function(){var b=!1,c=null,d=null,e=null;return{setTest:function(a){a?g(2929):\nh(2929)},setMask:function(d){c===d||b||(a.depthMask(d),c=d)},setFunc:function(b){if(d!==b){if(b)switch(b){case 0:a.depthFunc(512);break;case 1:a.depthFunc(519);break;case 2:a.depthFunc(513);break;case 3:a.depthFunc(515);break;case 4:a.depthFunc(514);break;case 5:a.depthFunc(518);break;case 6:a.depthFunc(516);break;case 7:a.depthFunc(517);break;default:a.depthFunc(515)}else a.depthFunc(515);d=b}},setLocked:function(a){b=a},setClear:function(b){e!==b&&(a.clearDepth(b),e=b)},reset:function(){b=!1;e=\nd=c=null}}},v=new function(){var b=!1,c=null,d=null,e=null,f=null,k=null,m=null,p=null,q=null;return{setTest:function(a){a?g(2960):h(2960)},setMask:function(d){c===d||b||(a.stencilMask(d),c=d)},setFunc:function(b,c,g){if(d!==b||e!==c||f!==g)a.stencilFunc(b,c,g),d=b,e=c,f=g},setOp:function(b,c,d){if(k!==b||m!==c||p!==d)a.stencilOp(b,c,d),k=b,m=c,p=d},setLocked:function(a){b=a},setClear:function(b){q!==b&&(a.clearStencil(b),q=b)},reset:function(){b=!1;q=p=m=k=f=e=d=c=null}}},n=a.getParameter(34921),\ny=new Uint8Array(n),u=new Uint8Array(n),H=new Uint8Array(n),G={},N=null,W=null,A=null,Mb=null,z=null,Yd=null,Y=null,B=null,C=null,D=null,F=!1,J=null,K=null,O=null,Q=null,L=null,R=a.getParameter(35661),E=!1;n=0;n=a.getParameter(7938);-1!==n.indexOf(\"WebGL\")?(n=parseFloat(/^WebGL ([0-9])/.exec(n)[1]),E=1<=n):-1!==n.indexOf(\"OpenGL ES\")&&(n=parseFloat(/^OpenGL ES ([0-9])/.exec(n)[1]),E=2<=n);var I=null,T={},X=new ca,M=new ca,U={};U[3553]=e(3553,3553,1);U[34067]=e(34067,34069,6);l.setClear(0,0,0,1);t.setClear(1);\nv.setClear(0);g(2929);t.setFunc(3);m(!1);q(1);g(2884);k(0);return{buffers:{color:l,depth:t,stencil:v},initAttributes:function(){for(var a=0,b=y.length;a<b;a++)y[a]=0},enableAttribute:function(a){f(a,0)},enableAttributeAndDivisor:f,disableUnusedAttributes:function(){for(var b=0,c=u.length;b!==c;++b)u[b]!==y[b]&&(a.disableVertexAttribArray(b),u[b]=0)},enable:g,disable:h,getCompressedTextureFormats:function(){if(null===N&&(N=[],b.get(\"WEBGL_compressed_texture_pvrtc\")||b.get(\"WEBGL_compressed_texture_s3tc\")||\nb.get(\"WEBGL_compressed_texture_etc1\")||b.get(\"WEBGL_compressed_texture_astc\")))for(var c=a.getParameter(34467),d=0;d<c.length;d++)N.push(c[d]);return N},useProgram:function(b){return W!==b?(a.useProgram(b),W=b,!0):!1},setBlending:k,setMaterial:function(a,b){2===a.side?h(2884):g(2884);var c=1===a.side;b&&(c=!c);m(c);1===a.blending&&!1===a.transparent?k(0):k(a.blending,a.blendEquation,a.blendSrc,a.blendDst,a.blendEquationAlpha,a.blendSrcAlpha,a.blendDstAlpha,a.premultipliedAlpha);t.setFunc(a.depthFunc);\nt.setTest(a.depthTest);t.setMask(a.depthWrite);l.setMask(a.colorWrite);p(a.polygonOffset,a.polygonOffsetFactor,a.polygonOffsetUnits)},setFlipSided:m,setCullFace:q,setLineWidth:function(b){b!==O&&(E&&a.lineWidth(b),O=b)},setPolygonOffset:p,setScissorTest:function(a){a?g(3089):h(3089)},activeTexture:r,bindTexture:function(b,c){null===I&&r();var d=T[I];void 0===d&&(d={type:void 0,texture:void 0},T[I]=d);if(d.type!==b||d.texture!==c)a.bindTexture(b,c||U[b]),d.type=b,d.texture=c},compressedTexImage2D:function(){try{a.compressedTexImage2D.apply(a,\narguments)}catch(fa){console.error(\"THREE.WebGLState:\",fa)}},texImage2D:function(){try{a.texImage2D.apply(a,arguments)}catch(fa){console.error(\"THREE.WebGLState:\",fa)}},texImage3D:function(){try{a.texImage3D.apply(a,arguments)}catch(fa){console.error(\"THREE.WebGLState:\",fa)}},scissor:function(b){!1===X.equals(b)&&(a.scissor(b.x,b.y,b.z,b.w),X.copy(b))},viewport:function(b){!1===M.equals(b)&&(a.viewport(b.x,b.y,b.z,b.w),M.copy(b))},reset:function(){for(var b=0;b<u.length;b++)1===u[b]&&(a.disableVertexAttribArray(b),\nu[b]=0);G={};I=N=null;T={};K=J=Mb=W=null;l.reset();t.reset();v.reset()}}}function Sg(a,b,c,d,e,f,g){function h(a,b){if(a.width>b||a.height>b){if(\"data\"in a){console.warn(\"THREE.WebGLRenderer: image in DataTexture is too big (\"+a.width+\"x\"+a.height+\").\");return}b/=Math.max(a.width,a.height);var c=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\");c.width=Math.floor(a.width*b);c.height=Math.floor(a.height*b);c.getContext(\"2d\").drawImage(a,0,0,a.width,a.height,0,0,c.width,c.height);console.warn(\"THREE.WebGLRenderer: image is too big (\"+\na.width+\"x\"+a.height+\"). Resized to \"+c.width+\"x\"+c.height);return c}return a}function k(a){return R.isPowerOfTwo(a.width)&&R.isPowerOfTwo(a.height)}function m(a,b){return a.generateMipmaps&&b&&1003!==a.minFilter&&1006!==a.minFilter}function q(b,c,e,f){a.generateMipmap(b);d.get(c).__maxMipLevel=Math.log(Math.max(e,f))*Math.LOG2E}function p(a,b){if(!e.isWebGL2)return a;if(6403===a){if(5126===b)return 33326;if(5131===b)return 33325;if(5121===b)return 33321}if(6407===a){if(5126===b)return 34837;if(5131===\nb)return 34843;if(5121===b)return 32849}if(6408===a){if(5126===b)return 34836;if(5131===b)return 34842;if(5121===b)return 32856}return a}function r(a){return 1003===a||1004===a||1005===a?9728:9729}function l(b){b=b.target;b.removeEventListener(\"dispose\",l);a:{var c=d.get(b);if(b.image&&c.__image__webglTextureCube)a.deleteTexture(c.__image__webglTextureCube);else{if(void 0===c.__webglInit)break a;a.deleteTexture(c.__webglTexture)}d.remove(b)}b.isVideoTexture&&delete G[b.id];g.memory.textures--}function t(b){b=\nb.target;b.removeEventListener(\"dispose\",t);var c=d.get(b),e=d.get(b.texture);if(b){void 0!==e.__webglTexture&&a.deleteTexture(e.__webglTexture);b.depthTexture&&b.depthTexture.dispose();if(b.isWebGLRenderTargetCube)for(e=0;6>e;e++)a.deleteFramebuffer(c.__webglFramebuffer[e]),c.__webglDepthbuffer&&a.deleteRenderbuffer(c.__webglDepthbuffer[e]);else a.deleteFramebuffer(c.__webglFramebuffer),c.__webglDepthbuffer&&a.deleteRenderbuffer(c.__webglDepthbuffer);d.remove(b.texture);d.remove(b)}g.memory.textures--}\nfunction v(a,b){var e=d.get(a);if(a.isVideoTexture){var f=a.id,h=g.render.frame;G[f]!==h&&(G[f]=h,a.update())}if(0<a.version&&e.__version!==a.version)if(f=a.image,void 0===f)console.warn(\"THREE.WebGLRenderer: Texture marked for update but image is undefined\");else if(!1===f.complete)console.warn(\"THREE.WebGLRenderer: Texture marked for update but image is incomplete\");else{y(e,a,b);return}c.activeTexture(33984+b);c.bindTexture(3553,e.__webglTexture)}function n(c,g,h){h?(a.texParameteri(c,10242,f.convert(g.wrapS)),\na.texParameteri(c,10243,f.convert(g.wrapT)),a.texParameteri(c,10240,f.convert(g.magFilter)),a.texParameteri(c,10241,f.convert(g.minFilter))):(a.texParameteri(c,10242,33071),a.texParameteri(c,10243,33071),1001===g.wrapS&&1001===g.wrapT||console.warn(\"THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.\"),a.texParameteri(c,10240,r(g.magFilter)),a.texParameteri(c,10241,r(g.minFilter)),1003!==g.minFilter&&1006!==g.minFilter&&console.warn(\"THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.\"));\n!(h=b.get(\"EXT_texture_filter_anisotropic\"))||1015===g.type&&null===b.get(\"OES_texture_float_linear\")||1016===g.type&&null===(e.isWebGL2||b.get(\"OES_texture_half_float_linear\"))||!(1<g.anisotropy||d.get(g).__currentAnisotropy)||(a.texParameterf(c,h.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(g.anisotropy,e.getMaxAnisotropy())),d.get(g).__currentAnisotropy=g.anisotropy)}function y(b,d,r){var x=d.isDataTexture3D?32879:3553;void 0===b.__webglInit&&(b.__webglInit=!0,d.addEventListener(\"dispose\",l),b.__webglTexture=\na.createTexture(),g.memory.textures++);c.activeTexture(33984+r);c.bindTexture(x,b.__webglTexture);a.pixelStorei(37440,d.flipY);a.pixelStorei(37441,d.premultiplyAlpha);a.pixelStorei(3317,d.unpackAlignment);r=h(d.image,e.maxTextureSize);var t=e.isWebGL2?!1:1001!==d.wrapS||1001!==d.wrapT||1003!==d.minFilter&&1006!==d.minFilter;t&&!1===k(r)&&(r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof ImageBitmap)&&(void 0===N&&(N=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\n\"canvas\")),N.width=R.floorPowerOfTwo(r.width),N.height=R.floorPowerOfTwo(r.height),N.getContext(\"2d\").drawImage(r,0,0,N.width,N.height),console.warn(\"THREE.WebGLRenderer: image is not power of two (\"+r.width+\"x\"+r.height+\"). Resized to \"+N.width+\"x\"+N.height),r=N);t=k(r);var v=f.convert(d.format),w=f.convert(d.type),u=p(v,w);n(x,d,t);var W=d.mipmaps;if(d.isDepthTexture){u=6402;if(1015===d.type){if(!e.isWebGL2)throw Error(\"Float Depth Texture only supported in WebGL2.0\");u=36012}else e.isWebGL2&&(u=\n33189);1026===d.format&&6402===u&&1012!==d.type&&1014!==d.type&&(console.warn(\"THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.\"),d.type=1012,w=f.convert(d.type));1027===d.format&&(u=34041,1020!==d.type&&(console.warn(\"THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.\"),d.type=1020,w=f.convert(d.type)));c.texImage2D(3553,0,u,r.width,r.height,0,v,w,null)}else if(d.isDataTexture)if(0<W.length&&t){for(var A=0,G=W.length;A<G;A++)x=\nW[A],c.texImage2D(3553,A,u,x.width,x.height,0,v,w,x.data);d.generateMipmaps=!1;b.__maxMipLevel=W.length-1}else c.texImage2D(3553,0,u,r.width,r.height,0,v,w,r.data),b.__maxMipLevel=0;else if(d.isCompressedTexture){A=0;for(G=W.length;A<G;A++)x=W[A],1023!==d.format&&1022!==d.format?-1<c.getCompressedTextureFormats().indexOf(v)?c.compressedTexImage2D(3553,A,u,x.width,x.height,0,x.data):console.warn(\"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()\"):c.texImage2D(3553,\nA,u,x.width,x.height,0,v,w,x.data);b.__maxMipLevel=W.length-1}else if(d.isDataTexture3D)c.texImage3D(32879,0,u,r.width,r.height,r.depth,0,v,w,r.data),b.__maxMipLevel=0;else if(0<W.length&&t){A=0;for(G=W.length;A<G;A++)x=W[A],c.texImage2D(3553,A,u,v,w,x);d.generateMipmaps=!1;b.__maxMipLevel=W.length-1}else c.texImage2D(3553,0,u,v,w,r),b.__maxMipLevel=0;m(d,t)&&q(3553,d,r.width,r.height);b.__version=d.version;if(d.onUpdate)d.onUpdate(d)}function u(b,e,g,h){var k=f.convert(e.texture.format),m=f.convert(e.texture.type),\nq=p(k,m);c.texImage2D(h,0,q,e.width,e.height,0,k,m,null);a.bindFramebuffer(36160,b);a.framebufferTexture2D(36160,g,h,d.get(e.texture).__webglTexture,0);a.bindFramebuffer(36160,null)}function H(b,c){a.bindRenderbuffer(36161,b);c.depthBuffer&&!c.stencilBuffer?(a.renderbufferStorage(36161,33189,c.width,c.height),a.framebufferRenderbuffer(36160,36096,36161,b)):c.depthBuffer&&c.stencilBuffer?(a.renderbufferStorage(36161,34041,c.width,c.height),a.framebufferRenderbuffer(36160,33306,36161,b)):a.renderbufferStorage(36161,\n32854,c.width,c.height);a.bindRenderbuffer(36161,null)}var G={},N;this.setTexture2D=v;this.setTexture3D=function(a,b){var e=d.get(a);0<a.version&&e.__version!==a.version?y(e,a,b):(c.activeTexture(33984+b),c.bindTexture(32879,e.__webglTexture))};this.setTextureCube=function(b,r){var x=d.get(b);if(6===b.image.length)if(0<b.version&&x.__version!==b.version){x.__image__webglTextureCube||(b.addEventListener(\"dispose\",l),x.__image__webglTextureCube=a.createTexture(),g.memory.textures++);c.activeTexture(33984+\nr);c.bindTexture(34067,x.__image__webglTextureCube);a.pixelStorei(37440,b.flipY);r=b&&b.isCompressedTexture;for(var t=b.image[0]&&b.image[0].isDataTexture,v=[],u=0;6>u;u++)v[u]=r||t?t?b.image[u].image:b.image[u]:h(b.image[u],e.maxCubemapSize);var w=v[0],W=k(w),A=f.convert(b.format),G=f.convert(b.type),H=p(A,G);n(34067,b,W);for(u=0;6>u;u++)if(r)for(var y,N=v[u].mipmaps,z=0,B=N.length;z<B;z++)y=N[z],1023!==b.format&&1022!==b.format?-1<c.getCompressedTextureFormats().indexOf(A)?c.compressedTexImage2D(34069+\nu,z,H,y.width,y.height,0,y.data):console.warn(\"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()\"):c.texImage2D(34069+u,z,H,y.width,y.height,0,A,G,y.data);else t?c.texImage2D(34069+u,0,H,v[u].width,v[u].height,0,A,G,v[u].data):c.texImage2D(34069+u,0,H,A,G,v[u]);x.__maxMipLevel=r?N.length-1:0;m(b,W)&&q(34067,b,w.width,w.height);x.__version=b.version;if(b.onUpdate)b.onUpdate(b)}else c.activeTexture(33984+r),c.bindTexture(34067,x.__image__webglTextureCube)};\nthis.setTextureCubeDynamic=function(a,b){c.activeTexture(33984+b);c.bindTexture(34067,d.get(a).__webglTexture)};this.setupRenderTarget=function(b){var e=d.get(b),f=d.get(b.texture);b.addEventListener(\"dispose\",t);f.__webglTexture=a.createTexture();g.memory.textures++;var h=!0===b.isWebGLRenderTargetCube,p=k(b);if(h){e.__webglFramebuffer=[];for(var r=0;6>r;r++)e.__webglFramebuffer[r]=a.createFramebuffer()}else e.__webglFramebuffer=a.createFramebuffer();if(h){c.bindTexture(34067,f.__webglTexture);n(34067,\nb.texture,p);for(r=0;6>r;r++)u(e.__webglFramebuffer[r],b,36064,34069+r);m(b.texture,p)&&q(34067,b.texture,b.width,b.height);c.bindTexture(34067,null)}else c.bindTexture(3553,f.__webglTexture),n(3553,b.texture,p),u(e.__webglFramebuffer,b,36064,3553),m(b.texture,p)&&q(3553,b.texture,b.width,b.height),c.bindTexture(3553,null);if(b.depthBuffer){e=d.get(b);f=!0===b.isWebGLRenderTargetCube;if(b.depthTexture){if(f)throw Error(\"target.depthTexture not supported in Cube render targets\");if(b&&b.isWebGLRenderTargetCube)throw Error(\"Depth Texture with cube render targets is not supported\");\na.bindFramebuffer(36160,e.__webglFramebuffer);if(!b.depthTexture||!b.depthTexture.isDepthTexture)throw Error(\"renderTarget.depthTexture must be an instance of THREE.DepthTexture\");d.get(b.depthTexture).__webglTexture&&b.depthTexture.image.width===b.width&&b.depthTexture.image.height===b.height||(b.depthTexture.image.width=b.width,b.depthTexture.image.height=b.height,b.depthTexture.needsUpdate=!0);v(b.depthTexture,0);e=d.get(b.depthTexture).__webglTexture;if(1026===b.depthTexture.format)a.framebufferTexture2D(36160,\n36096,3553,e,0);else if(1027===b.depthTexture.format)a.framebufferTexture2D(36160,33306,3553,e,0);else throw Error(\"Unknown depthTexture format\");}else if(f)for(e.__webglDepthbuffer=[],f=0;6>f;f++)a.bindFramebuffer(36160,e.__webglFramebuffer[f]),e.__webglDepthbuffer[f]=a.createRenderbuffer(),H(e.__webglDepthbuffer[f],b);else a.bindFramebuffer(36160,e.__webglFramebuffer),e.__webglDepthbuffer=a.createRenderbuffer(),H(e.__webglDepthbuffer,b);a.bindFramebuffer(36160,null)}};this.updateRenderTargetMipmap=\nfunction(a){var b=a.texture,e=k(a);if(m(b,e)){e=a.isWebGLRenderTargetCube?34067:3553;var f=d.get(b).__webglTexture;c.bindTexture(e,f);q(e,b,a.width,a.height);c.bindTexture(e,null)}}}function ff(a,b,c){return{convert:function(a){if(1E3===a)return 10497;if(1001===a)return 33071;if(1002===a)return 33648;if(1003===a)return 9728;if(1004===a)return 9984;if(1005===a)return 9986;if(1006===a)return 9729;if(1007===a)return 9985;if(1008===a)return 9987;if(1009===a)return 5121;if(1017===a)return 32819;if(1018===\na)return 32820;if(1019===a)return 33635;if(1010===a)return 5120;if(1011===a)return 5122;if(1012===a)return 5123;if(1013===a)return 5124;if(1014===a)return 5125;if(1015===a)return 5126;if(1016===a){if(c.isWebGL2)return 5131;var d=b.get(\"OES_texture_half_float\");if(null!==d)return d.HALF_FLOAT_OES}if(1021===a)return 6406;if(1022===a)return 6407;if(1023===a)return 6408;if(1024===a)return 6409;if(1025===a)return 6410;if(1026===a)return 6402;if(1027===a)return 34041;if(1028===a)return 6403;if(100===a)return 32774;\nif(101===a)return 32778;if(102===a)return 32779;if(200===a)return 0;if(201===a)return 1;if(202===a)return 768;if(203===a)return 769;if(204===a)return 770;if(205===a)return 771;if(206===a)return 772;if(207===a)return 773;if(208===a)return 774;if(209===a)return 775;if(210===a)return 776;if(33776===a||33777===a||33778===a||33779===a)if(d=b.get(\"WEBGL_compressed_texture_s3tc\"),null!==d){if(33776===a)return d.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===a)return d.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===a)return d.COMPRESSED_RGBA_S3TC_DXT3_EXT;\nif(33779===a)return d.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===a||35841===a||35842===a||35843===a)if(d=b.get(\"WEBGL_compressed_texture_pvrtc\"),null!==d){if(35840===a)return d.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===a)return d.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===a)return d.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===a)return d.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===a&&(d=b.get(\"WEBGL_compressed_texture_etc1\"),null!==d))return d.COMPRESSED_RGB_ETC1_WEBGL;if(37808===a||37809===a||37810===\na||37811===a||37812===a||37813===a||37814===a||37815===a||37816===a||37817===a||37818===a||37819===a||37820===a||37821===a)if(d=b.get(\"WEBGL_compressed_texture_astc\"),null!==d)return a;if(103===a||104===a){if(c.isWebGL2){if(103===a)return 32775;if(104===a)return 32776}d=b.get(\"EXT_blend_minmax\");if(null!==d){if(103===a)return d.MIN_EXT;if(104===a)return d.MAX_EXT}}if(1020===a){if(c.isWebGL2)return 34042;d=b.get(\"WEBGL_depth_texture\");if(null!==d)return d.UNSIGNED_INT_24_8_WEBGL}return 0}}}function Pb(){C.call(this);\nthis.type=\"Group\"}function Ra(){C.call(this);this.type=\"Camera\";this.matrixWorldInverse=new O;this.projectionMatrix=new O;this.projectionMatrixInverse=new O}function V(a,b,c,d){Ra.call(this);this.type=\"PerspectiveCamera\";this.fov=void 0!==a?a:50;this.zoom=1;this.near=void 0!==c?c:.1;this.far=void 0!==d?d:2E3;this.focus=10;this.aspect=void 0!==b?b:1;this.view=null;this.filmGauge=35;this.filmOffset=0;this.updateProjectionMatrix()}function Dc(a){V.call(this);this.cameras=a||[]}function gf(a,b,c){hf.setFromMatrixPosition(b.matrixWorld);\njf.setFromMatrixPosition(c.matrixWorld);var d=hf.distanceTo(jf),e=b.projectionMatrix.elements,f=c.projectionMatrix.elements,g=e[14]/(e[10]-1);c=e[14]/(e[10]+1);var h=(e[9]+1)/e[5],k=(e[9]-1)/e[5],m=(e[8]-1)/e[0],q=(f[8]+1)/f[0];e=g*m;f=g*q;q=d/(-m+q);m=q*-m;b.matrixWorld.decompose(a.position,a.quaternion,a.scale);a.translateX(m);a.translateZ(q);a.matrixWorld.compose(a.position,a.quaternion,a.scale);a.matrixWorldInverse.getInverse(a.matrixWorld);b=g+q;g=c+q;a.projectionMatrix.makePerspective(e-m,f+\n(d-m),h*c/g*b,k*c/g*b,b,g)}function kf(a){function b(){return null!==e&&!0===e.isPresenting}function c(){if(b()){var c=e.getEyeParameters(\"left\"),f=c.renderWidth*q;c=c.renderHeight*q;H=a.getPixelRatio();u=a.getSize();a.setDrawingBufferSize(2*f,c,1);N.start()}else d.enabled&&a.setDrawingBufferSize(u.width,u.height,H),N.stop()}var d=this,e=null,f=null,g=null,h=[],k=new O,m=new O,q=1,p=\"stage\";\"undefined\"!==typeof window&&\"VRFrameData\"in window&&(f=new window.VRFrameData,window.addEventListener(\"vrdisplaypresentchange\",\nc,!1));var r=new O,l=new ka,t=new n,v=new V;v.bounds=new ca(0,0,.5,1);v.layers.enable(1);var w=new V;w.bounds=new ca(.5,0,.5,1);w.layers.enable(2);var y=new Dc([v,w]);y.layers.enable(1);y.layers.enable(2);var u,H,G=[];this.enabled=!1;this.getController=function(a){var b=h[a];void 0===b&&(b=new Pb,b.matrixAutoUpdate=!1,b.visible=!1,h[a]=b);return b};this.getDevice=function(){return e};this.setDevice=function(a){void 0!==a&&(e=a);N.setContext(a)};this.setFramebufferScaleFactor=function(a){q=a};this.setFrameOfReferenceType=\nfunction(a){p=a};this.setPoseTarget=function(a){void 0!==a&&(g=a)};this.getCamera=function(a){var b=\"stage\"===p?1.6:0;if(null===e)return a.position.set(0,b,0),a;e.depthNear=a.near;e.depthFar=a.far;e.getFrameData(f);if(\"stage\"===p){var c=e.stageParameters;c?k.fromArray(c.sittingToStandingTransform):k.makeTranslation(0,b,0)}b=f.pose;c=null!==g?g:a;c.matrix.copy(k);c.matrix.decompose(c.position,c.quaternion,c.scale);null!==b.orientation&&(l.fromArray(b.orientation),c.quaternion.multiply(l));null!==b.position&&\n(l.setFromRotationMatrix(k),t.fromArray(b.position),t.applyQuaternion(l),c.position.add(t));c.updateMatrixWorld();if(!1===e.isPresenting)return a;v.near=a.near;w.near=a.near;v.far=a.far;w.far=a.far;v.matrixWorldInverse.fromArray(f.leftViewMatrix);w.matrixWorldInverse.fromArray(f.rightViewMatrix);m.getInverse(k);\"stage\"===p&&(v.matrixWorldInverse.multiply(m),w.matrixWorldInverse.multiply(m));a=c.parent;null!==a&&(r.getInverse(a.matrixWorld),v.matrixWorldInverse.multiply(r),w.matrixWorldInverse.multiply(r));\nv.matrixWorld.getInverse(v.matrixWorldInverse);w.matrixWorld.getInverse(w.matrixWorldInverse);v.projectionMatrix.fromArray(f.leftProjectionMatrix);w.projectionMatrix.fromArray(f.rightProjectionMatrix);gf(y,v,w);a=e.getLayers();a.length&&(a=a[0],null!==a.leftBounds&&4===a.leftBounds.length&&v.bounds.fromArray(a.leftBounds),null!==a.rightBounds&&4===a.rightBounds.length&&w.bounds.fromArray(a.rightBounds));a:for(a=0;a<h.length;a++){b=h[a];b:{c=a;for(var d=navigator.getGamepads&&navigator.getGamepads(),\nq=0,x=0,n=d.length;q<n;q++){var u=d[q];if(u&&(\"Daydream Controller\"===u.id||\"Gear VR Controller\"===u.id||\"Oculus Go Controller\"===u.id||\"OpenVR Gamepad\"===u.id||u.id.startsWith(\"Oculus Touch\")||u.id.startsWith(\"Spatial Controller\"))){if(x===c){c=u;break b}x++}}c=void 0}if(void 0!==c&&void 0!==c.pose){if(null===c.pose)break a;d=c.pose;!1===d.hasPosition&&b.position.set(.2,-.6,-.05);null!==d.position&&b.position.fromArray(d.position);null!==d.orientation&&b.quaternion.fromArray(d.orientation);b.matrix.compose(b.position,\nb.quaternion,b.scale);b.matrix.premultiply(k);b.matrix.decompose(b.position,b.quaternion,b.scale);b.matrixWorldNeedsUpdate=!0;b.visible=!0;d=\"Daydream Controller\"===c.id?0:1;G[a]!==c.buttons[d].pressed&&(G[a]=c.buttons[d].pressed,!0===G[a]?b.dispatchEvent({type:\"selectstart\"}):(b.dispatchEvent({type:\"selectend\"}),b.dispatchEvent({type:\"select\"})))}else b.visible=!1}return y};this.getStandingMatrix=function(){return k};this.isPresenting=b;var N=new Wd;this.setAnimationLoop=function(a){N.setAnimationLoop(a)};\nthis.submitFrame=function(){b()&&e.submitFrame()};this.dispose=function(){\"undefined\"!==typeof window&&window.removeEventListener(\"vrdisplaypresentchange\",c)}}function Tg(a){function b(){return null!==h&&null!==m}function c(a){var b=r[l.indexOf(a.inputSource)];b&&b.dispatchEvent({type:a.type})}function d(){a.setFramebuffer(null);u.stop()}function e(a,b){null===b?a.matrixWorld.copy(a.matrix):a.matrixWorld.multiplyMatrices(b.matrixWorld,a.matrix);a.matrixWorldInverse.getInverse(a.matrixWorld)}var f=\na.context,g=null,h=null,k=1,m=null,q=\"stage\",p=null,r=[],l=[],t=new V;t.layers.enable(1);t.viewport=new ca;var v=new V;v.layers.enable(2);v.viewport=new ca;var n=new Dc([t,v]);n.layers.enable(1);n.layers.enable(2);this.enabled=!1;this.getController=function(a){var b=r[a];void 0===b&&(b=new Pb,b.matrixAutoUpdate=!1,b.visible=!1,r[a]=b);return b};this.getDevice=function(){return g};this.setDevice=function(a){void 0!==a&&(g=a);a instanceof XRDevice&&f.setCompatibleXRDevice(a)};this.setFramebufferScaleFactor=\nfunction(a){k=a};this.setFrameOfReferenceType=function(a){q=a};this.setSession=function(b){h=b;null!==h&&(h.addEventListener(\"select\",c),h.addEventListener(\"selectstart\",c),h.addEventListener(\"selectend\",c),h.addEventListener(\"end\",d),h.baseLayer=new XRWebGLLayer(h,f,{framebufferScaleFactor:k}),h.requestFrameOfReference(q).then(function(b){m=b;a.setFramebuffer(h.baseLayer.framebuffer);u.setContext(h);u.start()}),l=h.getInputSources(),h.addEventListener(\"inputsourceschange\",function(){l=h.getInputSources();\nconsole.log(l);for(var a=0;a<r.length;a++)r[a].userData.inputSource=l[a]}))};this.getCamera=function(a){if(b()){var c=a.parent,d=n.cameras;e(n,c);for(var f=0;f<d.length;f++)e(d[f],c);a.matrixWorld.copy(n.matrixWorld);a=a.children;f=0;for(c=a.length;f<c;f++)a[f].updateMatrixWorld(!0);gf(n,t,v);return n}return a};this.isPresenting=b;var y=null,u=new Wd;u.setAnimationLoop(function(a,b){p=b.getDevicePose(m);if(null!==p)for(var c=h.baseLayer,d=b.views,e=0;e<d.length;e++){var f=d[e],g=c.getViewport(f),\nk=p.getViewMatrix(f),q=n.cameras[e];q.matrix.fromArray(k).getInverse(q.matrix);q.projectionMatrix.fromArray(f.projectionMatrix);q.viewport.set(g.x,g.y,g.width,g.height);0===e&&n.matrix.copy(q.matrix)}for(e=0;e<r.length;e++){c=r[e];if(d=l[e])if(d=b.getInputPose(d,m),null!==d){\"targetRay\"in d?c.matrix.elements=d.targetRay.transformMatrix:\"pointerMatrix\"in d&&(c.matrix.elements=d.pointerMatrix);c.matrix.decompose(c.position,c.rotation,c.scale);c.visible=!0;continue}c.visible=!1}y&&y(a)});this.setAnimationLoop=\nfunction(a){y=a};this.dispose=function(){};this.getStandingMatrix=function(){console.warn(\"THREE.WebXRManager: getStandingMatrix() is no longer needed.\");return new THREE.Matrix4};this.submitFrame=function(){}}function be(a){var b;function c(){la=new Wf(P);wa=new Uf(P,la,a);wa.isWebGL2||(la.get(\"WEBGL_depth_texture\"),la.get(\"OES_texture_float\"),la.get(\"OES_texture_half_float\"),la.get(\"OES_texture_half_float_linear\"),la.get(\"OES_standard_derivatives\"),la.get(\"OES_element_index_uint\"),la.get(\"ANGLE_instanced_arrays\"));\nla.get(\"OES_texture_float_linear\");ia=new ff(P,la,wa);aa=new Rg(P,la,ia,wa);aa.scissor(Cc.copy(ka).multiplyScalar(U));aa.viewport(S.copy(fa).multiplyScalar(U));da=new Zf(P);Ca=new Jg;ha=new Sg(P,la,aa,Ca,wa,ia,da);ra=new Nf(P);ta=new Xf(P,ra,da);oa=new bg(ta,da);xa=new ag(P);na=new Ig(Y,la,wa);ua=new Mg;pa=new Qg;ma=new Sf(Y,aa,oa,z);za=new Tf(P,la,da,wa);Aa=new Yf(P,la,da,wa);da.programs=na.programs;Y.context=P;Y.capabilities=wa;Y.extensions=la;Y.properties=Ca;Y.renderLists=ua;Y.state=aa;Y.info=\nda}function d(a){a.preventDefault();console.log(\"THREE.WebGLRenderer: Context Lost.\");J=!0}function e(){console.log(\"THREE.WebGLRenderer: Context Restored.\");J=!1;c()}function f(a){a=a.target;a.removeEventListener(\"dispose\",f);g(a);Ca.remove(a)}function g(a){var b=Ca.get(a).program;a.program=void 0;void 0!==b&&na.releaseProgram(b)}function h(a,b){a.render(function(a){Y.renderBufferImmediate(a,b)})}function k(a,b,c){if(!1!==a.visible){if(a.layers.test(b.layers))if(a.isLight)D.pushLight(a),a.castShadow&&\nD.pushShadow(a);else if(a.isSprite){if(!a.frustumCulled||qa.intersectsSprite(a)){c&&fb.setFromMatrixPosition(a.matrixWorld).applyMatrix4(Bc);var d=oa.update(a),e=a.material;C.push(a,d,e,fb.z,null)}}else if(a.isImmediateRenderObject)c&&fb.setFromMatrixPosition(a.matrixWorld).applyMatrix4(Bc),C.push(a,null,a.material,fb.z,null);else if(a.isMesh||a.isLine||a.isPoints)if(a.isSkinnedMesh&&a.skeleton.update(),!a.frustumCulled||qa.intersectsObject(a))if(c&&fb.setFromMatrixPosition(a.matrixWorld).applyMatrix4(Bc),\nd=oa.update(a),e=a.material,Array.isArray(e))for(var f=d.groups,g=0,h=f.length;g<h;g++){var m=f[g],p=e[m.materialIndex];p&&p.visible&&C.push(a,d,p,fb.z,m)}else e.visible&&C.push(a,d,e,fb.z,null);a=a.children;g=0;for(h=a.length;g<h;g++)k(a[g],b,c)}}function m(a,b,c,d){for(var e=0,f=a.length;e<f;e++){var g=a[e],h=g.object,k=g.geometry,m=void 0===d?g.material:d;g=g.group;if(c.isArrayCamera){X=c;for(var p=c.cameras,r=0,l=p.length;r<l;r++){var t=p[r];if(h.layers.test(t.layers)){if(\"viewport\"in t)aa.viewport(S.copy(t.viewport));\nelse{var x=t.bounds;aa.viewport(S.set(x.x*V,x.y*M,x.z*V,x.w*M).multiplyScalar(U))}D.setupLights(t);q(h,b,t,k,m,g)}}}else X=null,q(h,b,c,k,m,g)}}function q(a,c,d,e,f,g){a.onBeforeRender(Y,c,d,e,f,g);D=pa.get(c,X||d);a.modelViewMatrix.multiplyMatrices(d.matrixWorldInverse,a.matrixWorld);a.normalMatrix.getNormalMatrix(a.modelViewMatrix);if(a.isImmediateRenderObject){aa.setMaterial(f);var k=r(d,c.fog,f,a);I=b=null;ud=!1;h(a,k)}else Y.renderBufferDirect(d,c.fog,e,f,a,g);a.onAfterRender(Y,c,d,e,f,g);D=\npa.get(c,X||d)}function p(a,b,c){var d=Ca.get(a),e=D.state.lights,h=d.lightsHash,k=e.state.hash;c=na.getParameters(a,e.state,D.state.shadowsArray,b,Z.numPlanes,Z.numIntersection,c);var m=na.getProgramCode(a,c),p=d.program,q=!0;if(void 0===p)a.addEventListener(\"dispose\",f);else if(p.code!==m)g(a);else{if(h.stateID!==k.stateID||h.directionalLength!==k.directionalLength||h.pointLength!==k.pointLength||h.spotLength!==k.spotLength||h.rectAreaLength!==k.rectAreaLength||h.hemiLength!==k.hemiLength||h.shadowsLength!==\nk.shadowsLength)h.stateID=k.stateID,h.directionalLength=k.directionalLength,h.pointLength=k.pointLength,h.spotLength=k.spotLength,h.rectAreaLength=k.rectAreaLength,h.hemiLength=k.hemiLength,h.shadowsLength=k.shadowsLength;else if(void 0!==c.shaderID)return;q=!1}q&&(c.shaderID?(m=Qa[c.shaderID],d.shader={name:a.type,uniforms:Jb(m.uniforms),vertexShader:m.vertexShader,fragmentShader:m.fragmentShader}):d.shader={name:a.type,uniforms:a.uniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader},\na.onBeforeCompile(d.shader,Y),m=na.getProgramCode(a,c),p=na.acquireProgram(a,d.shader,c,m),d.program=p,a.program=p);c=p.getAttributes();if(a.morphTargets)for(m=a.numSupportedMorphTargets=0;m<Y.maxMorphTargets;m++)0<=c[\"morphTarget\"+m]&&a.numSupportedMorphTargets++;if(a.morphNormals)for(m=a.numSupportedMorphNormals=0;m<Y.maxMorphNormals;m++)0<=c[\"morphNormal\"+m]&&a.numSupportedMorphNormals++;c=d.shader.uniforms;if(!a.isShaderMaterial&&!a.isRawShaderMaterial||!0===a.clipping)d.numClippingPlanes=Z.numPlanes,\nd.numIntersection=Z.numIntersection,c.clippingPlanes=Z.uniform;d.fog=b;void 0===h&&(d.lightsHash=h={});h.stateID=k.stateID;h.directionalLength=k.directionalLength;h.pointLength=k.pointLength;h.spotLength=k.spotLength;h.rectAreaLength=k.rectAreaLength;h.hemiLength=k.hemiLength;h.shadowsLength=k.shadowsLength;a.lights&&(c.ambientLightColor.value=e.state.ambient,c.directionalLights.value=e.state.directional,c.spotLights.value=e.state.spot,c.rectAreaLights.value=e.state.rectArea,c.pointLights.value=e.state.point,\nc.hemisphereLights.value=e.state.hemi,c.directionalShadowMap.value=e.state.directionalShadowMap,c.directionalShadowMatrix.value=e.state.directionalShadowMatrix,c.spotShadowMap.value=e.state.spotShadowMap,c.spotShadowMatrix.value=e.state.spotShadowMatrix,c.pointShadowMap.value=e.state.pointShadowMap,c.pointShadowMatrix.value=e.state.pointShadowMatrix);a=d.program.getUniforms();a=cb.seqWithValue(a.seq,c);d.uniformsList=a}function r(a,b,c,d){ba=0;var e=Ca.get(c),f=e.lightsHash,g=D.state.lights.state.hash;\nwd&&(ae||a!==T)&&Z.setState(c.clippingPlanes,c.clipIntersection,c.clipShadows,a,e,a===T&&c.id===E);!1===c.needsUpdate&&(void 0===e.program?c.needsUpdate=!0:c.fog&&e.fog!==b?c.needsUpdate=!0:!c.lights||f.stateID===g.stateID&&f.directionalLength===g.directionalLength&&f.pointLength===g.pointLength&&f.spotLength===g.spotLength&&f.rectAreaLength===g.rectAreaLength&&f.hemiLength===g.hemiLength&&f.shadowsLength===g.shadowsLength?void 0===e.numClippingPlanes||e.numClippingPlanes===Z.numPlanes&&e.numIntersection===\nZ.numIntersection||(c.needsUpdate=!0):c.needsUpdate=!0);c.needsUpdate&&(p(c,b,d),c.needsUpdate=!1);var h=!1,k=!1,m=!1;f=e.program;g=f.getUniforms();var q=e.shader.uniforms;aa.useProgram(f.program)&&(m=k=h=!0);c.id!==E&&(E=c.id,k=!0);if(h||T!==a){g.setValue(P,\"projectionMatrix\",a.projectionMatrix);wa.logarithmicDepthBuffer&&g.setValue(P,\"logDepthBufFC\",2/(Math.log(a.far+1)/Math.LN2));T!==a&&(T=a,m=k=!0);if(c.isShaderMaterial||c.isMeshPhongMaterial||c.isMeshStandardMaterial||c.envMap)h=g.map.cameraPosition,\nvoid 0!==h&&h.setValue(P,fb.setFromMatrixPosition(a.matrixWorld));(c.isMeshPhongMaterial||c.isMeshLambertMaterial||c.isMeshBasicMaterial||c.isMeshStandardMaterial||c.isShaderMaterial||c.skinning)&&g.setValue(P,\"viewMatrix\",a.matrixWorldInverse)}if(c.skinning&&(g.setOptional(P,d,\"bindMatrix\"),g.setOptional(P,d,\"bindMatrixInverse\"),a=d.skeleton))if(h=a.bones,wa.floatVertexTextures){if(void 0===a.boneTexture){h=Math.sqrt(4*h.length);h=R.ceilPowerOfTwo(h);h=Math.max(h,4);var r=new Float32Array(h*h*4);\nr.set(a.boneMatrices);var x=new kb(r,h,h,1023,1015);x.needsUpdate=!0;a.boneMatrices=r;a.boneTexture=x;a.boneTextureSize=h}g.setValue(P,\"boneTexture\",a.boneTexture);g.setValue(P,\"boneTextureSize\",a.boneTextureSize)}else g.setOptional(P,a,\"boneMatrices\");k&&(g.setValue(P,\"toneMappingExposure\",Y.toneMappingExposure),g.setValue(P,\"toneMappingWhitePoint\",Y.toneMappingWhitePoint),c.lights&&(k=m,q.ambientLightColor.needsUpdate=k,q.directionalLights.needsUpdate=k,q.pointLights.needsUpdate=k,q.spotLights.needsUpdate=\nk,q.rectAreaLights.needsUpdate=k,q.hemisphereLights.needsUpdate=k),b&&c.fog&&(q.fogColor.value=b.color,b.isFog?(q.fogNear.value=b.near,q.fogFar.value=b.far):b.isFogExp2&&(q.fogDensity.value=b.density)),c.isMeshBasicMaterial?l(q,c):c.isMeshLambertMaterial?(l(q,c),c.emissiveMap&&(q.emissiveMap.value=c.emissiveMap)):c.isMeshPhongMaterial?(l(q,c),c.isMeshToonMaterial?(t(q,c),c.gradientMap&&(q.gradientMap.value=c.gradientMap)):t(q,c)):c.isMeshStandardMaterial?(l(q,c),c.isMeshPhysicalMaterial?(v(q,c),q.reflectivity.value=\nc.reflectivity,q.clearCoat.value=c.clearCoat,q.clearCoatRoughness.value=c.clearCoatRoughness):v(q,c)):c.isMeshMatcapMaterial?(l(q,c),c.matcap&&(q.matcap.value=c.matcap),c.bumpMap&&(q.bumpMap.value=c.bumpMap,q.bumpScale.value=c.bumpScale,1===c.side&&(q.bumpScale.value*=-1)),c.normalMap&&(q.normalMap.value=c.normalMap,q.normalScale.value.copy(c.normalScale),1===c.side&&q.normalScale.value.negate()),c.displacementMap&&(q.displacementMap.value=c.displacementMap,q.displacementScale.value=c.displacementScale,\nq.displacementBias.value=c.displacementBias)):c.isMeshDepthMaterial?(l(q,c),c.displacementMap&&(q.displacementMap.value=c.displacementMap,q.displacementScale.value=c.displacementScale,q.displacementBias.value=c.displacementBias)):c.isMeshDistanceMaterial?(l(q,c),c.displacementMap&&(q.displacementMap.value=c.displacementMap,q.displacementScale.value=c.displacementScale,q.displacementBias.value=c.displacementBias),q.referencePosition.value.copy(c.referencePosition),q.nearDistance.value=c.nearDistance,\nq.farDistance.value=c.farDistance):c.isMeshNormalMaterial?(l(q,c),c.bumpMap&&(q.bumpMap.value=c.bumpMap,q.bumpScale.value=c.bumpScale,1===c.side&&(q.bumpScale.value*=-1)),c.normalMap&&(q.normalMap.value=c.normalMap,q.normalScale.value.copy(c.normalScale),1===c.side&&q.normalScale.value.negate()),c.displacementMap&&(q.displacementMap.value=c.displacementMap,q.displacementScale.value=c.displacementScale,q.displacementBias.value=c.displacementBias)):c.isLineBasicMaterial?(q.diffuse.value=c.color,q.opacity.value=\nc.opacity,c.isLineDashedMaterial&&(q.dashSize.value=c.dashSize,q.totalSize.value=c.dashSize+c.gapSize,q.scale.value=c.scale)):c.isPointsMaterial?(q.diffuse.value=c.color,q.opacity.value=c.opacity,q.size.value=c.size*U,q.scale.value=.5*M,q.map.value=c.map,null!==c.map&&(!0===c.map.matrixAutoUpdate&&c.map.updateMatrix(),q.uvTransform.value.copy(c.map.matrix))):c.isSpriteMaterial?(q.diffuse.value=c.color,q.opacity.value=c.opacity,q.rotation.value=c.rotation,q.map.value=c.map,null!==c.map&&(!0===c.map.matrixAutoUpdate&&\nc.map.updateMatrix(),q.uvTransform.value.copy(c.map.matrix))):c.isShadowMaterial&&(q.color.value=c.color,q.opacity.value=c.opacity),void 0!==q.ltc_1&&(q.ltc_1.value=F.LTC_1),void 0!==q.ltc_2&&(q.ltc_2.value=F.LTC_2),cb.upload(P,e.uniformsList,q,Y));c.isShaderMaterial&&!0===c.uniformsNeedUpdate&&(cb.upload(P,e.uniformsList,q,Y),c.uniformsNeedUpdate=!1);c.isSpriteMaterial&&g.setValue(P,\"center\",d.center);g.setValue(P,\"modelViewMatrix\",d.modelViewMatrix);g.setValue(P,\"normalMatrix\",d.normalMatrix);g.setValue(P,\n\"modelMatrix\",d.matrixWorld);return f}function l(a,b){a.opacity.value=b.opacity;b.color&&(a.diffuse.value=b.color);b.emissive&&a.emissive.value.copy(b.emissive).multiplyScalar(b.emissiveIntensity);b.map&&(a.map.value=b.map);b.alphaMap&&(a.alphaMap.value=b.alphaMap);b.specularMap&&(a.specularMap.value=b.specularMap);b.envMap&&(a.envMap.value=b.envMap,a.flipEnvMap.value=b.envMap.isCubeTexture?-1:1,a.reflectivity.value=b.reflectivity,a.refractionRatio.value=b.refractionRatio,a.maxMipLevel.value=Ca.get(b.envMap).__maxMipLevel);\nb.lightMap&&(a.lightMap.value=b.lightMap,a.lightMapIntensity.value=b.lightMapIntensity);b.aoMap&&(a.aoMap.value=b.aoMap,a.aoMapIntensity.value=b.aoMapIntensity);if(b.map)var c=b.map;else b.specularMap?c=b.specularMap:b.displacementMap?c=b.displacementMap:b.normalMap?c=b.normalMap:b.bumpMap?c=b.bumpMap:b.roughnessMap?c=b.roughnessMap:b.metalnessMap?c=b.metalnessMap:b.alphaMap?c=b.alphaMap:b.emissiveMap&&(c=b.emissiveMap);void 0!==c&&(c.isWebGLRenderTarget&&(c=c.texture),!0===c.matrixAutoUpdate&&c.updateMatrix(),\na.uvTransform.value.copy(c.matrix))}function t(a,b){a.specular.value=b.specular;a.shininess.value=Math.max(b.shininess,1E-4);b.emissiveMap&&(a.emissiveMap.value=b.emissiveMap);b.bumpMap&&(a.bumpMap.value=b.bumpMap,a.bumpScale.value=b.bumpScale,1===b.side&&(a.bumpScale.value*=-1));b.normalMap&&(a.normalMap.value=b.normalMap,a.normalScale.value.copy(b.normalScale),1===b.side&&a.normalScale.value.negate());b.displacementMap&&(a.displacementMap.value=b.displacementMap,a.displacementScale.value=b.displacementScale,\na.displacementBias.value=b.displacementBias)}function v(a,b){a.roughness.value=b.roughness;a.metalness.value=b.metalness;b.roughnessMap&&(a.roughnessMap.value=b.roughnessMap);b.metalnessMap&&(a.metalnessMap.value=b.metalnessMap);b.emissiveMap&&(a.emissiveMap.value=b.emissiveMap);b.bumpMap&&(a.bumpMap.value=b.bumpMap,a.bumpScale.value=b.bumpScale,1===b.side&&(a.bumpScale.value*=-1));b.normalMap&&(a.normalMap.value=b.normalMap,a.normalScale.value.copy(b.normalScale),1===b.side&&a.normalScale.value.negate());\nb.displacementMap&&(a.displacementMap.value=b.displacementMap,a.displacementScale.value=b.displacementScale,a.displacementBias.value=b.displacementBias);b.envMap&&(a.envMapIntensity.value=b.envMapIntensity)}console.log(\"THREE.WebGLRenderer\",\"99\");a=a||{};var w=void 0!==a.canvas?a.canvas:document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\"),y=void 0!==a.context?a.context:null,u=void 0!==a.alpha?a.alpha:!1,H=void 0!==a.depth?a.depth:!0,G=void 0!==a.stencil?a.stencil:!0,N=void 0!==a.antialias?\na.antialias:!1,z=void 0!==a.premultipliedAlpha?a.premultipliedAlpha:!0,A=void 0!==a.preserveDrawingBuffer?a.preserveDrawingBuffer:!1,B=void 0!==a.powerPreference?a.powerPreference:\"default\",C=null,D=null;this.domElement=w;this.context=null;this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0;this.clippingPlanes=[];this.localClippingEnabled=!1;this.gammaFactor=2;this.physicallyCorrectLights=this.gammaOutput=this.gammaInput=!1;this.toneMappingWhitePoint=this.toneMappingExposure=\nthis.toneMapping=1;this.maxMorphTargets=8;this.maxMorphNormals=4;var Y=this,J=!1,K=null,Q=null,L=null,E=-1;var I=b=null;var ud=!1;var T=null,X=null,S=new ca,Cc=new ca,ea=null,ba=0,V=w.width,M=w.height,U=1,fa=new ca(0,0,V,M),ka=new ca(0,0,V,M),sa=!1,qa=new td,Z=new Vf,wd=!1,ae=!1,Bc=new O,fb=new n;try{u={alpha:u,depth:H,stencil:G,antialias:N,premultipliedAlpha:z,preserveDrawingBuffer:A,powerPreference:B};w.addEventListener(\"webglcontextlost\",d,!1);w.addEventListener(\"webglcontextrestored\",e,!1);var P=\ny||w.getContext(\"webgl\",u)||w.getContext(\"experimental-webgl\",u);if(null===P){if(null!==w.getContext(\"webgl\"))throw Error(\"Error creating WebGL context with your selected attributes.\");throw Error(\"Error creating WebGL context.\");}void 0===P.getShaderPrecisionFormat&&(P.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ug){console.error(\"THREE.WebGLRenderer: \"+Ug.message)}var la,wa,aa,da,Ca,ha,ra,ta,oa,na,ua,pa,ma,xa,za,Aa,ia;c();var ja=null;\"undefined\"!==typeof navigator&&\n(ja=\"xr\"in navigator?new Tg(Y):new kf(Y));this.vr=ja;var Ba=new ef(Y,oa,wa.maxTextureSize);this.shadowMap=Ba;this.getContext=function(){return P};this.getContextAttributes=function(){return P.getContextAttributes()};this.forceContextLoss=function(){var a=la.get(\"WEBGL_lose_context\");a&&a.loseContext()};this.forceContextRestore=function(){var a=la.get(\"WEBGL_lose_context\");a&&a.restoreContext()};this.getPixelRatio=function(){return U};this.setPixelRatio=function(a){void 0!==a&&(U=a,this.setSize(V,\nM,!1))};this.getSize=function(){return{width:V,height:M}};this.setSize=function(a,b,c){ja.isPresenting()?console.warn(\"THREE.WebGLRenderer: Can't change size while VR device is presenting.\"):(V=a,M=b,w.width=a*U,w.height=b*U,!1!==c&&(w.style.width=a+\"px\",w.style.height=b+\"px\"),this.setViewport(0,0,a,b))};this.getDrawingBufferSize=function(){return{width:V*U,height:M*U}};this.setDrawingBufferSize=function(a,b,c){V=a;M=b;U=c;w.width=a*c;w.height=b*c;this.setViewport(0,0,a,b)};this.getCurrentViewport=\nfunction(){return S};this.setViewport=function(a,b,c,d){fa.set(a,M-b-d,c,d);aa.viewport(S.copy(fa).multiplyScalar(U))};this.setScissor=function(a,b,c,d){ka.set(a,M-b-d,c,d);aa.scissor(Cc.copy(ka).multiplyScalar(U))};this.setScissorTest=function(a){aa.setScissorTest(sa=a)};this.getClearColor=function(){return ma.getClearColor()};this.setClearColor=function(){ma.setClearColor.apply(ma,arguments)};this.getClearAlpha=function(){return ma.getClearAlpha()};this.setClearAlpha=function(){ma.setClearAlpha.apply(ma,\narguments)};this.clear=function(a,b,c){var d=0;if(void 0===a||a)d|=16384;if(void 0===b||b)d|=256;if(void 0===c||c)d|=1024;P.clear(d)};this.clearColor=function(){this.clear(!0,!1,!1)};this.clearDepth=function(){this.clear(!1,!0,!1)};this.clearStencil=function(){this.clear(!1,!1,!0)};this.dispose=function(){w.removeEventListener(\"webglcontextlost\",d,!1);w.removeEventListener(\"webglcontextrestored\",e,!1);ua.dispose();pa.dispose();Ca.dispose();oa.dispose();ja.dispose();va.stop()};this.renderBufferImmediate=\nfunction(a,b){aa.initAttributes();var c=Ca.get(a);a.hasPositions&&!c.position&&(c.position=P.createBuffer());a.hasNormals&&!c.normal&&(c.normal=P.createBuffer());a.hasUvs&&!c.uv&&(c.uv=P.createBuffer());a.hasColors&&!c.color&&(c.color=P.createBuffer());b=b.getAttributes();a.hasPositions&&(P.bindBuffer(34962,c.position),P.bufferData(34962,a.positionArray,35048),aa.enableAttribute(b.position),P.vertexAttribPointer(b.position,3,5126,!1,0,0));a.hasNormals&&(P.bindBuffer(34962,c.normal),P.bufferData(34962,\na.normalArray,35048),aa.enableAttribute(b.normal),P.vertexAttribPointer(b.normal,3,5126,!1,0,0));a.hasUvs&&(P.bindBuffer(34962,c.uv),P.bufferData(34962,a.uvArray,35048),aa.enableAttribute(b.uv),P.vertexAttribPointer(b.uv,2,5126,!1,0,0));a.hasColors&&(P.bindBuffer(34962,c.color),P.bufferData(34962,a.colorArray,35048),aa.enableAttribute(b.color),P.vertexAttribPointer(b.color,3,5126,!1,0,0));aa.disableUnusedAttributes();P.drawArrays(4,0,a.count);a.count=0};this.renderBufferDirect=function(a,c,d,e,f,\ng){var h=f.isMesh&&0>f.normalMatrix.determinant();aa.setMaterial(e,h);var k=r(a,c,e,f),m=!1;if(b!==d.id||I!==k.id||ud!==(!0===e.wireframe))b=d.id,I=k.id,ud=!0===e.wireframe,m=!0;f.morphTargetInfluences&&(xa.update(f,d,e,k),m=!0);h=d.index;var q=d.attributes.position;c=1;!0===e.wireframe&&(h=ta.getWireframeAttribute(d),c=2);a=za;if(null!==h){var p=ra.get(h);a=Aa;a.setIndex(p)}if(m){if(d&&d.isInstancedBufferGeometry&!wa.isWebGL2&&null===la.get(\"ANGLE_instanced_arrays\"))console.error(\"THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.\");\nelse{aa.initAttributes();m=d.attributes;k=k.getAttributes();var l=e.defaultAttributeValues;for(A in k){var t=k[A];if(0<=t){var x=m[A];if(void 0!==x){var v=x.normalized,n=x.itemSize,u=ra.get(x);if(void 0!==u){var w=u.buffer,y=u.type;u=u.bytesPerElement;if(x.isInterleavedBufferAttribute){var G=x.data,H=G.stride;x=x.offset;G&&G.isInstancedInterleavedBuffer?(aa.enableAttributeAndDivisor(t,G.meshPerAttribute),void 0===d.maxInstancedCount&&(d.maxInstancedCount=G.meshPerAttribute*G.count)):aa.enableAttribute(t);\nP.bindBuffer(34962,w);P.vertexAttribPointer(t,n,y,v,H*u,x*u)}else x.isInstancedBufferAttribute?(aa.enableAttributeAndDivisor(t,x.meshPerAttribute),void 0===d.maxInstancedCount&&(d.maxInstancedCount=x.meshPerAttribute*x.count)):aa.enableAttribute(t),P.bindBuffer(34962,w),P.vertexAttribPointer(t,n,y,v,0,0)}}else if(void 0!==l&&(v=l[A],void 0!==v))switch(v.length){case 2:P.vertexAttrib2fv(t,v);break;case 3:P.vertexAttrib3fv(t,v);break;case 4:P.vertexAttrib4fv(t,v);break;default:P.vertexAttrib1fv(t,v)}}}aa.disableUnusedAttributes()}null!==\nh&&P.bindBuffer(34963,p.buffer)}p=Infinity;null!==h?p=h.count:void 0!==q&&(p=q.count);h=d.drawRange.start*c;q=null!==g?g.start*c:0;var A=Math.max(h,q);g=Math.max(0,Math.min(p,h+d.drawRange.count*c,q+(null!==g?g.count*c:Infinity))-1-A+1);if(0!==g){if(f.isMesh)if(!0===e.wireframe)aa.setLineWidth(e.wireframeLinewidth*(null===Q?U:1)),a.setMode(1);else switch(f.drawMode){case 0:a.setMode(4);break;case 1:a.setMode(5);break;case 2:a.setMode(6)}else f.isLine?(e=e.linewidth,void 0===e&&(e=1),aa.setLineWidth(e*\n(null===Q?U:1)),f.isLineSegments?a.setMode(1):f.isLineLoop?a.setMode(2):a.setMode(3)):f.isPoints?a.setMode(0):f.isSprite&&a.setMode(4);d&&d.isInstancedBufferGeometry?0<d.maxInstancedCount&&a.renderInstances(d,A,g):a.render(A,g)}};this.compile=function(a,b){D=pa.get(a,b);D.init();a.traverse(function(a){a.isLight&&(D.pushLight(a),a.castShadow&&D.pushShadow(a))});D.setupLights(b);a.traverse(function(b){if(b.material)if(Array.isArray(b.material))for(var c=0;c<b.material.length;c++)p(b.material[c],a.fog,\nb);else p(b.material,a.fog,b)})};var ya=null,va=new Wd;va.setAnimationLoop(function(a){ja.isPresenting()||ya&&ya(a)});\"undefined\"!==typeof window&&va.setContext(window);this.setAnimationLoop=function(a){ya=a;ja.setAnimationLoop(a);va.start()};this.render=function(a,c,d,e){if(!c||!c.isCamera)console.error(\"THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.\");else if(!J){I=b=null;ud=!1;E=-1;T=null;!0===a.autoUpdate&&a.updateMatrixWorld();null===c.parent&&c.updateMatrixWorld();ja.enabled&&\n(c=ja.getCamera(c));D=pa.get(a,c);D.init();a.onBeforeRender(Y,a,c,d);Bc.multiplyMatrices(c.projectionMatrix,c.matrixWorldInverse);qa.setFromMatrix(Bc);ae=this.localClippingEnabled;wd=Z.init(this.clippingPlanes,ae,c);C=ua.get(a,c);C.init();k(a,c,Y.sortObjects);!0===Y.sortObjects&&C.sort();wd&&Z.beginShadows();Ba.render(D.state.shadowsArray,a,c);D.setupLights(c);wd&&Z.endShadows();this.info.autoReset&&this.info.reset();void 0===d&&(d=null);this.setRenderTarget(d);ma.render(C,a,c,e);e=C.opaque;var f=\nC.transparent;if(a.overrideMaterial){var g=a.overrideMaterial;e.length&&m(e,a,c,g);f.length&&m(f,a,c,g)}else e.length&&m(e,a,c),f.length&&m(f,a,c);d&&ha.updateRenderTargetMipmap(d);aa.buffers.depth.setTest(!0);aa.buffers.depth.setMask(!0);aa.buffers.color.setMask(!0);aa.setPolygonOffset(!1);a.onAfterRender(Y,a,c);ja.enabled&&ja.submitFrame();D=C=null}};this.allocTextureUnit=function(){var a=ba;a>=wa.maxTextures&&console.warn(\"THREE.WebGLRenderer: Trying to use \"+a+\" texture units while this GPU supports only \"+\nwa.maxTextures);ba+=1;return a};this.setTexture2D=function(){var a=!1;return function(b,c){b&&b.isWebGLRenderTarget&&(a||(console.warn(\"THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead.\"),a=!0),b=b.texture);ha.setTexture2D(b,c)}}();this.setTexture3D=function(){return function(a,b){ha.setTexture3D(a,b)}}();this.setTexture=function(){var a=!1;return function(b,c){a||(console.warn(\"THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead.\"),\na=!0);ha.setTexture2D(b,c)}}();this.setTextureCube=function(){var a=!1;return function(b,c){b&&b.isWebGLRenderTargetCube&&(a||(console.warn(\"THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead.\"),a=!0),b=b.texture);b&&b.isCubeTexture||Array.isArray(b.image)&&6===b.image.length?ha.setTextureCube(b,c):ha.setTextureCubeDynamic(b,c)}}();this.setFramebuffer=function(a){K=a};this.getRenderTarget=function(){return Q};this.setRenderTarget=function(a){(Q=\na)&&void 0===Ca.get(a).__webglFramebuffer&&ha.setupRenderTarget(a);var b=K,c=!1;a?(b=Ca.get(a).__webglFramebuffer,a.isWebGLRenderTargetCube&&(b=b[a.activeCubeFace],c=!0),S.copy(a.viewport),Cc.copy(a.scissor),ea=a.scissorTest):(S.copy(fa).multiplyScalar(U),Cc.copy(ka).multiplyScalar(U),ea=sa);L!==b&&(P.bindFramebuffer(36160,b),L=b);aa.viewport(S);aa.scissor(Cc);aa.setScissorTest(ea);c&&(c=Ca.get(a.texture),P.framebufferTexture2D(36160,36064,34069+a.activeCubeFace,c.__webglTexture,a.activeMipMapLevel))};\nthis.readRenderTargetPixels=function(a,b,c,d,e,f){if(a&&a.isWebGLRenderTarget){var g=Ca.get(a).__webglFramebuffer;if(g){var h=!1;g!==L&&(P.bindFramebuffer(36160,g),h=!0);try{var k=a.texture,m=k.format,q=k.type;1023!==m&&ia.convert(m)!==P.getParameter(35739)?console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.\"):1009===q||ia.convert(q)===P.getParameter(35738)||1015===q&&(wa.isWebGL2||la.get(\"OES_texture_float\")||la.get(\"WEBGL_color_buffer_float\"))||\n1016===q&&(wa.isWebGL2?la.get(\"EXT_color_buffer_float\"):la.get(\"EXT_color_buffer_half_float\"))?36053===P.checkFramebufferStatus(36160)?0<=b&&b<=a.width-d&&0<=c&&c<=a.height-e&&P.readPixels(b,c,d,e,ia.convert(m),ia.convert(q),f):console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.\"):console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.\")}finally{h&&P.bindFramebuffer(36160,\nL)}}}else console.error(\"THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.\")};this.copyFramebufferToTexture=function(a,b,c){var d=b.image.width,e=b.image.height,f=ia.convert(b.format);this.setTexture2D(b,0);P.copyTexImage2D(3553,c||0,f,a.x,a.y,d,e,0)};this.copyTextureToTexture=function(a,b,c,d){var e=b.image.width,f=b.image.height,g=ia.convert(c.format),h=ia.convert(c.type);this.setTexture2D(c,0);b.isDataTexture?P.texSubImage2D(3553,d||0,a.x,a.y,e,f,g,h,b.image.data):\nP.texSubImage2D(3553,d||0,a.x,a.y,g,h,b.image)}}function Qb(a,b){this.name=\"\";this.color=new J(a);this.density=void 0!==b?b:2.5E-4}function Rb(a,b,c){this.name=\"\";this.color=new J(a);this.near=void 0!==b?b:1;this.far=void 0!==c?c:1E3}function xd(){C.call(this);this.type=\"Scene\";this.overrideMaterial=this.fog=this.background=null;this.autoUpdate=!0}function rb(a,b){this.array=a;this.stride=b;this.count=void 0!==a?a.length/b:0;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.version=0}function Ec(a,\nb,c,d){this.data=a;this.itemSize=b;this.offset=c;this.normalized=!0===d}function gb(a){L.call(this);this.type=\"SpriteMaterial\";this.color=new J(16777215);this.map=null;this.rotation=0;this.sizeAttenuation=!0;this.lights=!1;this.transparent=!0;this.setValues(a)}function Fc(a){C.call(this);this.type=\"Sprite\";if(void 0===Sb){Sb=new D;var b=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]);b=new rb(b,5);Sb.setIndex([0,1,2,0,2,3]);Sb.addAttribute(\"position\",new Ec(b,3,0,!1));Sb.addAttribute(\"uv\",\nnew Ec(b,2,3,!1))}this.geometry=Sb;this.material=void 0!==a?a:new gb;this.center=new z(.5,.5)}function Gc(){C.call(this);this.type=\"LOD\";Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function Hc(a,b){a&&a.isGeometry&&console.error(\"THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.\");pa.call(this,a,b);this.type=\"SkinnedMesh\";this.bindMode=\"attached\";this.bindMatrix=new O;this.bindMatrixInverse=new O}function yd(a,b){a=a||[];this.bones=a.slice(0);\nthis.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===b)this.calculateInverses();else if(this.bones.length===b.length)this.boneInverses=b.slice(0);else for(console.warn(\"THREE.Skeleton boneInverses is the wrong length.\"),this.boneInverses=[],a=0,b=this.bones.length;a<b;a++)this.boneInverses.push(new O)}function ce(){C.call(this);this.type=\"Bone\"}function T(a){L.call(this);this.type=\"LineBasicMaterial\";this.color=new J(16777215);this.linewidth=1;this.linejoin=this.linecap=\"round\";this.lights=\n!1;this.setValues(a)}function ma(a,b,c){1===c&&console.error(\"THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead.\");C.call(this);this.type=\"Line\";this.geometry=void 0!==a?a:new D;this.material=void 0!==b?b:new T({color:16777215*Math.random()})}function S(a,b){ma.call(this,a,b);this.type=\"LineSegments\"}function zd(a,b){ma.call(this,a,b);this.type=\"LineLoop\"}function Fa(a){L.call(this);this.type=\"PointsMaterial\";this.color=new J(16777215);this.map=null;this.size=\n1;this.sizeAttenuation=!0;this.lights=this.morphTargets=!1;this.setValues(a)}function Tb(a,b){C.call(this);this.type=\"Points\";this.geometry=void 0!==a?a:new D;this.material=void 0!==b?b:new Fa({color:16777215*Math.random()})}function de(a,b,c,d,e,f,g,h,k){X.call(this,a,b,c,d,e,f,g,h,k);this.format=void 0!==g?g:1022;this.minFilter=void 0!==f?f:1006;this.magFilter=void 0!==e?e:1006;this.generateMipmaps=!1}function Ub(a,b,c,d,e,f,g,h,k,m,q,p){X.call(this,null,f,g,h,k,m,d,e,q,p);this.image={width:b,height:c};\nthis.mipmaps=a;this.generateMipmaps=this.flipY=!1}function Ic(a,b,c,d,e,f,g,h,k){X.call(this,a,b,c,d,e,f,g,h,k);this.needsUpdate=!0}function Jc(a,b,c,d,e,f,g,h,k,m){m=void 0!==m?m:1026;if(1026!==m&&1027!==m)throw Error(\"DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat\");void 0===c&&1026===m&&(c=1012);void 0===c&&1027===m&&(c=1020);X.call(this,null,d,e,f,g,h,m,c,k);this.image={width:a,height:b};this.magFilter=void 0!==g?g:1003;this.minFilter=void 0!==h?h:1003;this.generateMipmaps=\nthis.flipY=!1}function Vb(a){D.call(this);this.type=\"WireframeGeometry\";var b=[],c,d,e,f=[0,0],g={},h=[\"a\",\"b\",\"c\"];if(a&&a.isGeometry){var k=a.faces;var m=0;for(d=k.length;m<d;m++){var q=k[m];for(c=0;3>c;c++){var p=q[h[c]];var r=q[h[(c+1)%3]];f[0]=Math.min(p,r);f[1]=Math.max(p,r);p=f[0]+\",\"+f[1];void 0===g[p]&&(g[p]={index1:f[0],index2:f[1]})}}for(p in g)m=g[p],h=a.vertices[m.index1],b.push(h.x,h.y,h.z),h=a.vertices[m.index2],b.push(h.x,h.y,h.z)}else if(a&&a.isBufferGeometry)if(h=new n,null!==a.index){k=\na.attributes.position;q=a.index;var l=a.groups;0===l.length&&(l=[{start:0,count:q.count,materialIndex:0}]);a=0;for(e=l.length;a<e;++a)for(m=l[a],c=m.start,d=m.count,m=c,d=c+d;m<d;m+=3)for(c=0;3>c;c++)p=q.getX(m+c),r=q.getX(m+(c+1)%3),f[0]=Math.min(p,r),f[1]=Math.max(p,r),p=f[0]+\",\"+f[1],void 0===g[p]&&(g[p]={index1:f[0],index2:f[1]});for(p in g)m=g[p],h.fromBufferAttribute(k,m.index1),b.push(h.x,h.y,h.z),h.fromBufferAttribute(k,m.index2),b.push(h.x,h.y,h.z)}else for(k=a.attributes.position,m=0,d=\nk.count/3;m<d;m++)for(c=0;3>c;c++)g=3*m+c,h.fromBufferAttribute(k,g),b.push(h.x,h.y,h.z),g=3*m+(c+1)%3,h.fromBufferAttribute(k,g),b.push(h.x,h.y,h.z);this.addAttribute(\"position\",new B(b,3))}function Kc(a,b,c){Q.call(this);this.type=\"ParametricGeometry\";this.parameters={func:a,slices:b,stacks:c};this.fromBufferGeometry(new Wb(a,b,c));this.mergeVertices()}function Wb(a,b,c){D.call(this);this.type=\"ParametricBufferGeometry\";this.parameters={func:a,slices:b,stacks:c};var d=[],e=[],f=[],g=[],h=new n,\nk=new n,m=new n,q=new n,p=new n,r,l;3>a.length&&console.error(\"THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.\");var t=b+1;for(r=0;r<=c;r++){var v=r/c;for(l=0;l<=b;l++){var w=l/b;a(w,v,k);e.push(k.x,k.y,k.z);0<=w-1E-5?(a(w-1E-5,v,m),q.subVectors(k,m)):(a(w+1E-5,v,m),q.subVectors(m,k));0<=v-1E-5?(a(w,v-1E-5,m),p.subVectors(k,m)):(a(w,v+1E-5,m),p.subVectors(m,k));h.crossVectors(q,p).normalize();f.push(h.x,h.y,h.z);g.push(w,v)}}for(r=0;r<c;r++)for(l=0;l<b;l++)a=r*t+l+\n1,h=(r+1)*t+l+1,k=(r+1)*t+l,d.push(r*t+l,a,k),d.push(a,h,k);this.setIndex(d);this.addAttribute(\"position\",new B(e,3));this.addAttribute(\"normal\",new B(f,3));this.addAttribute(\"uv\",new B(g,2))}function Lc(a,b,c,d){Q.call(this);this.type=\"PolyhedronGeometry\";this.parameters={vertices:a,indices:b,radius:c,detail:d};this.fromBufferGeometry(new xa(a,b,c,d));this.mergeVertices()}function xa(a,b,c,d){function e(a){h.push(a.x,a.y,a.z)}function f(b,c){b*=3;c.x=a[b+0];c.y=a[b+1];c.z=a[b+2]}function g(a,b,c,\nd){0>d&&1===a.x&&(k[b]=a.x-1);0===c.x&&0===c.z&&(k[b]=d/2/Math.PI+.5)}D.call(this);this.type=\"PolyhedronBufferGeometry\";this.parameters={vertices:a,indices:b,radius:c,detail:d};c=c||1;d=d||0;var h=[],k=[];(function(a){for(var c=new n,d=new n,g=new n,h=0;h<b.length;h+=3){f(b[h+0],c);f(b[h+1],d);f(b[h+2],g);var k,m,l=c,y=d,u=g,H=Math.pow(2,a),G=[];for(m=0;m<=H;m++){G[m]=[];var N=l.clone().lerp(u,m/H),z=y.clone().lerp(u,m/H),A=H-m;for(k=0;k<=A;k++)G[m][k]=0===k&&m===H?N:N.clone().lerp(z,k/A)}for(m=0;m<\nH;m++)for(k=0;k<2*(H-m)-1;k++)l=Math.floor(k/2),0===k%2?(e(G[m][l+1]),e(G[m+1][l]),e(G[m][l])):(e(G[m][l+1]),e(G[m+1][l+1]),e(G[m+1][l]))}})(d);(function(a){for(var b=new n,c=0;c<h.length;c+=3)b.x=h[c+0],b.y=h[c+1],b.z=h[c+2],b.normalize().multiplyScalar(a),h[c+0]=b.x,h[c+1]=b.y,h[c+2]=b.z})(c);(function(){for(var a=new n,b=0;b<h.length;b+=3)a.x=h[b+0],a.y=h[b+1],a.z=h[b+2],k.push(Math.atan2(a.z,-a.x)/2/Math.PI+.5,1-(Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5));a=new n;b=new n;for(var c=\nnew n,d=new n,e=new z,f=new z,l=new z,w=0,y=0;w<h.length;w+=9,y+=6){a.set(h[w+0],h[w+1],h[w+2]);b.set(h[w+3],h[w+4],h[w+5]);c.set(h[w+6],h[w+7],h[w+8]);e.set(k[y+0],k[y+1]);f.set(k[y+2],k[y+3]);l.set(k[y+4],k[y+5]);d.copy(a).add(b).add(c).divideScalar(3);var u=Math.atan2(d.z,-d.x);g(e,y+0,a,u);g(f,y+2,b,u);g(l,y+4,c,u)}for(a=0;a<k.length;a+=6)b=k[a+0],c=k[a+2],d=k[a+4],e=Math.min(b,c,d),.9<Math.max(b,c,d)&&.1>e&&(.2>b&&(k[a+0]+=1),.2>c&&(k[a+2]+=1),.2>d&&(k[a+4]+=1))})();this.addAttribute(\"position\",\nnew B(h,3));this.addAttribute(\"normal\",new B(h.slice(),3));this.addAttribute(\"uv\",new B(k,2));0===d?this.computeVertexNormals():this.normalizeNormals()}function Mc(a,b){Q.call(this);this.type=\"TetrahedronGeometry\";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new Xb(a,b));this.mergeVertices()}function Xb(a,b){xa.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],a,b);this.type=\"TetrahedronBufferGeometry\";this.parameters={radius:a,detail:b}}function Nc(a,b){Q.call(this);\nthis.type=\"OctahedronGeometry\";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new sb(a,b));this.mergeVertices()}function sb(a,b){xa.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],a,b);this.type=\"OctahedronBufferGeometry\";this.parameters={radius:a,detail:b}}function Oc(a,b){Q.call(this);this.type=\"IcosahedronGeometry\";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new Yb(a,b));this.mergeVertices()}function Yb(a,b){var c=\n(1+Math.sqrt(5))/2;xa.call(this,[-1,c,0,1,c,0,-1,-c,0,1,-c,0,0,-1,c,0,1,c,0,-1,-c,0,1,-c,c,0,-1,c,0,1,-c,0,-1,-c,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a,b);this.type=\"IcosahedronBufferGeometry\";this.parameters={radius:a,detail:b}}function Pc(a,b){Q.call(this);this.type=\"DodecahedronGeometry\";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new Zb(a,b));this.mergeVertices()}function Zb(a,b){var c=\n(1+Math.sqrt(5))/2,d=1/c;xa.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-d,-c,0,-d,c,0,d,-c,0,d,c,-d,-c,0,-d,c,0,d,-c,0,d,c,0,-c,0,-d,c,0,-d,-c,0,d,c,0,d],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],a,b);this.type=\"DodecahedronBufferGeometry\";this.parameters=\n{radius:a,detail:b}}function Qc(a,b,c,d,e,f){Q.call(this);this.type=\"TubeGeometry\";this.parameters={path:a,tubularSegments:b,radius:c,radialSegments:d,closed:e};void 0!==f&&console.warn(\"THREE.TubeGeometry: taper has been removed.\");a=new $b(a,b,c,d,e);this.tangents=a.tangents;this.normals=a.normals;this.binormals=a.binormals;this.fromBufferGeometry(a);this.mergeVertices()}function $b(a,b,c,d,e){function f(e){q=a.getPointAt(e/b,q);var f=g.normals[e];e=g.binormals[e];for(r=0;r<=d;r++){var m=r/d*Math.PI*\n2,p=Math.sin(m);m=-Math.cos(m);k.x=m*f.x+p*e.x;k.y=m*f.y+p*e.y;k.z=m*f.z+p*e.z;k.normalize();t.push(k.x,k.y,k.z);h.x=q.x+c*k.x;h.y=q.y+c*k.y;h.z=q.z+c*k.z;l.push(h.x,h.y,h.z)}}D.call(this);this.type=\"TubeBufferGeometry\";this.parameters={path:a,tubularSegments:b,radius:c,radialSegments:d,closed:e};b=b||64;c=c||1;d=d||8;e=e||!1;var g=a.computeFrenetFrames(b,e);this.tangents=g.tangents;this.normals=g.normals;this.binormals=g.binormals;var h=new n,k=new n,m=new z,q=new n,p,r,l=[],t=[],v=[],w=[];for(p=\n0;p<b;p++)f(p);f(!1===e?b:0);for(p=0;p<=b;p++)for(r=0;r<=d;r++)m.x=p/b,m.y=r/d,v.push(m.x,m.y);(function(){for(r=1;r<=b;r++)for(p=1;p<=d;p++){var a=(d+1)*r+(p-1),c=(d+1)*r+p,e=(d+1)*(r-1)+p;w.push((d+1)*(r-1)+(p-1),a,e);w.push(a,c,e)}})();this.setIndex(w);this.addAttribute(\"position\",new B(l,3));this.addAttribute(\"normal\",new B(t,3));this.addAttribute(\"uv\",new B(v,2))}function Rc(a,b,c,d,e,f,g){Q.call(this);this.type=\"TorusKnotGeometry\";this.parameters={radius:a,tube:b,tubularSegments:c,radialSegments:d,\np:e,q:f};void 0!==g&&console.warn(\"THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.\");this.fromBufferGeometry(new ac(a,b,c,d,e,f));this.mergeVertices()}function ac(a,b,c,d,e,f){function g(a,b,c,d,e){var f=Math.sin(a);b=c/b*a;c=Math.cos(b);e.x=d*(2+c)*.5*Math.cos(a);e.y=d*(2+c)*f*.5;e.z=d*Math.sin(b)*.5}D.call(this);this.type=\"TorusKnotBufferGeometry\";this.parameters={radius:a,tube:b,tubularSegments:c,radialSegments:d,p:e,q:f};a=a||1;b=b||.4;c=Math.floor(c)||\n64;d=Math.floor(d)||8;e=e||2;f=f||3;var h=[],k=[],m=[],q=[],p,r=new n,l=new n,t=new n,v=new n,w=new n,y=new n,u=new n;for(p=0;p<=c;++p){var H=p/c*e*Math.PI*2;g(H,e,f,a,t);g(H+.01,e,f,a,v);y.subVectors(v,t);u.addVectors(v,t);w.crossVectors(y,u);u.crossVectors(w,y);w.normalize();u.normalize();for(H=0;H<=d;++H){var G=H/d*Math.PI*2,N=-b*Math.cos(G);G=b*Math.sin(G);r.x=t.x+(N*u.x+G*w.x);r.y=t.y+(N*u.y+G*w.y);r.z=t.z+(N*u.z+G*w.z);k.push(r.x,r.y,r.z);l.subVectors(r,t).normalize();m.push(l.x,l.y,l.z);q.push(p/\nc);q.push(H/d)}}for(H=1;H<=c;H++)for(p=1;p<=d;p++)a=(d+1)*H+(p-1),b=(d+1)*H+p,e=(d+1)*(H-1)+p,h.push((d+1)*(H-1)+(p-1),a,e),h.push(a,b,e);this.setIndex(h);this.addAttribute(\"position\",new B(k,3));this.addAttribute(\"normal\",new B(m,3));this.addAttribute(\"uv\",new B(q,2))}function Sc(a,b,c,d,e){Q.call(this);this.type=\"TorusGeometry\";this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,arc:e};this.fromBufferGeometry(new bc(a,b,c,d,e));this.mergeVertices()}function bc(a,b,c,d,e){D.call(this);\nthis.type=\"TorusBufferGeometry\";this.parameters={radius:a,tube:b,radialSegments:c,tubularSegments:d,arc:e};a=a||1;b=b||.4;c=Math.floor(c)||8;d=Math.floor(d)||6;e=e||2*Math.PI;var f=[],g=[],h=[],k=[],m=new n,q=new n,p=new n,r,l;for(r=0;r<=c;r++)for(l=0;l<=d;l++){var t=l/d*e,v=r/c*Math.PI*2;q.x=(a+b*Math.cos(v))*Math.cos(t);q.y=(a+b*Math.cos(v))*Math.sin(t);q.z=b*Math.sin(v);g.push(q.x,q.y,q.z);m.x=a*Math.cos(t);m.y=a*Math.sin(t);p.subVectors(q,m).normalize();h.push(p.x,p.y,p.z);k.push(l/d);k.push(r/\nc)}for(r=1;r<=c;r++)for(l=1;l<=d;l++)a=(d+1)*(r-1)+l-1,b=(d+1)*(r-1)+l,e=(d+1)*r+l,f.push((d+1)*r+l-1,a,e),f.push(a,b,e);this.setIndex(f);this.addAttribute(\"position\",new B(g,3));this.addAttribute(\"normal\",new B(h,3));this.addAttribute(\"uv\",new B(k,2))}function lf(a,b,c,d,e){for(var f,g=0,h=b,k=c-d;h<c;h+=d)g+=(a[k]-a[h])*(a[h+1]+a[k+1]),k=h;if(e===0<g)for(e=b;e<c;e+=d)f=mf(e,a[e],a[e+1],f);else for(e=c-d;e>=b;e-=d)f=mf(e,a[e],a[e+1],f);f&&tb(f,f.next)&&(Tc(f),f=f.next);return f}function Uc(a,b){if(!a)return a;\nb||(b=a);do{var c=!1;if(a.steiner||!tb(a,a.next)&&0!==na(a.prev,a,a.next))a=a.next;else{Tc(a);a=b=a.prev;if(a===a.next)break;c=!0}}while(c||a!==b);return b}function Vc(a,b,c,d,e,f,g){if(a){if(!g&&f){var h=a,k=h;do null===k.z&&(k.z=ee(k.x,k.y,d,e,f)),k.prevZ=k.prev,k=k.nextZ=k.next;while(k!==h);k.prevZ.nextZ=null;k.prevZ=null;h=k;var m,q,p,r,l=1;do{k=h;var t=h=null;for(q=0;k;){q++;var n=k;for(m=p=0;m<l&&(p++,n=n.nextZ,n);m++);for(r=l;0<p||0<r&&n;)0!==p&&(0===r||!n||k.z<=n.z)?(m=k,k=k.nextZ,p--):(m=\nn,n=n.nextZ,r--),t?t.nextZ=m:h=m,m.prevZ=t,t=m;k=n}t.nextZ=null;l*=2}while(1<q)}for(h=a;a.prev!==a.next;){k=a.prev;n=a.next;if(f)a:{t=a;r=d;var w=e,y=f;q=t.prev;p=t;l=t.next;if(0<=na(q,p,l))t=!1;else{var u=q.x>p.x?q.x>l.x?q.x:l.x:p.x>l.x?p.x:l.x,H=q.y>p.y?q.y>l.y?q.y:l.y:p.y>l.y?p.y:l.y;m=ee(q.x<p.x?q.x<l.x?q.x:l.x:p.x<l.x?p.x:l.x,q.y<p.y?q.y<l.y?q.y:l.y:p.y<l.y?p.y:l.y,r,w,y);r=ee(u,H,r,w,y);for(w=t.nextZ;w&&w.z<=r;){if(w!==t.prev&&w!==t.next&&Ad(q.x,q.y,p.x,p.y,l.x,l.y,w.x,w.y)&&0<=na(w.prev,w,\nw.next)){t=!1;break a}w=w.nextZ}for(w=t.prevZ;w&&w.z>=m;){if(w!==t.prev&&w!==t.next&&Ad(q.x,q.y,p.x,p.y,l.x,l.y,w.x,w.y)&&0<=na(w.prev,w,w.next)){t=!1;break a}w=w.prevZ}t=!0}}else a:if(t=a,q=t.prev,p=t,l=t.next,0<=na(q,p,l))t=!1;else{for(m=t.next.next;m!==t.prev;){if(Ad(q.x,q.y,p.x,p.y,l.x,l.y,m.x,m.y)&&0<=na(m.prev,m,m.next)){t=!1;break a}m=m.next}t=!0}if(t)b.push(k.i/c),b.push(a.i/c),b.push(n.i/c),Tc(a),h=a=n.next;else if(a=n,a===h){if(!g)Vc(Uc(a),b,c,d,e,f,1);else if(1===g){g=b;h=c;k=a;do n=k.prev,\nt=k.next.next,!tb(n,t)&&nf(n,k,k.next,t)&&Wc(n,t)&&Wc(t,n)&&(g.push(n.i/h),g.push(k.i/h),g.push(t.i/h),Tc(k),Tc(k.next),k=a=t),k=k.next;while(k!==a);a=k;Vc(a,b,c,d,e,f,2)}else if(2===g)a:{g=a;do{for(h=g.next.next;h!==g.prev;){if(k=g.i!==h.i){k=g;n=h;if(t=k.next.i!==n.i&&k.prev.i!==n.i){b:{t=k;do{if(t.i!==k.i&&t.next.i!==k.i&&t.i!==n.i&&t.next.i!==n.i&&nf(t,t.next,k,n)){t=!0;break b}t=t.next}while(t!==k);t=!1}t=!t}if(t=t&&Wc(k,n)&&Wc(n,k)){t=k;q=!1;p=(k.x+n.x)/2;n=(k.y+n.y)/2;do t.y>n!==t.next.y>n&&\nt.next.y!==t.y&&p<(t.next.x-t.x)*(n-t.y)/(t.next.y-t.y)+t.x&&(q=!q),t=t.next;while(t!==k);t=q}k=t}if(k){a=of(g,h);g=Uc(g,g.next);a=Uc(a,a.next);Vc(g,b,c,d,e,f);Vc(a,b,c,d,e,f);break a}h=h.next}g=g.next}while(g!==a)}break}}}}function Vg(a,b){return a.x-b.x}function Wg(a,b){var c=b,d=a.x,e=a.y,f=-Infinity;do{if(e<=c.y&&e>=c.next.y&&c.next.y!==c.y){var g=c.x+(e-c.y)*(c.next.x-c.x)/(c.next.y-c.y);if(g<=d&&g>f){f=g;if(g===d){if(e===c.y)return c;if(e===c.next.y)return c.next}var h=c.x<c.next.x?c:c.next}}c=\nc.next}while(c!==b);if(!h)return null;if(d===f)return h.prev;b=h;g=h.x;var k=h.y,m=Infinity;for(c=h.next;c!==b;){if(d>=c.x&&c.x>=g&&d!==c.x&&Ad(e<k?d:f,e,g,k,e<k?f:d,e,c.x,c.y)){var q=Math.abs(e-c.y)/(d-c.x);(q<m||q===m&&c.x>h.x)&&Wc(c,a)&&(h=c,m=q)}c=c.next}return h}function ee(a,b,c,d,e){a=32767*(a-c)*e;b=32767*(b-d)*e;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;return(a|a<<1)&1431655765|((b|b<<1)&1431655765)<<1}function Xg(a){var b=\na,c=a;do b.x<c.x&&(c=b),b=b.next;while(b!==a);return c}function Ad(a,b,c,d,e,f,g,h){return 0<=(e-g)*(b-h)-(a-g)*(f-h)&&0<=(a-g)*(d-h)-(c-g)*(b-h)&&0<=(c-g)*(f-h)-(e-g)*(d-h)}function na(a,b,c){return(b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y)}function tb(a,b){return a.x===b.x&&a.y===b.y}function nf(a,b,c,d){return tb(a,b)&&tb(c,d)||tb(a,d)&&tb(c,b)?!0:0<na(a,b,c)!==0<na(a,b,d)&&0<na(c,d,a)!==0<na(c,d,b)}function Wc(a,b){return 0>na(a.prev,a,a.next)?0<=na(a,b,a.next)&&0<=na(a,a.prev,b):0>na(a,b,a.prev)||\n0>na(a,a.next,b)}function of(a,b){var c=new fe(a.i,a.x,a.y),d=new fe(b.i,b.x,b.y),e=a.next,f=b.prev;a.next=b;b.prev=a;c.next=e;e.prev=c;d.next=c;c.prev=d;f.next=d;d.prev=f;return d}function mf(a,b,c,d){a=new fe(a,b,c);d?(a.next=d.next,a.prev=d,d.next.prev=a,d.next=a):(a.prev=a,a.next=a);return a}function Tc(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function fe(a,b,c){this.i=a;this.x=b;this.y=c;this.nextZ=this.prevZ=this.z=this.next=\nthis.prev=null;this.steiner=!1}function pf(a){var b=a.length;2<b&&a[b-1].equals(a[0])&&a.pop()}function qf(a,b){for(var c=0;c<b.length;c++)a.push(b[c].x),a.push(b[c].y)}function ub(a,b){Q.call(this);this.type=\"ExtrudeGeometry\";this.parameters={shapes:a,options:b};this.fromBufferGeometry(new Sa(a,b));this.mergeVertices()}function Sa(a,b){function c(a){function c(a,b,c){b||console.error(\"THREE.ExtrudeGeometry: vec does not exist\");return b.clone().multiplyScalar(c).add(a)}function g(a,b,c){var d=a.x-\nb.x;var e=a.y-b.y;var f=c.x-a.x;var g=c.y-a.y,h=d*d+e*e;if(Math.abs(d*g-e*f)>Number.EPSILON){var k=Math.sqrt(h),m=Math.sqrt(f*f+g*g);h=b.x-e/k;b=b.y+d/k;g=((c.x-g/m-h)*g-(c.y+f/m-b)*f)/(d*g-e*f);f=h+d*g-a.x;d=b+e*g-a.y;e=f*f+d*d;if(2>=e)return new z(f,d);e=Math.sqrt(e/2)}else a=!1,d>Number.EPSILON?f>Number.EPSILON&&(a=!0):d<-Number.EPSILON?f<-Number.EPSILON&&(a=!0):Math.sign(e)===Math.sign(g)&&(a=!0),a?(f=-e,e=Math.sqrt(h)):(f=d,d=e,e=Math.sqrt(h/2));return new z(f/e,d/e)}function h(a,b){for(M=a.length;0<=\n--M;){var c=M;var f=M-1;0>f&&(f=a.length-1);var g,h=u+2*A;for(g=0;g<h;g++){var k=X*g,m=X*(g+1),q=b+f+k,p=b+f+m;m=b+c+m;t(b+c+k);t(q);t(m);t(q);t(p);t(m);k=e.length/3;k=C.generateSideWallUV(d,e,k-6,k-3,k-2,k-1);v(k[0]);v(k[1]);v(k[3]);v(k[1]);v(k[2]);v(k[3])}}}function k(a,b,c){w.push(a);w.push(b);w.push(c)}function l(a,b,c){t(a);t(b);t(c);a=e.length/3;a=C.generateTopUV(d,e,a-3,a-2,a-1);v(a[0]);v(a[1]);v(a[2])}function t(a){e.push(w[3*a]);e.push(w[3*a+1]);e.push(w[3*a+2])}function v(a){f.push(a.x);\nf.push(a.y)}var w=[],y=void 0!==b.curveSegments?b.curveSegments:12,u=void 0!==b.steps?b.steps:1,H=void 0!==b.depth?b.depth:100,G=void 0!==b.bevelEnabled?b.bevelEnabled:!0,N=void 0!==b.bevelThickness?b.bevelThickness:6,W=void 0!==b.bevelSize?b.bevelSize:N-2,A=void 0!==b.bevelSegments?b.bevelSegments:3,B=b.extrudePath,C=void 0!==b.UVGenerator?b.UVGenerator:Yg;void 0!==b.amount&&(console.warn(\"THREE.ExtrudeBufferGeometry: amount has been renamed to depth.\"),H=b.amount);var D=!1;if(B){var Y=B.getSpacedPoints(u);\nD=!0;G=!1;var F=B.computeFrenetFrames(u,!1);var J=new n;var K=new n;var Q=new n}G||(W=N=A=0);var O;y=a.extractPoints(y);a=y.shape;var L=y.holes;if(!Ya.isClockWise(a)){a=a.reverse();var E=0;for(O=L.length;E<O;E++){var I=L[E];Ya.isClockWise(I)&&(L[E]=I.reverse())}}var R=Ya.triangulateShape(a,L),T=a;E=0;for(O=L.length;E<O;E++)I=L[E],a=a.concat(I);var S,X=a.length,V,ca=R.length;y=[];var M=0;var U=T.length;var fa=U-1;for(S=M+1;M<U;M++,fa++,S++)fa===U&&(fa=0),S===U&&(S=0),y[M]=g(T[M],T[fa],T[S]);B=[];var ea=\ny.concat();E=0;for(O=L.length;E<O;E++){I=L[E];var ba=[];M=0;U=I.length;fa=U-1;for(S=M+1;M<U;M++,fa++,S++)fa===U&&(fa=0),S===U&&(S=0),ba[M]=g(I[M],I[fa],I[S]);B.push(ba);ea=ea.concat(ba)}for(fa=0;fa<A;fa++){U=fa/A;var da=N*Math.cos(U*Math.PI/2);S=W*Math.sin(U*Math.PI/2);M=0;for(U=T.length;M<U;M++){var Z=c(T[M],y[M],S);k(Z.x,Z.y,-da)}E=0;for(O=L.length;E<O;E++)for(I=L[E],ba=B[E],M=0,U=I.length;M<U;M++)Z=c(I[M],ba[M],S),k(Z.x,Z.y,-da)}S=W;for(M=0;M<X;M++)Z=G?c(a[M],ea[M],S):a[M],D?(K.copy(F.normals[0]).multiplyScalar(Z.x),\nJ.copy(F.binormals[0]).multiplyScalar(Z.y),Q.copy(Y[0]).add(K).add(J),k(Q.x,Q.y,Q.z)):k(Z.x,Z.y,0);for(U=1;U<=u;U++)for(M=0;M<X;M++)Z=G?c(a[M],ea[M],S):a[M],D?(K.copy(F.normals[U]).multiplyScalar(Z.x),J.copy(F.binormals[U]).multiplyScalar(Z.y),Q.copy(Y[U]).add(K).add(J),k(Q.x,Q.y,Q.z)):k(Z.x,Z.y,H/u*U);for(fa=A-1;0<=fa;fa--){U=fa/A;da=N*Math.cos(U*Math.PI/2);S=W*Math.sin(U*Math.PI/2);M=0;for(U=T.length;M<U;M++)Z=c(T[M],y[M],S),k(Z.x,Z.y,H+da);E=0;for(O=L.length;E<O;E++)for(I=L[E],ba=B[E],M=0,U=I.length;M<\nU;M++)Z=c(I[M],ba[M],S),D?k(Z.x,Z.y+Y[u-1].y,Y[u-1].x+da):k(Z.x,Z.y,H+da)}(function(){var a=e.length/3;if(G){var b=0*X;for(M=0;M<ca;M++)V=R[M],l(V[2]+b,V[1]+b,V[0]+b);b=X*(u+2*A);for(M=0;M<ca;M++)V=R[M],l(V[0]+b,V[1]+b,V[2]+b)}else{for(M=0;M<ca;M++)V=R[M],l(V[2],V[1],V[0]);for(M=0;M<ca;M++)V=R[M],l(V[0]+X*u,V[1]+X*u,V[2]+X*u)}d.addGroup(a,e.length/3-a,0)})();(function(){var a=e.length/3,b=0;h(T,b);b+=T.length;E=0;for(O=L.length;E<O;E++)I=L[E],h(I,b),b+=I.length;d.addGroup(a,e.length/3-a,1)})()}D.call(this);\nthis.type=\"ExtrudeBufferGeometry\";this.parameters={shapes:a,options:b};a=Array.isArray(a)?a:[a];for(var d=this,e=[],f=[],g=0,h=a.length;g<h;g++)c(a[g]);this.addAttribute(\"position\",new B(e,3));this.addAttribute(\"uv\",new B(f,2));this.computeVertexNormals()}function rf(a,b,c){c.shapes=[];if(Array.isArray(a))for(var d=0,e=a.length;d<e;d++)c.shapes.push(a[d].uuid);else c.shapes.push(a.uuid);void 0!==b.extrudePath&&(c.options.extrudePath=b.extrudePath.toJSON());return c}function Xc(a,b){Q.call(this);this.type=\n\"TextGeometry\";this.parameters={text:a,parameters:b};this.fromBufferGeometry(new cc(a,b));this.mergeVertices()}function cc(a,b){b=b||{};var c=b.font;if(!c||!c.isFont)return console.error(\"THREE.TextGeometry: font parameter is not an instance of THREE.Font.\"),new Q;a=c.generateShapes(a,b.size);b.depth=void 0!==b.height?b.height:50;void 0===b.bevelThickness&&(b.bevelThickness=10);void 0===b.bevelSize&&(b.bevelSize=8);void 0===b.bevelEnabled&&(b.bevelEnabled=!1);Sa.call(this,a,b);this.type=\"TextBufferGeometry\"}\nfunction Yc(a,b,c,d,e,f,g){Q.call(this);this.type=\"SphereGeometry\";this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:f,thetaLength:g};this.fromBufferGeometry(new vb(a,b,c,d,e,f,g));this.mergeVertices()}function vb(a,b,c,d,e,f,g){D.call(this);this.type=\"SphereBufferGeometry\";this.parameters={radius:a,widthSegments:b,heightSegments:c,phiStart:d,phiLength:e,thetaStart:f,thetaLength:g};a=a||1;b=Math.max(3,Math.floor(b)||8);c=Math.max(2,Math.floor(c)||6);d=void 0!==\nd?d:0;e=void 0!==e?e:2*Math.PI;f=void 0!==f?f:0;g=void 0!==g?g:Math.PI;var h=f+g,k,m,q=0,p=[],l=new n,x=new n,t=[],v=[],w=[],y=[];for(m=0;m<=c;m++){var u=[],H=m/c;for(k=0;k<=b;k++){var G=k/b;l.x=-a*Math.cos(d+G*e)*Math.sin(f+H*g);l.y=a*Math.cos(f+H*g);l.z=a*Math.sin(d+G*e)*Math.sin(f+H*g);v.push(l.x,l.y,l.z);x.set(l.x,l.y,l.z).normalize();w.push(x.x,x.y,x.z);y.push(G,1-H);u.push(q++)}p.push(u)}for(m=0;m<c;m++)for(k=0;k<b;k++)a=p[m][k+1],d=p[m][k],e=p[m+1][k],g=p[m+1][k+1],(0!==m||0<f)&&t.push(a,d,\ng),(m!==c-1||h<Math.PI)&&t.push(d,e,g);this.setIndex(t);this.addAttribute(\"position\",new B(v,3));this.addAttribute(\"normal\",new B(w,3));this.addAttribute(\"uv\",new B(y,2))}function Zc(a,b,c,d,e,f){Q.call(this);this.type=\"RingGeometry\";this.parameters={innerRadius:a,outerRadius:b,thetaSegments:c,phiSegments:d,thetaStart:e,thetaLength:f};this.fromBufferGeometry(new dc(a,b,c,d,e,f));this.mergeVertices()}function dc(a,b,c,d,e,f){D.call(this);this.type=\"RingBufferGeometry\";this.parameters={innerRadius:a,\nouterRadius:b,thetaSegments:c,phiSegments:d,thetaStart:e,thetaLength:f};a=a||.5;b=b||1;e=void 0!==e?e:0;f=void 0!==f?f:2*Math.PI;c=void 0!==c?Math.max(3,c):8;d=void 0!==d?Math.max(1,d):1;var g=[],h=[],k=[],m=[],q=a,p=(b-a)/d,l=new n,x=new z,t,v;for(t=0;t<=d;t++){for(v=0;v<=c;v++)a=e+v/c*f,l.x=q*Math.cos(a),l.y=q*Math.sin(a),h.push(l.x,l.y,l.z),k.push(0,0,1),x.x=(l.x/b+1)/2,x.y=(l.y/b+1)/2,m.push(x.x,x.y);q+=p}for(t=0;t<d;t++)for(b=t*(c+1),v=0;v<c;v++)a=v+b,e=a+c+1,f=a+c+2,q=a+1,g.push(a,e,q),g.push(e,\nf,q);this.setIndex(g);this.addAttribute(\"position\",new B(h,3));this.addAttribute(\"normal\",new B(k,3));this.addAttribute(\"uv\",new B(m,2))}function $c(a,b,c,d){Q.call(this);this.type=\"LatheGeometry\";this.parameters={points:a,segments:b,phiStart:c,phiLength:d};this.fromBufferGeometry(new ec(a,b,c,d));this.mergeVertices()}function ec(a,b,c,d){D.call(this);this.type=\"LatheBufferGeometry\";this.parameters={points:a,segments:b,phiStart:c,phiLength:d};b=Math.floor(b)||12;c=c||0;d=d||2*Math.PI;d=R.clamp(d,\n0,2*Math.PI);var e=[],f=[],g=[],h=1/b,k=new n,m=new z,q;for(q=0;q<=b;q++){var p=c+q*h*d;var l=Math.sin(p),x=Math.cos(p);for(p=0;p<=a.length-1;p++)k.x=a[p].x*l,k.y=a[p].y,k.z=a[p].x*x,f.push(k.x,k.y,k.z),m.x=q/b,m.y=p/(a.length-1),g.push(m.x,m.y)}for(q=0;q<b;q++)for(p=0;p<a.length-1;p++)c=p+q*a.length,h=c+a.length,k=c+a.length+1,m=c+1,e.push(c,h,m),e.push(h,k,m);this.setIndex(e);this.addAttribute(\"position\",new B(f,3));this.addAttribute(\"uv\",new B(g,2));this.computeVertexNormals();if(d===2*Math.PI)for(d=\nthis.attributes.normal.array,e=new n,f=new n,g=new n,c=b*a.length*3,p=q=0;q<a.length;q++,p+=3)e.x=d[p+0],e.y=d[p+1],e.z=d[p+2],f.x=d[c+p+0],f.y=d[c+p+1],f.z=d[c+p+2],g.addVectors(e,f).normalize(),d[p+0]=d[c+p+0]=g.x,d[p+1]=d[c+p+1]=g.y,d[p+2]=d[c+p+2]=g.z}function wb(a,b){Q.call(this);this.type=\"ShapeGeometry\";\"object\"===typeof b&&(console.warn(\"THREE.ShapeGeometry: Options parameter has been removed.\"),b=b.curveSegments);this.parameters={shapes:a,curveSegments:b};this.fromBufferGeometry(new xb(a,\nb));this.mergeVertices()}function xb(a,b){function c(a){var c,h=e.length/3;a=a.extractPoints(b);var m=a.shape,q=a.holes;if(!1===Ya.isClockWise(m))for(m=m.reverse(),a=0,c=q.length;a<c;a++){var l=q[a];!0===Ya.isClockWise(l)&&(q[a]=l.reverse())}var n=Ya.triangulateShape(m,q);a=0;for(c=q.length;a<c;a++)l=q[a],m=m.concat(l);a=0;for(c=m.length;a<c;a++)l=m[a],e.push(l.x,l.y,0),f.push(0,0,1),g.push(l.x,l.y);a=0;for(c=n.length;a<c;a++)m=n[a],d.push(m[0]+h,m[1]+h,m[2]+h),k+=3}D.call(this);this.type=\"ShapeBufferGeometry\";\nthis.parameters={shapes:a,curveSegments:b};b=b||12;var d=[],e=[],f=[],g=[],h=0,k=0;if(!1===Array.isArray(a))c(a);else for(var m=0;m<a.length;m++)c(a[m]),this.addGroup(h,k,m),h+=k,k=0;this.setIndex(d);this.addAttribute(\"position\",new B(e,3));this.addAttribute(\"normal\",new B(f,3));this.addAttribute(\"uv\",new B(g,2))}function sf(a,b){b.shapes=[];if(Array.isArray(a))for(var c=0,d=a.length;c<d;c++)b.shapes.push(a[c].uuid);else b.shapes.push(a.uuid);return b}function fc(a,b){D.call(this);this.type=\"EdgesGeometry\";\nthis.parameters={thresholdAngle:b};var c=[];b=Math.cos(R.DEG2RAD*(void 0!==b?b:1));var d=[0,0],e={},f=[\"a\",\"b\",\"c\"];if(a.isBufferGeometry){var g=new Q;g.fromBufferGeometry(a)}else g=a.clone();g.mergeVertices();g.computeFaceNormals();a=g.vertices;g=g.faces;for(var h=0,k=g.length;h<k;h++)for(var m=g[h],q=0;3>q;q++){var l=m[f[q]];var r=m[f[(q+1)%3]];d[0]=Math.min(l,r);d[1]=Math.max(l,r);l=d[0]+\",\"+d[1];void 0===e[l]?e[l]={index1:d[0],index2:d[1],face1:h,face2:void 0}:e[l].face2=h}for(l in e)if(d=e[l],\nvoid 0===d.face2||g[d.face1].normal.dot(g[d.face2].normal)<=b)f=a[d.index1],c.push(f.x,f.y,f.z),f=a[d.index2],c.push(f.x,f.y,f.z);this.addAttribute(\"position\",new B(c,3))}function yb(a,b,c,d,e,f,g,h){Q.call(this);this.type=\"CylinderGeometry\";this.parameters={radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:f,thetaStart:g,thetaLength:h};this.fromBufferGeometry(new Za(a,b,c,d,e,f,g,h));this.mergeVertices()}function Za(a,b,c,d,e,f,g,h){function k(c){var e,f=new z,k=new n,\np=0,u=!0===c?a:b,v=!0===c?1:-1;var B=t;for(e=1;e<=d;e++)l.push(0,w*v,0),r.push(0,v,0),x.push(.5,.5),t++;var C=t;for(e=0;e<=d;e++){var D=e/d*h+g,E=Math.cos(D);D=Math.sin(D);k.x=u*D;k.y=w*v;k.z=u*E;l.push(k.x,k.y,k.z);r.push(0,v,0);f.x=.5*E+.5;f.y=.5*D*v+.5;x.push(f.x,f.y);t++}for(e=0;e<d;e++)f=B+e,k=C+e,!0===c?q.push(k,k+1,f):q.push(k+1,k,f),p+=3;m.addGroup(y,p,!0===c?1:2);y+=p}D.call(this);this.type=\"CylinderBufferGeometry\";this.parameters={radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,\nopenEnded:f,thetaStart:g,thetaLength:h};var m=this;a=void 0!==a?a:1;b=void 0!==b?b:1;c=c||1;d=Math.floor(d)||8;e=Math.floor(e)||1;f=void 0!==f?f:!1;g=void 0!==g?g:0;h=void 0!==h?h:2*Math.PI;var q=[],l=[],r=[],x=[],t=0,v=[],w=c/2,y=0;(function(){var f,k,p=new n,N=new n,z=0,A=(b-a)/c;for(k=0;k<=e;k++){var B=[],D=k/e,C=D*(b-a)+a;for(f=0;f<=d;f++){var E=f/d,F=E*h+g,J=Math.sin(F);F=Math.cos(F);N.x=C*J;N.y=-D*c+w;N.z=C*F;l.push(N.x,N.y,N.z);p.set(J,A,F).normalize();r.push(p.x,p.y,p.z);x.push(E,1-D);B.push(t++)}v.push(B)}for(f=\n0;f<d;f++)for(k=0;k<e;k++)p=v[k+1][f],N=v[k+1][f+1],A=v[k][f+1],q.push(v[k][f],p,A),q.push(p,N,A),z+=6;m.addGroup(y,z,0);y+=z})();!1===f&&(0<a&&k(!0),0<b&&k(!1));this.setIndex(q);this.addAttribute(\"position\",new B(l,3));this.addAttribute(\"normal\",new B(r,3));this.addAttribute(\"uv\",new B(x,2))}function ad(a,b,c,d,e,f,g){yb.call(this,0,a,b,c,d,e,f,g);this.type=\"ConeGeometry\";this.parameters={radius:a,height:b,radialSegments:c,heightSegments:d,openEnded:e,thetaStart:f,thetaLength:g}}function bd(a,b,\nc,d,e,f,g){Za.call(this,0,a,b,c,d,e,f,g);this.type=\"ConeBufferGeometry\";this.parameters={radius:a,height:b,radialSegments:c,heightSegments:d,openEnded:e,thetaStart:f,thetaLength:g}}function cd(a,b,c,d){Q.call(this);this.type=\"CircleGeometry\";this.parameters={radius:a,segments:b,thetaStart:c,thetaLength:d};this.fromBufferGeometry(new gc(a,b,c,d));this.mergeVertices()}function gc(a,b,c,d){D.call(this);this.type=\"CircleBufferGeometry\";this.parameters={radius:a,segments:b,thetaStart:c,thetaLength:d};\na=a||1;b=void 0!==b?Math.max(3,b):8;c=void 0!==c?c:0;d=void 0!==d?d:2*Math.PI;var e=[],f=[],g=[],h=[],k,m=new n,q=new z;f.push(0,0,0);g.push(0,0,1);h.push(.5,.5);var l=0;for(k=3;l<=b;l++,k+=3){var r=c+l/b*d;m.x=a*Math.cos(r);m.y=a*Math.sin(r);f.push(m.x,m.y,m.z);g.push(0,0,1);q.x=(f[k]/a+1)/2;q.y=(f[k+1]/a+1)/2;h.push(q.x,q.y)}for(k=1;k<=b;k++)e.push(k,k+1,0);this.setIndex(e);this.addAttribute(\"position\",new B(f,3));this.addAttribute(\"normal\",new B(g,3));this.addAttribute(\"uv\",new B(h,2))}function zb(a){L.call(this);\nthis.type=\"ShadowMaterial\";this.color=new J(0);this.transparent=!0;this.setValues(a)}function hc(a){Ba.call(this,a);this.type=\"RawShaderMaterial\"}function Ta(a){L.call(this);this.defines={STANDARD:\"\"};this.type=\"MeshStandardMaterial\";this.color=new J(16777215);this.metalness=this.roughness=.5;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new J(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;\nthis.normalMapType=0;this.normalScale=new z(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null;this.envMapIntensity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap=\"round\";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)}function Ab(a){Ta.call(this);this.defines={PHYSICAL:\"\"};this.type=\"MeshPhysicalMaterial\";this.reflectivity=\n.5;this.clearCoatRoughness=this.clearCoat=0;this.setValues(a)}function Ga(a){L.call(this);this.type=\"MeshPhongMaterial\";this.color=new J(16777215);this.specular=new J(1118481);this.shininess=30;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new J(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=0;this.normalScale=new z(1,1);this.displacementMap=null;this.displacementScale=\n1;this.displacementBias=0;this.envMap=this.alphaMap=this.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap=\"round\";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)}function Bb(a){Ga.call(this);this.defines={TOON:\"\"};this.type=\"MeshToonMaterial\";this.gradientMap=null;this.setValues(a)}function Cb(a){L.call(this);this.type=\"MeshNormalMaterial\";this.bumpMap=null;this.bumpScale=\n1;this.normalMap=null;this.normalMapType=0;this.normalScale=new z(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.morphNormals=this.morphTargets=this.skinning=this.lights=this.fog=!1;this.setValues(a)}function Db(a){L.call(this);this.type=\"MeshLambertMaterial\";this.color=new J(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new J(0);this.emissiveIntensity=\n1;this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap=\"round\";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)}function Eb(a){L.call(this);this.defines={MATCAP:\"\"};this.type=\"MeshMatcapMaterial\";this.color=new J(16777215);this.bumpMap=this.map=this.matcap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=\n0;this.normalScale=new z(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.alphaMap=null;this.lights=this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)}function Fb(a){T.call(this);this.type=\"LineDashedMaterial\";this.scale=1;this.dashSize=3;this.gapSize=1;this.setValues(a)}function ya(a,b,c,d){this.parameterPositions=a;this._cachedIndex=0;this.resultBuffer=void 0!==d?d:new b.constructor(c);this.sampleValues=b;this.valueSize=c}function Bd(a,b,c,\nd){ya.call(this,a,b,c,d);this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0}function dd(a,b,c,d){ya.call(this,a,b,c,d)}function Cd(a,b,c,d){ya.call(this,a,b,c,d)}function qa(a,b,c,d){if(void 0===a)throw Error(\"THREE.KeyframeTrack: track name is undefined\");if(void 0===b||0===b.length)throw Error(\"THREE.KeyframeTrack: no keyframes in track named \"+a);this.name=a;this.times=ra.convertArray(b,this.TimeBufferType);this.values=ra.convertArray(c,this.ValueBufferType);this.setInterpolation(d||\nthis.DefaultInterpolation)}function Dd(a,b,c){qa.call(this,a,b,c)}function Ed(a,b,c,d){qa.call(this,a,b,c,d)}function ic(a,b,c,d){qa.call(this,a,b,c,d)}function Fd(a,b,c,d){ya.call(this,a,b,c,d)}function ed(a,b,c,d){qa.call(this,a,b,c,d)}function Gd(a,b,c,d){qa.call(this,a,b,c,d)}function jc(a,b,c,d){qa.call(this,a,b,c,d)}function Ha(a,b,c){this.name=a;this.tracks=c;this.duration=void 0!==b?b:-1;this.uuid=R.generateUUID();0>this.duration&&this.resetDuration()}function Zg(a){switch(a.toLowerCase()){case \"scalar\":case \"double\":case \"float\":case \"number\":case \"integer\":return ic;\ncase \"vector\":case \"vector2\":case \"vector3\":case \"vector4\":return jc;case \"color\":return Ed;case \"quaternion\":return ed;case \"bool\":case \"boolean\":return Dd;case \"string\":return Gd}throw Error(\"THREE.KeyframeTrack: Unsupported typeName: \"+a);}function $g(a){if(void 0===a.type)throw Error(\"THREE.KeyframeTrack: track type undefined, can not parse\");var b=Zg(a.type);if(void 0===a.times){var c=[],d=[];ra.flattenJSON(a.keys,c,d,\"value\");a.times=c;a.values=d}return void 0!==b.parse?b.parse(a):new b(a.name,\na.times,a.values,a.interpolation)}function ge(a,b,c){var d=this,e=!1,f=0,g=0,h=void 0;this.onStart=void 0;this.onLoad=a;this.onProgress=b;this.onError=c;this.itemStart=function(a){g++;if(!1===e&&void 0!==d.onStart)d.onStart(a,f,g);e=!0};this.itemEnd=function(a){f++;if(void 0!==d.onProgress)d.onProgress(a,f,g);if(f===g&&(e=!1,void 0!==d.onLoad))d.onLoad()};this.itemError=function(a){if(void 0!==d.onError)d.onError(a)};this.resolveURL=function(a){return h?h(a):a};this.setURLModifier=function(a){h=a;\nreturn this}}function Ia(a){this.manager=void 0!==a?a:za}function tf(a){this.manager=void 0!==a?a:za}function uf(a){this.manager=void 0!==a?a:za;this._parser=null}function he(a){this.manager=void 0!==a?a:za;this._parser=null}function fd(a){this.manager=void 0!==a?a:za}function ie(a){this.manager=void 0!==a?a:za}function Hd(a){this.manager=void 0!==a?a:za}function K(){this.type=\"Curve\";this.arcLengthDivisions=200}function va(a,b,c,d,e,f,g,h){K.call(this);this.type=\"EllipseCurve\";this.aX=a||0;this.aY=\nb||0;this.xRadius=c||1;this.yRadius=d||1;this.aStartAngle=e||0;this.aEndAngle=f||2*Math.PI;this.aClockwise=g||!1;this.aRotation=h||0}function kc(a,b,c,d,e,f){va.call(this,a,b,c,c,d,e,f);this.type=\"ArcCurve\"}function je(){var a=0,b=0,c=0,d=0;return{initCatmullRom:function(e,f,g,h,k){e=k*(g-e);h=k*(h-f);a=f;b=e;c=-3*f+3*g-2*e-h;d=2*f-2*g+e+h},initNonuniformCatmullRom:function(e,f,g,h,k,m,q){e=((f-e)/k-(g-e)/(k+m)+(g-f)/m)*m;h=((g-f)/m-(h-f)/(m+q)+(h-g)/q)*m;a=f;b=e;c=-3*f+3*g-2*e-h;d=2*f-2*g+e+h},calc:function(e){var f=\ne*e;return a+b*e+c*f+d*f*e}}}function ta(a,b,c,d){K.call(this);this.type=\"CatmullRomCurve3\";this.points=a||[];this.closed=b||!1;this.curveType=c||\"centripetal\";this.tension=d||.5}function vf(a,b,c,d,e){b=.5*(d-b);e=.5*(e-c);var f=a*a;return(2*c-2*d+b+e)*a*f+(-3*c+3*d-2*b-e)*f+b*a+c}function gd(a,b,c,d){var e=1-a;return e*e*b+2*(1-a)*a*c+a*a*d}function hd(a,b,c,d,e){var f=1-a,g=1-a;return f*f*f*b+3*g*g*a*c+3*(1-a)*a*a*d+a*a*a*e}function Ja(a,b,c,d){K.call(this);this.type=\"CubicBezierCurve\";this.v0=\na||new z;this.v1=b||new z;this.v2=c||new z;this.v3=d||new z}function Ua(a,b,c,d){K.call(this);this.type=\"CubicBezierCurve3\";this.v0=a||new n;this.v1=b||new n;this.v2=c||new n;this.v3=d||new n}function Aa(a,b){K.call(this);this.type=\"LineCurve\";this.v1=a||new z;this.v2=b||new z}function Ka(a,b){K.call(this);this.type=\"LineCurve3\";this.v1=a||new n;this.v2=b||new n}function La(a,b,c){K.call(this);this.type=\"QuadraticBezierCurve\";this.v0=a||new z;this.v1=b||new z;this.v2=c||new z}function Va(a,b,c){K.call(this);\nthis.type=\"QuadraticBezierCurve3\";this.v0=a||new n;this.v1=b||new n;this.v2=c||new n}function Ma(a){K.call(this);this.type=\"SplineCurve\";this.points=a||[]}function $a(){K.call(this);this.type=\"CurvePath\";this.curves=[];this.autoClose=!1}function Na(a){$a.call(this);this.type=\"Path\";this.currentPoint=new z;a&&this.setFromPoints(a)}function hb(a){Na.call(this,a);this.uuid=R.generateUUID();this.type=\"Shape\";this.holes=[]}function ba(a,b){C.call(this);this.type=\"Light\";this.color=new J(a);this.intensity=\nvoid 0!==b?b:1;this.receiveShadow=void 0}function Id(a,b,c){ba.call(this,a,c);this.type=\"HemisphereLight\";this.castShadow=void 0;this.position.copy(C.DefaultUp);this.updateMatrix();this.groundColor=new J(b)}function Gb(a){this.camera=a;this.bias=0;this.radius=1;this.mapSize=new z(512,512);this.map=null;this.matrix=new O}function Jd(){Gb.call(this,new V(50,1,.5,500))}function Kd(a,b,c,d,e,f){ba.call(this,a,b);this.type=\"SpotLight\";this.position.copy(C.DefaultUp);this.updateMatrix();this.target=new C;\nObject.defineProperty(this,\"power\",{get:function(){return this.intensity*Math.PI},set:function(a){this.intensity=a/Math.PI}});this.distance=void 0!==c?c:0;this.angle=void 0!==d?d:Math.PI/3;this.penumbra=void 0!==e?e:0;this.decay=void 0!==f?f:1;this.shadow=new Jd}function Ld(a,b,c,d){ba.call(this,a,b);this.type=\"PointLight\";Object.defineProperty(this,\"power\",{get:function(){return 4*this.intensity*Math.PI},set:function(a){this.intensity=a/(4*Math.PI)}});this.distance=void 0!==c?c:0;this.decay=void 0!==\nd?d:1;this.shadow=new Gb(new V(90,1,.5,500))}function id(a,b,c,d,e,f){Ra.call(this);this.type=\"OrthographicCamera\";this.zoom=1;this.view=null;this.left=void 0!==a?a:-1;this.right=void 0!==b?b:1;this.top=void 0!==c?c:1;this.bottom=void 0!==d?d:-1;this.near=void 0!==e?e:.1;this.far=void 0!==f?f:2E3;this.updateProjectionMatrix()}function Md(){Gb.call(this,new id(-5,5,5,-5,.5,500))}function Nd(a,b){ba.call(this,a,b);this.type=\"DirectionalLight\";this.position.copy(C.DefaultUp);this.updateMatrix();this.target=\nnew C;this.shadow=new Md}function Od(a,b){ba.call(this,a,b);this.type=\"AmbientLight\";this.castShadow=void 0}function Pd(a,b,c,d){ba.call(this,a,b);this.type=\"RectAreaLight\";this.width=void 0!==c?c:10;this.height=void 0!==d?d:10}function Qd(a){this.manager=void 0!==a?a:za;this.textures={}}function ke(a){this.manager=void 0!==a?a:za}function le(a){this.manager=void 0!==a?a:za;this.resourcePath=\"\"}function me(a){\"undefined\"===typeof createImageBitmap&&console.warn(\"THREE.ImageBitmapLoader: createImageBitmap() not supported.\");\n\"undefined\"===typeof fetch&&console.warn(\"THREE.ImageBitmapLoader: fetch() not supported.\");this.manager=void 0!==a?a:za;this.options=void 0}function ne(){this.type=\"ShapePath\";this.color=new J;this.subPaths=[];this.currentPath=null}function oe(a){this.type=\"Font\";this.data=a}function wf(a){this.manager=void 0!==a?a:za}function jd(){}function pe(a){this.manager=void 0!==a?a:za}function xf(){this.type=\"StereoCamera\";this.aspect=1;this.eyeSep=.064;this.cameraL=new V;this.cameraL.layers.enable(1);this.cameraL.matrixAutoUpdate=\n!1;this.cameraR=new V;this.cameraR.layers.enable(2);this.cameraR.matrixAutoUpdate=!1}function kd(a,b,c,d){C.call(this);this.type=\"CubeCamera\";var e=new V(90,1,a,b);e.up.set(0,-1,0);e.lookAt(new n(1,0,0));this.add(e);var f=new V(90,1,a,b);f.up.set(0,-1,0);f.lookAt(new n(-1,0,0));this.add(f);var g=new V(90,1,a,b);g.up.set(0,0,1);g.lookAt(new n(0,1,0));this.add(g);var h=new V(90,1,a,b);h.up.set(0,0,-1);h.lookAt(new n(0,-1,0));this.add(h);var k=new V(90,1,a,b);k.up.set(0,-1,0);k.lookAt(new n(0,0,1));\nthis.add(k);var m=new V(90,1,a,b);m.up.set(0,-1,0);m.lookAt(new n(0,0,-1));this.add(m);d=d||{format:1022,magFilter:1006,minFilter:1006};this.renderTarget=new Ib(c,c,d);this.renderTarget.texture.name=\"CubeCamera\";this.update=function(a,b){null===this.parent&&this.updateMatrixWorld();var c=this.renderTarget,d=c.texture.generateMipmaps;c.texture.generateMipmaps=!1;c.activeCubeFace=0;a.render(b,e,c);c.activeCubeFace=1;a.render(b,f,c);c.activeCubeFace=2;a.render(b,g,c);c.activeCubeFace=3;a.render(b,h,\nc);c.activeCubeFace=4;a.render(b,k,c);c.texture.generateMipmaps=d;c.activeCubeFace=5;a.render(b,m,c);a.setRenderTarget(null)};this.clear=function(a,b,c,d){for(var e=this.renderTarget,f=0;6>f;f++)e.activeCubeFace=f,a.setRenderTarget(e),a.clear(b,c,d);a.setRenderTarget(null)}}function qe(a){this.autoStart=void 0!==a?a:!0;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1}function re(){C.call(this);this.type=\"AudioListener\";this.context=se.getContext();this.gain=this.context.createGain();\nthis.gain.connect(this.context.destination);this.filter=null;this.timeDelta=0}function lc(a){C.call(this);this.type=\"Audio\";this.listener=a;this.context=a.context;this.gain=this.context.createGain();this.gain.connect(a.getInput());this.autoplay=!1;this.buffer=null;this.detune=0;this.loop=!1;this.offset=this.startTime=0;this.playbackRate=1;this.isPlaying=!1;this.hasPlaybackControl=!0;this.sourceType=\"empty\";this.filters=[]}function te(a){lc.call(this,a);this.panner=this.context.createPanner();this.panner.connect(this.gain)}\nfunction ue(a,b){this.analyser=a.context.createAnalyser();this.analyser.fftSize=void 0!==b?b:2048;this.data=new Uint8Array(this.analyser.frequencyBinCount);a.getOutput().connect(this.analyser)}function ve(a,b,c){this.binding=a;this.valueSize=c;a=Float64Array;switch(b){case \"quaternion\":b=this._slerp;break;case \"string\":case \"bool\":a=Array;b=this._select;break;default:b=this._lerp}this.buffer=new a(4*c);this._mixBufferRegion=b;this.referenceCount=this.useCount=this.cumulativeWeight=0}function yf(a,\nb,c){c=c||oa.parseTrackName(b);this._targetGroup=a;this._bindings=a.subscribe_(b,c)}function oa(a,b,c){this.path=b;this.parsedPath=c||oa.parseTrackName(b);this.node=oa.findNode(a,this.parsedPath.nodeName)||a;this.rootNode=a}function zf(){this.uuid=R.generateUUID();this._objects=Array.prototype.slice.call(arguments);this.nCachedObjects_=0;var a={};this._indicesByUUID=a;for(var b=0,c=arguments.length;b!==c;++b)a[arguments[b].uuid]=b;this._paths=[];this._parsedPaths=[];this._bindings=[];this._bindingsIndicesByPath=\n{};var d=this;this.stats={objects:{get total(){return d._objects.length},get inUse(){return this.total-d.nCachedObjects_}},get bindingsPerObject(){return d._bindings.length}}}function Af(a,b,c){this._mixer=a;this._clip=b;this._localRoot=c||null;a=b.tracks;b=a.length;c=Array(b);for(var d={endingStart:2400,endingEnd:2400},e=0;e!==b;++e){var f=a[e].createInterpolant(null);c[e]=f;f.settings=d}this._interpolantSettings=d;this._interpolants=c;this._propertyBindings=Array(b);this._weightInterpolant=this._timeScaleInterpolant=\nthis._byClipCacheIndex=this._cacheIndex=null;this.loop=2201;this._loopCount=-1;this._startTime=null;this.time=0;this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1;this.repetitions=Infinity;this.paused=!1;this.enabled=!0;this.clampWhenFinished=!1;this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}function we(a){this._root=a;this._initMemoryManager();this.time=this._accuIndex=0;this.timeScale=1}function Rd(a,b){\"string\"===typeof a&&(console.warn(\"THREE.Uniform: Type parameter is no longer needed.\"),\na=b);this.value=a}function xe(){D.call(this);this.type=\"InstancedBufferGeometry\";this.maxInstancedCount=void 0}function ye(a,b,c){rb.call(this,a,b);this.meshPerAttribute=c||1}function ze(a,b,c,d){\"number\"===typeof c&&(d=c,c=!1,console.error(\"THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.\"));E.call(this,a,b,c);this.meshPerAttribute=d||1}function Bf(a,b,c,d){this.ray=new qb(a,b);this.near=c||0;this.far=d||Infinity;this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},\nSprite:{}};Object.defineProperties(this.params,{PointCloud:{get:function(){console.warn(\"THREE.Raycaster: params.PointCloud has been renamed to params.Points.\");return this.Points}}})}function Cf(a,b){return a.distance-b.distance}function Ae(a,b,c,d){if(!1!==a.visible&&(a.raycast(b,c),!0===d)){a=a.children;d=0;for(var e=a.length;d<e;d++)Ae(a[d],b,c,!0)}}function Df(a,b,c){this.radius=void 0!==a?a:1;this.phi=void 0!==b?b:0;this.theta=void 0!==c?c:0;return this}function Ef(a,b,c){this.radius=void 0!==\na?a:1;this.theta=void 0!==b?b:0;this.y=void 0!==c?c:0;return this}function Be(a,b){this.min=void 0!==a?a:new z(Infinity,Infinity);this.max=void 0!==b?b:new z(-Infinity,-Infinity)}function Ce(a,b){this.start=void 0!==a?a:new n;this.end=void 0!==b?b:new n}function ld(a){C.call(this);this.material=a;this.render=function(){}}function md(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;a=void 0!==c?c:16711680;d=void 0!==d?d:1;b=0;(c=this.object.geometry)&&c.isGeometry?b=3*c.faces.length:c&&c.isBufferGeometry&&\n(b=c.attributes.normal.count);c=new D;b=new B(6*b,3);c.addAttribute(\"position\",b);S.call(this,c,new T({color:a,linewidth:d}));this.matrixAutoUpdate=!1;this.update()}function mc(a,b){C.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=b;a=new D;b=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var c=0,d=1;32>c;c++,d++){var e=c/32*Math.PI*2,f=d/32*Math.PI*2;b.push(Math.cos(e),Math.sin(e),1,Math.cos(f),Math.sin(f),\n1)}a.addAttribute(\"position\",new B(b,3));b=new T({fog:!1});this.cone=new S(a,b);this.add(this.cone);this.update()}function Ff(a){var b=[];a&&a.isBone&&b.push(a);for(var c=0;c<a.children.length;c++)b.push.apply(b,Ff(a.children[c]));return b}function nc(a){for(var b=Ff(a),c=new D,d=[],e=[],f=new J(0,0,1),g=new J(0,1,0),h=0;h<b.length;h++){var k=b[h];k.parent&&k.parent.isBone&&(d.push(0,0,0),d.push(0,0,0),e.push(f.r,f.g,f.b),e.push(g.r,g.g,g.b))}c.addAttribute(\"position\",new B(d,3));c.addAttribute(\"color\",\nnew B(e,3));d=new T({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0});S.call(this,c,d);this.root=a;this.bones=b;this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1}function oc(a,b,c){this.light=a;this.light.updateMatrixWorld();this.color=c;a=new vb(b,4,2);b=new Da({wireframe:!0,fog:!1});pa.call(this,a,b);this.matrix=this.light.matrixWorld;this.matrixAutoUpdate=!1;this.update()}function pc(a,b){C.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=\n!1;this.color=b;a=new T({fog:!1});b=new D;b.addAttribute(\"position\",new E(new Float32Array(15),3));this.line=new ma(b,a);this.add(this.line);this.update()}function qc(a,b,c){C.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=c;a=new sb(b);a.rotateY(.5*Math.PI);this.material=new Da({wireframe:!0,fog:!1});void 0===this.color&&(this.material.vertexColors=2);b=a.getAttribute(\"position\");b=new Float32Array(3*b.count);a.addAttribute(\"color\",\nnew E(b,3));this.add(new pa(a,this.material));this.update()}function nd(a,b,c,d){a=a||10;b=b||10;c=new J(void 0!==c?c:4473924);d=new J(void 0!==d?d:8947848);var e=b/2,f=a/b,g=a/2;a=[];for(var h=[],k=0,m=0,q=-g;k<=b;k++,q+=f){a.push(-g,0,q,g,0,q);a.push(q,0,-g,q,0,g);var l=k===e?c:d;l.toArray(h,m);m+=3;l.toArray(h,m);m+=3;l.toArray(h,m);m+=3;l.toArray(h,m);m+=3}b=new D;b.addAttribute(\"position\",new B(a,3));b.addAttribute(\"color\",new B(h,3));c=new T({vertexColors:2});S.call(this,b,c)}function Sd(a,\nb,c,d,e,f){a=a||10;b=b||16;c=c||8;d=d||64;e=new J(void 0!==e?e:4473924);f=new J(void 0!==f?f:8947848);var g=[],h=[],k;for(k=0;k<=b;k++){var m=k/b*2*Math.PI;var q=Math.sin(m)*a;m=Math.cos(m)*a;g.push(0,0,0);g.push(q,0,m);var l=k&1?e:f;h.push(l.r,l.g,l.b);h.push(l.r,l.g,l.b)}for(k=0;k<=c;k++){l=k&1?e:f;var r=a-a/c*k;for(b=0;b<d;b++)m=b/d*2*Math.PI,q=Math.sin(m)*r,m=Math.cos(m)*r,g.push(q,0,m),h.push(l.r,l.g,l.b),m=(b+1)/d*2*Math.PI,q=Math.sin(m)*r,m=Math.cos(m)*r,g.push(q,0,m),h.push(l.r,l.g,l.b)}a=\nnew D;a.addAttribute(\"position\",new B(g,3));a.addAttribute(\"color\",new B(h,3));g=new T({vertexColors:2});S.call(this,a,g)}function od(a,b,c,d){this.object=a;this.size=void 0!==b?b:1;a=void 0!==c?c:16776960;d=void 0!==d?d:1;b=0;(c=this.object.geometry)&&c.isGeometry?b=c.faces.length:console.warn(\"THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.\");c=new D;b=new B(6*b,3);c.addAttribute(\"position\",b);S.call(this,c,new T({color:a,linewidth:d}));this.matrixAutoUpdate=\n!1;this.update()}function rc(a,b,c){C.call(this);this.light=a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=c;void 0===b&&(b=1);a=new D;a.addAttribute(\"position\",new B([-b,b,0,b,b,0,b,-b,0,-b,-b,0,-b,b,0],3));b=new T({fog:!1});this.lightPlane=new ma(a,b);this.add(this.lightPlane);a=new D;a.addAttribute(\"position\",new B([0,0,0,0,0,1],3));this.targetLine=new ma(a,b);this.add(this.targetLine);this.update()}function pd(a){function b(a,b,d){c(a,d);c(b,d)}\nfunction c(a,b){f.push(0,0,0);g.push(b.r,b.g,b.b);void 0===h[a]&&(h[a]=[]);h[a].push(f.length/3-1)}var d=new D,e=new T({color:16777215,vertexColors:1}),f=[],g=[],h={},k=new J(16755200),m=new J(16711680),q=new J(43775),l=new J(16777215),r=new J(3355443);b(\"n1\",\"n2\",k);b(\"n2\",\"n4\",k);b(\"n4\",\"n3\",k);b(\"n3\",\"n1\",k);b(\"f1\",\"f2\",k);b(\"f2\",\"f4\",k);b(\"f4\",\"f3\",k);b(\"f3\",\"f1\",k);b(\"n1\",\"f1\",k);b(\"n2\",\"f2\",k);b(\"n3\",\"f3\",k);b(\"n4\",\"f4\",k);b(\"p\",\"n1\",m);b(\"p\",\"n2\",m);b(\"p\",\"n3\",m);b(\"p\",\"n4\",m);b(\"u1\",\"u2\",\nq);b(\"u2\",\"u3\",q);b(\"u3\",\"u1\",q);b(\"c\",\"t\",l);b(\"p\",\"c\",r);b(\"cn1\",\"cn2\",r);b(\"cn3\",\"cn4\",r);b(\"cf1\",\"cf2\",r);b(\"cf3\",\"cf4\",r);d.addAttribute(\"position\",new B(f,3));d.addAttribute(\"color\",new B(g,3));S.call(this,d,e);this.camera=a;this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.pointMap=h;this.update()}function ab(a,b){this.object=a;void 0===b&&(b=16776960);a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,\n6,3,7]);var c=new Float32Array(24),d=new D;d.setIndex(new E(a,1));d.addAttribute(\"position\",new E(c,3));S.call(this,d,new T({color:b}));this.matrixAutoUpdate=!1;this.update()}function qd(a,b){this.type=\"Box3Helper\";this.box=a;a=void 0!==b?b:16776960;b=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var c=new D;c.setIndex(new E(b,1));c.addAttribute(\"position\",new B([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3));S.call(this,c,new T({color:a}));this.geometry.computeBoundingSphere()}\nfunction rd(a,b,c){this.type=\"PlaneHelper\";this.plane=a;this.size=void 0===b?1:b;a=void 0!==c?c:16776960;b=new D;b.addAttribute(\"position\",new B([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3));b.computeBoundingSphere();ma.call(this,b,new T({color:a}));b=new D;b.addAttribute(\"position\",new B([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3));b.computeBoundingSphere();this.add(new pa(b,new Da({color:a,opacity:.2,transparent:!0,depthWrite:!1})))}function bb(a,b,c,d,e,f){C.call(this);\nvoid 0===a&&(a=new THREE.Vector3(0,0,1));void 0===b&&(b=new THREE.Vector3(0,0,0));void 0===c&&(c=1);void 0===d&&(d=16776960);void 0===e&&(e=.2*c);void 0===f&&(f=.2*e);void 0===Td&&(Td=new D,Td.addAttribute(\"position\",new B([0,0,0,0,1,0],3)),De=new Za(0,.5,1,5,1),De.translate(0,-.5,0));this.position.copy(b);this.line=new ma(Td,new T({color:d}));this.line.matrixAutoUpdate=!1;this.add(this.line);this.cone=new pa(De,new Da({color:d}));this.cone.matrixAutoUpdate=!1;this.add(this.cone);this.setDirection(a);\nthis.setLength(c,e,f)}function sd(a){a=a||1;var b=[0,0,0,a,0,0,0,0,0,0,a,0,0,0,0,0,0,a];a=new D;a.addAttribute(\"position\",new B(b,3));a.addAttribute(\"color\",new B([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));b=new T({vertexColors:2});S.call(this,a,b)}function Gf(a){console.warn(\"THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.\");ta.call(this,a);this.type=\"catmullrom\";this.closed=!0}function Hf(a){console.warn(\"THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.\");\nta.call(this,a);this.type=\"catmullrom\"}function Ee(a){console.warn(\"THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.\");ta.call(this,a);this.type=\"catmullrom\"}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52));void 0===Number.isInteger&&(Number.isInteger=function(a){return\"number\"===typeof a&&isFinite(a)&&Math.floor(a)===a});void 0===Math.sign&&(Math.sign=function(a){return 0>a?-1:0<a?1:+a});!1===\"name\"in Function.prototype&&Object.defineProperty(Function.prototype,\"name\",\n{get:function(){return this.toString().match(/^\\s*function\\s*([^\\(\\s]*)/)[1]}});void 0===Object.assign&&function(){Object.assign=function(a){if(void 0===a||null===a)throw new TypeError(\"Cannot convert undefined or null to object\");for(var b=Object(a),c=1;c<arguments.length;c++){var d=arguments[c];if(void 0!==d&&null!==d)for(var e in d)Object.prototype.hasOwnProperty.call(d,e)&&(b[e]=d[e])}return b}}();Object.assign(ja.prototype,{addEventListener:function(a,b){void 0===this._listeners&&(this._listeners=\n{});var c=this._listeners;void 0===c[a]&&(c[a]=[]);-1===c[a].indexOf(b)&&c[a].push(b)},hasEventListener:function(a,b){if(void 0===this._listeners)return!1;var c=this._listeners;return void 0!==c[a]&&-1!==c[a].indexOf(b)},removeEventListener:function(a,b){void 0!==this._listeners&&(a=this._listeners[a],void 0!==a&&(b=a.indexOf(b),-1!==b&&a.splice(b,1)))},dispatchEvent:function(a){if(void 0!==this._listeners){var b=this._listeners[a.type];if(void 0!==b){a.target=this;b=b.slice(0);for(var c=0,d=b.length;c<\nd;c++)b[c].call(this,a)}}}});var R={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var a=[],b=0;256>b;b++)a[b]=(16>b?\"0\":\"\")+b.toString(16);return function(){var b=4294967295*Math.random()|0,d=4294967295*Math.random()|0,e=4294967295*Math.random()|0,f=4294967295*Math.random()|0;return(a[b&255]+a[b>>8&255]+a[b>>16&255]+a[b>>24&255]+\"-\"+a[d&255]+a[d>>8&255]+\"-\"+a[d>>16&15|64]+a[d>>24&255]+\"-\"+a[e&63|128]+a[e>>8&255]+\"-\"+a[e>>16&255]+a[e>>24&255]+a[f&255]+a[f>>8&255]+a[f>>16&255]+\na[f>>24&255]).toUpperCase()}}(),clamp:function(a,b,c){return Math.max(b,Math.min(c,a))},euclideanModulo:function(a,b){return(a%b+b)%b},mapLinear:function(a,b,c,d,e){return d+(a-b)*(e-d)/(c-b)},lerp:function(a,b,c){return(1-c)*a+c*b},smoothstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*(3-2*a)},smootherstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*a*(a*(6*a-15)+10)},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},\nrandFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*(.5-Math.random())},degToRad:function(a){return a*R.DEG2RAD},radToDeg:function(a){return a*R.RAD2DEG},isPowerOfTwo:function(a){return 0===(a&a-1)&&0!==a},ceilPowerOfTwo:function(a){return Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))},floorPowerOfTwo:function(a){return Math.pow(2,Math.floor(Math.log(a)/Math.LN2))}};Object.defineProperties(z.prototype,{width:{get:function(){return this.x},set:function(a){this.x=\na}},height:{get:function(){return this.y},set:function(a){this.y=a}}});Object.assign(z.prototype,{isVector2:!0,set:function(a,b){this.x=a;this.y=b;return this},setScalar:function(a){this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw Error(\"index is out of range: \"+a);}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;\ndefault:throw Error(\"index is out of range: \"+a);}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,b){if(void 0!==b)return console.warn(\"THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.\"),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;return this},addScalar:function(a){this.x+=a;this.y+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},addScaledVector:function(a,\nb){this.x+=a.x*b;this.y+=a.y*b;return this},sub:function(a,b){if(void 0!==b)return console.warn(\"THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.\"),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;return this},subScalar:function(a){this.x-=a;this.y-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiply:function(a){this.x*=a.x;this.y*=a.y;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;return this},divide:function(a){this.x/=\na.x;this.y/=a.y;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},applyMatrix3:function(a){var b=this.x,c=this.y;a=a.elements;this.x=a[0]*b+a[3]*c+a[6];this.y=a[1]*b+a[4]*c+a[7];return this},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));return this},clampScalar:function(){var a=\nnew z,b=new z;return function(c,d){a.set(c,c);b.set(d,d);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(b,c)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):\nMath.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(a){return this.x*a.x+this.y*a.y},cross:function(a){return this.x*a.y-this.y*a.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var a=\nMath.atan2(this.y,this.x);0>a&&(a+=2*Math.PI);return a},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x;a=this.y-a.y;return b*b+a*a},manhattanDistanceTo:function(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)},setLength:function(a){return this.normalize().multiplyScalar(a)},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},\nequals:function(a){return a.x===this.x&&a.y===this.y},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;return a},fromBufferAttribute:function(a,b,c){void 0!==c&&console.warn(\"THREE.Vector2: offset has been removed from .fromBufferAttribute().\");this.x=a.getX(b);this.y=a.getY(b);return this},rotateAround:function(a,b){var c=Math.cos(b);b=Math.sin(b);var d=this.x-a.x,e=this.y-a.y;this.x=\nd*c-e*b+a.x;this.y=d*b+e*c+a.y;return this}});Object.assign(O.prototype,{isMatrix4:!0,set:function(a,b,c,d,e,f,g,h,k,m,l,p,r,n,t,v){var q=this.elements;q[0]=a;q[4]=b;q[8]=c;q[12]=d;q[1]=e;q[5]=f;q[9]=g;q[13]=h;q[2]=k;q[6]=m;q[10]=l;q[14]=p;q[3]=r;q[7]=n;q[11]=t;q[15]=v;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},clone:function(){return(new O).fromArray(this.elements)},copy:function(a){var b=this.elements;a=a.elements;b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];\nb[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return this},copyPosition:function(a){var b=this.elements;a=a.elements;b[12]=a[12];b[13]=a[13];b[14]=a[14];return this},extractBasis:function(a,b,c){a.setFromMatrixColumn(this,0);b.setFromMatrixColumn(this,1);c.setFromMatrixColumn(this,2);return this},makeBasis:function(a,b,c){this.set(a.x,b.x,c.x,0,a.y,b.y,c.y,0,a.z,b.z,c.z,0,0,0,0,1);return this},extractRotation:function(){var a=\nnew n;return function(b){var c=this.elements,d=b.elements,e=1/a.setFromMatrixColumn(b,0).length(),f=1/a.setFromMatrixColumn(b,1).length();b=1/a.setFromMatrixColumn(b,2).length();c[0]=d[0]*e;c[1]=d[1]*e;c[2]=d[2]*e;c[3]=0;c[4]=d[4]*f;c[5]=d[5]*f;c[6]=d[6]*f;c[7]=0;c[8]=d[8]*b;c[9]=d[9]*b;c[10]=d[10]*b;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return this}}(),makeRotationFromEuler:function(a){a&&a.isEuler||console.error(\"THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.\");\nvar b=this.elements,c=a.x,d=a.y,e=a.z,f=Math.cos(c);c=Math.sin(c);var g=Math.cos(d);d=Math.sin(d);var h=Math.cos(e);e=Math.sin(e);if(\"XYZ\"===a.order){a=f*h;var k=f*e,m=c*h,q=c*e;b[0]=g*h;b[4]=-g*e;b[8]=d;b[1]=k+m*d;b[5]=a-q*d;b[9]=-c*g;b[2]=q-a*d;b[6]=m+k*d;b[10]=f*g}else\"YXZ\"===a.order?(a=g*h,k=g*e,m=d*h,q=d*e,b[0]=a+q*c,b[4]=m*c-k,b[8]=f*d,b[1]=f*e,b[5]=f*h,b[9]=-c,b[2]=k*c-m,b[6]=q+a*c,b[10]=f*g):\"ZXY\"===a.order?(a=g*h,k=g*e,m=d*h,q=d*e,b[0]=a-q*c,b[4]=-f*e,b[8]=m+k*c,b[1]=k+m*c,b[5]=f*h,b[9]=\nq-a*c,b[2]=-f*d,b[6]=c,b[10]=f*g):\"ZYX\"===a.order?(a=f*h,k=f*e,m=c*h,q=c*e,b[0]=g*h,b[4]=m*d-k,b[8]=a*d+q,b[1]=g*e,b[5]=q*d+a,b[9]=k*d-m,b[2]=-d,b[6]=c*g,b[10]=f*g):\"YZX\"===a.order?(a=f*g,k=f*d,m=c*g,q=c*d,b[0]=g*h,b[4]=q-a*e,b[8]=m*e+k,b[1]=e,b[5]=f*h,b[9]=-c*h,b[2]=-d*h,b[6]=k*e+m,b[10]=a-q*e):\"XZY\"===a.order&&(a=f*g,k=f*d,m=c*g,q=c*d,b[0]=g*h,b[4]=-e,b[8]=d*h,b[1]=a*e+q,b[5]=f*h,b[9]=k*e-m,b[2]=m*e-k,b[6]=c*h,b[10]=q*e+a);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},makeRotationFromQuaternion:function(){var a=\nnew n(0,0,0),b=new n(1,1,1);return function(c){return this.compose(a,c,b)}}(),lookAt:function(){var a=new n,b=new n,c=new n;return function(d,e,f){var g=this.elements;c.subVectors(d,e);0===c.lengthSq()&&(c.z=1);c.normalize();a.crossVectors(f,c);0===a.lengthSq()&&(1===Math.abs(f.z)?c.x+=1E-4:c.z+=1E-4,c.normalize(),a.crossVectors(f,c));a.normalize();b.crossVectors(c,a);g[0]=a.x;g[4]=b.x;g[8]=c.x;g[1]=a.y;g[5]=b.y;g[9]=c.y;g[2]=a.z;g[6]=b.z;g[10]=c.z;return this}}(),multiply:function(a,b){return void 0!==\nb?(console.warn(\"THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.\"),this.multiplyMatrices(a,b)):this.multiplyMatrices(this,a)},premultiply:function(a){return this.multiplyMatrices(a,this)},multiplyMatrices:function(a,b){var c=a.elements,d=b.elements;b=this.elements;a=c[0];var e=c[4],f=c[8],g=c[12],h=c[1],k=c[5],m=c[9],q=c[13],l=c[2],r=c[6],n=c[10],t=c[14],v=c[3],w=c[7],y=c[11];c=c[15];var u=d[0],z=d[4],G=d[8],N=d[12],B=d[1],A=d[5],D=d[9],C=d[13],E=d[2],\nF=d[6],J=d[10],L=d[14],I=d[3],K=d[7],O=d[11];d=d[15];b[0]=a*u+e*B+f*E+g*I;b[4]=a*z+e*A+f*F+g*K;b[8]=a*G+e*D+f*J+g*O;b[12]=a*N+e*C+f*L+g*d;b[1]=h*u+k*B+m*E+q*I;b[5]=h*z+k*A+m*F+q*K;b[9]=h*G+k*D+m*J+q*O;b[13]=h*N+k*C+m*L+q*d;b[2]=l*u+r*B+n*E+t*I;b[6]=l*z+r*A+n*F+t*K;b[10]=l*G+r*D+n*J+t*O;b[14]=l*N+r*C+n*L+t*d;b[3]=v*u+w*B+y*E+c*I;b[7]=v*z+w*A+y*F+c*K;b[11]=v*G+w*D+y*J+c*O;b[15]=v*N+w*C+y*L+c*d;return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=\na;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},applyToBufferAttribute:function(){var a=new n;return function(b){for(var c=0,d=b.count;c<d;c++)a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.applyMatrix4(this),b.setXYZ(c,a.x,a.y,a.z);return b}}(),determinant:function(){var a=this.elements,b=a[0],c=a[4],d=a[8],e=a[12],f=a[1],g=a[5],h=a[9],k=a[13],m=a[2],q=a[6],l=a[10],r=a[14];return a[3]*(+e*h*q-d*k*q-e*g*l+c*k*l+d*g*r-c*h*r)+a[7]*(+b*h*r-b*k*l+e*f*l-\nd*f*r+d*k*m-e*h*m)+a[11]*(+b*k*q-b*g*r-e*f*q+c*f*r+e*g*m-c*k*m)+a[15]*(-d*g*m-b*h*q+b*g*l+d*f*q-c*f*l+c*h*m)},transpose:function(){var a=this.elements;var b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b;return this},setPosition:function(a){var b=this.elements;b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},getInverse:function(a,b){var c=this.elements,d=a.elements;a=d[0];var e=d[1],f=d[2],g=d[3],h=d[4],\nk=d[5],m=d[6],q=d[7],l=d[8],r=d[9],n=d[10],t=d[11],v=d[12],w=d[13],y=d[14];d=d[15];var u=r*y*q-w*n*q+w*m*t-k*y*t-r*m*d+k*n*d,z=v*n*q-l*y*q-v*m*t+h*y*t+l*m*d-h*n*d,G=l*w*q-v*r*q+v*k*t-h*w*t-l*k*d+h*r*d,N=v*r*m-l*w*m-v*k*n+h*w*n+l*k*y-h*r*y,B=a*u+e*z+f*G+g*N;if(0===B){if(!0===b)throw Error(\"THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0\");console.warn(\"THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0\");return this.identity()}b=1/B;c[0]=u*b;c[1]=(w*n*g-r*y*g-w*f*\nt+e*y*t+r*f*d-e*n*d)*b;c[2]=(k*y*g-w*m*g+w*f*q-e*y*q-k*f*d+e*m*d)*b;c[3]=(r*m*g-k*n*g-r*f*q+e*n*q+k*f*t-e*m*t)*b;c[4]=z*b;c[5]=(l*y*g-v*n*g+v*f*t-a*y*t-l*f*d+a*n*d)*b;c[6]=(v*m*g-h*y*g-v*f*q+a*y*q+h*f*d-a*m*d)*b;c[7]=(h*n*g-l*m*g+l*f*q-a*n*q-h*f*t+a*m*t)*b;c[8]=G*b;c[9]=(v*r*g-l*w*g-v*e*t+a*w*t+l*e*d-a*r*d)*b;c[10]=(h*w*g-v*k*g+v*e*q-a*w*q-h*e*d+a*k*d)*b;c[11]=(l*k*g-h*r*g-l*e*q+a*r*q+h*e*t-a*k*t)*b;c[12]=N*b;c[13]=(l*w*f-v*r*f+v*e*n-a*w*n-l*e*y+a*r*y)*b;c[14]=(v*k*f-h*w*f-v*e*m+a*w*m+h*e*y-a*k*y)*\nb;c[15]=(h*r*f-l*k*f+l*e*m-a*r*m-h*e*n+a*k*n)*b;return this},scale:function(a){var b=this.elements,c=a.x,d=a.y;a=a.z;b[0]*=c;b[4]*=d;b[8]*=a;b[1]*=c;b[5]*=d;b[9]*=a;b[2]*=c;b[6]*=d;b[10]*=a;b[3]*=c;b[7]*=d;b[11]*=a;return this},getMaxScaleOnAxis:function(){var a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10]))},makeTranslation:function(a,b,c){this.set(1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1);return this},makeRotationX:function(a){var b=\nMath.cos(a);a=Math.sin(a);this.set(1,0,0,0,0,b,-a,0,0,a,b,0,0,0,0,1);return this},makeRotationY:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,0,a,0,0,1,0,0,-a,0,b,0,0,0,0,1);return this},makeRotationZ:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,-a,0,0,a,b,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(a,b){var c=Math.cos(b);b=Math.sin(b);var d=1-c,e=a.x,f=a.y;a=a.z;var g=d*e,h=d*f;this.set(g*e+c,g*f-b*a,g*a+b*f,0,g*f+b*a,h*f+c,h*a-b*e,0,g*a-b*f,h*a+b*e,d*a*a+c,0,0,\n0,0,1);return this},makeScale:function(a,b,c){this.set(a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1);return this},makeShear:function(a,b,c){this.set(1,b,c,0,a,1,c,0,a,b,1,0,0,0,0,1);return this},compose:function(a,b,c){var d=this.elements,e=b._x,f=b._y,g=b._z,h=b._w,k=e+e,m=f+f,l=g+g;b=e*k;var p=e*m;e*=l;var r=f*m;f*=l;g*=l;k*=h;m*=h;h*=l;l=c.x;var n=c.y;c=c.z;d[0]=(1-(r+g))*l;d[1]=(p+h)*l;d[2]=(e-m)*l;d[3]=0;d[4]=(p-h)*n;d[5]=(1-(b+g))*n;d[6]=(f+k)*n;d[7]=0;d[8]=(e+m)*c;d[9]=(f-k)*c;d[10]=(1-(b+r))*c;d[11]=0;\nd[12]=a.x;d[13]=a.y;d[14]=a.z;d[15]=1;return this},decompose:function(){var a=new n,b=new O;return function(c,d,e){var f=this.elements,g=a.set(f[0],f[1],f[2]).length(),h=a.set(f[4],f[5],f[6]).length(),k=a.set(f[8],f[9],f[10]).length();0>this.determinant()&&(g=-g);c.x=f[12];c.y=f[13];c.z=f[14];b.copy(this);c=1/g;f=1/h;var m=1/k;b.elements[0]*=c;b.elements[1]*=c;b.elements[2]*=c;b.elements[4]*=f;b.elements[5]*=f;b.elements[6]*=f;b.elements[8]*=m;b.elements[9]*=m;b.elements[10]*=m;d.setFromRotationMatrix(b);\ne.x=g;e.y=h;e.z=k;return this}}(),makePerspective:function(a,b,c,d,e,f){void 0===f&&console.warn(\"THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.\");var g=this.elements;g[0]=2*e/(b-a);g[4]=0;g[8]=(b+a)/(b-a);g[12]=0;g[1]=0;g[5]=2*e/(c-d);g[9]=(c+d)/(c-d);g[13]=0;g[2]=0;g[6]=0;g[10]=-(f+e)/(f-e);g[14]=-2*f*e/(f-e);g[3]=0;g[7]=0;g[11]=-1;g[15]=0;return this},makeOrthographic:function(a,b,c,d,e,f){var g=this.elements,h=1/(b-a),k=1/(c-d),m=1/(f-e);g[0]=\n2*h;g[4]=0;g[8]=0;g[12]=-((b+a)*h);g[1]=0;g[5]=2*k;g[9]=0;g[13]=-((c+d)*k);g[2]=0;g[6]=0;g[10]=-2*m;g[14]=-((f+e)*m);g[3]=0;g[7]=0;g[11]=0;g[15]=1;return this},equals:function(a){var b=this.elements;a=a.elements;for(var c=0;16>c;c++)if(b[c]!==a[c])return!1;return!0},fromArray:function(a,b){void 0===b&&(b=0);for(var c=0;16>c;c++)this.elements[c]=a[c+b];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];\na[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];a[b+9]=c[9];a[b+10]=c[10];a[b+11]=c[11];a[b+12]=c[12];a[b+13]=c[13];a[b+14]=c[14];a[b+15]=c[15];return a}});Object.assign(ka,{slerp:function(a,b,c,d){return c.copy(a).slerp(b,d)},slerpFlat:function(a,b,c,d,e,f,g){var h=c[d+0],k=c[d+1],m=c[d+2];c=c[d+3];d=e[f+0];var l=e[f+1],p=e[f+2];e=e[f+3];if(c!==e||h!==d||k!==l||m!==p){f=1-g;var r=h*d+k*l+m*p+c*e,n=0<=r?1:-1,t=1-r*r;t>Number.EPSILON&&(t=Math.sqrt(t),r=Math.atan2(t,r*n),f=Math.sin(f*r)/t,g=Math.sin(g*\nr)/t);n*=g;h=h*f+d*n;k=k*f+l*n;m=m*f+p*n;c=c*f+e*n;f===1-g&&(g=1/Math.sqrt(h*h+k*k+m*m+c*c),h*=g,k*=g,m*=g,c*=g)}a[b]=h;a[b+1]=k;a[b+2]=m;a[b+3]=c}});Object.defineProperties(ka.prototype,{x:{get:function(){return this._x},set:function(a){this._x=a;this.onChangeCallback()}},y:{get:function(){return this._y},set:function(a){this._y=a;this.onChangeCallback()}},z:{get:function(){return this._z},set:function(a){this._z=a;this.onChangeCallback()}},w:{get:function(){return this._w},set:function(a){this._w=\na;this.onChangeCallback()}}});Object.assign(ka.prototype,{isQuaternion:!0,set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._w=d;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(a){this._x=a.x;this._y=a.y;this._z=a.z;this._w=a.w;this.onChangeCallback();return this},setFromEuler:function(a,b){if(!a||!a.isEuler)throw Error(\"THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.\");\nvar c=a._x,d=a._y,e=a._z;a=a.order;var f=Math.cos,g=Math.sin,h=f(c/2),k=f(d/2);f=f(e/2);c=g(c/2);d=g(d/2);e=g(e/2);\"XYZ\"===a?(this._x=c*k*f+h*d*e,this._y=h*d*f-c*k*e,this._z=h*k*e+c*d*f,this._w=h*k*f-c*d*e):\"YXZ\"===a?(this._x=c*k*f+h*d*e,this._y=h*d*f-c*k*e,this._z=h*k*e-c*d*f,this._w=h*k*f+c*d*e):\"ZXY\"===a?(this._x=c*k*f-h*d*e,this._y=h*d*f+c*k*e,this._z=h*k*e+c*d*f,this._w=h*k*f-c*d*e):\"ZYX\"===a?(this._x=c*k*f-h*d*e,this._y=h*d*f+c*k*e,this._z=h*k*e-c*d*f,this._w=h*k*f+c*d*e):\"YZX\"===a?(this._x=\nc*k*f+h*d*e,this._y=h*d*f+c*k*e,this._z=h*k*e-c*d*f,this._w=h*k*f-c*d*e):\"XZY\"===a&&(this._x=c*k*f-h*d*e,this._y=h*d*f-c*k*e,this._z=h*k*e+c*d*f,this._w=h*k*f+c*d*e);if(!1!==b)this.onChangeCallback();return this},setFromAxisAngle:function(a,b){b/=2;var c=Math.sin(b);this._x=a.x*c;this._y=a.y*c;this._z=a.z*c;this._w=Math.cos(b);this.onChangeCallback();return this},setFromRotationMatrix:function(a){var b=a.elements,c=b[0];a=b[4];var d=b[8],e=b[1],f=b[5],g=b[9],h=b[2],k=b[6];b=b[10];var m=c+f+b;0<m?\n(c=.5/Math.sqrt(m+1),this._w=.25/c,this._x=(k-g)*c,this._y=(d-h)*c,this._z=(e-a)*c):c>f&&c>b?(c=2*Math.sqrt(1+c-f-b),this._w=(k-g)/c,this._x=.25*c,this._y=(a+e)/c,this._z=(d+h)/c):f>b?(c=2*Math.sqrt(1+f-c-b),this._w=(d-h)/c,this._x=(a+e)/c,this._y=.25*c,this._z=(g+k)/c):(c=2*Math.sqrt(1+b-c-f),this._w=(e-a)/c,this._x=(d+h)/c,this._y=(g+k)/c,this._z=.25*c);this.onChangeCallback();return this},setFromUnitVectors:function(){var a=new n,b;return function(c,d){void 0===a&&(a=new n);b=c.dot(d)+1;1E-6>b?\n(b=0,Math.abs(c.x)>Math.abs(c.z)?a.set(-c.y,c.x,0):a.set(0,-c.z,c.y)):a.crossVectors(c,d);this._x=a.x;this._y=a.y;this._z=a.z;this._w=b;return this.normalize()}}(),angleTo:function(a){return 2*Math.acos(Math.abs(R.clamp(this.dot(a),-1,1)))},rotateTowards:function(a,b){var c=this.angleTo(a);if(0===c)return this;this.slerp(a,Math.min(1,b/c));return this},inverse:function(){return this.conjugate()},conjugate:function(){this._x*=-1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this},dot:function(a){return this._x*\na._x+this._y*a._y+this._z*a._z+this._w*a._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();0===a?(this._z=this._y=this._x=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=a,this._w*=a);this.onChangeCallback();return this},multiply:function(a,b){return void 0!==b?(console.warn(\"THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.\"),\nthis.multiplyQuaternions(a,b)):this.multiplyQuaternions(this,a)},premultiply:function(a){return this.multiplyQuaternions(a,this)},multiplyQuaternions:function(a,b){var c=a._x,d=a._y,e=a._z;a=a._w;var f=b._x,g=b._y,h=b._z;b=b._w;this._x=c*b+a*f+d*h-e*g;this._y=d*b+a*g+e*f-c*h;this._z=e*b+a*h+c*g-d*f;this._w=a*b-c*f-d*g-e*h;this.onChangeCallback();return this},slerp:function(a,b){if(0===b)return this;if(1===b)return this.copy(a);var c=this._x,d=this._y,e=this._z,f=this._w,g=f*a._w+c*a._x+d*a._y+e*a._z;\n0>g?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,g=-g):this.copy(a);if(1<=g)return this._w=f,this._x=c,this._y=d,this._z=e,this;a=1-g*g;if(a<=Number.EPSILON)return g=1-b,this._w=g*f+b*this._w,this._x=g*c+b*this._x,this._y=g*d+b*this._y,this._z=g*e+b*this._z,this.normalize();a=Math.sqrt(a);var h=Math.atan2(a,g);g=Math.sin((1-b)*h)/a;b=Math.sin(b*h)/a;this._w=f*g+this._w*b;this._x=c*g+this._x*b;this._y=d*g+this._y*b;this._z=e*g+this._z*b;this.onChangeCallback();return this},equals:function(a){return a._x===\nthis._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},fromArray:function(a,b){void 0===b&&(b=0);this._x=a[b];this._y=a[b+1];this._z=a[b+2];this._w=a[b+3];this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._w;return a},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){}});Object.assign(n.prototype,{isVector3:!0,set:function(a,b,c){this.x=a;this.y=b;this.z=c;return this},\nsetScalar:function(a){this.z=this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error(\"index is out of range: \"+a);}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error(\"index is out of range: \"+a);}},clone:function(){return new this.constructor(this.x,\nthis.y,this.z)},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){if(void 0!==b)return console.warn(\"THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.\"),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=\na.z*b;return this},sub:function(a,b){if(void 0!==b)return console.warn(\"THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.\"),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},subScalar:function(a){this.x-=a;this.y-=a;this.z-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},multiply:function(a,b){if(void 0!==b)return console.warn(\"THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.\"),\nthis.multiplyVectors(a,b);this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;return this},multiplyVectors:function(a,b){this.x=a.x*b.x;this.y=a.y*b.y;this.z=a.z*b.z;return this},applyEuler:function(){var a=new ka;return function(b){b&&b.isEuler||console.error(\"THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.\");return this.applyQuaternion(a.setFromEuler(b))}}(),applyAxisAngle:function(){var a=new ka;return function(b,\nc){return this.applyQuaternion(a.setFromAxisAngle(b,c))}}(),applyMatrix3:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[3]*c+a[6]*d;this.y=a[1]*b+a[4]*c+a[7]*d;this.z=a[2]*b+a[5]*c+a[8]*d;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;var e=1/(a[3]*b+a[7]*c+a[11]*d+a[15]);this.x=(a[0]*b+a[4]*c+a[8]*d+a[12])*e;this.y=(a[1]*b+a[5]*c+a[9]*d+a[13])*e;this.z=(a[2]*b+a[6]*c+a[10]*d+a[14])*e;return this},applyQuaternion:function(a){var b=this.x,\nc=this.y,d=this.z,e=a.x,f=a.y,g=a.z;a=a.w;var h=a*b+f*d-g*c,k=a*c+g*b-e*d,m=a*d+e*c-f*b;b=-e*b-f*c-g*d;this.x=h*a+b*-e+k*-g-m*-f;this.y=k*a+b*-f+m*-e-h*-g;this.z=m*a+b*-g+h*-f-k*-e;return this},project:function(a){return this.applyMatrix4(a.matrixWorldInverse).applyMatrix4(a.projectionMatrix)},unproject:function(){var a=new O;return function(b){return this.applyMatrix4(a.getInverse(b.projectionMatrix)).applyMatrix4(b.matrixWorld)}}(),transformDirection:function(a){var b=this.x,c=this.y,d=this.z;a=\na.elements;this.x=a[0]*b+a[4]*c+a[8]*d;this.y=a[1]*b+a[5]*c+a[9]*d;this.z=a[2]*b+a[6]*c+a[10]*d;return this.normalize()},divide:function(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);return this},clamp:function(a,b){this.x=Math.max(a.x,\nMath.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));return this},clampScalar:function(){var a=new n,b=new n;return function(c,d){a.set(c,c,c);b.set(d,d,d);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(b,c)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);\nthis.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*\nthis.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(a){return this.normalize().multiplyScalar(a)},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},\ncross:function(a,b){return void 0!==b?(console.warn(\"THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.\"),this.crossVectors(a,b)):this.crossVectors(this,a)},crossVectors:function(a,b){var c=a.x,d=a.y;a=a.z;var e=b.x,f=b.y;b=b.z;this.x=d*b-a*f;this.y=a*e-c*b;this.z=c*f-d*e;return this},projectOnVector:function(a){var b=a.dot(this)/a.lengthSq();return this.copy(a).multiplyScalar(b)},projectOnPlane:function(){var a=new n;return function(b){a.copy(this).projectOnVector(b);\nreturn this.sub(a)}}(),reflect:function(){var a=new n;return function(b){return this.sub(a.copy(b).multiplyScalar(2*this.dot(b)))}}(),angleTo:function(a){a=this.dot(a)/Math.sqrt(this.lengthSq()*a.lengthSq());return Math.acos(R.clamp(a,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,c=this.y-a.y;a=this.z-a.z;return b*b+c*c+a*a},manhattanDistanceTo:function(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)+Math.abs(this.z-\na.z)},setFromSpherical:function(a){return this.setFromSphericalCoords(a.radius,a.phi,a.theta)},setFromSphericalCoords:function(a,b,c){var d=Math.sin(b)*a;this.x=d*Math.sin(c);this.y=Math.cos(b)*a;this.z=d*Math.cos(c);return this},setFromCylindrical:function(a){return this.setFromCylindricalCoords(a.radius,a.theta,a.y)},setFromCylindricalCoords:function(a,b,c){this.x=a*Math.sin(b);this.y=c;this.z=a*Math.cos(b);return this},setFromMatrixPosition:function(a){a=a.elements;this.x=a[12];this.y=a[13];this.z=\na[14];return this},setFromMatrixScale:function(a){var b=this.setFromMatrixColumn(a,0).length(),c=this.setFromMatrixColumn(a,1).length();a=this.setFromMatrixColumn(a,2).length();this.x=b;this.y=c;this.z=a;return this},setFromMatrixColumn:function(a,b){return this.fromArray(a.elements,4*b)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===\nb&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;return a},fromBufferAttribute:function(a,b,c){void 0!==c&&console.warn(\"THREE.Vector3: offset has been removed from .fromBufferAttribute().\");this.x=a.getX(b);this.y=a.getY(b);this.z=a.getZ(b);return this}});Object.assign(da.prototype,{isMatrix3:!0,set:function(a,b,c,d,e,f,g,h,k){var m=this.elements;m[0]=a;m[1]=d;m[2]=g;m[3]=b;m[4]=e;m[5]=h;m[6]=c;m[7]=f;m[8]=k;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},clone:function(){return(new this.constructor).fromArray(this.elements)},\ncopy:function(a){var b=this.elements;a=a.elements;b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return this},setFromMatrix4:function(a){a=a.elements;this.set(a[0],a[4],a[8],a[1],a[5],a[9],a[2],a[6],a[10]);return this},applyToBufferAttribute:function(){var a=new n;return function(b){for(var c=0,d=b.count;c<d;c++)a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.applyMatrix3(this),b.setXYZ(c,a.x,a.y,a.z);return b}}(),multiply:function(a){return this.multiplyMatrices(this,\na)},premultiply:function(a){return this.multiplyMatrices(a,this)},multiplyMatrices:function(a,b){var c=a.elements,d=b.elements;b=this.elements;a=c[0];var e=c[3],f=c[6],g=c[1],h=c[4],k=c[7],m=c[2],l=c[5];c=c[8];var p=d[0],r=d[3],n=d[6],t=d[1],v=d[4],w=d[7],y=d[2],u=d[5];d=d[8];b[0]=a*p+e*t+f*y;b[3]=a*r+e*v+f*u;b[6]=a*n+e*w+f*d;b[1]=g*p+h*t+k*y;b[4]=g*r+h*v+k*u;b[7]=g*n+h*w+k*d;b[2]=m*p+l*t+c*y;b[5]=m*r+l*v+c*u;b[8]=m*n+l*w+c*d;return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[3]*=\na;b[6]*=a;b[1]*=a;b[4]*=a;b[7]*=a;b[2]*=a;b[5]*=a;b[8]*=a;return this},determinant:function(){var a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],k=a[7];a=a[8];return b*f*a-b*g*k-c*e*a+c*g*h+d*e*k-d*f*h},getInverse:function(a,b){a&&a.isMatrix4&&console.error(\"THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.\");var c=a.elements;a=this.elements;var d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],k=c[5],m=c[6],l=c[7];c=c[8];var p=c*h-k*l,r=k*m-c*g,n=l*g-h*m,t=d*p+e*r+f*n;if(0===t){if(!0===\nb)throw Error(\"THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0\");console.warn(\"THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0\");return this.identity()}b=1/t;a[0]=p*b;a[1]=(f*l-c*e)*b;a[2]=(k*e-f*h)*b;a[3]=r*b;a[4]=(c*d-f*m)*b;a[5]=(f*g-k*d)*b;a[6]=n*b;a[7]=(e*m-l*d)*b;a[8]=(h*d-e*g)*b;return this},transpose:function(){var a=this.elements;var b=a[1];a[1]=a[3];a[3]=b;b=a[2];a[2]=a[6];a[6]=b;b=a[5];a[5]=a[7];a[7]=b;return this},getNormalMatrix:function(a){return this.setFromMatrix4(a).getInverse(this).transpose()},\ntransposeIntoArray:function(a){var b=this.elements;a[0]=b[0];a[1]=b[3];a[2]=b[6];a[3]=b[1];a[4]=b[4];a[5]=b[7];a[6]=b[2];a[7]=b[5];a[8]=b[8];return this},setUvTransform:function(a,b,c,d,e,f,g){var h=Math.cos(e);e=Math.sin(e);this.set(c*h,c*e,-c*(h*f+e*g)+f+a,-d*e,d*h,-d*(-e*f+h*g)+g+b,0,0,1)},scale:function(a,b){var c=this.elements;c[0]*=a;c[3]*=a;c[6]*=a;c[1]*=b;c[4]*=b;c[7]*=b;return this},rotate:function(a){var b=Math.cos(a);a=Math.sin(a);var c=this.elements,d=c[0],e=c[3],f=c[6],g=c[1],h=c[4],\nk=c[7];c[0]=b*d+a*g;c[3]=b*e+a*h;c[6]=b*f+a*k;c[1]=-a*d+b*g;c[4]=-a*e+b*h;c[7]=-a*f+b*k;return this},translate:function(a,b){var c=this.elements;c[0]+=a*c[2];c[3]+=a*c[5];c[6]+=a*c[8];c[1]+=b*c[2];c[4]+=b*c[5];c[7]+=b*c[8];return this},equals:function(a){var b=this.elements;a=a.elements;for(var c=0;9>c;c++)if(b[c]!==a[c])return!1;return!0},fromArray:function(a,b){void 0===b&&(b=0);for(var c=0;9>c;c++)this.elements[c]=a[c+b];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);var c=\nthis.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];return a}});var sc,ib={getDataURL:function(a){if(\"undefined\"==typeof HTMLCanvasElement)return a.src;if(!(a instanceof HTMLCanvasElement)){void 0===sc&&(sc=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"canvas\"));sc.width=a.width;sc.height=a.height;var b=sc.getContext(\"2d\");a instanceof ImageData?b.putImageData(a,0,0):b.drawImage(a,0,0,a.width,a.height);a=sc}return 2048<\na.width||2048<a.height?a.toDataURL(\"image/jpeg\",.6):a.toDataURL(\"image/png\")}},Mf=0;X.DEFAULT_IMAGE=void 0;X.DEFAULT_MAPPING=300;X.prototype=Object.assign(Object.create(ja.prototype),{constructor:X,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.name=a.name;this.image=a.image;this.mipmaps=a.mipmaps.slice(0);\nthis.mapping=a.mapping;this.wrapS=a.wrapS;this.wrapT=a.wrapT;this.magFilter=a.magFilter;this.minFilter=a.minFilter;this.anisotropy=a.anisotropy;this.format=a.format;this.type=a.type;this.offset.copy(a.offset);this.repeat.copy(a.repeat);this.center.copy(a.center);this.rotation=a.rotation;this.matrixAutoUpdate=a.matrixAutoUpdate;this.matrix.copy(a.matrix);this.generateMipmaps=a.generateMipmaps;this.premultiplyAlpha=a.premultiplyAlpha;this.flipY=a.flipY;this.unpackAlignment=a.unpackAlignment;this.encoding=\na.encoding;return this},toJSON:function(a){var b=void 0===a||\"string\"===typeof a;if(!b&&void 0!==a.textures[this.uuid])return a.textures[this.uuid];var c={metadata:{version:4.5,type:\"Texture\",generator:\"Texture.toJSON\"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,\nanisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var d=this.image;void 0===d.uuid&&(d.uuid=R.generateUUID());if(!b&&void 0===a.images[d.uuid]){if(Array.isArray(d)){var e=[];for(var f=0,g=d.length;f<g;f++)e.push(ib.getDataURL(d[f]))}else e=ib.getDataURL(d);a.images[d.uuid]={uuid:d.uuid,url:e}}c.image=d.uuid}b||(a.textures[this.uuid]=c);return c},dispose:function(){this.dispatchEvent({type:\"dispose\"})},transformUv:function(a){if(300!==this.mapping)return a;a.applyMatrix3(this.matrix);\nif(0>a.x||1<a.x)switch(this.wrapS){case 1E3:a.x-=Math.floor(a.x);break;case 1001:a.x=0>a.x?0:1;break;case 1002:a.x=1===Math.abs(Math.floor(a.x)%2)?Math.ceil(a.x)-a.x:a.x-Math.floor(a.x)}if(0>a.y||1<a.y)switch(this.wrapT){case 1E3:a.y-=Math.floor(a.y);break;case 1001:a.y=0>a.y?0:1;break;case 1002:a.y=1===Math.abs(Math.floor(a.y)%2)?Math.ceil(a.y)-a.y:a.y-Math.floor(a.y)}this.flipY&&(a.y=1-a.y);return a}});Object.defineProperty(X.prototype,\"needsUpdate\",{set:function(a){!0===a&&this.version++}});Object.assign(ca.prototype,\n{isVector4:!0,set:function(a,b,c,d){this.x=a;this.y=b;this.z=c;this.w=d;return this},setScalar:function(a){this.w=this.z=this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setW:function(a){this.w=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=b;break;default:throw Error(\"index is out of range: \"+a);}return this},getComponent:function(a){switch(a){case 0:return this.x;\ncase 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error(\"index is out of range: \"+a);}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=void 0!==a.w?a.w:1;return this},add:function(a,b){if(void 0!==b)return console.warn(\"THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.\"),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this},\naddScalar:function(a){this.x+=a;this.y+=a;this.z+=a;this.w+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;this.w+=a.w*b;return this},sub:function(a,b){if(void 0!==b)return console.warn(\"THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.\"),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this},subScalar:function(a){this.x-=\na;this.y-=a;this.z-=a;this.w-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;this.w*=a;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z,e=this.w;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12]*e;this.y=a[1]*b+a[5]*c+a[9]*d+a[13]*e;this.z=a[2]*b+a[6]*c+a[10]*d+a[14]*e;this.w=a[3]*b+a[7]*c+a[11]*d+a[15]*e;return this},divideScalar:function(a){return this.multiplyScalar(1/\na)},setAxisAngleFromQuaternion:function(a){this.w=2*Math.acos(a.w);var b=Math.sqrt(1-a.w*a.w);1E-4>b?(this.x=1,this.z=this.y=0):(this.x=a.x/b,this.y=a.y/b,this.z=a.z/b);return this},setAxisAngleFromRotationMatrix:function(a){a=a.elements;var b=a[0];var c=a[4];var d=a[8],e=a[1],f=a[5],g=a[9];var h=a[2];var k=a[6];var m=a[10];if(.01>Math.abs(c-e)&&.01>Math.abs(d-h)&&.01>Math.abs(g-k)){if(.1>Math.abs(c+e)&&.1>Math.abs(d+h)&&.1>Math.abs(g+k)&&.1>Math.abs(b+f+m-3))return this.set(1,0,0,0),this;a=Math.PI;\nb=(b+1)/2;f=(f+1)/2;m=(m+1)/2;c=(c+e)/4;d=(d+h)/4;g=(g+k)/4;b>f&&b>m?.01>b?(k=0,c=h=.707106781):(k=Math.sqrt(b),h=c/k,c=d/k):f>m?.01>f?(k=.707106781,h=0,c=.707106781):(h=Math.sqrt(f),k=c/h,c=g/h):.01>m?(h=k=.707106781,c=0):(c=Math.sqrt(m),k=d/c,h=g/c);this.set(k,h,c,a);return this}a=Math.sqrt((k-g)*(k-g)+(d-h)*(d-h)+(e-c)*(e-c));.001>Math.abs(a)&&(a=1);this.x=(k-g)/a;this.y=(d-h)/a;this.z=(e-c)/a;this.w=Math.acos((b+f+m-1)/2);return this},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,\na.y);this.z=Math.min(this.z,a.z);this.w=Math.min(this.w,a.w);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);this.w=Math.max(this.w,a.w);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));this.w=Math.max(a.w,Math.min(b.w,this.w));return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new ca,b=new ca);a.set(c,\nc,c,c);b.set(d,d,d,d);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(b,c)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);\nthis.z=Math.round(this.z);this.w=Math.round(this.w);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.x*\nthis.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(a){return this.normalize().multiplyScalar(a)},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;this.w+=(a.w-this.w)*b;return this},lerpVectors:function(a,\nb,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];this.w=a[b+3];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;a[b+3]=this.w;return a},fromBufferAttribute:function(a,b,c){void 0!==c&&console.warn(\"THREE.Vector4: offset has been removed from .fromBufferAttribute().\");\nthis.x=a.getX(b);this.y=a.getY(b);this.z=a.getZ(b);this.w=a.getW(b);return this}});jb.prototype=Object.assign(Object.create(ja.prototype),{constructor:jb,isWebGLRenderTarget:!0,setSize:function(a,b){if(this.width!==a||this.height!==b)this.width=a,this.height=b,this.dispose();this.viewport.set(0,0,a,b);this.scissor.set(0,0,a,b)},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.width=a.width;this.height=a.height;this.viewport.copy(a.viewport);this.texture=a.texture.clone();\nthis.depthBuffer=a.depthBuffer;this.stencilBuffer=a.stencilBuffer;this.depthTexture=a.depthTexture;return this},dispose:function(){this.dispatchEvent({type:\"dispose\"})}});Ib.prototype=Object.create(jb.prototype);Ib.prototype.constructor=Ib;Ib.prototype.isWebGLRenderTargetCube=!0;kb.prototype=Object.create(X.prototype);kb.prototype.constructor=kb;kb.prototype.isDataTexture=!0;Object.assign(Wa.prototype,{isBox3:!0,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromArray:function(a){for(var b=\nInfinity,c=Infinity,d=Infinity,e=-Infinity,f=-Infinity,g=-Infinity,h=0,k=a.length;h<k;h+=3){var m=a[h],l=a[h+1],p=a[h+2];m<b&&(b=m);l<c&&(c=l);p<d&&(d=p);m>e&&(e=m);l>f&&(f=l);p>g&&(g=p)}this.min.set(b,c,d);this.max.set(e,f,g);return this},setFromBufferAttribute:function(a){for(var b=Infinity,c=Infinity,d=Infinity,e=-Infinity,f=-Infinity,g=-Infinity,h=0,k=a.count;h<k;h++){var m=a.getX(h),l=a.getY(h),p=a.getZ(h);m<b&&(b=m);l<c&&(c=l);p<d&&(d=p);m>e&&(e=m);l>f&&(f=l);p>g&&(g=p)}this.min.set(b,c,d);\nthis.max.set(e,f,g);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=new n;return function(b,c){c=a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(c);this.max.copy(b).add(c);return this}}(),setFromObject:function(a){this.makeEmpty();return this.expandByObject(a)},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},\nmakeEmpty:function(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(a){void 0===a&&(console.warn(\"THREE.Box3: .getCenter() target is now required\"),a=new n);return this.isEmpty()?a.set(0,0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(a){void 0===a&&(console.warn(\"THREE.Box3: .getSize() target is now required\"),\na=new n);return this.isEmpty()?a.set(0,0,0):a.subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},expandByObject:function(){function a(a){var f=a.geometry;if(void 0!==f)if(f.isGeometry)for(f=f.vertices,c=0,d=f.length;c<d;c++)e.copy(f[c]),e.applyMatrix4(a.matrixWorld),b.expandByPoint(e);else if(f.isBufferGeometry&&\n(f=f.attributes.position,void 0!==f))for(c=0,d=f.count;c<d;c++)e.fromBufferAttribute(f,c).applyMatrix4(a.matrixWorld),b.expandByPoint(e)}var b,c,d,e=new n;return function(c){b=this;c.updateMatrixWorld(!0);c.traverse(a);return this}}(),containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&\na.max.z<=this.max.z},getParameter:function(a,b){void 0===b&&(console.warn(\"THREE.Box3: .getParameter() target is now required\"),b=new n);return b.set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z?!1:!0},intersectsSphere:function(){var a=new n;return function(b){this.clampPoint(b.center,\na);return a.distanceToSquared(b.center)<=b.radius*b.radius}}(),intersectsPlane:function(a){if(0<a.normal.x){var b=a.normal.x*this.min.x;var c=a.normal.x*this.max.x}else b=a.normal.x*this.max.x,c=a.normal.x*this.min.x;0<a.normal.y?(b+=a.normal.y*this.min.y,c+=a.normal.y*this.max.y):(b+=a.normal.y*this.max.y,c+=a.normal.y*this.min.y);0<a.normal.z?(b+=a.normal.z*this.min.z,c+=a.normal.z*this.max.z):(b+=a.normal.z*this.max.z,c+=a.normal.z*this.min.z);return b<=-a.constant&&c>=-a.constant},intersectsTriangle:function(){function a(a){var e;\nvar f=0;for(e=a.length-3;f<=e;f+=3){h.fromArray(a,f);var g=m.x*Math.abs(h.x)+m.y*Math.abs(h.y)+m.z*Math.abs(h.z),k=b.dot(h),l=c.dot(h),q=d.dot(h);if(Math.max(-Math.max(k,l,q),Math.min(k,l,q))>g)return!1}return!0}var b=new n,c=new n,d=new n,e=new n,f=new n,g=new n,h=new n,k=new n,m=new n,l=new n;return function(h){if(this.isEmpty())return!1;this.getCenter(k);m.subVectors(this.max,k);b.subVectors(h.a,k);c.subVectors(h.b,k);d.subVectors(h.c,k);e.subVectors(c,b);f.subVectors(d,c);g.subVectors(b,d);h=\n[0,-e.z,e.y,0,-f.z,f.y,0,-g.z,g.y,e.z,0,-e.x,f.z,0,-f.x,g.z,0,-g.x,-e.y,e.x,0,-f.y,f.x,0,-g.y,g.x,0];if(!a(h))return!1;h=[1,0,0,0,1,0,0,0,1];if(!a(h))return!1;l.crossVectors(e,f);h=[l.x,l.y,l.z];return a(h)}}(),clampPoint:function(a,b){void 0===b&&(console.warn(\"THREE.Box3: .clampPoint() target is now required\"),b=new n);return b.copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new n;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),getBoundingSphere:function(){var a=\nnew n;return function(b){void 0===b&&(console.warn(\"THREE.Box3: .getBoundingSphere() target is now required\"),b=new Ea);this.getCenter(b.center);b.radius=.5*this.getSize(a).length();return b}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);this.isEmpty()&&this.makeEmpty();return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},applyMatrix4:function(){var a=[new n,new n,new n,new n,new n,new n,new n,new n];return function(b){if(this.isEmpty())return this;\na[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(b);a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(b);a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(b);a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(b);a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(b);a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(b);a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(b);a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(b);this.setFromPoints(a);return this}}(),\ntranslate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}});Object.assign(Ea.prototype,{set:function(a,b){this.center.copy(a);this.radius=b;return this},setFromPoints:function(){var a=new Wa;return function(b,c){var d=this.center;void 0!==c?d.copy(c):a.setFromPoints(b).getCenter(d);for(var e=c=0,f=b.length;e<f;e++)c=Math.max(c,d.distanceToSquared(b[e]));this.radius=Math.sqrt(c);return this}}(),clone:function(){return(new this.constructor).copy(this)},\ncopy:function(a){this.center.copy(a.center);this.radius=a.radius;return this},empty:function(){return 0>=this.radius},containsPoint:function(a){return a.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(a){return a.distanceTo(this.center)-this.radius},intersectsSphere:function(a){var b=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=b*b},intersectsBox:function(a){return a.intersectsSphere(this)},intersectsPlane:function(a){return Math.abs(a.distanceToPoint(this.center))<=\nthis.radius},clampPoint:function(a,b){var c=this.center.distanceToSquared(a);void 0===b&&(console.warn(\"THREE.Sphere: .clampPoint() target is now required\"),b=new n);b.copy(a);c>this.radius*this.radius&&(b.sub(this.center).normalize(),b.multiplyScalar(this.radius).add(this.center));return b},getBoundingBox:function(a){void 0===a&&(console.warn(\"THREE.Sphere: .getBoundingBox() target is now required\"),a=new Wa);a.set(this.center,this.center);a.expandByScalar(this.radius);return a},applyMatrix4:function(a){this.center.applyMatrix4(a);\nthis.radius*=a.getMaxScaleOnAxis();return this},translate:function(a){this.center.add(a);return this},equals:function(a){return a.center.equals(this.center)&&a.radius===this.radius}});Object.assign(Pa.prototype,{set:function(a,b){this.normal.copy(a);this.constant=b;return this},setComponents:function(a,b,c,d){this.normal.set(a,b,c);this.constant=d;return this},setFromNormalAndCoplanarPoint:function(a,b){this.normal.copy(a);this.constant=-b.dot(this.normal);return this},setFromCoplanarPoints:function(){var a=\nnew n,b=new n;return function(c,d,e){d=a.subVectors(e,d).cross(b.subVectors(c,d)).normalize();this.setFromNormalAndCoplanarPoint(d,c);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.normal.copy(a.normal);this.constant=a.constant;return this},normalize:function(){var a=1/this.normal.length();this.normal.multiplyScalar(a);this.constant*=a;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(a){return this.normal.dot(a)+\nthis.constant},distanceToSphere:function(a){return this.distanceToPoint(a.center)-a.radius},projectPoint:function(a,b){void 0===b&&(console.warn(\"THREE.Plane: .projectPoint() target is now required\"),b=new n);return b.copy(this.normal).multiplyScalar(-this.distanceToPoint(a)).add(a)},intersectLine:function(){var a=new n;return function(b,c){void 0===c&&(console.warn(\"THREE.Plane: .intersectLine() target is now required\"),c=new n);var d=b.delta(a),e=this.normal.dot(d);if(0===e){if(0===this.distanceToPoint(b.start))return c.copy(b.start)}else if(e=\n-(b.start.dot(this.normal)+this.constant)/e,!(0>e||1<e))return c.copy(d).multiplyScalar(e).add(b.start)}}(),intersectsLine:function(a){var b=this.distanceToPoint(a.start);a=this.distanceToPoint(a.end);return 0>b&&0<a||0>a&&0<b},intersectsBox:function(a){return a.intersectsPlane(this)},intersectsSphere:function(a){return a.intersectsPlane(this)},coplanarPoint:function(a){void 0===a&&(console.warn(\"THREE.Plane: .coplanarPoint() target is now required\"),a=new n);return a.copy(this.normal).multiplyScalar(-this.constant)},\napplyMatrix4:function(){var a=new n,b=new da;return function(c,d){d=d||b.getNormalMatrix(c);c=this.coplanarPoint(a).applyMatrix4(c);d=this.normal.applyMatrix3(d).normalize();this.constant=-c.dot(d);return this}}(),translate:function(a){this.constant-=a.dot(this.normal);return this},equals:function(a){return a.normal.equals(this.normal)&&a.constant===this.constant}});Object.assign(td.prototype,{set:function(a,b,c,d,e,f){var g=this.planes;g[0].copy(a);g[1].copy(b);g[2].copy(c);g[3].copy(d);g[4].copy(e);\ng[5].copy(f);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){for(var b=this.planes,c=0;6>c;c++)b[c].copy(a.planes[c]);return this},setFromMatrix:function(a){var b=this.planes,c=a.elements;a=c[0];var d=c[1],e=c[2],f=c[3],g=c[4],h=c[5],k=c[6],m=c[7],l=c[8],p=c[9],r=c[10],n=c[11],t=c[12],v=c[13],w=c[14];c=c[15];b[0].setComponents(f-a,m-g,n-l,c-t).normalize();b[1].setComponents(f+a,m+g,n+l,c+t).normalize();b[2].setComponents(f+d,m+h,n+p,c+v).normalize();b[3].setComponents(f-\nd,m-h,n-p,c-v).normalize();b[4].setComponents(f-e,m-k,n-r,c-w).normalize();b[5].setComponents(f+e,m+k,n+r,c+w).normalize();return this},intersectsObject:function(){var a=new Ea;return function(b){var c=b.geometry;null===c.boundingSphere&&c.computeBoundingSphere();a.copy(c.boundingSphere).applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),intersectsSprite:function(){var a=new Ea;return function(b){a.center.set(0,0,0);a.radius=.7071067811865476;a.applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),\nintersectsSphere:function(a){var b=this.planes,c=a.center;a=-a.radius;for(var d=0;6>d;d++)if(b[d].distanceToPoint(c)<a)return!1;return!0},intersectsBox:function(){var a=new n;return function(b){for(var c=this.planes,d=0;6>d;d++){var e=c[d];a.x=0<e.normal.x?b.max.x:b.min.x;a.y=0<e.normal.y?b.max.y:b.min.y;a.z=0<e.normal.z?b.max.z:b.min.z;if(0>e.distanceToPoint(a))return!1}return!0}}(),containsPoint:function(a){for(var b=this.planes,c=0;6>c;c++)if(0>b[c].distanceToPoint(a))return!1;return!0}});var I=\n{alphamap_fragment:\"#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\\n#endif\",alphamap_pars_fragment:\"#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\",alphatest_fragment:\"#ifdef ALPHATEST\\n\\tif ( diffuseColor.a < ALPHATEST ) discard;\\n#endif\",aomap_fragment:\"#ifdef USE_AOMAP\\n\\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\\treflectedLight.indirectDiffuse *= ambientOcclusion;\\n\\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\\n\\t#endif\\n#endif\",\naomap_pars_fragment:\"#ifdef USE_AOMAP\\n\\tuniform sampler2D aoMap;\\n\\tuniform float aoMapIntensity;\\n#endif\",begin_vertex:\"vec3 transformed = vec3( position );\",beginnormal_vertex:\"vec3 objectNormal = vec3( normal );\",bsdfs:\"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\\n\\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\\n\\tif( cutoffDistance > 0.0 ) {\\n\\t\\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\\n\\t}\\n\\treturn distanceFalloff;\\n#else\\n\\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\\n\\t\\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n\\t}\\n\\treturn 1.0;\\n#endif\\n}\\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\\n\\treturn RECIPROCAL_PI * diffuseColor;\\n}\\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\\n\\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\\n\\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\\n}\\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\treturn 1.0 / ( gl * gv );\\n}\\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\treturn 0.5 / max( gv + gl, EPSILON );\\n}\\nfloat D_GGX( const in float alpha, const in float dotNH ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\\n\\treturn RECIPROCAL_PI * a2 / pow2( denom );\\n}\\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat alpha = pow2( roughness );\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\tfloat D = D_GGX( alpha, dotNH );\\n\\treturn F * ( G * D );\\n}\\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\\n\\tconst float LUT_SIZE  = 64.0;\\n\\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\\n\\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\\n\\tfloat dotNV = saturate( dot( N, V ) );\\n\\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\\n\\tuv = uv * LUT_SCALE + LUT_BIAS;\\n\\treturn uv;\\n}\\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\\n\\tfloat l = length( f );\\n\\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\\n}\\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\\n\\tfloat x = dot( v1, v2 );\\n\\tfloat y = abs( x );\\n\\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\\n\\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\\n\\tfloat v = a / b;\\n\\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\\n\\treturn cross( v1, v2 ) * theta_sintheta;\\n}\\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\\n\\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\\n\\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\\n\\tvec3 lightNormal = cross( v1, v2 );\\n\\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\\n\\tvec3 T1, T2;\\n\\tT1 = normalize( V - N * dot( V, N ) );\\n\\tT2 = - cross( N, T1 );\\n\\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\\n\\tvec3 coords[ 4 ];\\n\\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\\n\\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\\n\\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\\n\\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\\n\\tcoords[ 0 ] = normalize( coords[ 0 ] );\\n\\tcoords[ 1 ] = normalize( coords[ 1 ] );\\n\\tcoords[ 2 ] = normalize( coords[ 2 ] );\\n\\tcoords[ 3 ] = normalize( coords[ 3 ] );\\n\\tvec3 vectorFormFactor = vec3( 0.0 );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\\n\\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\\n\\treturn vec3( result );\\n}\\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\\n\\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\\n\\tvec4 r = roughness * c0 + c1;\\n\\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\\n\\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\\n\\treturn specularColor * AB.x + AB.y;\\n}\\nfloat G_BlinnPhong_Implicit( ) {\\n\\treturn 0.25;\\n}\\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\\n\\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n}\\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_BlinnPhong_Implicit( );\\n\\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\\treturn F * ( G * D );\\n}\\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\\n\\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\\n}\\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\\n\\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\\n}\",\nbumpmap_pars_fragment:\"#ifdef USE_BUMPMAP\\n\\tuniform sampler2D bumpMap;\\n\\tuniform float bumpScale;\\n\\tvec2 dHdxy_fwd() {\\n\\t\\tvec2 dSTdx = dFdx( vUv );\\n\\t\\tvec2 dSTdy = dFdy( vUv );\\n\\t\\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\\t\\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\\t\\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\\t\\treturn vec2( dBx, dBy );\\n\\t}\\n\\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\\n\\t\\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\\n\\t\\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\\n\\t\\tvec3 vN = surf_norm;\\n\\t\\tvec3 R1 = cross( vSigmaY, vN );\\n\\t\\tvec3 R2 = cross( vN, vSigmaX );\\n\\t\\tfloat fDet = dot( vSigmaX, R1 );\\n\\t\\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\\t\\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\t}\\n#endif\",\nclipping_planes_fragment:\"#if NUM_CLIPPING_PLANES > 0\\n\\tvec4 plane;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\\n\\t\\tplane = clippingPlanes[ i ];\\n\\t\\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\\n\\t}\\n\\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\\n\\t\\tbool clipped = true;\\n\\t\\t#pragma unroll_loop\\n\\t\\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\\n\\t\\t\\tplane = clippingPlanes[ i ];\\n\\t\\t\\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\\n\\t\\t}\\n\\t\\tif ( clipped ) discard;\\n\\t#endif\\n#endif\",\nclipping_planes_pars_fragment:\"#if NUM_CLIPPING_PLANES > 0\\n\\t#if ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\\n\\t\\tvarying vec3 vViewPosition;\\n\\t#endif\\n\\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\\n#endif\",clipping_planes_pars_vertex:\"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\",clipping_planes_vertex:\"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\",\ncolor_fragment:\"#ifdef USE_COLOR\\n\\tdiffuseColor.rgb *= vColor;\\n#endif\",color_pars_fragment:\"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif\",color_pars_vertex:\"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif\",color_vertex:\"#ifdef USE_COLOR\\n\\tvColor.xyz = color.xyz;\\n#endif\",common:\"#define PI 3.14159265359\\n#define PI2 6.28318530718\\n#define PI_HALF 1.5707963267949\\n#define RECIPROCAL_PI 0.31830988618\\n#define RECIPROCAL_PI2 0.15915494\\n#define LOG2 1.442695\\n#define EPSILON 1e-6\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\\nfloat pow2( const in float x ) { return x*x; }\\nfloat pow3( const in float x ) { return x*x*x; }\\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\\nhighp float rand( const in vec2 uv ) {\\n\\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\\n\\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\\n\\treturn fract(sin(sn) * c);\\n}\\nstruct IncidentLight {\\n\\tvec3 color;\\n\\tvec3 direction;\\n\\tbool visible;\\n};\\nstruct ReflectedLight {\\n\\tvec3 directDiffuse;\\n\\tvec3 directSpecular;\\n\\tvec3 indirectDiffuse;\\n\\tvec3 indirectSpecular;\\n};\\nstruct GeometricContext {\\n\\tvec3 position;\\n\\tvec3 normal;\\n\\tvec3 viewDir;\\n};\\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n}\\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\\n}\\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\tfloat distance = dot( planeNormal, point - pointOnPlane );\\n\\treturn - distance * planeNormal + point;\\n}\\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn sign( dot( point - pointOnPlane, planeNormal ) );\\n}\\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\\n}\\nmat3 transposeMat3( const in mat3 m ) {\\n\\tmat3 tmp;\\n\\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\\n\\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\\n\\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\\n\\treturn tmp;\\n}\\nfloat linearToRelativeLuminance( const in vec3 color ) {\\n\\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\\n\\treturn dot( weights, color.rgb );\\n}\",\ncube_uv_reflection_fragment:\"#ifdef ENVMAP_TYPE_CUBE_UV\\n#define cubeUV_textureSize (1024.0)\\nint getFaceFromDirection(vec3 direction) {\\n\\tvec3 absDirection = abs(direction);\\n\\tint face = -1;\\n\\tif( absDirection.x > absDirection.z ) {\\n\\t\\tif(absDirection.x > absDirection.y )\\n\\t\\t\\tface = direction.x > 0.0 ? 0 : 3;\\n\\t\\telse\\n\\t\\t\\tface = direction.y > 0.0 ? 1 : 4;\\n\\t}\\n\\telse {\\n\\t\\tif(absDirection.z > absDirection.y )\\n\\t\\t\\tface = direction.z > 0.0 ? 2 : 5;\\n\\t\\telse\\n\\t\\t\\tface = direction.y > 0.0 ? 1 : 4;\\n\\t}\\n\\treturn face;\\n}\\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\\n\\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\\n\\tfloat dxRoughness = dFdx(roughness);\\n\\tfloat dyRoughness = dFdy(roughness);\\n\\tvec3 dx = dFdx( vec * scale * dxRoughness );\\n\\tvec3 dy = dFdy( vec * scale * dyRoughness );\\n\\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\\n\\td = clamp(d, 1.0, cubeUV_rangeClamp);\\n\\tfloat mipLevel = 0.5 * log2(d);\\n\\treturn vec2(floor(mipLevel), fract(mipLevel));\\n}\\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\\n\\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\\n\\tfloat a = 16.0 * cubeUV_rcpTextureSize;\\n\\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\\n\\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\\n\\tfloat powScale = exp2_packed.x * exp2_packed.y;\\n\\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\\n\\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\\n\\tbool bRes = mipLevel == 0.0;\\n\\tscale =  bRes && (scale < a) ? a : scale;\\n\\tvec3 r;\\n\\tvec2 offset;\\n\\tint face = getFaceFromDirection(direction);\\n\\tfloat rcpPowScale = 1.0 / powScale;\\n\\tif( face == 0) {\\n\\t\\tr = vec3(direction.x, -direction.z, direction.y);\\n\\t\\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 1) {\\n\\t\\tr = vec3(direction.y, direction.x, direction.z);\\n\\t\\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 2) {\\n\\t\\tr = vec3(direction.z, direction.x, direction.y);\\n\\t\\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 3) {\\n\\t\\tr = vec3(direction.x, direction.z, direction.y);\\n\\t\\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\telse if( face == 4) {\\n\\t\\tr = vec3(direction.y, direction.x, -direction.z);\\n\\t\\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\telse {\\n\\t\\tr = vec3(direction.z, -direction.x, direction.y);\\n\\t\\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\tr = normalize(r);\\n\\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\\n\\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\\n\\tvec2 base = offset + vec2( texelOffset );\\n\\treturn base + s * ( scale - 2.0 * texelOffset );\\n}\\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\\n\\tfloat roughnessVal = roughness* cubeUV_maxLods3;\\n\\tfloat r1 = floor(roughnessVal);\\n\\tfloat r2 = r1 + 1.0;\\n\\tfloat t = fract(roughnessVal);\\n\\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\\n\\tfloat s = mipInfo.y;\\n\\tfloat level0 = mipInfo.x;\\n\\tfloat level1 = level0 + 1.0;\\n\\tlevel1 = level1 > 5.0 ? 5.0 : level1;\\n\\tlevel0 += min( floor( s + 0.5 ), 5.0 );\\n\\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\\n\\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\\n\\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\\n\\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\\n\\tvec4 result = mix(color10, color20, t);\\n\\treturn vec4(result.rgb, 1.0);\\n}\\n#endif\",\ndefaultnormal_vertex:\"vec3 transformedNormal = normalMatrix * objectNormal;\\n#ifdef FLIP_SIDED\\n\\ttransformedNormal = - transformedNormal;\\n#endif\",displacementmap_pars_vertex:\"#ifdef USE_DISPLACEMENTMAP\\n\\tuniform sampler2D displacementMap;\\n\\tuniform float displacementScale;\\n\\tuniform float displacementBias;\\n#endif\",displacementmap_vertex:\"#ifdef USE_DISPLACEMENTMAP\\n\\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\\n#endif\",\nemissivemap_fragment:\"#ifdef USE_EMISSIVEMAP\\n\\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\\n\\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\\n\\ttotalEmissiveRadiance *= emissiveColor.rgb;\\n#endif\",emissivemap_pars_fragment:\"#ifdef USE_EMISSIVEMAP\\n\\tuniform sampler2D emissiveMap;\\n#endif\",encodings_fragment:\"gl_FragColor = linearToOutputTexel( gl_FragColor );\",encodings_pars_fragment:\"\\nvec4 LinearToLinear( in vec4 value ) {\\n\\treturn value;\\n}\\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\\n}\\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\\n}\\nvec4 sRGBToLinear( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\\n}\\nvec4 LinearTosRGB( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\\n}\\nvec4 RGBEToLinear( in vec4 value ) {\\n\\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\\n}\\nvec4 LinearToRGBE( in vec4 value ) {\\n\\tfloat maxComponent = max( max( value.r, value.g ), value.b );\\n\\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\\n\\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\\n}\\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\\n}\\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\\n\\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\\n\\tM = ceil( M * 255.0 ) / 255.0;\\n\\treturn vec4( value.rgb / ( M * maxRange ), M );\\n}\\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\\n}\\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\\n\\tfloat D = max( maxRange / maxRGB, 1.0 );\\n\\tD = min( floor( D ) / 255.0, 1.0 );\\n\\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\\n}\\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\\nvec4 LinearToLogLuv( in vec4 value )  {\\n\\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\\n\\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\\n\\tvec4 vResult;\\n\\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\\n\\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\\n\\tvResult.w = fract( Le );\\n\\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\\n\\treturn vResult;\\n}\\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\\nvec4 LogLuvToLinear( in vec4 value ) {\\n\\tfloat Le = value.z * 255.0 + value.w;\\n\\tvec3 Xp_Y_XYZp;\\n\\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\\n\\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\\n\\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\\n\\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\\n\\treturn vec4( max( vRGB, 0.0 ), 1.0 );\\n}\",\nenvmap_fragment:\"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\\n\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#else\\n\\t\\tvec3 reflectVec = vReflect;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\t\\tvec2 sampleUV;\\n\\t\\treflectVec = normalize( reflectVec );\\n\\t\\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\t\\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\\t\\tvec4 envColor = texture2D( envMap, sampleUV );\\n\\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\\t\\treflectVec = normalize( reflectVec );\\n\\t\\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\\n\\t\\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\\n\\t#else\\n\\t\\tvec4 envColor = vec4( 0.0 );\\n\\t#endif\\n\\tenvColor = envMapTexelToLinear( envColor );\\n\\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\t\\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\t\\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\t\\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\\t#endif\\n#endif\",\nenvmap_pars_fragment:\"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\\n\\tuniform float reflectivity;\\n\\tuniform float envMapIntensity;\\n#endif\\n#ifdef USE_ENVMAP\\n\\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tuniform samplerCube envMap;\\n\\t#else\\n\\t\\tuniform sampler2D envMap;\\n\\t#endif\\n\\tuniform float flipEnvMap;\\n\\tuniform int maxMipLevel;\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\\n\\t\\tuniform float refractionRatio;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t#endif\\n#endif\",\nenvmap_pars_vertex:\"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n#endif\",envmap_physical_pars_fragment:\"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\\n\\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\\n\\t\\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\\n\\t\\t#else\\n\\t\\t\\tvec4 envMapColor = vec4( 0.0 );\\n\\t\\t#endif\\n\\t\\treturn PI * envMapColor.rgb * envMapIntensity;\\n\\t}\\n\\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\\n\\t\\tfloat maxMIPLevelScalar = float( maxMIPLevel );\\n\\t\\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\\n\\t\\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\\n\\t}\\n\\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\\n\\t\\t#endif\\n\\t\\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\\n\\t\\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\\n\\t\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\t\\t\\tvec2 sampleUV;\\n\\t\\t\\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\t\\t\\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\\t\\t\\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#endif\\n\\t\\treturn envMapColor.rgb * envMapIntensity;\\n\\t}\\n#endif\",\nenvmap_vertex:\"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\tvWorldPosition = worldPosition.xyz;\\n\\t#else\\n\\t\\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\t\\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#endif\\n#endif\",\nfog_vertex:\"#ifdef USE_FOG\\n\\tfogDepth = -mvPosition.z;\\n#endif\",fog_pars_vertex:\"#ifdef USE_FOG\\n\\tvarying float fogDepth;\\n#endif\",fog_fragment:\"#ifdef USE_FOG\\n\\t#ifdef FOG_EXP2\\n\\t\\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\\n\\t#else\\n\\t\\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\\n\\t#endif\\n\\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\\n#endif\",fog_pars_fragment:\"#ifdef USE_FOG\\n\\tuniform vec3 fogColor;\\n\\tvarying float fogDepth;\\n\\t#ifdef FOG_EXP2\\n\\t\\tuniform float fogDensity;\\n\\t#else\\n\\t\\tuniform float fogNear;\\n\\t\\tuniform float fogFar;\\n\\t#endif\\n#endif\",\ngradientmap_pars_fragment:\"#ifdef TOON\\n\\tuniform sampler2D gradientMap;\\n\\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\\n\\t\\tfloat dotNL = dot( normal, lightDirection );\\n\\t\\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\\n\\t\\t#ifdef USE_GRADIENTMAP\\n\\t\\t\\treturn texture2D( gradientMap, coord ).rgb;\\n\\t\\t#else\\n\\t\\t\\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\\n\\t\\t#endif\\n\\t}\\n#endif\",lightmap_fragment:\"#ifdef USE_LIGHTMAP\\n\\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n#endif\",\nlightmap_pars_fragment:\"#ifdef USE_LIGHTMAP\\n\\tuniform sampler2D lightMap;\\n\\tuniform float lightMapIntensity;\\n#endif\",lights_lambert_vertex:\"vec3 diffuse = vec3( 1.0 );\\nGeometricContext geometry;\\ngeometry.position = mvPosition.xyz;\\ngeometry.normal = normalize( transformedNormal );\\ngeometry.viewDir = normalize( -mvPosition.xyz );\\nGeometricContext backGeometry;\\nbackGeometry.position = geometry.position;\\nbackGeometry.normal = -geometry.normal;\\nbackGeometry.viewDir = geometry.viewDir;\\nvLightFront = vec3( 0.0 );\\n#ifdef DOUBLE_SIDED\\n\\tvLightBack = vec3( 0.0 );\\n#endif\\nIncidentLight directLight;\\nfloat dotNL;\\nvec3 directLightColor_Diffuse;\\n#if NUM_POINT_LIGHTS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_DIR_LIGHTS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\\n\\t\\t#endif\\n\\t}\\n#endif\",\nlights_pars_begin:\"uniform vec3 ambientLightColor;\\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\\n\\tvec3 irradiance = ambientLightColor;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treturn irradiance;\\n}\\n#if NUM_DIR_LIGHTS > 0\\n\\tstruct DirectionalLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t};\\n\\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\\n\\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tdirectLight.color = directionalLight.color;\\n\\t\\tdirectLight.direction = directionalLight.direction;\\n\\t\\tdirectLight.visible = true;\\n\\t}\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\tstruct PointLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t\\tfloat shadowCameraNear;\\n\\t\\tfloat shadowCameraFar;\\n\\t};\\n\\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\\n\\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tvec3 lVector = pointLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tdirectLight.color = pointLight.color;\\n\\t\\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\\n\\t\\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tstruct SpotLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tfloat coneCos;\\n\\t\\tfloat penumbraCos;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t};\\n\\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\\n\\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\\n\\t\\tvec3 lVector = spotLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tfloat angleCos = dot( directLight.direction, spotLight.direction );\\n\\t\\tif ( angleCos > spotLight.coneCos ) {\\n\\t\\t\\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\\n\\t\\t\\tdirectLight.color = spotLight.color;\\n\\t\\t\\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\\n\\t\\t\\tdirectLight.visible = true;\\n\\t\\t} else {\\n\\t\\t\\tdirectLight.color = vec3( 0.0 );\\n\\t\\t\\tdirectLight.visible = false;\\n\\t\\t}\\n\\t}\\n#endif\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tstruct RectAreaLight {\\n\\t\\tvec3 color;\\n\\t\\tvec3 position;\\n\\t\\tvec3 halfWidth;\\n\\t\\tvec3 halfHeight;\\n\\t};\\n\\tuniform sampler2D ltc_1;\\tuniform sampler2D ltc_2;\\n\\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tstruct HemisphereLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 skyColor;\\n\\t\\tvec3 groundColor;\\n\\t};\\n\\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\\n\\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\\n\\t\\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\\n\\t\\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\\n\\t\\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tirradiance *= PI;\\n\\t\\t#endif\\n\\t\\treturn irradiance;\\n\\t}\\n#endif\",\nlights_phong_fragment:\"BlinnPhongMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularColor = specular;\\nmaterial.specularShininess = shininess;\\nmaterial.specularStrength = specularStrength;\",lights_phong_pars_fragment:\"varying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\nstruct BlinnPhongMaterial {\\n\\tvec3\\tdiffuseColor;\\n\\tvec3\\tspecularColor;\\n\\tfloat\\tspecularShininess;\\n\\tfloat\\tspecularStrength;\\n};\\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t#ifdef TOON\\n\\t\\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\\n\\t#else\\n\\t\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\t\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#endif\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\\n}\\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_BlinnPhong\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_BlinnPhong\\n#define Material_LightProbeLOD( material )\\t(0)\",\nlights_physical_fragment:\"PhysicalMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\\n#ifdef STANDARD\\n\\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\\n#else\\n\\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\\n\\tmaterial.clearCoat = saturate( clearCoat );\\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\\n#endif\",\nlights_physical_pars_fragment:\"struct PhysicalMaterial {\\n\\tvec3\\tdiffuseColor;\\n\\tfloat\\tspecularRoughness;\\n\\tvec3\\tspecularColor;\\n\\t#ifndef STANDARD\\n\\t\\tfloat clearCoat;\\n\\t\\tfloat clearCoatRoughness;\\n\\t#endif\\n};\\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\\n\\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\\n}\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t\\tvec3 normal = geometry.normal;\\n\\t\\tvec3 viewDir = geometry.viewDir;\\n\\t\\tvec3 position = geometry.position;\\n\\t\\tvec3 lightPos = rectAreaLight.position;\\n\\t\\tvec3 halfWidth = rectAreaLight.halfWidth;\\n\\t\\tvec3 halfHeight = rectAreaLight.halfHeight;\\n\\t\\tvec3 lightColor = rectAreaLight.color;\\n\\t\\tfloat roughness = material.specularRoughness;\\n\\t\\tvec3 rectCoords[ 4 ];\\n\\t\\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\\t\\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\\n\\t\\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\\n\\t\\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\\n\\t\\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\\n\\t\\tvec4 t1 = texture2D( ltc_1, uv );\\n\\t\\tvec4 t2 = texture2D( ltc_2, uv );\\n\\t\\tmat3 mInv = mat3(\\n\\t\\t\\tvec3( t1.x, 0, t1.y ),\\n\\t\\t\\tvec3(    0, 1,    0 ),\\n\\t\\t\\tvec3( t1.z, 0, t1.w )\\n\\t\\t);\\n\\t\\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\\n\\t\\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\\n\\t\\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\\n\\t}\\n#endif\\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\t#ifndef STANDARD\\n\\t\\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\\n\\t#else\\n\\t\\tfloat clearCoatDHR = 0.0;\\n\\t#endif\\n\\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\\n\\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\t#ifndef STANDARD\\n\\t\\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\\n\\t#endif\\n}\\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t#ifndef STANDARD\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\tfloat dotNL = dotNV;\\n\\t\\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\\n\\t#else\\n\\t\\tfloat clearCoatDHR = 0.0;\\n\\t#endif\\n\\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\\n\\t#ifndef STANDARD\\n\\t\\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\\n\\t#endif\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Physical\\n#define RE_Direct_RectArea\\t\\tRE_Direct_RectArea_Physical\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Physical\\n#define RE_IndirectSpecular\\t\\tRE_IndirectSpecular_Physical\\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\\n\\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\\n}\",\nlights_fragment_begin:\"\\nGeometricContext geometry;\\ngeometry.position = - vViewPosition;\\ngeometry.normal = normal;\\ngeometry.viewDir = normalize( vViewPosition );\\nIncidentLight directLight;\\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tPointLight pointLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tSpotLight spotLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tDirectionalLight directionalLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\\n\\tRectAreaLight rectAreaLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\\n\\t\\trectAreaLight = rectAreaLights[ i ];\\n\\t\\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if defined( RE_IndirectDiffuse )\\n\\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\\n\\t#if ( NUM_HEMI_LIGHTS > 0 )\\n\\t\\t#pragma unroll_loop\\n\\t\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\t\\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t}\\n\\t#endif\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tvec3 radiance = vec3( 0.0 );\\n\\tvec3 clearCoatRadiance = vec3( 0.0 );\\n#endif\",\nlights_fragment_maps:\"#if defined( RE_IndirectDiffuse )\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tlightMapIrradiance *= PI;\\n\\t\\t#endif\\n\\t\\tirradiance += lightMapIrradiance;\\n\\t#endif\\n\\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\\n\\t#endif\\n#endif\\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\\n\\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\\n\\t#ifndef STANDARD\\n\\t\\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\\n\\t#endif\\n#endif\",\nlights_fragment_end:\"#if defined( RE_IndirectDiffuse )\\n\\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\\n#endif\",logdepthbuf_fragment:\"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\\n#endif\",logdepthbuf_pars_fragment:\"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tuniform float logDepthBufFC;\\n\\tvarying float vFragDepth;\\n#endif\",\nlogdepthbuf_pars_vertex:\"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t#else\\n\\t\\tuniform float logDepthBufFC;\\n\\t#endif\\n#endif\",logdepthbuf_vertex:\"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvFragDepth = 1.0 + gl_Position.w;\\n\\t#else\\n\\t\\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\\n\\t\\tgl_Position.z *= gl_Position.w;\\n\\t#endif\\n#endif\",map_fragment:\"#ifdef USE_MAP\\n\\tvec4 texelColor = texture2D( map, vUv );\\n\\ttexelColor = mapTexelToLinear( texelColor );\\n\\tdiffuseColor *= texelColor;\\n#endif\",\nmap_pars_fragment:\"#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\",map_particle_fragment:\"#ifdef USE_MAP\\n\\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\\n\\tvec4 mapTexel = texture2D( map, uv );\\n\\tdiffuseColor *= mapTexelToLinear( mapTexel );\\n#endif\",map_particle_pars_fragment:\"#ifdef USE_MAP\\n\\tuniform mat3 uvTransform;\\n\\tuniform sampler2D map;\\n#endif\",metalnessmap_fragment:\"float metalnessFactor = metalness;\\n#ifdef USE_METALNESSMAP\\n\\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\\n\\tmetalnessFactor *= texelMetalness.b;\\n#endif\",\nmetalnessmap_pars_fragment:\"#ifdef USE_METALNESSMAP\\n\\tuniform sampler2D metalnessMap;\\n#endif\",morphnormal_vertex:\"#ifdef USE_MORPHNORMALS\\n\\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\\n\\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\\n\\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\\n\\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\\n#endif\",morphtarget_pars_vertex:\"#ifdef USE_MORPHTARGETS\\n\\t#ifndef USE_MORPHNORMALS\\n\\tuniform float morphTargetInfluences[ 8 ];\\n\\t#else\\n\\tuniform float morphTargetInfluences[ 4 ];\\n\\t#endif\\n#endif\",\nmorphtarget_vertex:\"#ifdef USE_MORPHTARGETS\\n\\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\\n\\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\\n\\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\\n\\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\\n\\t#ifndef USE_MORPHNORMALS\\n\\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\\n\\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\\n\\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\\n\\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\\n\\t#endif\\n#endif\",\nnormal_fragment_begin:\"#ifdef FLAT_SHADED\\n\\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\\n\\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\\n\\tvec3 normal = normalize( cross( fdx, fdy ) );\\n#else\\n\\tvec3 normal = normalize( vNormal );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t#endif\\n#endif\",normal_fragment_maps:\"#ifdef USE_NORMALMAP\\n\\t#ifdef OBJECTSPACE_NORMALMAP\\n\\t\\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\t\\t#ifdef FLIP_SIDED\\n\\t\\t\\tnormal = - normal;\\n\\t\\t#endif\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\t#endif\\n\\t\\tnormal = normalize( normalMatrix * normal );\\n\\t#else\\n\\t\\tnormal = perturbNormal2Arb( -vViewPosition, normal );\\n\\t#endif\\n#elif defined( USE_BUMPMAP )\\n\\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\\n#endif\",\nnormalmap_pars_fragment:\"#ifdef USE_NORMALMAP\\n\\tuniform sampler2D normalMap;\\n\\tuniform vec2 normalScale;\\n\\t#ifdef OBJECTSPACE_NORMALMAP\\n\\t\\tuniform mat3 normalMatrix;\\n\\t#else\\n\\t\\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\\n\\t\\t\\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\\n\\t\\t\\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\\n\\t\\t\\tvec2 st0 = dFdx( vUv.st );\\n\\t\\t\\tvec2 st1 = dFdy( vUv.st );\\n\\t\\t\\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\\n\\t\\t\\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\\n\\t\\t\\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\\n\\t\\t\\tvec3 N = normalize( surf_norm );\\n\\t\\t\\tmat3 tsn = mat3( S, T, N );\\n\\t\\t\\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\t\\t\\tmapN.xy *= normalScale;\\n\\t\\t\\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\t\\treturn normalize( tsn * mapN );\\n\\t\\t}\\n\\t#endif\\n#endif\",\npacking:\"vec3 packNormalToRGB( const in vec3 normal ) {\\n\\treturn normalize( normal ) * 0.5 + 0.5;\\n}\\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\\n\\treturn 2.0 * rgb.xyz - 1.0;\\n}\\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\\nconst float ShiftRight8 = 1. / 256.;\\nvec4 packDepthToRGBA( const in float v ) {\\n\\tvec4 r = vec4( fract( v * PackFactors ), v );\\n\\tr.yzw -= r.xyz * ShiftRight8;\\treturn r * PackUpscale;\\n}\\nfloat unpackRGBAToDepth( const in vec4 v ) {\\n\\treturn dot( v, UnpackFactors );\\n}\\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( viewZ + near ) / ( near - far );\\n}\\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\\n\\treturn linearClipZ * ( near - far ) - near;\\n}\\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\\n}\\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\\n\\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\\n}\",\npremultiplied_alpha_fragment:\"#ifdef PREMULTIPLIED_ALPHA\\n\\tgl_FragColor.rgb *= gl_FragColor.a;\\n#endif\",project_vertex:\"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\\ngl_Position = projectionMatrix * mvPosition;\",dithering_fragment:\"#if defined( DITHERING )\\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\\n#endif\",dithering_pars_fragment:\"#if defined( DITHERING )\\n\\tvec3 dithering( vec3 color ) {\\n\\t\\tfloat grid_position = rand( gl_FragCoord.xy );\\n\\t\\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\\n\\t\\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\\n\\t\\treturn color + dither_shift_RGB;\\n\\t}\\n#endif\",\nroughnessmap_fragment:\"float roughnessFactor = roughness;\\n#ifdef USE_ROUGHNESSMAP\\n\\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\\n\\troughnessFactor *= texelRoughness.g;\\n#endif\",roughnessmap_pars_fragment:\"#ifdef USE_ROUGHNESSMAP\\n\\tuniform sampler2D roughnessMap;\\n#endif\",shadowmap_pars_fragment:\"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\t\\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\t\\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\t\\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\\n\\t#endif\\n\\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\\n\\t\\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\\n\\t}\\n\\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\\n\\t\\tconst vec2 offset = vec2( 0.0, 1.0 );\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / size;\\n\\t\\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\\n\\t\\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\\n\\t\\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\\n\\t\\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\\n\\t\\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\\n\\t\\tvec2 f = fract( uv * size + 0.5 );\\n\\t\\tfloat a = mix( lb, lt, f.y );\\n\\t\\tfloat b = mix( rb, rt, f.y );\\n\\t\\tfloat c = mix( a, b, f.x );\\n\\t\\treturn c;\\n\\t}\\n\\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\\t\\tfloat shadow = 1.0;\\n\\t\\tshadowCoord.xyz /= shadowCoord.w;\\n\\t\\tshadowCoord.z += shadowBias;\\n\\t\\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\\t\\tbool inFrustum = all( inFrustumVec );\\n\\t\\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\\t\\tbool frustumTest = all( frustumTestVec );\\n\\t\\tif ( frustumTest ) {\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#endif\\n\\t\\t}\\n\\t\\treturn shadow;\\n\\t}\\n\\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\\n\\t\\tvec3 absV = abs( v );\\n\\t\\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\\n\\t\\tabsV *= scaleToCube;\\n\\t\\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\\n\\t\\tvec2 planar = v.xy;\\n\\t\\tfloat almostATexel = 1.5 * texelSizeY;\\n\\t\\tfloat almostOne = 1.0 - almostATexel;\\n\\t\\tif ( absV.z >= almostOne ) {\\n\\t\\t\\tif ( v.z > 0.0 )\\n\\t\\t\\t\\tplanar.x = 4.0 - v.x;\\n\\t\\t} else if ( absV.x >= almostOne ) {\\n\\t\\t\\tfloat signX = sign( v.x );\\n\\t\\t\\tplanar.x = v.z * signX + 2.0 * signX;\\n\\t\\t} else if ( absV.y >= almostOne ) {\\n\\t\\t\\tfloat signY = sign( v.y );\\n\\t\\t\\tplanar.x = v.x + 2.0 * signY + 2.0;\\n\\t\\t\\tplanar.y = v.z * signY - 2.0;\\n\\t\\t}\\n\\t\\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\\n\\t}\\n\\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\\n\\t\\tvec3 lightToPosition = shadowCoord.xyz;\\n\\t\\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\\t\\tdp += shadowBias;\\n\\t\\tvec3 bd3D = normalize( lightToPosition );\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\\n\\t\\t#endif\\n\\t}\\n#endif\",\nshadowmap_pars_vertex:\"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\t\\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\t\\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\t\\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\\n\\t#endif\\n#endif\",\nshadowmap_vertex:\"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n#endif\",\nshadowmask_pars_fragment:\"float getShadowMask() {\\n\\tfloat shadow = 1.0;\\n\\t#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\tDirectionalLight directionalLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\tSpotLight spotLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\tPointLight pointLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#endif\\n\\treturn shadow;\\n}\",\nskinbase_vertex:\"#ifdef USE_SKINNING\\n\\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n#endif\",skinning_pars_vertex:\"#ifdef USE_SKINNING\\n\\tuniform mat4 bindMatrix;\\n\\tuniform mat4 bindMatrixInverse;\\n\\t#ifdef BONE_TEXTURE\\n\\t\\tuniform sampler2D boneTexture;\\n\\t\\tuniform int boneTextureSize;\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tfloat j = i * 4.0;\\n\\t\\t\\tfloat x = mod( j, float( boneTextureSize ) );\\n\\t\\t\\tfloat y = floor( j / float( boneTextureSize ) );\\n\\t\\t\\tfloat dx = 1.0 / float( boneTextureSize );\\n\\t\\t\\tfloat dy = 1.0 / float( boneTextureSize );\\n\\t\\t\\ty = dy * ( y + 0.5 );\\n\\t\\t\\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\\t\\t\\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\\t\\t\\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\\t\\t\\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\t\\t\\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#else\\n\\t\\tuniform mat4 boneMatrices[ MAX_BONES ];\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tmat4 bone = boneMatrices[ int(i) ];\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#endif\\n#endif\",\nskinning_vertex:\"#ifdef USE_SKINNING\\n\\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\\tvec4 skinned = vec4( 0.0 );\\n\\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\\ttransformed = ( bindMatrixInverse * skinned ).xyz;\\n#endif\",skinnormal_vertex:\"#ifdef USE_SKINNING\\n\\tmat4 skinMatrix = mat4( 0.0 );\\n\\tskinMatrix += skinWeight.x * boneMatX;\\n\\tskinMatrix += skinWeight.y * boneMatY;\\n\\tskinMatrix += skinWeight.z * boneMatZ;\\n\\tskinMatrix += skinWeight.w * boneMatW;\\n\\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n#endif\",\nspecularmap_fragment:\"float specularStrength;\\n#ifdef USE_SPECULARMAP\\n\\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\\tspecularStrength = texelSpecular.r;\\n#else\\n\\tspecularStrength = 1.0;\\n#endif\",specularmap_pars_fragment:\"#ifdef USE_SPECULARMAP\\n\\tuniform sampler2D specularMap;\\n#endif\",tonemapping_fragment:\"#if defined( TONE_MAPPING )\\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\\n#endif\",tonemapping_pars_fragment:\"#ifndef saturate\\n\\t#define saturate(a) clamp( a, 0.0, 1.0 )\\n#endif\\nuniform float toneMappingExposure;\\nuniform float toneMappingWhitePoint;\\nvec3 LinearToneMapping( vec3 color ) {\\n\\treturn toneMappingExposure * color;\\n}\\nvec3 ReinhardToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( color / ( vec3( 1.0 ) + color ) );\\n}\\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\\nvec3 Uncharted2ToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\\n}\\nvec3 OptimizedCineonToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\tcolor = max( vec3( 0.0 ), color - 0.004 );\\n\\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\\n}\\nvec3 ACESFilmicToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\\n}\",\nuv_pars_fragment:\"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\tvarying vec2 vUv;\\n#endif\",uv_pars_vertex:\"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\tvarying vec2 vUv;\\n\\tuniform mat3 uvTransform;\\n#endif\",\nuv_vertex:\"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n#endif\",uv2_pars_fragment:\"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvarying vec2 vUv2;\\n#endif\",uv2_pars_vertex:\"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tattribute vec2 uv2;\\n\\tvarying vec2 vUv2;\\n#endif\",\nuv2_vertex:\"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvUv2 = uv2;\\n#endif\",worldpos_vertex:\"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\\n\\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\\n#endif\",background_frag:\"uniform sampler2D t2D;\\nvarying vec2 vUv;\\nvoid main() {\\n\\tvec4 texColor = texture2D( t2D, vUv );\\n\\tgl_FragColor = mapTexelToLinear( texColor );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\",background_vert:\"varying vec2 vUv;\\nuniform mat3 uvTransform;\\nvoid main() {\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n\\tgl_Position = vec4( position.xy, 1.0, 1.0 );\\n}\",\ncube_frag:\"uniform samplerCube tCube;\\nuniform float tFlip;\\nuniform float opacity;\\nvarying vec3 vWorldDirection;\\nvoid main() {\\n\\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\\n\\tgl_FragColor = mapTexelToLinear( texColor );\\n\\tgl_FragColor.a *= opacity;\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\",cube_vert:\"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\tgl_Position.z = gl_Position.w;\\n}\",\ndepth_frag:\"#if DEPTH_PACKING == 3200\\n\\tuniform float opacity;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tdiffuseColor.a = opacity;\\n\\t#endif\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\\n\\t#elif DEPTH_PACKING == 3201\\n\\t\\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\\n\\t#endif\\n}\",\ndepth_vert:\"#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n}\",\ndistanceRGBA_frag:\"#define DISTANCE\\nuniform vec3 referencePosition;\\nuniform float nearDistance;\\nuniform float farDistance;\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main () {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\tfloat dist = length( vWorldPosition - referencePosition );\\n\\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\\n\\tdist = saturate( dist );\\n\\tgl_FragColor = packDepthToRGBA( dist );\\n}\",\ndistanceRGBA_vert:\"#define DISTANCE\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvWorldPosition = worldPosition.xyz;\\n}\",\nequirect_frag:\"uniform sampler2D tEquirect;\\nvarying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvec3 direction = normalize( vWorldDirection );\\n\\tvec2 sampleUV;\\n\\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\\n\\tvec4 texColor = texture2D( tEquirect, sampleUV );\\n\\tgl_FragColor = mapTexelToLinear( texColor );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\",\nequirect_vert:\"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n}\",linedashed_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\nuniform float dashSize;\\nuniform float totalSize;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\\n\\t\\tdiscard;\\n\\t}\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <color_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\",\nlinedashed_vert:\"uniform float scale;\\nattribute float lineDistance;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\tvLineDistance = scale * lineDistance;\\n\\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\\n\\tgl_Position = projectionMatrix * mvPosition;\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\",\nmeshbasic_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vec3( 1.0 );\\n\\t#endif\\n\\t#include <aomap_fragment>\\n\\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\\n\\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\",\nmeshbasic_vert:\"#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_ENVMAP\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <fog_vertex>\\n}\",\nmeshlambert_frag:\"uniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\nvarying vec3 vLightFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <emissivemap_fragment>\\n\\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\\n\\t#include <lightmap_fragment>\\n\\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\\n\\t#else\\n\\t\\treflectedLight.directDiffuse = vLightFront;\\n\\t#endif\\n\\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\",\nmeshlambert_vert:\"#define LAMBERT\\nvarying vec3 vLightFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <lights_lambert_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\",\nmeshmatcap_frag:\"#define MATCAP\\nuniform vec3 diffuse;\\nuniform float opacity;\\nuniform sampler2D matcap;\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tvec3 viewDir = normalize( vViewPosition );\\n\\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\\n\\tvec3 y = cross( viewDir, x );\\n\\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\\n\\t#ifdef USE_MATCAP\\n\\t\\tvec4 matcapColor = texture2D( matcap, uv );\\n\\t\\tmatcapColor = matcapTexelToLinear( matcapColor );\\n\\t#else\\n\\t\\tvec4 matcapColor = vec4( 1.0 );\\n\\t#endif\\n\\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\",\nmeshmatcap_vert:\"#define MATCAP\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#ifndef FLAT_SHADED\\n\\t\\tvNormal = normalize( transformedNormal );\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n}\",\nmeshphong_frag:\"#define PHONG\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform vec3 specular;\\nuniform float shininess;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <gradientmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <lights_phong_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_phong_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\",\nmeshphong_vert:\"#define PHONG\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\",\nmeshphysical_frag:\"#define PHYSICAL\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float roughness;\\nuniform float metalness;\\nuniform float opacity;\\n#ifndef STANDARD\\n\\tuniform float clearCoat;\\n\\tuniform float clearCoatRoughness;\\n#endif\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <bsdfs>\\n#include <cube_uv_reflection_fragment>\\n#include <envmap_pars_fragment>\\n#include <envmap_physical_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <lights_pars_begin>\\n#include <lights_physical_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <roughnessmap_pars_fragment>\\n#include <metalnessmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <roughnessmap_fragment>\\n\\t#include <metalnessmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_physical_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\",\nmeshphysical_vert:\"#define PHYSICAL\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\",\nnormal_frag:\"#define NORMAL\\nuniform float opacity;\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\nvoid main() {\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\\n}\",\nnormal_vert:\"#define NORMAL\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n}\",\npoints_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <map_particle_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_particle_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\",\npoints_vert:\"uniform float size;\\nuniform float scale;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\tgl_PointSize = size;\\n\\t#ifdef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\\n\\t\\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\\n\\t#endif\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <fog_vertex>\\n}\",\nshadow_frag:\"uniform vec3 color;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\nvoid main() {\\n\\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\\n\\t#include <fog_fragment>\\n}\",shadow_vert:\"#include <fog_pars_vertex>\\n#include <shadowmap_pars_vertex>\\nvoid main() {\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\",\nsprite_frag:\"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\",\nsprite_vert:\"uniform float rotation;\\nuniform vec2 center;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\\n\\tvec2 scale;\\n\\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\\n\\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\\n\\t#ifndef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\\n\\t\\tif ( isPerspective ) scale *= - mvPosition.z;\\n\\t#endif\\n\\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\\n\\tvec2 rotatedPosition;\\n\\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\\n\\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\\n\\tmvPosition.xy += rotatedPosition;\\n\\tgl_Position = projectionMatrix * mvPosition;\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\"},\nah={clone:Jb,merge:ua},bh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,\ndarkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,\ngrey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,\nlime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,\npalegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,\nteal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(J.prototype,{isColor:!0,r:1,g:1,b:1,set:function(a){a&&a.isColor?this.copy(a):\"number\"===typeof a?this.setHex(a):\"string\"===typeof a&&this.setStyle(a);return this},setScalar:function(a){this.b=this.g=this.r=a;return this},setHex:function(a){a=Math.floor(a);this.r=(a>>16&255)/255;this.g=(a>>8&255)/255;this.b=(a&255)/255;\nreturn this},setRGB:function(a,b,c){this.r=a;this.g=b;this.b=c;return this},setHSL:function(){function a(a,c,d){0>d&&(d+=1);1<d&&--d;return d<1/6?a+6*(c-a)*d:.5>d?c:d<2/3?a+6*(c-a)*(2/3-d):a}return function(b,c,d){b=R.euclideanModulo(b,1);c=R.clamp(c,0,1);d=R.clamp(d,0,1);0===c?this.r=this.g=this.b=d:(c=.5>=d?d*(1+c):d+c-d*c,d=2*d-c,this.r=a(d,c,b+1/3),this.g=a(d,c,b),this.b=a(d,c,b-1/3));return this}}(),setStyle:function(a){function b(b){void 0!==b&&1>parseFloat(b)&&console.warn(\"THREE.Color: Alpha component of \"+\na+\" will be ignored.\")}var c;if(c=/^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec(a)){var d=c[2];switch(c[1]){case \"rgb\":case \"rgba\":if(c=/^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(d))return this.r=Math.min(255,parseInt(c[1],10))/255,this.g=Math.min(255,parseInt(c[2],10))/255,this.b=Math.min(255,parseInt(c[3],10))/255,b(c[5]),this;if(c=/^(\\d+)%\\s*,\\s*(\\d+)%\\s*,\\s*(\\d+)%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(d))return this.r=Math.min(100,parseInt(c[1],10))/100,this.g=Math.min(100,parseInt(c[2],\n10))/100,this.b=Math.min(100,parseInt(c[3],10))/100,b(c[5]),this;break;case \"hsl\":case \"hsla\":if(c=/^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)%\\s*,\\s*(\\d+)%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(d)){d=parseFloat(c[1])/360;var e=parseInt(c[2],10)/100,f=parseInt(c[3],10)/100;b(c[5]);return this.setHSL(d,e,f)}}}else if(c=/^#([A-Fa-f0-9]+)$/.exec(a)){c=c[1];d=c.length;if(3===d)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),\n16)/255,this;if(6===d)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}a&&0<a.length&&(c=bh[a],void 0!==c?this.setHex(c):console.warn(\"THREE.Color: Unknown color \"+a));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(a){this.r=a.r;this.g=a.g;this.b=a.b;return this},copyGammaToLinear:function(a,b){void 0===b&&(b=2);this.r=Math.pow(a.r,b);this.g=Math.pow(a.g,\nb);this.b=Math.pow(a.b,b);return this},copyLinearToGamma:function(a,b){void 0===b&&(b=2);b=0<b?1/b:1;this.r=Math.pow(a.r,b);this.g=Math.pow(a.g,b);this.b=Math.pow(a.b,b);return this},convertGammaToLinear:function(a){this.copyGammaToLinear(this,a);return this},convertLinearToGamma:function(a){this.copyLinearToGamma(this,a);return this},copySRGBToLinear:function(){function a(a){return.04045>a?.0773993808*a:Math.pow(.9478672986*a+.0521327014,2.4)}return function(b){this.r=a(b.r);this.g=a(b.g);this.b=\na(b.b);return this}}(),copyLinearToSRGB:function(){function a(a){return.0031308>a?12.92*a:1.055*Math.pow(a,.41666)-.055}return function(b){this.r=a(b.r);this.g=a(b.g);this.b=a(b.b);return this}}(),convertSRGBToLinear:function(){this.copySRGBToLinear(this);return this},convertLinearToSRGB:function(){this.copyLinearToSRGB(this);return this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return(\"000000\"+this.getHex().toString(16)).slice(-6)},getHSL:function(a){void 0===\na&&(console.warn(\"THREE.Color: .getHSL() target is now required\"),a={h:0,s:0,l:0});var b=this.r,c=this.g,d=this.b,e=Math.max(b,c,d),f=Math.min(b,c,d),g,h=(f+e)/2;if(f===e)f=g=0;else{var k=e-f;f=.5>=h?k/(e+f):k/(2-e-f);switch(e){case b:g=(c-d)/k+(c<d?6:0);break;case c:g=(d-b)/k+2;break;case d:g=(b-c)/k+4}g/=6}a.h=g;a.s=f;a.l=h;return a},getStyle:function(){return\"rgb(\"+(255*this.r|0)+\",\"+(255*this.g|0)+\",\"+(255*this.b|0)+\")\"},offsetHSL:function(){var a={};return function(b,c,d){this.getHSL(a);a.h+=\nb;a.s+=c;a.l+=d;this.setHSL(a.h,a.s,a.l);return this}}(),add:function(a){this.r+=a.r;this.g+=a.g;this.b+=a.b;return this},addColors:function(a,b){this.r=a.r+b.r;this.g=a.g+b.g;this.b=a.b+b.b;return this},addScalar:function(a){this.r+=a;this.g+=a;this.b+=a;return this},sub:function(a){this.r=Math.max(0,this.r-a.r);this.g=Math.max(0,this.g-a.g);this.b=Math.max(0,this.b-a.b);return this},multiply:function(a){this.r*=a.r;this.g*=a.g;this.b*=a.b;return this},multiplyScalar:function(a){this.r*=a;this.g*=\na;this.b*=a;return this},lerp:function(a,b){this.r+=(a.r-this.r)*b;this.g+=(a.g-this.g)*b;this.b+=(a.b-this.b)*b;return this},lerpHSL:function(){var a={h:0,s:0,l:0},b={h:0,s:0,l:0};return function(c,d){this.getHSL(a);c.getHSL(b);c=R.lerp(a.h,b.h,d);var e=R.lerp(a.s,b.s,d);d=R.lerp(a.l,b.l,d);this.setHSL(c,e,d);return this}}(),equals:function(a){return a.r===this.r&&a.g===this.g&&a.b===this.b},fromArray:function(a,b){void 0===b&&(b=0);this.r=a[b];this.g=a[b+1];this.b=a[b+2];return this},toArray:function(a,\nb){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.r;a[b+1]=this.g;a[b+2]=this.b;return a},toJSON:function(){return this.getHex()}});var F={common:{diffuse:{value:new J(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new da},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},\nlightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new z(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:2.5E-4},fogNear:{value:1},fogFar:{value:2E3},fogColor:{value:new J(16777215)}},\nlights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},\ndecay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new J(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new da}},sprite:{diffuse:{value:new J(15658734)},\nopacity:{value:1},center:{value:new z(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new da}}},Qa={basic:{uniforms:ua([F.common,F.specularmap,F.envmap,F.aomap,F.lightmap,F.fog]),vertexShader:I.meshbasic_vert,fragmentShader:I.meshbasic_frag},lambert:{uniforms:ua([F.common,F.specularmap,F.envmap,F.aomap,F.lightmap,F.emissivemap,F.fog,F.lights,{emissive:{value:new J(0)}}]),vertexShader:I.meshlambert_vert,fragmentShader:I.meshlambert_frag},phong:{uniforms:ua([F.common,F.specularmap,F.envmap,\nF.aomap,F.lightmap,F.emissivemap,F.bumpmap,F.normalmap,F.displacementmap,F.gradientmap,F.fog,F.lights,{emissive:{value:new J(0)},specular:{value:new J(1118481)},shininess:{value:30}}]),vertexShader:I.meshphong_vert,fragmentShader:I.meshphong_frag},standard:{uniforms:ua([F.common,F.envmap,F.aomap,F.lightmap,F.emissivemap,F.bumpmap,F.normalmap,F.displacementmap,F.roughnessmap,F.metalnessmap,F.fog,F.lights,{emissive:{value:new J(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),\nvertexShader:I.meshphysical_vert,fragmentShader:I.meshphysical_frag},matcap:{uniforms:ua([F.common,F.bumpmap,F.normalmap,F.displacementmap,F.fog,{matcap:{value:null}}]),vertexShader:I.meshmatcap_vert,fragmentShader:I.meshmatcap_frag},points:{uniforms:ua([F.points,F.fog]),vertexShader:I.points_vert,fragmentShader:I.points_frag},dashed:{uniforms:ua([F.common,F.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:I.linedashed_vert,fragmentShader:I.linedashed_frag},depth:{uniforms:ua([F.common,\nF.displacementmap]),vertexShader:I.depth_vert,fragmentShader:I.depth_frag},normal:{uniforms:ua([F.common,F.bumpmap,F.normalmap,F.displacementmap,{opacity:{value:1}}]),vertexShader:I.normal_vert,fragmentShader:I.normal_frag},sprite:{uniforms:ua([F.sprite,F.fog]),vertexShader:I.sprite_vert,fragmentShader:I.sprite_frag},background:{uniforms:{uvTransform:{value:new da},t2D:{value:null}},vertexShader:I.background_vert,fragmentShader:I.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},\nopacity:{value:1}},vertexShader:I.cube_vert,fragmentShader:I.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:I.equirect_vert,fragmentShader:I.equirect_frag},distanceRGBA:{uniforms:ua([F.common,F.displacementmap,{referencePosition:{value:new n},nearDistance:{value:1},farDistance:{value:1E3}}]),vertexShader:I.distanceRGBA_vert,fragmentShader:I.distanceRGBA_frag},shadow:{uniforms:ua([F.lights,F.fog,{color:{value:new J(0)},opacity:{value:1}}]),vertexShader:I.shadow_vert,fragmentShader:I.shadow_frag}};\nQa.physical={uniforms:ua([Qa.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:I.meshphysical_vert,fragmentShader:I.meshphysical_frag};Object.assign(Kb.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.a=a.a;this.b=a.b;this.c=a.c;this.normal.copy(a.normal);this.color.copy(a.color);this.materialIndex=a.materialIndex;for(var b=0,c=a.vertexNormals.length;b<c;b++)this.vertexNormals[b]=a.vertexNormals[b].clone();b=0;for(c=a.vertexColors.length;b<\nc;b++)this.vertexColors[b]=a.vertexColors[b].clone();return this}});lb.RotationOrders=\"XYZ YZX ZXY XZY YXZ ZYX\".split(\" \");lb.DefaultOrder=\"XYZ\";Object.defineProperties(lb.prototype,{x:{get:function(){return this._x},set:function(a){this._x=a;this.onChangeCallback()}},y:{get:function(){return this._y},set:function(a){this._y=a;this.onChangeCallback()}},z:{get:function(){return this._z},set:function(a){this._z=a;this.onChangeCallback()}},order:{get:function(){return this._order},set:function(a){this._order=\na;this.onChangeCallback()}}});Object.assign(lb.prototype,{isEuler:!0,set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._order=d||this._order;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(a){this._x=a._x;this._y=a._y;this._z=a._z;this._order=a._order;this.onChangeCallback();return this},setFromRotationMatrix:function(a,b,c){var d=R.clamp,e=a.elements;a=e[0];var f=e[4],g=e[8],h=e[1],k=e[5],m=e[9],l=e[2],p=\ne[6];e=e[10];b=b||this._order;\"XYZ\"===b?(this._y=Math.asin(d(g,-1,1)),.99999>Math.abs(g)?(this._x=Math.atan2(-m,e),this._z=Math.atan2(-f,a)):(this._x=Math.atan2(p,k),this._z=0)):\"YXZ\"===b?(this._x=Math.asin(-d(m,-1,1)),.99999>Math.abs(m)?(this._y=Math.atan2(g,e),this._z=Math.atan2(h,k)):(this._y=Math.atan2(-l,a),this._z=0)):\"ZXY\"===b?(this._x=Math.asin(d(p,-1,1)),.99999>Math.abs(p)?(this._y=Math.atan2(-l,e),this._z=Math.atan2(-f,k)):(this._y=0,this._z=Math.atan2(h,a))):\"ZYX\"===b?(this._y=Math.asin(-d(l,\n-1,1)),.99999>Math.abs(l)?(this._x=Math.atan2(p,e),this._z=Math.atan2(h,a)):(this._x=0,this._z=Math.atan2(-f,k))):\"YZX\"===b?(this._z=Math.asin(d(h,-1,1)),.99999>Math.abs(h)?(this._x=Math.atan2(-m,k),this._y=Math.atan2(-l,a)):(this._x=0,this._y=Math.atan2(g,e))):\"XZY\"===b?(this._z=Math.asin(-d(f,-1,1)),.99999>Math.abs(f)?(this._x=Math.atan2(p,k),this._y=Math.atan2(g,a)):(this._x=Math.atan2(-m,e),this._y=0)):console.warn(\"THREE.Euler: .setFromRotationMatrix() given unsupported order: \"+b);this._order=\nb;if(!1!==c)this.onChangeCallback();return this},setFromQuaternion:function(){var a=new O;return function(b,c,d){a.makeRotationFromQuaternion(b);return this.setFromRotationMatrix(a,c,d)}}(),setFromVector3:function(a,b){return this.set(a.x,a.y,a.z,b||this._order)},reorder:function(){var a=new ka;return function(b){a.setFromEuler(this);return this.setFromQuaternion(a,b)}}(),equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order},fromArray:function(a){this._x=\na[0];this._y=a[1];this._z=a[2];void 0!==a[3]&&(this._order=a[3]);this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._order;return a},toVector3:function(a){return a?a.set(this._x,this._y,this._z):new n(this._x,this._y,this._z)},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){}});Object.assign(Xd.prototype,{set:function(a){this.mask=1<<a|0},enable:function(a){this.mask=\nthis.mask|1<<a|0},toggle:function(a){this.mask^=1<<a|0},disable:function(a){this.mask&=~(1<<a|0)},test:function(a){return 0!==(this.mask&a.mask)}});var Of=0;C.DefaultUp=new n(0,1,0);C.DefaultMatrixAutoUpdate=!0;C.prototype=Object.assign(Object.create(ja.prototype),{constructor:C,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(a){this.matrix.multiplyMatrices(a,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(a){this.quaternion.premultiply(a);\nreturn this},setRotationFromAxisAngle:function(a,b){this.quaternion.setFromAxisAngle(a,b)},setRotationFromEuler:function(a){this.quaternion.setFromEuler(a,!0)},setRotationFromMatrix:function(a){this.quaternion.setFromRotationMatrix(a)},setRotationFromQuaternion:function(a){this.quaternion.copy(a)},rotateOnAxis:function(){var a=new ka;return function(b,c){a.setFromAxisAngle(b,c);this.quaternion.multiply(a);return this}}(),rotateOnWorldAxis:function(){var a=new ka;return function(b,c){a.setFromAxisAngle(b,\nc);this.quaternion.premultiply(a);return this}}(),rotateX:function(){var a=new n(1,0,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateY:function(){var a=new n(0,1,0);return function(b){return this.rotateOnAxis(a,b)}}(),rotateZ:function(){var a=new n(0,0,1);return function(b){return this.rotateOnAxis(a,b)}}(),translateOnAxis:function(){var a=new n;return function(b,c){a.copy(b).applyQuaternion(this.quaternion);this.position.add(a.multiplyScalar(c));return this}}(),translateX:function(){var a=\nnew n(1,0,0);return function(b){return this.translateOnAxis(a,b)}}(),translateY:function(){var a=new n(0,1,0);return function(b){return this.translateOnAxis(a,b)}}(),translateZ:function(){var a=new n(0,0,1);return function(b){return this.translateOnAxis(a,b)}}(),localToWorld:function(a){return a.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var a=new O;return function(b){return b.applyMatrix4(a.getInverse(this.matrixWorld))}}(),lookAt:function(){var a=new ka,b=new O,c=new n,d=new n;return function(e,\nf,g){e.isVector3?c.copy(e):c.set(e,f,g);e=this.parent;this.updateWorldMatrix(!0,!1);d.setFromMatrixPosition(this.matrixWorld);this.isCamera?b.lookAt(d,c,this.up):b.lookAt(c,d,this.up);this.quaternion.setFromRotationMatrix(b);e&&(b.extractRotation(e.matrixWorld),a.setFromRotationMatrix(b),this.quaternion.premultiply(a.inverse()))}}(),add:function(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++)this.add(arguments[b]);return this}if(a===this)return console.error(\"THREE.Object3D.add: object can't be added as a child of itself.\",\na),this;a&&a.isObject3D?(null!==a.parent&&a.parent.remove(a),a.parent=this,a.dispatchEvent({type:\"added\"}),this.children.push(a)):console.error(\"THREE.Object3D.add: object not an instance of THREE.Object3D.\",a);return this},remove:function(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++)this.remove(arguments[b]);return this}b=this.children.indexOf(a);-1!==b&&(a.parent=null,a.dispatchEvent({type:\"removed\"}),this.children.splice(b,1));return this},getObjectById:function(a){return this.getObjectByProperty(\"id\",\na)},getObjectByName:function(a){return this.getObjectByProperty(\"name\",a)},getObjectByProperty:function(a,b){if(this[a]===b)return this;for(var c=0,d=this.children.length;c<d;c++){var e=this.children[c].getObjectByProperty(a,b);if(void 0!==e)return e}},getWorldPosition:function(a){void 0===a&&(console.warn(\"THREE.Object3D: .getWorldPosition() target is now required\"),a=new n);this.updateMatrixWorld(!0);return a.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var a=new n,b=new n;\nreturn function(c){void 0===c&&(console.warn(\"THREE.Object3D: .getWorldQuaternion() target is now required\"),c=new ka);this.updateMatrixWorld(!0);this.matrixWorld.decompose(a,c,b);return c}}(),getWorldScale:function(){var a=new n,b=new ka;return function(c){void 0===c&&(console.warn(\"THREE.Object3D: .getWorldScale() target is now required\"),c=new n);this.updateMatrixWorld(!0);this.matrixWorld.decompose(a,b,c);return c}}(),getWorldDirection:function(a){void 0===a&&(console.warn(\"THREE.Object3D: .getWorldDirection() target is now required\"),\na=new n);this.updateMatrixWorld(!0);var b=this.matrixWorld.elements;return a.set(b[8],b[9],b[10]).normalize()},raycast:function(){},traverse:function(a){a(this);for(var b=this.children,c=0,d=b.length;c<d;c++)b[c].traverse(a)},traverseVisible:function(a){if(!1!==this.visible){a(this);for(var b=this.children,c=0,d=b.length;c<d;c++)b[c].traverseVisible(a)}},traverseAncestors:function(a){var b=this.parent;null!==b&&(a(b),b.traverseAncestors(a))},updateMatrix:function(){this.matrix.compose(this.position,\nthis.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){this.matrixAutoUpdate&&this.updateMatrix();if(this.matrixWorldNeedsUpdate||a)null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0;for(var b=this.children,c=0,d=b.length;c<d;c++)b[c].updateMatrixWorld(a)},updateWorldMatrix:function(a,b){var c=this.parent;!0===a&&null!==c&&c.updateWorldMatrix(!0,!1);this.matrixAutoUpdate&&\nthis.updateMatrix();null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix);if(!0===b)for(a=this.children,b=0,c=a.length;b<c;b++)a[b].updateWorldMatrix(!1,!0)},toJSON:function(a){function b(b,c){void 0===b[c.uuid]&&(b[c.uuid]=c.toJSON(a));return c.uuid}function c(a){var b=[],c;for(c in a){var d=a[c];delete d.metadata;b.push(d)}return b}var d=void 0===a||\"string\"===typeof a,e={};d&&(a={geometries:{},materials:{},textures:{},images:{},\nshapes:{}},e.metadata={version:4.5,type:\"Object\",generator:\"Object3D.toJSON\"});var f={};f.uuid=this.uuid;f.type=this.type;\"\"!==this.name&&(f.name=this.name);!0===this.castShadow&&(f.castShadow=!0);!0===this.receiveShadow&&(f.receiveShadow=!0);!1===this.visible&&(f.visible=!1);!1===this.frustumCulled&&(f.frustumCulled=!1);0!==this.renderOrder&&(f.renderOrder=this.renderOrder);\"{}\"!==JSON.stringify(this.userData)&&(f.userData=this.userData);f.layers=this.layers.mask;f.matrix=this.matrix.toArray();!1===\nthis.matrixAutoUpdate&&(f.matrixAutoUpdate=!1);if(this.isMesh||this.isLine||this.isPoints){f.geometry=b(a.geometries,this.geometry);var g=this.geometry.parameters;if(void 0!==g&&void 0!==g.shapes)if(g=g.shapes,Array.isArray(g))for(var h=0,k=g.length;h<k;h++)b(a.shapes,g[h]);else b(a.shapes,g)}if(void 0!==this.material)if(Array.isArray(this.material)){g=[];h=0;for(k=this.material.length;h<k;h++)g.push(b(a.materials,this.material[h]));f.material=g}else f.material=b(a.materials,this.material);if(0<this.children.length)for(f.children=\n[],h=0;h<this.children.length;h++)f.children.push(this.children[h].toJSON(a).object);if(d){d=c(a.geometries);h=c(a.materials);k=c(a.textures);var m=c(a.images);g=c(a.shapes);0<d.length&&(e.geometries=d);0<h.length&&(e.materials=h);0<k.length&&(e.textures=k);0<m.length&&(e.images=m);0<g.length&&(e.shapes=g)}e.object=f;return e},clone:function(a){return(new this.constructor).copy(this,a)},copy:function(a,b){void 0===b&&(b=!0);this.name=a.name;this.up.copy(a.up);this.position.copy(a.position);this.quaternion.copy(a.quaternion);\nthis.scale.copy(a.scale);this.matrix.copy(a.matrix);this.matrixWorld.copy(a.matrixWorld);this.matrixAutoUpdate=a.matrixAutoUpdate;this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate;this.layers.mask=a.layers.mask;this.visible=a.visible;this.castShadow=a.castShadow;this.receiveShadow=a.receiveShadow;this.frustumCulled=a.frustumCulled;this.renderOrder=a.renderOrder;this.userData=JSON.parse(JSON.stringify(a.userData));if(!0===b)for(b=0;b<a.children.length;b++)this.add(a.children[b].clone());return this}});\nvar Pf=0;Q.prototype=Object.assign(Object.create(ja.prototype),{constructor:Q,isGeometry:!0,applyMatrix:function(a){for(var b=(new da).getNormalMatrix(a),c=0,d=this.vertices.length;c<d;c++)this.vertices[c].applyMatrix4(a);c=0;for(d=this.faces.length;c<d;c++){a=this.faces[c];a.normal.applyMatrix3(b).normalize();for(var e=0,f=a.vertexNormals.length;e<f;e++)a.vertexNormals[e].applyMatrix3(b).normalize()}null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();\nthis.normalsNeedUpdate=this.verticesNeedUpdate=!0;return this},rotateX:function(){var a=new O;return function(b){a.makeRotationX(b);this.applyMatrix(a);return this}}(),rotateY:function(){var a=new O;return function(b){a.makeRotationY(b);this.applyMatrix(a);return this}}(),rotateZ:function(){var a=new O;return function(b){a.makeRotationZ(b);this.applyMatrix(a);return this}}(),translate:function(){var a=new O;return function(b,c,d){a.makeTranslation(b,c,d);this.applyMatrix(a);return this}}(),scale:function(){var a=\nnew O;return function(b,c,d){a.makeScale(b,c,d);this.applyMatrix(a);return this}}(),lookAt:function(){var a=new C;return function(b){a.lookAt(b);a.updateMatrix();this.applyMatrix(a.matrix)}}(),fromBufferGeometry:function(a){function b(a,b,d,e){var f=void 0===h?[]:[c.colors[a].clone(),c.colors[b].clone(),c.colors[d].clone()],l=void 0===g?[]:[(new n).fromArray(g,3*a),(new n).fromArray(g,3*b),(new n).fromArray(g,3*d)];e=new Kb(a,b,d,l,f,e);c.faces.push(e);void 0!==k&&c.faceVertexUvs[0].push([(new z).fromArray(k,\n2*a),(new z).fromArray(k,2*b),(new z).fromArray(k,2*d)]);void 0!==m&&c.faceVertexUvs[1].push([(new z).fromArray(m,2*a),(new z).fromArray(m,2*b),(new z).fromArray(m,2*d)])}var c=this,d=null!==a.index?a.index.array:void 0,e=a.attributes,f=e.position.array,g=void 0!==e.normal?e.normal.array:void 0,h=void 0!==e.color?e.color.array:void 0,k=void 0!==e.uv?e.uv.array:void 0,m=void 0!==e.uv2?e.uv2.array:void 0;void 0!==m&&(this.faceVertexUvs[1]=[]);for(var l=e=0;e<f.length;e+=3,l+=2)c.vertices.push((new n).fromArray(f,\ne)),void 0!==h&&c.colors.push((new J).fromArray(h,e));var p=a.groups;if(0<p.length)for(e=0;e<p.length;e++){f=p[e];var r=f.start,x=f.count;l=r;for(r+=x;l<r;l+=3)void 0!==d?b(d[l],d[l+1],d[l+2],f.materialIndex):b(l,l+1,l+2,f.materialIndex)}else if(void 0!==d)for(e=0;e<d.length;e+=3)b(d[e],d[e+1],d[e+2]);else for(e=0;e<f.length/3;e+=3)b(e,e+1,e+2);this.computeFaceNormals();null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());\nreturn this},center:function(){var a=new n;return function(){this.computeBoundingBox();this.boundingBox.getCenter(a).negate();this.translate(a.x,a.y,a.z);return this}}(),normalize:function(){this.computeBoundingSphere();var a=this.boundingSphere.center,b=this.boundingSphere.radius;b=0===b?1:1/b;var c=new O;c.set(b,0,0,-b*a.x,0,b,0,-b*a.y,0,0,b,-b*a.z,0,0,0,1);this.applyMatrix(c);return this},computeFaceNormals:function(){for(var a=new n,b=new n,c=0,d=this.faces.length;c<d;c++){var e=this.faces[c],\nf=this.vertices[e.a],g=this.vertices[e.b];a.subVectors(this.vertices[e.c],g);b.subVectors(f,g);a.cross(b);a.normalize();e.normal.copy(a)}},computeVertexNormals:function(a){void 0===a&&(a=!0);var b;var c=Array(this.vertices.length);var d=0;for(b=this.vertices.length;d<b;d++)c[d]=new n;if(a){var e=new n,f=new n;a=0;for(d=this.faces.length;a<d;a++){b=this.faces[a];var g=this.vertices[b.a];var h=this.vertices[b.b];var k=this.vertices[b.c];e.subVectors(k,h);f.subVectors(g,h);e.cross(f);c[b.a].add(e);c[b.b].add(e);\nc[b.c].add(e)}}else for(this.computeFaceNormals(),a=0,d=this.faces.length;a<d;a++)b=this.faces[a],c[b.a].add(b.normal),c[b.b].add(b.normal),c[b.c].add(b.normal);d=0;for(b=this.vertices.length;d<b;d++)c[d].normalize();a=0;for(d=this.faces.length;a<d;a++)b=this.faces[a],g=b.vertexNormals,3===g.length?(g[0].copy(c[b.a]),g[1].copy(c[b.b]),g[2].copy(c[b.c])):(g[0]=c[b.a].clone(),g[1]=c[b.b].clone(),g[2]=c[b.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var a;\nthis.computeFaceNormals();var b=0;for(a=this.faces.length;b<a;b++){var c=this.faces[b];var d=c.vertexNormals;3===d.length?(d[0].copy(c.normal),d[1].copy(c.normal),d[2].copy(c.normal)):(d[0]=c.normal.clone(),d[1]=c.normal.clone(),d[2]=c.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var a,b;var c=0;for(b=this.faces.length;c<b;c++){var d=this.faces[c];d.__originalFaceNormal?d.__originalFaceNormal.copy(d.normal):d.__originalFaceNormal=d.normal.clone();\nd.__originalVertexNormals||(d.__originalVertexNormals=[]);var e=0;for(a=d.vertexNormals.length;e<a;e++)d.__originalVertexNormals[e]?d.__originalVertexNormals[e].copy(d.vertexNormals[e]):d.__originalVertexNormals[e]=d.vertexNormals[e].clone()}var f=new Q;f.faces=this.faces;e=0;for(a=this.morphTargets.length;e<a;e++){if(!this.morphNormals[e]){this.morphNormals[e]={};this.morphNormals[e].faceNormals=[];this.morphNormals[e].vertexNormals=[];d=this.morphNormals[e].faceNormals;var g=this.morphNormals[e].vertexNormals;\nc=0;for(b=this.faces.length;c<b;c++){var h=new n;var k={a:new n,b:new n,c:new n};d.push(h);g.push(k)}}g=this.morphNormals[e];f.vertices=this.morphTargets[e].vertices;f.computeFaceNormals();f.computeVertexNormals();c=0;for(b=this.faces.length;c<b;c++)d=this.faces[c],h=g.faceNormals[c],k=g.vertexNormals[c],h.copy(d.normal),k.a.copy(d.vertexNormals[0]),k.b.copy(d.vertexNormals[1]),k.c.copy(d.vertexNormals[2])}c=0;for(b=this.faces.length;c<b;c++)d=this.faces[c],d.normal=d.__originalFaceNormal,d.vertexNormals=\nd.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Wa);this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Ea);this.boundingSphere.setFromPoints(this.vertices)},merge:function(a,b,c){if(a&&a.isGeometry){var d,e=this.vertices.length,f=this.vertices,g=a.vertices,h=this.faces,k=a.faces,m=this.faceVertexUvs[0],l=a.faceVertexUvs[0],p=this.colors,r=a.colors;void 0===c&&(c=\n0);void 0!==b&&(d=(new da).getNormalMatrix(b));a=0;for(var n=g.length;a<n;a++){var t=g[a].clone();void 0!==b&&t.applyMatrix4(b);f.push(t)}a=0;for(n=r.length;a<n;a++)p.push(r[a].clone());a=0;for(n=k.length;a<n;a++){g=k[a];var v=g.vertexNormals;r=g.vertexColors;p=new Kb(g.a+e,g.b+e,g.c+e);p.normal.copy(g.normal);void 0!==d&&p.normal.applyMatrix3(d).normalize();b=0;for(f=v.length;b<f;b++)t=v[b].clone(),void 0!==d&&t.applyMatrix3(d).normalize(),p.vertexNormals.push(t);p.color.copy(g.color);b=0;for(f=\nr.length;b<f;b++)t=r[b],p.vertexColors.push(t.clone());p.materialIndex=g.materialIndex+c;h.push(p)}a=0;for(n=l.length;a<n;a++)if(c=l[a],d=[],void 0!==c){b=0;for(f=c.length;b<f;b++)d.push(c[b].clone());m.push(d)}}else console.error(\"THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.\",a)},mergeMesh:function(a){a&&a.isMesh?(a.matrixAutoUpdate&&a.updateMatrix(),this.merge(a.geometry,a.matrix)):console.error(\"THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.\",a)},mergeVertices:function(){var a=\n{},b=[],c=[],d=Math.pow(10,4),e;var f=0;for(e=this.vertices.length;f<e;f++){var g=this.vertices[f];g=Math.round(g.x*d)+\"_\"+Math.round(g.y*d)+\"_\"+Math.round(g.z*d);void 0===a[g]?(a[g]=f,b.push(this.vertices[f]),c[f]=b.length-1):c[f]=c[a[g]]}a=[];f=0;for(e=this.faces.length;f<e;f++)for(d=this.faces[f],d.a=c[d.a],d.b=c[d.b],d.c=c[d.c],d=[d.a,d.b,d.c],g=0;3>g;g++)if(d[g]===d[(g+1)%3]){a.push(f);break}for(f=a.length-1;0<=f;f--)for(d=a[f],this.faces.splice(d,1),c=0,e=this.faceVertexUvs.length;c<e;c++)this.faceVertexUvs[c].splice(d,\n1);f=this.vertices.length-b.length;this.vertices=b;return f},setFromPoints:function(a){this.vertices=[];for(var b=0,c=a.length;b<c;b++){var d=a[b];this.vertices.push(new n(d.x,d.y,d.z||0))}return this},sortFacesByMaterialIndex:function(){for(var a=this.faces,b=a.length,c=0;c<b;c++)a[c]._id=c;a.sort(function(a,b){return a.materialIndex-b.materialIndex});var d=this.faceVertexUvs[0],e=this.faceVertexUvs[1],f,g;d&&d.length===b&&(f=[]);e&&e.length===b&&(g=[]);for(c=0;c<b;c++){var h=a[c]._id;f&&f.push(d[h]);\ng&&g.push(e[h])}f&&(this.faceVertexUvs[0]=f);g&&(this.faceVertexUvs[1]=g)},toJSON:function(){function a(a,b,c){return c?a|1<<b:a&~(1<<b)}function b(a){var b=a.x.toString()+a.y.toString()+a.z.toString();if(void 0!==m[b])return m[b];m[b]=k.length/3;k.push(a.x,a.y,a.z);return m[b]}function c(a){var b=a.r.toString()+a.g.toString()+a.b.toString();if(void 0!==p[b])return p[b];p[b]=l.length;l.push(a.getHex());return p[b]}function d(a){var b=a.x.toString()+a.y.toString();if(void 0!==n[b])return n[b];n[b]=\nr.length/2;r.push(a.x,a.y);return n[b]}var e={metadata:{version:4.5,type:\"Geometry\",generator:\"Geometry.toJSON\"}};e.uuid=this.uuid;e.type=this.type;\"\"!==this.name&&(e.name=this.name);if(void 0!==this.parameters){var f=this.parameters,g;for(g in f)void 0!==f[g]&&(e[g]=f[g]);return e}f=[];for(g=0;g<this.vertices.length;g++){var h=this.vertices[g];f.push(h.x,h.y,h.z)}h=[];var k=[],m={},l=[],p={},r=[],n={};for(g=0;g<this.faces.length;g++){var t=this.faces[g],v=void 0!==this.faceVertexUvs[0][g],w=0<t.normal.length(),\ny=0<t.vertexNormals.length,u=1!==t.color.r||1!==t.color.g||1!==t.color.b,z=0<t.vertexColors.length,G=0;G=a(G,0,0);G=a(G,1,!0);G=a(G,2,!1);G=a(G,3,v);G=a(G,4,w);G=a(G,5,y);G=a(G,6,u);G=a(G,7,z);h.push(G);h.push(t.a,t.b,t.c);h.push(t.materialIndex);v&&(v=this.faceVertexUvs[0][g],h.push(d(v[0]),d(v[1]),d(v[2])));w&&h.push(b(t.normal));y&&(w=t.vertexNormals,h.push(b(w[0]),b(w[1]),b(w[2])));u&&h.push(c(t.color));z&&(t=t.vertexColors,h.push(c(t[0]),c(t[1]),c(t[2])))}e.data={};e.data.vertices=f;e.data.normals=\nk;0<l.length&&(e.data.colors=l);0<r.length&&(e.data.uvs=[r]);e.data.faces=h;return e},clone:function(){return(new Q).copy(this)},copy:function(a){var b,c,d;this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.name=a.name;var e=a.vertices;var f=0;for(b=e.length;f<b;f++)this.vertices.push(e[f].clone());e=a.colors;f=0;for(b=e.length;f<\nb;f++)this.colors.push(e[f].clone());e=a.faces;f=0;for(b=e.length;f<b;f++)this.faces.push(e[f].clone());f=0;for(b=a.faceVertexUvs.length;f<b;f++){var g=a.faceVertexUvs[f];void 0===this.faceVertexUvs[f]&&(this.faceVertexUvs[f]=[]);e=0;for(c=g.length;e<c;e++){var h=g[e],k=[];var m=0;for(d=h.length;m<d;m++)k.push(h[m].clone());this.faceVertexUvs[f].push(k)}}m=a.morphTargets;f=0;for(b=m.length;f<b;f++){d={};d.name=m[f].name;if(void 0!==m[f].vertices)for(d.vertices=[],e=0,c=m[f].vertices.length;e<c;e++)d.vertices.push(m[f].vertices[e].clone());\nif(void 0!==m[f].normals)for(d.normals=[],e=0,c=m[f].normals.length;e<c;e++)d.normals.push(m[f].normals[e].clone());this.morphTargets.push(d)}m=a.morphNormals;f=0;for(b=m.length;f<b;f++){d={};if(void 0!==m[f].vertexNormals)for(d.vertexNormals=[],e=0,c=m[f].vertexNormals.length;e<c;e++)g=m[f].vertexNormals[e],h={},h.a=g.a.clone(),h.b=g.b.clone(),h.c=g.c.clone(),d.vertexNormals.push(h);if(void 0!==m[f].faceNormals)for(d.faceNormals=[],e=0,c=m[f].faceNormals.length;e<c;e++)d.faceNormals.push(m[f].faceNormals[e].clone());\nthis.morphNormals.push(d)}e=a.skinWeights;f=0;for(b=e.length;f<b;f++)this.skinWeights.push(e[f].clone());e=a.skinIndices;f=0;for(b=e.length;f<b;f++)this.skinIndices.push(e[f].clone());e=a.lineDistances;f=0;for(b=e.length;f<b;f++)this.lineDistances.push(e[f]);f=a.boundingBox;null!==f&&(this.boundingBox=f.clone());f=a.boundingSphere;null!==f&&(this.boundingSphere=f.clone());this.elementsNeedUpdate=a.elementsNeedUpdate;this.verticesNeedUpdate=a.verticesNeedUpdate;this.uvsNeedUpdate=a.uvsNeedUpdate;this.normalsNeedUpdate=\na.normalsNeedUpdate;this.colorsNeedUpdate=a.colorsNeedUpdate;this.lineDistancesNeedUpdate=a.lineDistancesNeedUpdate;this.groupsNeedUpdate=a.groupsNeedUpdate;return this},dispose:function(){this.dispatchEvent({type:\"dispose\"})}});Object.defineProperty(E.prototype,\"needsUpdate\",{set:function(a){!0===a&&this.version++}});Object.assign(E.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(a){if(Array.isArray(a))throw new TypeError(\"THREE.BufferAttribute: array should be a Typed Array.\");\nthis.count=void 0!==a?a.length/this.itemSize:0;this.array=a;return this},setDynamic:function(a){this.dynamic=a;return this},copy:function(a){this.name=a.name;this.array=new a.array.constructor(a.array);this.itemSize=a.itemSize;this.count=a.count;this.normalized=a.normalized;this.dynamic=a.dynamic;return this},copyAt:function(a,b,c){a*=this.itemSize;c*=b.itemSize;for(var d=0,e=this.itemSize;d<e;d++)this.array[a+d]=b.array[c+d];return this},copyArray:function(a){this.array.set(a);return this},copyColorsArray:function(a){for(var b=\nthis.array,c=0,d=0,e=a.length;d<e;d++){var f=a[d];void 0===f&&(console.warn(\"THREE.BufferAttribute.copyColorsArray(): color is undefined\",d),f=new J);b[c++]=f.r;b[c++]=f.g;b[c++]=f.b}return this},copyVector2sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=a[d];void 0===f&&(console.warn(\"THREE.BufferAttribute.copyVector2sArray(): vector is undefined\",d),f=new z);b[c++]=f.x;b[c++]=f.y}return this},copyVector3sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=\na[d];void 0===f&&(console.warn(\"THREE.BufferAttribute.copyVector3sArray(): vector is undefined\",d),f=new n);b[c++]=f.x;b[c++]=f.y;b[c++]=f.z}return this},copyVector4sArray:function(a){for(var b=this.array,c=0,d=0,e=a.length;d<e;d++){var f=a[d];void 0===f&&(console.warn(\"THREE.BufferAttribute.copyVector4sArray(): vector is undefined\",d),f=new ca);b[c++]=f.x;b[c++]=f.y;b[c++]=f.z;b[c++]=f.w}return this},set:function(a,b){void 0===b&&(b=0);this.array.set(a,b);return this},getX:function(a){return this.array[a*\nthis.itemSize]},setX:function(a,b){this.array[a*this.itemSize]=b;return this},getY:function(a){return this.array[a*this.itemSize+1]},setY:function(a,b){this.array[a*this.itemSize+1]=b;return this},getZ:function(a){return this.array[a*this.itemSize+2]},setZ:function(a,b){this.array[a*this.itemSize+2]=b;return this},getW:function(a){return this.array[a*this.itemSize+3]},setW:function(a,b){this.array[a*this.itemSize+3]=b;return this},setXY:function(a,b,c){a*=this.itemSize;this.array[a+0]=b;this.array[a+\n1]=c;return this},setXYZ:function(a,b,c,d){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=d;return this},setXYZW:function(a,b,c,d,e){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=d;this.array[a+3]=e;return this},onUpload:function(a){this.onUploadCallback=a;return this},clone:function(){return(new this.constructor(this.array,this.itemSize)).copy(this)}});tc.prototype=Object.create(E.prototype);tc.prototype.constructor=tc;uc.prototype=Object.create(E.prototype);\nuc.prototype.constructor=uc;vc.prototype=Object.create(E.prototype);vc.prototype.constructor=vc;wc.prototype=Object.create(E.prototype);wc.prototype.constructor=wc;mb.prototype=Object.create(E.prototype);mb.prototype.constructor=mb;xc.prototype=Object.create(E.prototype);xc.prototype.constructor=xc;nb.prototype=Object.create(E.prototype);nb.prototype.constructor=nb;B.prototype=Object.create(E.prototype);B.prototype.constructor=B;yc.prototype=Object.create(E.prototype);yc.prototype.constructor=yc;\nObject.assign(Je.prototype,{computeGroups:function(a){var b=[],c=void 0;a=a.faces;for(var d=0;d<a.length;d++){var e=a[d];if(e.materialIndex!==c){c=e.materialIndex;void 0!==f&&(f.count=3*d-f.start,b.push(f));var f={start:3*d,materialIndex:c}}}void 0!==f&&(f.count=3*d-f.start,b.push(f));this.groups=b},fromGeometry:function(a){var b=a.faces,c=a.vertices,d=a.faceVertexUvs,e=d[0]&&0<d[0].length,f=d[1]&&0<d[1].length,g=a.morphTargets,h=g.length;if(0<h){var k=[];for(var m=0;m<h;m++)k[m]={name:g[m].name,\ndata:[]};this.morphTargets.position=k}var l=a.morphNormals,p=l.length;if(0<p){var r=[];for(m=0;m<p;m++)r[m]={name:l[m].name,data:[]};this.morphTargets.normal=r}var n=a.skinIndices,t=a.skinWeights,v=n.length===c.length,w=t.length===c.length;0<c.length&&0===b.length&&console.error(\"THREE.DirectGeometry: Faceless geometries are not supported.\");for(m=0;m<b.length;m++){var y=b[m];this.vertices.push(c[y.a],c[y.b],c[y.c]);var u=y.vertexNormals;3===u.length?this.normals.push(u[0],u[1],u[2]):(u=y.normal,\nthis.normals.push(u,u,u));u=y.vertexColors;3===u.length?this.colors.push(u[0],u[1],u[2]):(u=y.color,this.colors.push(u,u,u));!0===e&&(u=d[0][m],void 0!==u?this.uvs.push(u[0],u[1],u[2]):(console.warn(\"THREE.DirectGeometry.fromGeometry(): Undefined vertexUv \",m),this.uvs.push(new z,new z,new z)));!0===f&&(u=d[1][m],void 0!==u?this.uvs2.push(u[0],u[1],u[2]):(console.warn(\"THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 \",m),this.uvs2.push(new z,new z,new z)));for(u=0;u<h;u++){var H=g[u].vertices;\nk[u].data.push(H[y.a],H[y.b],H[y.c])}for(u=0;u<p;u++)H=l[u].vertexNormals[m],r[u].data.push(H.a,H.b,H.c);v&&this.skinIndices.push(n[y.a],n[y.b],n[y.c]);w&&this.skinWeights.push(t[y.a],t[y.b],t[y.c])}this.computeGroups(a);this.verticesNeedUpdate=a.verticesNeedUpdate;this.normalsNeedUpdate=a.normalsNeedUpdate;this.colorsNeedUpdate=a.colorsNeedUpdate;this.uvsNeedUpdate=a.uvsNeedUpdate;this.groupsNeedUpdate=a.groupsNeedUpdate;return this}});var Qf=1;D.prototype=Object.assign(Object.create(ja.prototype),\n{constructor:D,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(a){Array.isArray(a)?this.index=new (65535<Ke(a)?nb:mb)(a,1):this.index=a},addAttribute:function(a,b,c){if(!(b&&b.isBufferAttribute||b&&b.isInterleavedBufferAttribute))return console.warn(\"THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).\"),this.addAttribute(a,new E(b,c));if(\"index\"===a)return console.warn(\"THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.\"),this.setIndex(b),\nthis;this.attributes[a]=b;return this},getAttribute:function(a){return this.attributes[a]},removeAttribute:function(a){delete this.attributes[a];return this},addGroup:function(a,b,c){this.groups.push({start:a,count:b,materialIndex:void 0!==c?c:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(a,b){this.drawRange.start=a;this.drawRange.count=b},applyMatrix:function(a){var b=this.attributes.position;void 0!==b&&(a.applyToBufferAttribute(b),b.needsUpdate=!0);b=this.attributes.normal;\nvoid 0!==b&&((new da).getNormalMatrix(a).applyToBufferAttribute(b),b.needsUpdate=!0);null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();return this},rotateX:function(){var a=new O;return function(b){a.makeRotationX(b);this.applyMatrix(a);return this}}(),rotateY:function(){var a=new O;return function(b){a.makeRotationY(b);this.applyMatrix(a);return this}}(),rotateZ:function(){var a=new O;return function(b){a.makeRotationZ(b);this.applyMatrix(a);\nreturn this}}(),translate:function(){var a=new O;return function(b,c,d){a.makeTranslation(b,c,d);this.applyMatrix(a);return this}}(),scale:function(){var a=new O;return function(b,c,d){a.makeScale(b,c,d);this.applyMatrix(a);return this}}(),lookAt:function(){var a=new C;return function(b){a.lookAt(b);a.updateMatrix();this.applyMatrix(a.matrix)}}(),center:function(){var a=new n;return function(){this.computeBoundingBox();this.boundingBox.getCenter(a).negate();this.translate(a.x,a.y,a.z);return this}}(),\nsetFromObject:function(a){var b=a.geometry;if(a.isPoints||a.isLine){a=new B(3*b.vertices.length,3);var c=new B(3*b.colors.length,3);this.addAttribute(\"position\",a.copyVector3sArray(b.vertices));this.addAttribute(\"color\",c.copyColorsArray(b.colors));b.lineDistances&&b.lineDistances.length===b.vertices.length&&(a=new B(b.lineDistances.length,1),this.addAttribute(\"lineDistance\",a.copyArray(b.lineDistances)));null!==b.boundingSphere&&(this.boundingSphere=b.boundingSphere.clone());null!==b.boundingBox&&\n(this.boundingBox=b.boundingBox.clone())}else a.isMesh&&b&&b.isGeometry&&this.fromGeometry(b);return this},setFromPoints:function(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c];b.push(e.x,e.y,e.z||0)}this.addAttribute(\"position\",new B(b,3));return this},updateFromObject:function(a){var b=a.geometry;if(a.isMesh){var c=b.__directGeometry;!0===b.elementsNeedUpdate&&(c=void 0,b.elementsNeedUpdate=!1);if(void 0===c)return this.fromGeometry(b);c.verticesNeedUpdate=b.verticesNeedUpdate;c.normalsNeedUpdate=\nb.normalsNeedUpdate;c.colorsNeedUpdate=b.colorsNeedUpdate;c.uvsNeedUpdate=b.uvsNeedUpdate;c.groupsNeedUpdate=b.groupsNeedUpdate;b.verticesNeedUpdate=!1;b.normalsNeedUpdate=!1;b.colorsNeedUpdate=!1;b.uvsNeedUpdate=!1;b.groupsNeedUpdate=!1;b=c}!0===b.verticesNeedUpdate&&(c=this.attributes.position,void 0!==c&&(c.copyVector3sArray(b.vertices),c.needsUpdate=!0),b.verticesNeedUpdate=!1);!0===b.normalsNeedUpdate&&(c=this.attributes.normal,void 0!==c&&(c.copyVector3sArray(b.normals),c.needsUpdate=!0),b.normalsNeedUpdate=\n!1);!0===b.colorsNeedUpdate&&(c=this.attributes.color,void 0!==c&&(c.copyColorsArray(b.colors),c.needsUpdate=!0),b.colorsNeedUpdate=!1);b.uvsNeedUpdate&&(c=this.attributes.uv,void 0!==c&&(c.copyVector2sArray(b.uvs),c.needsUpdate=!0),b.uvsNeedUpdate=!1);b.lineDistancesNeedUpdate&&(c=this.attributes.lineDistance,void 0!==c&&(c.copyArray(b.lineDistances),c.needsUpdate=!0),b.lineDistancesNeedUpdate=!1);b.groupsNeedUpdate&&(b.computeGroups(a.geometry),this.groups=b.groups,b.groupsNeedUpdate=!1);return this},\nfromGeometry:function(a){a.__directGeometry=(new Je).fromGeometry(a);return this.fromDirectGeometry(a.__directGeometry)},fromDirectGeometry:function(a){var b=new Float32Array(3*a.vertices.length);this.addAttribute(\"position\",(new E(b,3)).copyVector3sArray(a.vertices));0<a.normals.length&&(b=new Float32Array(3*a.normals.length),this.addAttribute(\"normal\",(new E(b,3)).copyVector3sArray(a.normals)));0<a.colors.length&&(b=new Float32Array(3*a.colors.length),this.addAttribute(\"color\",(new E(b,3)).copyColorsArray(a.colors)));\n0<a.uvs.length&&(b=new Float32Array(2*a.uvs.length),this.addAttribute(\"uv\",(new E(b,2)).copyVector2sArray(a.uvs)));0<a.uvs2.length&&(b=new Float32Array(2*a.uvs2.length),this.addAttribute(\"uv2\",(new E(b,2)).copyVector2sArray(a.uvs2)));this.groups=a.groups;for(var c in a.morphTargets){b=[];for(var d=a.morphTargets[c],e=0,f=d.length;e<f;e++){var g=d[e],h=new B(3*g.data.length,3);h.name=g.name;b.push(h.copyVector3sArray(g.data))}this.morphAttributes[c]=b}0<a.skinIndices.length&&(c=new B(4*a.skinIndices.length,\n4),this.addAttribute(\"skinIndex\",c.copyVector4sArray(a.skinIndices)));0<a.skinWeights.length&&(c=new B(4*a.skinWeights.length,4),this.addAttribute(\"skinWeight\",c.copyVector4sArray(a.skinWeights)));null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());return this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Wa);var a=this.attributes.position;void 0!==a?this.boundingBox.setFromBufferAttribute(a):\nthis.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var a=new Wa,b=new n;return function(){null===this.boundingSphere&&(this.boundingSphere=new Ea);var c=this.attributes.position;if(c){var d=this.boundingSphere.center;a.setFromBufferAttribute(c);\na.getCenter(d);for(var e=0,f=0,g=c.count;f<g;f++)b.x=c.getX(f),b.y=c.getY(f),b.z=c.getZ(f),e=Math.max(e,d.distanceToSquared(b));this.boundingSphere.radius=Math.sqrt(e);isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var a=this.index,b=this.attributes;if(b.position){var c=b.position.array;if(void 0===\nb.normal)this.addAttribute(\"normal\",new E(new Float32Array(c.length),3));else for(var d=b.normal.array,e=0,f=d.length;e<f;e++)d[e]=0;d=b.normal.array;var g=new n,h=new n,k=new n,m=new n,l=new n;if(a){var p=a.array;e=0;for(f=a.count;e<f;e+=3){a=3*p[e+0];var r=3*p[e+1];var x=3*p[e+2];g.fromArray(c,a);h.fromArray(c,r);k.fromArray(c,x);m.subVectors(k,h);l.subVectors(g,h);m.cross(l);d[a]+=m.x;d[a+1]+=m.y;d[a+2]+=m.z;d[r]+=m.x;d[r+1]+=m.y;d[r+2]+=m.z;d[x]+=m.x;d[x+1]+=m.y;d[x+2]+=m.z}}else for(e=0,f=c.length;e<\nf;e+=9)g.fromArray(c,e),h.fromArray(c,e+3),k.fromArray(c,e+6),m.subVectors(k,h),l.subVectors(g,h),m.cross(l),d[e]=m.x,d[e+1]=m.y,d[e+2]=m.z,d[e+3]=m.x,d[e+4]=m.y,d[e+5]=m.z,d[e+6]=m.x,d[e+7]=m.y,d[e+8]=m.z;this.normalizeNormals();b.normal.needsUpdate=!0}},merge:function(a,b){if(a&&a.isBufferGeometry){void 0===b&&(b=0,console.warn(\"THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge.\"));var c=this.attributes,\nd;for(d in c)if(void 0!==a.attributes[d]){var e=c[d].array,f=a.attributes[d],g=f.array,h=0;for(f=f.itemSize*b;h<g.length;h++,f++)e[f]=g[h]}return this}console.error(\"THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.\",a)},normalizeNormals:function(){var a=new n;return function(){for(var b=this.attributes.normal,c=0,d=b.count;c<d;c++)a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.normalize(),b.setXYZ(c,a.x,a.y,a.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn(\"THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.\"),\nthis;var a=new D,b=this.index.array,c=this.attributes,d;for(d in c){var e=c[d],f=e.array,g=e.itemSize,h=new f.constructor(b.length*g),k=0;e=0;for(var m=b.length;e<m;e++){var l=b[e]*g;for(var p=0;p<g;p++)h[k++]=f[l++]}a.addAttribute(d,new E(h,g))}b=this.groups;e=0;for(m=b.length;e<m;e++)c=b[e],a.addGroup(c.start,c.count,c.materialIndex);return a},toJSON:function(){var a={metadata:{version:4.5,type:\"BufferGeometry\",generator:\"BufferGeometry.toJSON\"}};a.uuid=this.uuid;a.type=this.type;\"\"!==this.name&&\n(a.name=this.name);0<Object.keys(this.userData).length&&(a.userData=this.userData);if(void 0!==this.parameters){var b=this.parameters;for(e in b)void 0!==b[e]&&(a[e]=b[e]);return a}a.data={attributes:{}};var c=this.index;null!==c&&(b=Array.prototype.slice.call(c.array),a.data.index={type:c.array.constructor.name,array:b});c=this.attributes;for(e in c){var d=c[e];b=Array.prototype.slice.call(d.array);a.data.attributes[e]={itemSize:d.itemSize,type:d.array.constructor.name,array:b,normalized:d.normalized}}var e=\nthis.groups;0<e.length&&(a.data.groups=JSON.parse(JSON.stringify(e)));e=this.boundingSphere;null!==e&&(a.data.boundingSphere={center:e.center.toArray(),radius:e.radius});return a},clone:function(){return(new D).copy(this)},copy:function(a){var b;this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.name=a.name;var c=a.index;null!==c&&this.setIndex(c.clone());c=a.attributes;for(g in c)this.addAttribute(g,c[g].clone());var d=a.morphAttributes;\nfor(g in d){var e=[],f=d[g];c=0;for(b=f.length;c<b;c++)e.push(f[c].clone());this.morphAttributes[g]=e}var g=a.groups;c=0;for(b=g.length;c<b;c++)d=g[c],this.addGroup(d.start,d.count,d.materialIndex);g=a.boundingBox;null!==g&&(this.boundingBox=g.clone());g=a.boundingSphere;null!==g&&(this.boundingSphere=g.clone());this.drawRange.start=a.drawRange.start;this.drawRange.count=a.drawRange.count;this.userData=a.userData;return this},dispose:function(){this.dispatchEvent({type:\"dispose\"})}});Lb.prototype=\nObject.create(Q.prototype);Lb.prototype.constructor=Lb;ob.prototype=Object.create(D.prototype);ob.prototype.constructor=ob;zc.prototype=Object.create(Q.prototype);zc.prototype.constructor=zc;pb.prototype=Object.create(D.prototype);pb.prototype.constructor=pb;var Rf=0;L.prototype=Object.assign(Object.create(ja.prototype),{constructor:L,isMaterial:!0,onBeforeCompile:function(){},setValues:function(a){if(void 0!==a)for(var b in a){var c=a[b];if(void 0===c)console.warn(\"THREE.Material: '\"+b+\"' parameter is undefined.\");\nelse if(\"shading\"===b)console.warn(\"THREE.\"+this.type+\": .shading has been removed. Use the boolean .flatShading instead.\"),this.flatShading=1===c?!0:!1;else{var d=this[b];void 0===d?console.warn(\"THREE.\"+this.type+\": '\"+b+\"' is not a property of this material.\"):d&&d.isColor?d.set(c):d&&d.isVector3&&c&&c.isVector3?d.copy(c):this[b]=c}}},toJSON:function(a){function b(a){var b=[],c;for(c in a){var d=a[c];delete d.metadata;b.push(d)}return b}var c=void 0===a||\"string\"===typeof a;c&&(a={textures:{},\nimages:{}});var d={metadata:{version:4.5,type:\"Material\",generator:\"Material.toJSON\"}};d.uuid=this.uuid;d.type=this.type;\"\"!==this.name&&(d.name=this.name);this.color&&this.color.isColor&&(d.color=this.color.getHex());void 0!==this.roughness&&(d.roughness=this.roughness);void 0!==this.metalness&&(d.metalness=this.metalness);this.emissive&&this.emissive.isColor&&(d.emissive=this.emissive.getHex());1!==this.emissiveIntensity&&(d.emissiveIntensity=this.emissiveIntensity);this.specular&&this.specular.isColor&&\n(d.specular=this.specular.getHex());void 0!==this.shininess&&(d.shininess=this.shininess);void 0!==this.clearCoat&&(d.clearCoat=this.clearCoat);void 0!==this.clearCoatRoughness&&(d.clearCoatRoughness=this.clearCoatRoughness);this.map&&this.map.isTexture&&(d.map=this.map.toJSON(a).uuid);this.alphaMap&&this.alphaMap.isTexture&&(d.alphaMap=this.alphaMap.toJSON(a).uuid);this.lightMap&&this.lightMap.isTexture&&(d.lightMap=this.lightMap.toJSON(a).uuid);this.aoMap&&this.aoMap.isTexture&&(d.aoMap=this.aoMap.toJSON(a).uuid,\nd.aoMapIntensity=this.aoMapIntensity);this.bumpMap&&this.bumpMap.isTexture&&(d.bumpMap=this.bumpMap.toJSON(a).uuid,d.bumpScale=this.bumpScale);this.normalMap&&this.normalMap.isTexture&&(d.normalMap=this.normalMap.toJSON(a).uuid,d.normalMapType=this.normalMapType,d.normalScale=this.normalScale.toArray());this.displacementMap&&this.displacementMap.isTexture&&(d.displacementMap=this.displacementMap.toJSON(a).uuid,d.displacementScale=this.displacementScale,d.displacementBias=this.displacementBias);this.roughnessMap&&\nthis.roughnessMap.isTexture&&(d.roughnessMap=this.roughnessMap.toJSON(a).uuid);this.metalnessMap&&this.metalnessMap.isTexture&&(d.metalnessMap=this.metalnessMap.toJSON(a).uuid);this.emissiveMap&&this.emissiveMap.isTexture&&(d.emissiveMap=this.emissiveMap.toJSON(a).uuid);this.specularMap&&this.specularMap.isTexture&&(d.specularMap=this.specularMap.toJSON(a).uuid);this.envMap&&this.envMap.isTexture&&(d.envMap=this.envMap.toJSON(a).uuid,d.reflectivity=this.reflectivity,void 0!==this.combine&&(d.combine=\nthis.combine),void 0!==this.envMapIntensity&&(d.envMapIntensity=this.envMapIntensity));this.gradientMap&&this.gradientMap.isTexture&&(d.gradientMap=this.gradientMap.toJSON(a).uuid);void 0!==this.size&&(d.size=this.size);void 0!==this.sizeAttenuation&&(d.sizeAttenuation=this.sizeAttenuation);1!==this.blending&&(d.blending=this.blending);!0===this.flatShading&&(d.flatShading=this.flatShading);0!==this.side&&(d.side=this.side);0!==this.vertexColors&&(d.vertexColors=this.vertexColors);1>this.opacity&&\n(d.opacity=this.opacity);!0===this.transparent&&(d.transparent=this.transparent);d.depthFunc=this.depthFunc;d.depthTest=this.depthTest;d.depthWrite=this.depthWrite;0!==this.rotation&&(d.rotation=this.rotation);!0===this.polygonOffset&&(d.polygonOffset=!0);0!==this.polygonOffsetFactor&&(d.polygonOffsetFactor=this.polygonOffsetFactor);0!==this.polygonOffsetUnits&&(d.polygonOffsetUnits=this.polygonOffsetUnits);1!==this.linewidth&&(d.linewidth=this.linewidth);void 0!==this.dashSize&&(d.dashSize=this.dashSize);\nvoid 0!==this.gapSize&&(d.gapSize=this.gapSize);void 0!==this.scale&&(d.scale=this.scale);!0===this.dithering&&(d.dithering=!0);0<this.alphaTest&&(d.alphaTest=this.alphaTest);!0===this.premultipliedAlpha&&(d.premultipliedAlpha=this.premultipliedAlpha);!0===this.wireframe&&(d.wireframe=this.wireframe);1<this.wireframeLinewidth&&(d.wireframeLinewidth=this.wireframeLinewidth);\"round\"!==this.wireframeLinecap&&(d.wireframeLinecap=this.wireframeLinecap);\"round\"!==this.wireframeLinejoin&&(d.wireframeLinejoin=\nthis.wireframeLinejoin);!0===this.morphTargets&&(d.morphTargets=!0);!0===this.skinning&&(d.skinning=!0);!1===this.visible&&(d.visible=!1);\"{}\"!==JSON.stringify(this.userData)&&(d.userData=this.userData);c&&(c=b(a.textures),a=b(a.images),0<c.length&&(d.textures=c),0<a.length&&(d.images=a));return d},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.name=a.name;this.fog=a.fog;this.lights=a.lights;this.blending=a.blending;this.side=a.side;this.flatShading=a.flatShading;\nthis.vertexColors=a.vertexColors;this.opacity=a.opacity;this.transparent=a.transparent;this.blendSrc=a.blendSrc;this.blendDst=a.blendDst;this.blendEquation=a.blendEquation;this.blendSrcAlpha=a.blendSrcAlpha;this.blendDstAlpha=a.blendDstAlpha;this.blendEquationAlpha=a.blendEquationAlpha;this.depthFunc=a.depthFunc;this.depthTest=a.depthTest;this.depthWrite=a.depthWrite;this.colorWrite=a.colorWrite;this.precision=a.precision;this.polygonOffset=a.polygonOffset;this.polygonOffsetFactor=a.polygonOffsetFactor;\nthis.polygonOffsetUnits=a.polygonOffsetUnits;this.dithering=a.dithering;this.alphaTest=a.alphaTest;this.premultipliedAlpha=a.premultipliedAlpha;this.visible=a.visible;this.userData=JSON.parse(JSON.stringify(a.userData));this.clipShadows=a.clipShadows;this.clipIntersection=a.clipIntersection;var b=a.clippingPlanes,c=null;if(null!==b){var d=b.length;c=Array(d);for(var e=0;e!==d;++e)c[e]=b[e].clone()}this.clippingPlanes=c;this.shadowSide=a.shadowSide;return this},dispose:function(){this.dispatchEvent({type:\"dispose\"})}});\nBa.prototype=Object.create(L.prototype);Ba.prototype.constructor=Ba;Ba.prototype.isShaderMaterial=!0;Ba.prototype.copy=function(a){L.prototype.copy.call(this,a);this.fragmentShader=a.fragmentShader;this.vertexShader=a.vertexShader;this.uniforms=Jb(a.uniforms);this.defines=Object.assign({},a.defines);this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.lights=a.lights;this.clipping=a.clipping;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;\nthis.extensions=a.extensions;return this};Ba.prototype.toJSON=function(a){var b=L.prototype.toJSON.call(this,a);b.uniforms={};for(var c in this.uniforms){var d=this.uniforms[c].value;b.uniforms[c]=d.isTexture?{type:\"t\",value:d.toJSON(a).uuid}:d.isColor?{type:\"c\",value:d.getHex()}:d.isVector2?{type:\"v2\",value:d.toArray()}:d.isVector3?{type:\"v3\",value:d.toArray()}:d.isVector4?{type:\"v4\",value:d.toArray()}:d.isMatrix4?{type:\"m4\",value:d.toArray()}:{value:d}}0<Object.keys(this.defines).length&&(b.defines=\nthis.defines);b.vertexShader=this.vertexShader;b.fragmentShader=this.fragmentShader;return b};Object.assign(qb.prototype,{set:function(a,b){this.origin.copy(a);this.direction.copy(b);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return this},at:function(a,b){void 0===b&&(console.warn(\"THREE.Ray: .at() target is now required\"),b=new n);return b.copy(this.direction).multiplyScalar(a).add(this.origin)},\nlookAt:function(a){this.direction.copy(a).sub(this.origin).normalize();return this},recast:function(){var a=new n;return function(b){this.origin.copy(this.at(b,a));return this}}(),closestPointToPoint:function(a,b){void 0===b&&(console.warn(\"THREE.Ray: .closestPointToPoint() target is now required\"),b=new n);b.subVectors(a,this.origin);a=b.dot(this.direction);return 0>a?b.copy(this.origin):b.copy(this.direction).multiplyScalar(a).add(this.origin)},distanceToPoint:function(a){return Math.sqrt(this.distanceSqToPoint(a))},\ndistanceSqToPoint:function(){var a=new n;return function(b){var c=a.subVectors(b,this.origin).dot(this.direction);if(0>c)return this.origin.distanceToSquared(b);a.copy(this.direction).multiplyScalar(c).add(this.origin);return a.distanceToSquared(b)}}(),distanceSqToSegment:function(){var a=new n,b=new n,c=new n;return function(d,e,f,g){a.copy(d).add(e).multiplyScalar(.5);b.copy(e).sub(d).normalize();c.copy(this.origin).sub(a);var h=.5*d.distanceTo(e),k=-this.direction.dot(b),m=c.dot(this.direction),\nl=-c.dot(b),p=c.lengthSq(),r=Math.abs(1-k*k);if(0<r){d=k*l-m;e=k*m-l;var n=h*r;0<=d?e>=-n?e<=n?(h=1/r,d*=h,e*=h,k=d*(d+k*e+2*m)+e*(k*d+e+2*l)+p):(e=h,d=Math.max(0,-(k*e+m)),k=-d*d+e*(e+2*l)+p):(e=-h,d=Math.max(0,-(k*e+m)),k=-d*d+e*(e+2*l)+p):e<=-n?(d=Math.max(0,-(-k*h+m)),e=0<d?-h:Math.min(Math.max(-h,-l),h),k=-d*d+e*(e+2*l)+p):e<=n?(d=0,e=Math.min(Math.max(-h,-l),h),k=e*(e+2*l)+p):(d=Math.max(0,-(k*h+m)),e=0<d?h:Math.min(Math.max(-h,-l),h),k=-d*d+e*(e+2*l)+p)}else e=0<k?-h:h,d=Math.max(0,-(k*e+m)),\nk=-d*d+e*(e+2*l)+p;f&&f.copy(this.direction).multiplyScalar(d).add(this.origin);g&&g.copy(b).multiplyScalar(e).add(a);return k}}(),intersectSphere:function(){var a=new n;return function(b,c){a.subVectors(b.center,this.origin);var d=a.dot(this.direction),e=a.dot(a)-d*d;b=b.radius*b.radius;if(e>b)return null;b=Math.sqrt(b-e);e=d-b;d+=b;return 0>e&&0>d?null:0>e?this.at(d,c):this.at(e,c)}}(),intersectsSphere:function(a){return this.distanceSqToPoint(a.center)<=a.radius*a.radius},distanceToPlane:function(a){var b=\na.normal.dot(this.direction);if(0===b)return 0===a.distanceToPoint(this.origin)?0:null;a=-(this.origin.dot(a.normal)+a.constant)/b;return 0<=a?a:null},intersectPlane:function(a,b){a=this.distanceToPlane(a);return null===a?null:this.at(a,b)},intersectsPlane:function(a){var b=a.distanceToPoint(this.origin);return 0===b||0>a.normal.dot(this.direction)*b?!0:!1},intersectBox:function(a,b){var c=1/this.direction.x;var d=1/this.direction.y;var e=1/this.direction.z,f=this.origin;if(0<=c){var g=(a.min.x-f.x)*\nc;c*=a.max.x-f.x}else g=(a.max.x-f.x)*c,c*=a.min.x-f.x;if(0<=d){var h=(a.min.y-f.y)*d;d*=a.max.y-f.y}else h=(a.max.y-f.y)*d,d*=a.min.y-f.y;if(g>d||h>c)return null;if(h>g||g!==g)g=h;if(d<c||c!==c)c=d;0<=e?(h=(a.min.z-f.z)*e,a=(a.max.z-f.z)*e):(h=(a.max.z-f.z)*e,a=(a.min.z-f.z)*e);if(g>a||h>c)return null;if(h>g||g!==g)g=h;if(a<c||c!==c)c=a;return 0>c?null:this.at(0<=g?g:c,b)},intersectsBox:function(){var a=new n;return function(b){return null!==this.intersectBox(b,a)}}(),intersectTriangle:function(){var a=\nnew n,b=new n,c=new n,d=new n;return function(e,f,g,h,k){b.subVectors(f,e);c.subVectors(g,e);d.crossVectors(b,c);f=this.direction.dot(d);if(0<f){if(h)return null;h=1}else if(0>f)h=-1,f=-f;else return null;a.subVectors(this.origin,e);e=h*this.direction.dot(c.crossVectors(a,c));if(0>e)return null;g=h*this.direction.dot(b.cross(a));if(0>g||e+g>f)return null;e=-h*a.dot(d);return 0>e?null:this.at(e/f,k)}}(),applyMatrix4:function(a){this.origin.applyMatrix4(a);this.direction.transformDirection(a);return this},\nequals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)}});Object.assign(ha,{getNormal:function(){var a=new n;return function(b,c,d,e){void 0===e&&(console.warn(\"THREE.Triangle: .getNormal() target is now required\"),e=new n);e.subVectors(d,c);a.subVectors(b,c);e.cross(a);b=e.lengthSq();return 0<b?e.multiplyScalar(1/Math.sqrt(b)):e.set(0,0,0)}}(),getBarycoord:function(){var a=new n,b=new n,c=new n;return function(d,e,f,g,h){a.subVectors(g,e);b.subVectors(f,e);c.subVectors(d,\ne);d=a.dot(a);e=a.dot(b);f=a.dot(c);var k=b.dot(b);g=b.dot(c);var m=d*k-e*e;void 0===h&&(console.warn(\"THREE.Triangle: .getBarycoord() target is now required\"),h=new n);if(0===m)return h.set(-2,-1,-1);m=1/m;k=(k*f-e*g)*m;d=(d*g-e*f)*m;return h.set(1-k-d,d,k)}}(),containsPoint:function(){var a=new n;return function(b,c,d,e){ha.getBarycoord(b,c,d,e,a);return 0<=a.x&&0<=a.y&&1>=a.x+a.y}}(),getUV:function(){var a=new n;return function(b,c,d,e,f,g,h,k){this.getBarycoord(b,c,d,e,a);k.set(0,0);k.addScaledVector(f,\na.x);k.addScaledVector(g,a.y);k.addScaledVector(h,a.z);return k}}()});Object.assign(ha.prototype,{set:function(a,b,c){this.a.copy(a);this.b.copy(b);this.c.copy(c);return this},setFromPointsAndIndices:function(a,b,c,d){this.a.copy(a[b]);this.b.copy(a[c]);this.c.copy(a[d]);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.a.copy(a.a);this.b.copy(a.b);this.c.copy(a.c);return this},getArea:function(){var a=new n,b=new n;return function(){a.subVectors(this.c,\nthis.b);b.subVectors(this.a,this.b);return.5*a.cross(b).length()}}(),getMidpoint:function(a){void 0===a&&(console.warn(\"THREE.Triangle: .getMidpoint() target is now required\"),a=new n);return a.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(a){return ha.getNormal(this.a,this.b,this.c,a)},getPlane:function(a){void 0===a&&(console.warn(\"THREE.Triangle: .getPlane() target is now required\"),a=new n);return a.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(a,\nb){return ha.getBarycoord(a,this.a,this.b,this.c,b)},containsPoint:function(a){return ha.containsPoint(a,this.a,this.b,this.c)},getUV:function(a,b,c,d,e){return ha.getUV(a,this.a,this.b,this.c,b,c,d,e)},intersectsBox:function(a){return a.intersectsTriangle(this)},closestPointToPoint:function(){var a=new n,b=new n,c=new n,d=new n,e=new n,f=new n;return function(g,h){void 0===h&&(console.warn(\"THREE.Triangle: .closestPointToPoint() target is now required\"),h=new n);var k=this.a,m=this.b,l=this.c;a.subVectors(m,\nk);b.subVectors(l,k);d.subVectors(g,k);var p=a.dot(d),r=b.dot(d);if(0>=p&&0>=r)return h.copy(k);e.subVectors(g,m);var x=a.dot(e),t=b.dot(e);if(0<=x&&t<=x)return h.copy(m);var v=p*t-x*r;if(0>=v&&0<=p&&0>=x)return m=p/(p-x),h.copy(k).addScaledVector(a,m);f.subVectors(g,l);g=a.dot(f);var w=b.dot(f);if(0<=w&&g<=w)return h.copy(l);p=g*r-p*w;if(0>=p&&0<=r&&0>=w)return v=r/(r-w),h.copy(k).addScaledVector(b,v);r=x*w-g*t;if(0>=r&&0<=t-x&&0<=g-w)return c.subVectors(l,m),v=(t-x)/(t-x+(g-w)),h.copy(m).addScaledVector(c,\nv);l=1/(r+p+v);m=p*l;v*=l;return h.copy(k).addScaledVector(a,m).addScaledVector(b,v)}}(),equals:function(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)}});Da.prototype=Object.create(L.prototype);Da.prototype.constructor=Da;Da.prototype.isMeshBasicMaterial=!0;Da.prototype.copy=function(a){L.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;\nthis.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;return this};pa.prototype=Object.assign(Object.create(C.prototype),{constructor:pa,isMesh:!0,setDrawMode:function(a){this.drawMode=\na},copy:function(a){C.prototype.copy.call(this,a);this.drawMode=a.drawMode;void 0!==a.morphTargetInfluences&&(this.morphTargetInfluences=a.morphTargetInfluences.slice());void 0!==a.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},a.morphTargetDictionary));return this},updateMorphTargets:function(){var a=this.geometry;if(a.isBufferGeometry){a=a.morphAttributes;var b=Object.keys(a);if(0<b.length){var c=a[b[0]];if(void 0!==c)for(this.morphTargetInfluences=[],this.morphTargetDictionary=\n{},a=0,b=c.length;a<b;a++){var d=c[a].name||String(a);this.morphTargetInfluences.push(0);this.morphTargetDictionary[d]=a}}}else if(c=a.morphTargets,void 0!==c&&0<c.length)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},a=0,b=c.length;a<b;a++)d=c[a].name||String(a),this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=a},raycast:function(){function a(a,b,c,d,e,f,g,h){if(null===(1===b.side?d.intersectTriangle(g,f,e,!0,h):d.intersectTriangle(e,f,g,2!==b.side,h)))return null;\nv.copy(h);v.applyMatrix4(a.matrixWorld);b=c.ray.origin.distanceTo(v);return b<c.near||b>c.far?null:{distance:b,point:v.clone(),object:a}}function b(b,c,d,e,k,m,l,q,n){f.fromBufferAttribute(k,l);g.fromBufferAttribute(k,q);h.fromBufferAttribute(k,n);if(b=a(b,c,d,e,f,g,h,t))m&&(p.fromBufferAttribute(m,l),r.fromBufferAttribute(m,q),x.fromBufferAttribute(m,n),b.uv=ha.getUV(t,f,g,h,p,r,x,new z)),m=new Kb(l,q,n),ha.getNormal(f,g,h,m.normal),b.face=m;return b}var c=new O,d=new qb,e=new Ea,f=new n,g=new n,\nh=new n,k=new n,m=new n,l=new n,p=new z,r=new z,x=new z,t=new n,v=new n;return function(q,n){var u=this.geometry,v=this.material,w=this.matrixWorld;if(void 0!==v&&(null===u.boundingSphere&&u.computeBoundingSphere(),e.copy(u.boundingSphere),e.applyMatrix4(w),!1!==q.ray.intersectsSphere(e)&&(c.getInverse(w),d.copy(q.ray).applyMatrix4(c),null===u.boundingBox||!1!==d.intersectsBox(u.boundingBox))))if(u.isBufferGeometry){var y=u.index,B=u.attributes.position,A=u.attributes.uv,D=u.groups;u=u.drawRange;\nvar C;if(null!==y)if(Array.isArray(v)){var E=0;for(C=D.length;E<C;E++){var F=D[E];var J=v[F.materialIndex];w=Math.max(F.start,u.start);var L=Math.min(F.start+F.count,u.start+u.count);for(F=w;F<L;F+=3){w=y.getX(F);var I=y.getX(F+1);var K=y.getX(F+2);if(w=b(this,J,q,d,B,A,w,I,K))w.faceIndex=Math.floor(F/3),n.push(w)}}}else for(w=Math.max(0,u.start),L=Math.min(y.count,u.start+u.count),E=w,C=L;E<C;E+=3){if(w=y.getX(E),I=y.getX(E+1),K=y.getX(E+2),w=b(this,v,q,d,B,A,w,I,K))w.faceIndex=Math.floor(E/3),n.push(w)}else if(void 0!==\nB)if(Array.isArray(v))for(E=0,C=D.length;E<C;E++)for(F=D[E],J=v[F.materialIndex],w=Math.max(F.start,u.start),L=Math.min(F.start+F.count,u.start+u.count),F=w;F<L;F+=3){if(w=F,I=F+1,K=F+2,w=b(this,J,q,d,B,A,w,I,K))w.faceIndex=Math.floor(F/3),n.push(w)}else for(w=Math.max(0,u.start),L=Math.min(B.count,u.start+u.count),E=w,C=L;E<C;E+=3)if(w=E,I=E+1,K=E+2,w=b(this,v,q,d,B,A,w,I,K))w.faceIndex=Math.floor(E/3),n.push(w)}else if(u.isGeometry)for(B=Array.isArray(v),A=u.vertices,D=u.faces,w=u.faceVertexUvs[0],\n0<w.length&&(y=w),F=0,L=D.length;F<L;F++)if(I=D[F],w=B?v[I.materialIndex]:v,void 0!==w){E=A[I.a];C=A[I.b];J=A[I.c];if(!0===w.morphTargets){K=u.morphTargets;var O=this.morphTargetInfluences;f.set(0,0,0);g.set(0,0,0);h.set(0,0,0);for(var Q=0,S=K.length;Q<S;Q++){var R=O[Q];if(0!==R){var T=K[Q].vertices;f.addScaledVector(k.subVectors(T[I.a],E),R);g.addScaledVector(m.subVectors(T[I.b],C),R);h.addScaledVector(l.subVectors(T[I.c],J),R)}}f.add(E);g.add(C);h.add(J);E=f;C=g;J=h}if(w=a(this,w,q,d,E,C,J,t))y&&\ny[F]&&(K=y[F],p.copy(K[0]),r.copy(K[1]),x.copy(K[2]),w.uv=ha.getUV(t,E,C,J,p,r,x,new z)),w.face=I,w.faceIndex=F,n.push(w)}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});Xa.prototype=Object.create(X.prototype);Xa.prototype.constructor=Xa;Xa.prototype.isCubeTexture=!0;Object.defineProperty(Xa.prototype,\"images\",{get:function(){return this.image},set:function(a){this.image=a}});Nb.prototype=Object.create(X.prototype);Nb.prototype.constructor=Nb;Nb.prototype.isDataTexture3D=\n!0;var Re=new X,mg=new Nb,Se=new Xa,Le=[],Ne=[],Qe=new Float32Array(16),Pe=new Float32Array(9),Oe=new Float32Array(4);We.prototype.updateCache=function(a){var b=this.cache;a instanceof Float32Array&&b.length!==a.length&&(this.cache=new Float32Array(a.length));sa(b,a)};Xe.prototype.setValue=function(a,b,c){for(var d=this.seq,e=0,f=d.length;e!==f;++e){var g=d[e];g.setValue(a,b[g.id],c)}};var Zd=/([\\w\\d_]+)(\\])?(\\[|\\.)?/g;cb.prototype.setValue=function(a,b,c){b=this.map[b];void 0!==b&&b.setValue(a,c,\nthis.renderer)};cb.prototype.setOptional=function(a,b,c){b=b[c];void 0!==b&&this.setValue(a,c,b)};cb.upload=function(a,b,c,d){for(var e=0,f=b.length;e!==f;++e){var g=b[e],h=c[g.id];!1!==h.needsUpdate&&g.setValue(a,h.value,d)}};cb.seqWithValue=function(a,b){for(var c=[],d=0,e=a.length;d!==e;++d){var f=a[d];f.id in b&&c.push(f)}return c};var Hg=0,Pg=0;db.prototype=Object.create(L.prototype);db.prototype.constructor=db;db.prototype.isMeshDepthMaterial=!0;db.prototype.copy=function(a){L.prototype.copy.call(this,\na);this.depthPacking=a.depthPacking;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.map=a.map;this.alphaMap=a.alphaMap;this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;return this};eb.prototype=Object.create(L.prototype);eb.prototype.constructor=eb;eb.prototype.isMeshDistanceMaterial=!0;eb.prototype.copy=function(a){L.prototype.copy.call(this,\na);this.referencePosition.copy(a.referencePosition);this.nearDistance=a.nearDistance;this.farDistance=a.farDistance;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.map=a.map;this.alphaMap=a.alphaMap;this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;return this};Pb.prototype=Object.assign(Object.create(C.prototype),{constructor:Pb,isGroup:!0});Ra.prototype=Object.assign(Object.create(C.prototype),{constructor:Ra,\nisCamera:!0,copy:function(a,b){C.prototype.copy.call(this,a,b);this.matrixWorldInverse.copy(a.matrixWorldInverse);this.projectionMatrix.copy(a.projectionMatrix);this.projectionMatrixInverse.copy(a.projectionMatrixInverse);return this},getWorldDirection:function(a){void 0===a&&(console.warn(\"THREE.Camera: .getWorldDirection() target is now required\"),a=new n);this.updateMatrixWorld(!0);var b=this.matrixWorld.elements;return a.set(-b[8],-b[9],-b[10]).normalize()},updateMatrixWorld:function(a){C.prototype.updateMatrixWorld.call(this,\na);this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}});V.prototype=Object.assign(Object.create(Ra.prototype),{constructor:V,isPerspectiveCamera:!0,copy:function(a,b){Ra.prototype.copy.call(this,a,b);this.fov=a.fov;this.zoom=a.zoom;this.near=a.near;this.far=a.far;this.focus=a.focus;this.aspect=a.aspect;this.view=null===a.view?null:Object.assign({},a.view);this.filmGauge=a.filmGauge;this.filmOffset=a.filmOffset;return this},setFocalLength:function(a){a=\n.5*this.getFilmHeight()/a;this.fov=2*R.RAD2DEG*Math.atan(a);this.updateProjectionMatrix()},getFocalLength:function(){var a=Math.tan(.5*R.DEG2RAD*this.fov);return.5*this.getFilmHeight()/a},getEffectiveFOV:function(){return 2*R.RAD2DEG*Math.atan(Math.tan(.5*R.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(a,b,c,d,e,f){this.aspect=a/b;null===this.view&&\n(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});this.view.enabled=!0;this.view.fullWidth=a;this.view.fullHeight=b;this.view.offsetX=c;this.view.offsetY=d;this.view.width=e;this.view.height=f;this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1);this.updateProjectionMatrix()},updateProjectionMatrix:function(){var a=this.near,b=a*Math.tan(.5*R.DEG2RAD*this.fov)/this.zoom,c=2*b,d=this.aspect*c,e=-.5*d,f=this.view;if(null!==\nthis.view&&this.view.enabled){var g=f.fullWidth,h=f.fullHeight;e+=f.offsetX*d/g;b-=f.offsetY*c/h;d*=f.width/g;c*=f.height/h}f=this.filmOffset;0!==f&&(e+=a*f/this.getFilmWidth());this.projectionMatrix.makePerspective(e,e+d,b,b-c,a,this.far);this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(a){a=C.prototype.toJSON.call(this,a);a.object.fov=this.fov;a.object.zoom=this.zoom;a.object.near=this.near;a.object.far=this.far;a.object.focus=this.focus;a.object.aspect=this.aspect;\nnull!==this.view&&(a.object.view=Object.assign({},this.view));a.object.filmGauge=this.filmGauge;a.object.filmOffset=this.filmOffset;return a}});Dc.prototype=Object.assign(Object.create(V.prototype),{constructor:Dc,isArrayCamera:!0});var hf=new n,jf=new n;Qb.prototype.isFogExp2=!0;Qb.prototype.clone=function(){return new Qb(this.color,this.density)};Qb.prototype.toJSON=function(){return{type:\"FogExp2\",color:this.color.getHex(),density:this.density}};Rb.prototype.isFog=!0;Rb.prototype.clone=function(){return new Rb(this.color,\nthis.near,this.far)};Rb.prototype.toJSON=function(){return{type:\"Fog\",color:this.color.getHex(),near:this.near,far:this.far}};xd.prototype=Object.assign(Object.create(C.prototype),{constructor:xd,copy:function(a,b){C.prototype.copy.call(this,a,b);null!==a.background&&(this.background=a.background.clone());null!==a.fog&&(this.fog=a.fog.clone());null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone());this.autoUpdate=a.autoUpdate;this.matrixAutoUpdate=a.matrixAutoUpdate;return this},\ntoJSON:function(a){var b=C.prototype.toJSON.call(this,a);null!==this.background&&(b.object.background=this.background.toJSON(a));null!==this.fog&&(b.object.fog=this.fog.toJSON());return b}});Object.defineProperty(rb.prototype,\"needsUpdate\",{set:function(a){!0===a&&this.version++}});Object.assign(rb.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(a){if(Array.isArray(a))throw new TypeError(\"THREE.BufferAttribute: array should be a Typed Array.\");this.count=void 0!==\na?a.length/this.stride:0;this.array=a;return this},setDynamic:function(a){this.dynamic=a;return this},copy:function(a){this.array=new a.array.constructor(a.array);this.count=a.count;this.stride=a.stride;this.dynamic=a.dynamic;return this},copyAt:function(a,b,c){a*=this.stride;c*=b.stride;for(var d=0,e=this.stride;d<e;d++)this.array[a+d]=b.array[c+d];return this},set:function(a,b){void 0===b&&(b=0);this.array.set(a,b);return this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(a){this.onUploadCallback=\na;return this}});Object.defineProperties(Ec.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}});Object.assign(Ec.prototype,{isInterleavedBufferAttribute:!0,setX:function(a,b){this.data.array[a*this.data.stride+this.offset]=b;return this},setY:function(a,b){this.data.array[a*this.data.stride+this.offset+1]=b;return this},setZ:function(a,b){this.data.array[a*this.data.stride+this.offset+2]=b;return this},setW:function(a,b){this.data.array[a*this.data.stride+\nthis.offset+3]=b;return this},getX:function(a){return this.data.array[a*this.data.stride+this.offset]},getY:function(a){return this.data.array[a*this.data.stride+this.offset+1]},getZ:function(a){return this.data.array[a*this.data.stride+this.offset+2]},getW:function(a){return this.data.array[a*this.data.stride+this.offset+3]},setXY:function(a,b,c){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;return this},setXYZ:function(a,b,c,d){a=a*this.data.stride+this.offset;this.data.array[a+\n0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;return this},setXYZW:function(a,b,c,d,e){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;this.data.array[a+3]=e;return this}});gb.prototype=Object.create(L.prototype);gb.prototype.constructor=gb;gb.prototype.isSpriteMaterial=!0;gb.prototype.copy=function(a){L.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.rotation=a.rotation;this.sizeAttenuation=a.sizeAttenuation;return this};\nvar Sb;Fc.prototype=Object.assign(Object.create(C.prototype),{constructor:Fc,isSprite:!0,raycast:function(){function a(a,b,c,d,h,k){e.subVectors(a,c).addScalar(.5).multiply(d);void 0!==h?(f.x=k*e.x-h*e.y,f.y=h*e.x+k*e.y):f.copy(e);a.copy(b);a.x+=f.x;a.y+=f.y;a.applyMatrix4(g)}var b=new n,c=new n,d=new n,e=new z,f=new z,g=new O,h=new n,k=new n,m=new n,l=new z,p=new z,r=new z;return function(e,f){c.setFromMatrixScale(this.matrixWorld);g.getInverse(this.modelViewMatrix).premultiply(this.matrixWorld);\nd.setFromMatrixPosition(this.modelViewMatrix);var q=this.material.rotation;if(0!==q){var n=Math.cos(q);var t=Math.sin(q)}q=this.center;a(h.set(-.5,-.5,0),d,q,c,t,n);a(k.set(.5,-.5,0),d,q,c,t,n);a(m.set(.5,.5,0),d,q,c,t,n);l.set(0,0);p.set(1,0);r.set(1,1);var u=e.ray.intersectTriangle(h,k,m,!1,b);if(null===u&&(a(k.set(-.5,.5,0),d,q,c,t,n),p.set(0,1),u=e.ray.intersectTriangle(h,m,k,!1,b),null===u))return;t=e.ray.origin.distanceTo(b);t<e.near||t>e.far||f.push({distance:t,point:b.clone(),uv:ha.getUV(b,\nh,k,m,l,p,r,new z),face:null,object:this})}}(),clone:function(){return(new this.constructor(this.material)).copy(this)},copy:function(a){C.prototype.copy.call(this,a);void 0!==a.center&&this.center.copy(a.center);return this}});Gc.prototype=Object.assign(Object.create(C.prototype),{constructor:Gc,copy:function(a){C.prototype.copy.call(this,a,!1);a=a.levels;for(var b=0,c=a.length;b<c;b++){var d=a[b];this.addLevel(d.object.clone(),d.distance)}return this},addLevel:function(a,b){void 0===b&&(b=0);b=\nMath.abs(b);for(var c=this.levels,d=0;d<c.length&&!(b<c[d].distance);d++);c.splice(d,0,{distance:b,object:a});this.add(a)},getObjectForDistance:function(a){for(var b=this.levels,c=1,d=b.length;c<d&&!(a<b[c].distance);c++);return b[c-1].object},raycast:function(){var a=new n;return function(b,c){a.setFromMatrixPosition(this.matrixWorld);var d=b.ray.origin.distanceTo(a);this.getObjectForDistance(d).raycast(b,c)}}(),update:function(){var a=new n,b=new n;return function(c){var d=this.levels;if(1<d.length){a.setFromMatrixPosition(c.matrixWorld);\nb.setFromMatrixPosition(this.matrixWorld);c=a.distanceTo(b);d[0].object.visible=!0;for(var e=1,f=d.length;e<f;e++)if(c>=d[e].distance)d[e-1].object.visible=!1,d[e].object.visible=!0;else break;for(;e<f;e++)d[e].object.visible=!1}}}(),toJSON:function(a){a=C.prototype.toJSON.call(this,a);a.object.levels=[];for(var b=this.levels,c=0,d=b.length;c<d;c++){var e=b[c];a.object.levels.push({object:e.object.uuid,distance:e.distance})}return a}});Hc.prototype=Object.assign(Object.create(pa.prototype),{constructor:Hc,\nisSkinnedMesh:!0,bind:function(a,b){this.skeleton=a;void 0===b&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),b=this.matrixWorld);this.bindMatrix.copy(b);this.bindMatrixInverse.getInverse(b)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var a=new ca,b=this.geometry.attributes.skinWeight,c=0,d=b.count;c<d;c++){a.x=b.getX(c);a.y=b.getY(c);a.z=b.getZ(c);a.w=b.getW(c);var e=1/a.manhattanLength();Infinity!==e?a.multiplyScalar(e):a.set(1,0,0,0);b.setXYZW(c,a.x,\na.y,a.z,a.w)}},updateMatrixWorld:function(a){pa.prototype.updateMatrixWorld.call(this,a);\"attached\"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):\"detached\"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn(\"THREE.SkinnedMesh: Unrecognized bindMode: \"+this.bindMode)},clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});Object.assign(yd.prototype,{calculateInverses:function(){this.boneInverses=[];for(var a=0,b=\nthis.bones.length;a<b;a++){var c=new O;this.bones[a]&&c.getInverse(this.bones[a].matrixWorld);this.boneInverses.push(c)}},pose:function(){var a,b;var c=0;for(b=this.bones.length;c<b;c++)(a=this.bones[c])&&a.matrixWorld.getInverse(this.boneInverses[c]);c=0;for(b=this.bones.length;c<b;c++)if(a=this.bones[c])a.parent&&a.parent.isBone?(a.matrix.getInverse(a.parent.matrixWorld),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale)},update:function(){var a=\nnew O,b=new O;return function(){for(var c=this.bones,d=this.boneInverses,e=this.boneMatrices,f=this.boneTexture,g=0,h=c.length;g<h;g++)a.multiplyMatrices(c[g]?c[g].matrixWorld:b,d[g]),a.toArray(e,16*g);void 0!==f&&(f.needsUpdate=!0)}}(),clone:function(){return new yd(this.bones,this.boneInverses)},getBoneByName:function(a){for(var b=0,c=this.bones.length;b<c;b++){var d=this.bones[b];if(d.name===a)return d}}});ce.prototype=Object.assign(Object.create(C.prototype),{constructor:ce,isBone:!0});T.prototype=\nObject.create(L.prototype);T.prototype.constructor=T;T.prototype.isLineBasicMaterial=!0;T.prototype.copy=function(a){L.prototype.copy.call(this,a);this.color.copy(a.color);this.linewidth=a.linewidth;this.linecap=a.linecap;this.linejoin=a.linejoin;return this};ma.prototype=Object.assign(Object.create(C.prototype),{constructor:ma,isLine:!0,computeLineDistances:function(){var a=new n,b=new n;return function(){var c=this.geometry;if(c.isBufferGeometry)if(null===c.index){for(var d=c.attributes.position,\ne=[0],f=1,g=d.count;f<g;f++)a.fromBufferAttribute(d,f-1),b.fromBufferAttribute(d,f),e[f]=e[f-1],e[f]+=a.distanceTo(b);c.addAttribute(\"lineDistance\",new B(e,1))}else console.warn(\"THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.\");else if(c.isGeometry)for(d=c.vertices,e=c.lineDistances,e[0]=0,f=1,g=d.length;f<g;f++)e[f]=e[f-1],e[f]+=d[f-1].distanceTo(d[f]);return this}}(),raycast:function(){var a=new O,b=new qb,c=new Ea;return function(d,e){var f=d.linePrecision,\ng=this.geometry,h=this.matrixWorld;null===g.boundingSphere&&g.computeBoundingSphere();c.copy(g.boundingSphere);c.applyMatrix4(h);c.radius+=f;if(!1!==d.ray.intersectsSphere(c)){a.getInverse(h);b.copy(d.ray).applyMatrix4(a);f/=(this.scale.x+this.scale.y+this.scale.z)/3;f*=f;var k=new n,m=new n;h=new n;var l=new n,p=this&&this.isLineSegments?2:1;if(g.isBufferGeometry){var r=g.index,x=g.attributes.position.array;if(null!==r){r=r.array;g=0;for(var t=r.length-1;g<t;g+=p){var v=r[g+1];k.fromArray(x,3*r[g]);\nm.fromArray(x,3*v);v=b.distanceSqToSegment(k,m,l,h);v>f||(l.applyMatrix4(this.matrixWorld),v=d.ray.origin.distanceTo(l),v<d.near||v>d.far||e.push({distance:v,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}}else for(g=0,t=x.length/3-1;g<t;g+=p)k.fromArray(x,3*g),m.fromArray(x,3*g+3),v=b.distanceSqToSegment(k,m,l,h),v>f||(l.applyMatrix4(this.matrixWorld),v=d.ray.origin.distanceTo(l),v<d.near||v>d.far||e.push({distance:v,point:h.clone().applyMatrix4(this.matrixWorld),\nindex:g,face:null,faceIndex:null,object:this}))}else if(g.isGeometry)for(k=g.vertices,m=k.length,g=0;g<m-1;g+=p)v=b.distanceSqToSegment(k[g],k[g+1],l,h),v>f||(l.applyMatrix4(this.matrixWorld),v=d.ray.origin.distanceTo(l),v<d.near||v>d.far||e.push({distance:v,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}}}(),copy:function(a){C.prototype.copy.call(this,a);this.geometry.copy(a.geometry);this.material.copy(a.material);return this},clone:function(){return(new this.constructor).copy(this)}});\nS.prototype=Object.assign(Object.create(ma.prototype),{constructor:S,isLineSegments:!0,computeLineDistances:function(){var a=new n,b=new n;return function(){var c=this.geometry;if(c.isBufferGeometry)if(null===c.index){for(var d=c.attributes.position,e=[],f=0,g=d.count;f<g;f+=2)a.fromBufferAttribute(d,f),b.fromBufferAttribute(d,f+1),e[f]=0===f?0:e[f-1],e[f+1]=e[f]+a.distanceTo(b);c.addAttribute(\"lineDistance\",new B(e,1))}else console.warn(\"THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.\");\nelse if(c.isGeometry)for(d=c.vertices,e=c.lineDistances,f=0,g=d.length;f<g;f+=2)a.copy(d[f]),b.copy(d[f+1]),e[f]=0===f?0:e[f-1],e[f+1]=e[f]+a.distanceTo(b);return this}}()});zd.prototype=Object.assign(Object.create(ma.prototype),{constructor:zd,isLineLoop:!0});Fa.prototype=Object.create(L.prototype);Fa.prototype.constructor=Fa;Fa.prototype.isPointsMaterial=!0;Fa.prototype.copy=function(a){L.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.size=a.size;this.sizeAttenuation=a.sizeAttenuation;\nthis.morphTargets=a.morphTargets;return this};Tb.prototype=Object.assign(Object.create(C.prototype),{constructor:Tb,isPoints:!0,raycast:function(){var a=new O,b=new qb,c=new Ea;return function(d,e){function f(a,c){var f=b.distanceSqToPoint(a);f<l&&(b.closestPointToPoint(a,p),p.applyMatrix4(k),a=d.ray.origin.distanceTo(p),a<d.near||a>d.far||e.push({distance:a,distanceToRay:Math.sqrt(f),point:p.clone(),index:c,face:null,object:g}))}var g=this,h=this.geometry,k=this.matrixWorld,m=d.params.Points.threshold;\nnull===h.boundingSphere&&h.computeBoundingSphere();c.copy(h.boundingSphere);c.applyMatrix4(k);c.radius+=m;if(!1!==d.ray.intersectsSphere(c)){a.getInverse(k);b.copy(d.ray).applyMatrix4(a);m/=(this.scale.x+this.scale.y+this.scale.z)/3;var l=m*m;m=new n;var p=new n;if(h.isBufferGeometry){var r=h.index;h=h.attributes.position.array;if(null!==r){var x=r.array;r=0;for(var t=x.length;r<t;r++){var v=x[r];m.fromArray(h,3*v);f(m,v)}}else for(r=0,x=h.length/3;r<x;r++)m.fromArray(h,3*r),f(m,r)}else for(m=h.vertices,\nr=0,x=m.length;r<x;r++)f(m[r],r)}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});de.prototype=Object.assign(Object.create(X.prototype),{constructor:de,isVideoTexture:!0,update:function(){var a=this.image;a.readyState>=a.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});Ub.prototype=Object.create(X.prototype);Ub.prototype.constructor=Ub;Ub.prototype.isCompressedTexture=!0;Ic.prototype=Object.create(X.prototype);Ic.prototype.constructor=Ic;Ic.prototype.isCanvasTexture=\n!0;Jc.prototype=Object.create(X.prototype);Jc.prototype.constructor=Jc;Jc.prototype.isDepthTexture=!0;Vb.prototype=Object.create(D.prototype);Vb.prototype.constructor=Vb;Kc.prototype=Object.create(Q.prototype);Kc.prototype.constructor=Kc;Wb.prototype=Object.create(D.prototype);Wb.prototype.constructor=Wb;Lc.prototype=Object.create(Q.prototype);Lc.prototype.constructor=Lc;xa.prototype=Object.create(D.prototype);xa.prototype.constructor=xa;Mc.prototype=Object.create(Q.prototype);Mc.prototype.constructor=\nMc;Xb.prototype=Object.create(xa.prototype);Xb.prototype.constructor=Xb;Nc.prototype=Object.create(Q.prototype);Nc.prototype.constructor=Nc;sb.prototype=Object.create(xa.prototype);sb.prototype.constructor=sb;Oc.prototype=Object.create(Q.prototype);Oc.prototype.constructor=Oc;Yb.prototype=Object.create(xa.prototype);Yb.prototype.constructor=Yb;Pc.prototype=Object.create(Q.prototype);Pc.prototype.constructor=Pc;Zb.prototype=Object.create(xa.prototype);Zb.prototype.constructor=Zb;Qc.prototype=Object.create(Q.prototype);\nQc.prototype.constructor=Qc;$b.prototype=Object.create(D.prototype);$b.prototype.constructor=$b;Rc.prototype=Object.create(Q.prototype);Rc.prototype.constructor=Rc;ac.prototype=Object.create(D.prototype);ac.prototype.constructor=ac;Sc.prototype=Object.create(Q.prototype);Sc.prototype.constructor=Sc;bc.prototype=Object.create(D.prototype);bc.prototype.constructor=bc;var ch={triangulate:function(a,b,c){c=c||2;var d=b&&b.length,e=d?b[0]*c:a.length,f=lf(a,0,e,c,!0),g=[];if(!f)return g;var h;if(d){var k=\nc;d=[];var m;var l=0;for(m=b.length;l<m;l++){var p=b[l]*k;var r=l<m-1?b[l+1]*k:a.length;p=lf(a,p,r,k,!1);p===p.next&&(p.steiner=!0);d.push(Xg(p))}d.sort(Vg);for(l=0;l<d.length;l++){b=d[l];k=f;if(k=Wg(b,k))b=of(k,b),Uc(b,b.next);f=Uc(f,f.next)}}if(a.length>80*c){var n=h=a[0];var t=d=a[1];for(k=c;k<e;k+=c)l=a[k],b=a[k+1],l<n&&(n=l),b<t&&(t=b),l>h&&(h=l),b>d&&(d=b);h=Math.max(h-n,d-t);h=0!==h?1/h:0}Vc(f,g,c,n,t,h);return g}},Ya={area:function(a){for(var b=a.length,c=0,d=b-1,e=0;e<b;d=e++)c+=a[d].x*a[e].y-\na[e].x*a[d].y;return.5*c},isClockWise:function(a){return 0>Ya.area(a)},triangulateShape:function(a,b){var c=[],d=[],e=[];pf(a);qf(c,a);var f=a.length;b.forEach(pf);for(a=0;a<b.length;a++)d.push(f),f+=b[a].length,qf(c,b[a]);b=ch.triangulate(c,d);for(a=0;a<b.length;a+=3)e.push(b.slice(a,a+3));return e}};ub.prototype=Object.create(Q.prototype);ub.prototype.constructor=ub;ub.prototype.toJSON=function(){var a=Q.prototype.toJSON.call(this);return rf(this.parameters.shapes,this.parameters.options,a)};Sa.prototype=\nObject.create(D.prototype);Sa.prototype.constructor=Sa;Sa.prototype.toJSON=function(){var a=D.prototype.toJSON.call(this);return rf(this.parameters.shapes,this.parameters.options,a)};var Yg={generateTopUV:function(a,b,c,d,e){a=b[3*d];d=b[3*d+1];var f=b[3*e];e=b[3*e+1];return[new z(b[3*c],b[3*c+1]),new z(a,d),new z(f,e)]},generateSideWallUV:function(a,b,c,d,e,f){a=b[3*c];var g=b[3*c+1];c=b[3*c+2];var h=b[3*d],k=b[3*d+1];d=b[3*d+2];var m=b[3*e],l=b[3*e+1];e=b[3*e+2];var p=b[3*f],r=b[3*f+1];b=b[3*f+\n2];return.01>Math.abs(g-k)?[new z(a,1-c),new z(h,1-d),new z(m,1-e),new z(p,1-b)]:[new z(g,1-c),new z(k,1-d),new z(l,1-e),new z(r,1-b)]}};Xc.prototype=Object.create(Q.prototype);Xc.prototype.constructor=Xc;cc.prototype=Object.create(Sa.prototype);cc.prototype.constructor=cc;Yc.prototype=Object.create(Q.prototype);Yc.prototype.constructor=Yc;vb.prototype=Object.create(D.prototype);vb.prototype.constructor=vb;Zc.prototype=Object.create(Q.prototype);Zc.prototype.constructor=Zc;dc.prototype=Object.create(D.prototype);\ndc.prototype.constructor=dc;$c.prototype=Object.create(Q.prototype);$c.prototype.constructor=$c;ec.prototype=Object.create(D.prototype);ec.prototype.constructor=ec;wb.prototype=Object.create(Q.prototype);wb.prototype.constructor=wb;wb.prototype.toJSON=function(){var a=Q.prototype.toJSON.call(this);return sf(this.parameters.shapes,a)};xb.prototype=Object.create(D.prototype);xb.prototype.constructor=xb;xb.prototype.toJSON=function(){var a=D.prototype.toJSON.call(this);return sf(this.parameters.shapes,\na)};fc.prototype=Object.create(D.prototype);fc.prototype.constructor=fc;yb.prototype=Object.create(Q.prototype);yb.prototype.constructor=yb;Za.prototype=Object.create(D.prototype);Za.prototype.constructor=Za;ad.prototype=Object.create(yb.prototype);ad.prototype.constructor=ad;bd.prototype=Object.create(Za.prototype);bd.prototype.constructor=bd;cd.prototype=Object.create(Q.prototype);cd.prototype.constructor=cd;gc.prototype=Object.create(D.prototype);gc.prototype.constructor=gc;var ia=Object.freeze({WireframeGeometry:Vb,\nParametricGeometry:Kc,ParametricBufferGeometry:Wb,TetrahedronGeometry:Mc,TetrahedronBufferGeometry:Xb,OctahedronGeometry:Nc,OctahedronBufferGeometry:sb,IcosahedronGeometry:Oc,IcosahedronBufferGeometry:Yb,DodecahedronGeometry:Pc,DodecahedronBufferGeometry:Zb,PolyhedronGeometry:Lc,PolyhedronBufferGeometry:xa,TubeGeometry:Qc,TubeBufferGeometry:$b,TorusKnotGeometry:Rc,TorusKnotBufferGeometry:ac,TorusGeometry:Sc,TorusBufferGeometry:bc,TextGeometry:Xc,TextBufferGeometry:cc,SphereGeometry:Yc,SphereBufferGeometry:vb,\nRingGeometry:Zc,RingBufferGeometry:dc,PlaneGeometry:zc,PlaneBufferGeometry:pb,LatheGeometry:$c,LatheBufferGeometry:ec,ShapeGeometry:wb,ShapeBufferGeometry:xb,ExtrudeGeometry:ub,ExtrudeBufferGeometry:Sa,EdgesGeometry:fc,ConeGeometry:ad,ConeBufferGeometry:bd,CylinderGeometry:yb,CylinderBufferGeometry:Za,CircleGeometry:cd,CircleBufferGeometry:gc,BoxGeometry:Lb,BoxBufferGeometry:ob});zb.prototype=Object.create(L.prototype);zb.prototype.constructor=zb;zb.prototype.isShadowMaterial=!0;zb.prototype.copy=\nfunction(a){L.prototype.copy.call(this,a);this.color.copy(a.color);return this};hc.prototype=Object.create(Ba.prototype);hc.prototype.constructor=hc;hc.prototype.isRawShaderMaterial=!0;Ta.prototype=Object.create(L.prototype);Ta.prototype.constructor=Ta;Ta.prototype.isMeshStandardMaterial=!0;Ta.prototype.copy=function(a){L.prototype.copy.call(this,a);this.defines={STANDARD:\"\"};this.color.copy(a.color);this.roughness=a.roughness;this.metalness=a.metalness;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=\na.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalMapType=a.normalMapType;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.roughnessMap=a.roughnessMap;this.metalnessMap=\na.metalnessMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.envMapIntensity=a.envMapIntensity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};Ab.prototype=Object.create(Ta.prototype);Ab.prototype.constructor=Ab;Ab.prototype.isMeshPhysicalMaterial=\n!0;Ab.prototype.copy=function(a){Ta.prototype.copy.call(this,a);this.defines={PHYSICAL:\"\"};this.reflectivity=a.reflectivity;this.clearCoat=a.clearCoat;this.clearCoatRoughness=a.clearCoatRoughness;return this};Ga.prototype=Object.create(L.prototype);Ga.prototype.constructor=Ga;Ga.prototype.isMeshPhongMaterial=!0;Ga.prototype.copy=function(a){L.prototype.copy.call(this,a);this.color.copy(a.color);this.specular.copy(a.specular);this.shininess=a.shininess;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=\na.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalMapType=a.normalMapType;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;\nthis.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};Bb.prototype=Object.create(Ga.prototype);Bb.prototype.constructor=Bb;Bb.prototype.isMeshToonMaterial=!0;Bb.prototype.copy=function(a){Ga.prototype.copy.call(this,\na);this.gradientMap=a.gradientMap;return this};Cb.prototype=Object.create(L.prototype);Cb.prototype.constructor=Cb;Cb.prototype.isMeshNormalMaterial=!0;Cb.prototype.copy=function(a){L.prototype.copy.call(this,a);this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalMapType=a.normalMapType;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.wireframe=a.wireframe;\nthis.wireframeLinewidth=a.wireframeLinewidth;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};Db.prototype=Object.create(L.prototype);Db.prototype.constructor=Db;Db.prototype.isMeshLambertMaterial=!0;Db.prototype.copy=function(a){L.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);\nthis.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};\nEb.prototype=Object.create(L.prototype);Eb.prototype.constructor=Eb;Eb.prototype.isMeshMatcapMaterial=!0;Eb.prototype.copy=function(a){L.prototype.copy.call(this,a);this.defines={MATCAP:\"\"};this.color.copy(a.color);this.matcap=a.matcap;this.map=a.map;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalMapType=a.normalMapType;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=\na.displacementBias;this.alphaMap=a.alphaMap;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};Fb.prototype=Object.create(T.prototype);Fb.prototype.constructor=Fb;Fb.prototype.isLineDashedMaterial=!0;Fb.prototype.copy=function(a){T.prototype.copy.call(this,a);this.scale=a.scale;this.dashSize=a.dashSize;this.gapSize=a.gapSize;return this};var dh=Object.freeze({ShadowMaterial:zb,SpriteMaterial:gb,RawShaderMaterial:hc,ShaderMaterial:Ba,PointsMaterial:Fa,\nMeshPhysicalMaterial:Ab,MeshStandardMaterial:Ta,MeshPhongMaterial:Ga,MeshToonMaterial:Bb,MeshNormalMaterial:Cb,MeshLambertMaterial:Db,MeshDepthMaterial:db,MeshDistanceMaterial:eb,MeshBasicMaterial:Da,MeshMatcapMaterial:Eb,LineDashedMaterial:Fb,LineBasicMaterial:T,Material:L}),ra={arraySlice:function(a,b,c){return ra.isTypedArray(a)?new a.constructor(a.subarray(b,void 0!==c?c:a.length)):a.slice(b,c)},convertArray:function(a,b,c){return!a||!c&&a.constructor===b?a:\"number\"===typeof b.BYTES_PER_ELEMENT?\nnew b(a):Array.prototype.slice.call(a)},isTypedArray:function(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)},getKeyframeOrder:function(a){for(var b=a.length,c=Array(b),d=0;d!==b;++d)c[d]=d;c.sort(function(b,c){return a[b]-a[c]});return c},sortedArray:function(a,b,c){for(var d=a.length,e=new a.constructor(d),f=0,g=0;g!==d;++f)for(var h=c[f]*b,k=0;k!==b;++k)e[g++]=a[h+k];return e},flattenJSON:function(a,b,c,d){for(var e=1,f=a[0];void 0!==f&&void 0===f[d];)f=a[e++];if(void 0!==f){var g=f[d];\nif(void 0!==g)if(Array.isArray(g)){do g=f[d],void 0!==g&&(b.push(f.time),c.push.apply(c,g)),f=a[e++];while(void 0!==f)}else if(void 0!==g.toArray){do g=f[d],void 0!==g&&(b.push(f.time),g.toArray(c,c.length)),f=a[e++];while(void 0!==f)}else{do g=f[d],void 0!==g&&(b.push(f.time),c.push(g)),f=a[e++];while(void 0!==f)}}}};Object.assign(ya.prototype,{evaluate:function(a){var b=this.parameterPositions,c=this._cachedIndex,d=b[c],e=b[c-1];a:{b:{c:{d:if(!(a<d)){for(var f=c+2;;){if(void 0===d){if(a<e)break d;\nthis._cachedIndex=c=b.length;return this.afterEnd_(c-1,a,e)}if(c===f)break;e=d;d=b[++c];if(a<d)break b}d=b.length;break c}if(a>=e)break a;else{f=b[1];a<f&&(c=2,e=f);for(f=c-2;;){if(void 0===e)return this._cachedIndex=0,this.beforeStart_(0,a,d);if(c===f)break;d=e;e=b[--c-1];if(a>=e)break b}d=c;c=0}}for(;c<d;)e=c+d>>>1,a<b[e]?d=e:c=e+1;d=b[c];e=b[c-1];if(void 0===e)return this._cachedIndex=0,this.beforeStart_(0,a,d);if(void 0===d)return this._cachedIndex=c=b.length,this.afterEnd_(c-1,e,a)}this._cachedIndex=\nc;this.intervalChanged_(c,e,d)}return this.interpolate_(c,e,a,d)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(a){var b=this.resultBuffer,c=this.sampleValues,d=this.valueSize;a*=d;for(var e=0;e!==d;++e)b[e]=c[a+e];return b},interpolate_:function(){throw Error(\"call to abstract method\");},intervalChanged_:function(){}});Object.assign(ya.prototype,{beforeStart_:ya.prototype.copySampleValue_,afterEnd_:ya.prototype.copySampleValue_});\nBd.prototype=Object.assign(Object.create(ya.prototype),{constructor:Bd,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(a,b,c){var d=this.parameterPositions,e=a-2,f=a+1,g=d[e],h=d[f];if(void 0===g)switch(this.getSettings_().endingStart){case 2401:e=a;g=2*b-c;break;case 2402:e=d.length-2;g=b+d[e]-d[e+1];break;default:e=a,g=c}if(void 0===h)switch(this.getSettings_().endingEnd){case 2401:f=a;h=2*c-b;break;case 2402:f=1;h=c+d[1]-d[0];break;default:f=a-1,h=b}a=.5*(c-b);d=this.valueSize;\nthis._weightPrev=a/(b-g);this._weightNext=a/(h-c);this._offsetPrev=e*d;this._offsetNext=f*d},interpolate_:function(a,b,c,d){var e=this.resultBuffer,f=this.sampleValues,g=this.valueSize;a*=g;var h=a-g,k=this._offsetPrev,m=this._offsetNext,l=this._weightPrev,p=this._weightNext,r=(c-b)/(d-b);c=r*r;d=c*r;b=-l*d+2*l*c-l*r;l=(1+l)*d+(-1.5-2*l)*c+(-.5+l)*r+1;r=(-1-p)*d+(1.5+p)*c+.5*r;p=p*d-p*c;for(c=0;c!==g;++c)e[c]=b*f[k+c]+l*f[h+c]+r*f[a+c]+p*f[m+c];return e}});dd.prototype=Object.assign(Object.create(ya.prototype),\n{constructor:dd,interpolate_:function(a,b,c,d){var e=this.resultBuffer,f=this.sampleValues,g=this.valueSize;a*=g;var h=a-g;b=(c-b)/(d-b);c=1-b;for(d=0;d!==g;++d)e[d]=f[h+d]*c+f[a+d]*b;return e}});Cd.prototype=Object.assign(Object.create(ya.prototype),{constructor:Cd,interpolate_:function(a){return this.copySampleValue_(a-1)}});Object.assign(qa,{toJSON:function(a){var b=a.constructor;if(void 0!==b.toJSON)b=b.toJSON(a);else{b={name:a.name,times:ra.convertArray(a.times,Array),values:ra.convertArray(a.values,\nArray)};var c=a.getInterpolation();c!==a.DefaultInterpolation&&(b.interpolation=c)}b.type=a.ValueTypeName;return b}});Object.assign(qa.prototype,{constructor:qa,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(a){return new Cd(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodLinear:function(a){return new dd(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodSmooth:function(a){return new Bd(this.times,\nthis.values,this.getValueSize(),a)},setInterpolation:function(a){switch(a){case 2300:var b=this.InterpolantFactoryMethodDiscrete;break;case 2301:b=this.InterpolantFactoryMethodLinear;break;case 2302:b=this.InterpolantFactoryMethodSmooth}if(void 0===b){b=\"unsupported interpolation for \"+this.ValueTypeName+\" keyframe track named \"+this.name;if(void 0===this.createInterpolant)if(a!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw Error(b);console.warn(\"THREE.KeyframeTrack:\",\nb);return this}this.createInterpolant=b;return this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(a){if(0!==a)for(var b=this.times,c=0,d=b.length;c!==d;++c)b[c]+=a;return this},scale:function(a){if(1!==a)for(var b=this.times,c=0,d=b.length;c!==\nd;++c)b[c]*=a;return this},trim:function(a,b){for(var c=this.times,d=c.length,e=0,f=d-1;e!==d&&c[e]<a;)++e;for(;-1!==f&&c[f]>b;)--f;++f;if(0!==e||f!==d)e>=f&&(f=Math.max(f,1),e=f-1),a=this.getValueSize(),this.times=ra.arraySlice(c,e,f),this.values=ra.arraySlice(this.values,e*a,f*a);return this},validate:function(){var a=!0,b=this.getValueSize();0!==b-Math.floor(b)&&(console.error(\"THREE.KeyframeTrack: Invalid value size in track.\",this),a=!1);var c=this.times;b=this.values;var d=c.length;0===d&&(console.error(\"THREE.KeyframeTrack: Track is empty.\",\nthis),a=!1);for(var e=null,f=0;f!==d;f++){var g=c[f];if(\"number\"===typeof g&&isNaN(g)){console.error(\"THREE.KeyframeTrack: Time is not a valid number.\",this,f,g);a=!1;break}if(null!==e&&e>g){console.error(\"THREE.KeyframeTrack: Out of order keys.\",this,f,g,e);a=!1;break}e=g}if(void 0!==b&&ra.isTypedArray(b))for(f=0,c=b.length;f!==c;++f)if(d=b[f],isNaN(d)){console.error(\"THREE.KeyframeTrack: Value is not a valid number.\",this,f,d);a=!1;break}return a},optimize:function(){for(var a=this.times,b=this.values,\nc=this.getValueSize(),d=2302===this.getInterpolation(),e=1,f=a.length-1,g=1;g<f;++g){var h=!1,k=a[g];if(k!==a[g+1]&&(1!==g||k!==k[0]))if(d)h=!0;else{var m=g*c,l=m-c,p=m+c;for(k=0;k!==c;++k){var r=b[m+k];if(r!==b[l+k]||r!==b[p+k]){h=!0;break}}}if(h){if(g!==e)for(a[e]=a[g],h=g*c,m=e*c,k=0;k!==c;++k)b[m+k]=b[h+k];++e}}if(0<f){a[e]=a[f];h=f*c;m=e*c;for(k=0;k!==c;++k)b[m+k]=b[h+k];++e}e!==a.length&&(this.times=ra.arraySlice(a,0,e),this.values=ra.arraySlice(b,0,e*c));return this}});Dd.prototype=Object.assign(Object.create(qa.prototype),\n{constructor:Dd,ValueTypeName:\"bool\",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});Ed.prototype=Object.assign(Object.create(qa.prototype),{constructor:Ed,ValueTypeName:\"color\"});ic.prototype=Object.assign(Object.create(qa.prototype),{constructor:ic,ValueTypeName:\"number\"});Fd.prototype=Object.assign(Object.create(ya.prototype),{constructor:Fd,interpolate_:function(a,b,c,d){var e=this.resultBuffer,f=this.sampleValues,g=\nthis.valueSize;a*=g;b=(c-b)/(d-b);for(c=a+g;a!==c;a+=4)ka.slerpFlat(e,0,f,a-g,f,a,b);return e}});ed.prototype=Object.assign(Object.create(qa.prototype),{constructor:ed,ValueTypeName:\"quaternion\",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(a){return new Fd(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodSmooth:void 0});Gd.prototype=Object.assign(Object.create(qa.prototype),{constructor:Gd,ValueTypeName:\"string\",ValueBufferType:Array,DefaultInterpolation:2300,\nInterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});jc.prototype=Object.assign(Object.create(qa.prototype),{constructor:jc,ValueTypeName:\"vector\"});Object.assign(Ha,{parse:function(a){for(var b=[],c=a.tracks,d=1/(a.fps||1),e=0,f=c.length;e!==f;++e)b.push($g(c[e]).scale(d));return new Ha(a.name,a.duration,b)},toJSON:function(a){var b=[],c=a.tracks;a={name:a.name,duration:a.duration,tracks:b,uuid:a.uuid};for(var d=0,e=c.length;d!==e;++d)b.push(qa.toJSON(c[d]));return a},CreateFromMorphTargetSequence:function(a,\nb,c,d){for(var e=b.length,f=[],g=0;g<e;g++){var h=[],k=[];h.push((g+e-1)%e,g,(g+1)%e);k.push(0,1,0);var m=ra.getKeyframeOrder(h);h=ra.sortedArray(h,1,m);k=ra.sortedArray(k,1,m);d||0!==h[0]||(h.push(e),k.push(k[0]));f.push((new ic(\".morphTargetInfluences[\"+b[g].name+\"]\",h,k)).scale(1/c))}return new Ha(a,-1,f)},findByName:function(a,b){var c=a;Array.isArray(a)||(c=a.geometry&&a.geometry.animations||a.animations);for(a=0;a<c.length;a++)if(c[a].name===b)return c[a];return null},CreateClipsFromMorphTargetSequences:function(a,\nb,c){for(var d={},e=/^([\\w-]*?)([\\d]+)$/,f=0,g=a.length;f<g;f++){var h=a[f],k=h.name.match(e);if(k&&1<k.length){var m=k[1];(k=d[m])||(d[m]=k=[]);k.push(h)}}a=[];for(m in d)a.push(Ha.CreateFromMorphTargetSequence(m,d[m],b,c));return a},parseAnimation:function(a,b){if(!a)return console.error(\"THREE.AnimationClip: No animation in JSONLoader data.\"),null;var c=function(a,b,c,d,e){if(0!==c.length){var f=[],g=[];ra.flattenJSON(c,f,g,d);0!==f.length&&e.push(new a(b,f,g))}},d=[],e=a.name||\"default\",f=a.length||\n-1,g=a.fps||30;a=a.hierarchy||[];for(var h=0;h<a.length;h++){var k=a[h].keys;if(k&&0!==k.length)if(k[0].morphTargets){f={};for(var m=0;m<k.length;m++)if(k[m].morphTargets)for(var l=0;l<k[m].morphTargets.length;l++)f[k[m].morphTargets[l]]=-1;for(var p in f){var r=[],n=[];for(l=0;l!==k[m].morphTargets.length;++l){var t=k[m];r.push(t.time);n.push(t.morphTarget===p?1:0)}d.push(new ic(\".morphTargetInfluence[\"+p+\"]\",r,n))}f=f.length*(g||1)}else m=\".bones[\"+b[h].name+\"]\",c(jc,m+\".position\",k,\"pos\",d),c(ed,\nm+\".quaternion\",k,\"rot\",d),c(jc,m+\".scale\",k,\"scl\",d)}return 0===d.length?null:new Ha(e,f,d)}});Object.assign(Ha.prototype,{resetDuration:function(){for(var a=0,b=0,c=this.tracks.length;b!==c;++b){var d=this.tracks[b];a=Math.max(a,d.times[d.times.length-1])}this.duration=a;return this},trim:function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].trim(0,this.duration);return this},validate:function(){for(var a=!0,b=0;b<this.tracks.length;b++)a=a&&this.tracks[b].validate();return a},optimize:function(){for(var a=\n0;a<this.tracks.length;a++)this.tracks[a].optimize();return this}});var Hb={enabled:!1,files:{},add:function(a,b){!1!==this.enabled&&(this.files[a]=b)},get:function(a){if(!1!==this.enabled)return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}},za=new ge,Oa={};Object.assign(Ia.prototype,{load:function(a,b,c,d){void 0===a&&(a=\"\");void 0!==this.path&&(a=this.path+a);a=this.manager.resolveURL(a);var e=this,f=Hb.get(a);if(void 0!==f)return e.manager.itemStart(a),\nsetTimeout(function(){b&&b(f);e.manager.itemEnd(a)},0),f;if(void 0!==Oa[a])Oa[a].push({onLoad:b,onProgress:c,onError:d});else{var g=a.match(/^data:(.*?)(;base64)?,(.*)$/);if(g){c=g[1];var h=!!g[2];g=g[3];g=decodeURIComponent(g);h&&(g=atob(g));try{var k=(this.responseType||\"\").toLowerCase();switch(k){case \"arraybuffer\":case \"blob\":var m=new Uint8Array(g.length);for(h=0;h<g.length;h++)m[h]=g.charCodeAt(h);var l=\"blob\"===k?new Blob([m.buffer],{type:c}):m.buffer;break;case \"document\":l=(new DOMParser).parseFromString(g,\nc);break;case \"json\":l=JSON.parse(g);break;default:l=g}setTimeout(function(){b&&b(l);e.manager.itemEnd(a)},0)}catch(r){setTimeout(function(){d&&d(r);e.manager.itemError(a);e.manager.itemEnd(a)},0)}}else{Oa[a]=[];Oa[a].push({onLoad:b,onProgress:c,onError:d});var p=new XMLHttpRequest;p.open(\"GET\",a,!0);p.addEventListener(\"load\",function(b){var c=this.response;Hb.add(a,c);var d=Oa[a];delete Oa[a];if(200===this.status||0===this.status){0===this.status&&console.warn(\"THREE.FileLoader: HTTP Status 0 received.\");\nfor(var f=0,g=d.length;f<g;f++){var h=d[f];if(h.onLoad)h.onLoad(c)}}else{f=0;for(g=d.length;f<g;f++)if(h=d[f],h.onError)h.onError(b);e.manager.itemError(a)}e.manager.itemEnd(a)},!1);p.addEventListener(\"progress\",function(b){for(var c=Oa[a],d=0,e=c.length;d<e;d++){var f=c[d];if(f.onProgress)f.onProgress(b)}},!1);p.addEventListener(\"error\",function(b){var c=Oa[a];delete Oa[a];for(var d=0,f=c.length;d<f;d++){var g=c[d];if(g.onError)g.onError(b)}e.manager.itemError(a);e.manager.itemEnd(a)},!1);p.addEventListener(\"abort\",\nfunction(b){var c=Oa[a];delete Oa[a];for(var d=0,f=c.length;d<f;d++){var g=c[d];if(g.onError)g.onError(b)}e.manager.itemError(a);e.manager.itemEnd(a)},!1);void 0!==this.responseType&&(p.responseType=this.responseType);void 0!==this.withCredentials&&(p.withCredentials=this.withCredentials);p.overrideMimeType&&p.overrideMimeType(void 0!==this.mimeType?this.mimeType:\"text/plain\");for(h in this.requestHeader)p.setRequestHeader(h,this.requestHeader[h]);p.send(null)}e.manager.itemStart(a);return p}},setPath:function(a){this.path=\na;return this},setResponseType:function(a){this.responseType=a;return this},setWithCredentials:function(a){this.withCredentials=a;return this},setMimeType:function(a){this.mimeType=a;return this},setRequestHeader:function(a){this.requestHeader=a;return this}});Object.assign(tf.prototype,{load:function(a,b,c,d){var e=this,f=new Ia(e.manager);f.setPath(e.path);f.load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},parse:function(a,b){for(var c=[],d=0;d<a.length;d++){var e=Ha.parse(a[d]);c.push(e)}b(c)},\nsetPath:function(a){this.path=a;return this}});Object.assign(uf.prototype,{load:function(a,b,c,d){function e(e){k.load(a[e],function(a){a=f._parser(a,!0);g[e]={width:a.width,height:a.height,format:a.format,mipmaps:a.mipmaps};m+=1;6===m&&(1===a.mipmapCount&&(h.minFilter=1006),h.format=a.format,h.needsUpdate=!0,b&&b(h))},c,d)}var f=this,g=[],h=new Ub;h.image=g;var k=new Ia(this.manager);k.setPath(this.path);k.setResponseType(\"arraybuffer\");if(Array.isArray(a))for(var m=0,l=0,p=a.length;l<p;++l)e(l);\nelse k.load(a,function(a){a=f._parser(a,!0);if(a.isCubemap)for(var c=a.mipmaps.length/a.mipmapCount,d=0;d<c;d++){g[d]={mipmaps:[]};for(var e=0;e<a.mipmapCount;e++)g[d].mipmaps.push(a.mipmaps[d*a.mipmapCount+e]),g[d].format=a.format,g[d].width=a.width,g[d].height=a.height}else h.image.width=a.width,h.image.height=a.height,h.mipmaps=a.mipmaps;1===a.mipmapCount&&(h.minFilter=1006);h.format=a.format;h.needsUpdate=!0;b&&b(h)},c,d);return h},setPath:function(a){this.path=a;return this}});Object.assign(he.prototype,\n{load:function(a,b,c,d){var e=this,f=new kb,g=new Ia(this.manager);g.setResponseType(\"arraybuffer\");g.setPath(this.path);g.load(a,function(a){if(a=e._parser(a))void 0!==a.image?f.image=a.image:void 0!==a.data&&(f.image.width=a.width,f.image.height=a.height,f.image.data=a.data),f.wrapS=void 0!==a.wrapS?a.wrapS:1001,f.wrapT=void 0!==a.wrapT?a.wrapT:1001,f.magFilter=void 0!==a.magFilter?a.magFilter:1006,f.minFilter=void 0!==a.minFilter?a.minFilter:1008,f.anisotropy=void 0!==a.anisotropy?a.anisotropy:\n1,void 0!==a.format&&(f.format=a.format),void 0!==a.type&&(f.type=a.type),void 0!==a.mipmaps&&(f.mipmaps=a.mipmaps),1===a.mipmapCount&&(f.minFilter=1006),f.needsUpdate=!0,b&&b(f,a)},c,d);return f},setPath:function(a){this.path=a;return this}});Object.assign(fd.prototype,{crossOrigin:\"anonymous\",load:function(a,b,c,d){function e(){k.removeEventListener(\"load\",e,!1);k.removeEventListener(\"error\",f,!1);Hb.add(a,this);b&&b(this);g.manager.itemEnd(a)}function f(b){k.removeEventListener(\"load\",e,!1);k.removeEventListener(\"error\",\nf,!1);d&&d(b);g.manager.itemError(a);g.manager.itemEnd(a)}void 0===a&&(a=\"\");void 0!==this.path&&(a=this.path+a);a=this.manager.resolveURL(a);var g=this,h=Hb.get(a);if(void 0!==h)return g.manager.itemStart(a),setTimeout(function(){b&&b(h);g.manager.itemEnd(a)},0),h;var k=document.createElementNS(\"http://www.w3.org/1999/xhtml\",\"img\");k.addEventListener(\"load\",e,!1);k.addEventListener(\"error\",f,!1);\"data:\"!==a.substr(0,5)&&void 0!==this.crossOrigin&&(k.crossOrigin=this.crossOrigin);g.manager.itemStart(a);\nk.src=a;return k},setCrossOrigin:function(a){this.crossOrigin=a;return this},setPath:function(a){this.path=a;return this}});Object.assign(ie.prototype,{crossOrigin:\"anonymous\",load:function(a,b,c,d){function e(c){g.load(a[c],function(a){f.images[c]=a;h++;6===h&&(f.needsUpdate=!0,b&&b(f))},void 0,d)}var f=new Xa,g=new fd(this.manager);g.setCrossOrigin(this.crossOrigin);g.setPath(this.path);var h=0;for(c=0;c<a.length;++c)e(c);return f},setCrossOrigin:function(a){this.crossOrigin=a;return this},setPath:function(a){this.path=\na;return this}});Object.assign(Hd.prototype,{crossOrigin:\"anonymous\",load:function(a,b,c,d){var e=new X,f=new fd(this.manager);f.setCrossOrigin(this.crossOrigin);f.setPath(this.path);f.load(a,function(c){e.image=c;c=0<a.search(/\\.jpe?g($|\\?)/i)||0===a.search(/^data:image\\/jpeg/);e.format=c?1022:1023;e.needsUpdate=!0;void 0!==b&&b(e)},c,d);return e},setCrossOrigin:function(a){this.crossOrigin=a;return this},setPath:function(a){this.path=a;return this}});Object.assign(K.prototype,{getPoint:function(){console.warn(\"THREE.Curve: .getPoint() not implemented.\");\nreturn null},getPointAt:function(a,b){a=this.getUtoTmapping(a);return this.getPoint(a,b)},getPoints:function(a){void 0===a&&(a=5);for(var b=[],c=0;c<=a;c++)b.push(this.getPoint(c/a));return b},getSpacedPoints:function(a){void 0===a&&(a=5);for(var b=[],c=0;c<=a;c++)b.push(this.getPointAt(c/a));return b},getLength:function(){var a=this.getLengths();return a[a.length-1]},getLengths:function(a){void 0===a&&(a=this.arcLengthDivisions);if(this.cacheArcLengths&&this.cacheArcLengths.length===a+1&&!this.needsUpdate)return this.cacheArcLengths;\nthis.needsUpdate=!1;var b=[],c=this.getPoint(0),d,e=0;b.push(0);for(d=1;d<=a;d++){var f=this.getPoint(d/a);e+=f.distanceTo(c);b.push(e);c=f}return this.cacheArcLengths=b},updateArcLengths:function(){this.needsUpdate=!0;this.getLengths()},getUtoTmapping:function(a,b){var c=this.getLengths(),d=c.length;b=b?b:a*c[d-1];for(var e=0,f=d-1,g;e<=f;)if(a=Math.floor(e+(f-e)/2),g=c[a]-b,0>g)e=a+1;else if(0<g)f=a-1;else{f=a;break}a=f;if(c[a]===b)return a/(d-1);e=c[a];return(a+(b-e)/(c[a+1]-e))/(d-1)},getTangent:function(a){var b=\na-1E-4;a+=1E-4;0>b&&(b=0);1<a&&(a=1);b=this.getPoint(b);return this.getPoint(a).clone().sub(b).normalize()},getTangentAt:function(a){a=this.getUtoTmapping(a);return this.getTangent(a)},computeFrenetFrames:function(a,b){var c=new n,d=[],e=[],f=[],g=new n,h=new O,k;for(k=0;k<=a;k++){var m=k/a;d[k]=this.getTangentAt(m);d[k].normalize()}e[0]=new n;f[0]=new n;k=Number.MAX_VALUE;m=Math.abs(d[0].x);var l=Math.abs(d[0].y),p=Math.abs(d[0].z);m<=k&&(k=m,c.set(1,0,0));l<=k&&(k=l,c.set(0,1,0));p<=k&&c.set(0,\n0,1);g.crossVectors(d[0],c).normalize();e[0].crossVectors(d[0],g);f[0].crossVectors(d[0],e[0]);for(k=1;k<=a;k++)e[k]=e[k-1].clone(),f[k]=f[k-1].clone(),g.crossVectors(d[k-1],d[k]),g.length()>Number.EPSILON&&(g.normalize(),c=Math.acos(R.clamp(d[k-1].dot(d[k]),-1,1)),e[k].applyMatrix4(h.makeRotationAxis(g,c))),f[k].crossVectors(d[k],e[k]);if(!0===b)for(c=Math.acos(R.clamp(e[0].dot(e[a]),-1,1)),c/=a,0<d[0].dot(g.crossVectors(e[0],e[a]))&&(c=-c),k=1;k<=a;k++)e[k].applyMatrix4(h.makeRotationAxis(d[k],\nc*k)),f[k].crossVectors(d[k],e[k]);return{tangents:d,normals:e,binormals:f}},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.arcLengthDivisions=a.arcLengthDivisions;return this},toJSON:function(){var a={metadata:{version:4.5,type:\"Curve\",generator:\"Curve.toJSON\"}};a.arcLengthDivisions=this.arcLengthDivisions;a.type=this.type;return a},fromJSON:function(a){this.arcLengthDivisions=a.arcLengthDivisions;return this}});va.prototype=Object.create(K.prototype);va.prototype.constructor=\nva;va.prototype.isEllipseCurve=!0;va.prototype.getPoint=function(a,b){b=b||new z;for(var c=2*Math.PI,d=this.aEndAngle-this.aStartAngle,e=Math.abs(d)<Number.EPSILON;0>d;)d+=c;for(;d>c;)d-=c;d<Number.EPSILON&&(d=e?0:c);!0!==this.aClockwise||e||(d=d===c?-c:d-c);c=this.aStartAngle+a*d;a=this.aX+this.xRadius*Math.cos(c);var f=this.aY+this.yRadius*Math.sin(c);0!==this.aRotation&&(c=Math.cos(this.aRotation),d=Math.sin(this.aRotation),e=a-this.aX,f-=this.aY,a=e*c-f*d+this.aX,f=e*d+f*c+this.aY);return b.set(a,\nf)};va.prototype.copy=function(a){K.prototype.copy.call(this,a);this.aX=a.aX;this.aY=a.aY;this.xRadius=a.xRadius;this.yRadius=a.yRadius;this.aStartAngle=a.aStartAngle;this.aEndAngle=a.aEndAngle;this.aClockwise=a.aClockwise;this.aRotation=a.aRotation;return this};va.prototype.toJSON=function(){var a=K.prototype.toJSON.call(this);a.aX=this.aX;a.aY=this.aY;a.xRadius=this.xRadius;a.yRadius=this.yRadius;a.aStartAngle=this.aStartAngle;a.aEndAngle=this.aEndAngle;a.aClockwise=this.aClockwise;a.aRotation=\nthis.aRotation;return a};va.prototype.fromJSON=function(a){K.prototype.fromJSON.call(this,a);this.aX=a.aX;this.aY=a.aY;this.xRadius=a.xRadius;this.yRadius=a.yRadius;this.aStartAngle=a.aStartAngle;this.aEndAngle=a.aEndAngle;this.aClockwise=a.aClockwise;this.aRotation=a.aRotation;return this};kc.prototype=Object.create(va.prototype);kc.prototype.constructor=kc;kc.prototype.isArcCurve=!0;var Ud=new n,Fe=new je,Ge=new je,He=new je;ta.prototype=Object.create(K.prototype);ta.prototype.constructor=ta;ta.prototype.isCatmullRomCurve3=\n!0;ta.prototype.getPoint=function(a,b){b=b||new n;var c=this.points,d=c.length;a*=d-(this.closed?0:1);var e=Math.floor(a);a-=e;this.closed?e+=0<e?0:(Math.floor(Math.abs(e)/d)+1)*d:0===a&&e===d-1&&(e=d-2,a=1);if(this.closed||0<e)var f=c[(e-1)%d];else Ud.subVectors(c[0],c[1]).add(c[0]),f=Ud;var g=c[e%d];var h=c[(e+1)%d];this.closed||e+2<d?c=c[(e+2)%d]:(Ud.subVectors(c[d-1],c[d-2]).add(c[d-1]),c=Ud);if(\"centripetal\"===this.curveType||\"chordal\"===this.curveType){var k=\"chordal\"===this.curveType?.5:.25;\nd=Math.pow(f.distanceToSquared(g),k);e=Math.pow(g.distanceToSquared(h),k);k=Math.pow(h.distanceToSquared(c),k);1E-4>e&&(e=1);1E-4>d&&(d=e);1E-4>k&&(k=e);Fe.initNonuniformCatmullRom(f.x,g.x,h.x,c.x,d,e,k);Ge.initNonuniformCatmullRom(f.y,g.y,h.y,c.y,d,e,k);He.initNonuniformCatmullRom(f.z,g.z,h.z,c.z,d,e,k)}else\"catmullrom\"===this.curveType&&(Fe.initCatmullRom(f.x,g.x,h.x,c.x,this.tension),Ge.initCatmullRom(f.y,g.y,h.y,c.y,this.tension),He.initCatmullRom(f.z,g.z,h.z,c.z,this.tension));b.set(Fe.calc(a),\nGe.calc(a),He.calc(a));return b};ta.prototype.copy=function(a){K.prototype.copy.call(this,a);this.points=[];for(var b=0,c=a.points.length;b<c;b++)this.points.push(a.points[b].clone());this.closed=a.closed;this.curveType=a.curveType;this.tension=a.tension;return this};ta.prototype.toJSON=function(){var a=K.prototype.toJSON.call(this);a.points=[];for(var b=0,c=this.points.length;b<c;b++)a.points.push(this.points[b].toArray());a.closed=this.closed;a.curveType=this.curveType;a.tension=this.tension;return a};\nta.prototype.fromJSON=function(a){K.prototype.fromJSON.call(this,a);this.points=[];for(var b=0,c=a.points.length;b<c;b++){var d=a.points[b];this.points.push((new n).fromArray(d))}this.closed=a.closed;this.curveType=a.curveType;this.tension=a.tension;return this};Ja.prototype=Object.create(K.prototype);Ja.prototype.constructor=Ja;Ja.prototype.isCubicBezierCurve=!0;Ja.prototype.getPoint=function(a,b){b=b||new z;var c=this.v0,d=this.v1,e=this.v2,f=this.v3;b.set(hd(a,c.x,d.x,e.x,f.x),hd(a,c.y,d.y,e.y,\nf.y));return b};Ja.prototype.copy=function(a){K.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);this.v3.copy(a.v3);return this};Ja.prototype.toJSON=function(){var a=K.prototype.toJSON.call(this);a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();a.v3=this.v3.toArray();return a};Ja.prototype.fromJSON=function(a){K.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);this.v3.fromArray(a.v3);return this};\nUa.prototype=Object.create(K.prototype);Ua.prototype.constructor=Ua;Ua.prototype.isCubicBezierCurve3=!0;Ua.prototype.getPoint=function(a,b){b=b||new n;var c=this.v0,d=this.v1,e=this.v2,f=this.v3;b.set(hd(a,c.x,d.x,e.x,f.x),hd(a,c.y,d.y,e.y,f.y),hd(a,c.z,d.z,e.z,f.z));return b};Ua.prototype.copy=function(a){K.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);this.v3.copy(a.v3);return this};Ua.prototype.toJSON=function(){var a=K.prototype.toJSON.call(this);a.v0=this.v0.toArray();\na.v1=this.v1.toArray();a.v2=this.v2.toArray();a.v3=this.v3.toArray();return a};Ua.prototype.fromJSON=function(a){K.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);this.v3.fromArray(a.v3);return this};Aa.prototype=Object.create(K.prototype);Aa.prototype.constructor=Aa;Aa.prototype.isLineCurve=!0;Aa.prototype.getPoint=function(a,b){b=b||new z;1===a?b.copy(this.v2):(b.copy(this.v2).sub(this.v1),b.multiplyScalar(a).add(this.v1));return b};Aa.prototype.getPointAt=\nfunction(a,b){return this.getPoint(a,b)};Aa.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()};Aa.prototype.copy=function(a){K.prototype.copy.call(this,a);this.v1.copy(a.v1);this.v2.copy(a.v2);return this};Aa.prototype.toJSON=function(){var a=K.prototype.toJSON.call(this);a.v1=this.v1.toArray();a.v2=this.v2.toArray();return a};Aa.prototype.fromJSON=function(a){K.prototype.fromJSON.call(this,a);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this};Ka.prototype=\nObject.create(K.prototype);Ka.prototype.constructor=Ka;Ka.prototype.isLineCurve3=!0;Ka.prototype.getPoint=function(a,b){b=b||new n;1===a?b.copy(this.v2):(b.copy(this.v2).sub(this.v1),b.multiplyScalar(a).add(this.v1));return b};Ka.prototype.getPointAt=function(a,b){return this.getPoint(a,b)};Ka.prototype.copy=function(a){K.prototype.copy.call(this,a);this.v1.copy(a.v1);this.v2.copy(a.v2);return this};Ka.prototype.toJSON=function(){var a=K.prototype.toJSON.call(this);a.v1=this.v1.toArray();a.v2=this.v2.toArray();\nreturn a};Ka.prototype.fromJSON=function(a){K.prototype.fromJSON.call(this,a);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this};La.prototype=Object.create(K.prototype);La.prototype.constructor=La;La.prototype.isQuadraticBezierCurve=!0;La.prototype.getPoint=function(a,b){b=b||new z;var c=this.v0,d=this.v1,e=this.v2;b.set(gd(a,c.x,d.x,e.x),gd(a,c.y,d.y,e.y));return b};La.prototype.copy=function(a){K.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);return this};\nLa.prototype.toJSON=function(){var a=K.prototype.toJSON.call(this);a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();return a};La.prototype.fromJSON=function(a){K.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this};Va.prototype=Object.create(K.prototype);Va.prototype.constructor=Va;Va.prototype.isQuadraticBezierCurve3=!0;Va.prototype.getPoint=function(a,b){b=b||new n;var c=this.v0,d=this.v1,e=this.v2;b.set(gd(a,c.x,\nd.x,e.x),gd(a,c.y,d.y,e.y),gd(a,c.z,d.z,e.z));return b};Va.prototype.copy=function(a){K.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);return this};Va.prototype.toJSON=function(){var a=K.prototype.toJSON.call(this);a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();return a};Va.prototype.fromJSON=function(a){K.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this};Ma.prototype=Object.create(K.prototype);\nMa.prototype.constructor=Ma;Ma.prototype.isSplineCurve=!0;Ma.prototype.getPoint=function(a,b){b=b||new z;var c=this.points,d=(c.length-1)*a;a=Math.floor(d);d-=a;var e=c[0===a?a:a-1],f=c[a],g=c[a>c.length-2?c.length-1:a+1];c=c[a>c.length-3?c.length-1:a+2];b.set(vf(d,e.x,f.x,g.x,c.x),vf(d,e.y,f.y,g.y,c.y));return b};Ma.prototype.copy=function(a){K.prototype.copy.call(this,a);this.points=[];for(var b=0,c=a.points.length;b<c;b++)this.points.push(a.points[b].clone());return this};Ma.prototype.toJSON=function(){var a=\nK.prototype.toJSON.call(this);a.points=[];for(var b=0,c=this.points.length;b<c;b++)a.points.push(this.points[b].toArray());return a};Ma.prototype.fromJSON=function(a){K.prototype.fromJSON.call(this,a);this.points=[];for(var b=0,c=a.points.length;b<c;b++){var d=a.points[b];this.points.push((new z).fromArray(d))}return this};var If=Object.freeze({ArcCurve:kc,CatmullRomCurve3:ta,CubicBezierCurve:Ja,CubicBezierCurve3:Ua,EllipseCurve:va,LineCurve:Aa,LineCurve3:Ka,QuadraticBezierCurve:La,QuadraticBezierCurve3:Va,\nSplineCurve:Ma});$a.prototype=Object.assign(Object.create(K.prototype),{constructor:$a,add:function(a){this.curves.push(a)},closePath:function(){var a=this.curves[0].getPoint(0),b=this.curves[this.curves.length-1].getPoint(1);a.equals(b)||this.curves.push(new Aa(b,a))},getPoint:function(a){var b=a*this.getLength(),c=this.getCurveLengths();for(a=0;a<c.length;){if(c[a]>=b)return b=c[a]-b,a=this.curves[a],c=a.getLength(),a.getPointAt(0===c?0:1-b/c);a++}return null},getLength:function(){var a=this.getCurveLengths();\nreturn a[a.length-1]},updateArcLengths:function(){this.needsUpdate=!0;this.cacheLengths=null;this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var a=[],b=0,c=0,d=this.curves.length;c<d;c++)b+=this.curves[c].getLength(),a.push(b);return this.cacheLengths=a},getSpacedPoints:function(a){void 0===a&&(a=40);for(var b=[],c=0;c<=a;c++)b.push(this.getPoint(c/a));this.autoClose&&b.push(b[0]);return b},getPoints:function(a){a=\na||12;for(var b=[],c,d=0,e=this.curves;d<e.length;d++){var f=e[d];f=f.getPoints(f&&f.isEllipseCurve?2*a:f&&(f.isLineCurve||f.isLineCurve3)?1:f&&f.isSplineCurve?a*f.points.length:a);for(var g=0;g<f.length;g++){var h=f[g];c&&c.equals(h)||(b.push(h),c=h)}}this.autoClose&&1<b.length&&!b[b.length-1].equals(b[0])&&b.push(b[0]);return b},copy:function(a){K.prototype.copy.call(this,a);this.curves=[];for(var b=0,c=a.curves.length;b<c;b++)this.curves.push(a.curves[b].clone());this.autoClose=a.autoClose;return this},\ntoJSON:function(){var a=K.prototype.toJSON.call(this);a.autoClose=this.autoClose;a.curves=[];for(var b=0,c=this.curves.length;b<c;b++)a.curves.push(this.curves[b].toJSON());return a},fromJSON:function(a){K.prototype.fromJSON.call(this,a);this.autoClose=a.autoClose;this.curves=[];for(var b=0,c=a.curves.length;b<c;b++){var d=a.curves[b];this.curves.push((new If[d.type]).fromJSON(d))}return this}});Na.prototype=Object.assign(Object.create($a.prototype),{constructor:Na,setFromPoints:function(a){this.moveTo(a[0].x,\na[0].y);for(var b=1,c=a.length;b<c;b++)this.lineTo(a[b].x,a[b].y)},moveTo:function(a,b){this.currentPoint.set(a,b)},lineTo:function(a,b){var c=new Aa(this.currentPoint.clone(),new z(a,b));this.curves.push(c);this.currentPoint.set(a,b)},quadraticCurveTo:function(a,b,c,d){a=new La(this.currentPoint.clone(),new z(a,b),new z(c,d));this.curves.push(a);this.currentPoint.set(c,d)},bezierCurveTo:function(a,b,c,d,e,f){a=new Ja(this.currentPoint.clone(),new z(a,b),new z(c,d),new z(e,f));this.curves.push(a);\nthis.currentPoint.set(e,f)},splineThru:function(a){var b=[this.currentPoint.clone()].concat(a);b=new Ma(b);this.curves.push(b);this.currentPoint.copy(a[a.length-1])},arc:function(a,b,c,d,e,f){this.absarc(a+this.currentPoint.x,b+this.currentPoint.y,c,d,e,f)},absarc:function(a,b,c,d,e,f){this.absellipse(a,b,c,c,d,e,f)},ellipse:function(a,b,c,d,e,f,g,h){this.absellipse(a+this.currentPoint.x,b+this.currentPoint.y,c,d,e,f,g,h)},absellipse:function(a,b,c,d,e,f,g,h){a=new va(a,b,c,d,e,f,g,h);0<this.curves.length&&\n(b=a.getPoint(0),b.equals(this.currentPoint)||this.lineTo(b.x,b.y));this.curves.push(a);a=a.getPoint(1);this.currentPoint.copy(a)},copy:function(a){$a.prototype.copy.call(this,a);this.currentPoint.copy(a.currentPoint);return this},toJSON:function(){var a=$a.prototype.toJSON.call(this);a.currentPoint=this.currentPoint.toArray();return a},fromJSON:function(a){$a.prototype.fromJSON.call(this,a);this.currentPoint.fromArray(a.currentPoint);return this}});hb.prototype=Object.assign(Object.create(Na.prototype),\n{constructor:hb,getPointsHoles:function(a){for(var b=[],c=0,d=this.holes.length;c<d;c++)b[c]=this.holes[c].getPoints(a);return b},extractPoints:function(a){return{shape:this.getPoints(a),holes:this.getPointsHoles(a)}},copy:function(a){Na.prototype.copy.call(this,a);this.holes=[];for(var b=0,c=a.holes.length;b<c;b++)this.holes.push(a.holes[b].clone());return this},toJSON:function(){var a=Na.prototype.toJSON.call(this);a.uuid=this.uuid;a.holes=[];for(var b=0,c=this.holes.length;b<c;b++)a.holes.push(this.holes[b].toJSON());\nreturn a},fromJSON:function(a){Na.prototype.fromJSON.call(this,a);this.uuid=a.uuid;this.holes=[];for(var b=0,c=a.holes.length;b<c;b++){var d=a.holes[b];this.holes.push((new Na).fromJSON(d))}return this}});ba.prototype=Object.assign(Object.create(C.prototype),{constructor:ba,isLight:!0,copy:function(a){C.prototype.copy.call(this,a);this.color.copy(a.color);this.intensity=a.intensity;return this},toJSON:function(a){a=C.prototype.toJSON.call(this,a);a.object.color=this.color.getHex();a.object.intensity=\nthis.intensity;void 0!==this.groundColor&&(a.object.groundColor=this.groundColor.getHex());void 0!==this.distance&&(a.object.distance=this.distance);void 0!==this.angle&&(a.object.angle=this.angle);void 0!==this.decay&&(a.object.decay=this.decay);void 0!==this.penumbra&&(a.object.penumbra=this.penumbra);void 0!==this.shadow&&(a.object.shadow=this.shadow.toJSON());return a}});Id.prototype=Object.assign(Object.create(ba.prototype),{constructor:Id,isHemisphereLight:!0,copy:function(a){ba.prototype.copy.call(this,\na);this.groundColor.copy(a.groundColor);return this}});Object.assign(Gb.prototype,{copy:function(a){this.camera=a.camera.clone();this.bias=a.bias;this.radius=a.radius;this.mapSize.copy(a.mapSize);return this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var a={};0!==this.bias&&(a.bias=this.bias);1!==this.radius&&(a.radius=this.radius);if(512!==this.mapSize.x||512!==this.mapSize.y)a.mapSize=this.mapSize.toArray();a.camera=this.camera.toJSON(!1).object;delete a.camera.matrix;\nreturn a}});Jd.prototype=Object.assign(Object.create(Gb.prototype),{constructor:Jd,isSpotLightShadow:!0,update:function(a){var b=this.camera,c=2*R.RAD2DEG*a.angle,d=this.mapSize.width/this.mapSize.height;a=a.distance||b.far;if(c!==b.fov||d!==b.aspect||a!==b.far)b.fov=c,b.aspect=d,b.far=a,b.updateProjectionMatrix()}});Kd.prototype=Object.assign(Object.create(ba.prototype),{constructor:Kd,isSpotLight:!0,copy:function(a){ba.prototype.copy.call(this,a);this.distance=a.distance;this.angle=a.angle;this.penumbra=\na.penumbra;this.decay=a.decay;this.target=a.target.clone();this.shadow=a.shadow.clone();return this}});Ld.prototype=Object.assign(Object.create(ba.prototype),{constructor:Ld,isPointLight:!0,copy:function(a){ba.prototype.copy.call(this,a);this.distance=a.distance;this.decay=a.decay;this.shadow=a.shadow.clone();return this}});id.prototype=Object.assign(Object.create(Ra.prototype),{constructor:id,isOrthographicCamera:!0,copy:function(a,b){Ra.prototype.copy.call(this,a,b);this.left=a.left;this.right=\na.right;this.top=a.top;this.bottom=a.bottom;this.near=a.near;this.far=a.far;this.zoom=a.zoom;this.view=null===a.view?null:Object.assign({},a.view);return this},setViewOffset:function(a,b,c,d,e,f){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});this.view.enabled=!0;this.view.fullWidth=a;this.view.fullHeight=b;this.view.offsetX=c;this.view.offsetY=d;this.view.width=e;this.view.height=f;this.updateProjectionMatrix()},clearViewOffset:function(){null!==\nthis.view&&(this.view.enabled=!1);this.updateProjectionMatrix()},updateProjectionMatrix:function(){var a=(this.right-this.left)/(2*this.zoom),b=(this.top-this.bottom)/(2*this.zoom),c=(this.right+this.left)/2,d=(this.top+this.bottom)/2,e=c-a;c+=a;a=d+b;b=d-b;if(null!==this.view&&this.view.enabled){c=this.zoom/(this.view.width/this.view.fullWidth);b=this.zoom/(this.view.height/this.view.fullHeight);var f=(this.right-this.left)/this.view.width;d=(this.top-this.bottom)/this.view.height;e+=this.view.offsetX/\nc*f;c=e+this.view.width/c*f;a-=this.view.offsetY/b*d;b=a-this.view.height/b*d}this.projectionMatrix.makeOrthographic(e,c,a,b,this.near,this.far);this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(a){a=C.prototype.toJSON.call(this,a);a.object.zoom=this.zoom;a.object.left=this.left;a.object.right=this.right;a.object.top=this.top;a.object.bottom=this.bottom;a.object.near=this.near;a.object.far=this.far;null!==this.view&&(a.object.view=Object.assign({},this.view));return a}});\nMd.prototype=Object.assign(Object.create(Gb.prototype),{constructor:Md});Nd.prototype=Object.assign(Object.create(ba.prototype),{constructor:Nd,isDirectionalLight:!0,copy:function(a){ba.prototype.copy.call(this,a);this.target=a.target.clone();this.shadow=a.shadow.clone();return this}});Od.prototype=Object.assign(Object.create(ba.prototype),{constructor:Od,isAmbientLight:!0});Pd.prototype=Object.assign(Object.create(ba.prototype),{constructor:Pd,isRectAreaLight:!0,copy:function(a){ba.prototype.copy.call(this,\na);this.width=a.width;this.height=a.height;return this},toJSON:function(a){a=ba.prototype.toJSON.call(this,a);a.object.width=this.width;a.object.height=this.height;return a}});Object.assign(Qd.prototype,{load:function(a,b,c,d){var e=this,f=new Ia(e.manager);f.setPath(e.path);f.load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},parse:function(a){function b(a){void 0===c[a]&&console.warn(\"THREE.MaterialLoader: Undefined texture\",a);return c[a]}var c=this.textures,d=new dh[a.type];void 0!==a.uuid&&\n(d.uuid=a.uuid);void 0!==a.name&&(d.name=a.name);void 0!==a.color&&d.color.setHex(a.color);void 0!==a.roughness&&(d.roughness=a.roughness);void 0!==a.metalness&&(d.metalness=a.metalness);void 0!==a.emissive&&d.emissive.setHex(a.emissive);void 0!==a.specular&&d.specular.setHex(a.specular);void 0!==a.shininess&&(d.shininess=a.shininess);void 0!==a.clearCoat&&(d.clearCoat=a.clearCoat);void 0!==a.clearCoatRoughness&&(d.clearCoatRoughness=a.clearCoatRoughness);void 0!==a.vertexColors&&(d.vertexColors=\na.vertexColors);void 0!==a.fog&&(d.fog=a.fog);void 0!==a.flatShading&&(d.flatShading=a.flatShading);void 0!==a.blending&&(d.blending=a.blending);void 0!==a.combine&&(d.combine=a.combine);void 0!==a.side&&(d.side=a.side);void 0!==a.opacity&&(d.opacity=a.opacity);void 0!==a.transparent&&(d.transparent=a.transparent);void 0!==a.alphaTest&&(d.alphaTest=a.alphaTest);void 0!==a.depthTest&&(d.depthTest=a.depthTest);void 0!==a.depthWrite&&(d.depthWrite=a.depthWrite);void 0!==a.colorWrite&&(d.colorWrite=a.colorWrite);\nvoid 0!==a.wireframe&&(d.wireframe=a.wireframe);void 0!==a.wireframeLinewidth&&(d.wireframeLinewidth=a.wireframeLinewidth);void 0!==a.wireframeLinecap&&(d.wireframeLinecap=a.wireframeLinecap);void 0!==a.wireframeLinejoin&&(d.wireframeLinejoin=a.wireframeLinejoin);void 0!==a.rotation&&(d.rotation=a.rotation);1!==a.linewidth&&(d.linewidth=a.linewidth);void 0!==a.dashSize&&(d.dashSize=a.dashSize);void 0!==a.gapSize&&(d.gapSize=a.gapSize);void 0!==a.scale&&(d.scale=a.scale);void 0!==a.polygonOffset&&\n(d.polygonOffset=a.polygonOffset);void 0!==a.polygonOffsetFactor&&(d.polygonOffsetFactor=a.polygonOffsetFactor);void 0!==a.polygonOffsetUnits&&(d.polygonOffsetUnits=a.polygonOffsetUnits);void 0!==a.skinning&&(d.skinning=a.skinning);void 0!==a.morphTargets&&(d.morphTargets=a.morphTargets);void 0!==a.dithering&&(d.dithering=a.dithering);void 0!==a.visible&&(d.visible=a.visible);void 0!==a.userData&&(d.userData=a.userData);if(void 0!==a.uniforms)for(var e in a.uniforms){var f=a.uniforms[e];d.uniforms[e]=\n{};switch(f.type){case \"t\":d.uniforms[e].value=b(f.value);break;case \"c\":d.uniforms[e].value=(new J).setHex(f.value);break;case \"v2\":d.uniforms[e].value=(new z).fromArray(f.value);break;case \"v3\":d.uniforms[e].value=(new n).fromArray(f.value);break;case \"v4\":d.uniforms[e].value=(new ca).fromArray(f.value);break;case \"m4\":d.uniforms[e].value=(new O).fromArray(f.value);break;default:d.uniforms[e].value=f.value}}void 0!==a.defines&&(d.defines=a.defines);void 0!==a.vertexShader&&(d.vertexShader=a.vertexShader);\nvoid 0!==a.fragmentShader&&(d.fragmentShader=a.fragmentShader);void 0!==a.shading&&(d.flatShading=1===a.shading);void 0!==a.size&&(d.size=a.size);void 0!==a.sizeAttenuation&&(d.sizeAttenuation=a.sizeAttenuation);void 0!==a.map&&(d.map=b(a.map));void 0!==a.alphaMap&&(d.alphaMap=b(a.alphaMap),d.transparent=!0);void 0!==a.bumpMap&&(d.bumpMap=b(a.bumpMap));void 0!==a.bumpScale&&(d.bumpScale=a.bumpScale);void 0!==a.normalMap&&(d.normalMap=b(a.normalMap));void 0!==a.normalMapType&&(d.normalMapType=a.normalMapType);\nvoid 0!==a.normalScale&&(e=a.normalScale,!1===Array.isArray(e)&&(e=[e,e]),d.normalScale=(new z).fromArray(e));void 0!==a.displacementMap&&(d.displacementMap=b(a.displacementMap));void 0!==a.displacementScale&&(d.displacementScale=a.displacementScale);void 0!==a.displacementBias&&(d.displacementBias=a.displacementBias);void 0!==a.roughnessMap&&(d.roughnessMap=b(a.roughnessMap));void 0!==a.metalnessMap&&(d.metalnessMap=b(a.metalnessMap));void 0!==a.emissiveMap&&(d.emissiveMap=b(a.emissiveMap));void 0!==\na.emissiveIntensity&&(d.emissiveIntensity=a.emissiveIntensity);void 0!==a.specularMap&&(d.specularMap=b(a.specularMap));void 0!==a.envMap&&(d.envMap=b(a.envMap));void 0!==a.envMapIntensity&&(d.envMapIntensity=a.envMapIntensity);void 0!==a.reflectivity&&(d.reflectivity=a.reflectivity);void 0!==a.lightMap&&(d.lightMap=b(a.lightMap));void 0!==a.lightMapIntensity&&(d.lightMapIntensity=a.lightMapIntensity);void 0!==a.aoMap&&(d.aoMap=b(a.aoMap));void 0!==a.aoMapIntensity&&(d.aoMapIntensity=a.aoMapIntensity);\nvoid 0!==a.gradientMap&&(d.gradientMap=b(a.gradientMap));return d},setPath:function(a){this.path=a;return this},setTextures:function(a){this.textures=a;return this}});var Ie={decodeText:function(a){if(\"undefined\"!==typeof TextDecoder)return(new TextDecoder).decode(a);for(var b=\"\",c=0,d=a.length;c<d;c++)b+=String.fromCharCode(a[c]);return decodeURIComponent(escape(b))},extractUrlBase:function(a){var b=a.lastIndexOf(\"/\");return-1===b?\"./\":a.substr(0,b+1)}};Object.assign(ke.prototype,{load:function(a,\nb,c,d){var e=this,f=new Ia(e.manager);f.setPath(e.path);f.load(a,function(a){b(e.parse(JSON.parse(a)))},c,d)},parse:function(a){var b=new D,c=a.data.index;void 0!==c&&(c=new Jf[c.type](c.array),b.setIndex(new E(c,1)));var d=a.data.attributes;for(f in d){var e=d[f];c=new Jf[e.type](e.array);b.addAttribute(f,new E(c,e.itemSize,e.normalized))}var f=a.data.groups||a.data.drawcalls||a.data.offsets;if(void 0!==f)for(c=0,d=f.length;c!==d;++c)e=f[c],b.addGroup(e.start,e.count,e.materialIndex);f=a.data.boundingSphere;\nvoid 0!==f&&(c=new n,void 0!==f.center&&c.fromArray(f.center),b.boundingSphere=new Ea(c,f.radius));a.name&&(b.name=a.name);a.userData&&(b.userData=a.userData);return b},setPath:function(a){this.path=a;return this}});var Jf={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:\"undefined\"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};Object.assign(le.prototype,\n{crossOrigin:\"anonymous\",load:function(a,b,c,d){var e=this,f=void 0===this.path?Ie.extractUrlBase(a):this.path;this.resourcePath=this.resourcePath||f;f=new Ia(e.manager);f.setPath(this.path);f.load(a,function(c){var f=null;try{f=JSON.parse(c)}catch(k){void 0!==d&&d(k);console.error(\"THREE:ObjectLoader: Can't parse \"+a+\".\",k.message);return}c=f.metadata;void 0===c||void 0===c.type||\"geometry\"===c.type.toLowerCase()?console.error(\"THREE.ObjectLoader: Can't load \"+a):e.parse(f,b)},c,d)},setPath:function(a){this.path=\na;return this},setResourcePath:function(a){this.resourcePath=a;return this},setCrossOrigin:function(a){this.crossOrigin=a;return this},parse:function(a,b){var c=this.parseShape(a.shapes);c=this.parseGeometries(a.geometries,c);var d=this.parseImages(a.images,function(){void 0!==b&&b(e)});d=this.parseTextures(a.textures,d);d=this.parseMaterials(a.materials,d);var e=this.parseObject(a.object,c,d);a.animations&&(e.animations=this.parseAnimations(a.animations));void 0!==a.images&&0!==a.images.length||\nvoid 0===b||b(e);return e},parseShape:function(a){var b={};if(void 0!==a)for(var c=0,d=a.length;c<d;c++){var e=(new hb).fromJSON(a[c]);b[e.uuid]=e}return b},parseGeometries:function(a,b){var c={};if(void 0!==a)for(var d=new ke,e=0,f=a.length;e<f;e++){var g=a[e];switch(g.type){case \"PlaneGeometry\":case \"PlaneBufferGeometry\":var h=new ia[g.type](g.width,g.height,g.widthSegments,g.heightSegments);break;case \"BoxGeometry\":case \"BoxBufferGeometry\":case \"CubeGeometry\":h=new ia[g.type](g.width,g.height,\ng.depth,g.widthSegments,g.heightSegments,g.depthSegments);break;case \"CircleGeometry\":case \"CircleBufferGeometry\":h=new ia[g.type](g.radius,g.segments,g.thetaStart,g.thetaLength);break;case \"CylinderGeometry\":case \"CylinderBufferGeometry\":h=new ia[g.type](g.radiusTop,g.radiusBottom,g.height,g.radialSegments,g.heightSegments,g.openEnded,g.thetaStart,g.thetaLength);break;case \"ConeGeometry\":case \"ConeBufferGeometry\":h=new ia[g.type](g.radius,g.height,g.radialSegments,g.heightSegments,g.openEnded,g.thetaStart,\ng.thetaLength);break;case \"SphereGeometry\":case \"SphereBufferGeometry\":h=new ia[g.type](g.radius,g.widthSegments,g.heightSegments,g.phiStart,g.phiLength,g.thetaStart,g.thetaLength);break;case \"DodecahedronGeometry\":case \"DodecahedronBufferGeometry\":case \"IcosahedronGeometry\":case \"IcosahedronBufferGeometry\":case \"OctahedronGeometry\":case \"OctahedronBufferGeometry\":case \"TetrahedronGeometry\":case \"TetrahedronBufferGeometry\":h=new ia[g.type](g.radius,g.detail);break;case \"RingGeometry\":case \"RingBufferGeometry\":h=\nnew ia[g.type](g.innerRadius,g.outerRadius,g.thetaSegments,g.phiSegments,g.thetaStart,g.thetaLength);break;case \"TorusGeometry\":case \"TorusBufferGeometry\":h=new ia[g.type](g.radius,g.tube,g.radialSegments,g.tubularSegments,g.arc);break;case \"TorusKnotGeometry\":case \"TorusKnotBufferGeometry\":h=new ia[g.type](g.radius,g.tube,g.tubularSegments,g.radialSegments,g.p,g.q);break;case \"LatheGeometry\":case \"LatheBufferGeometry\":h=new ia[g.type](g.points,g.segments,g.phiStart,g.phiLength);break;case \"PolyhedronGeometry\":case \"PolyhedronBufferGeometry\":h=\nnew ia[g.type](g.vertices,g.indices,g.radius,g.details);break;case \"ShapeGeometry\":case \"ShapeBufferGeometry\":h=[];for(var k=0,m=g.shapes.length;k<m;k++){var l=b[g.shapes[k]];h.push(l)}h=new ia[g.type](h,g.curveSegments);break;case \"ExtrudeGeometry\":case \"ExtrudeBufferGeometry\":h=[];k=0;for(m=g.shapes.length;k<m;k++)l=b[g.shapes[k]],h.push(l);k=g.options.extrudePath;void 0!==k&&(g.options.extrudePath=(new If[k.type]).fromJSON(k));h=new ia[g.type](h,g.options);break;case \"BufferGeometry\":h=d.parse(g);\nbreak;case \"Geometry\":\"THREE\"in window&&\"LegacyJSONLoader\"in THREE?h=(new THREE.LegacyJSONLoader).parse(g,this.resourcePath).geometry:console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type \"Geometry\".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type \"'+g.type+'\"');continue}h.uuid=g.uuid;void 0!==g.name&&(h.name=g.name);!0===h.isBufferGeometry&&void 0!==g.userData&&(h.userData=g.userData);c[g.uuid]=h}return c},parseMaterials:function(a,\nb){var c={},d={};if(void 0!==a){var e=new Qd;e.setTextures(b);b=0;for(var f=a.length;b<f;b++){var g=a[b];if(\"MultiMaterial\"===g.type){for(var h=[],k=0;k<g.materials.length;k++){var m=g.materials[k];void 0===c[m.uuid]&&(c[m.uuid]=e.parse(m));h.push(c[m.uuid])}d[g.uuid]=h}else d[g.uuid]=e.parse(g),c[g.uuid]=d[g.uuid]}}return d},parseAnimations:function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c],e=Ha.parse(d);void 0!==d.uuid&&(e.uuid=d.uuid);b.push(e)}return b},parseImages:function(a,b){function c(a){d.manager.itemStart(a);\nreturn f.load(a,function(){d.manager.itemEnd(a)},void 0,function(){d.manager.itemError(a);d.manager.itemEnd(a)})}var d=this,e={};if(void 0!==a&&0<a.length){b=new ge(b);var f=new fd(b);f.setCrossOrigin(this.crossOrigin);b=0;for(var g=a.length;b<g;b++){var h=a[b],k=h.url;if(Array.isArray(k)){e[h.uuid]=[];for(var m=0,l=k.length;m<l;m++){var p=k[m];p=/^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test(p)?p:d.resourcePath+p;e[h.uuid].push(c(p))}}else p=/^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test(h.url)?h.url:d.resourcePath+h.url,e[h.uuid]=\nc(p)}}return e},parseTextures:function(a,b){function c(a,b){if(\"number\"===typeof a)return a;console.warn(\"THREE.ObjectLoader.parseTexture: Constant should be in numeric form.\",a);return b[a]}var d={};if(void 0!==a)for(var e=0,f=a.length;e<f;e++){var g=a[e];void 0===g.image&&console.warn('THREE.ObjectLoader: No \"image\" specified for',g.uuid);void 0===b[g.image]&&console.warn(\"THREE.ObjectLoader: Undefined image\",g.image);var h=Array.isArray(b[g.image])?new Xa(b[g.image]):new X(b[g.image]);h.needsUpdate=\n!0;h.uuid=g.uuid;void 0!==g.name&&(h.name=g.name);void 0!==g.mapping&&(h.mapping=c(g.mapping,eh));void 0!==g.offset&&h.offset.fromArray(g.offset);void 0!==g.repeat&&h.repeat.fromArray(g.repeat);void 0!==g.center&&h.center.fromArray(g.center);void 0!==g.rotation&&(h.rotation=g.rotation);void 0!==g.wrap&&(h.wrapS=c(g.wrap[0],Kf),h.wrapT=c(g.wrap[1],Kf));void 0!==g.format&&(h.format=g.format);void 0!==g.minFilter&&(h.minFilter=c(g.minFilter,Lf));void 0!==g.magFilter&&(h.magFilter=c(g.magFilter,Lf));\nvoid 0!==g.anisotropy&&(h.anisotropy=g.anisotropy);void 0!==g.flipY&&(h.flipY=g.flipY);d[g.uuid]=h}return d},parseObject:function(a,b,c){function d(a){void 0===b[a]&&console.warn(\"THREE.ObjectLoader: Undefined geometry\",a);return b[a]}function e(a){if(void 0!==a){if(Array.isArray(a)){for(var b=[],d=0,e=a.length;d<e;d++){var f=a[d];void 0===c[f]&&console.warn(\"THREE.ObjectLoader: Undefined material\",f);b.push(c[f])}return b}void 0===c[a]&&console.warn(\"THREE.ObjectLoader: Undefined material\",a);return c[a]}}\nswitch(a.type){case \"Scene\":var f=new xd;void 0!==a.background&&Number.isInteger(a.background)&&(f.background=new J(a.background));void 0!==a.fog&&(\"Fog\"===a.fog.type?f.fog=new Rb(a.fog.color,a.fog.near,a.fog.far):\"FogExp2\"===a.fog.type&&(f.fog=new Qb(a.fog.color,a.fog.density)));break;case \"PerspectiveCamera\":f=new V(a.fov,a.aspect,a.near,a.far);void 0!==a.focus&&(f.focus=a.focus);void 0!==a.zoom&&(f.zoom=a.zoom);void 0!==a.filmGauge&&(f.filmGauge=a.filmGauge);void 0!==a.filmOffset&&(f.filmOffset=\na.filmOffset);void 0!==a.view&&(f.view=Object.assign({},a.view));break;case \"OrthographicCamera\":f=new id(a.left,a.right,a.top,a.bottom,a.near,a.far);void 0!==a.zoom&&(f.zoom=a.zoom);void 0!==a.view&&(f.view=Object.assign({},a.view));break;case \"AmbientLight\":f=new Od(a.color,a.intensity);break;case \"DirectionalLight\":f=new Nd(a.color,a.intensity);break;case \"PointLight\":f=new Ld(a.color,a.intensity,a.distance,a.decay);break;case \"RectAreaLight\":f=new Pd(a.color,a.intensity,a.width,a.height);break;\ncase \"SpotLight\":f=new Kd(a.color,a.intensity,a.distance,a.angle,a.penumbra,a.decay);break;case \"HemisphereLight\":f=new Id(a.color,a.groundColor,a.intensity);break;case \"SkinnedMesh\":console.warn(\"THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.\");case \"Mesh\":f=d(a.geometry);var g=e(a.material);f=f.bones&&0<f.bones.length?new Hc(f,g):new pa(f,g);break;case \"LOD\":f=new Gc;break;case \"Line\":f=new ma(d(a.geometry),e(a.material),a.mode);break;case \"LineLoop\":f=new zd(d(a.geometry),e(a.material));\nbreak;case \"LineSegments\":f=new S(d(a.geometry),e(a.material));break;case \"PointCloud\":case \"Points\":f=new Tb(d(a.geometry),e(a.material));break;case \"Sprite\":f=new Fc(e(a.material));break;case \"Group\":f=new Pb;break;default:f=new C}f.uuid=a.uuid;void 0!==a.name&&(f.name=a.name);void 0!==a.matrix?(f.matrix.fromArray(a.matrix),void 0!==a.matrixAutoUpdate&&(f.matrixAutoUpdate=a.matrixAutoUpdate),f.matrixAutoUpdate&&f.matrix.decompose(f.position,f.quaternion,f.scale)):(void 0!==a.position&&f.position.fromArray(a.position),\nvoid 0!==a.rotation&&f.rotation.fromArray(a.rotation),void 0!==a.quaternion&&f.quaternion.fromArray(a.quaternion),void 0!==a.scale&&f.scale.fromArray(a.scale));void 0!==a.castShadow&&(f.castShadow=a.castShadow);void 0!==a.receiveShadow&&(f.receiveShadow=a.receiveShadow);a.shadow&&(void 0!==a.shadow.bias&&(f.shadow.bias=a.shadow.bias),void 0!==a.shadow.radius&&(f.shadow.radius=a.shadow.radius),void 0!==a.shadow.mapSize&&f.shadow.mapSize.fromArray(a.shadow.mapSize),void 0!==a.shadow.camera&&(f.shadow.camera=\nthis.parseObject(a.shadow.camera)));void 0!==a.visible&&(f.visible=a.visible);void 0!==a.frustumCulled&&(f.frustumCulled=a.frustumCulled);void 0!==a.renderOrder&&(f.renderOrder=a.renderOrder);void 0!==a.userData&&(f.userData=a.userData);void 0!==a.layers&&(f.layers.mask=a.layers);if(void 0!==a.children){g=a.children;for(var h=0;h<g.length;h++)f.add(this.parseObject(g[h],b,c))}if(\"LOD\"===a.type)for(a=a.levels,g=0;g<a.length;g++){h=a[g];var k=f.getObjectByProperty(\"uuid\",h.object);void 0!==k&&f.addLevel(k,\nh.distance)}return f}});var eh={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},Kf={RepeatWrapping:1E3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},Lf={NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008};\nme.prototype={constructor:me,setOptions:function(a){this.options=a;return this},load:function(a,b,c,d){void 0===a&&(a=\"\");void 0!==this.path&&(a=this.path+a);a=this.manager.resolveURL(a);var e=this,f=Hb.get(a);if(void 0!==f)return e.manager.itemStart(a),setTimeout(function(){b&&b(f);e.manager.itemEnd(a)},0),f;fetch(a).then(function(a){return a.blob()}).then(function(a){return createImageBitmap(a,e.options)}).then(function(c){Hb.add(a,c);b&&b(c);e.manager.itemEnd(a)}).catch(function(b){d&&d(b);e.manager.itemError(a);\ne.manager.itemEnd(a)})},setCrossOrigin:function(){return this},setPath:function(a){this.path=a;return this}};Object.assign(ne.prototype,{moveTo:function(a,b){this.currentPath=new Na;this.subPaths.push(this.currentPath);this.currentPath.moveTo(a,b)},lineTo:function(a,b){this.currentPath.lineTo(a,b)},quadraticCurveTo:function(a,b,c,d){this.currentPath.quadraticCurveTo(a,b,c,d)},bezierCurveTo:function(a,b,c,d,e,f){this.currentPath.bezierCurveTo(a,b,c,d,e,f)},splineThru:function(a){this.currentPath.splineThru(a)},\ntoShapes:function(a,b){function c(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c],f=new hb;f.curves=e.curves;b.push(f)}return b}function d(a,b){for(var c=b.length,d=!1,e=c-1,f=0;f<c;e=f++){var g=b[e],h=b[f],k=h.x-g.x,l=h.y-g.y;if(Math.abs(l)>Number.EPSILON){if(0>l&&(g=b[f],k=-k,h=b[e],l=-l),!(a.y<g.y||a.y>h.y))if(a.y===g.y){if(a.x===g.x)return!0}else{e=l*(a.x-g.x)-k*(a.y-g.y);if(0===e)return!0;0>e||(d=!d)}}else if(a.y===g.y&&(h.x<=a.x&&a.x<=g.x||g.x<=a.x&&a.x<=h.x))return!0}return d}var e=Ya.isClockWise,\nf=this.subPaths;if(0===f.length)return[];if(!0===b)return c(f);b=[];if(1===f.length){var g=f[0];var h=new hb;h.curves=g.curves;b.push(h);return b}var k=!e(f[0].getPoints());k=a?!k:k;h=[];var m=[],l=[],p=0;m[p]=void 0;l[p]=[];for(var n=0,x=f.length;n<x;n++){g=f[n];var t=g.getPoints();var v=e(t);(v=a?!v:v)?(!k&&m[p]&&p++,m[p]={s:new hb,p:t},m[p].s.curves=g.curves,k&&p++,l[p]=[]):l[p].push({h:g,p:t[0]})}if(!m[0])return c(f);if(1<m.length){n=!1;a=[];e=0;for(f=m.length;e<f;e++)h[e]=[];e=0;for(f=m.length;e<\nf;e++)for(g=l[e],v=0;v<g.length;v++){k=g[v];p=!0;for(t=0;t<m.length;t++)d(k.p,m[t].p)&&(e!==t&&a.push({froms:e,tos:t,hole:v}),p?(p=!1,h[t].push(k)):n=!0);p&&h[e].push(k)}0<a.length&&(n||(l=h))}n=0;for(e=m.length;n<e;n++)for(h=m[n].s,b.push(h),a=l[n],f=0,g=a.length;f<g;f++)h.holes.push(a[f].h);return b}});Object.assign(oe.prototype,{isFont:!0,generateShapes:function(a,b){void 0===b&&(b=100);var c=[],d=b;b=this.data;var e=Array.from?Array.from(a):String(a).split(\"\");d/=b.resolution;var f=(b.boundingBox.yMax-\nb.boundingBox.yMin+b.underlineThickness)*d;a=[];for(var g=0,h=0,k=0;k<e.length;k++){var l=e[k];if(\"\\n\"===l)g=0,h-=f;else{var q=d;var p=g,n=h;if(l=b.glyphs[l]||b.glyphs[\"?\"]){var x=new ne;if(l.o)for(var t=l._cachedOutline||(l._cachedOutline=l.o.split(\" \")),v=0,w=t.length;v<w;)switch(t[v++]){case \"m\":var y=t[v++]*q+p;var u=t[v++]*q+n;x.moveTo(y,u);break;case \"l\":y=t[v++]*q+p;u=t[v++]*q+n;x.lineTo(y,u);break;case \"q\":var z=t[v++]*q+p;var B=t[v++]*q+n;var C=t[v++]*q+p;var D=t[v++]*q+n;x.quadraticCurveTo(C,\nD,z,B);break;case \"b\":z=t[v++]*q+p,B=t[v++]*q+n,C=t[v++]*q+p,D=t[v++]*q+n,y=t[v++]*q+p,u=t[v++]*q+n,x.bezierCurveTo(C,D,y,u,z,B)}q={offsetX:l.ha*q,path:x}}else q=void 0;g+=q.offsetX;a.push(q.path)}}b=0;for(e=a.length;b<e;b++)Array.prototype.push.apply(c,a[b].toShapes());return c}});Object.assign(wf.prototype,{load:function(a,b,c,d){var e=this,f=new Ia(this.manager);f.setPath(this.path);f.load(a,function(a){try{var c=JSON.parse(a)}catch(k){console.warn(\"THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead.\"),\nc=JSON.parse(a.substring(65,a.length-2))}a=e.parse(c);b&&b(a)},c,d)},parse:function(a){return new oe(a)},setPath:function(a){this.path=a;return this}});jd.Handlers={handlers:[],add:function(a,b){this.handlers.push(a,b)},get:function(a){for(var b=this.handlers,c=0,d=b.length;c<d;c+=2){var e=b[c+1];if(b[c].test(a))return e}return null}};Object.assign(jd.prototype,{crossOrigin:\"anonymous\",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(a,b,c){for(var d=\n[],e=0;e<a.length;++e)d[e]=this.createMaterial(a[e],b,c);return d},createMaterial:function(){var a={NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5},b=new J,c=new Hd,d=new Qd;return function(e,f,g){function h(a,b,d,e,h){a=f+a;var l=jd.Handlers.get(a);null!==l?a=l.load(a):(c.setCrossOrigin(g),a=c.load(a));void 0!==b&&(a.repeat.fromArray(b),1!==b[0]&&(a.wrapS=1E3),1!==b[1]&&(a.wrapT=1E3));void 0!==d&&a.offset.fromArray(d);void 0!==e&&(\"repeat\"===\ne[0]&&(a.wrapS=1E3),\"mirror\"===e[0]&&(a.wrapS=1002),\"repeat\"===e[1]&&(a.wrapT=1E3),\"mirror\"===e[1]&&(a.wrapT=1002));void 0!==h&&(a.anisotropy=h);b=R.generateUUID();k[b]=a;return b}var k={},l={uuid:R.generateUUID(),type:\"MeshLambertMaterial\"},q;for(q in e){var p=e[q];switch(q){case \"DbgColor\":case \"DbgIndex\":case \"opticalDensity\":case \"illumination\":break;case \"DbgName\":l.name=p;break;case \"blending\":l.blending=a[p];break;case \"colorAmbient\":case \"mapAmbient\":console.warn(\"THREE.Loader.createMaterial:\",\nq,\"is no longer supported.\");break;case \"colorDiffuse\":l.color=b.fromArray(p).getHex();break;case \"colorSpecular\":l.specular=b.fromArray(p).getHex();break;case \"colorEmissive\":l.emissive=b.fromArray(p).getHex();break;case \"specularCoef\":l.shininess=p;break;case \"shading\":\"basic\"===p.toLowerCase()&&(l.type=\"MeshBasicMaterial\");\"phong\"===p.toLowerCase()&&(l.type=\"MeshPhongMaterial\");\"standard\"===p.toLowerCase()&&(l.type=\"MeshStandardMaterial\");break;case \"mapDiffuse\":l.map=h(p,e.mapDiffuseRepeat,e.mapDiffuseOffset,\ne.mapDiffuseWrap,e.mapDiffuseAnisotropy);break;case \"mapDiffuseRepeat\":case \"mapDiffuseOffset\":case \"mapDiffuseWrap\":case \"mapDiffuseAnisotropy\":break;case \"mapEmissive\":l.emissiveMap=h(p,e.mapEmissiveRepeat,e.mapEmissiveOffset,e.mapEmissiveWrap,e.mapEmissiveAnisotropy);break;case \"mapEmissiveRepeat\":case \"mapEmissiveOffset\":case \"mapEmissiveWrap\":case \"mapEmissiveAnisotropy\":break;case \"mapLight\":l.lightMap=h(p,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy);break;case \"mapLightRepeat\":case \"mapLightOffset\":case \"mapLightWrap\":case \"mapLightAnisotropy\":break;\ncase \"mapAO\":l.aoMap=h(p,e.mapAORepeat,e.mapAOOffset,e.mapAOWrap,e.mapAOAnisotropy);break;case \"mapAORepeat\":case \"mapAOOffset\":case \"mapAOWrap\":case \"mapAOAnisotropy\":break;case \"mapBump\":l.bumpMap=h(p,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy);break;case \"mapBumpScale\":l.bumpScale=p;break;case \"mapBumpRepeat\":case \"mapBumpOffset\":case \"mapBumpWrap\":case \"mapBumpAnisotropy\":break;case \"mapNormal\":l.normalMap=h(p,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy);\nbreak;case \"mapNormalFactor\":l.normalScale=p;break;case \"mapNormalRepeat\":case \"mapNormalOffset\":case \"mapNormalWrap\":case \"mapNormalAnisotropy\":break;case \"mapSpecular\":l.specularMap=h(p,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy);break;case \"mapSpecularRepeat\":case \"mapSpecularOffset\":case \"mapSpecularWrap\":case \"mapSpecularAnisotropy\":break;case \"mapMetalness\":l.metalnessMap=h(p,e.mapMetalnessRepeat,e.mapMetalnessOffset,e.mapMetalnessWrap,e.mapMetalnessAnisotropy);\nbreak;case \"mapMetalnessRepeat\":case \"mapMetalnessOffset\":case \"mapMetalnessWrap\":case \"mapMetalnessAnisotropy\":break;case \"mapRoughness\":l.roughnessMap=h(p,e.mapRoughnessRepeat,e.mapRoughnessOffset,e.mapRoughnessWrap,e.mapRoughnessAnisotropy);break;case \"mapRoughnessRepeat\":case \"mapRoughnessOffset\":case \"mapRoughnessWrap\":case \"mapRoughnessAnisotropy\":break;case \"mapAlpha\":l.alphaMap=h(p,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy);break;case \"mapAlphaRepeat\":case \"mapAlphaOffset\":case \"mapAlphaWrap\":case \"mapAlphaAnisotropy\":break;\ncase \"flipSided\":l.side=1;break;case \"doubleSided\":l.side=2;break;case \"transparency\":console.warn(\"THREE.Loader.createMaterial: transparency has been renamed to opacity\");l.opacity=p;break;case \"depthTest\":case \"depthWrite\":case \"colorWrite\":case \"opacity\":case \"reflectivity\":case \"transparent\":case \"visible\":case \"wireframe\":l[q]=p;break;case \"vertexColors\":!0===p&&(l.vertexColors=2);\"face\"===p&&(l.vertexColors=1);break;default:console.error(\"THREE.Loader.createMaterial: Unsupported\",q,p)}}\"MeshBasicMaterial\"===\nl.type&&delete l.emissive;\"MeshPhongMaterial\"!==l.type&&delete l.specular;1>l.opacity&&(l.transparent=!0);d.setTextures(k);return d.parse(l)}}()});var Vd,se={getContext:function(){void 0===Vd&&(Vd=new (window.AudioContext||window.webkitAudioContext));return Vd},setContext:function(a){Vd=a}};Object.assign(pe.prototype,{load:function(a,b,c,d){var e=new Ia(this.manager);e.setResponseType(\"arraybuffer\");e.setPath(this.path);e.load(a,function(a){a=a.slice(0);se.getContext().decodeAudioData(a,function(a){b(a)})},\nc,d)},setPath:function(a){this.path=a;return this}});Object.assign(xf.prototype,{update:function(){var a,b,c,d,e,f,g,h,k=new O,l=new O;return function(m){if(a!==this||b!==m.focus||c!==m.fov||d!==m.aspect*this.aspect||e!==m.near||f!==m.far||g!==m.zoom||h!==this.eyeSep){a=this;b=m.focus;c=m.fov;d=m.aspect*this.aspect;e=m.near;f=m.far;g=m.zoom;var p=m.projectionMatrix.clone();h=this.eyeSep/2;var n=h*e/b,q=e*Math.tan(R.DEG2RAD*c*.5)/g;l.elements[12]=-h;k.elements[12]=h;var t=-q*d+n;var v=q*d+n;p.elements[0]=\n2*e/(v-t);p.elements[8]=(v+t)/(v-t);this.cameraL.projectionMatrix.copy(p);t=-q*d-n;v=q*d-n;p.elements[0]=2*e/(v-t);p.elements[8]=(v+t)/(v-t);this.cameraR.projectionMatrix.copy(p)}this.cameraL.matrixWorld.copy(m.matrixWorld).multiply(l);this.cameraR.matrixWorld.copy(m.matrixWorld).multiply(k)}}()});kd.prototype=Object.create(C.prototype);kd.prototype.constructor=kd;Object.assign(qe.prototype,{start:function(){this.oldTime=this.startTime=(\"undefined\"===typeof performance?Date:performance).now();this.elapsedTime=\n0;this.running=!0},stop:function(){this.getElapsedTime();this.autoStart=this.running=!1},getElapsedTime:function(){this.getDelta();return this.elapsedTime},getDelta:function(){var a=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var b=(\"undefined\"===typeof performance?Date:performance).now();a=(b-this.oldTime)/1E3;this.oldTime=b;this.elapsedTime+=a}return a}});re.prototype=Object.assign(Object.create(C.prototype),{constructor:re,getInput:function(){return this.gain},removeFilter:function(){null!==\nthis.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null);return this},getFilter:function(){return this.filter},setFilter:function(a){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination);this.filter=a;this.gain.connect(this.filter);this.filter.connect(this.context.destination);return this},getMasterVolume:function(){return this.gain.gain.value},\nsetMasterVolume:function(a){this.gain.gain.setTargetAtTime(a,this.context.currentTime,.01);return this},updateMatrixWorld:function(){var a=new n,b=new ka,c=new n,d=new n,e=new qe;return function(f){C.prototype.updateMatrixWorld.call(this,f);f=this.context.listener;var g=this.up;this.timeDelta=e.getDelta();this.matrixWorld.decompose(a,b,c);d.set(0,0,-1).applyQuaternion(b);if(f.positionX){var h=this.context.currentTime+this.timeDelta;f.positionX.linearRampToValueAtTime(a.x,h);f.positionY.linearRampToValueAtTime(a.y,\nh);f.positionZ.linearRampToValueAtTime(a.z,h);f.forwardX.linearRampToValueAtTime(d.x,h);f.forwardY.linearRampToValueAtTime(d.y,h);f.forwardZ.linearRampToValueAtTime(d.z,h);f.upX.linearRampToValueAtTime(g.x,h);f.upY.linearRampToValueAtTime(g.y,h);f.upZ.linearRampToValueAtTime(g.z,h)}else f.setPosition(a.x,a.y,a.z),f.setOrientation(d.x,d.y,d.z,g.x,g.y,g.z)}}()});lc.prototype=Object.assign(Object.create(C.prototype),{constructor:lc,getOutput:function(){return this.gain},setNodeSource:function(a){this.hasPlaybackControl=\n!1;this.sourceType=\"audioNode\";this.source=a;this.connect();return this},setMediaElementSource:function(a){this.hasPlaybackControl=!1;this.sourceType=\"mediaNode\";this.source=this.context.createMediaElementSource(a);this.connect();return this},setBuffer:function(a){this.buffer=a;this.sourceType=\"buffer\";this.autoplay&&this.play();return this},play:function(){if(!0===this.isPlaying)console.warn(\"THREE.Audio: Audio is already playing.\");else if(!1===this.hasPlaybackControl)console.warn(\"THREE.Audio: this Audio has no playback control.\");\nelse{var a=this.context.createBufferSource();a.buffer=this.buffer;a.detune.value=this.detune;a.loop=this.loop;a.onended=this.onEnded.bind(this);a.playbackRate.setValueAtTime(this.playbackRate,this.startTime);this.startTime=this.context.currentTime;a.start(this.startTime,this.offset);this.isPlaying=!0;this.source=a;return this.connect()}},pause:function(){if(!1===this.hasPlaybackControl)console.warn(\"THREE.Audio: this Audio has no playback control.\");else return!0===this.isPlaying&&(this.source.stop(),\nthis.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this},stop:function(){if(!1===this.hasPlaybackControl)console.warn(\"THREE.Audio: this Audio has no playback control.\");else return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var a=1,b=this.filters.length;a<b;a++)this.filters[a-1].connect(this.filters[a]);this.filters[this.filters.length-\n1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var a=1,b=this.filters.length;a<b;a++)this.filters[a-1].disconnect(this.filters[a]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(a){a||(a=[]);!0===this.isPlaying?(this.disconnect(),this.filters=\na,this.connect()):this.filters=a;return this},setDetune:function(a){this.detune=a;!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01);return this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(a){return this.setFilters(a?[a]:[])},setPlaybackRate:function(a){if(!1===this.hasPlaybackControl)console.warn(\"THREE.Audio: this Audio has no playback control.\");else return this.playbackRate=a,!0===\nthis.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn(\"THREE.Audio: this Audio has no playback control.\"),!1):this.loop},setLoop:function(a){if(!1===this.hasPlaybackControl)console.warn(\"THREE.Audio: this Audio has no playback control.\");else return this.loop=a,!0===this.isPlaying&&(this.source.loop=\nthis.loop),this},getVolume:function(){return this.gain.gain.value},setVolume:function(a){this.gain.gain.setTargetAtTime(a,this.context.currentTime,.01);return this}});te.prototype=Object.assign(Object.create(lc.prototype),{constructor:te,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(a){this.panner.refDistance=a;return this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(a){this.panner.rolloffFactor=\na;return this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(a){this.panner.distanceModel=a;return this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(a){this.panner.maxDistance=a;return this},setDirectionalCone:function(a,b,c){this.panner.coneInnerAngle=a;this.panner.coneOuterAngle=b;this.panner.coneOuterGain=c;return this},updateMatrixWorld:function(){var a=new n,b=new ka,c=new n,d=new n;return function(e){C.prototype.updateMatrixWorld.call(this,\ne);e=this.panner;this.matrixWorld.decompose(a,b,c);d.set(0,0,1).applyQuaternion(b);if(e.positionX){var f=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(a.x,f);e.positionY.linearRampToValueAtTime(a.y,f);e.positionZ.linearRampToValueAtTime(a.z,f);e.orientationX.linearRampToValueAtTime(d.x,f);e.orientationY.linearRampToValueAtTime(d.y,f);e.orientationZ.linearRampToValueAtTime(d.z,f)}else e.setPosition(a.x,a.y,a.z),e.setOrientation(d.x,d.y,d.z)}}()});Object.assign(ue.prototype,\n{getFrequencyData:function(){this.analyser.getByteFrequencyData(this.data);return this.data},getAverageFrequency:function(){for(var a=0,b=this.getFrequencyData(),c=0;c<b.length;c++)a+=b[c];return a/b.length}});Object.assign(ve.prototype,{accumulate:function(a,b){var c=this.buffer,d=this.valueSize;a=a*d+d;var e=this.cumulativeWeight;if(0===e){for(e=0;e!==d;++e)c[a+e]=c[e];e=b}else e+=b,this._mixBufferRegion(c,a,0,b/e,d);this.cumulativeWeight=e},apply:function(a){var b=this.valueSize,c=this.buffer;\na=a*b+b;var d=this.cumulativeWeight,e=this.binding;this.cumulativeWeight=0;1>d&&this._mixBufferRegion(c,a,3*b,1-d,b);d=b;for(var f=b+b;d!==f;++d)if(c[d]!==c[d+b]){e.setValue(c,a);break}},saveOriginalState:function(){var a=this.buffer,b=this.valueSize,c=3*b;this.binding.getValue(a,c);for(var d=b;d!==c;++d)a[d]=a[c+d%b];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(a,b,c,d,e){if(.5<=d)for(d=0;d!==e;++d)a[b+d]=a[c+d]},_slerp:function(a,\nb,c,d){ka.slerpFlat(a,b,a,b,a,c,d)},_lerp:function(a,b,c,d,e){for(var f=1-d,g=0;g!==e;++g){var h=b+g;a[h]=a[h]*f+a[c+g]*d}}});Object.assign(yf.prototype,{getValue:function(a,b){this.bind();var c=this._bindings[this._targetGroup.nCachedObjects_];void 0!==c&&c.getValue(a,b)},setValue:function(a,b){for(var c=this._bindings,d=this._targetGroup.nCachedObjects_,e=c.length;d!==e;++d)c[d].setValue(a,b)},bind:function(){for(var a=this._bindings,b=this._targetGroup.nCachedObjects_,c=a.length;b!==c;++b)a[b].bind()},\nunbind:function(){for(var a=this._bindings,b=this._targetGroup.nCachedObjects_,c=a.length;b!==c;++b)a[b].unbind()}});Object.assign(oa,{Composite:yf,create:function(a,b,c){return a&&a.isAnimationObjectGroup?new oa.Composite(a,b,c):new oa(a,b,c)},sanitizeNodeName:function(){var a=/[\\[\\]\\.:\\/]/g;return function(b){return b.replace(/\\s/g,\"_\").replace(a,\"\")}}(),parseTrackName:function(){var a=\"[^\"+\"\\\\[\\\\]\\\\.:\\\\/\".replace(\"\\\\.\",\"\")+\"]\",b=/((?:WC+[\\/:])*)/.source.replace(\"WC\",\"[^\\\\[\\\\]\\\\.:\\\\/]\");a=/(WCOD+)?/.source.replace(\"WCOD\",\na);var c=/(?:\\.(WC+)(?:\\[(.+)\\])?)?/.source.replace(\"WC\",\"[^\\\\[\\\\]\\\\.:\\\\/]\"),d=/\\.(WC+)(?:\\[(.+)\\])?/.source.replace(\"WC\",\"[^\\\\[\\\\]\\\\.:\\\\/]\"),e=new RegExp(\"^\"+b+a+c+d+\"$\"),f=[\"material\",\"materials\",\"bones\"];return function(a){var b=e.exec(a);if(!b)throw Error(\"PropertyBinding: Cannot parse trackName: \"+a);b={nodeName:b[2],objectName:b[3],objectIndex:b[4],propertyName:b[5],propertyIndex:b[6]};var c=b.nodeName&&b.nodeName.lastIndexOf(\".\");if(void 0!==c&&-1!==c){var d=b.nodeName.substring(c+1);-1!==\nf.indexOf(d)&&(b.nodeName=b.nodeName.substring(0,c),b.objectName=d)}if(null===b.propertyName||0===b.propertyName.length)throw Error(\"PropertyBinding: can not parse propertyName from trackName: \"+a);return b}}(),findNode:function(a,b){if(!b||\"\"===b||\"root\"===b||\".\"===b||-1===b||b===a.name||b===a.uuid)return a;if(a.skeleton){var c=a.skeleton.getBoneByName(b);if(void 0!==c)return c}if(a.children){var d=function(a){for(var c=0;c<a.length;c++){var e=a[c];if(e.name===b||e.uuid===b||(e=d(e.children)))return e}return null};\nif(a=d(a.children))return a}return null}});Object.assign(oa.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(a,b){a[b]=this.node[this.propertyName]},function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)a[b++]=c[d]},function(a,b){a[b]=this.resolvedProperty[this.propertyIndex]},function(a,b){this.resolvedProperty.toArray(a,\nb)}],SetterByBindingTypeAndVersioning:[[function(a,b){this.targetObject[this.propertyName]=a[b]},function(a,b){this.targetObject[this.propertyName]=a[b];this.targetObject.needsUpdate=!0},function(a,b){this.targetObject[this.propertyName]=a[b];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)c[d]=a[b++]},function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)c[d]=a[b++];this.targetObject.needsUpdate=!0},function(a,\nb){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)c[d]=a[b++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){this.resolvedProperty[this.propertyIndex]=a[b]},function(a,b){this.resolvedProperty[this.propertyIndex]=a[b];this.targetObject.needsUpdate=!0},function(a,b){this.resolvedProperty[this.propertyIndex]=a[b];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){this.resolvedProperty.fromArray(a,b)},function(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.needsUpdate=\n!0},function(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(a,b){this.bind();this.getValue(a,b)},setValue:function(a,b){this.bind();this.setValue(a,b)},bind:function(){var a=this.node,b=this.parsedPath,c=b.objectName,d=b.propertyName,e=b.propertyIndex;a||(this.node=a=oa.findNode(this.rootNode,b.nodeName)||this.rootNode);this.getValue=this._getValue_unavailable;this.setValue=this._setValue_unavailable;if(a){if(c){var f=b.objectIndex;switch(c){case \"materials\":if(!a.material){console.error(\"THREE.PropertyBinding: Can not bind to material as node does not have a material.\",\nthis);return}if(!a.material.materials){console.error(\"THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.\",this);return}a=a.material.materials;break;case \"bones\":if(!a.skeleton){console.error(\"THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.\",this);return}a=a.skeleton.bones;for(c=0;c<a.length;c++)if(a[c].name===f){f=c;break}break;default:if(void 0===a[c]){console.error(\"THREE.PropertyBinding: Can not bind to objectName of node undefined.\",\nthis);return}a=a[c]}if(void 0!==f){if(void 0===a[f]){console.error(\"THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.\",this,a);return}a=a[f]}}f=a[d];if(void 0===f)console.error(\"THREE.PropertyBinding: Trying to update property for track: \"+b.nodeName+\".\"+d+\" but it wasn't found.\",a);else{b=this.Versioning.None;this.targetObject=a;void 0!==a.needsUpdate?b=this.Versioning.NeedsUpdate:void 0!==a.matrixWorldNeedsUpdate&&(b=this.Versioning.MatrixWorldNeedsUpdate);c=\nthis.BindingType.Direct;if(void 0!==e){if(\"morphTargetInfluences\"===d){if(!a.geometry){console.error(\"THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.\",this);return}if(a.geometry.isBufferGeometry){if(!a.geometry.morphAttributes){console.error(\"THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.\",this);return}for(c=0;c<this.node.geometry.morphAttributes.position.length;c++)if(a.geometry.morphAttributes.position[c].name===\ne){e=c;break}}else{if(!a.geometry.morphTargets){console.error(\"THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.\",this);return}for(c=0;c<this.node.geometry.morphTargets.length;c++)if(a.geometry.morphTargets[c].name===e){e=c;break}}}c=this.BindingType.ArrayElement;this.resolvedProperty=f;this.propertyIndex=e}else void 0!==f.fromArray&&void 0!==f.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=f):Array.isArray(f)?(c=this.BindingType.EntireArray,\nthis.resolvedProperty=f):this.propertyName=d;this.getValue=this.GetterByBindingType[c];this.setValue=this.SetterByBindingTypeAndVersioning[c][b]}}else console.error(\"THREE.PropertyBinding: Trying to update node for track: \"+this.path+\" but it wasn't found.\")},unbind:function(){this.node=null;this.getValue=this._getValue_unbound;this.setValue=this._setValue_unbound}});Object.assign(oa.prototype,{_getValue_unbound:oa.prototype.getValue,_setValue_unbound:oa.prototype.setValue});Object.assign(zf.prototype,\n{isAnimationObjectGroup:!0,add:function(){for(var a=this._objects,b=a.length,c=this.nCachedObjects_,d=this._indicesByUUID,e=this._paths,f=this._parsedPaths,g=this._bindings,h=g.length,k=void 0,l=0,n=arguments.length;l!==n;++l){var p=arguments[l],r=p.uuid,x=d[r];if(void 0===x){x=b++;d[r]=x;a.push(p);r=0;for(var t=h;r!==t;++r)g[r].push(new oa(p,e[r],f[r]))}else if(x<c){k=a[x];var v=--c;t=a[v];d[t.uuid]=x;a[x]=t;d[r]=v;a[v]=p;r=0;for(t=h;r!==t;++r){var w=g[r],y=w[x];w[x]=w[v];void 0===y&&(y=new oa(p,\ne[r],f[r]));w[v]=y}}else a[x]!==k&&console.error(\"THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.\")}this.nCachedObjects_=c},remove:function(){for(var a=this._objects,b=this.nCachedObjects_,c=this._indicesByUUID,d=this._bindings,e=d.length,f=0,g=arguments.length;f!==g;++f){var h=arguments[f],k=h.uuid,l=c[k];if(void 0!==l&&l>=b){var n=b++,p=a[n];c[p.uuid]=l;a[l]=p;c[k]=n;a[n]=h;h=0;for(k=e;h!==k;++h){p=\nd[h];var r=p[l];p[l]=p[n];p[n]=r}}}this.nCachedObjects_=b},uncache:function(){for(var a=this._objects,b=a.length,c=this.nCachedObjects_,d=this._indicesByUUID,e=this._bindings,f=e.length,g=0,h=arguments.length;g!==h;++g){var k=arguments[g].uuid,l=d[k];if(void 0!==l)if(delete d[k],l<c){k=--c;var n=a[k],p=--b,r=a[p];d[n.uuid]=l;a[l]=n;d[r.uuid]=k;a[k]=r;a.pop();n=0;for(r=f;n!==r;++n){var x=e[n],t=x[p];x[l]=x[k];x[k]=t;x.pop()}}else for(p=--b,r=a[p],d[r.uuid]=l,a[l]=r,a.pop(),n=0,r=f;n!==r;++n)x=e[n],\nx[l]=x[p],x.pop()}this.nCachedObjects_=c},subscribe_:function(a,b){var c=this._bindingsIndicesByPath,d=c[a],e=this._bindings;if(void 0!==d)return e[d];var f=this._paths,g=this._parsedPaths,h=this._objects,k=this.nCachedObjects_,l=Array(h.length);d=e.length;c[a]=d;f.push(a);g.push(b);e.push(l);c=k;for(d=h.length;c!==d;++c)l[c]=new oa(h[c],a,b);return l},unsubscribe_:function(a){var b=this._bindingsIndicesByPath,c=b[a];if(void 0!==c){var d=this._paths,e=this._parsedPaths,f=this._bindings,g=f.length-\n1,h=f[g];b[a[g]]=c;f[c]=h;f.pop();e[c]=e[g];e.pop();d[c]=d[g];d.pop()}}});Object.assign(Af.prototype,{play:function(){this._mixer._activateAction(this);return this},stop:function(){this._mixer._deactivateAction(this);return this.reset()},reset:function(){this.paused=!1;this.enabled=!0;this.time=0;this._loopCount=-1;this._startTime=null;return this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},\nisScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(a){this._startTime=a;return this},setLoop:function(a,b){this.loop=a;this.repetitions=b;return this},setEffectiveWeight:function(a){this.weight=a;this._effectiveWeight=this.enabled?a:0;return this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(a){return this._scheduleFading(a,0,1)},fadeOut:function(a){return this._scheduleFading(a,1,0)},crossFadeFrom:function(a,b,c){a.fadeOut(b);\nthis.fadeIn(b);if(c){c=this._clip.duration;var d=a._clip.duration,e=c/d;a.warp(1,d/c,b);this.warp(e,1,b)}return this},crossFadeTo:function(a,b,c){return a.crossFadeFrom(this,b,c)},stopFading:function(){var a=this._weightInterpolant;null!==a&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(a));return this},setEffectiveTimeScale:function(a){this.timeScale=a;this._effectiveTimeScale=this.paused?0:a;return this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},\nsetDuration:function(a){this.timeScale=this._clip.duration/a;return this.stopWarping()},syncWith:function(a){this.time=a.time;this.timeScale=a.timeScale;return this.stopWarping()},halt:function(a){return this.warp(this._effectiveTimeScale,0,a)},warp:function(a,b,c){var d=this._mixer,e=d.time,f=this._timeScaleInterpolant,g=this.timeScale;null===f&&(this._timeScaleInterpolant=f=d._lendControlInterpolant());d=f.parameterPositions;f=f.sampleValues;d[0]=e;d[1]=e+c;f[0]=a/g;f[1]=b/g;return this},stopWarping:function(){var a=\nthis._timeScaleInterpolant;null!==a&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(a));return this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(a,b,c,d){if(this.enabled){var e=this._startTime;if(null!==e){b=(a-e)*c;if(0>b||0===c)return;this._startTime=null;b*=c}b*=this._updateTimeScale(a);c=this._updateTime(b);a=this._updateWeight(a);if(0<a){b=this._interpolants;\ne=this._propertyBindings;for(var f=0,g=b.length;f!==g;++f)b[f].evaluate(c),e[f].accumulate(d,a)}}else this._updateWeight(a)},_updateWeight:function(a){var b=0;if(this.enabled){b=this.weight;var c=this._weightInterpolant;if(null!==c){var d=c.evaluate(a)[0];b*=d;a>c.parameterPositions[1]&&(this.stopFading(),0===d&&(this.enabled=!1))}}return this._effectiveWeight=b},_updateTimeScale:function(a){var b=0;if(!this.paused){b=this.timeScale;var c=this._timeScaleInterpolant;if(null!==c){var d=c.evaluate(a)[0];\nb*=d;a>c.parameterPositions[1]&&(this.stopWarping(),0===b?this.paused=!0:this.timeScale=b)}}return this._effectiveTimeScale=b},_updateTime:function(a){var b=this.time+a,c=this._clip.duration,d=this.loop,e=this._loopCount,f=2202===d;if(0===a)return-1===e?b:f&&1===(e&1)?c-b:b;if(2200===d)a:{if(-1===e&&(this._loopCount=0,this._setEndings(!0,!0,!1)),b>=c)b=c;else if(0>b)b=0;else break a;this.clampWhenFinished?this.paused=!0:this.enabled=!1;this._mixer.dispatchEvent({type:\"finished\",action:this,direction:0>\na?-1:1})}else{-1===e&&(0<=a?(e=0,this._setEndings(!0,0===this.repetitions,f)):this._setEndings(0===this.repetitions,!0,f));if(b>=c||0>b){d=Math.floor(b/c);b-=c*d;e+=Math.abs(d);var g=this.repetitions-e;0>=g?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,b=0<a?c:0,this._mixer.dispatchEvent({type:\"finished\",action:this,direction:0<a?1:-1})):(1===g?(a=0>a,this._setEndings(a,!a,f)):this._setEndings(!1,!1,f),this._loopCount=e,this._mixer.dispatchEvent({type:\"loop\",action:this,loopDelta:d}))}if(f&&\n1===(e&1))return this.time=b,c-b}return this.time=b},_setEndings:function(a,b,c){var d=this._interpolantSettings;c?(d.endingStart=2401,d.endingEnd=2401):(d.endingStart=a?this.zeroSlopeAtStart?2401:2400:2402,d.endingEnd=b?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(a,b,c){var d=this._mixer,e=d.time,f=this._weightInterpolant;null===f&&(this._weightInterpolant=f=d._lendControlInterpolant());d=f.parameterPositions;f=f.sampleValues;d[0]=e;f[0]=b;d[1]=e+a;f[1]=c;return this}});we.prototype=\nObject.assign(Object.create(ja.prototype),{constructor:we,_bindAction:function(a,b){var c=a._localRoot||this._root,d=a._clip.tracks,e=d.length,f=a._propertyBindings;a=a._interpolants;var g=c.uuid,h=this._bindingsByRootAndName,k=h[g];void 0===k&&(k={},h[g]=k);for(h=0;h!==e;++h){var l=d[h],n=l.name,p=k[n];if(void 0===p){p=f[h];if(void 0!==p){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,g,n));continue}p=new ve(oa.create(c,n,b&&b._propertyBindings[h].binding.parsedPath),l.ValueTypeName,\nl.getValueSize());++p.referenceCount;this._addInactiveBinding(p,g,n)}f[h]=p;a[h].resultBuffer=p.buffer}},_activateAction:function(a){if(!this._isActiveAction(a)){if(null===a._cacheIndex){var b=(a._localRoot||this._root).uuid,c=a._clip.uuid,d=this._actionsByClip[c];this._bindAction(a,d&&d.knownActions[0]);this._addInactiveAction(a,c,b)}b=a._propertyBindings;c=0;for(d=b.length;c!==d;++c){var e=b[c];0===e.useCount++&&(this._lendBinding(e),e.saveOriginalState())}this._lendAction(a)}},_deactivateAction:function(a){if(this._isActiveAction(a)){for(var b=\na._propertyBindings,c=0,d=b.length;c!==d;++c){var e=b[c];0===--e.useCount&&(e.restoreOriginalState(),this._takeBackBinding(e))}this._takeBackAction(a)}},_initMemoryManager:function(){this._actions=[];this._nActiveActions=0;this._actionsByClip={};this._bindings=[];this._nActiveBindings=0;this._bindingsByRootAndName={};this._controlInterpolants=[];this._nActiveControlInterpolants=0;var a=this;this.stats={actions:{get total(){return a._actions.length},get inUse(){return a._nActiveActions}},bindings:{get total(){return a._bindings.length},\nget inUse(){return a._nActiveBindings}},controlInterpolants:{get total(){return a._controlInterpolants.length},get inUse(){return a._nActiveControlInterpolants}}}},_isActiveAction:function(a){a=a._cacheIndex;return null!==a&&a<this._nActiveActions},_addInactiveAction:function(a,b,c){var d=this._actions,e=this._actionsByClip,f=e[b];void 0===f?(f={knownActions:[a],actionByRoot:{}},a._byClipCacheIndex=0,e[b]=f):(b=f.knownActions,a._byClipCacheIndex=b.length,b.push(a));a._cacheIndex=d.length;d.push(a);\nf.actionByRoot[c]=a},_removeInactiveAction:function(a){var b=this._actions,c=b[b.length-1],d=a._cacheIndex;c._cacheIndex=d;b[d]=c;b.pop();a._cacheIndex=null;b=a._clip.uuid;c=this._actionsByClip;d=c[b];var e=d.knownActions,f=e[e.length-1],g=a._byClipCacheIndex;f._byClipCacheIndex=g;e[g]=f;e.pop();a._byClipCacheIndex=null;delete d.actionByRoot[(a._localRoot||this._root).uuid];0===e.length&&delete c[b];this._removeInactiveBindingsForAction(a)},_removeInactiveBindingsForAction:function(a){a=a._propertyBindings;\nfor(var b=0,c=a.length;b!==c;++b){var d=a[b];0===--d.referenceCount&&this._removeInactiveBinding(d)}},_lendAction:function(a){var b=this._actions,c=a._cacheIndex,d=this._nActiveActions++,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_takeBackAction:function(a){var b=this._actions,c=a._cacheIndex,d=--this._nActiveActions,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_addInactiveBinding:function(a,b,c){var d=this._bindingsByRootAndName,e=d[b],f=this._bindings;void 0===e&&(e={},d[b]=\ne);e[c]=a;a._cacheIndex=f.length;f.push(a)},_removeInactiveBinding:function(a){var b=this._bindings,c=a.binding,d=c.rootNode.uuid;c=c.path;var e=this._bindingsByRootAndName,f=e[d],g=b[b.length-1];a=a._cacheIndex;g._cacheIndex=a;b[a]=g;b.pop();delete f[c];a:{for(var h in f)break a;delete e[d]}},_lendBinding:function(a){var b=this._bindings,c=a._cacheIndex,d=this._nActiveBindings++,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_takeBackBinding:function(a){var b=this._bindings,c=a._cacheIndex,\nd=--this._nActiveBindings,e=b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_lendControlInterpolant:function(){var a=this._controlInterpolants,b=this._nActiveControlInterpolants++,c=a[b];void 0===c&&(c=new dd(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),c.__cacheIndex=b,a[b]=c);return c},_takeBackControlInterpolant:function(a){var b=this._controlInterpolants,c=a.__cacheIndex,d=--this._nActiveControlInterpolants,e=b[d];a.__cacheIndex=d;b[d]=a;e.__cacheIndex=\nc;b[c]=e},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(a,b){var c=b||this._root,d=c.uuid;c=\"string\"===typeof a?Ha.findByName(c,a):a;a=null!==c?c.uuid:a;var e=this._actionsByClip[a],f=null;if(void 0!==e){f=e.actionByRoot[d];if(void 0!==f)return f;f=e.knownActions[0];null===c&&(c=f._clip)}if(null===c)return null;b=new Af(this,c,b);this._bindAction(b,f);this._addInactiveAction(b,a,d);return b},existingAction:function(a,b){var c=b||this._root;b=c.uuid;c=\"string\"===typeof a?\nHa.findByName(c,a):a;a=this._actionsByClip[c?c.uuid:a];return void 0!==a?a.actionByRoot[b]||null:null},stopAllAction:function(){for(var a=this._actions,b=this._nActiveActions,c=this._bindings,d=this._nActiveBindings,e=this._nActiveBindings=this._nActiveActions=0;e!==b;++e)a[e].reset();for(e=0;e!==d;++e)c[e].useCount=0;return this},update:function(a){a*=this.timeScale;for(var b=this._actions,c=this._nActiveActions,d=this.time+=a,e=Math.sign(a),f=this._accuIndex^=1,g=0;g!==c;++g)b[g]._update(d,a,e,\nf);a=this._bindings;b=this._nActiveBindings;for(g=0;g!==b;++g)a[g].apply(f);return this},getRoot:function(){return this._root},uncacheClip:function(a){var b=this._actions;a=a.uuid;var c=this._actionsByClip,d=c[a];if(void 0!==d){d=d.knownActions;for(var e=0,f=d.length;e!==f;++e){var g=d[e];this._deactivateAction(g);var h=g._cacheIndex,k=b[b.length-1];g._cacheIndex=null;g._byClipCacheIndex=null;k._cacheIndex=h;b[h]=k;b.pop();this._removeInactiveBindingsForAction(g)}delete c[a]}},uncacheRoot:function(a){a=\na.uuid;var b=this._actionsByClip;for(d in b){var c=b[d].actionByRoot[a];void 0!==c&&(this._deactivateAction(c),this._removeInactiveAction(c))}var d=this._bindingsByRootAndName[a];if(void 0!==d)for(var e in d)a=d[e],a.restoreOriginalState(),this._removeInactiveBinding(a)},uncacheAction:function(a,b){a=this.existingAction(a,b);null!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}});Rd.prototype.clone=function(){return new Rd(void 0===this.value.clone?this.value:this.value.clone())};xe.prototype=\nObject.assign(Object.create(D.prototype),{constructor:xe,isInstancedBufferGeometry:!0,copy:function(a){D.prototype.copy.call(this,a);this.maxInstancedCount=a.maxInstancedCount;return this},clone:function(){return(new this.constructor).copy(this)}});ye.prototype=Object.assign(Object.create(rb.prototype),{constructor:ye,isInstancedInterleavedBuffer:!0,copy:function(a){rb.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;return this}});ze.prototype=Object.assign(Object.create(E.prototype),\n{constructor:ze,isInstancedBufferAttribute:!0,copy:function(a){E.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;return this}});Object.assign(Bf.prototype,{linePrecision:1,set:function(a,b){this.ray.set(a,b)},setFromCamera:function(a,b){b&&b.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(b.matrixWorld),this.ray.direction.set(a.x,a.y,.5).unproject(b).sub(this.ray.origin).normalize()):b&&b.isOrthographicCamera?(this.ray.origin.set(a.x,a.y,(b.near+b.far)/(b.near-b.far)).unproject(b),\nthis.ray.direction.set(0,0,-1).transformDirection(b.matrixWorld)):console.error(\"THREE.Raycaster: Unsupported camera type.\")},intersectObject:function(a,b,c){c=c||[];Ae(a,this,c,b);c.sort(Cf);return c},intersectObjects:function(a,b,c){c=c||[];if(!1===Array.isArray(a))return console.warn(\"THREE.Raycaster.intersectObjects: objects is not an Array.\"),c;for(var d=0,e=a.length;d<e;d++)Ae(a[d],this,c,b);c.sort(Cf);return c}});Object.assign(Df.prototype,{set:function(a,b,c){this.radius=a;this.phi=b;this.theta=\nc;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.radius=a.radius;this.phi=a.phi;this.theta=a.theta;return this},makeSafe:function(){this.phi=Math.max(1E-6,Math.min(Math.PI-1E-6,this.phi));return this},setFromVector3:function(a){return this.setFromCartesianCoords(a.x,a.y,a.z)},setFromCartesianCoords:function(a,b,c){this.radius=Math.sqrt(a*a+b*b+c*c);0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(a,c),this.phi=Math.acos(R.clamp(b/this.radius,\n-1,1)));return this}});Object.assign(Ef.prototype,{set:function(a,b,c){this.radius=a;this.theta=b;this.y=c;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.radius=a.radius;this.theta=a.theta;this.y=a.y;return this},setFromVector3:function(a){return this.setFromCartesianCoords(a.x,a.y,a.z)},setFromCartesianCoords:function(a,b,c){this.radius=Math.sqrt(a*a+c*c);this.theta=Math.atan2(a,c);this.y=b;return this}});Object.assign(Be.prototype,{set:function(a,b){this.min.copy(a);\nthis.max.copy(b);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromCenterAndSize:function(){var a=new z;return function(b,c){c=a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(c);this.max.copy(b).add(c);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=this.min.y=Infinity;this.max.x=this.max.y=\n-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(a){void 0===a&&(console.warn(\"THREE.Box2: .getCenter() target is now required\"),a=new z);return this.isEmpty()?a.set(0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(a){void 0===a&&(console.warn(\"THREE.Box2: .getSize() target is now required\"),a=new z);return this.isEmpty()?a.set(0,0):a.subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);\nreturn this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y},getParameter:function(a,b){void 0===b&&(console.warn(\"THREE.Box2: .getParameter() target is now required\"),b=new z);\nreturn b.set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y?!1:!0},clampPoint:function(a,b){void 0===b&&(console.warn(\"THREE.Box2: .clampPoint() target is now required\"),b=new z);return b.copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new z;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),intersect:function(a){this.min.max(a.min);\nthis.max.min(a.max);return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}});Object.assign(Ce.prototype,{set:function(a,b){this.start.copy(a);this.end.copy(b);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.start.copy(a.start);this.end.copy(a.end);return this},getCenter:function(a){void 0===\na&&(console.warn(\"THREE.Line3: .getCenter() target is now required\"),a=new n);return a.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(a){void 0===a&&(console.warn(\"THREE.Line3: .delta() target is now required\"),a=new n);return a.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(a,b){void 0===b&&(console.warn(\"THREE.Line3: .at() target is now required\"),b=\nnew n);return this.delta(b).multiplyScalar(a).add(this.start)},closestPointToPointParameter:function(){var a=new n,b=new n;return function(c,d){a.subVectors(c,this.start);b.subVectors(this.end,this.start);c=b.dot(b);c=b.dot(a)/c;d&&(c=R.clamp(c,0,1));return c}}(),closestPointToPoint:function(a,b,c){a=this.closestPointToPointParameter(a,b);void 0===c&&(console.warn(\"THREE.Line3: .closestPointToPoint() target is now required\"),c=new n);return this.delta(c).multiplyScalar(a).add(this.start)},applyMatrix4:function(a){this.start.applyMatrix4(a);\nthis.end.applyMatrix4(a);return this},equals:function(a){return a.start.equals(this.start)&&a.end.equals(this.end)}});ld.prototype=Object.create(C.prototype);ld.prototype.constructor=ld;ld.prototype.isImmediateRenderObject=!0;md.prototype=Object.create(S.prototype);md.prototype.constructor=md;md.prototype.update=function(){var a=new n,b=new n,c=new da;return function(){var d=[\"a\",\"b\",\"c\"];this.object.updateMatrixWorld(!0);c.getNormalMatrix(this.object.matrixWorld);var e=this.object.matrixWorld,f=\nthis.geometry.attributes.position,g=this.object.geometry;if(g&&g.isGeometry)for(var h=g.vertices,k=g.faces,l=g=0,n=k.length;l<n;l++)for(var p=k[l],r=0,x=p.vertexNormals.length;r<x;r++){var t=p.vertexNormals[r];a.copy(h[p[d[r]]]).applyMatrix4(e);b.copy(t).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a);f.setXYZ(g,a.x,a.y,a.z);g+=1;f.setXYZ(g,b.x,b.y,b.z);g+=1}else if(g&&g.isBufferGeometry)for(d=g.attributes.position,h=g.attributes.normal,r=g=0,x=d.count;r<x;r++)a.set(d.getX(r),d.getY(r),\nd.getZ(r)).applyMatrix4(e),b.set(h.getX(r),h.getY(r),h.getZ(r)),b.applyMatrix3(c).normalize().multiplyScalar(this.size).add(a),f.setXYZ(g,a.x,a.y,a.z),g+=1,f.setXYZ(g,b.x,b.y,b.z),g+=1;f.needsUpdate=!0}}();mc.prototype=Object.create(C.prototype);mc.prototype.constructor=mc;mc.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};mc.prototype.update=function(){var a=new n;return function(){this.light.updateMatrixWorld();var b=this.light.distance?this.light.distance:\n1E3,c=b*Math.tan(this.light.angle);this.cone.scale.set(c,c,b);a.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(a);void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}();nc.prototype=Object.create(S.prototype);nc.prototype.constructor=nc;nc.prototype.updateMatrixWorld=function(){var a=new n,b=new O,c=new O;return function(d){var e=this.bones,f=this.geometry,g=f.getAttribute(\"position\");c.getInverse(this.root.matrixWorld);\nfor(var h=0,k=0;h<e.length;h++){var l=e[h];l.parent&&l.parent.isBone&&(b.multiplyMatrices(c,l.matrixWorld),a.setFromMatrixPosition(b),g.setXYZ(k,a.x,a.y,a.z),b.multiplyMatrices(c,l.parent.matrixWorld),a.setFromMatrixPosition(b),g.setXYZ(k+1,a.x,a.y,a.z),k+=2)}f.getAttribute(\"position\").needsUpdate=!0;C.prototype.updateMatrixWorld.call(this,d)}}();oc.prototype=Object.create(pa.prototype);oc.prototype.constructor=oc;oc.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};oc.prototype.update=\nfunction(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)};pc.prototype=Object.create(C.prototype);pc.prototype.constructor=pc;pc.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose()};pc.prototype.update=function(){var a=.5*this.light.width,b=.5*this.light.height,c=this.line.geometry.attributes.position,d=c.array;d[0]=a;d[1]=-b;d[2]=0;d[3]=a;d[4]=b;d[5]=0;d[6]=-a;d[7]=b;d[8]=0;d[9]=-a;d[10]=-b;d[11]=\n0;d[12]=a;d[13]=-b;d[14]=0;c.needsUpdate=!0;void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)};qc.prototype=Object.create(C.prototype);qc.prototype.constructor=qc;qc.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose()};qc.prototype.update=function(){var a=new n,b=new J,c=new J;return function(){var d=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var e=d.geometry.getAttribute(\"color\");\nb.copy(this.light.color);c.copy(this.light.groundColor);for(var f=0,g=e.count;f<g;f++){var h=f<g/2?b:c;e.setXYZ(f,h.r,h.g,h.b)}e.needsUpdate=!0}d.lookAt(a.setFromMatrixPosition(this.light.matrixWorld).negate())}}();nd.prototype=Object.create(S.prototype);nd.prototype.constructor=nd;Sd.prototype=Object.create(S.prototype);Sd.prototype.constructor=Sd;od.prototype=Object.create(S.prototype);od.prototype.constructor=od;od.prototype.update=function(){var a=new n,b=new n,c=new da;return function(){this.object.updateMatrixWorld(!0);\nc.getNormalMatrix(this.object.matrixWorld);var d=this.object.matrixWorld,e=this.geometry.attributes.position,f=this.object.geometry,g=f.vertices;f=f.faces;for(var h=0,k=0,l=f.length;k<l;k++){var n=f[k],p=n.normal;a.copy(g[n.a]).add(g[n.b]).add(g[n.c]).divideScalar(3).applyMatrix4(d);b.copy(p).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a);e.setXYZ(h,a.x,a.y,a.z);h+=1;e.setXYZ(h,b.x,b.y,b.z);h+=1}e.needsUpdate=!0}}();rc.prototype=Object.create(C.prototype);rc.prototype.constructor=rc;\nrc.prototype.dispose=function(){this.lightPlane.geometry.dispose();this.lightPlane.material.dispose();this.targetLine.geometry.dispose();this.targetLine.material.dispose()};rc.prototype.update=function(){var a=new n,b=new n,c=new n;return function(){a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);c.subVectors(b,a);this.lightPlane.lookAt(b);void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):\n(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color));this.targetLine.lookAt(b);this.targetLine.scale.z=c.length()}}();pd.prototype=Object.create(S.prototype);pd.prototype.constructor=pd;pd.prototype.update=function(){function a(a,g,h,k){d.set(g,h,k).unproject(e);a=c[a];if(void 0!==a)for(g=b.getAttribute(\"position\"),h=0,k=a.length;h<k;h++)g.setXYZ(a[h],d.x,d.y,d.z)}var b,c,d=new n,e=new Ra;return function(){b=this.geometry;c=this.pointMap;e.projectionMatrix.copy(this.camera.projectionMatrix);\na(\"c\",0,0,-1);a(\"t\",0,0,1);a(\"n1\",-1,-1,-1);a(\"n2\",1,-1,-1);a(\"n3\",-1,1,-1);a(\"n4\",1,1,-1);a(\"f1\",-1,-1,1);a(\"f2\",1,-1,1);a(\"f3\",-1,1,1);a(\"f4\",1,1,1);a(\"u1\",.7,1.1,-1);a(\"u2\",-.7,1.1,-1);a(\"u3\",0,2,-1);a(\"cf1\",-1,0,1);a(\"cf2\",1,0,1);a(\"cf3\",0,-1,1);a(\"cf4\",0,1,1);a(\"cn1\",-1,0,-1);a(\"cn2\",1,0,-1);a(\"cn3\",0,-1,-1);a(\"cn4\",0,1,-1);b.getAttribute(\"position\").needsUpdate=!0}}();ab.prototype=Object.create(S.prototype);ab.prototype.constructor=ab;ab.prototype.update=function(){var a=new Wa;return function(b){void 0!==\nb&&console.warn(\"THREE.BoxHelper: .update() has no longer arguments.\");void 0!==this.object&&a.setFromObject(this.object);if(!a.isEmpty()){b=a.min;var c=a.max,d=this.geometry.attributes.position,e=d.array;e[0]=c.x;e[1]=c.y;e[2]=c.z;e[3]=b.x;e[4]=c.y;e[5]=c.z;e[6]=b.x;e[7]=b.y;e[8]=c.z;e[9]=c.x;e[10]=b.y;e[11]=c.z;e[12]=c.x;e[13]=c.y;e[14]=b.z;e[15]=b.x;e[16]=c.y;e[17]=b.z;e[18]=b.x;e[19]=b.y;e[20]=b.z;e[21]=c.x;e[22]=b.y;e[23]=b.z;d.needsUpdate=!0;this.geometry.computeBoundingSphere()}}}();ab.prototype.setFromObject=\nfunction(a){this.object=a;this.update();return this};ab.prototype.copy=function(a){S.prototype.copy.call(this,a);this.object=a.object;return this};ab.prototype.clone=function(){return(new this.constructor).copy(this)};qd.prototype=Object.create(S.prototype);qd.prototype.constructor=qd;qd.prototype.updateMatrixWorld=function(a){var b=this.box;b.isEmpty()||(b.getCenter(this.position),b.getSize(this.scale),this.scale.multiplyScalar(.5),C.prototype.updateMatrixWorld.call(this,a))};rd.prototype=Object.create(ma.prototype);\nrd.prototype.constructor=rd;rd.prototype.updateMatrixWorld=function(a){var b=-this.plane.constant;1E-8>Math.abs(b)&&(b=1E-8);this.scale.set(.5*this.size,.5*this.size,b);this.children[0].material.side=0>b?1:0;this.lookAt(this.plane.normal);C.prototype.updateMatrixWorld.call(this,a)};var Td,De;bb.prototype=Object.create(C.prototype);bb.prototype.constructor=bb;bb.prototype.setDirection=function(){var a=new n,b;return function(c){.99999<c.y?this.quaternion.set(0,0,0,1):-.99999>c.y?this.quaternion.set(1,\n0,0,0):(a.set(c.z,0,-c.x).normalize(),b=Math.acos(c.y),this.quaternion.setFromAxisAngle(a,b))}}();bb.prototype.setLength=function(a,b,c){void 0===b&&(b=.2*a);void 0===c&&(c=.2*b);this.line.scale.set(1,Math.max(0,a-b),1);this.line.updateMatrix();this.cone.scale.set(c,b,c);this.cone.position.y=a;this.cone.updateMatrix()};bb.prototype.setColor=function(a){this.line.material.color.copy(a);this.cone.material.color.copy(a)};bb.prototype.copy=function(a){C.prototype.copy.call(this,a,!1);this.line.copy(a.line);\nthis.cone.copy(a.cone);return this};bb.prototype.clone=function(){return(new this.constructor).copy(this)};sd.prototype=Object.create(S.prototype);sd.prototype.constructor=sd;K.create=function(a,b){console.log(\"THREE.Curve.create() has been deprecated\");a.prototype=Object.create(K.prototype);a.prototype.constructor=a;a.prototype.getPoint=b;return a};Object.assign($a.prototype,{createPointsGeometry:function(a){console.warn(\"THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.\");\na=this.getPoints(a);return this.createGeometry(a)},createSpacedPointsGeometry:function(a){console.warn(\"THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.\");a=this.getSpacedPoints(a);return this.createGeometry(a)},createGeometry:function(a){console.warn(\"THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.\");for(var b=new Q,c=0,d=a.length;c<d;c++){var e=a[c];b.vertices.push(new n(e.x,\ne.y,e.z||0))}return b}});Object.assign(Na.prototype,{fromPoints:function(a){console.warn(\"THREE.Path: .fromPoints() has been renamed to .setFromPoints().\");this.setFromPoints(a)}});Gf.prototype=Object.create(ta.prototype);Hf.prototype=Object.create(ta.prototype);Ee.prototype=Object.create(ta.prototype);Object.assign(Ee.prototype,{initFromArray:function(){console.error(\"THREE.Spline: .initFromArray() has been removed.\")},getControlPointsArray:function(){console.error(\"THREE.Spline: .getControlPointsArray() has been removed.\")},\nreparametrizeByArcLength:function(){console.error(\"THREE.Spline: .reparametrizeByArcLength() has been removed.\")}});nd.prototype.setColors=function(){console.error(\"THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.\")};nc.prototype.update=function(){console.error(\"THREE.SkeletonHelper: update() no longer needs to be called.\")};Object.assign(jd.prototype,{extractUrlBase:function(a){console.warn(\"THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.\");\nreturn Ie.extractUrlBase(a)}});Object.assign(le.prototype,{setTexturePath:function(a){console.warn(\"THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath().\");return this.setResourcePath(a)}});Object.assign(Be.prototype,{center:function(a){console.warn(\"THREE.Box2: .center() has been renamed to .getCenter().\");return this.getCenter(a)},empty:function(){console.warn(\"THREE.Box2: .empty() has been renamed to .isEmpty().\");return this.isEmpty()},isIntersectionBox:function(a){console.warn(\"THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().\");\nreturn this.intersectsBox(a)},size:function(a){console.warn(\"THREE.Box2: .size() has been renamed to .getSize().\");return this.getSize(a)}});Object.assign(Wa.prototype,{center:function(a){console.warn(\"THREE.Box3: .center() has been renamed to .getCenter().\");return this.getCenter(a)},empty:function(){console.warn(\"THREE.Box3: .empty() has been renamed to .isEmpty().\");return this.isEmpty()},isIntersectionBox:function(a){console.warn(\"THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().\");\nreturn this.intersectsBox(a)},isIntersectionSphere:function(a){console.warn(\"THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().\");return this.intersectsSphere(a)},size:function(a){console.warn(\"THREE.Box3: .size() has been renamed to .getSize().\");return this.getSize(a)}});Ce.prototype.center=function(a){console.warn(\"THREE.Line3: .center() has been renamed to .getCenter().\");return this.getCenter(a)};Object.assign(R,{random16:function(){console.warn(\"THREE.Math: .random16() has been deprecated. Use Math.random() instead.\");\nreturn Math.random()},nearestPowerOfTwo:function(a){console.warn(\"THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo().\");return R.floorPowerOfTwo(a)},nextPowerOfTwo:function(a){console.warn(\"THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo().\");return R.ceilPowerOfTwo(a)}});Object.assign(da.prototype,{flattenToArrayOffset:function(a,b){console.warn(\"THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\");return this.toArray(a,b)},\nmultiplyVector3:function(a){console.warn(\"THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.\");return a.applyMatrix3(this)},multiplyVector3Array:function(){console.error(\"THREE.Matrix3: .multiplyVector3Array() has been removed.\")},applyToBuffer:function(a){console.warn(\"THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.\");return this.applyToBufferAttribute(a)},applyToVector3Array:function(){console.error(\"THREE.Matrix3: .applyToVector3Array() has been removed.\")}});\nObject.assign(O.prototype,{extractPosition:function(a){console.warn(\"THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().\");return this.copyPosition(a)},flattenToArrayOffset:function(a,b){console.warn(\"THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\");return this.toArray(a,b)},getPosition:function(){var a;return function(){void 0===a&&(a=new n);console.warn(\"THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.\");\nreturn a.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(a){console.warn(\"THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().\");return this.makeRotationFromQuaternion(a)},multiplyToArray:function(){console.warn(\"THREE.Matrix4: .multiplyToArray() has been removed.\")},multiplyVector3:function(a){console.warn(\"THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.\");return a.applyMatrix4(this)},multiplyVector4:function(a){console.warn(\"THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.\");\nreturn a.applyMatrix4(this)},multiplyVector3Array:function(){console.error(\"THREE.Matrix4: .multiplyVector3Array() has been removed.\")},rotateAxis:function(a){console.warn(\"THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.\");a.transformDirection(this)},crossVector:function(a){console.warn(\"THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.\");return a.applyMatrix4(this)},translate:function(){console.error(\"THREE.Matrix4: .translate() has been removed.\")},\nrotateX:function(){console.error(\"THREE.Matrix4: .rotateX() has been removed.\")},rotateY:function(){console.error(\"THREE.Matrix4: .rotateY() has been removed.\")},rotateZ:function(){console.error(\"THREE.Matrix4: .rotateZ() has been removed.\")},rotateByAxis:function(){console.error(\"THREE.Matrix4: .rotateByAxis() has been removed.\")},applyToBuffer:function(a){console.warn(\"THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.\");return this.applyToBufferAttribute(a)},\napplyToVector3Array:function(){console.error(\"THREE.Matrix4: .applyToVector3Array() has been removed.\")},makeFrustum:function(a,b,c,d,e,f){console.warn(\"THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.\");return this.makePerspective(a,b,d,c,e,f)}});Pa.prototype.isIntersectionLine=function(a){console.warn(\"THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().\");return this.intersectsLine(a)};ka.prototype.multiplyVector3=\nfunction(a){console.warn(\"THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.\");return a.applyQuaternion(this)};Object.assign(qb.prototype,{isIntersectionBox:function(a){console.warn(\"THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().\");return this.intersectsBox(a)},isIntersectionPlane:function(a){console.warn(\"THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().\");return this.intersectsPlane(a)},isIntersectionSphere:function(a){console.warn(\"THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().\");\nreturn this.intersectsSphere(a)}});Object.assign(ha.prototype,{area:function(){console.warn(\"THREE.Triangle: .area() has been renamed to .getArea().\");return this.getArea()},barycoordFromPoint:function(a,b){console.warn(\"THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().\");return this.getBarycoord(a,b)},midpoint:function(a){console.warn(\"THREE.Triangle: .midpoint() has been renamed to .getMidpoint().\");return this.getMidpoint(a)},normal:function(a){console.warn(\"THREE.Triangle: .normal() has been renamed to .getNormal().\");\nreturn this.getNormal(a)},plane:function(a){console.warn(\"THREE.Triangle: .plane() has been renamed to .getPlane().\");return this.getPlane(a)}});Object.assign(ha,{barycoordFromPoint:function(a,b,c,d,e){console.warn(\"THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().\");return ha.getBarycoord(a,b,c,d,e)},normal:function(a,b,c,d){console.warn(\"THREE.Triangle: .normal() has been renamed to .getNormal().\");return ha.getNormal(a,b,c,d)}});Object.assign(hb.prototype,{extractAllPoints:function(a){console.warn(\"THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.\");\nreturn this.extractPoints(a)},extrude:function(a){console.warn(\"THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.\");return new ub(this,a)},makeGeometry:function(a){console.warn(\"THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.\");return new wb(this,a)}});Object.assign(z.prototype,{fromAttribute:function(a,b,c){console.warn(\"THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().\");return this.fromBufferAttribute(a,b,c)},distanceToManhattan:function(a){console.warn(\"THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().\");\nreturn this.manhattanDistanceTo(a)},lengthManhattan:function(){console.warn(\"THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().\");return this.manhattanLength()}});Object.assign(n.prototype,{setEulerFromRotationMatrix:function(){console.error(\"THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.\")},setEulerFromQuaternion:function(){console.error(\"THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.\")},\ngetPositionFromMatrix:function(a){console.warn(\"THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().\");return this.setFromMatrixPosition(a)},getScaleFromMatrix:function(a){console.warn(\"THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().\");return this.setFromMatrixScale(a)},getColumnFromMatrix:function(a,b){console.warn(\"THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().\");return this.setFromMatrixColumn(b,\na)},applyProjection:function(a){console.warn(\"THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.\");return this.applyMatrix4(a)},fromAttribute:function(a,b,c){console.warn(\"THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().\");return this.fromBufferAttribute(a,b,c)},distanceToManhattan:function(a){console.warn(\"THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().\");return this.manhattanDistanceTo(a)},lengthManhattan:function(){console.warn(\"THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().\");\nreturn this.manhattanLength()}});Object.assign(ca.prototype,{fromAttribute:function(a,b,c){console.warn(\"THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().\");return this.fromBufferAttribute(a,b,c)},lengthManhattan:function(){console.warn(\"THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().\");return this.manhattanLength()}});Object.assign(Q.prototype,{computeTangents:function(){console.error(\"THREE.Geometry: .computeTangents() has been removed.\")},computeLineDistances:function(){console.error(\"THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.\")}});\nObject.assign(C.prototype,{getChildByName:function(a){console.warn(\"THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().\");return this.getObjectByName(a)},renderDepth:function(){console.warn(\"THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.\")},translate:function(a,b){console.warn(\"THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.\");return this.translateOnAxis(b,a)},getWorldRotation:function(){console.error(\"THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.\")}});\nObject.defineProperties(C.prototype,{eulerOrder:{get:function(){console.warn(\"THREE.Object3D: .eulerOrder is now .rotation.order.\");return this.rotation.order},set:function(a){console.warn(\"THREE.Object3D: .eulerOrder is now .rotation.order.\");this.rotation.order=a}},useQuaternion:{get:function(){console.warn(\"THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.\")},set:function(){console.warn(\"THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.\")}}});\nObject.defineProperties(Gc.prototype,{objects:{get:function(){console.warn(\"THREE.LOD: .objects has been renamed to .levels.\");return this.levels}}});Object.defineProperty(yd.prototype,\"useVertexTexture\",{get:function(){console.warn(\"THREE.Skeleton: useVertexTexture has been removed.\")},set:function(){console.warn(\"THREE.Skeleton: useVertexTexture has been removed.\")}});Hc.prototype.initBones=function(){console.error(\"THREE.SkinnedMesh: initBones() has been removed.\")};Object.defineProperty(K.prototype,\n\"__arcLengthDivisions\",{get:function(){console.warn(\"THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.\");return this.arcLengthDivisions},set:function(a){console.warn(\"THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.\");this.arcLengthDivisions=a}});V.prototype.setLens=function(a,b){console.warn(\"THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup.\");void 0!==b&&(this.filmGauge=b);this.setFocalLength(a)};Object.defineProperties(ba.prototype,\n{onlyShadow:{set:function(){console.warn(\"THREE.Light: .onlyShadow has been removed.\")}},shadowCameraFov:{set:function(a){console.warn(\"THREE.Light: .shadowCameraFov is now .shadow.camera.fov.\");this.shadow.camera.fov=a}},shadowCameraLeft:{set:function(a){console.warn(\"THREE.Light: .shadowCameraLeft is now .shadow.camera.left.\");this.shadow.camera.left=a}},shadowCameraRight:{set:function(a){console.warn(\"THREE.Light: .shadowCameraRight is now .shadow.camera.right.\");this.shadow.camera.right=a}},shadowCameraTop:{set:function(a){console.warn(\"THREE.Light: .shadowCameraTop is now .shadow.camera.top.\");\nthis.shadow.camera.top=a}},shadowCameraBottom:{set:function(a){console.warn(\"THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.\");this.shadow.camera.bottom=a}},shadowCameraNear:{set:function(a){console.warn(\"THREE.Light: .shadowCameraNear is now .shadow.camera.near.\");this.shadow.camera.near=a}},shadowCameraFar:{set:function(a){console.warn(\"THREE.Light: .shadowCameraFar is now .shadow.camera.far.\");this.shadow.camera.far=a}},shadowCameraVisible:{set:function(){console.warn(\"THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.\")}},\nshadowBias:{set:function(a){console.warn(\"THREE.Light: .shadowBias is now .shadow.bias.\");this.shadow.bias=a}},shadowDarkness:{set:function(){console.warn(\"THREE.Light: .shadowDarkness has been removed.\")}},shadowMapWidth:{set:function(a){console.warn(\"THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.\");this.shadow.mapSize.width=a}},shadowMapHeight:{set:function(a){console.warn(\"THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.\");this.shadow.mapSize.height=a}}});Object.defineProperties(E.prototype,\n{length:{get:function(){console.warn(\"THREE.BufferAttribute: .length has been deprecated. Use .count instead.\");return this.array.length}},copyIndicesArray:function(){console.error(\"THREE.BufferAttribute: .copyIndicesArray() has been removed.\")}});Object.assign(D.prototype,{addIndex:function(a){console.warn(\"THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().\");this.setIndex(a)},addDrawCall:function(a,b,c){void 0!==c&&console.warn(\"THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.\");\nconsole.warn(\"THREE.BufferGeometry: .addDrawCall() is now .addGroup().\");this.addGroup(a,b)},clearDrawCalls:function(){console.warn(\"THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().\");this.clearGroups()},computeTangents:function(){console.warn(\"THREE.BufferGeometry: .computeTangents() has been removed.\")},computeOffsets:function(){console.warn(\"THREE.BufferGeometry: .computeOffsets() has been removed.\")}});Object.defineProperties(D.prototype,{drawcalls:{get:function(){console.error(\"THREE.BufferGeometry: .drawcalls has been renamed to .groups.\");\nreturn this.groups}},offsets:{get:function(){console.warn(\"THREE.BufferGeometry: .offsets has been renamed to .groups.\");return this.groups}}});Object.assign(Sa.prototype,{getArrays:function(){console.error(\"THREE.ExtrudeBufferGeometry: .getArrays() has been removed.\")},addShapeList:function(){console.error(\"THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.\")},addShape:function(){console.error(\"THREE.ExtrudeBufferGeometry: .addShape() has been removed.\")}});Object.defineProperties(Rd.prototype,\n{dynamic:{set:function(){console.warn(\"THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.\")}},onUpdate:{value:function(){console.warn(\"THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.\");return this}}});Object.defineProperties(L.prototype,{wrapAround:{get:function(){console.warn(\"THREE.Material: .wrapAround has been removed.\")},set:function(){console.warn(\"THREE.Material: .wrapAround has been removed.\")}},overdraw:{get:function(){console.warn(\"THREE.Material: .overdraw has been removed.\")},\nset:function(){console.warn(\"THREE.Material: .overdraw has been removed.\")}},wrapRGB:{get:function(){console.warn(\"THREE.Material: .wrapRGB has been removed.\");return new J}},shading:{get:function(){console.error(\"THREE.\"+this.type+\": .shading has been removed. Use the boolean .flatShading instead.\")},set:function(a){console.warn(\"THREE.\"+this.type+\": .shading has been removed. Use the boolean .flatShading instead.\");this.flatShading=1===a}}});Object.defineProperties(Ga.prototype,{metal:{get:function(){console.warn(\"THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.\");\nreturn!1},set:function(){console.warn(\"THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead\")}}});Object.defineProperties(Ba.prototype,{derivatives:{get:function(){console.warn(\"THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.\");return this.extensions.derivatives},set:function(a){console.warn(\"THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.\");this.extensions.derivatives=a}}});Object.assign(be.prototype,\n{clearTarget:function(a,b,c,d){console.warn(\"THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead.\");this.setRenderTarget(a);this.clear(b,c,d)},animate:function(a){console.warn(\"THREE.WebGLRenderer: .animate() is now .setAnimationLoop().\");this.setAnimationLoop(a)},getCurrentRenderTarget:function(){console.warn(\"THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().\");return this.getRenderTarget()},getMaxAnisotropy:function(){console.warn(\"THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().\");\nreturn this.capabilities.getMaxAnisotropy()},getPrecision:function(){console.warn(\"THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.\");return this.capabilities.precision},resetGLState:function(){console.warn(\"THREE.WebGLRenderer: .resetGLState() is now .state.reset().\");return this.state.reset()},supportsFloatTextures:function(){console.warn(\"THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).\");return this.extensions.get(\"OES_texture_float\")},\nsupportsHalfFloatTextures:function(){console.warn(\"THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).\");return this.extensions.get(\"OES_texture_half_float\")},supportsStandardDerivatives:function(){console.warn(\"THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).\");return this.extensions.get(\"OES_standard_derivatives\")},supportsCompressedTextureS3TC:function(){console.warn(\"THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).\");\nreturn this.extensions.get(\"WEBGL_compressed_texture_s3tc\")},supportsCompressedTexturePVRTC:function(){console.warn(\"THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).\");return this.extensions.get(\"WEBGL_compressed_texture_pvrtc\")},supportsBlendMinMax:function(){console.warn(\"THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).\");return this.extensions.get(\"EXT_blend_minmax\")},supportsVertexTextures:function(){console.warn(\"THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.\");\nreturn this.capabilities.vertexTextures},supportsInstancedArrays:function(){console.warn(\"THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).\");return this.extensions.get(\"ANGLE_instanced_arrays\")},enableScissorTest:function(a){console.warn(\"THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().\");this.setScissorTest(a)},initMaterial:function(){console.warn(\"THREE.WebGLRenderer: .initMaterial() has been removed.\")},addPrePlugin:function(){console.warn(\"THREE.WebGLRenderer: .addPrePlugin() has been removed.\")},\naddPostPlugin:function(){console.warn(\"THREE.WebGLRenderer: .addPostPlugin() has been removed.\")},updateShadowMap:function(){console.warn(\"THREE.WebGLRenderer: .updateShadowMap() has been removed.\")},setFaceCulling:function(){console.warn(\"THREE.WebGLRenderer: .setFaceCulling() has been removed.\")}});Object.defineProperties(be.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(a){console.warn(\"THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.\");\nthis.shadowMap.enabled=a}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(a){console.warn(\"THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.\");this.shadowMap.type=a}},shadowMapCullFace:{get:function(){console.warn(\"THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.\")},set:function(){console.warn(\"THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.\")}}});Object.defineProperties(ef.prototype,\n{cullFace:{get:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.\")},set:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.\")}},renderReverseSided:{get:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.\")},set:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.\")}},\nrenderSingleSided:{get:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.\")},set:function(){console.warn(\"THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.\")}}});Object.defineProperties(jb.prototype,{wrapS:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.\");return this.texture.wrapS},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.\");\nthis.texture.wrapS=a}},wrapT:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.\");return this.texture.wrapT},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.\");this.texture.wrapT=a}},magFilter:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.\");return this.texture.magFilter},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.\");this.texture.magFilter=\na}},minFilter:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.\");return this.texture.minFilter},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.\");this.texture.minFilter=a}},anisotropy:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.\");return this.texture.anisotropy},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.\");this.texture.anisotropy=\na}},offset:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .offset is now .texture.offset.\");return this.texture.offset},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .offset is now .texture.offset.\");this.texture.offset=a}},repeat:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .repeat is now .texture.repeat.\");return this.texture.repeat},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .repeat is now .texture.repeat.\");this.texture.repeat=a}},format:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .format is now .texture.format.\");\nreturn this.texture.format},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .format is now .texture.format.\");this.texture.format=a}},type:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .type is now .texture.type.\");return this.texture.type},set:function(a){console.warn(\"THREE.WebGLRenderTarget: .type is now .texture.type.\");this.texture.type=a}},generateMipmaps:{get:function(){console.warn(\"THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.\");return this.texture.generateMipmaps},\nset:function(a){console.warn(\"THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.\");this.texture.generateMipmaps=a}}});Object.defineProperties(kf.prototype,{standing:{set:function(){console.warn(\"THREE.WebVRManager: .standing has been removed.\")}},userHeight:{set:function(){console.warn(\"THREE.WebVRManager: .userHeight has been removed.\")}}});lc.prototype.load=function(a){console.warn(\"THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.\");var b=this;(new pe).load(a,\nfunction(a){b.setBuffer(a)});return this};ue.prototype.getData=function(){console.warn(\"THREE.AudioAnalyser: .getData() is now .getFrequencyData().\");return this.getFrequencyData()};kd.prototype.updateCubeMap=function(a,b){console.warn(\"THREE.CubeCamera: .updateCubeMap() is now .update().\");return this.update(a,b)};ib.crossOrigin=void 0;ib.loadTexture=function(a,b,c,d){console.warn(\"THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.\");var e=new Hd;e.setCrossOrigin(this.crossOrigin);\na=e.load(a,c,void 0,d);b&&(a.mapping=b);return a};ib.loadTextureCube=function(a,b,c,d){console.warn(\"THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.\");var e=new ie;e.setCrossOrigin(this.crossOrigin);a=e.load(a,c,void 0,d);b&&(a.mapping=b);return a};ib.loadCompressedTexture=function(){console.error(\"THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.\")};ib.loadCompressedTextureCube=function(){console.error(\"THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.\")};\nl.WebGLRenderTargetCube=Ib;l.WebGLRenderTarget=jb;l.WebGLRenderer=be;l.ShaderLib=Qa;l.UniformsLib=F;l.UniformsUtils=ah;l.ShaderChunk=I;l.FogExp2=Qb;l.Fog=Rb;l.Scene=xd;l.Sprite=Fc;l.LOD=Gc;l.SkinnedMesh=Hc;l.Skeleton=yd;l.Bone=ce;l.Mesh=pa;l.LineSegments=S;l.LineLoop=zd;l.Line=ma;l.Points=Tb;l.Group=Pb;l.VideoTexture=de;l.DataTexture=kb;l.DataTexture3D=Nb;l.CompressedTexture=Ub;l.CubeTexture=Xa;l.CanvasTexture=Ic;l.DepthTexture=Jc;l.Texture=X;l.AnimationLoader=tf;l.CompressedTextureLoader=uf;l.DataTextureLoader=\nhe;l.CubeTextureLoader=ie;l.TextureLoader=Hd;l.ObjectLoader=le;l.MaterialLoader=Qd;l.BufferGeometryLoader=ke;l.DefaultLoadingManager=za;l.LoadingManager=ge;l.ImageLoader=fd;l.ImageBitmapLoader=me;l.FontLoader=wf;l.FileLoader=Ia;l.Loader=jd;l.LoaderUtils=Ie;l.Cache=Hb;l.AudioLoader=pe;l.SpotLightShadow=Jd;l.SpotLight=Kd;l.PointLight=Ld;l.RectAreaLight=Pd;l.HemisphereLight=Id;l.DirectionalLightShadow=Md;l.DirectionalLight=Nd;l.AmbientLight=Od;l.LightShadow=Gb;l.Light=ba;l.StereoCamera=xf;l.PerspectiveCamera=\nV;l.OrthographicCamera=id;l.CubeCamera=kd;l.ArrayCamera=Dc;l.Camera=Ra;l.AudioListener=re;l.PositionalAudio=te;l.AudioContext=se;l.AudioAnalyser=ue;l.Audio=lc;l.VectorKeyframeTrack=jc;l.StringKeyframeTrack=Gd;l.QuaternionKeyframeTrack=ed;l.NumberKeyframeTrack=ic;l.ColorKeyframeTrack=Ed;l.BooleanKeyframeTrack=Dd;l.PropertyMixer=ve;l.PropertyBinding=oa;l.KeyframeTrack=qa;l.AnimationUtils=ra;l.AnimationObjectGroup=zf;l.AnimationMixer=we;l.AnimationClip=Ha;l.Uniform=Rd;l.InstancedBufferGeometry=xe;l.BufferGeometry=\nD;l.Geometry=Q;l.InterleavedBufferAttribute=Ec;l.InstancedInterleavedBuffer=ye;l.InterleavedBuffer=rb;l.InstancedBufferAttribute=ze;l.Face3=Kb;l.Object3D=C;l.Raycaster=Bf;l.Layers=Xd;l.EventDispatcher=ja;l.Clock=qe;l.QuaternionLinearInterpolant=Fd;l.LinearInterpolant=dd;l.DiscreteInterpolant=Cd;l.CubicInterpolant=Bd;l.Interpolant=ya;l.Triangle=ha;l.Math=R;l.Spherical=Df;l.Cylindrical=Ef;l.Plane=Pa;l.Frustum=td;l.Sphere=Ea;l.Ray=qb;l.Matrix4=O;l.Matrix3=da;l.Box3=Wa;l.Box2=Be;l.Line3=Ce;l.Euler=lb;\nl.Vector4=ca;l.Vector3=n;l.Vector2=z;l.Quaternion=ka;l.Color=J;l.ImmediateRenderObject=ld;l.VertexNormalsHelper=md;l.SpotLightHelper=mc;l.SkeletonHelper=nc;l.PointLightHelper=oc;l.RectAreaLightHelper=pc;l.HemisphereLightHelper=qc;l.GridHelper=nd;l.PolarGridHelper=Sd;l.FaceNormalsHelper=od;l.DirectionalLightHelper=rc;l.CameraHelper=pd;l.BoxHelper=ab;l.Box3Helper=qd;l.PlaneHelper=rd;l.ArrowHelper=bb;l.AxesHelper=sd;l.Shape=hb;l.Path=Na;l.ShapePath=ne;l.Font=oe;l.CurvePath=$a;l.Curve=K;l.ImageUtils=\nib;l.ShapeUtils=Ya;l.WebGLUtils=ff;l.WireframeGeometry=Vb;l.ParametricGeometry=Kc;l.ParametricBufferGeometry=Wb;l.TetrahedronGeometry=Mc;l.TetrahedronBufferGeometry=Xb;l.OctahedronGeometry=Nc;l.OctahedronBufferGeometry=sb;l.IcosahedronGeometry=Oc;l.IcosahedronBufferGeometry=Yb;l.DodecahedronGeometry=Pc;l.DodecahedronBufferGeometry=Zb;l.PolyhedronGeometry=Lc;l.PolyhedronBufferGeometry=xa;l.TubeGeometry=Qc;l.TubeBufferGeometry=$b;l.TorusKnotGeometry=Rc;l.TorusKnotBufferGeometry=ac;l.TorusGeometry=Sc;\nl.TorusBufferGeometry=bc;l.TextGeometry=Xc;l.TextBufferGeometry=cc;l.SphereGeometry=Yc;l.SphereBufferGeometry=vb;l.RingGeometry=Zc;l.RingBufferGeometry=dc;l.PlaneGeometry=zc;l.PlaneBufferGeometry=pb;l.LatheGeometry=$c;l.LatheBufferGeometry=ec;l.ShapeGeometry=wb;l.ShapeBufferGeometry=xb;l.ExtrudeGeometry=ub;l.ExtrudeBufferGeometry=Sa;l.EdgesGeometry=fc;l.ConeGeometry=ad;l.ConeBufferGeometry=bd;l.CylinderGeometry=yb;l.CylinderBufferGeometry=Za;l.CircleGeometry=cd;l.CircleBufferGeometry=gc;l.BoxGeometry=\nLb;l.BoxBufferGeometry=ob;l.ShadowMaterial=zb;l.SpriteMaterial=gb;l.RawShaderMaterial=hc;l.ShaderMaterial=Ba;l.PointsMaterial=Fa;l.MeshPhysicalMaterial=Ab;l.MeshStandardMaterial=Ta;l.MeshPhongMaterial=Ga;l.MeshToonMaterial=Bb;l.MeshNormalMaterial=Cb;l.MeshLambertMaterial=Db;l.MeshDepthMaterial=db;l.MeshDistanceMaterial=eb;l.MeshBasicMaterial=Da;l.MeshMatcapMaterial=Eb;l.LineDashedMaterial=Fb;l.LineBasicMaterial=T;l.Material=L;l.Float64BufferAttribute=yc;l.Float32BufferAttribute=B;l.Uint32BufferAttribute=\nnb;l.Int32BufferAttribute=xc;l.Uint16BufferAttribute=mb;l.Int16BufferAttribute=wc;l.Uint8ClampedBufferAttribute=vc;l.Uint8BufferAttribute=uc;l.Int8BufferAttribute=tc;l.BufferAttribute=E;l.ArcCurve=kc;l.CatmullRomCurve3=ta;l.CubicBezierCurve=Ja;l.CubicBezierCurve3=Ua;l.EllipseCurve=va;l.LineCurve=Aa;l.LineCurve3=Ka;l.QuadraticBezierCurve=La;l.QuadraticBezierCurve3=Va;l.SplineCurve=Ma;l.REVISION=\"99\";l.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2};l.CullFaceNone=0;l.CullFaceBack=1;l.CullFaceFront=2;l.CullFaceFrontBack=\n3;l.FrontFaceDirectionCW=0;l.FrontFaceDirectionCCW=1;l.BasicShadowMap=0;l.PCFShadowMap=1;l.PCFSoftShadowMap=2;l.FrontSide=0;l.BackSide=1;l.DoubleSide=2;l.FlatShading=1;l.SmoothShading=2;l.NoColors=0;l.FaceColors=1;l.VertexColors=2;l.NoBlending=0;l.NormalBlending=1;l.AdditiveBlending=2;l.SubtractiveBlending=3;l.MultiplyBlending=4;l.CustomBlending=5;l.AddEquation=100;l.SubtractEquation=101;l.ReverseSubtractEquation=102;l.MinEquation=103;l.MaxEquation=104;l.ZeroFactor=200;l.OneFactor=201;l.SrcColorFactor=\n202;l.OneMinusSrcColorFactor=203;l.SrcAlphaFactor=204;l.OneMinusSrcAlphaFactor=205;l.DstAlphaFactor=206;l.OneMinusDstAlphaFactor=207;l.DstColorFactor=208;l.OneMinusDstColorFactor=209;l.SrcAlphaSaturateFactor=210;l.NeverDepth=0;l.AlwaysDepth=1;l.LessDepth=2;l.LessEqualDepth=3;l.EqualDepth=4;l.GreaterEqualDepth=5;l.GreaterDepth=6;l.NotEqualDepth=7;l.MultiplyOperation=0;l.MixOperation=1;l.AddOperation=2;l.NoToneMapping=0;l.LinearToneMapping=1;l.ReinhardToneMapping=2;l.Uncharted2ToneMapping=3;l.CineonToneMapping=\n4;l.ACESFilmicToneMapping=5;l.UVMapping=300;l.CubeReflectionMapping=301;l.CubeRefractionMapping=302;l.EquirectangularReflectionMapping=303;l.EquirectangularRefractionMapping=304;l.SphericalReflectionMapping=305;l.CubeUVReflectionMapping=306;l.CubeUVRefractionMapping=307;l.RepeatWrapping=1E3;l.ClampToEdgeWrapping=1001;l.MirroredRepeatWrapping=1002;l.NearestFilter=1003;l.NearestMipMapNearestFilter=1004;l.NearestMipMapLinearFilter=1005;l.LinearFilter=1006;l.LinearMipMapNearestFilter=1007;l.LinearMipMapLinearFilter=\n1008;l.UnsignedByteType=1009;l.ByteType=1010;l.ShortType=1011;l.UnsignedShortType=1012;l.IntType=1013;l.UnsignedIntType=1014;l.FloatType=1015;l.HalfFloatType=1016;l.UnsignedShort4444Type=1017;l.UnsignedShort5551Type=1018;l.UnsignedShort565Type=1019;l.UnsignedInt248Type=1020;l.AlphaFormat=1021;l.RGBFormat=1022;l.RGBAFormat=1023;l.LuminanceFormat=1024;l.LuminanceAlphaFormat=1025;l.RGBEFormat=1023;l.DepthFormat=1026;l.DepthStencilFormat=1027;l.RedFormat=1028;l.RGB_S3TC_DXT1_Format=33776;l.RGBA_S3TC_DXT1_Format=\n33777;l.RGBA_S3TC_DXT3_Format=33778;l.RGBA_S3TC_DXT5_Format=33779;l.RGB_PVRTC_4BPPV1_Format=35840;l.RGB_PVRTC_2BPPV1_Format=35841;l.RGBA_PVRTC_4BPPV1_Format=35842;l.RGBA_PVRTC_2BPPV1_Format=35843;l.RGB_ETC1_Format=36196;l.RGBA_ASTC_4x4_Format=37808;l.RGBA_ASTC_5x4_Format=37809;l.RGBA_ASTC_5x5_Format=37810;l.RGBA_ASTC_6x5_Format=37811;l.RGBA_ASTC_6x6_Format=37812;l.RGBA_ASTC_8x5_Format=37813;l.RGBA_ASTC_8x6_Format=37814;l.RGBA_ASTC_8x8_Format=37815;l.RGBA_ASTC_10x5_Format=37816;l.RGBA_ASTC_10x6_Format=\n37817;l.RGBA_ASTC_10x8_Format=37818;l.RGBA_ASTC_10x10_Format=37819;l.RGBA_ASTC_12x10_Format=37820;l.RGBA_ASTC_12x12_Format=37821;l.LoopOnce=2200;l.LoopRepeat=2201;l.LoopPingPong=2202;l.InterpolateDiscrete=2300;l.InterpolateLinear=2301;l.InterpolateSmooth=2302;l.ZeroCurvatureEnding=2400;l.ZeroSlopeEnding=2401;l.WrapAroundEnding=2402;l.TrianglesDrawMode=0;l.TriangleStripDrawMode=1;l.TriangleFanDrawMode=2;l.LinearEncoding=3E3;l.sRGBEncoding=3001;l.GammaEncoding=3007;l.RGBEEncoding=3002;l.LogLuvEncoding=\n3003;l.RGBM7Encoding=3004;l.RGBM16Encoding=3005;l.RGBDEncoding=3006;l.BasicDepthPacking=3200;l.RGBADepthPacking=3201;l.TangentSpaceNormalMap=0;l.ObjectSpaceNormalMap=1;l.CubeGeometry=Lb;l.Face4=function(a,b,c,d,e,f,g){console.warn(\"THREE.Face4 has been removed. A THREE.Face3 will be created instead.\");return new Kb(a,b,c,e,f,g)};l.LineStrip=0;l.LinePieces=1;l.MeshFaceMaterial=function(a){console.warn(\"THREE.MeshFaceMaterial has been removed. Use an Array instead.\");return a};l.MultiMaterial=function(a){void 0===\na&&(a=[]);console.warn(\"THREE.MultiMaterial has been removed. Use an Array instead.\");a.isMultiMaterial=!0;a.materials=a;a.clone=function(){return a.slice()};return a};l.PointCloud=function(a,b){console.warn(\"THREE.PointCloud has been renamed to THREE.Points.\");return new Tb(a,b)};l.Particle=function(a){console.warn(\"THREE.Particle has been renamed to THREE.Sprite.\");return new Fc(a)};l.ParticleSystem=function(a,b){console.warn(\"THREE.ParticleSystem has been renamed to THREE.Points.\");return new Tb(a,\nb)};l.PointCloudMaterial=function(a){console.warn(\"THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.\");return new Fa(a)};l.ParticleBasicMaterial=function(a){console.warn(\"THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.\");return new Fa(a)};l.ParticleSystemMaterial=function(a){console.warn(\"THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.\");return new Fa(a)};l.Vertex=function(a,b,c){console.warn(\"THREE.Vertex has been removed. Use THREE.Vector3 instead.\");\nreturn new n(a,b,c)};l.DynamicBufferAttribute=function(a,b){console.warn(\"THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.\");return(new E(a,b)).setDynamic(!0)};l.Int8Attribute=function(a,b){console.warn(\"THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.\");return new tc(a,b)};l.Uint8Attribute=function(a,b){console.warn(\"THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.\");return new uc(a,\nb)};l.Uint8ClampedAttribute=function(a,b){console.warn(\"THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.\");return new vc(a,b)};l.Int16Attribute=function(a,b){console.warn(\"THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.\");return new wc(a,b)};l.Uint16Attribute=function(a,b){console.warn(\"THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.\");return new mb(a,b)};l.Int32Attribute=\nfunction(a,b){console.warn(\"THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.\");return new xc(a,b)};l.Uint32Attribute=function(a,b){console.warn(\"THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.\");return new nb(a,b)};l.Float32Attribute=function(a,b){console.warn(\"THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.\");return new B(a,b)};l.Float64Attribute=function(a,b){console.warn(\"THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.\");\nreturn new yc(a,b)};l.ClosedSplineCurve3=Gf;l.SplineCurve3=Hf;l.Spline=Ee;l.AxisHelper=function(a){console.warn(\"THREE.AxisHelper has been renamed to THREE.AxesHelper.\");return new sd(a)};l.BoundingBoxHelper=function(a,b){console.warn(\"THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.\");return new ab(a,b)};l.EdgesHelper=function(a,b){console.warn(\"THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.\");return new S(new fc(a.geometry),new T({color:void 0!==\nb?b:16777215}))};l.WireframeHelper=function(a,b){console.warn(\"THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.\");return new S(new Vb(a.geometry),new T({color:void 0!==b?b:16777215}))};l.XHRLoader=function(a){console.warn(\"THREE.XHRLoader has been renamed to THREE.FileLoader.\");return new Ia(a)};l.BinaryTextureLoader=function(a){console.warn(\"THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.\");return new he(a)};l.GeometryUtils={merge:function(a,b,c){console.warn(\"THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.\");\nif(b.isMesh){b.matrixAutoUpdate&&b.updateMatrix();var d=b.matrix;b=b.geometry}a.merge(b,d,c)},center:function(a){console.warn(\"THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.\");return a.center()}};l.Projector=function(){console.error(\"THREE.Projector has been moved to /examples/js/renderers/Projector.js.\");this.projectVector=function(a,b){console.warn(\"THREE.Projector: .projectVector() is now vector.project().\");a.project(b)};this.unprojectVector=function(a,\nb){console.warn(\"THREE.Projector: .unprojectVector() is now vector.unproject().\");a.unproject(b)};this.pickingRay=function(){console.error(\"THREE.Projector: .pickingRay() is now raycaster.setFromCamera().\")}};l.CanvasRenderer=function(){console.error(\"THREE.CanvasRenderer has been removed\")};l.JSONLoader=function(){console.error(\"THREE.JSONLoader has been removed.\")};l.SceneUtils={createMultiMaterialObject:function(){console.error(\"THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js\")},\ndetach:function(){console.error(\"THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js\")},attach:function(){console.error(\"THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js\")}};l.LensFlare=function(){console.error(\"THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js\")};Object.defineProperty(l,\"__esModule\",{value:!0})});\n","/*! The file full_ui_all.js contains the following files: Detector.js,\n * CanvasRenderer.js, TrackballControls.js, OrthographicTrackballControls.js,\n * Projector.js, marchingcube.js, ProteinSurface4.js, setupsurface.js, icn3d.js,\n * and full_ui.js.\n * The file simple_ui_all.js contains the following files: Detector.js,\n * CanvasRenderer.js, TrackballControls.js, OrthographicTrackballControls.js,\n * Projector.js, marchingcube.js, ProteinSurface4.js, setupsurface.js, icn3d.js,\n * and simple_ui.js.\n */\n\n/*! Detector.js from http://threejs.org/\n * @author alteredq / http://alteredqualia.com/\n * @author mr.doob / http://mrdoob.com/\n */\n\nvar Detector = {\n\n    canvas: !! window.CanvasRenderingContext2D,\n    webgl: ( function () {\n\n        try {\n\n            var canvas = document.createElement( 'canvas' ); return !! ( window.WebGLRenderingContext && ( canvas.getContext( 'webgl' ) || canvas.getContext( 'experimental-webgl' ) ) );\n\n        } catch ( e ) {\n\n            return false;\n\n        }\n\n    } )(),\n    workers: !! window.Worker,\n    fileapi: window.File && window.FileReader && window.FileList && window.Blob,\n\n    getWebGLErrorMessage: function () {\n\n        var element = document.createElement( 'div' );\n        element.id = 'webgl-error-message';\n        element.style.fontFamily = 'monospace';\n        element.style.fontSize = '13px';\n        element.style.fontWeight = 'normal';\n        element.style.textAlign = 'center';\n        element.style.background = '#fff';\n        element.style.color = '#000';\n        element.style.padding = '1.5em';\n        element.style.width = '400px';\n        element.style.margin = '5em auto 0';\n\n        if ( ! this.webgl ) {\n\n            element.innerHTML = window.WebGLRenderingContext ? [\n                'Your graphics card does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br />',\n                'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.'\n            ].join( '\\n' ) : [\n                'Your browser does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br/>',\n                'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.'\n            ].join( '\\n' );\n\n        }\n\n        return element;\n\n    },\n\n    addGetWebGLMessage: function ( parameters ) {\n\n        var parent, id, element;\n\n        parameters = parameters || {};\n\n        parent = parameters.parent !== undefined ? parameters.parent : document.body;\n        id = parameters.id !== undefined ? parameters.id : 'oldie';\n\n        element = Detector.getWebGLErrorMessage();\n        element.id = id;\n\n        parent.appendChild( element );\n\n    }\n\n};\n\n// browserify support\nif ( typeof module === 'object' ) {\n\n    module.exports = Detector;\n\n}\n\n/*! TrackballControls.js from http://threejs.org/\n * @author Eberhard Graether / http://egraether.com/\n * @author Mark Lundin  / http://mark-lundin.com\n * modified by Jiyao Wang\n */\n\nTHREE.TrackballControls = function ( object, domElement, icn3d ) {\n\n    var _this = this;\n\n    this.STATE = { NONE: -1, ROTATE: 0, ZOOM: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_ZOOM_PAN: 4 };\n\n    this.object = object;\n    this.domElement = ( domElement !== undefined ) ? domElement : document;\n\n    // API\n    this.enabled = true;\n\n    this.screen = { left: 0, top: 0, width: 0, height: 0 };\n\n    this.rotateSpeed = 1.0;\n    this.zoomSpeed = 1.2;\n    this.panSpeed = 0.3;\n\n    this.noRotate = false;\n    this.noZoom = false;\n    this.noPan = false;\n    this.noRoll = false;\n\n    this.staticMoving = false;\n    this.dynamicDampingFactor = 0.2;\n\n    this.minDistance = 0;\n    this.maxDistance = Infinity;\n\n    this.keys = [ 65 /*A*/, 83 /*S*/, 68 /*D*/ ];\n\n    // internals\n\n    this.target = new THREE.Vector3();\n\n    var EPS = 0.000001;\n\n    var lastPosition = new THREE.Vector3();\n\n    this._state = this.STATE.NONE;\n    var _prevState = this.STATE.NONE;\n\n    var _eye = new THREE.Vector3();\n\n    this._rotateStart = new THREE.Vector3();\n    this._rotateEnd = new THREE.Vector3();\n\n    this._zoomStart = new THREE.Vector2();\n    this._zoomEnd = new THREE.Vector2();\n\n    var _touchZoomDistanceStart = 0;\n    var _touchZoomDistanceEnd = 0;\n\n    this._panStart = new THREE.Vector2();\n    this._panEnd = new THREE.Vector2();\n\n    // for reset\n\n    this.target0 = this.target.clone();\n    this.position0 = this.object.position.clone();\n    this.up0 = this.object.up.clone();\n\n    // events\n\n    var changeEvent = { type: 'change' };\n    var startEvent = { type: 'start'};\n    var endEvent = { type: 'end'};\n\n\n    // methods\n\n    this.handleResize = function () {\n\n        if ( this.domElement === document ) {\n\n            this.screen.left = 0;\n            this.screen.top = 0;\n            this.screen.width = window.innerWidth;\n            this.screen.height = window.innerHeight;\n\n        } else {\n\n            var box = this.domElement.getBoundingClientRect();\n            // adjustments come from similar code in the jquery offset() function\n            var d = this.domElement.ownerDocument.documentElement;\n            this.screen.left = box.left + window.pageXOffset - d.clientLeft;\n            this.screen.top = box.top + window.pageYOffset - d.clientTop;\n            this.screen.width = box.width;\n            this.screen.height = box.height;\n\n        }\n\n    };\n\n    this.handleEvent = function ( event ) {\n\n        if ( typeof this[ event.type ] === 'function' ) {\n\n            this[ event.type ]( event );\n\n        }\n\n    };\n\n    var getMouseOnScreen = ( function () {\n\n        var vector = new THREE.Vector2();\n\n        return function ( pageX, pageY ) {\n\n            vector.set(\n                ( pageX - _this.screen.left ) / _this.screen.width,\n                ( pageY - _this.screen.top ) / _this.screen.height\n            );\n\n            return vector;\n\n        };\n\n    }() );\n\n    var getMouseProjectionOnBall = ( function () {\n\n        var vector = new THREE.Vector3();\n        var objectUp = new THREE.Vector3();\n        var mouseOnBall = new THREE.Vector3();\n\n        return function ( pageX, pageY ) {\n\n            mouseOnBall.set(\n                ( pageX - _this.screen.width * 0.5 - _this.screen.left ) / (_this.screen.width*.5),\n                ( _this.screen.height * 0.5 + _this.screen.top - pageY ) / (_this.screen.height*.5),\n                0.0\n            );\n\n            var length = mouseOnBall.length();\n\n            if ( _this.noRoll ) {\n\n                if ( length < Math.SQRT1_2 ) {\n\n                    mouseOnBall.z = Math.sqrt( 1.0 - length*length );\n\n                } else {\n\n                    mouseOnBall.z = .5 / length;\n\n                }\n\n            } else if ( length > 1.0 ) {\n\n                mouseOnBall.normalize();\n\n            } else {\n\n                mouseOnBall.z = Math.sqrt( 1.0 - length * length );\n\n            }\n\n            _eye.copy( _this.object.position ).sub( _this.target );\n\n            vector.copy( _this.object.up ).setLength( mouseOnBall.y )\n            vector.add( objectUp.copy( _this.object.up ).cross( _eye ).setLength( mouseOnBall.x ) );\n            vector.add( _eye.setLength( mouseOnBall.z ) );\n\n            return vector;\n\n        };\n\n    }() );\n\n    this.rotateCamera = (function(quaternionIn, bUpdate){\n\n        var axis = new THREE.Vector3(),\n            quaternion = new THREE.Quaternion();\n\n\n        return function (quaternionIn, bUpdate) {\n\n            var angle;\n            if(quaternionIn === undefined) {\n              angle = Math.acos( _this._rotateStart.dot( _this._rotateEnd ) / _this._rotateStart.length() / _this._rotateEnd.length() );\n            }\n\n            //var angle = Math.acos( _this._rotateStart.dot( _this._rotateEnd ) / _this._rotateStart.length() / _this._rotateEnd.length() );\n\n            if ( angle || quaternionIn !== undefined) {\n                if(quaternionIn === undefined) {\n                  axis.crossVectors( _this._rotateStart, _this._rotateEnd ).normalize();\n\n                  angle *= _this.rotateSpeed;\n\n                  quaternion.setFromAxisAngle( axis, -angle );\n                }\n                else {\n                  quaternion.copy(quaternionIn);\n                }\n\n                // order matters in quaernion multiplication: http://www.cprogramming.com/tutorial/3d/quaternions.html\n                if(bUpdate === undefined || bUpdate === true) icn3d.quaternion.multiplyQuaternions(quaternion, icn3d.quaternion);\n\n                _eye.applyQuaternion( quaternion );\n                _this.object.up.applyQuaternion( quaternion );\n\n                _this._rotateEnd.applyQuaternion( quaternion );\n\n                if ( _this.staticMoving ) {\n\n                    _this._rotateStart.copy( _this._rotateEnd );\n\n                } else {\n\n                    quaternion.setFromAxisAngle( axis, angle * ( _this.dynamicDampingFactor - 1.0 ) );\n                    _this._rotateStart.applyQuaternion( quaternion );\n\n                }\n            }\n\n        }\n\n    }());\n\n    this.zoomCamera = function (zoomFactor, bUpdate) {\n        if ( _this._state === _this.STATE.TOUCH_ZOOM_PAN ) {\n\n            var factor;\n\n            if(zoomFactor !== undefined) {\n              factor = zoomFactor;\n            }\n            else {\n\n              factor = _touchZoomDistanceStart / _touchZoomDistanceEnd;\n              _touchZoomDistanceStart = _touchZoomDistanceEnd;\n            }\n\n            _eye.multiplyScalar( factor );\n\n            if(bUpdate === undefined || bUpdate === true) icn3d._zoomFactor *= factor;\n\n        } else {\n\n            var factor;\n\n            if(zoomFactor !== undefined) {\n              factor = zoomFactor;\n            }\n            else {\n              factor = 1.0 + ( _this._zoomEnd.y - _this._zoomStart.y ) * _this.zoomSpeed;\n            }\n\n            if(bUpdate === undefined || bUpdate === true) icn3d._zoomFactor *= factor;\n\n            //if ( factor !== 1.0 && factor > 0.0 ) {\n            if ( factor !== 1.0 ) {\n\n                _eye.multiplyScalar( factor );\n\n                if ( _this.staticMoving ) {\n\n                    _this._zoomStart.copy( _this._zoomEnd );\n\n                } else {\n\n                    _this._zoomStart.y += ( _this._zoomEnd.y - _this._zoomStart.y ) * this.dynamicDampingFactor;\n                }\n            }\n\n        }\n\n    };\n\n    this.panCamera = (function(mouseChangeIn, bUpdate){\n\n        var mouseChange = new THREE.Vector2(),\n            objectUp = new THREE.Vector3(),\n            pan = new THREE.Vector3();\n\n        return function (mouseChangeIn, bUpdate) {\n\n            if(mouseChangeIn !== undefined) {\n              mouseChange = mouseChangeIn;\n\n              if(bUpdate === undefined || bUpdate === true) icn3d.mouseChange.add(mouseChangeIn);\n            }\n            else {\n              mouseChange.copy( _this._panEnd ).sub( _this._panStart );\n\n              if(bUpdate === undefined || bUpdate === true) icn3d.mouseChange.add( _this._panEnd ).sub( _this._panStart );\n            }\n\n            if ( mouseChange.lengthSq() ) {\n                mouseChange.multiplyScalar( _eye.length() * _this.panSpeed );\n\n                pan.copy( _eye ).cross( _this.object.up ).setLength( mouseChange.x );\n                pan.add( objectUp.copy( _this.object.up ).setLength( mouseChange.y ) );\n\n                _this.object.position.add( pan );\n                _this.target.add( pan );\n\n                if ( _this.staticMoving ) {\n\n                    _this._panStart.copy( _this._panEnd );\n\n                } else {\n\n                    _this._panStart.add( mouseChange.subVectors( _this._panEnd, _this._panStart ).multiplyScalar( _this.dynamicDampingFactor ) );\n\n                }\n\n            }\n        }\n\n    }());\n\n    this.checkDistances = function () {\n\n        if ( !_this.noZoom || !_this.noPan ) {\n\n            if ( _eye.lengthSq() > _this.maxDistance * _this.maxDistance ) {\n\n                _this.object.position.addVectors( _this.target, _eye.setLength( _this.maxDistance ) );\n\n            }\n\n            if ( _eye.lengthSq() < _this.minDistance * _this.minDistance ) {\n\n                _this.object.position.addVectors( _this.target, _eye.setLength( _this.minDistance ) );\n\n            }\n\n        }\n\n    };\n\n    this.update = function (para) {\n\n        _eye.subVectors( _this.object.position, _this.target );\n\n        if ( !_this.noRotate ) {\n\n            if(para !== undefined && para.quaternion !== undefined) {\n              _this.rotateCamera(para.quaternion, para.update);\n            }\n            else {\n              _this.rotateCamera();\n            }\n\n        }\n\n        if ( !_this.noZoom ) {\n\n            if(para !== undefined && para._zoomFactor !== undefined) {\n              _this.zoomCamera(para._zoomFactor, para.update);\n            }\n            else {\n              _this.zoomCamera();\n            }\n\n        }\n\n        if ( !_this.noPan ) {\n\n            if(para !== undefined && para.mouseChange !== undefined) {\n              _this.panCamera(para.mouseChange, para.update);\n            }\n            else {\n              _this.panCamera();\n            }\n\n        }\n\n        _this.object.position.addVectors( _this.target, _eye );\n\n        _this.checkDistances();\n\n        _this.object.lookAt( _this.target );\n\n        if ( lastPosition.distanceToSquared( _this.object.position ) > EPS ) {\n\n            _this.dispatchEvent( changeEvent );\n\n            lastPosition.copy( _this.object.position );\n\n        }\n\n    };\n\n    this.reset = function () {\n\n        _this._state = _this.STATE.NONE;\n        _prevState = _this.STATE.NONE;\n\n        _this.target.copy( _this.target0 );\n        _this.object.position.copy( _this.position0 );\n        _this.object.up.copy( _this.up0 );\n\n        _eye.subVectors( _this.object.position, _this.target );\n\n        _this.object.lookAt( _this.target );\n\n        _this.dispatchEvent( changeEvent );\n\n        lastPosition.copy( _this.object.position );\n\n    };\n\n    // listeners\n\n    function keydown( event ) {\n//console.log(\"keydown\");\n\n        if ( _this.enabled === false ) return;\n\n        window.removeEventListener( 'keydown', keydown );\n\n        _prevState = _this._state;\n\n\n        if ( _this._state !== _this.STATE.NONE ) {\n\n            return;\n\n        } else if ( event.keyCode === _this.keys[ _this.STATE.ROTATE ] &&  !_this.noRotate) {\n\n            _this._state = _this.STATE.ROTATE;\n\n        } else if ( (event.keyCode === _this.keys[ _this.STATE.ZOOM ]) && !_this.noZoom ) {\n\n            _this._state = _this.STATE.ZOOM;\n\n        } else if ( (event.keyCode === _this.keys[ _this.STATE.PAN ]) && !_this.noPan ) {\n\n            _this._state = _this.STATE.PAN;\n\n        }\n\n\n    }\n\n    function keyup( event ) {\n//console.log(\"keyup\");\n\n        if ( _this.enabled === false ) return;\n\n        _this._state = _prevState;\n\n        window.addEventListener( 'keydown', keydown, false );\n\n    }\n\n    function mousedown( event ) {\n\n        if ( _this.enabled === false ) return;\n\n        event.preventDefault();\n        event.stopPropagation();\n\n        if ( _this._state === _this.STATE.NONE ) {\n\n            _this._state = event.button;\n\n        }\n\n        if ( _this._state === _this.STATE.ROTATE && !_this.noRotate ) {\n\n            _this._rotateStart.copy( getMouseProjectionOnBall( event.pageX, event.pageY ) );\n            _this._rotateEnd.copy( _this._rotateStart );\n\n        } else if ( _this._state === _this.STATE.ZOOM && !_this.noZoom ) {\n\n            _this._zoomStart.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n            _this._zoomEnd.copy(_this._zoomStart);\n\n        } else if ( _this._state === _this.STATE.PAN && !_this.noPan ) {\n\n            _this._panStart.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n            _this._panEnd.copy(_this._panStart)\n\n        }\n\n        document.addEventListener( 'mousemove', mousemove, false );\n        document.addEventListener( 'mouseup', mouseup, false );\n\n        _this.dispatchEvent( startEvent );\n\n    }\n\n    function mousemove( event ) {\n\n        if ( _this.enabled === false ) return;\n\n        event.preventDefault();\n        event.stopPropagation();\n\n        if ( _this._state === _this.STATE.ROTATE && !_this.noRotate ) {\n\n//console.log(\"ROTATE\");\n            _this._rotateEnd.copy( getMouseProjectionOnBall( event.pageX, event.pageY ) );\n\n        } else if ( _this._state === _this.STATE.ZOOM && !_this.noZoom ) {\n\n            _this._zoomEnd.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\n        } else if ( _this._state === _this.STATE.PAN && !_this.noPan ) {\n\n            _this._panEnd.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\n        }\n\n    }\n\n    function mouseup( event ) {\n        if ( _this.enabled === false ) return;\n\n        event.preventDefault();\n        event.stopPropagation();\n\n        _this._state = _this.STATE.NONE;\n\n        document.removeEventListener( 'mousemove', mousemove );\n        document.removeEventListener( 'mouseup', mouseup );\n        _this.dispatchEvent( endEvent );\n\n    }\n\n    function mousewheel( event ) {\n\n        if ( _this.enabled === false ) return;\n\n        event.preventDefault();\n        event.stopPropagation();\n\n        var delta = 0;\n\n        if ( event.wheelDelta ) { // WebKit / Opera / Explorer 9\n\n            delta = event.wheelDelta / 40;\n\n        } else if ( event.detail ) { // Firefox\n\n            delta = - event.detail / 3;\n\n        }\n\n        //_this._zoomStart.y += delta * 0.01;\n        //_this._zoomStart.y = delta * 0.01;\n        _this._zoomStart.y = delta * 0.005;\n        _this.dispatchEvent( startEvent );\n        _this.dispatchEvent( endEvent );\n\n    }\n\n    function touchstart( event ) {\n\n        if ( _this.enabled === false ) return;\n\n        switch ( event.touches.length ) {\n            case 1:\n                _this._state = _this.STATE.TOUCH_ROTATE;\n                _this._rotateStart.copy( getMouseProjectionOnBall( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY ) );\n                _this._rotateEnd.copy( _this._rotateStart );\n                break;\n\n            case 2:\n                _this._state = _this.STATE.TOUCH_ZOOM_PAN;\n                var dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n                var dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n                _touchZoomDistanceEnd = _touchZoomDistanceStart = Math.sqrt( dx * dx + dy * dy );\n\n                var x = ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX ) / 2;\n                var y = ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY ) / 2;\n                _this._panStart.copy( getMouseOnScreen( x, y ) );\n                _this._panEnd.copy( _this._panStart );\n                break;\n\n            default:\n                _this._state = _this.STATE.NONE;\n\n        }\n        _this.dispatchEvent( startEvent );\n\n\n    }\n\n    function touchmove( event ) {\n\n        if ( _this.enabled === false ) return;\n\n        event.preventDefault();\n        event.stopPropagation();\n\n        switch ( event.touches.length ) {\n\n            case 1:\n                _this._rotateEnd.copy( getMouseProjectionOnBall( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY ) );\n                break;\n\n            case 2:\n                var dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n                var dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n                _touchZoomDistanceEnd = Math.sqrt( dx * dx + dy * dy );\n\n                var x = ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX ) / 2;\n                var y = ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY ) / 2;\n                _this._panEnd.copy( getMouseOnScreen( x, y ) );\n                break;\n\n            default:\n                _this._state = _this.STATE.NONE;\n\n        }\n\n    }\n\n    function touchend( event ) {\n\n        if ( _this.enabled === false ) return;\n\n        switch ( event.touches.length ) {\n\n            case 1:\n                _this._rotateEnd.copy( getMouseProjectionOnBall( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY ) );\n                _this._rotateStart.copy( _this._rotateEnd );\n                break;\n\n            case 2:\n                _touchZoomDistanceStart = _touchZoomDistanceEnd = 0;\n\n                var x = ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX ) / 2;\n                var y = ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY ) / 2;\n                _this._panEnd.copy( getMouseOnScreen( x, y ) );\n                _this._panStart.copy( _this._panEnd );\n                break;\n\n        }\n\n        _this._state = _this.STATE.NONE;\n        _this.dispatchEvent( endEvent );\n\n    }\n\n    this.domElement.addEventListener( 'contextmn', function ( event ) { event.preventDefault(); }, false );\n\n    this.domElement.addEventListener( 'mousedown', mousedown, false );\n\n    this.domElement.addEventListener( 'mousewheel', mousewheel, false );\n    this.domElement.addEventListener( 'DOMMouseScroll', mousewheel, false ); // firefox\n\n    this.domElement.addEventListener( 'touchstart', touchstart, false );\n    this.domElement.addEventListener( 'touchend', touchend, false );\n    this.domElement.addEventListener( 'touchmove', touchmove, false );\n\n    window.addEventListener( 'keydown', keydown, false );\n    window.addEventListener( 'keyup', keyup, false );\n\n    this.handleResize();\n\n    // force an update at start\n    this.update();\n\n};\n\nTHREE.TrackballControls.prototype = Object.create( THREE.EventDispatcher.prototype );\nTHREE.TrackballControls.prototype.constructor = THREE.TrackballControls;\n\n/*! OrthographicTrackballControls.js from http://threejs.org/\n * @author Eberhard Graether / http://egraether.com/\n * @author Mark Lundin  / http://mark-lundin.com\n * @author Patrick Fuller / http://patrick-fuller.com\n * modified by Jiyao Wang\n */\n\nTHREE.OrthographicTrackballControls = function ( object, domElement, icn3d ) {\n\n    var _this = this;\n    var STATE = { NONE: -1, ROTATE: 0, ZOOM: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_ZOOM_PAN: 4 };\n\n    this.object = object;\n    this.domElement = ( domElement !== undefined ) ? domElement : document;\n\n    // API\n    this.enabled = true;\n\n    this.screen = { left: 0, top: 0, width: 0, height: 0 };\n\n    // JW: the rotation speed of orthographic should be much less than that of perspective\n    //this.rotateSpeed = 1.0;\n    this.rotateSpeed = 0.5;\n    this.zoomSpeed = 1.2;\n\n    var zoomSpeedAdjust = 0.01;\n    this.zoomSpeed *= zoomSpeedAdjust;\n\n    //this.panSpeed = 0.3;\n    this.panSpeed = 0.03;\n\n    this.noRotate = false;\n    this.noZoom = false;\n    this.noPan = false;\n    this.noRoll = false;\n\n    this.staticMoving = false;\n    this.dynamicDampingFactor = 0.2;\n\n    this.keys = [ 65 /*A*/, 83 /*S*/, 68 /*D*/ ];\n\n    // internals\n\n    this.target = new THREE.Vector3();\n\n    var EPS = 0.000001;\n\n    var lastPosition = new THREE.Vector3();\n\n    this._state = STATE.NONE;\n    var _prevState = STATE.NONE;\n\n    var _eye = new THREE.Vector3();\n\n    this._rotateStart = new THREE.Vector3();\n    this._rotateEnd = new THREE.Vector3();\n\n    this._zoomStart = new THREE.Vector2();\n    this._zoomEnd = new THREE.Vector2();\n    var _zoomFactor = 1;\n\n    var _touchZoomDistanceStart = 0;\n    var _touchZoomDistanceEnd = 0;\n\n    this._panStart = new THREE.Vector2();\n    this._panEnd = new THREE.Vector2();\n\n    // for reset\n\n    this.target0 = this.target.clone();\n    this.position0 = this.object.position.clone();\n    this.up0 = this.object.up.clone();\n\n    this.left0 = this.object.left;\n    this.right0 = this.object.right;\n    this.top0 = this.object.top;\n    this.bottom0 = this.object.bottom;\n    this.center0 = new THREE.Vector2((this.left0 + this.right0) / 2.0, (this.top0 + this.bottom0) / 2.0);\n\n    // events\n\n    var changeEvent = { type: 'change' };\n    var startEvent = { type: 'start'};\n    var endEvent = { type: 'end'};\n\n\n    // methods\n\n    this.handleResize = function () {\n\n        if ( this.domElement === document ) {\n\n            this.screen.left = 0;\n            this.screen.top = 0;\n            this.screen.width = window.innerWidth;\n            this.screen.height = window.innerHeight;\n\n        } else {\n\n            var box = this.domElement.getBoundingClientRect();\n            // adjustments come from similar code in the jquery offset() function\n            var d = this.domElement.ownerDocument.documentElement;\n            this.screen.left = box.left + window.pageXOffset - d.clientLeft;\n            this.screen.top = box.top + window.pageYOffset - d.clientTop;\n            this.screen.width = box.width;\n            this.screen.height = box.height;\n        }\n\n        this.left0 = this.object.left;\n        this.right0 = this.object.right;\n        this.top0 = this.object.top;\n        this.bottom0 = this.object.bottom;\n        this.center0.set((this.left0 + this.right0) / 2.0, (this.top0 + this.bottom0) / 2.0);\n\n    };\n\n    this.handleEvent = function ( event ) {\n\n        if ( typeof this[ event.type ] === 'function' ) {\n\n            this[ event.type ]( event );\n\n        }\n\n    };\n\n    var getMouseOnScreen = ( function () {\n\n        var vector = new THREE.Vector2();\n\n        return function ( pageX, pageY ) {\n\n            vector.set(\n                ( pageX - _this.screen.left ) / _this.screen.width,\n                ( pageY - _this.screen.top ) / _this.screen.height\n            );\n\n            return vector;\n\n        };\n\n    }() );\n\n    var getMouseProjectionOnBall = ( function () {\n\n        var vector = new THREE.Vector3();\n        var objectUp = new THREE.Vector3();\n        var mouseOnBall = new THREE.Vector3();\n\n        return function ( pageX, pageY ) {\n\n            mouseOnBall.set(\n                ( pageX - _this.screen.width * 0.5 - _this.screen.left ) / (_this.screen.width*.5),\n                ( _this.screen.height * 0.5 + _this.screen.top - pageY ) / (_this.screen.height*.5),\n                0.0\n            );\n\n            var length = mouseOnBall.length();\n\n            if ( _this.noRoll ) {\n\n                if ( length < Math.SQRT1_2 ) {\n\n                    mouseOnBall.z = Math.sqrt( 1.0 - length*length );\n\n                } else {\n\n                    mouseOnBall.z = .5 / length;\n\n                }\n\n            } else if ( length > 1.0 ) {\n\n                mouseOnBall.normalize();\n\n            } else {\n\n                mouseOnBall.z = Math.sqrt( 1.0 - length * length );\n\n            }\n\n            _eye.copy( _this.object.position ).sub( _this.target );\n\n            vector.copy( _this.object.up ).setLength( mouseOnBall.y )\n            vector.add( objectUp.copy( _this.object.up ).cross( _eye ).setLength( mouseOnBall.x ) );\n            vector.add( _eye.setLength( mouseOnBall.z ) );\n\n            return vector;\n\n        };\n\n    }() );\n\n    this.rotateCamera = (function(quaternionIn, bUpdate){\n\n        var axis = new THREE.Vector3(),\n            quaternion = new THREE.Quaternion();\n\n        return function (quaternionIn, bUpdate) {\n\n            var angle;\n            if(quaternionIn === undefined) {\n              angle = Math.acos( _this._rotateStart.dot( _this._rotateEnd ) / _this._rotateStart.length() / _this._rotateEnd.length() );\n            }\n\n            //var angle = Math.acos( _this._rotateStart.dot( _this._rotateEnd ) / _this._rotateStart.length() / _this._rotateEnd.length() );\n\n            if ( angle || quaternionIn !== undefined) {\n                if(quaternionIn === undefined) {\n                  axis.crossVectors( _this._rotateStart, _this._rotateEnd ).normalize();\n\n                  angle *= _this.rotateSpeed;\n\n                  quaternion.setFromAxisAngle( axis, -angle );\n                }\n                else {\n                  quaternion.copy(quaternionIn);\n                }\n\n                // order matters in quaernion multiplication: http://www.cprogramming.com/tutorial/3d/quaternions.html\n                if(bUpdate === undefined || bUpdate === true) icn3d.quaternion.multiplyQuaternions(quaternion, icn3d.quaternion);\n\n                _eye.applyQuaternion( quaternion );\n                _this.object.up.applyQuaternion( quaternion );\n\n                _this._rotateEnd.applyQuaternion( quaternion );\n\n                if ( _this.staticMoving ) {\n\n                    _this._rotateStart.copy( _this._rotateEnd );\n\n                } else {\n\n                    quaternion.setFromAxisAngle( axis, angle * ( _this.dynamicDampingFactor - 1.0 ) );\n                    _this._rotateStart.applyQuaternion( quaternion );\n\n                }\n\n            }\n        }\n\n    }());\n\n    this.zoomCamera = function (zoomFactor, bUpdate) {\n\n        var factor;\n        if ( _this._state === STATE.TOUCH_ZOOM_PAN ) {\n\n            if(zoomFactor !== undefined) {\n              factor = zoomFactor;\n            }\n            else {\n\n              factor = _touchZoomDistanceStart / _touchZoomDistanceEnd;\n              _touchZoomDistanceStart = _touchZoomDistanceEnd;\n            }\n\n        } else {\n\n            if(zoomFactor !== undefined) {\n              factor = zoomFactor;\n            }\n            else {\n\n              factor = 1.0 + ( _this._zoomEnd.y - _this._zoomStart.y ) * _this.zoomSpeed / zoomSpeedAdjust;\n            }\n        }\n\n        if(bUpdate === undefined || bUpdate === true) icn3d._zoomFactor *= factor;\n\n        //if ( factor !== 1.0 && factor > 0.0 ) {\n        if ( factor !== 1.0 ) {\n\n            //_zoomFactor *= factor;\n            _zoomFactor = factor;\n\n            _this.object.left = _zoomFactor * _this.left0 + ( 1 - _zoomFactor ) *  _this.center0.x;\n            _this.object.right = _zoomFactor * _this.right0 + ( 1 - _zoomFactor ) *  _this.center0.x;\n            _this.object.top = _zoomFactor * _this.top0 + ( 1 - _zoomFactor ) *  _this.center0.y;\n            _this.object.bottom = _zoomFactor * _this.bottom0 + ( 1 - _zoomFactor ) *  _this.center0.y;\n\n            if ( _this.staticMoving ) {\n\n                _this._zoomStart.copy( _this._zoomEnd );\n\n            } else {\n\n                _this._zoomStart.y += ( _this._zoomEnd.y - _this._zoomStart.y ) * this.dynamicDampingFactor;\n\n            }\n\n        }\n\n    };\n\n    this.panCamera = (function(mouseChangeIn, bUpdate){\n\n        var mouseChange = new THREE.Vector2(),\n            objectUp = new THREE.Vector3(),\n            pan = new THREE.Vector3();\n\n        return function (mouseChangeIn, bUpdate) {\n\n            if(mouseChangeIn !== undefined) {\n              mouseChange = mouseChangeIn;\n\n              if(bUpdate === undefined || bUpdate === true) icn3d.mouseChange.add(mouseChangeIn);\n            }\n            else {\n              mouseChange.copy( _this._panEnd ).sub( _this._panStart );\n\n              if(bUpdate === undefined || bUpdate === true) icn3d.mouseChange.add( _this._panEnd ).sub( _this._panStart );\n            }\n\n            if ( mouseChange.lengthSq() ) {\n\n                mouseChange.multiplyScalar( _eye.length() * _this.panSpeed );\n\n                pan.copy( _eye ).cross( _this.object.up ).setLength( mouseChange.x );\n                pan.add( objectUp.copy( _this.object.up ).setLength( mouseChange.y ) );\n\n                _this.object.position.add( pan );\n                _this.target.add( pan );\n\n                if ( _this.staticMoving ) {\n\n                    _this._panStart.copy( _this._panEnd );\n\n                } else {\n\n                    _this._panStart.add( mouseChange.subVectors( _this._panEnd, _this._panStart ).multiplyScalar( _this.dynamicDampingFactor ) );\n\n                }\n\n            }\n        }\n\n    }());\n\n    this.update = function (para) {\n\n        _eye.subVectors( _this.object.position, _this.target );\n\n        if ( !_this.noRotate ) {\n\n            if(para !== undefined && para.quaternion !== undefined) {\n              _this.rotateCamera(para.quaternion, para.update);\n            }\n            else {\n              _this.rotateCamera();\n            }\n\n        }\n\n        if ( !_this.noZoom ) {\n\n            if(para !== undefined && para._zoomFactor !== undefined) {\n              _this.zoomCamera(para._zoomFactor, para.update);\n            }\n            else {\n              _this.zoomCamera();\n            }\n\n            _this.object.updateProjectionMatrix();\n\n        }\n\n        if ( !_this.noPan ) {\n\n            if(para !== undefined && para.mouseChange !== undefined) {\n              _this.panCamera(para.mouseChange, para.update);\n            }\n            else {\n              _this.panCamera();\n            }\n\n        }\n\n        _this.object.position.addVectors( _this.target, _eye );\n\n        _this.object.lookAt( _this.target );\n\n        if ( lastPosition.distanceToSquared( _this.object.position ) > EPS ) {\n\n            _this.dispatchEvent( changeEvent );\n\n            lastPosition.copy( _this.object.position );\n\n        }\n\n    };\n\n    this.reset = function () {\n\n        _this._state = STATE.NONE;\n        _prevState = STATE.NONE;\n\n        _this.target.copy( _this.target0 );\n        _this.object.position.copy( _this.position0 );\n        _this.object.up.copy( _this.up0 );\n\n        _eye.subVectors( _this.object.position, _this.target );\n\n        _this.object.left = _this.left0;\n        _this.object.right = _this.right0;\n        _this.object.top = _this.top0;\n        _this.object.bottom = _this.bottom0;\n\n        _this.object.lookAt( _this.target );\n\n        _this.dispatchEvent( changeEvent );\n\n        lastPosition.copy( _this.object.position );\n\n    };\n\n    // listeners\n\n    function keydown( event ) {\n\n        if ( _this.enabled === false ) return;\n\n        window.removeEventListener( 'keydown', keydown );\n\n        _prevState = _this._state;\n\n        if ( _this._state !== STATE.NONE ) {\n\n            return;\n\n        } else if ( event.keyCode === _this.keys[ STATE.ROTATE ] && !_this.noRotate ) {\n\n            _this._state = STATE.ROTATE;\n\n        } else if ( (event.keyCode === _this.keys[ STATE.ZOOM ]) && !_this.noZoom ) {\n\n            _this._state = STATE.ZOOM;\n\n        } else if ( (event.keyCode === _this.keys[ STATE.PAN ]) && !_this.noPan ) {\n\n            _this._state = STATE.PAN;\n\n        }\n\n    }\n\n    function keyup( event ) {\n\n        if ( _this.enabled === false ) return;\n\n        _this._state = _prevState;\n\n        window.addEventListener( 'keydown', keydown, false );\n\n    }\n\n    function mousedown( event ) {\n\n        if ( _this.enabled === false ) return;\n\n        event.preventDefault();\n        event.stopPropagation();\n\n        if ( _this._state === STATE.NONE ) {\n\n            _this._state = event.button;\n\n        }\n\n        if ( _this._state === STATE.ROTATE && !_this.noRotate ) {\n\n            _this._rotateStart.copy( getMouseProjectionOnBall( event.pageX, event.pageY ) );\n            _this._rotateEnd.copy( _this._rotateStart );\n\n        } else if ( _this._state === STATE.ZOOM && !_this.noZoom ) {\n\n            _this._zoomStart.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n            _this._zoomEnd.copy(_this._zoomStart);\n\n        } else if ( _this._state === STATE.PAN && !_this.noPan ) {\n\n            _this._panStart.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n            _this._panEnd.copy(_this._panStart)\n\n        }\n\n        document.addEventListener( 'mousemove', mousemove, false );\n        document.addEventListener( 'mouseup', mouseup, false );\n\n        _this.dispatchEvent( startEvent );\n\n    }\n\n    function mousemove( event ) {\n\n        if ( _this.enabled === false ) return;\n\n        event.preventDefault();\n        event.stopPropagation();\n\n        if ( _this._state === STATE.ROTATE && !_this.noRotate ) {\n\n            _this._rotateEnd.copy( getMouseProjectionOnBall( event.pageX, event.pageY ) );\n\n        } else if ( _this._state === STATE.ZOOM && !_this.noZoom ) {\n\n            _this._zoomEnd.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\n        } else if ( _this._state === STATE.PAN && !_this.noPan ) {\n\n            _this._panEnd.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\n        }\n\n    }\n\n    function mouseup( event ) {\n\n        if ( _this.enabled === false ) return;\n\n        event.preventDefault();\n        event.stopPropagation();\n\n        _this._state = STATE.NONE;\n\n        document.removeEventListener( 'mousemove', mousemove );\n        document.removeEventListener( 'mouseup', mouseup );\n        _this.dispatchEvent( endEvent );\n\n    }\n\n    function mousewheel( event ) {\n\n        if ( _this.enabled === false ) return;\n\n        event.preventDefault();\n        event.stopPropagation();\n\n        var delta = 0;\n\n        if ( event.wheelDelta ) { // WebKit / Opera / Explorer 9\n\n            delta = event.wheelDelta / 40;\n\n        } else if ( event.detail ) { // Firefox\n\n            delta = - event.detail / 3;\n\n        }\n\n        //_this._zoomStart.y += delta * 0.01;\n        _this._zoomStart.y = delta * 0.01;\n        _this.dispatchEvent( startEvent );\n        _this.dispatchEvent( endEvent );\n\n    }\n\n    function touchstart( event ) {\n\n        if ( _this.enabled === false ) return;\n\n        switch ( event.touches.length ) {\n\n            case 1:\n                _this._state = STATE.TOUCH_ROTATE;\n                _this._rotateStart.copy( getMouseProjectionOnBall( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY ) );\n                _this._rotateEnd.copy( _this._rotateStart );\n                break;\n\n            case 2:\n                _this._state = STATE.TOUCH_ZOOM_PAN;\n                var dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n                var dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n                _touchZoomDistanceEnd = _touchZoomDistanceStart = Math.sqrt( dx * dx + dy * dy );\n\n                var x = ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX ) / 2;\n                var y = ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY ) / 2;\n                _this._panStart.copy( getMouseOnScreen( x, y ) );\n                _this._panEnd.copy( _this._panStart );\n                break;\n\n            default:\n                _this._state = STATE.NONE;\n\n        }\n        _this.dispatchEvent( startEvent );\n\n\n    }\n\n    function touchmove( event ) {\n\n        if ( _this.enabled === false ) return;\n\n        event.preventDefault();\n        event.stopPropagation();\n\n        switch ( event.touches.length ) {\n\n            case 1:\n                _this._rotateEnd.copy( getMouseProjectionOnBall( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY ) );\n                break;\n\n            case 2:\n                var dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n                var dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n                _touchZoomDistanceEnd = Math.sqrt( dx * dx + dy * dy );\n\n                var x = ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX ) / 2;\n                var y = ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY ) / 2;\n                _this._panEnd.copy( getMouseOnScreen( x, y ) );\n                break;\n\n            default:\n                _this._state = STATE.NONE;\n\n        }\n\n    }\n\n    function touchend( event ) {\n\n        if ( _this.enabled === false ) return;\n\n        switch ( event.touches.length ) {\n\n            case 1:\n                _this._rotateEnd.copy( getMouseProjectionOnBall( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY ) );\n                _this._rotateStart.copy( _this._rotateEnd );\n                break;\n\n            case 2:\n                _touchZoomDistanceStart = _touchZoomDistanceEnd = 0;\n\n                var x = ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX ) / 2;\n                var y = ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY ) / 2;\n                _this._panEnd.copy( getMouseOnScreen( x, y ) );\n                _this._panStart.copy( _this._panEnd );\n                break;\n\n        }\n\n        _this._state = STATE.NONE;\n        _this.dispatchEvent( endEvent );\n\n    }\n\n    this.domElement.addEventListener( 'contextmn', function ( event ) { event.preventDefault(); }, false );\n\n    this.domElement.addEventListener( 'mousedown', mousedown, false );\n\n    this.domElement.addEventListener( 'mousewheel', mousewheel, false );\n    this.domElement.addEventListener( 'DOMMouseScroll', mousewheel, false ); // firefox\n\n    this.domElement.addEventListener( 'touchstart', touchstart, false );\n    this.domElement.addEventListener( 'touchend', touchend, false );\n    this.domElement.addEventListener( 'touchmove', touchmove, false );\n\n    window.addEventListener( 'keydown', keydown, false );\n    window.addEventListener( 'keyup', keyup, false );\n\n    this.handleResize();\n\n    // force an update at start\n    this.update();\n\n};\n\nTHREE.OrthographicTrackballControls.prototype = Object.create( THREE.EventDispatcher.prototype );\nTHREE.OrthographicTrackballControls.prototype.constructor = THREE.OrthographicTrackballControls;\n\n/*! Projector.js from http://threejs.org/\n * @author mrdoob / http://mrdoob.com/\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author julianwa / https://github.com/julianwa\n */\n\nTHREE.RenderableObject = function () {\n\n    this.id = 0;\n\n    this.object = null;\n    this.z = 0;\n\n};\n\n//\n\nTHREE.RenderableFace = function () {\n\n    this.id = 0;\n\n    this.v1 = new THREE.RenderableVertex();\n    this.v2 = new THREE.RenderableVertex();\n    this.v3 = new THREE.RenderableVertex();\n\n    this.normalModel = new THREE.Vector3();\n\n    this.vertexNormalsModel = [ new THREE.Vector3(), new THREE.Vector3(), new THREE.Vector3() ];\n    this.vertexNormalsLength = 0;\n\n    this.color = new THREE.Color();\n    this.material = null;\n    this.uvs = [ new THREE.Vector2(), new THREE.Vector2(), new THREE.Vector2() ];\n\n    this.z = 0;\n\n};\n\n//\n\nTHREE.RenderableVertex = function () {\n\n    this.position = new THREE.Vector3();\n    this.positionWorld = new THREE.Vector3();\n    this.positionScreen = new THREE.Vector4();\n\n    this.visible = true;\n\n};\n\nTHREE.RenderableVertex.prototype.copy = function ( vertex ) {\n\n    this.positionWorld.copy( vertex.positionWorld );\n    this.positionScreen.copy( vertex.positionScreen );\n\n};\n\n//\n\nTHREE.RenderableLine = function () {\n\n    this.id = 0;\n\n    this.v1 = new THREE.RenderableVertex();\n    this.v2 = new THREE.RenderableVertex();\n\n    this.vertexColors = [ new THREE.Color(), new THREE.Color() ];\n    this.material = null;\n\n    this.z = 0;\n\n};\n\n//\n\nTHREE.RenderableSprite = function () {\n\n    this.id = 0;\n\n    this.object = null;\n\n    this.x = 0;\n    this.y = 0;\n    this.z = 0;\n\n    this.rotation = 0;\n    this.scale = new THREE.Vector2();\n\n    this.material = null;\n\n};\n\n//\n\nTHREE.Projector = function () {\n\n    var _object, _objectCount, _objectPool = [], _objectPoolLength = 0,\n    _vertex, _vertexCount, _vertexPool = [], _vertexPoolLength = 0,\n    _face, _faceCount, _facePool = [], _facePoolLength = 0,\n    _line, _lineCount, _linePool = [], _linePoolLength = 0,\n    _sprite, _spriteCount, _spritePool = [], _spritePoolLength = 0,\n\n    _renderData = { objects: [], lights: [], elements: [] },\n\n    _vA = new THREE.Vector3(),\n    _vB = new THREE.Vector3(),\n    _vC = new THREE.Vector3(),\n\n    _vector3 = new THREE.Vector3(),\n    _vector4 = new THREE.Vector4(),\n\n    _clipBox = new THREE.Box3( new THREE.Vector3( - 1, - 1, - 1 ), new THREE.Vector3( 1, 1, 1 ) ),\n    _boundingBox = new THREE.Box3(),\n    _pnts3 = new Array( 3 ),\n    _pnts4 = new Array( 4 ),\n\n    _viewMatrix = new THREE.Matrix4(),\n    _viewProjectionMatrix = new THREE.Matrix4(),\n\n    _modelMatrix,\n    _modelViewProjectionMatrix = new THREE.Matrix4(),\n\n    _normalMatrix = new THREE.Matrix3(),\n\n    _frustum = new THREE.Frustum(),\n\n    _clippedVertex1PositionScreen = new THREE.Vector4(),\n    _clippedVertex2PositionScreen = new THREE.Vector4();\n\n    //\n\n    this.projectVector = function ( vector, camera ) {\n\n        console.warn( 'THREE.Projector: .projectVector() is now vector.project().' );\n        vector.project( camera );\n\n    };\n\n    this.unprojectVector = function ( vector, camera ) {\n\n        console.warn( 'THREE.Projector: .unprojectVector() is now vector.unproject().' );\n        vector.unproject( camera );\n\n    };\n\n    this.pkRay = function ( vector, camera ) {\n\n        console.error( 'THREE.Projector: .pkRay() is now raycaster.setFromCamera().' );\n\n    };\n\n    //\n\n    var RenderList = function () {\n\n        var normals = [];\n        var uvs = [];\n\n        var object = null;\n        var material = null;\n\n        var normalMatrix = new THREE.Matrix3();\n\n        var setObject = function ( value ) {\n\n            object = value;\n            material = object.material;\n\n            normalMatrix.getNormalMatrix( object.matrixWorld );\n\n            normals.length = 0;\n            uvs.length = 0;\n\n        };\n\n        var projectVertex = function ( vertex ) {\n\n            var position = vertex.position;\n            var positionWorld = vertex.positionWorld;\n            var positionScreen = vertex.positionScreen;\n\n            positionWorld.copy( position ).applyMatrix4( _modelMatrix );\n            positionScreen.copy( positionWorld ).applyMatrix4( _viewProjectionMatrix );\n\n            var invW = 1 / positionScreen.w;\n\n            positionScreen.x *= invW;\n            positionScreen.y *= invW;\n            positionScreen.z *= invW;\n\n            vertex.visible = positionScreen.x >= - 1 && positionScreen.x <= 1 &&\n                     positionScreen.y >= - 1 && positionScreen.y <= 1 &&\n                     positionScreen.z >= - 1 && positionScreen.z <= 1;\n\n        };\n\n        var pushVertex = function ( x, y, z ) {\n\n            _vertex = getNextVertexInPool();\n            _vertex.position.set( x, y, z );\n\n            projectVertex( _vertex );\n\n        };\n\n        var pushNormal = function ( x, y, z ) {\n\n            normals.push( x, y, z );\n\n        };\n\n        var pushUv = function ( x, y ) {\n\n            uvs.push( x, y );\n\n        };\n\n        var checkTriangleVisibility = function ( v1, v2, v3 ) {\n\n            if ( v1.visible === true || v2.visible === true || v3.visible === true ) return true;\n\n            _pnts3[ 0 ] = v1.positionScreen;\n            _pnts3[ 1 ] = v2.positionScreen;\n            _pnts3[ 2 ] = v3.positionScreen;\n\n            return _clipBox.isIntersectionBox( _boundingBox.setFromPoints( _pnts3 ) );\n\n        };\n\n        var checkBackfaceCulling = function ( v1, v2, v3 ) {\n\n            return ( ( v3.positionScreen.x - v1.positionScreen.x ) *\n                    ( v2.positionScreen.y - v1.positionScreen.y ) -\n                    ( v3.positionScreen.y - v1.positionScreen.y ) *\n                    ( v2.positionScreen.x - v1.positionScreen.x ) ) < 0;\n\n        };\n\n        var pushLine = function ( a, b ) {\n\n            var v1 = _vertexPool[ a ];\n            var v2 = _vertexPool[ b ];\n\n            _line = getNextLineInPool();\n\n            _line.id = object.id;\n            _line.v1.copy( v1 );\n            _line.v2.copy( v2 );\n            _line.z = ( v1.positionScreen.z + v2.positionScreen.z ) / 2;\n\n            _line.material = object.material;\n\n            _renderData.elements.push( _line );\n\n        };\n\n        var pushTriangle = function ( a, b, c ) {\n\n            var v1 = _vertexPool[ a ];\n            var v2 = _vertexPool[ b ];\n            var v3 = _vertexPool[ c ];\n\n            if ( checkTriangleVisibility( v1, v2, v3 ) === false ) return;\n\n            if ( material.side === THREE.DoubleSide || checkBackfaceCulling( v1, v2, v3 ) === true ) {\n\n                _face = getNextFaceInPool();\n\n                _face.id = object.id;\n                _face.v1.copy( v1 );\n                _face.v2.copy( v2 );\n                _face.v3.copy( v3 );\n                _face.z = ( v1.positionScreen.z + v2.positionScreen.z + v3.positionScreen.z ) / 3;\n\n                for ( var i = 0; i < 3; i ++ ) {\n\n                    var offset = arguments[ i ] * 3;\n                    var normal = _face.vertexNormalsModel[ i ];\n\n                    normal.set( normals[ offset ], normals[ offset + 1 ], normals[ offset + 2 ] );\n                    normal.applyMatrix3( normalMatrix ).normalize();\n\n                    var offset2 = arguments[ i ] * 2;\n\n                    var uv = _face.uvs[ i ];\n                    uv.set( uvs[ offset2 ], uvs[ offset2 + 1 ] );\n\n                }\n\n                _face.vertexNormalsLength = 3;\n\n                _face.material = object.material;\n\n                _renderData.elements.push( _face );\n\n            }\n\n        };\n\n        return {\n            setObject: setObject,\n            projectVertex: projectVertex,\n            checkTriangleVisibility: checkTriangleVisibility,\n            checkBackfaceCulling: checkBackfaceCulling,\n            pushVertex: pushVertex,\n            pushNormal: pushNormal,\n            pushUv: pushUv,\n            pushLine: pushLine,\n            pushTriangle: pushTriangle\n        }\n\n    };\n\n    var renderList = new RenderList();\n\n    this.projectScene = function ( scene, camera, sortObjects, sortElements ) {\n\n        _faceCount = 0;\n        _lineCount = 0;\n        _spriteCount = 0;\n\n        _renderData.elements.length = 0;\n\n        if ( scene.autoUpdate === true ) scene.updateMatrixWorld();\n        if ( camera.parent === undefined ) camera.updateMatrixWorld();\n\n        _viewMatrix.copy( camera.matrixWorldInverse.getInverse( camera.matrixWorld ) );\n        _viewProjectionMatrix.multiplyMatrices( camera.projectionMatrix, _viewMatrix );\n\n        _frustum.setFromMatrix( _viewProjectionMatrix );\n\n        //\n\n        _objectCount = 0;\n\n        _renderData.objects.length = 0;\n        _renderData.lights.length = 0;\n\n        scene.traverseVisible( function ( object ) {\n\n            if ( object instanceof THREE.Light ) {\n\n                _renderData.lights.push( object );\n\n            } else if ( object instanceof THREE.Mesh || object instanceof THREE.Line || object instanceof THREE.Sprite ) {\n\n                if ( object.material.visible === false ) return;\n\n                if ( object.frustumCulled === false || _frustum.intersectsObject( object ) === true ) {\n\n                    _object = getNextObjectInPool();\n                    _object.id = object.id;\n                    _object.object = object;\n\n                    _vector3.setFromMatrixPosition( object.matrixWorld );\n                    _vector3.applyProjection( _viewProjectionMatrix );\n                    _object.z = _vector3.z;\n\n                    _renderData.objects.push( _object );\n\n                }\n\n            }\n\n        } );\n\n        if ( sortObjects === true ) {\n\n            _renderData.objects.sort( painterSort );\n\n        }\n\n        //\n\n        for ( var o = 0, ol = _renderData.objects.length; o < ol; o ++ ) {\n\n            var object = _renderData.objects[ o ].object;\n            var geometry = object.geometry;\n\n            renderList.setObject( object );\n\n            _modelMatrix = object.matrixWorld;\n\n            _vertexCount = 0;\n\n            if ( object instanceof THREE.Mesh ) {\n\n                if ( geometry instanceof THREE.BufferGeometry ) {\n\n                    var attributes = geometry.attributes;\n                    var offsets = geometry.offsets;\n\n                    if ( attributes.position === undefined ) continue;\n\n                    var positions = attributes.position.array;\n\n                    for ( var i = 0, l = positions.length; i < l; i += 3 ) {\n\n                        renderList.pushVertex( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );\n\n                    }\n\n                    if ( attributes.normal !== undefined ) {\n\n                        var normals = attributes.normal.array;\n\n                        for ( var i = 0, l = normals.length; i < l; i += 3 ) {\n\n                            renderList.pushNormal( normals[ i ], normals[ i + 1 ], normals[ i + 2 ] );\n\n                        }\n\n                    }\n\n                    if ( attributes.uv !== undefined ) {\n\n                        var uvs = attributes.uv.array;\n\n                        for ( var i = 0, l = uvs.length; i < l; i += 2 ) {\n\n                            renderList.pushUv( uvs[ i ], uvs[ i + 1 ] );\n\n                        }\n\n                    }\n\n                    if ( attributes.index !== undefined ) {\n\n                        var indices = attributes.index.array;\n\n                        if ( offsets.length > 0 ) {\n\n                            for ( var o = 0; o < offsets.length; o ++ ) {\n\n                                var offset = offsets[ o ];\n                                var index = offset.index;\n\n                                for ( var i = offset.start, l = offset.start + offset.count; i < l; i += 3 ) {\n\n                                    renderList.pushTriangle( indices[ i ] + index, indices[ i + 1 ] + index, indices[ i + 2 ] + index );\n\n                                }\n\n                            }\n\n                        } else {\n\n                            for ( var i = 0, l = indices.length; i < l; i += 3 ) {\n\n                                renderList.pushTriangle( indices[ i ], indices[ i + 1 ], indices[ i + 2 ] );\n\n                            }\n\n                        }\n\n                    } else {\n\n                        for ( var i = 0, l = positions.length / 3; i < l; i += 3 ) {\n\n                            renderList.pushTriangle( i, i + 1, i + 2 );\n\n                        }\n\n                    }\n\n                } else if ( geometry instanceof THREE.Geometry ) {\n\n                    var vertices = geometry.vertices;\n                    var faces = geometry.faces;\n                    var faceVertexUvs = geometry.faceVertexUvs[ 0 ];\n\n                    _normalMatrix.getNormalMatrix( _modelMatrix );\n\n                    var isFaceMaterial = object.material instanceof THREE.MeshFaceMaterial;\n                    var objectMaterials = isFaceMaterial === true ? object.material : null;\n\n                    for ( var v = 0, vl = vertices.length; v < vl; v ++ ) {\n\n                        var vertex = vertices[ v ];\n                        renderList.pushVertex( vertex.x, vertex.y, vertex.z );\n\n                    }\n\n                    for ( var f = 0, fl = faces.length; f < fl; f ++ ) {\n\n                        var face = faces[ f ];\n\n                        var material = isFaceMaterial === true\n                             ? objectMaterials.materials[ face.materialIndex ]\n                             : object.material;\n\n                        if ( material === undefined ) continue;\n\n                        var side = material.side;\n\n                        var v1 = _vertexPool[ face.a ];\n                        var v2 = _vertexPool[ face.b ];\n                        var v3 = _vertexPool[ face.c ];\n\n                        if ( material.morphTargets === true ) {\n\n                            var morphTargets = geometry.morphTargets;\n                            var morphInfluences = object.morphTargetInfluences;\n\n                            var v1p = v1.position;\n                            var v2p = v2.position;\n                            var v3p = v3.position;\n\n                            _vA.set( 0, 0, 0 );\n                            _vB.set( 0, 0, 0 );\n                            _vC.set( 0, 0, 0 );\n\n                            for ( var t = 0, tl = morphTargets.length; t < tl; t ++ ) {\n\n                                var influence = morphInfluences[ t ];\n\n                                if ( influence === 0 ) continue;\n\n                                var targets = morphTargets[ t ].vertices;\n\n                                _vA.x += ( targets[ face.a ].x - v1p.x ) * influence;\n                                _vA.y += ( targets[ face.a ].y - v1p.y ) * influence;\n                                _vA.z += ( targets[ face.a ].z - v1p.z ) * influence;\n\n                                _vB.x += ( targets[ face.b ].x - v2p.x ) * influence;\n                                _vB.y += ( targets[ face.b ].y - v2p.y ) * influence;\n                                _vB.z += ( targets[ face.b ].z - v2p.z ) * influence;\n\n                                _vC.x += ( targets[ face.c ].x - v3p.x ) * influence;\n                                _vC.y += ( targets[ face.c ].y - v3p.y ) * influence;\n                                _vC.z += ( targets[ face.c ].z - v3p.z ) * influence;\n\n                            }\n\n                            v1.position.add( _vA );\n                            v2.position.add( _vB );\n                            v3.position.add( _vC );\n\n                            renderList.projectVertex( v1 );\n                            renderList.projectVertex( v2 );\n                            renderList.projectVertex( v3 );\n\n                        }\n\n                        if ( renderList.checkTriangleVisibility( v1, v2, v3 ) === false ) continue;\n\n                        var visible = renderList.checkBackfaceCulling( v1, v2, v3 );\n\n                        if ( side !== THREE.DoubleSide ) {\n                            if ( side === THREE.FrontSide && visible === false ) continue;\n                            if ( side === THREE.BackSide && visible === true ) continue;\n                        }\n\n                        _face = getNextFaceInPool();\n\n                        _face.id = object.id;\n                        _face.v1.copy( v1 );\n                        _face.v2.copy( v2 );\n                        _face.v3.copy( v3 );\n\n                        _face.normalModel.copy( face.normal );\n\n                        if ( visible === false && ( side === THREE.BackSide || side === THREE.DoubleSide ) ) {\n\n                            _face.normalModel.negate();\n\n                        }\n\n                        _face.normalModel.applyMatrix3( _normalMatrix ).normalize();\n\n                        var faceVertexNormals = face.vertexNormals;\n\n                        for ( var n = 0, nl = Math.min( faceVertexNormals.length, 3 ); n < nl; n ++ ) {\n\n                            var normalModel = _face.vertexNormalsModel[ n ];\n                            normalModel.copy( faceVertexNormals[ n ] );\n\n                            if ( visible === false && ( side === THREE.BackSide || side === THREE.DoubleSide ) ) {\n\n                                normalModel.negate();\n\n                            }\n\n                            normalModel.applyMatrix3( _normalMatrix ).normalize();\n\n                        }\n\n                        _face.vertexNormalsLength = faceVertexNormals.length;\n\n                        var vertexUvs = faceVertexUvs[ f ];\n\n                        if ( vertexUvs !== undefined ) {\n\n                            for ( var u = 0; u < 3; u ++ ) {\n\n                                _face.uvs[ u ].copy( vertexUvs[ u ] );\n\n                            }\n\n                        }\n\n                        _face.color = face.color;\n                        _face.material = material;\n\n                        _face.z = ( v1.positionScreen.z + v2.positionScreen.z + v3.positionScreen.z ) / 3;\n\n                        _renderData.elements.push( _face );\n\n                    }\n\n                }\n\n            } else if ( object instanceof THREE.Line ) {\n\n                if ( geometry instanceof THREE.BufferGeometry ) {\n\n                    var attributes = geometry.attributes;\n\n                    if ( attributes.position !== undefined ) {\n\n                        var positions = attributes.position.array;\n\n                        for ( var i = 0, l = positions.length; i < l; i += 3 ) {\n\n                            renderList.pushVertex( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );\n\n                        }\n\n                        if ( attributes.index !== undefined ) {\n\n                            var indices = attributes.index.array;\n\n                            for ( var i = 0, l = indices.length; i < l; i += 2 ) {\n\n                                renderList.pushLine( indices[ i ], indices[ i + 1 ] );\n\n                            }\n\n                        } else {\n\n                            var step = object.mode === THREE.LinePieces ? 2 : 1;\n\n                            for ( var i = 0, l = ( positions.length / 3 ) - 1; i < l; i += step ) {\n\n                                renderList.pushLine( i, i + 1 );\n\n                            }\n\n                        }\n\n                    }\n\n                } else if ( geometry instanceof THREE.Geometry ) {\n\n                    _modelViewProjectionMatrix.multiplyMatrices( _viewProjectionMatrix, _modelMatrix );\n\n                    var vertices = object.geometry.vertices;\n\n                    if ( vertices.length === 0 ) continue;\n\n                    v1 = getNextVertexInPool();\n                    v1.positionScreen.copy( vertices[ 0 ] ).applyMatrix4( _modelViewProjectionMatrix );\n\n                    // Handle LineStrip and LinePieces\n                    var step = object.mode === THREE.LinePieces ? 2 : 1;\n\n                    for ( var v = 1, vl = vertices.length; v < vl; v ++ ) {\n\n                        v1 = getNextVertexInPool();\n                        v1.positionScreen.copy( vertices[ v ] ).applyMatrix4( _modelViewProjectionMatrix );\n\n                        if ( ( v + 1 ) % step > 0 ) continue;\n\n                        v2 = _vertexPool[ _vertexCount - 2 ];\n\n                        _clippedVertex1PositionScreen.copy( v1.positionScreen );\n                        _clippedVertex2PositionScreen.copy( v2.positionScreen );\n\n                        if ( clipLine( _clippedVertex1PositionScreen, _clippedVertex2PositionScreen ) === true ) {\n\n                            // Perform the perspective divide\n                            _clippedVertex1PositionScreen.multiplyScalar( 1 / _clippedVertex1PositionScreen.w );\n                            _clippedVertex2PositionScreen.multiplyScalar( 1 / _clippedVertex2PositionScreen.w );\n\n                            _line = getNextLineInPool();\n\n                            _line.id = object.id;\n                            _line.v1.positionScreen.copy( _clippedVertex1PositionScreen );\n                            _line.v2.positionScreen.copy( _clippedVertex2PositionScreen );\n\n                            _line.z = Math.max( _clippedVertex1PositionScreen.z, _clippedVertex2PositionScreen.z );\n\n                            _line.material = object.material;\n\n                            if ( object.material.vertexColors === THREE.VertexColors ) {\n\n                                _line.vertexColors[ 0 ].copy( object.geometry.colors[ v ] );\n                                _line.vertexColors[ 1 ].copy( object.geometry.colors[ v - 1 ] );\n\n                            }\n\n                            _renderData.elements.push( _line );\n\n                        }\n\n                    }\n\n                }\n\n            } else if ( object instanceof THREE.Sprite ) {\n\n                _vector4.set( _modelMatrix.elements[ 12 ], _modelMatrix.elements[ 13 ], _modelMatrix.elements[ 14 ], 1 );\n                _vector4.applyMatrix4( _viewProjectionMatrix );\n\n                var invW = 1 / _vector4.w;\n\n                _vector4.z *= invW;\n\n                if ( _vector4.z >= - 1 && _vector4.z <= 1 ) {\n\n                    _sprite = getNextSpriteInPool();\n                    _sprite.id = object.id;\n                    _sprite.x = _vector4.x * invW;\n                    _sprite.y = _vector4.y * invW;\n                    _sprite.z = _vector4.z;\n                    _sprite.object = object;\n\n                    _sprite.rotation = object.rotation;\n\n                    _sprite.scale.x = object.scale.x * Math.abs( _sprite.x - ( _vector4.x + camera.projectionMatrix.elements[ 0 ] ) / ( _vector4.w + camera.projectionMatrix.elements[ 12 ] ) );\n                    _sprite.scale.y = object.scale.y * Math.abs( _sprite.y - ( _vector4.y + camera.projectionMatrix.elements[ 5 ] ) / ( _vector4.w + camera.projectionMatrix.elements[ 13 ] ) );\n\n                    _sprite.material = object.material;\n\n                    _renderData.elements.push( _sprite );\n\n                }\n\n            }\n\n        }\n\n        if ( sortElements === true ) {\n\n            _renderData.elements.sort( painterSort );\n\n        }\n\n        return _renderData;\n\n    };\n\n    // Pools\n\n    function getNextObjectInPool() {\n\n        if ( _objectCount === _objectPoolLength ) {\n\n            var object = new THREE.RenderableObject();\n            _objectPool.push( object );\n            _objectPoolLength ++;\n            _objectCount ++;\n            return object;\n\n        }\n\n        return _objectPool[ _objectCount ++ ];\n\n    }\n\n    function getNextVertexInPool() {\n\n        if ( _vertexCount === _vertexPoolLength ) {\n\n            var vertex = new THREE.RenderableVertex();\n            _vertexPool.push( vertex );\n            _vertexPoolLength ++;\n            _vertexCount ++;\n            return vertex;\n\n        }\n\n        return _vertexPool[ _vertexCount ++ ];\n\n    }\n\n    function getNextFaceInPool() {\n\n        if ( _faceCount === _facePoolLength ) {\n\n            var face = new THREE.RenderableFace();\n            _facePool.push( face );\n            _facePoolLength ++;\n            _faceCount ++;\n            return face;\n\n        }\n\n        return _facePool[ _faceCount ++ ];\n\n\n    }\n\n    function getNextLineInPool() {\n\n        if ( _lineCount === _linePoolLength ) {\n\n            var line = new THREE.RenderableLine();\n            _linePool.push( line );\n            _linePoolLength ++;\n            _lineCount ++\n            return line;\n\n        }\n\n        return _linePool[ _lineCount ++ ];\n\n    }\n\n    function getNextSpriteInPool() {\n\n        if ( _spriteCount === _spritePoolLength ) {\n\n            var sprite = new THREE.RenderableSprite();\n            _spritePool.push( sprite );\n            _spritePoolLength ++;\n            _spriteCount ++\n            return sprite;\n\n        }\n\n        return _spritePool[ _spriteCount ++ ];\n\n    }\n\n    //\n\n    function painterSort( a, b ) {\n\n        if ( a.z !== b.z ) {\n\n            return b.z - a.z;\n\n        } else if ( a.id !== b.id ) {\n\n            return a.id - b.id;\n\n        } else {\n\n            return 0;\n\n        }\n\n    }\n\n    function clipLine( s1, s2 ) {\n\n        var alpha1 = 0, alpha2 = 1,\n\n        // Calculate the boundary coordinate of each vertex for the near and far clip planes,\n        // Z = -1 and Z = +1, respectively.\n        bc1near =  s1.z + s1.w,\n        bc2near =  s2.z + s2.w,\n        bc1far =  - s1.z + s1.w,\n        bc2far =  - s2.z + s2.w;\n\n        if ( bc1near >= 0 && bc2near >= 0 && bc1far >= 0 && bc2far >= 0 ) {\n\n            // Both vertices lie entirely within all clip planes.\n            return true;\n\n        } else if ( ( bc1near < 0 && bc2near < 0 ) || ( bc1far < 0 && bc2far < 0 ) ) {\n\n            // Both vertices lie entirely outside one of the clip planes.\n            return false;\n\n        } else {\n\n            // The line segment spans at least one clip plane.\n\n            if ( bc1near < 0 ) {\n\n                // v1 lies outside the near plane, v2 inside\n                alpha1 = Math.max( alpha1, bc1near / ( bc1near - bc2near ) );\n\n            } else if ( bc2near < 0 ) {\n\n                // v2 lies outside the near plane, v1 inside\n                alpha2 = Math.min( alpha2, bc1near / ( bc1near - bc2near ) );\n\n            }\n\n            if ( bc1far < 0 ) {\n\n                // v1 lies outside the far plane, v2 inside\n                alpha1 = Math.max( alpha1, bc1far / ( bc1far - bc2far ) );\n\n            } else if ( bc2far < 0 ) {\n\n                // v2 lies outside the far plane, v2 inside\n                alpha2 = Math.min( alpha2, bc1far / ( bc1far - bc2far ) );\n\n            }\n\n            if ( alpha2 < alpha1 ) {\n\n                // The line segment spans two boundaries, but is outside both of them.\n                // (This can't happen when we're only clipping against just near/far but good\n                //  to leave the check here for future usage if other clip planes are added.)\n                return false;\n\n            } else {\n\n                // Update the s1 and s2 vertices to match the clipped line segment.\n                s1.lerp( s2, alpha1 );\n                s2.lerp( s1, 1 - alpha2 );\n\n                return true;\n\n            }\n\n        }\n\n    }\n\n};\n\n!function(r,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?t(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],t):t(r.MMTF=r.MMTF||{})}(this,function(r){\"use strict\";function t(r,t,n){for(var e=(r.byteLength,0),i=n.length;i>e;e++){var o=n.charCodeAt(e);if(128>o)r.setUint8(t++,o>>>0&127|0);else if(2048>o)r.setUint8(t++,o>>>6&31|192),r.setUint8(t++,o>>>0&63|128);else if(65536>o)r.setUint8(t++,o>>>12&15|224),r.setUint8(t++,o>>>6&63|128),r.setUint8(t++,o>>>0&63|128);else{if(!(1114112>o))throw new Error(\"bad codepoint \"+o);r.setUint8(t++,o>>>18&7|240),r.setUint8(t++,o>>>12&63|128),r.setUint8(t++,o>>>6&63|128),r.setUint8(t++,o>>>0&63|128)}}}function n(r){for(var t=0,n=0,e=r.length;e>n;n++){var i=r.charCodeAt(n);if(128>i)t+=1;else if(2048>i)t+=2;else if(65536>i)t+=3;else{if(!(1114112>i))throw new Error(\"bad codepoint \"+i);t+=4}}return t}function e(r,i,o){var a=typeof r;if(\"string\"===a){var u=n(r);if(32>u)return i.setUint8(o,160|u),t(i,o+1,r),1+u;if(256>u)return i.setUint8(o,217),i.setUint8(o+1,u),t(i,o+2,r),2+u;if(65536>u)return i.setUint8(o,218),i.setUint16(o+1,u),t(i,o+3,r),3+u;if(4294967296>u)return i.setUint8(o,219),i.setUint32(o+1,u),t(i,o+5,r),5+u}if(r instanceof Uint8Array){var u=r.byteLength,s=new Uint8Array(i.buffer);if(256>u)return i.setUint8(o,196),i.setUint8(o+1,u),s.set(r,o+2),2+u;if(65536>u)return i.setUint8(o,197),i.setUint16(o+1,u),s.set(r,o+3),3+u;if(4294967296>u)return i.setUint8(o,198),i.setUint32(o+1,u),s.set(r,o+5),5+u}if(\"number\"===a){if(!isFinite(r))throw new Error(\"Number not finite: \"+r);if(Math.floor(r)!==r)return i.setUint8(o,203),i.setFloat64(o+1,r),9;if(r>=0){if(128>r)return i.setUint8(o,r),1;if(256>r)return i.setUint8(o,204),i.setUint8(o+1,r),2;if(65536>r)return i.setUint8(o,205),i.setUint16(o+1,r),3;if(4294967296>r)return i.setUint8(o,206),i.setUint32(o+1,r),5;throw new Error(\"Number too big 0x\"+r.toString(16))}if(r>=-32)return i.setInt8(o,r),1;if(r>=-128)return i.setUint8(o,208),i.setInt8(o+1,r),2;if(r>=-32768)return i.setUint8(o,209),i.setInt16(o+1,r),3;if(r>=-2147483648)return i.setUint8(o,210),i.setInt32(o+1,r),5;throw new Error(\"Number too small -0x\"+(-r).toString(16).substr(1))}if(null===r)return i.setUint8(o,192),1;if(\"boolean\"===a)return i.setUint8(o,r?195:194),1;if(\"object\"===a){var u,f=0,c=Array.isArray(r);if(c)u=r.length;else{var d=Object.keys(r);u=d.length}var f;if(16>u?(i.setUint8(o,u|(c?144:128)),f=1):65536>u?(i.setUint8(o,c?220:222),i.setUint16(o+1,u),f=3):4294967296>u&&(i.setUint8(o,c?221:223),i.setUint32(o+1,u),f=5),c)for(var l=0;u>l;l++)f+=e(r[l],i,o+f);else for(var l=0;u>l;l++){var g=d[l];f+=e(g,i,o+f),f+=e(r[g],i,o+f)}return f}throw new Error(\"Unknown type \"+a)}function i(r){var t=typeof r;if(\"string\"===t){var e=n(r);if(32>e)return 1+e;if(256>e)return 2+e;if(65536>e)return 3+e;if(4294967296>e)return 5+e}if(r instanceof Uint8Array){var e=r.byteLength;if(256>e)return 2+e;if(65536>e)return 3+e;if(4294967296>e)return 5+e}if(\"number\"===t){if(Math.floor(r)!==r)return 9;if(r>=0){if(128>r)return 1;if(256>r)return 2;if(65536>r)return 3;if(4294967296>r)return 5;throw new Error(\"Number too big 0x\"+r.toString(16))}if(r>=-32)return 1;if(r>=-128)return 2;if(r>=-32768)return 3;if(r>=-2147483648)return 5;throw new Error(\"Number too small -0x\"+r.toString(16).substr(1))}if(\"boolean\"===t||null===r)return 1;if(\"object\"===t){var e,o=0;if(Array.isArray(r)){e=r.length;for(var a=0;e>a;a++)o+=i(r[a])}else{var u=Object.keys(r);e=u.length;for(var a=0;e>a;a++){var s=u[a];o+=i(s)+i(r[s])}}if(16>e)return 1+o;if(65536>e)return 3+o;if(4294967296>e)return 5+o;throw new Error(\"Array or object too long 0x\"+e.toString(16))}throw new Error(\"Unknown type \"+t)}function o(r){var t=new ArrayBuffer(i(r)),n=new DataView(t);return e(r,n,0),new Uint8Array(t)}function a(r,t,n){return t?new r(t.buffer,t.byteOffset,t.byteLength/(n||1)):void 0}function u(r){return a(DataView,r)}function s(r){return a(Uint8Array,r)}function f(r){return a(Int8Array,r)}function c(r){return a(Int32Array,r,4)}function d(r){return a(Float32Array,r,4)}function l(r,t){var n=r.length/2;t||(t=new Int16Array(n));for(var e=0,i=0;n>e;++e,i+=2)t[e]=r[i]<<8^r[i+1]<<0;return t}function g(r,t){var n=r.length;t||(t=new Uint8Array(2*n));for(var e=u(t),i=0;n>i;++i)e.setInt16(2*i,r[i]);return s(t)}function v(r,t){var n=r.length/4;t||(t=new Int32Array(n));for(var e=0,i=0;n>e;++e,i+=4)t[e]=r[i]<<24^r[i+1]<<16^r[i+2]<<8^r[i+3]<<0;return t}function L(r,t){var n=r.length;t||(t=new Uint8Array(4*n));for(var e=u(t),i=0;n>i;++i)e.setInt32(4*i,r[i]);return s(t)}function h(r,t){var n=r.length;t||(t=new Float32Array(n/4));for(var e=u(t),i=u(r),o=0,a=0,s=n/4;s>o;++o,a+=4)e.setFloat32(a,i.getFloat32(a),!0);return t}function y(r,t,n){var e=r.length,i=1/t;n||(n=new Float32Array(e));for(var o=0;e>o;++o)n[o]=r[o]*i;return n}function m(r,t,n){var e=r.length;n||(n=new Int32Array(e));for(var i=0;e>i;++i)n[i]=Math.round(r[i]*t);return n}function p(r,t){var n,e;if(!t){var i=0;for(n=0,e=r.length;e>n;n+=2)i+=r[n+1];t=new r.constructor(i)}var o=0;for(n=0,e=r.length;e>n;n+=2)for(var a=r[n],u=r[n+1],s=0;u>s;++s)t[o]=a,++o;return t}function U(r){if(0===r.length)return new Int32Array;var t,n,e=2;for(t=1,n=r.length;n>t;++t)r[t-1]!==r[t]&&(e+=2);var i=new Int32Array(e),o=0,a=1;for(t=1,n=r.length;n>t;++t)r[t-1]!==r[t]?(i[o]=r[t-1],i[o+1]=a,a=1,o+=2):++a;return i[o]=r[r.length-1],i[o+1]=a,i}function b(r,t){var n=r.length;t||(t=new r.constructor(n)),n&&(t[0]=r[0]);for(var e=1;n>e;++e)t[e]=r[e]+t[e-1];return t}function I(r,t){var n=r.length;t||(t=new r.constructor(n)),t[0]=r[0];for(var e=1;n>e;++e)t[e]=r[e]-r[e-1];return t}function w(r,t){var n,e,i=r instanceof Int8Array?127:32767,o=-i-1,a=r.length;if(!t){var u=0;for(n=0;a>n;++n)r[n]<i&&r[n]>o&&++u;t=new Int32Array(u)}for(n=0,e=0;a>n;){for(var s=0;r[n]===i||r[n]===o;)s+=r[n],++n;s+=r[n],++n,t[e]=s,++e}return t}function C(r,t){var n,e=t?127:32767,i=-e-1,o=r.length,a=0;for(n=0;o>n;++n){var u=r[n];0===u?++a:u>0?(a+=Math.ceil(u/e),u%e===0&&(a+=1)):(a+=Math.ceil(u/i),u%i===0&&(a+=1))}var s=t?new Int8Array(a):new Int16Array(a),f=0;for(n=0;o>n;++n){var u=r[n];if(u>=0)for(;u>=e;)s[f]=e,++f,u-=e;else for(;i>=u;)s[f]=i,++f,u-=i;s[f]=u,++f}return s}function A(r,t){return b(p(r),t)}function x(r){return U(I(r))}function M(r,t,n){return y(p(r,c(n)),t,n)}function F(r,t){return U(m(r,t))}function S(r,t,n){return y(b(r,c(n)),t,n)}function E(r,t,n){return I(m(r,t),n)}function N(r,t,n){return y(w(r,c(n)),t,n)}function O(r,t,n){var e=w(r,c(n));return S(e,t,d(e))}function T(r,t,n){return C(E(r,t),n)}function k(r){var t=u(r),n=t.getInt32(0),e=t.getInt32(4),i=r.subarray(8,12),r=r.subarray(12);return[n,r,e,i]}function j(r,t,n,e){var i=new ArrayBuffer(12+e.byteLength),o=new Uint8Array(i),a=new DataView(i);return a.setInt32(0,r),a.setInt32(4,t),n&&o.set(n,8),o.set(e,12),o}function q(r){var t=r.length,n=s(r);return j(2,t,void 0,n)}function D(r){var t=r.length,n=L(r);return j(4,t,void 0,n)}function P(r,t){var n=r.length/t,e=L([t]),i=s(r);return j(5,n,e,i)}function z(r){var t=r.length,n=L(U(r));return j(6,t,void 0,n)}function B(r){var t=r.length,n=L(x(r));return j(8,t,void 0,n)}function V(r,t){var n=r.length,e=L([t]),i=L(F(r,t));return j(9,n,e,i)}function G(r,t){var n=r.length,e=L([t]),i=g(T(r,t));return j(10,n,e,i)}function R(r){var t={};return rr.forEach(function(n){void 0!==r[n]&&(t[n]=r[n])}),r.bondAtomList&&(t.bondAtomList=D(r.bondAtomList)),r.bondOrderList&&(t.bondOrderList=q(r.bondOrderList)),t.xCoordList=G(r.xCoordList,1e3),t.yCoordList=G(r.yCoordList,1e3),t.zCoordList=G(r.zCoordList,1e3),r.bFactorList&&(t.bFactorList=G(r.bFactorList,100)),r.atomIdList&&(t.atomIdList=B(r.atomIdList)),r.altLocList&&(t.altLocList=z(r.altLocList)),r.occupancyList&&(t.occupancyList=V(r.occupancyList,100)),t.groupIdList=B(r.groupIdList),t.groupTypeList=D(r.groupTypeList),r.secStructList&&(t.secStructList=q(r.secStructList)),r.insCodeList&&(t.insCodeList=z(r.insCodeList)),r.sequenceIndexList&&(t.sequenceIndexList=B(r.sequenceIndexList)),t.chainIdList=P(r.chainIdList,4),r.chainNameList&&(t.chainNameList=P(r.chainNameList,4)),t}function H(r){function t(r){for(var t={},n=0;r>n;n++){var e=o();t[e]=o()}return t}function n(t){var n=r.subarray(a,a+t);return a+=t,n}function e(t){var n=r.subarray(a,a+t);a+=t;var e=65535;if(t>e){for(var i=[],o=0;o<n.length;o+=e)i.push(String.fromCharCode.apply(null,n.subarray(o,o+e)));return i.join(\"\")}return String.fromCharCode.apply(null,n)}function i(r){for(var t=new Array(r),n=0;r>n;n++)t[n]=o();return t}function o(){var o,s,f=r[a];if(0===(128&f))return a++,f;if(128===(240&f))return s=15&f,a++,t(s);if(144===(240&f))return s=15&f,a++,i(s);if(160===(224&f))return s=31&f,a++,e(s);if(224===(224&f))return o=u.getInt8(a),a++,o;switch(f){case 192:return a++,null;case 194:return a++,!1;case 195:return a++,!0;case 196:return s=u.getUint8(a+1),a+=2,n(s);case 197:return s=u.getUint16(a+1),a+=3,n(s);case 198:return s=u.getUint32(a+1),a+=5,n(s);case 202:return o=u.getFloat32(a+1),a+=5,o;case 203:return o=u.getFloat64(a+1),a+=9,o;case 204:return o=r[a+1],a+=2,o;case 205:return o=u.getUint16(a+1),a+=3,o;case 206:return o=u.getUint32(a+1),a+=5,o;case 208:return o=u.getInt8(a+1),a+=2,o;case 209:return o=u.getInt16(a+1),a+=3,o;case 210:return o=u.getInt32(a+1),a+=5,o;case 217:return s=u.getUint8(a+1),a+=2,e(s);case 218:return s=u.getUint16(a+1),a+=3,e(s);case 219:return s=u.getUint32(a+1),a+=5,e(s);case 220:return s=u.getUint16(a+1),a+=3,i(s);case 221:return s=u.getUint32(a+1),a+=5,i(s);case 222:return s=u.getUint16(a+1),a+=3,t(s);case 223:return s=u.getUint32(a+1),a+=5,t(s)}throw new Error(\"Unknown type 0x\"+f.toString(16))}var a=0,u=new DataView(r.buffer);return o()}function W(r,t,n,e){switch(r){case 1:return h(t);case 2:return f(t);case 3:return l(t);case 4:return v(t);case 5:return s(t);case 6:return p(v(t),new Uint8Array(n));case 7:return p(v(t));case 8:return A(v(t));case 9:return M(v(t),v(e)[0]);case 10:return O(l(t),v(e)[0]);case 11:return y(l(t),v(e)[0]);case 12:return N(l(t),v(e)[0]);case 13:return N(f(t),v(e)[0]);case 14:return w(l(t));case 15:return w(f(t))}}function X(r,t){t=t||{};var n=t.ignoreFields,e={};return nr.forEach(function(t){var i=n?-1!==n.indexOf(t):!1,o=r[t];i||void 0===o||(o instanceof Uint8Array?e[t]=W.apply(null,k(o)):e[t]=o)}),e}function J(r){return String.fromCharCode.apply(null,r).replace(/\\0/g,\"\")}function K(r,t,n){n=n||{};var e,i,o,a,u,s,f=n.firstModelOnly,c=t.onModel,d=t.onChain,l=t.onGroup,g=t.onAtom,v=t.onBond,L=0,h=0,y=0,m=0,p=0,U=-1,b=r.chainNameList,I=r.secStructList,w=r.insCodeList,C=r.sequenceIndexList,A=r.atomIdList,x=r.bFactorList,M=r.altLocList,F=r.occupancyList,S=r.bondAtomList,E=r.bondOrderList;for(e=0,i=r.chainsPerModel.length;i>e&&!(f&&L>0);++e){var N=r.chainsPerModel[L];for(c&&c({chainCount:N,modelIndex:L}),o=0;N>o;++o){var O=r.groupsPerChain[h];if(d){var T=J(r.chainIdList.subarray(4*h,4*h+4)),k=null;b&&(k=J(b.subarray(4*h,4*h+4))),d({groupCount:O,chainIndex:h,modelIndex:L,chainId:T,chainName:k})}for(a=0;O>a;++a){var j=r.groupList[r.groupTypeList[y]],q=j.atomNameList.length;if(l){var D=null;I&&(D=I[y]);var P=null;r.insCodeList&&(P=String.fromCharCode(w[y]));var z=null;C&&(z=C[y]),l({atomCount:q,groupIndex:y,chainIndex:h,modelIndex:L,groupId:r.groupIdList[y],groupType:r.groupTypeList[y],groupName:j.groupName,singleLetterCode:j.singleLetterCode,chemCompType:j.chemCompType,secStruct:D,insCode:P,sequenceIndex:z})}for(u=0;q>u;++u){if(g){var B=null;A&&(B=A[m]);var V=null;x&&(V=x[m]);var G=null;M&&(G=String.fromCharCode(M[m]));var R=null;F&&(R=F[m]),g({atomIndex:m,groupIndex:y,chainIndex:h,modelIndex:L,atomId:B,element:j.elementList[u],atomName:j.atomNameList[u],formalCharge:j.formalChargeList[u],xCoord:r.xCoordList[m],yCoord:r.yCoordList[m],zCoord:r.zCoordList[m],bFactor:V,altLoc:G,occupancy:R})}m+=1}if(v){var H=j.bondAtomList;for(u=0,s=j.bondOrderList.length;s>u;++u)v({atomIndex1:m-q+H[2*u],atomIndex2:m-q+H[2*u+1],bondOrder:j.bondOrderList[u]})}y+=1}h+=1}if(p=U+1,U=m-1,v&&S)for(u=0,s=S.length;s>u;u+=2){var W=S[u],X=S[u+1];(W>=p&&U>=W||X>=p&&U>=X)&&v({atomIndex1:W,atomIndex2:X,bondOrder:E?E[u/2]:null})}L+=1}}function Q(r){return o(R(r))}function Y(r,t){r instanceof ArrayBuffer&&(r=new Uint8Array(r));var n;return n=r instanceof Uint8Array?H(r):r,X(n,t)}function Z(r,t,n,e){function i(){try{var r=Y(o.response);n(r)}catch(t){e(t)}}var o=new XMLHttpRequest;o.addEventListener(\"load\",i,!0),o.addEventListener(\"error\",e,!0),o.responseType=\"arraybuffer\",o.open(\"GET\",t+r.toUpperCase()),o.send()}function $(r,t,n){Z(r,or,t,n)}function _(r,t,n){Z(r,ar,t,n)}var rr=[\"mmtfVersion\",\"mmtfProducer\",\"unitCell\",\"spaceGroup\",\"structureId\",\"title\",\"depositionDate\",\"releaseDate\",\"experimentalMethods\",\"resolution\",\"rFree\",\"rWork\",\"bioAssemblyList\",\"ncsOperatorList\",\"entityList\",\"groupList\",\"numBonds\",\"numAtoms\",\"numGroups\",\"numChains\",\"numModels\",\"groupsPerChain\",\"chainsPerModel\"],tr=[\"xCoordList\",\"yCoordList\",\"zCoordList\",\"groupIdList\",\"groupTypeList\",\"chainIdList\",\"bFactorList\",\"atomIdList\",\"altLocList\",\"occupancyList\",\"secStructList\",\"insCodeList\",\"sequenceIndexList\",\"chainNameList\",\"bondAtomList\",\"bondOrderList\"],nr=rr.concat(tr),er=\"v1.0.1\",ir=\"//mmtf.rcsb.org/v1.0/\",or=ir+\"full/\",ar=ir+\"reduced/\";r.encode=Q,r.decode=Y,r.traverse=K,r.fetch=$,r.fetchReduced=_,r.version=er,r.fetchUrl=or,r.fetchReducedUrl=ar,r.encodeMsgpack=o,r.encodeMmtf=R,r.decodeMsgpack=H,r.decodeMmtf=X});\nvar $NGL_shaderTextHash = {};\n\n$NGL_shaderTextHash['SphereImpostor.frag'] = [\"#define STANDARD\",\n\"#define IMPOSTOR\",\n\"\",\n\"uniform vec3 diffuse;\",\n\"uniform vec3 emissive;\",\n\"uniform float roughness;\",\n\"uniform float metalness;\",\n\"uniform float opacity;\",\n\"uniform float nearClip;\",\n\"uniform mat4 projectionMatrix;\",\n\"uniform float ortho;\",\n\"\",\n\"varying float vRadius;\",\n\"varying float vRadiusSq;\",\n\"varying vec3 vPoint;\",\n\"varying vec3 vPointViewPosition;\",\n\"\",\n\"#ifdef PICKING\",\n\"    uniform float objectId;\",\n\"    varying vec3 vPickingColor;\",\n\"#else\",\n\"    #include common\",\n\"    #include color_pars_fragment\",\n\"    #include fog_pars_fragment\",\n\"    #include bsdfs\",\n\"    #include lights_pars_begin\",\n\"    #include lights_physical_pars_fragment\",\n\"#endif\",\n\"\",\n\"bool flag2 = false;\",\n\"bool interior = false;\",\n\"vec3 cameraPos;\",\n\"vec3 cameraNormal;\",\n\"\",\n\"// Calculate depth based on the given camera position.\",\n\"float calcDepth( in vec3 cameraPos ){\",\n\"    vec2 clipZW = cameraPos.z * projectionMatrix[2].zw + projectionMatrix[3].zw;\",\n\"    return 0.5 + 0.5 * clipZW.x / clipZW.y;\",\n\"}\",\n\"\",\n\"float calcClip( vec3 cameraPos ){\",\n\"    return dot( vec4( cameraPos, 1.0 ), vec4( 0.0, 0.0, 1.0, nearClip - 0.5 ) );\",\n\"}\",\n\"\",\n\"bool Impostor( out vec3 cameraPos, out vec3 cameraNormal ){\",\n\"\",\n\"    vec3 cameraSpherePos = -vPointViewPosition;\",\n\"    cameraSpherePos.z += vRadius;\",\n\"\",\n\"    vec3 rayOrigin = mix( vec3( 0.0, 0.0, 0.0 ), vPoint, ortho );\",\n\"    vec3 rayDirection = mix( normalize( vPoint ), vec3( 0.0, 0.0, 1.0 ), ortho );\",\n\"    vec3 cameraSphereDir = mix( cameraSpherePos, rayOrigin - cameraSpherePos, ortho );\",\n\"\",\n\"    float B = dot( rayDirection, cameraSphereDir );\",\n\"    float det = B * B + vRadiusSq - dot( cameraSphereDir, cameraSphereDir );\",\n\"\",\n\"    if( det < 0.0 ){\",\n\"        discard;\",\n\"        return false;\",\n\"    }\",\n\"        float sqrtDet = sqrt( det );\",\n\"        float posT = mix( B + sqrtDet, B + sqrtDet, ortho );\",\n\"        float negT = mix( B - sqrtDet, sqrtDet - B, ortho );\",\n\"\",\n\"        cameraPos = rayDirection * negT + rayOrigin;\",\n\"\",\n\"        #ifdef NEAR_CLIP\",\n\"if( calcDepth( cameraPos ) <= 0.0 ){\",\n\"    cameraPos = rayDirection * posT + rayOrigin;\",\n\"    interior = true;\",\n\"    return false;\",\n\"}else if( calcClip( cameraPos ) > 0.0 ){\",\n\"    cameraPos = rayDirection * posT + rayOrigin;\",\n\"    interior = true;\",\n\"    flag2 = true;\",\n\"    return false;\",\n\"}else{\",\n\"    cameraNormal = normalize( cameraPos - cameraSpherePos );\",\n\"}\",\n\"        #else\",\n\"if( calcDepth( cameraPos ) <= 0.0 ){\",\n\"    cameraPos = rayDirection * posT + rayOrigin;\",\n\"    interior = true;\",\n\"    return false;\",\n\"}else{\",\n\"    cameraNormal = normalize( cameraPos - cameraSpherePos );\",\n\"}\",\n\"        #endif\",\n\"\",\n\"        cameraNormal = normalize( cameraPos - cameraSpherePos );\",\n\"        cameraNormal *= float(!interior) * 2.0 - 1.0;\",\n\"         return !interior;\",\n\"\",\n\"}\",\n\"\",\n\"void main(void){\",\n\"\",\n\"    bool flag = Impostor( cameraPos, cameraNormal );\",\n\"\",\n\"    #ifdef NEAR_CLIP\",\n\"        if( calcClip( cameraPos ) > 0.0 )\",\n\"            discard;\",\n\"    #endif\",\n\"\",\n\"    // FIXME not compatible with custom clipping plane\",\n\"    //Set the depth based on the new cameraPos.\",\n\"    gl_FragDepthEXT = calcDepth( cameraPos );\",\n\"    if( !flag ){\",\n\"\",\n\"        // clamp to near clipping plane and add a tiny value to\",\n\"        // make spheres with a greater radius occlude smaller ones\",\n\"        #ifdef NEAR_CLIP\",\n\"if( flag2 ){\",\n\"    gl_FragDepthEXT = max( 0.0, calcDepth( vec3( - ( nearClip - 0.5 ) ) ) + ( 0.0000001 / vRadius ) );\",\n\"}else if( gl_FragDepthEXT >= 0.0 ){\",\n\"    gl_FragDepthEXT = 0.0 + ( 0.0000001 / vRadius );\",\n\"}\",\n\"        #else\",\n\"if( gl_FragDepthEXT >= 0.0 ){\",\n\"    gl_FragDepthEXT = 0.0 + ( 0.0000001 / vRadius );\",\n\"}\",\n\"        #endif\",\n\"\",\n\"    }\",\n\"\",\n\"    // bugfix (mac only?)\",\n\"    if (gl_FragDepthEXT < 0.0)\",\n\"        discard;\",\n\"    if (gl_FragDepthEXT > 1.0)\",\n\"        discard;\",\n\"\",\n\"    #ifdef PICKING\",\n\"\",\n\"        gl_FragColor = vec4( vPickingColor, objectId );\",\n\"\",\n\"    #else\",\n\"\",\n\"        vec3 vNormal = cameraNormal;\",\n\"        vec3 vViewPosition = -cameraPos;\",\n\"\",\n\"        vec4 diffuseColor = vec4( diffuse, opacity );\",\n\"        ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\",\n\"        vec3 totalEmissiveLight = emissive;\",\n\"\",\n\"        #include color_fragment\",\n\"        #include roughnessmap_fragment\",\n\"        #include metalnessmap_fragment\",\n\"\",\n\"        // don't use include normal_fragment\",\n\"        vec3 normal = normalize( vNormal );\",\n\"\",\n\"        #include lights_physical_fragment\",\n\"        //include lights_template\",\n\"        #include lights_fragment_begin\",\n\"        #include lights_fragment_end\",\n\"\",\n\"        vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveLight;\",\n\"\",\n\"        gl_FragColor = vec4( outgoingLight, diffuseColor.a );\",\n\"        //gl_FragColor = vec4( reflectedLight.directSpecular, diffuseColor.a );\",\n\"\",\n\"        #include premultiplied_alpha_fragment\",\n\"        #include tonemapping_fragment\",\n\"        #include encodings_fragment\",\n\"        #include fog_fragment\",\n\"\",\n\"    #endif\",\n\"\",\n\"}\"\n].join(\"\\n\");\n\n$NGL_shaderTextHash['SphereImpostor.vert'] = [\"uniform mat4 projectionMatrixInverse;\",\n\"uniform float nearClip;\",\n\"\",\n\"varying float vRadius;\",\n\"varying float vRadiusSq;\",\n\"varying vec3 vPoint;\",\n\"varying vec3 vPointViewPosition;\",\n\"varying float fogDepth;\",\n\"\",\n\"attribute vec2 mapping;\",\n\"//attribute vec3 position;\",\n\"attribute float radius;\",\n\"\",\n\"#ifdef PICKING\",\n\"    #include unpack_clr\",\n\"    attribute float primitiveId;\",\n\"    varying vec3 vPickingColor;\",\n\"#else\",\n\"    #include color_pars_vertex\",\n\"#endif\",\n\"\",\n\"//include matrix_scale\",\n\"float matrixScale( in mat4 m ){\",\n\"    vec4 r = m[ 0 ];\",\n\"    return sqrt( r[ 0 ] * r[ 0 ] + r[ 1 ] * r[ 1 ] + r[ 2 ] * r[ 2 ] );\",\n\"}\",\n\"\",\n\"const mat4 D = mat4(\",\n\"    1.0, 0.0, 0.0, 0.0,\",\n\"    0.0, 1.0, 0.0, 0.0,\",\n\"    0.0, 0.0, 1.0, 0.0,\",\n\"    0.0, 0.0, 0.0, -1.0\",\n\");\",\n\"\",\n\"mat4 transpose( in mat4 inMatrix ) {\",\n\"    vec4 i0 = inMatrix[0];\",\n\"    vec4 i1 = inMatrix[1];\",\n\"    vec4 i2 = inMatrix[2];\",\n\"    vec4 i3 = inMatrix[3];\",\n\"\",\n\"    mat4 outMatrix = mat4(\",\n\"        vec4(i0.x, i1.x, i2.x, i3.x),\",\n\"        vec4(i0.y, i1.y, i2.y, i3.y),\",\n\"        vec4(i0.z, i1.z, i2.z, i3.z),\",\n\"        vec4(i0.w, i1.w, i2.w, i3.w)\",\n\"    );\",\n\"    return outMatrix;\",\n\"}\",\n\"\",\n\"//------------------------------------------------------------------------------\",\n\"// Compute point size and center using the technique described in:\",\n\"// 'GPU-Based Ray-Casting of Quadratic Surfaces'\",\n\"// by Christian Sigg, Tim Weyrich, Mario Botsch, Markus Gross.\",\n\"//\",\n\"// Code based on\",\n\"/*=========================================================================\",\n\"\",\n\" Program:   Visualization Toolkit\",\n\" Module:    Quadrics_fs.glsl and Quadrics_vs.glsl\",\n\"\",\n\" Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\",\n\" All rights reserved.\",\n\" See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\",\n\"\",\n\" This software is distributed WITHOUT ANY WARRANTY; without even\",\n\" the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\",\n\" PURPOSE.  See the above copyright notice for more information.\",\n\"\",\n\" =========================================================================*/\",\n\"\",\n\"// .NAME Quadrics_fs.glsl and Quadrics_vs.glsl\",\n\"// .SECTION Thanks\",\n\"// <verbatim>\",\n\"//\",\n\"//  This file is part of the PointSprites plugin developed and contributed by\",\n\"//\",\n\"//  Copyright (c) CSCS - Swiss National Supercomputing Centre\",\n\"//                EDF - Electricite de France\",\n\"//\",\n\"//  John Biddiscombe, Ugo Varetto (CSCS)\",\n\"//  Stephane Ploix (EDF)\",\n\"//\",\n\"// </verbatim>\",\n\"//\",\n\"// Contributions by Alexander Rose\",\n\"// - ported to WebGL\",\n\"// - adapted to work with quads\",\n\"void ComputePointSizeAndPositionInClipCoordSphere(){\",\n\"\",\n\"    vec2 xbc;\",\n\"    vec2 ybc;\",\n\"\",\n\"    mat4 T = mat4(\",\n\"        radius, 0.0, 0.0, 0.0,\",\n\"        0.0, radius, 0.0, 0.0,\",\n\"        0.0, 0.0, radius, 0.0,\",\n\"        position.x, position.y, position.z, 1.0\",\n\"    );\",\n\"\",\n\"    mat4 R = transpose( projectionMatrix * modelViewMatrix * T );\",\n\"    float A = dot( R[ 3 ], D * R[ 3 ] );\",\n\"    float B = -2.0 * dot( R[ 0 ], D * R[ 3 ] );\",\n\"    float C = dot( R[ 0 ], D * R[ 0 ] );\",\n\"    xbc[ 0 ] = ( -B - sqrt( B * B - 4.0 * A * C ) ) / ( 2.0 * A );\",\n\"    xbc[ 1 ] = ( -B + sqrt( B * B - 4.0 * A * C ) ) / ( 2.0 * A );\",\n\"    float sx = abs( xbc[ 0 ] - xbc[ 1 ] ) * 0.5;\",\n\"\",\n\"    A = dot( R[ 3 ], D * R[ 3 ] );\",\n\"    B = -2.0 * dot( R[ 1 ], D * R[ 3 ] );\",\n\"    C = dot( R[ 1 ], D * R[ 1 ] );\",\n\"    ybc[ 0 ] = ( -B - sqrt( B * B - 4.0 * A * C ) ) / ( 2.0 * A );\",\n\"    ybc[ 1 ] = ( -B + sqrt( B * B - 4.0 * A * C ) ) / ( 2.0 * A );\",\n\"    float sy = abs( ybc[ 0 ] - ybc[ 1 ]  ) * 0.5;\",\n\"\",\n\"    gl_Position.xy = vec2( 0.5 * ( xbc.x + xbc.y ), 0.5 * ( ybc.x + ybc.y ) );\",\n\"    gl_Position.xy -= mapping * vec2( sx, sy );\",\n\"    gl_Position.xy *= gl_Position.w;\",\n\"\",\n\"}\",\n\"\",\n\"void main(void){\",\n\"\",\n\"    #ifdef PICKING\",\n\"        vPickingColor = unpackColor( primitiveId );\",\n\"    #else\",\n\"        #include color_vertex\",\n\"    #endif\",\n\"\",\n\"    vRadius = radius * matrixScale( modelViewMatrix );\",\n\"\",\n\"    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\",\n\"    // avoid clipping, added again in fragment shader\",\n\"    mvPosition.z -= vRadius;\",\n\"\",\n\"    gl_Position = projectionMatrix * vec4( mvPosition.xyz, 1.0 );\",\n\"    ComputePointSizeAndPositionInClipCoordSphere();\",\n\"\",\n\"\",\n\"    vRadiusSq = vRadius * vRadius;\",\n\"    vec4 vPoint4 = projectionMatrixInverse * gl_Position;\",\n\"    vPoint = vPoint4.xyz / vPoint4.w;\",\n\"    vPointViewPosition = -mvPosition.xyz / mvPosition.w;\",\n\"\",\n\"}\"\n].join(\"\\n\");\n\n$NGL_shaderTextHash['CylinderImpostor.frag'] = [\"#define STANDARD\",\n\"#define IMPOSTOR\",\n\"\",\n\"// Open-Source PyMOL is Copyright (C) Schrodinger, LLC.\",\n\"//\",\n\"//  All Rights Reserved\",\n\"//\",\n\"//  Permission to use, copy, modify, distribute, and distribute modified\",\n\"//  versions of this software and its built-in documentation for any\",\n\"//  purpose and without fee is hereby granted, provided that the above\",\n\"//  copyright notice appears in all copies and that both the copyright\",\n\"//  notice and this permission notice appear in supporting documentation,\",\n\"//  and that the name of Schrodinger, LLC not be used in advertising or\",\n\"//  publicity pertaining to distribution of the software without specific,\",\n\"//  written prior permission.\",\n\"//\",\n\"//  SCHRODINGER, LLC DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS SOFTWARE,\",\n\"//  INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS. IN\",\n\"//  NO EVENT SHALL SCHRODINGER, LLC BE LIABLE FOR ANY SPECIAL, INDIRECT OR\",\n\"//  CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS\",\n\"//  OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE\",\n\"//  OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE\",\n\"//  USE OR PERFORMANCE OF THIS SOFTWARE.\",\n\"\",\n\"// Contributions by Alexander Rose\",\n\"// - ported to WebGL\",\n\"// - dual color\",\n\"// - pk color\",\n\"// - custom clipping\",\n\"// - three.js lighting\",\n\"\",\n\"uniform vec3 diffuse;\",\n\"uniform vec3 emissive;\",\n\"uniform float roughness;\",\n\"uniform float metalness;\",\n\"uniform float opacity;\",\n\"uniform float nearClip;\",\n\"uniform mat4 projectionMatrix;\",\n\"uniform float ortho;\",\n\"\",\n\"varying vec3 axis;\",\n\"varying vec4 base_radius;\",\n\"varying vec4 end_b;\",\n\"varying vec3 U;\",\n\"varying vec3 V;\",\n\"varying vec4 w;\",\n\"\",\n\"#ifdef PICKING\",\n\"    uniform float objectId;\",\n\"    varying vec3 vPickingColor;\",\n\"#else\",\n\"    varying vec3 vColor1;\",\n\"    varying vec3 vColor2;\",\n\"    #include common\",\n\"    #include fog_pars_fragment\",\n\"    #include bsdfs\",\n\"    #include lights_pars_begin\",\n\"    #include lights_physical_pars_fragment\",\n\"#endif\",\n\"\",\n\"bool interior = false;\",\n\"\",\n\"float distSq3( vec3 v3a, vec3 v3b ){\",\n\"    return (\",\n\"        ( v3a.x - v3b.x ) * ( v3a.x - v3b.x ) +\",\n\"        ( v3a.y - v3b.y ) * ( v3a.y - v3b.y ) +\",\n\"        ( v3a.z - v3b.z ) * ( v3a.z - v3b.z )\",\n\"    );\",\n\"}\",\n\"\",\n\"// Calculate depth based on the given camera position.\",\n\"float calcDepth( in vec3 cameraPos ){\",\n\"    vec2 clipZW = cameraPos.z * projectionMatrix[2].zw + projectionMatrix[3].zw;\",\n\"    return 0.5 + 0.5 * clipZW.x / clipZW.y;\",\n\"}\",\n\"\",\n\"float calcClip( vec3 cameraPos ){\",\n\"    return dot( vec4( cameraPos, 1.0 ), vec4( 0.0, 0.0, 1.0, nearClip - 0.5 ) );\",\n\"}\",\n\"\",\n\"void main(){\",\n\"\",\n\"    vec3 point = w.xyz / w.w;\",\n\"\",\n\"    // unpacking\",\n\"    vec3 base = base_radius.xyz;\",\n\"    float vRadius = base_radius.w;\",\n\"    vec3 end = end_b.xyz;\",\n\"    float b = end_b.w;\",\n\"\",\n\"    vec3 end_cyl = end;\",\n\"    vec3 surface_point = point;\",\n\"\",\n\"    vec3 ray_target = surface_point;\",\n\"    vec3 ray_origin = vec3(0.0);\",\n\"    vec3 ray_direction = mix(normalize(ray_origin - ray_target), vec3(0.0, 0.0, 1.0), ortho);\",\n\"    mat3 basis = mat3( U, V, axis );\",\n\"\",\n\"    vec3 diff = ray_target - 0.5 * (base + end_cyl);\",\n\"    vec3 P = diff * basis;\",\n\"\",\n\"    // angle (cos) between cylinder cylinder_axis and ray direction\",\n\"    float dz = dot( axis, ray_direction );\",\n\"\",\n\"    float radius2 = vRadius*vRadius;\",\n\"\",\n\"    // calculate distance to the cylinder from ray origin\",\n\"    vec3 D = vec3(dot(U, ray_direction),\",\n\"                dot(V, ray_direction),\",\n\"                dz);\",\n\"    float a0 = P.x*P.x + P.y*P.y - radius2;\",\n\"    float a1 = P.x*D.x + P.y*D.y;\",\n\"    float a2 = D.x*D.x + D.y*D.y;\",\n\"\",\n\"    // calculate a dicriminant of the above quadratic equation\",\n\"    float d = a1*a1 - a0*a2;\",\n\"    if (d < 0.0)\",\n\"        // outside of the cylinder\",\n\"        discard;\",\n\"\",\n\"    float dist = (-a1 + sqrt(d)) / a2;\",\n\"\",\n\"    // point of intersection on cylinder surface\",\n\"    vec3 new_point = ray_target + dist * ray_direction;\",\n\"\",\n\"    vec3 tmp_point = new_point - base;\",\n\"    vec3 _normal = normalize( tmp_point - axis * dot(tmp_point, axis) );\",\n\"\",\n\"    ray_origin = mix( ray_origin, surface_point, ortho );\",\n\"\",\n\"    // test caps\",\n\"    float front_cap_test = dot( tmp_point, axis );\",\n\"    float end_cap_test = dot((new_point - end_cyl), axis);\",\n\"\",\n\"    // to calculate caps, simply check the angle between\",\n\"    // the point of intersection - cylinder end vector\",\n\"    // and a cap plane normal (which is the cylinder cylinder_axis)\",\n\"    // if the angle < 0, the point is outside of cylinder\",\n\"    // test front cap\",\n\"\",\n\"    #ifndef CAP\",\n\"        vec3 new_point2 = ray_target + ( (-a1 - sqrt(d)) / a2 ) * ray_direction;\",\n\"        vec3 tmp_point2 = new_point2 - base;\",\n\"    #endif\",\n\"\",\n\"    // flat\",\n\"    if (front_cap_test < 0.0)\",\n\"    {\",\n\"        // ray-plane intersection\",\n\"        float dNV = dot(-axis, ray_direction);\",\n\"        if (dNV < 0.0)\",\n\"            discard;\",\n\"        float near = dot(-axis, (base)) / dNV;\",\n\"        vec3 front_point = ray_direction * near + ray_origin;\",\n\"        // within the cap radius?\",\n\"        if (dot(front_point - base, front_point-base) > radius2)\",\n\"            discard;\",\n\"\",\n\"        #ifdef CAP\",\n\"            new_point = front_point;\",\n\"            _normal = axis;\",\n\"        #else\",\n\"            new_point = ray_target + ( (-a1 - sqrt(d)) / a2 ) * ray_direction;\",\n\"            dNV = dot(-axis, ray_direction);\",\n\"            near = dot(axis, end_cyl) / dNV;\",\n\"            new_point2 = ray_direction * near + ray_origin;\",\n\"            if (dot(new_point2 - end_cyl, new_point2-base) < radius2)\",\n\"                discard;\",\n\"            interior = true;\",\n\"        #endif\",\n\"    }\",\n\"\",\n\"    // test end cap\",\n\"\",\n\"\",\n\"    // flat\",\n\"    if( end_cap_test > 0.0 )\",\n\"    {\",\n\"        // ray-plane intersection\",\n\"        float dNV = dot(axis, ray_direction);\",\n\"        if (dNV < 0.0)\",\n\"            discard;\",\n\"        float near = dot(axis, end_cyl) / dNV;\",\n\"        vec3 end_point = ray_direction * near + ray_origin;\",\n\"        // within the cap radius?\",\n\"        if( dot(end_point - end_cyl, end_point-base) > radius2 )\",\n\"            discard;\",\n\"\",\n\"        #ifdef CAP\",\n\"            new_point = end_point;\",\n\"            _normal = axis;\",\n\"        #else\",\n\"            new_point = ray_target + ( (-a1 - sqrt(d)) / a2 ) * ray_direction;\",\n\"            dNV = dot(-axis, ray_direction);\",\n\"            near = dot(-axis, (base)) / dNV;\",\n\"            new_point2 = ray_direction * near + ray_origin;\",\n\"            if (dot(new_point2 - base, new_point2-base) < radius2)\",\n\"                discard;\",\n\"            interior = true;\",\n\"        #endif\",\n\"    }\",\n\"\",\n\"    gl_FragDepthEXT = calcDepth( new_point );\",\n\"\",\n\"    #ifdef NEAR_CLIP\",\n\"        if( calcClip( new_point ) > 0.0 ){\",\n\"            dist = (-a1 - sqrt(d)) / a2;\",\n\"            new_point = ray_target + dist * ray_direction;\",\n\"            if( calcClip( new_point ) > 0.0 )\",\n\"                discard;\",\n\"            interior = true;\",\n\"            gl_FragDepthEXT = calcDepth( new_point );\",\n\"            if( gl_FragDepthEXT >= 0.0 ){\",\n\"                gl_FragDepthEXT = max( 0.0, calcDepth( vec3( - ( nearClip - 0.5 ) ) ) + ( 0.0000001 / vRadius ) );\",\n\"            }\",\n\"        }else if( gl_FragDepthEXT <= 0.0 ){\",\n\"            dist = (-a1 - sqrt(d)) / a2;\",\n\"            new_point = ray_target + dist * ray_direction;\",\n\"            interior = true;\",\n\"            gl_FragDepthEXT = calcDepth( new_point );\",\n\"            if( gl_FragDepthEXT >= 0.0 ){\",\n\"                gl_FragDepthEXT = 0.0 + ( 0.0000001 / vRadius );\",\n\"            }\",\n\"        }\",\n\"    #else\",\n\"        if( gl_FragDepthEXT <= 0.0 ){\",\n\"            dist = (-a1 - sqrt(d)) / a2;\",\n\"            new_point = ray_target + dist * ray_direction;\",\n\"            interior = true;\",\n\"            gl_FragDepthEXT = calcDepth( new_point );\",\n\"            if( gl_FragDepthEXT >= 0.0 ){\",\n\"                gl_FragDepthEXT = 0.0 + ( 0.0000001 / vRadius );\",\n\"            }\",\n\"        }\",\n\"    #endif\",\n\"\",\n\"    // this is a workaround necessary for Mac\",\n\"    // otherwise the modified fragment won't clip properly\",\n\"    if (gl_FragDepthEXT < 0.0)\",\n\"        discard;\",\n\"    if (gl_FragDepthEXT > 1.0)\",\n\"        discard;\",\n\"\",\n\"    #ifdef PICKING\",\n\"\",\n\"        gl_FragColor = vec4( vPickingColor, objectId );\",\n\"\",\n\"    #else\",\n\"\",\n\"        vec3 vViewPosition = -new_point;\",\n\"        vec3 vNormal = _normal;\",\n\"        vec3 vColor;\",\n\"\",\n\"        if( distSq3( new_point, end_cyl ) < distSq3( new_point, base ) ){\",\n\"            if( b < 0.0 ){\",\n\"                vColor = vColor1;\",\n\"            }else{\",\n\"                vColor = vColor2;\",\n\"            }\",\n\"        }else{\",\n\"            if( b > 0.0 ){\",\n\"                vColor = vColor1;\",\n\"            }else{\",\n\"                vColor = vColor2;\",\n\"            }\",\n\"        }\",\n\"\",\n\"        vec4 diffuseColor = vec4( diffuse, opacity );\",\n\"        ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\",\n\"        vec3 totalEmissiveLight = emissive;\",\n\"\",\n\"        #include color_fragment\",\n\"     //ifdef USE_COLOR\",\n\"     //diffuseColor.r *= vColor[0];\",\n\"     //diffuseColor.g *= vColor[1];\",\n\"     //diffuseColor.b *= vColor[2];\",\n\"     //endif\",\n\"        #include roughnessmap_fragment\",\n\"        #include metalnessmap_fragment\",\n\"\",\n\"        // don't use include normal_fragment\",\n\"        vec3 normal = normalize( vNormal );\",\n\"\",\n\"        #include lights_physical_fragment\",\n\"        //include lights_template\",\n\"        #include lights_fragment_begin\",\n\"        #include lights_fragment_end\",\n\"\",\n\"        vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveLight;\",\n\"\",\n\"        gl_FragColor = vec4( outgoingLight, diffuseColor.a );\",\n\"        //gl_FragColor = vec4( reflectedLight.directSpecular, diffuseColor.a );\",\n\"\",\n\"        #include premultiplied_alpha_fragment\",\n\"        #include tonemapping_fragment\",\n\"        #include encodings_fragment\",\n\"        #include fog_fragment\",\n\"    #endif\",\n\"\",\n\"}\"\n].join(\"\\n\");\n\n$NGL_shaderTextHash['CylinderImpostor.vert'] = [\"// Open-Source PyMOL is Copyright (C) Schrodinger, LLC.\",\n\"//\",\n\"//  All Rights Reserved\",\n\"//\",\n\"//  Permission to use, copy, modify, distribute, and distribute modified\",\n\"//  versions of this software and its built-in documentation for any\",\n\"//  purpose and without fee is hereby granted, provided that the above\",\n\"//  copyright notice appears in all copies and that both the copyright\",\n\"//  notice and this permission notice appear in supporting documentation,\",\n\"//  and that the name of Schrodinger, LLC not be used in advertising or\",\n\"//  publicity pertaining to distribution of the software without specific,\",\n\"//  written prior permission.\",\n\"//\",\n\"//  SCHRODINGER, LLC DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS SOFTWARE,\",\n\"//  INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS. IN\",\n\"//  NO EVENT SHALL SCHRODINGER, LLC BE LIABLE FOR ANY SPECIAL, INDIRECT OR\",\n\"//  CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS\",\n\"//  OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE\",\n\"//  OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE\",\n\"//  USE OR PERFORMANCE OF THIS SOFTWARE.\",\n\"\",\n\"// Contributions by Alexander Rose\",\n\"// - ported to WebGL\",\n\"// - dual color\",\n\"// - pk color\",\n\"// - shift\",\n\"\",\n\"attribute vec3 mapping;\",\n\"attribute vec3 position1;\",\n\"attribute vec3 position2;\",\n\"attribute float radius;\",\n\"\",\n\"varying vec3 axis;\",\n\"varying vec4 base_radius;\",\n\"varying vec4 end_b;\",\n\"varying vec3 U;\",\n\"varying vec3 V;\",\n\"varying vec4 w;\",\n\"varying float fogDepth;\",\n\"\",\n\"#ifdef PICKING\",\n\"    #include unpack_clr\",\n\"    attribute float primitiveId;\",\n\"    varying vec3 vPickingColor;\",\n\"#else\",\n\"    //attribute vec3 color;\",\n\"    attribute vec3 color2;\",\n\"    varying vec3 vColor1;\",\n\"    varying vec3 vColor2;\",\n\"#endif\",\n\"\",\n\"uniform mat4 modelViewMatrixInverse;\",\n\"uniform float ortho;\",\n\"\",\n\"//include matrix_scale\",\n\"float matrixScale( in mat4 m ){\",\n\"    vec4 r = m[ 0 ];\",\n\"    return sqrt( r[ 0 ] * r[ 0 ] + r[ 1 ] * r[ 1 ] + r[ 2 ] * r[ 2 ] );\",\n\"}\",\n\"\",\n\"void main(){\",\n\"\",\n\"    #ifdef PICKING\",\n\"        vPickingColor = unpackColor( primitiveId );\",\n\"    #else\",\n\"        vColor1 = color;\",\n\"        vColor2 = color2;\",\n\"    #endif\",\n\"\",\n\"    // vRadius = radius;\",\n\"    base_radius.w = radius * matrixScale( modelViewMatrix );\",\n\"\",\n\"    //vec3 center = position;\",\n\"    vec3 center = ( position2 + position1 ) / 2.0;\",\n\"    vec3 dir = normalize( position2 - position1 );\",\n\"    float ext = length( position2 - position1 ) / 2.0;\",\n\"\",\n\"    // using cameraPosition fails on some machines, not sure why\",\n\"    // vec3 cam_dir = normalize( cameraPosition - mix( center, vec3( 0.0 ), ortho ) );\",\n\"    vec3 cam_dir;\",\n\"    if( ortho == 0.0 ){\",\n\"        cam_dir = ( modelViewMatrixInverse * vec4( 0, 0, 0, 1 ) ).xyz - center;\",\n\"    }else{\",\n\"        cam_dir = ( modelViewMatrixInverse * vec4( 0, 0, 1, 0 ) ).xyz;\",\n\"    }\",\n\"    cam_dir = normalize( cam_dir );\",\n\"\",\n\"    vec3 ldir;\",\n\"\",\n\"    float b = dot( cam_dir, dir );\",\n\"    end_b.w = b;\",\n\"    // direction vector looks away, so flip\",\n\"    if( b < 0.0 )\",\n\"        ldir = -ext * dir;\",\n\"    // direction vector already looks in my direction\",\n\"    else\",\n\"        ldir = ext * dir;\",\n\"\",\n\"    vec3 left = normalize( cross( cam_dir, ldir ) );\",\n\"    left = radius * left;\",\n\"    vec3 up = radius * normalize( cross( left, ldir ) );\",\n\"\",\n\"    // transform to modelview coordinates\",\n\"    axis = normalize( normalMatrix * ldir );\",\n\"    U = normalize( normalMatrix * up );\",\n\"    V = normalize( normalMatrix * left );\",\n\"\",\n\"    vec4 base4 = modelViewMatrix * vec4( center - ldir, 1.0 );\",\n\"    base_radius.xyz = base4.xyz / base4.w;\",\n\"\",\n\"    vec4 top_position = modelViewMatrix * vec4( center + ldir, 1.0 );\",\n\"    vec4 end4 = top_position;\",\n\"    end_b.xyz = end4.xyz / end4.w;\",\n\"\",\n\"    w = modelViewMatrix * vec4(\",\n\"        center + mapping.x*ldir + mapping.y*left + mapping.z*up, 1.0\",\n\"    );\",\n\"\",\n\"    gl_Position = projectionMatrix * w;\",\n\"\",\n\"    // avoid clipping (1.0 seems to induce flickering with some drivers)\",\n\"    gl_Position.z = 0.99;\",\n\"\",\n\"}\"\n].join(\"\\n\");\n\n$NGL_shaderTextHash['SphereInstancing.frag'] = $NGL_shaderTextHash['SphereImpostor.frag'];\n\n$NGL_shaderTextHash['SphereInstancing.vert'] = [\"uniform mat4 projectionMatrixInverse;\",\n\"uniform float nearClip;\",\n\"\",\n\"varying float vRadius;\",\n\"varying float vRadiusSq;\",\n\"varying vec3 vPoint;\",\n\"varying vec3 vPointViewPosition;\",\n\"varying float fogDepth;\",\n\"\",\n\"attribute vec2 mapping;\",\n\"//attribute vec3 position;\",\n\"attribute float radius;\",\n\"attribute vec4 matrix1;\",\n\"attribute vec4 matrix2;\",\n\"attribute vec4 matrix3;\",\n\"attribute vec4 matrix4;\",\n\"\",\n\"#ifdef PICKING\",\n\"    #include unpack_clr\",\n\"    attribute float primitiveId;\",\n\"    varying vec3 vPickingColor;\",\n\"#else\",\n\"    #include color_pars_vertex\",\n\"#endif\",\n\"\",\n\"//include matrix_scale\",\n\"float matrixScale( in mat4 m ){\",\n\"    vec4 r = m[ 0 ];\",\n\"    return sqrt( r[ 0 ] * r[ 0 ] + r[ 1 ] * r[ 1 ] + r[ 2 ] * r[ 2 ] );\",\n\"}\",\n\"\",\n\"const mat4 D = mat4(\",\n\"    1.0, 0.0, 0.0, 0.0,\",\n\"    0.0, 1.0, 0.0, 0.0,\",\n\"    0.0, 0.0, 1.0, 0.0,\",\n\"    0.0, 0.0, 0.0, -1.0\",\n\");\",\n\"\",\n\"mat4 transpose( in mat4 inMatrix ) {\",\n\"    vec4 i0 = inMatrix[0];\",\n\"    vec4 i1 = inMatrix[1];\",\n\"    vec4 i2 = inMatrix[2];\",\n\"    vec4 i3 = inMatrix[3];\",\n\"\",\n\"    mat4 outMatrix = mat4(\",\n\"        vec4(i0.x, i1.x, i2.x, i3.x),\",\n\"        vec4(i0.y, i1.y, i2.y, i3.y),\",\n\"        vec4(i0.z, i1.z, i2.z, i3.z),\",\n\"        vec4(i0.w, i1.w, i2.w, i3.w)\",\n\"    );\",\n\"    return outMatrix;\",\n\"}\",\n\"\",\n\"//------------------------------------------------------------------------------\",\n\"// Compute point size and center using the technique described in:\",\n\"// 'GPU-Based Ray-Casting of Quadratic Surfaces'\",\n\"// by Christian Sigg, Tim Weyrich, Mario Botsch, Markus Gross.\",\n\"//\",\n\"// Code based on\",\n\"/*=========================================================================\",\n\"\",\n\" Program:   Visualization Toolkit\",\n\" Module:    Quadrics_fs.glsl and Quadrics_vs.glsl\",\n\"\",\n\" Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\",\n\" All rights reserved.\",\n\" See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\",\n\"\",\n\" This software is distributed WITHOUT ANY WARRANTY; without even\",\n\" the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\",\n\" PURPOSE.  See the above copyright notice for more information.\",\n\"\",\n\" =========================================================================*/\",\n\"\",\n\"// .NAME Quadrics_fs.glsl and Quadrics_vs.glsl\",\n\"// .SECTION Thanks\",\n\"// <verbatim>\",\n\"//\",\n\"//  This file is part of the PointSprites plugin developed and contributed by\",\n\"//\",\n\"//  Copyright (c) CSCS - Swiss National Supercomputing Centre\",\n\"//                EDF - Electricite de France\",\n\"//\",\n\"//  John Biddiscombe, Ugo Varetto (CSCS)\",\n\"//  Stephane Ploix (EDF)\",\n\"//\",\n\"// </verbatim>\",\n\"//\",\n\"// Contributions by Alexander Rose\",\n\"// - ported to WebGL\",\n\"// - adapted to work with quads\",\n\"void ComputePointSizeAndPositionInClipCoordSphere(vec4 updatePosition){\",\n\"\",\n\"    vec2 xbc;\",\n\"    vec2 ybc;\",\n\"\",\n\"    mat4 T = mat4(\",\n\"        radius, 0.0, 0.0, 0.0,\",\n\"        0.0, radius, 0.0, 0.0,\",\n\"        0.0, 0.0, radius, 0.0,\",\n\"        updatePosition.x, updatePosition.y, updatePosition.z, 1.0\",\n\"    );\",\n\"\",\n\"    mat4 R = transpose( projectionMatrix * modelViewMatrix * T );\",\n\"    float A = dot( R[ 3 ], D * R[ 3 ] );\",\n\"    float B = -2.0 * dot( R[ 0 ], D * R[ 3 ] );\",\n\"    float C = dot( R[ 0 ], D * R[ 0 ] );\",\n\"    xbc[ 0 ] = ( -B - sqrt( B * B - 4.0 * A * C ) ) / ( 2.0 * A );\",\n\"    xbc[ 1 ] = ( -B + sqrt( B * B - 4.0 * A * C ) ) / ( 2.0 * A );\",\n\"    float sx = abs( xbc[ 0 ] - xbc[ 1 ] ) * 0.5;\",\n\"\",\n\"    A = dot( R[ 3 ], D * R[ 3 ] );\",\n\"    B = -2.0 * dot( R[ 1 ], D * R[ 3 ] );\",\n\"    C = dot( R[ 1 ], D * R[ 1 ] );\",\n\"    ybc[ 0 ] = ( -B - sqrt( B * B - 4.0 * A * C ) ) / ( 2.0 * A );\",\n\"    ybc[ 1 ] = ( -B + sqrt( B * B - 4.0 * A * C ) ) / ( 2.0 * A );\",\n\"    float sy = abs( ybc[ 0 ] - ybc[ 1 ]  ) * 0.5;\",\n\"\",\n\"    gl_Position.xy = vec2( 0.5 * ( xbc.x + xbc.y ), 0.5 * ( ybc.x + ybc.y ) );\",\n\"    gl_Position.xy -= mapping * vec2( sx, sy );\",\n\"    gl_Position.xy *= gl_Position.w;\",\n\"\",\n\"}\",\n\"\",\n\"  mat4 computeMat(vec4 v1, vec4 v2, vec4 v3, vec4 v4) {\",\n\"    return mat4(\",\n\"      v1.x, v1.y, v1.z, v1.w,\",\n\"      v2.x, v2.y, v2.z, v2.w,\",\n\"      v3.x, v3.y, v3.z, v3.w,\",\n\"      v4.x, v4.y, v4.z, v4.w\",\n\"    );\",\n\"  }\",\n\"\",\n\"void main(void){\",\n\"\",\n\"    #ifdef PICKING\",\n\"        vPickingColor = unpackColor( primitiveId );\",\n\"    #else\",\n\"        #include color_vertex\",\n\"    #endif\",\n\"\",\n\"    vRadius = radius * matrixScale( modelViewMatrix );\",\n\"\",\n\"    mat4 matrix = computeMat(matrix1, matrix2, matrix3, matrix4);\",\n\"    vec4 updatePosition = matrix * vec4(position, 1.0);\",\n\"\",\n\"//    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\",\n\"    vec4 mvPosition = modelViewMatrix * vec4( updatePosition.xyz, 1.0 );\",\n\"    // avoid clipping, added again in fragment shader\",\n\"    mvPosition.z -= vRadius;\",\n\"\",\n\"//    gl_Position = projectionMatrix * vec4( mvPosition.xyz, 1.0 );\",\n\"    gl_Position = projectionMatrix * vec4( mvPosition.xyz, 1.0 );\",\n\"    ComputePointSizeAndPositionInClipCoordSphere(updatePosition);\",\n\"\",\n\"\",\n\"    vRadiusSq = vRadius * vRadius;\",\n\"    vec4 vPoint4 = projectionMatrixInverse * gl_Position;\",\n\"    vPoint = vPoint4.xyz / vPoint4.w;\",\n\"    vPointViewPosition = -mvPosition.xyz / mvPosition.w;\",\n\"\",\n\"}\"\n].join(\"\\n\");\n\n$NGL_shaderTextHash['CylinderInstancing.frag'] = $NGL_shaderTextHash['CylinderImpostor.frag'];\n$NGL_shaderTextHash['CylinderInstancing.vert'] = [\"// Open-Source PyMOL is Copyright (C) Schrodinger, LLC.\",\n\"//\",\n\"//  All Rights Reserved\",\n\"//\",\n\"//  Permission to use, copy, modify, distribute, and distribute modified\",\n\"//  versions of this software and its built-in documentation for any\",\n\"//  purpose and without fee is hereby granted, provided that the above\",\n\"//  copyright notice appears in all copies and that both the copyright\",\n\"//  notice and this permission notice appear in supporting documentation,\",\n\"//  and that the name of Schrodinger, LLC not be used in advertising or\",\n\"//  publicity pertaining to distribution of the software without specific,\",\n\"//  written prior permission.\",\n\"//\",\n\"//  SCHRODINGER, LLC DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS SOFTWARE,\",\n\"//  INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS. IN\",\n\"//  NO EVENT SHALL SCHRODINGER, LLC BE LIABLE FOR ANY SPECIAL, INDIRECT OR\",\n\"//  CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS\",\n\"//  OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE\",\n\"//  OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE\",\n\"//  USE OR PERFORMANCE OF THIS SOFTWARE.\",\n\"\",\n\"// Contributions by Alexander Rose\",\n\"// - ported to WebGL\",\n\"// - dual color\",\n\"// - pk color\",\n\"// - shift\",\n\"\",\n\"attribute vec3 mapping;\",\n\"attribute vec3 position1;\",\n\"attribute vec3 position2;\",\n\"attribute float radius;\",\n\"attribute vec4 matrix1;\",\n\"attribute vec4 matrix2;\",\n\"attribute vec4 matrix3;\",\n\"attribute vec4 matrix4;\",\n\"\",\n\"varying vec3 axis;\",\n\"varying vec4 base_radius;\",\n\"varying vec4 end_b;\",\n\"varying vec3 U;\",\n\"varying vec3 V;\",\n\"varying vec4 w;\",\n\"varying float fogDepth;\",\n\"\",\n\"#ifdef PICKING\",\n\"    #include unpack_clr\",\n\"    attribute float primitiveId;\",\n\"    varying vec3 vPickingColor;\",\n\"#else\",\n\"    //attribute vec3 color;\",\n\"    attribute vec3 color2;\",\n\"    varying vec3 vColor1;\",\n\"    varying vec3 vColor2;\",\n\"#endif\",\n\"\",\n\"uniform mat4 modelViewMatrixInverse;\",\n\"uniform float ortho;\",\n\"\",\n\"//include matrix_scale\",\n\"float matrixScale( in mat4 m ){\",\n\"    vec4 r = m[ 0 ];\",\n\"    return sqrt( r[ 0 ] * r[ 0 ] + r[ 1 ] * r[ 1 ] + r[ 2 ] * r[ 2 ] );\",\n\"}\",\n\"\",\n\"  mat4 computeMat(vec4 v1, vec4 v2, vec4 v3, vec4 v4) {\",\n\"    return mat4(\",\n\"      v1.x, v1.y, v1.z, v1.w,\",\n\"      v2.x, v2.y, v2.z, v2.w,\",\n\"      v3.x, v3.y, v3.z, v3.w,\",\n\"      v4.x, v4.y, v4.z, v4.w\",\n\"    );\",\n\"  }\",\n\"\",\n\"void main(){\",\n\"\",\n\"    #ifdef PICKING\",\n\"        vPickingColor = unpackColor( primitiveId );\",\n\"    #else\",\n\"        vColor1 = color;\",\n\"        vColor2 = color2;\",\n\"    #endif\",\n\"\",\n\"    // vRadius = radius;\",\n\"    base_radius.w = radius * matrixScale( modelViewMatrix );\",\n\"\",\n\"    //vec3 center = ( position2 + position1 ) / 2.0;\",\n\"\",\n\"    mat4 matrix = computeMat(matrix1, matrix2, matrix3, matrix4);\",\n\"    vec4 updatePosition1 = matrix * vec4(position1, 1.0);\",\n\"    vec4 updatePosition2 = matrix * vec4(position2, 1.0);\",\n\"    vec3 center = ( updatePosition2.xyz + updatePosition1.xyz ) / 2.0;\",\n\"\",\n\"    //vec3 dir = normalize( position2 - position1 );\",\n\"    vec3 dir = normalize( updatePosition2.xyz - updatePosition1.xyz );\",\n\"    float ext = length( position2 - position1 ) / 2.0;\",\n\"\",\n\"    // using cameraPosition fails on some machines, not sure why\",\n\"    // vec3 cam_dir = normalize( cameraPosition - mix( center, vec3( 0.0 ), ortho ) );\",\n\"    vec3 cam_dir;\",\n\"    if( ortho == 0.0 ){\",\n\"        cam_dir = ( modelViewMatrixInverse * vec4( 0, 0, 0, 1 ) ).xyz - center;\",\n\"    }else{\",\n\"        cam_dir = ( modelViewMatrixInverse * vec4( 0, 0, 1, 0 ) ).xyz;\",\n\"    }\",\n\"    cam_dir = normalize( cam_dir );\",\n\"\",\n\"    vec3 ldir;\",\n\"\",\n\"    float b = dot( cam_dir, dir );\",\n\"    end_b.w = b;\",\n\"    // direction vector looks away, so flip\",\n\"    if( b < 0.0 )\",\n\"        ldir = -ext * dir;\",\n\"    // direction vector already looks in my direction\",\n\"    else\",\n\"        ldir = ext * dir;\",\n\"\",\n\"    vec3 left = normalize( cross( cam_dir, ldir ) );\",\n\"    left = radius * left;\",\n\"    vec3 up = radius * normalize( cross( left, ldir ) );\",\n\"\",\n\"    // transform to modelview coordinates\",\n\"    axis = normalize( normalMatrix * ldir );\",\n\"    U = normalize( normalMatrix * up );\",\n\"    V = normalize( normalMatrix * left );\",\n\"\",\n\"    vec4 base4 = modelViewMatrix * vec4( center - ldir, 1.0 );\",\n\"    base_radius.xyz = base4.xyz / base4.w;\",\n\"\",\n\"    vec4 top_position = modelViewMatrix * vec4( center + ldir, 1.0 );\",\n\"    vec4 end4 = top_position;\",\n\"    end_b.xyz = end4.xyz / end4.w;\",\n\"\",\n\"    w = modelViewMatrix * vec4(\",\n\"        center + mapping.x*ldir + mapping.y*left + mapping.z*up, 1.0\",\n\"    );\",\n\"\",\n\"    gl_Position = projectionMatrix * w;\",\n\"\",\n\"    // avoid clipping (1.0 seems to induce flickering with some drivers)\",\n\"    gl_Position.z = 0.99;\",\n\"\",\n\"}\"\n].join(\"\\n\");\n\n$NGL_shaderTextHash['Instancing.frag'] = [\"#define STANDARD\",\n\"uniform vec3 diffuse;\",\n\"uniform vec3 emissive;\",\n\"uniform float roughness;\",\n\"uniform float metalness;\",\n\"uniform float opacity;\",\n\"uniform float nearClip;\",\n\"uniform float clipRadius;\",\n\"uniform mat4 projectionMatrix;\",\n\"uniform float ortho;\",\n\"varying float bCylinder;\",\n\"\",\n\"#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || ( !defined( PICKING ) && !defined( NOLIGHT ) )\",\n\"    varying vec3 vViewPosition;\",\n\"#endif\",\n\"\",\n\"#if defined( RADIUS_CLIP )\",\n\"    varying vec3 vClipCenter;\",\n\"#endif\",\n\"\",\n\"#if defined( PICKING )\",\n\"    uniform float objectId;\",\n\"    varying vec3 vPickingColor;\",\n\"#elif defined( NOLIGHT )\",\n\"    varying vec3 vColor;\",\n\"#else\",\n\"    #ifndef FLAT_SHADED\",\n\"        varying vec3 vNormal;\",\n\"    #endif\",\n\"    #include common\",\n\"    #include color_pars_fragment\",\n\"    #include fog_pars_fragment\",\n\"    #include bsdfs\",\n\"    #include lights_pars_begin\",\n\"    #include lights_physical_pars_fragment\",\n\"#endif\",\n\"\",\n\"void main(){\",\n\"    #include nearclip_fragment\",\n\"    #include radiusclip_fragment\",\n\"\",\n\"    #if defined( PICKING )\",\n\"\",\n\"        gl_FragColor = vec4( vPickingColor, objectId );\",\n\"\",\n\"    #elif defined( NOLIGHT )\",\n\"\",\n\"        gl_FragColor = vec4( vColor, opacity );\",\n\"\",\n\"    #else\",\n\"\",\n\"        vec4 diffuseColor = vec4( diffuse, opacity );\",\n\"        ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\",\n\"        vec3 totalEmissiveLight = emissive;\",\n\"\",\n\"        #include color_fragment\",\n\"        #include roughnessmap_fragment\",\n\"        #include metalnessmap_fragment\",\n\"        #include normal_flip\",\n\"        #include normal_fragment_begin\",\n\"\",\n\"        //include dull_interior_fragment\",\n\"\",\n\"        #include lights_physical_fragment\",\n\"        //include lights_template\",\n\"        #include lights_fragment_begin\",\n\"        #include lights_fragment_end\",\n\"\",\n\"        vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveLight;\",\n\"\",\n\"        #include interior_fragment\",\n\"\",\n\"        gl_FragColor = vec4( outgoingLight, diffuseColor.a );\",\n\"\",\n\"        #include premultiplied_alpha_fragment\",\n\"        #include tonemapping_fragment\",\n\"        #include encodings_fragment\",\n\"        #include fog_fragment\",\n\"\",\n\"        #include opaque_back_fragment\",\n\"\",\n\"    #endif\",\n\"\",\n\"}\"\n].join(\"\\n\");\n\n$NGL_shaderTextHash['Instancing.vert'] = [\"#define STANDARD\",\n\"\",\n\"uniform mat4 projectionMatrixInverse;\",\n\"uniform float nearClip;\",\n\"uniform vec3 clipCenter;\",\n\"attribute vec4 matrix1;\",\n\"attribute vec4 matrix2;\",\n\"attribute vec4 matrix3;\",\n\"attribute vec4 matrix4;\",\n\"attribute float cylinder;\",\n\"varying float bCylinder;\",\n\"\",\n\"#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || ( !defined( PICKING ) && !defined( NOLIGHT ) )\",\n\"    varying vec3 vViewPosition;\",\n\"#endif\",\n\"\",\n\"#if defined( RADIUS_CLIP )\",\n\"    varying vec3 vClipCenter;\",\n\"#endif\",\n\"\",\n\"#if defined( PICKING )\",\n\"    #include unpack_color\",\n\"    attribute float primitiveId;\",\n\"    varying vec3 vPickingColor;\",\n\"#elif defined( NOLIGHT )\",\n\"    varying vec3 vColor;\",\n\"#else\",\n\"    #include color_pars_vertex\",\n\"    #ifndef FLAT_SHADED\",\n\"        varying vec3 vNormal;\",\n\"    #endif\",\n\"#endif\",\n\"\",\n\"#include common\",\n\"\",\n\"  mat4 computeMat(vec4 v1, vec4 v2, vec4 v3, vec4 v4) {\",\n\"    return mat4(\",\n\"      v1.x, v1.y, v1.z, v1.w,\",\n\"      v2.x, v2.y, v2.z, v2.w,\",\n\"      v3.x, v3.y, v3.z, v3.w,\",\n\"      v4.x, v4.y, v4.z, v4.w\",\n\"    );\",\n\"  }\",\n\"\",\n\"void main(){\",\n\"    bCylinder = cylinder;\",\n\"\",\n\"    mat4 matrix = computeMat(matrix1, matrix2, matrix3, matrix4);\",\n\"    vec4 updatePosition = matrix * vec4(position, 1.0);\",\n\"\",\n\"    #if defined( PICKING )\",\n\"        vPickingColor = unpackColor( primitiveId );\",\n\"    #elif defined( NOLIGHT )\",\n\"        vColor = color;\",\n\"    #else\",\n\"        #include color_vertex\",\n\"        //include beginnormal_vertex\",\n\"        //vec3 objectNormal = vec3( normal );\",\n\"        vec3 objectNormal = vec3(matrix * vec4(normal,0.0));\",\n\"        #include defaultnormal_vertex\",\n\"        // Normal computed with derivatives when FLAT_SHADED\",\n\"        #ifndef FLAT_SHADED\",\n\"            vNormal = normalize( transformedNormal );\",\n\"        #endif\",\n\"    #endif\",\n\"\",\n\"    //include begin_vertex\",\n\"    vec3 transformed = updatePosition.xyz;\",\n\"    //include project_vertex\",\n\"    vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\",\n\"    gl_Position = projectionMatrix * mvPosition;\",\n\"\",\n\"    #if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || ( !defined( PICKING ) && !defined( NOLIGHT ) )\",\n\"        vViewPosition = -mvPosition.xyz;\",\n\"    #endif\",\n\"\",\n\"    #if defined( RADIUS_CLIP )\",\n\"        vClipCenter = -( modelViewMatrix * vec4( clipCenter, 1.0 ) ).xyz;\",\n\"    #endif\",\n\"\",\n\"    #include nearclip_vertex\",\n\"\",\n\"}\"\n].join(\"\\n\");\n\n/**\n * @author Jiyao Wang <wangjiy@ncbi.nlm.nih.gov> / https://github.com/ncbi/icn3d\n */\n\nif (typeof jQuery === 'undefined') { throw new Error('iCn3D requires jQuery') }\n\nvar iCn3D = function (id) {\n    this.id = id;\n\n    this.container = $('#' + id);\n\n    this.maxatomcnt = 100000; // for a biological assembly, use instancing when the total number of atomsis greater than \"maxatomcnt\"\n\n    this.overdraw = 0;\n\n    this.bDrawn = false;\n\n    this.bSecondaryStructure = false;\n\n    this.bHighlight = 1; // undefined: no highlight, 1: highlight by outline, 2: highlight by 3D object\n    this.renderOrderPicking = -1; // less than 0, the default order is 0\n\n    this.ALTERNATE_STRUCTURE = -1;\n\n    if(Detector.webgl){\n        this.renderer = new THREE.WebGLRenderer({\n            canvas: this.container.get(0),\n            antialias: true,\n            preserveDrawingBuffer: true,\n            sortObjects: false,\n            alpha: true\n        });\n\n        this.overdraw = 0;\n    }\n    else {\n        alert(\"Currently your web browser has a problem on WebGL. If you are using Chrome, open a new tab for the same URL and WebGL may work again.\");\n/*\n        alert(\"Currently your web browser has a problem on WebGL, and CanvasRenderer instead of WebGLRenderer is used. If you are using Chrome, open a new tab for the same URL and WebGL may work again.\");\n\n        this.renderer = new THREE.CanvasRenderer({\n            canvas: this.container.get(0)\n        });\n\n        //http://threejs.org/docs/api/materials/Material.html\n        this.overdraw = 0.5;\n\n        // only WebGL support outlines using ShaderMaterial\n        this.bHighlight = 2;\n*/\n    }\n\n    this.matShader = this.setOutlineColor('yellow');\n    this.frac = new THREE.Color(0.1, 0.1, 0.1);\n\n    // mobile has a problem when the scaleFactor is 2.0\n    // the scaleFactor improve the image quality\n    this.scaleFactor = 1.5;\n\n    // Impostor shaders\n    this.bImpo = true;\n    this.bExtFragDepth = this.renderer.extensions.get( \"EXT_frag_depth\" );\n    if(!this.bExtFragDepth) {\n        this.bImpo = false;\n        console.log('EXT_frag_depth is NOT supported. All spheres and cylinders are drawn using geometry.');\n    }\n    else {\n        console.log('EXT_frag_depth is supported. All spheres and cylinders are drawn using shaders.');\n    }\n\n    this.bInstanced = this.renderer.extensions.get( \"ANGLE_instanced_arrays\" );\n    if(!this.bInstanced) {\n        console.log('ANGLE_instanced_arrays is NOT supported. Assembly is drawn by making copies of the asymmetric unit.');\n    }\n    else {\n        console.log('ANGLE_instanced_arrays is supported. Assembly is drawn with one copy of the asymmetric unit using hardware instancing.');\n    }\n\n        // cylinder impostor\n    this.posArray = new Array();\n    this.colorArray = new Array();\n\n    this.pos2Array = new Array();\n    this.color2Array = new Array();\n\n    this.radiusArray = new Array();\n\n        // sphere impostor\n    this.posArraySphere = new Array();\n    this.colorArraySphere = new Array();\n    this.radiusArraySphere = new Array();\n\n    // adjust the size\n    this.WIDTH = this.container.width(), this.HEIGHT = this.container.height();\n    this.setWidthHeight(this.WIDTH, this.HEIGHT);\n\n    this.axis = false;  // used to turn on and off xyz axes\n\n    // pk\n    this.pk = 1; // 0: no pk, 1: pk on atoms, 2: pk on residues, 3: pk on strand/helix/coil, 4: pk on chain\n    this.highlightlevel = 1; // 1: highlight on atoms, 2: highlight on residues, 3: highlight on strand/helix/coil 4: highlight on chain 5: highlight on structure\n\n    this.pickpair = false; // used for pk pair of atoms for label and distance\n    this.pAtomNum = 0;\n\n    this.pAtom = undefined;\n    this.pAtom2 = undefined;\n\n    this.bCtrl = false; // if true, union selection on sequence window or on 3D structure\n    this.bShift = false; // if true, select a range on 3D structure\n\n    this.bStopRotate = false; // by default, do not stop the possible automatic rotation\n    this.bCalphaOnly = false; // by default the input has both Calpha and O, used for drawing strands. If atoms have Calpha only, the orientation of the strands is random\n//    this.bSSOnly = false; // a flag to turn on when only helix and bricks are available to draw 3D dgm\n\n    this.bAllAtoms = true; // no need to adjust atom for strand style\n\n    this.bConsiderNeighbors = false; // a flag to show surface considering the neighboring atoms or not\n\n    this.bShowCrossResidueBond = false;\n\n    this.effects = {\n        //'anaglyph': new THREE.AnaglyphEffect(this.renderer),\n        //'parallax barrier': new THREE.ParallaxBarrierEffect(this.renderer),\n        //'oculus rift': new THREE.OculusRiftEffect(this.renderer),\n        //'stereo': new THREE.StereoEffect(this.renderer),\n        'none': this.renderer\n    };\n\n    this.maxD = 500; // size of the molecule\n    this.oriMaxD = this.maxD; // size of the molecule\n    //this.cam_z = -150;\n\n    this.cam_z = this.maxD * 2; // when zooming in, it gets dark if the camera is in front\n    //this.cam_z = -this.maxD * 2;\n\n    // these variables will not be cleared for each structure\n    this.commands = []; // a list of commands, ordered by the operation steps. Each operation will be converted into a command. this command list can be used to go backward and forward.\n    this.optsHistory = []; // a list of options corresponding to this.commands.\n    this.logs = []; // a list of comands and other logs, ordered by the operation steps.\n\n    this.bRender = true; // a flag to turn off rendering when loading state file\n\n    // Default values\n    this.hColor = new THREE.Color(0xFFFF00);\n\n    this.sphereGeometry = new THREE.SphereGeometry(1, 32, 32);\n    this.boxGeometry = new THREE.BoxGeometry(1, 1, 1);\n    this.cylinderGeometry = new THREE.CylinderGeometry(1, 1, 1, 32, 1);\n    this.cylinderGeometryOutline = new THREE.CylinderGeometry(1, 1, 1, 32, 1, true);\n    this.axisDIV = 5; // 3\n    this.strandDIV = 6;\n    this.tubeDIV = 8;\n    this.nucleicAcidStrandDIV = 6; //4;\n\n    this.linewidth = 1;\n    this.hlLineRadius = 0.1; // style line, highlight\n    //this.curveWidth = 3;\n\n    this.lineRadius = 0.1; // hbonds, distance lines\n    this.coilWidth = 0.3; //0.4; // style cartoon-coil\n    this.cylinderRadius = 0.4; // style stick\n    this.traceRadius = 0.4; //0.2; // c alpha trace, nucleotide stick\n    this.dotSphereScale = 0.3; // style ball and stick, dot\n    this.sphereRadius = 1.5; // style sphere\n    this.cylinderHelixRadius = 1.6; // style sylinder and plate\n\n    this.ribbonthickness = 0.2; // 0.4; // style ribbon, nucleotide cartoon, stand thickness\n    this.helixSheetWidth = 1.3; // style ribbon, nucleotide cartoon, stand thickness\n    this.nucleicAcidWidth = 0.8; // nucleotide cartoon\n\n    this.threshbox = 180; // maximum possible boxsize, default 180\n    this.maxAtoms3DMultiFile = 40000; // above the threshold, multiple files wil be output for 3D printing\n\n    this.LABELSIZE = 30;\n\n    this.opts = {\n        camera: 'perspective',\n        background: 'transparent',\n        color: 'chain',\n        sidec: 'nothing',\n        proteins: 'ribbon',\n        nucleotides: 'nucleotide cartoon',\n        surface: 'nothing',\n        wireframe: 'no',\n        map: 'nothing',\n        mapwireframe: 'yes',\n        emmap: 'nothing',\n        emmapwireframe: 'yes',\n        opacity: '1.0',\n        chemicals: 'stick',\n        water: 'nothing',\n        ions: 'sphere',\n        //labels: 'no',\n        //effect: 'none',\n        hbonds: 'no',\n        //stabilizer: 'no',\n        ssbonds: 'no',\n        //ncbonds: 'no',\n        labels: 'no',\n        lines: 'no',\n        rotationcenter: 'molecule center',\n        axis: 'no',\n        fog: 'no',\n        slab: 'no',\n        pk: 'residue',\n        nucleotides: 'nucleotide cartoon',\n        chemicalbinding: 'hide'\n    };\n\n    this._zoomFactor = 1.0;\n    this.mouseChange = new THREE.Vector2(0,0);\n    this.quaternion = new THREE.Quaternion(0,0,0,1);\n\n    var me = this;\n    this.container.bind('contextmn', function (e) {\n        e.preventDefault();\n    });\n\n    //me.switchHighlightLevel();\n\n    // key event has to use the document because it requires the focus\n    me.typetext = false;\n\n    //http://unixpapa.com/js/key.html\n    $(document).bind('keyup', function (e) {\n      if(e.keyCode === 16) { // shiftKey\n          me.bShift = false;\n      }\n      if(e.keyCode === 17 || e.keyCode === 224 || e.keyCode === 91) { // ctrlKey or apple command key\n          me.bCtrl = false;\n      }\n    });\n\n    $('input[type=text], textarea').focus(function() {\n        me.typetext = true;\n    });\n\n    $('input[type=text], textarea').blur(function() {\n        me.typetext = false;\n    });\n\n    $(document).bind('keydown', function (e) {\n      if(e.shiftKey || e.keyCode === 16) {\n          me.bShift = true;\n      }\n      if(e.ctrlKey || e.keyCode === 17 || e.keyCode === 224 || e.keyCode === 91) {\n          me.bCtrl = true;\n      }\n\n      if (!me.controls) return;\n\n      me.bStopRotate = true;\n\n      if(!me.typetext) {\n        // zoom\n        if(e.keyCode === 90 ) { // Z\n          var para = {};\n\n          if(me.cam === me.perspectiveCamera) { // perspective\n            para._zoomFactor = 0.9;\n          }\n          else if(me.cam === me.orthographicCamera) {  // orthographics\n            if(me._zoomFactor < 0.1) {\n              me._zoomFactor = 0.1;\n            }\n            else if(me._zoomFactor > 1) {\n              me._zoomFactor = 1;\n            }\n\n            para._zoomFactor = me._zoomFactor * 0.8;\n            if(para._zoomFactor < 0.1) para._zoomFactor = 0.1;\n          }\n\n          para.update = true;\n          me.controls.update(para);\n          me.render();\n        }\n        else if(e.keyCode === 88 ) { // X\n          var para = {};\n\n          if(me.cam === me.perspectiveCamera) { // perspective\n            //para._zoomFactor = 1.1;\n            para._zoomFactor = 1.03;\n          }\n          else if(me.cam === me.orthographicCamera) {  // orthographics\n            if(me._zoomFactor > 10) {\n              me._zoomFactor = 10;\n            }\n            else if(me._zoomFactor < 1) {\n              me._zoomFactor = 1;\n            }\n\n            para._zoomFactor = me._zoomFactor * 1.01;\n            if(para._zoomFactor > 10) para._zoomFactor = 10;\n          }\n\n          para.update = true;\n          me.controls.update(para);\n          me.render();\n        }\n\n        // rotate\n        else if(e.keyCode === 76 ) { // L, rotate left\n          var axis = new THREE.Vector3(0,1,0);\n          var angle = -5.0 / 180.0 * Math.PI;\n\n          me.setRotation(axis, angle);\n        }\n        else if(e.keyCode === 74 ) { // J, rotate right\n          var axis = new THREE.Vector3(0,1,0);\n          var angle = 5.0 / 180.0 * Math.PI;\n\n          me.setRotation(axis, angle);\n        }\n        else if(e.keyCode === 73 ) { // I, rotate up\n          var axis = new THREE.Vector3(1,0,0);\n          var angle = -5.0 / 180.0 * Math.PI;\n\n          me.setRotation(axis, angle);\n        }\n        else if(e.keyCode === 77 ) { // M, rotate down\n          var axis = new THREE.Vector3(1,0,0);\n          var angle = 5.0 / 180.0 * Math.PI;\n\n          me.setRotation(axis, angle);\n        }\n\n        else if(e.keyCode === 65 ) { // A, alternate\n           if(Object.keys(me.structures).length > 1) {\n               me.alternateStructures();\n           }\n        }\n\n      }\n    });\n\n    this.container.bind('mouseup touchend', function (e) {\n        me.isDragging = false;\n    });\n    //this.container.bind('mousedown touchstart', function (e) {\n    this.container.bind('mousedown', function (e) {\n        e.preventDefault();\n        me.isDragging = true;\n\n        if (!me.scene) return;\n\n        me.bStopRotate = true;\n\n        if(me.pk && (e.altKey || e.ctrlKey || e.shiftKey || e.keyCode === 18 || e.keyCode === 16 || e.keyCode === 17 || e.keyCode === 224 || e.keyCode === 91) ) {\n            me.highlightlevel = me.pk;\n\n            var bClick = true;\n            me.rayCaster(e, bClick);\n        }\n\n        me.controls.handleResize();\n        me.controls.update();\n        me.render();\n    });\n\n    this.container.bind('touchstart', function (e) {\n        e.preventDefault();\n        me.isDragging = true;\n\n        if (!me.scene) return;\n\n        me.bStopRotate = true;\n\n        $(\"[id$=popup]\").hide();\n\n        //var bClick = false;\n        var bClick = true;\n        me.rayCaster(e, bClick);\n\n        me.controls.handleResize();\n        me.controls.update();\n        me.render();\n    });\n\n    this.container.bind('mousemove touchmove', function (e) {\n        e.preventDefault();\n        if (!me.scene) return;\n        // no action when no mouse button is clicked and no key was down\n        //if (!me.isDragging) return;\n\n        $(\"[id$=popup]\").hide();\n\n        var bClick = false;\n        me.rayCaster(e, bClick);\n\n        if(me.isDragging) {\n            me.controls.handleResize();\n            me.controls.update();\n            me.render();\n        }\n    });\n    this.container.bind('mousewheel', function (e) {\n        e.preventDefault();\n        if (!me.scene) return;\n\n        me.bStopRotate = true;\n\n        me.controls.handleResize();\n        me.controls.update();\n\n        me.render();\n    });\n    this.container.bind('DOMMouseScroll', function (e) {\n        e.preventDefault();\n        if (!me.scene) return;\n\n        me.bStopRotate = true;\n\n        me.controls.handleResize();\n        me.controls.update();\n\n        me.render();\n    });\n};\n\niCn3D.prototype = {\n\n    constructor: iCn3D,\n\n    rayCaster: function(e, bClick) { var me = this;\n        var x = e.pageX, y = e.pageY;\n        if (e.originalEvent.targetTouches && e.originalEvent.targetTouches[0]) {\n            x = e.originalEvent.targetTouches[0].pageX;\n            y = e.originalEvent.targetTouches[0].pageY;\n        }\n\n        var popupX = x - me.container.offset().left;\n        var popupY = y - me.container.offset().top;\n\n        //me.isDragging = true;\n\n        // see ref http://soledadpenades.com/articles/three-js-tutorials/object-pk/\n        //if(me.pk && (e.altKey || e.ctrlKey || e.shiftKey || e.keyCode === 18 || e.keyCode === 16 || e.keyCode === 17 || e.keyCode === 224 || e.keyCode === 91) ) {\n        //    me.highlightlevel = me.pk;\n\n            me.mouse.x = ( (x - me.container.offset().left) / me.container.width() ) * 2 - 1;\n            me.mouse.y = - ( (y - me.container.offset().top) / me.container.height() ) * 2 + 1;\n\n            var mouse3 = new THREE.Vector3();\n            mouse3.x = me.mouse.x;\n            mouse3.y = me.mouse.y;\n            //mouse3.z = 0.5;\n            if(this.cam_z > 0) {\n              mouse3.z = -1.0; // between -1 to 1. The z positio of mouse in the real world should be between the camera and the target.\"-1\" worked in our case.\n            }\n            else {\n              mouse3.z = 1.0; // between -1 to 1. The z positio of mouse in the real world should be between the camera and the target.\"-1\" worked in our case.\n            }\n\n            // similar to setFromCamera() except mouse3.z is the opposite sign from the value in setFromCamera()\n            if(me.cam === me.perspectiveCamera) { // perspective\n                if(this.cam_z > 0) {\n                  mouse3.z = -1.0;\n                }\n                else {\n                  mouse3.z = 1.0;\n                }\n                //me.projector.unprojectVector( mouse3, me.cam );  // works for all versions\n                mouse3.unproject(me.cam );  // works for all versions\n                me.raycaster.set(me.cam.position, mouse3.sub(me.cam.position).normalize()); // works for all versions\n            }\n            else if(me.cam === me.orthographicCamera) {  // orthographics\n                if(this.cam_z > 0) {\n                  mouse3.z = 1.0;\n                }\n                else {\n                  mouse3.z = -1.0;\n                }\n                //me.projector.unprojectVector( mouse3, me.cam );  // works for all versions\n                mouse3.unproject(me.cam );  // works for all versions\n                me.raycaster.set(mouse3, new THREE.Vector3(0,0,-1).transformDirection( me.cam.matrixWorld )); // works for all versions\n            }\n\n            var intersects = me.raycaster.intersectObjects( me.objects ); // not all \"mdl\" group will be used for pk\n\n            var bFound = false;\n\n            var position = me.mdl.position;\n            if ( intersects.length > 0 ) {\n                // the intersections are sorted so that the closest point is the first one.\n                intersects[ 0 ].point.sub(position); // mdl.position was moved to the original (0,0,0) after reading the molecule coordinates. The raycasting was done based on the original. The positio of the ooriginal should be substracted.\n\n                var threshold = 0.5;\n                var atom = me.getAtomsFromPosition(intersects[ 0 ].point, threshold); // the second parameter is the distance threshold. The first matched atom will be returned. Use 1 angstrom, not 2 angstrom. If it's 2 angstrom, other atom will be returned.\n\n                while(!atom && threshold < 10) {\n                    threshold = threshold + 0.5;\n                    atom = me.getAtomsFromPosition(intersects[ 0 ].point, threshold);\n                }\n\n                if(atom) {\n                    bFound = true;\n                    if(me.pickpair) {\n                        if(bClick) {\n                          if(me.pAtomNum % 2 === 0) {\n                            me.pAtom = atom;\n                          }\n                          else {\n                            me.pAtom2 = atom;\n                          }\n\n                          ++me.pAtomNum;\n                        }\n                    }\n                    else {\n                      me.pAtom = atom;\n                    }\n\n                    if(bClick) {\n                      me.showPicking(atom);\n                    }\n                    else {\n                      me.showPicking(atom, popupX, popupY);\n                    }\n                }\n                else {\n                    console.log(\"No atoms were found in 10 andstrom range\");\n                }\n            } // end if\n\n            if(!bFound) {\n                intersects = me.raycaster.intersectObjects( me.objects_ghost ); // not all \"mdl\" group will be used for pk\n\n                position = me.mdl_ghost.position;\n                if ( intersects.length > 0 ) {\n                    // the intersections are sorted so that the closest point is the first one.\n                    intersects[ 0 ].point.sub(position); // mdl.position was moved to the original (0,0,0) after reading the molecule coordinates. The raycasting was done based on the original. The positio of the ooriginal should be substracted.\n\n                    var threshold = 0.5;\n                    var atom = me.getAtomsFromPosition(intersects[ 0 ].point, threshold); // the second parameter is the distance threshold. The first matched atom will be returned. Use 1 angstrom, not 2 angstrom. If it's 2 angstrom, other atom will be returned.\n\n                    while(!atom && threshold < 10) {\n                        threshold = threshold + 0.5;\n                        atom = me.getAtomsFromPosition(intersects[ 0 ].point, threshold);\n                    }\n\n                    if(atom) {\n                        if(me.pickpair) {\n                            if(bClick) {\n                              if(me.pAtomNum % 2 === 0) {\n                                me.pAtom = atom;\n                              }\n                              else {\n                                me.pAtom2 = atom;\n                              }\n\n                              ++me.pAtomNum;\n                            }\n                        }\n                        else {\n                          me.pAtom = atom;\n                        }\n\n                        if(bClick) {\n                          me.showPicking(atom);\n                        }\n                        else {\n                          me.showPicking(atom, popupX, popupY);\n                        }\n                    }\n                    else {\n                        console.log(\"No atoms were found in 10 andstrom range\");\n                    }\n                } // end if\n            }\n        //}\n    },\n\n    setRotation: function(axis, angle) { var me = this;\n          axis.applyQuaternion( me.cam.quaternion ).normalize();\n\n          var quaternion = new THREE.Quaternion();\n          quaternion.setFromAxisAngle( axis, -angle );\n\n          var para = {};\n          para.quaternion = quaternion;\n          para.update = true;\n\n          me.controls.update(para);\n          me.render();\n    },\n\n    setOutlineColor: function(colorStr) {\n        // outline using ShaderMaterial: http://jsfiddle.net/Eskel/g593q/9/\n        var shader = {\n            'outline' : {\n                vertex_shader: [\n                    \"uniform float offset;\",\n                    \"void main() {\",\n                        \"vec4 pos = modelViewMatrix * vec4( position + normal * offset, 1.0 );\",\n                        \"gl_Position = projectionMatrix * pos;\",\n                    \"}\"\n                ].join(\"\\n\"),\n\n                fragment_shader: [\n                    \"void main(){\",\n                        \"gl_FragColor = vec4( 1.0, 1.0, 0.0, 1.0 );\",\n                    \"}\"\n                ].join(\"\\n\")\n            }\n        };\n\n        if(colorStr === 'yellow') {\n           shader.outline.fragment_shader = [\n               \"void main(){\",\n                   \"gl_FragColor = vec4( 1.0, 1.0, 0.0, 1.0 );\",\n               \"}\"\n           ].join(\"\\n\");\n        }\n        else if(colorStr === 'green') {\n           shader.outline.fragment_shader = [\n               \"void main(){\",\n                   \"gl_FragColor = vec4( 0.0, 1.0, 0.0, 1.0 );\",\n               \"}\"\n           ].join(\"\\n\");\n        }\n        else if(colorStr === 'red') {\n           shader.outline.fragment_shader = [\n               \"void main(){\",\n                   \"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\",\n               \"}\"\n           ].join(\"\\n\");\n        }\n\n        // shader\n        var uniforms = {offset: {\n            type: \"f\",\n            //value: 1\n            value: 0.5\n          }\n        };\n\n        var outShader = shader['outline'];\n\n        var matShader = new THREE.ShaderMaterial({\n            uniforms: uniforms,\n            vertexShader: outShader.vertex_shader,\n            fragmentShader: outShader.fragment_shader,\n            depthTest: false,\n            depthWrite: false,\n            needsUpdate: true\n        });\n\n        return matShader;\n    },\n\n    // modified from iview (http://istar.cse.cuhk.edu.hk/iview/)\n    setWidthHeight: function(width, height) {\n        //this.renderer.setSize(width, height);\n\n        //antialiasing by render twice large:\n        //https://stackoverflow.com/questions/17224795/antialiasing-not-working-in-three-js\n        this.renderer.setSize(width*this.scaleFactor, height*this.scaleFactor);\n        this.renderer.domElement.style.width = width + \"px\";\n        this.renderer.domElement.style.height = height + \"px\";\n        this.renderer.domElement.width = width*this.scaleFactor;\n        this.renderer.domElement.height = height*this.scaleFactor;\n\n        this.container.widthInv  = 1 / (this.scaleFactor*width);\n        this.container.heightInv = 1 / (this.scaleFactor*height);\n        this.container.whratio = width / height;\n    },\n\n    // added nucleotides and ions\n    nucleotidesArray: ['  G', '  A', '  T', '  C', '  U', ' DG', ' DA', ' DT', ' DC', ' DU'],\n\n    ionsArray: ['  K', ' NA', ' MG', ' AL', ' CA', ' TI', ' MN', ' FE', ' NI', ' CU', ' ZN', ' AG', ' BA', '  F', ' CL', ' BR', '  I'],\n\n    vdwRadii: { // Hu, S.Z.; Zhou, Z.H.; Tsai, K.R. Acta Phys.-Chim. Sin., 2003, 19:1073.\n         H: 1.08,\n        HE: 1.34,\n        LI: 1.75,\n        BE: 2.05,\n         B: 1.47,\n         C: 1.49,\n         N: 1.41,\n         O: 1.40,\n         F: 1.39,\n        NE: 1.68,\n        NA: 1.84,\n        MG: 2.05,\n        AL: 2.11,\n        SI: 2.07,\n         P: 1.92,\n         S: 1.82,\n        CL: 1.83,\n        AR: 1.93,\n         K: 2.05,\n        CA: 2.21,\n        SC: 2.16,\n        TI: 1.87,\n         V: 1.79,\n        CR: 1.89,\n        MN: 1.97,\n        FE: 1.94,\n        CO: 1.92,\n        NI: 1.84,\n        CU: 1.86,\n        ZN: 2.10,\n        GA: 2.08,\n        GE: 2.15,\n        AS: 2.06,\n        SE: 1.93,\n        BR: 1.98,\n        KR: 2.12,\n        RB: 2.16,\n        SR: 2.24,\n         Y: 2.19,\n        ZR: 1.86,\n        NB: 2.07,\n        MO: 2.09,\n        TC: 2.09,\n        RU: 2.07,\n        RH: 1.95,\n        PD: 2.02,\n        AG: 2.03,\n        CD: 2.30,\n        IN: 2.36,\n        SN: 2.33,\n        SB: 2.25,\n        TE: 2.23,\n         I: 2.23,\n        XE: 2.21,\n        CS: 2.22,\n        BA: 2.51,\n        LA: 2.40,\n        CE: 2.35,\n        PR: 2.39,\n        ND: 2.29,\n        PM: 2.36,\n        SM: 2.29,\n        EU: 2.33,\n        GD: 2.37,\n        TB: 2.21,\n        DY: 2.29,\n        HO: 2.16,\n        ER: 2.35,\n        TM: 2.27,\n        YB: 2.42,\n        LU: 2.21,\n        HF: 2.12,\n        TA: 2.17,\n         W: 2.10,\n        RE: 2.17,\n        OS: 2.16,\n        IR: 2.02,\n        PT: 2.09,\n        AU: 2.17,\n        HG: 2.09,\n        TL: 2.35,\n        PB: 2.32,\n        BI: 2.43,\n        PO: 2.29,\n        AT: 2.36,\n        RN: 2.43,\n        FR: 2.56,\n        RA: 2.43,\n        AC: 2.60,\n        TH: 2.37,\n        PA: 2.43,\n         U: 2.40,\n        NP: 2.21,\n        PU: 2.56,\n        AM: 2.56,\n        CM: 2.56,\n        BK: 2.56,\n        CF: 2.56,\n        ES: 2.56,\n        FM: 2.56,\n    },\n\n    covalentRadii: { // http://en.wikipedia.org/wiki/Covalent_radius\n         H: 0.31,\n        HE: 0.28,\n        LI: 1.28,\n        BE: 0.96,\n         B: 0.84,\n         C: 0.76,\n         N: 0.71,\n         O: 0.66,\n         F: 0.57,\n        NE: 0.58,\n        NA: 1.66,\n        MG: 1.41,\n        AL: 1.21,\n        SI: 1.11,\n         P: 1.07,\n         S: 1.05,\n        CL: 1.02,\n        AR: 1.06,\n         K: 2.03,\n        CA: 1.76,\n        SC: 1.70,\n        TI: 1.60,\n         V: 1.53,\n        CR: 1.39,\n        MN: 1.39,\n        FE: 1.32,\n        CO: 1.26,\n        NI: 1.24,\n        CU: 1.32,\n        ZN: 1.22,\n        GA: 1.22,\n        GE: 1.20,\n        AS: 1.19,\n        SE: 1.20,\n        BR: 1.20,\n        KR: 1.16,\n        RB: 2.20,\n        SR: 1.95,\n         Y: 1.90,\n        ZR: 1.75,\n        NB: 1.64,\n        MO: 1.54,\n        TC: 1.47,\n        RU: 1.46,\n        RH: 1.42,\n        PD: 1.39,\n        AG: 1.45,\n        CD: 1.44,\n        IN: 1.42,\n        SN: 1.39,\n        SB: 1.39,\n        TE: 1.38,\n         I: 1.39,\n        XE: 1.40,\n        CS: 2.44,\n        BA: 2.15,\n        LA: 2.07,\n        CE: 2.04,\n        PR: 2.03,\n        ND: 2.01,\n        PM: 1.99,\n        SM: 1.98,\n        EU: 1.98,\n        GD: 1.96,\n        TB: 1.94,\n        DY: 1.92,\n        HO: 1.92,\n        ER: 1.89,\n        TM: 1.90,\n        YB: 1.87,\n        LU: 1.87,\n        HF: 1.75,\n        TA: 1.70,\n         W: 1.62,\n        RE: 1.51,\n        OS: 1.44,\n        IR: 1.41,\n        PT: 1.36,\n        AU: 1.36,\n        HG: 1.32,\n        TL: 1.45,\n        PB: 1.46,\n        BI: 1.48,\n        PO: 1.40,\n        AT: 1.50,\n        RN: 1.50,\n        FR: 2.60,\n        RA: 2.21,\n        AC: 2.15,\n        TH: 2.06,\n        PA: 2.00,\n         U: 1.96,\n        NP: 1.90,\n        PU: 1.87,\n        AM: 1.80,\n        CM: 1.69,\n    },\n\n    //rasmol-like element colors\n    atomColors: {\n        'H': new THREE.Color(0xFFFFFF),\n        'He': new THREE.Color(0xFFC0CB),\n        'HE': new THREE.Color(0xFFC0CB),\n        'Li': new THREE.Color(0xB22222),\n        'LI': new THREE.Color(0xB22222),\n        'B': new THREE.Color(0x00FF00),\n        'C': new THREE.Color(0xC8C8C8),\n        'N': new THREE.Color(0x8F8FFF),\n        'O': new THREE.Color(0xF00000),\n        'F': new THREE.Color(0xDAA520),\n        'Na': new THREE.Color(0x0000FF),\n        'NA': new THREE.Color(0x0000FF),\n        'Mg': new THREE.Color(0x228B22),\n        'MG': new THREE.Color(0x228B22),\n        'Al': new THREE.Color(0x808090),\n        'AL': new THREE.Color(0x808090),\n        'Si': new THREE.Color(0xDAA520),\n        'SI': new THREE.Color(0xDAA520),\n        'P': new THREE.Color(0xFFA500),\n        'S': new THREE.Color(0xFFC832),\n        'Cl': new THREE.Color(0x00FF00),\n        'CL': new THREE.Color(0x00FF00),\n        'Ca': new THREE.Color(0x808090),\n        'CA': new THREE.Color(0x808090),\n        'Ti': new THREE.Color(0x808090),\n        'TI': new THREE.Color(0x808090),\n        'Cr': new THREE.Color(0x808090),\n        'CR': new THREE.Color(0x808090),\n        'Mn': new THREE.Color(0x808090),\n        'MN': new THREE.Color(0x808090),\n        'Fe': new THREE.Color(0xFFA500),\n        'FE': new THREE.Color(0xFFA500),\n        'Ni': new THREE.Color(0xA52A2A),\n        'NI': new THREE.Color(0xA52A2A),\n        'Cu': new THREE.Color(0xA52A2A),\n        'CU': new THREE.Color(0xA52A2A),\n        'Zn': new THREE.Color(0xA52A2A),\n        'ZN': new THREE.Color(0xA52A2A),\n        'Br': new THREE.Color(0xA52A2A),\n        'BR': new THREE.Color(0xA52A2A),\n        'Ag': new THREE.Color(0x808090),\n        'AG': new THREE.Color(0x808090),\n        'I': new THREE.Color(0xA020F0),\n        'Ba': new THREE.Color(0xFFA500),\n        'BA': new THREE.Color(0xFFA500),\n        'Au': new THREE.Color(0xDAA520),\n        'AU': new THREE.Color(0xDAA520)\n    },\n\n    defaultAtomColor: new THREE.Color(0xCCCCCC),\n\n    stdChainColors: [\n            // first 6 colors from MMDB\n            new THREE.Color(0xFF00FF),\n            new THREE.Color(0x0000FF),\n            new THREE.Color(0x996633),\n            new THREE.Color(0x00FF99),\n            new THREE.Color(0xFF9900),\n            new THREE.Color(0xFF6666),\n\n            new THREE.Color(0x32CD32),\n            new THREE.Color(0x1E90FF),\n            new THREE.Color(0xFA8072),\n            new THREE.Color(0xFFA500),\n            new THREE.Color(0x00CED1),\n            new THREE.Color(0xFF69B4),\n\n            new THREE.Color(0x00FF00),\n            new THREE.Color(0x0000FF),\n            new THREE.Color(0xFF0000),\n            new THREE.Color(0xFFFF00),\n            new THREE.Color(0x00FFFF),\n            new THREE.Color(0xFF00FF),\n\n            new THREE.Color(0x3CB371),\n            new THREE.Color(0x4682B4),\n            new THREE.Color(0xCD5C5C),\n            new THREE.Color(0xFFE4B5),\n            new THREE.Color(0xAFEEEE),\n            new THREE.Color(0xEE82EE),\n\n            new THREE.Color(0x006400),\n            new THREE.Color(0x00008B),\n            new THREE.Color(0x8B0000),\n            new THREE.Color(0xCD853F),\n            new THREE.Color(0x008B8B),\n            new THREE.Color(0x9400D3)\n        ],\n\n    backgroundColors: {\n        black: new THREE.Color(0x000000),\n         grey: new THREE.Color(0xCCCCCC),\n        white: new THREE.Color(0xFFFFFF),\n        transparent: new THREE.Color(0x000000)\n    },\n\n    residueColors: {\n        ALA: new THREE.Color(0xC8C8C8),\n        ARG: new THREE.Color(0x145AFF),\n        ASN: new THREE.Color(0x00DCDC),\n        ASP: new THREE.Color(0xE60A0A),\n        CYS: new THREE.Color(0xE6E600),\n        GLN: new THREE.Color(0x00DCDC),\n        GLU: new THREE.Color(0xE60A0A),\n        GLY: new THREE.Color(0xEBEBEB),\n        HIS: new THREE.Color(0x8282D2),\n        ILE: new THREE.Color(0x0F820F),\n        LEU: new THREE.Color(0x0F820F),\n        LYS: new THREE.Color(0x145AFF),\n        MET: new THREE.Color(0xE6E600),\n        PHE: new THREE.Color(0x3232AA),\n        PRO: new THREE.Color(0xDC9682),\n        SER: new THREE.Color(0xFA9600),\n        THR: new THREE.Color(0xFA9600),\n        TRP: new THREE.Color(0xB45AB4),\n        TYR: new THREE.Color(0x3232AA),\n        VAL: new THREE.Color(0x0F820F),\n        ASX: new THREE.Color(0xFF69B4),\n        GLX: new THREE.Color(0xFF69B4),\n          'G': new THREE.Color(0x008000),\n          'A': new THREE.Color(0x6080FF),\n          'T': new THREE.Color(0xFF8000),\n          'C': new THREE.Color(0xFF0000),\n          'U': new THREE.Color(0xFF8000),\n         'DG': new THREE.Color(0x008000),\n         'DA': new THREE.Color(0x6080FF),\n         'DT': new THREE.Color(0xFF8000),\n         'DC': new THREE.Color(0xFF0000),\n         'DU': new THREE.Color(0xFF8000)\n    },\n\n    defaultResidueColor: new THREE.Color(0xBEA06E),\n\n    chargeColors: {\n// charged residues\n        '  G': new THREE.Color(0xFF0000),\n        '  A': new THREE.Color(0xFF0000),\n        '  T': new THREE.Color(0xFF0000),\n        '  C': new THREE.Color(0xFF0000),\n        '  U': new THREE.Color(0xFF0000),\n        ' DG': new THREE.Color(0xFF0000),\n        ' DA': new THREE.Color(0xFF0000),\n        ' DT': new THREE.Color(0xFF0000),\n        ' DC': new THREE.Color(0xFF0000),\n        ' DU': new THREE.Color(0xFF0000),\n          'G': new THREE.Color(0xFF0000),\n          'A': new THREE.Color(0xFF0000),\n          'T': new THREE.Color(0xFF0000),\n          'C': new THREE.Color(0xFF0000),\n          'U': new THREE.Color(0xFF0000),\n         'DG': new THREE.Color(0xFF0000),\n         'DA': new THREE.Color(0xFF0000),\n         'DT': new THREE.Color(0xFF0000),\n         'DC': new THREE.Color(0xFF0000),\n         'DU': new THREE.Color(0xFF0000),\n        'ARG': new THREE.Color(0x0000FF),\n        'LYS': new THREE.Color(0x0000FF),\n        'ASP': new THREE.Color(0xFF0000),\n        'GLU': new THREE.Color(0xFF0000),\n\n// hydrophobic\n        'GLY': new THREE.Color(0x888888),\n        'PRO': new THREE.Color(0x888888),\n        'ALA': new THREE.Color(0x888888),\n        'VAL': new THREE.Color(0x888888),\n        'LEU': new THREE.Color(0x888888),\n        'ILE': new THREE.Color(0x888888),\n        'PHE': new THREE.Color(0x888888),\n\n// polar\n        'HIS': new THREE.Color(0x888888),\n        'SER': new THREE.Color(0x888888),\n        'THR': new THREE.Color(0x888888),\n        'ASN': new THREE.Color(0x888888),\n        'GLN': new THREE.Color(0x888888),\n        'TYR': new THREE.Color(0x888888),\n        'MET': new THREE.Color(0x888888),\n        'CYS': new THREE.Color(0x888888),\n        'TRP': new THREE.Color(0x888888)\n    },\n\n    hydrophobicColors: {\n// charged residues\n        '  G': new THREE.Color(0x888888),\n        '  A': new THREE.Color(0x888888),\n        '  T': new THREE.Color(0x888888),\n        '  C': new THREE.Color(0x888888),\n        '  U': new THREE.Color(0x888888),\n        ' DG': new THREE.Color(0x888888),\n        ' DA': new THREE.Color(0x888888),\n        ' DT': new THREE.Color(0x888888),\n        ' DC': new THREE.Color(0x888888),\n        ' DU': new THREE.Color(0x888888),\n          'G': new THREE.Color(0x888888),\n          'A': new THREE.Color(0x888888),\n          'T': new THREE.Color(0x888888),\n          'C': new THREE.Color(0x888888),\n          'U': new THREE.Color(0x888888),\n         'DG': new THREE.Color(0x888888),\n         'DA': new THREE.Color(0x888888),\n         'DT': new THREE.Color(0x888888),\n         'DC': new THREE.Color(0x888888),\n         'DU': new THREE.Color(0x888888),\n        'ARG': new THREE.Color(0x888888),\n        'LYS': new THREE.Color(0x888888),\n        'ASP': new THREE.Color(0x888888),\n        'GLU': new THREE.Color(0x888888),\n\n// hydrophobic\n        'GLY': new THREE.Color(0x00FF00),\n        'PRO': new THREE.Color(0x00FF00),\n        'ALA': new THREE.Color(0x00FF00),\n        'VAL': new THREE.Color(0x00FF00),\n        'LEU': new THREE.Color(0x00FF00),\n        'ILE': new THREE.Color(0x00FF00),\n        'PHE': new THREE.Color(0x00FF00),\n\n// polar\n        'HIS': new THREE.Color(0x888888),\n        'SER': new THREE.Color(0x888888),\n        'THR': new THREE.Color(0x888888),\n        'ASN': new THREE.Color(0x888888),\n        'GLN': new THREE.Color(0x888888),\n        'TYR': new THREE.Color(0x888888),\n        'MET': new THREE.Color(0x888888),\n        'CYS': new THREE.Color(0x888888),\n        'TRP': new THREE.Color(0x888888)\n    },\n\n    sheetcolor: 'green',\n\n    ssColors: {\n        //helix: new THREE.Color(0xFF0080),\n        helix: new THREE.Color(0xFF0000),\n        //sheet: new THREE.Color(0xFFC800),\n        sheet: new THREE.Color(0x008000),\n         coil: new THREE.Color(0x6080FF)\n    },\n\n    ssColors2: {\n        //helix: new THREE.Color(0xFF0080),\n        helix: new THREE.Color(0xFF0000),\n        sheet: new THREE.Color(0xFFC800),\n        //sheet: new THREE.Color(0x008000),\n         coil: new THREE.Color(0x6080FF)\n    },\n\n    //defaultBondColor: new THREE.Color(0x2194D6),\n    defaultBondColor: new THREE.Color(0xBBBBBB), // cross residue bonds\n\n    surfaces: {\n        1: undefined,\n        2: undefined,\n        3: undefined,\n        4: undefined\n    },\n\n    mapData: {},\n\n    // from iview (http://istar.cse.cuhk.edu.hk/iview/)\n    hasCovalentBond: function (atom0, atom1) {\n        var r = this.covalentRadii[atom0.elem] + this.covalentRadii[atom1.elem];\n        return atom0.coord.distanceToSquared(atom1.coord) < 1.3 * r * r;\n    },\n\n    init_base: function () {\n        this.structures = {}; // structure name -> array of chains\n        this.chains = {}; // structure_chain name -> atom hash\n        this.residues = {}; // structure_chain_resi name -> atom hash\n        this.secondaries = {}; // structure_chain_resi name -> secondary structure: 'c', 'H', or 'E'\n        this.alnChains = {}; // structure_chain name -> atom hash\n\n        this.chainsSeq = {}; // structure_chain name -> array of sequence\n        this.chainsColor = {}; // structure_chain name -> color, show chain color in sequence display for mmdbid and align input\n        this.chainsGene = {}; // structure_chain name -> gene, show chain gene symbol in sequence display for mmdbid and align input\n        this.chainsAn = {}; // structure_chain name -> array of annotations, such as residue number\n        this.chainsAnTitle = {}; // structure_chain name -> array of annotation title\n\n        this.alnChainsSeq = {}; // structure_chain name -> array of residue object: {mmdbid, chain, resi, resn, aligned}\n        this.alnChainsAnno = {}; // structure_chain name -> array of annotations, such as residue number\n        this.alnChainsAnTtl = {}; // structure_chain name -> array of annotation title\n\n        this.dAtoms = {}; // show selected atoms\n        this.hAtoms = {}; // used to change color or dislay type for certain atoms\n\n        this.pickedAtomList = {}; // used to switch among different highlight levels\n\n        this.prevHighlightObjects = [];\n        this.prevHighlightObjects_ghost = [];\n        this.prevSurfaces = [];\n        this.prevMaps = [];\n        this.prevEmmaps = [];\n\n        this.defNames2Residues = {}; // custom defined selection name -> residue array\n        this.defNames2Atoms = {}; // custom defined selection name -> atom array\n        this.defNames2Descr = {}; // custom defined selection name -> description\n        this.defNames2Command = {}; // custom defined selection name -> command\n\n        this.residueId2Name = {}; // structure_chain_resi -> one letter abbreviation\n\n        this.atoms = {};\n        this.dAtoms = {};\n        this.hAtoms = {};\n        this.proteins = {};\n        this.sidec = {};\n        this.nucleotides = {};\n        this.nucleotidesO3 = {};\n\n        this.chemicals = {};\n        this.ions = {};\n        this.water = {};\n        this.calphas = {};\n\n        this.hbondpnts = [];\n        this.stabilizerpnts = [];\n        //this.ncbondpnts = []; // non-covalent bonds\n\n        this.doublebonds = {};\n        this.triplebonds = {};\n        this.aromaticbonds = {};\n\n        this.atomPrevColors = {};\n\n        this.style2atoms = {}; // style -> atom hash, 13 styles: ribbon, strand, cylinder and plate, nucleotide cartoon, o3 trace, schematic, c alpha trace, b factor tube, lines, stick, ball and stick, sphere, dot, nothing\n        this.labels = {};     // hash of name -> a list of labels. Each label contains 'position', 'text', 'size', 'color', 'background'\n                            // label name could be custom, residue, schmatic, distance\n        this.lines = {};     // hash of name -> a list of solid or dashed lines. Each line contains 'position1', 'position2', 'color', and a boolean of 'dashed'\n                            // line name could be custom, hbond, ssbond, distance\n\n        this.rotateCount = 0;\n        this.rotateCountMax = 20;\n    },\n\n    init: function () {\n        this.init_base();\n\n        this.molTitle = \"\";\n\n        this.ssbondpnts = {}; // disulfide bonds for each structure\n\n        this.inputid = {\"idtype\": undefined, \"id\":undefined}; // support pdbid, mmdbid\n\n        this.biomtMatrices = [];\n        this.bAssembly = true;\n\n        this.bDrawn = false;\n        this.bSecondaryStructure = false;\n        this.bHighlight = 1; // undefined: no highlight, 1: highlight by outline, 2: highlight by 3D object\n    },\n\n    reinitAfterLoad: function () {\n        this.dAtoms = this.cloneHash(this.atoms); // show selected atoms\n        this.hAtoms = this.cloneHash(this.atoms); // used to change color or dislay type for certain atoms\n\n        this.prevHighlightObjects = [];\n        this.prevHighlightObjects_ghost = [];\n        this.prevSurfaces = [];\n        this.prevMaps = [];\n        this.prevEmmaps = [];\n\n        this.labels = {};   // hash of name -> a list of labels. Each label contains 'position', 'text', 'size', 'color', 'background'\n                            // label name could be custom, residue, schmatic, distance\n        this.lines = {};    // hash of name -> a list of solid or dashed lines. Each line contains 'position1', 'position2', 'color', and a boolean of 'dashed'\n                            // line name could be custom, hbond, ssbond, distance\n\n        this.bAssembly = true;\n    }\n};\n\n/**\n * @author Jiyao Wang <wangjiy@ncbi.nlm.nih.gov> / https://github.com/ncbi/icn3d\n */\n\n// modified from iview (http://istar.cse.cuhk.edu.hk/iview/)\niCn3D.prototype.loadPDB = function (src) {\n    var helices = [], sheets = [];\n    //this.atoms = {};\n    var lines = src.split('\\n');\n\n    var chainsTmp = {}; // serial -> atom\n    var residuesTmp = {}; // serial -> atom\n\n    this.init();\n\n    var sheetArray = [], sheetStart = [], sheetEnd = [], helixArray = [], helixStart = [], helixEnd = [];\n\n    // Concatenation of two pdbs will have several atoms for the same serial\n    var serial = 0;\n\n    var moleculeNum = 1;\n    var chainNum, residueNum, oriResidueNum;\n    var prevChainNum = '', prevResidueNum = '', prevOriResidueNum = '', prevResi = 0;\n    var prevRecord = '';\n    var bModifyResi = false;\n\n    var oriSerial2NewSerial = {};\n\n    var chainMissingResidueArray = {};\n\n    var id = 'stru';\n\n    var maxMissingResi = 0, prevMissingChain = '';\n\n    for (var i in lines) {\n        var line = lines[i];\n        var record = line.substr(0, 6);\n\n        if (record === 'HEADER') {\n            id = line.substr(62, 4);\n\n            this.molTitle = '';\n\n        } else if (record === 'TITLE ') {\n            var name = line.substr(10);\n            this.molTitle += name.trim() + \" \";\n\n        } else if (record === 'HELIX ') {\n            this.bSecondaryStructure = true;\n\n            var startChain = line.substr(19, 1);\n            var startResi = parseInt(line.substr(21, 4));\n            var endResi = parseInt(line.substr(33, 4));\n\n            var chain_resi;\n            for(var j = startResi; j <= endResi; ++j) {\n              chain_resi = startChain + \"_\" + j;\n              helixArray.push(chain_resi);\n\n              if(j === startResi) helixStart.push(chain_resi);\n              if(j === endResi) helixEnd.push(chain_resi);\n            }\n\n            helices.push({\n                chain: startChain,\n                initialResidue: startResi,\n                initialInscode: line.substr(25, 1),\n                terminalResidue: endResi,\n                terminalInscode: line.substr(37, 1),\n            });\n        } else if (record === 'SHEET ') {\n            this.bSecondaryStructure = true;\n\n            var startChain = line.substr(21, 1);\n            var startResi = parseInt(line.substr(22, 4));\n            var endResi = parseInt(line.substr(33, 4));\n\n            for(var j = startResi; j <= endResi; ++j) {\n              var chain_resi = startChain + \"_\" + j;\n              sheetArray.push(chain_resi);\n\n              if(j === startResi) sheetStart.push(chain_resi);\n              if(j === endResi) sheetEnd.push(chain_resi);\n            }\n\n            sheets.push({\n                chain: startChain,\n                initialResidue: startResi,\n                initialInscode: line.substr(26, 1),\n                terminalResidue: endResi,\n                terminalInscode: line.substr(37, 1),\n            });\n\n        } else if (record === 'HBOND ') {\n/*\n            //HBOND A 1536   N2 A   59  ND2  -19.130  83.151  52.266 -18.079  81.613  49.427    3.40\n            bCalculateHbond = false;\n\n            var chemicalChain = line.substr(6, 1);\n            var chemicalResi = line.substr(8, 4).replace(/ /g, \"\");\n            var chemicalAtom = line.substr(14, 4).replace(/ /g, \"\");\n            var proteinChain = line.substr(18, 1);\n            var proteinResi = line.substr(20, 4).replace(/ /g, \"\");\n            var proteinAtom = line.substr(25, 4).replace(/ /g, \"\");\n\n            var chemical_x = parseFloat(line.substr(30, 8));\n            var chemical_y = parseFloat(line.substr(38, 8));\n            var chemical_z = parseFloat(line.substr(46, 8));\n            var protein_x = parseFloat(line.substr(54, 8));\n            var protein_y = parseFloat(line.substr(62, 8));\n            var protein_z = parseFloat(line.substr(70, 8));\n\n            var dist = line.substr(78, 8).replace(/ /g, \"\");\n\n            this.hbondpnts.push(new THREE.Vector3(chemical_x, chemical_y, chemical_z));\n            this.hbondpnts.push(new THREE.Vector3(protein_x, protein_y, protein_z));\n*/\n        } else if (record === 'SSBOND') {\n            //SSBOND   1 CYS E   48    CYS E   51                          2555\n            var chain1 = line.substr(15, 1);\n            var resi1 = line.substr(17, 4).replace(/ /g, \"\");\n            var resid1 = id + '_' + chain1 + '_' + resi1;\n\n            var chain2 = line.substr(29, 1);\n            var resi2 = line.substr(31, 4).replace(/ /g, \"\");\n            var resid2 = id + '_' + chain2 + '_' + resi2;\n\n            if(this.ssbondpnts[id] === undefined) this.ssbondpnts[id] = [];\n\n            this.ssbondpnts[id].push(resid1);\n            this.ssbondpnts[id].push(resid2);\n        } else if (record === 'REMARK') {\n             var type = parseInt(line.substr(7, 3));\n             // from GLMol\n             if (type == 350 && line.substr(13, 5) == 'BIOMT') {\n                var n = parseInt(line[18]) - 1;\n                //var m = parseInt(line.substr(21, 2));\n                var m = parseInt(line.substr(21, 2)) - 1; // start from 1\n                if (this.biomtMatrices[m] == undefined) this.biomtMatrices[m] = new THREE.Matrix4().identity();\n                this.biomtMatrices[m].elements[n] = parseFloat(line.substr(24, 9));\n                this.biomtMatrices[m].elements[n + 4] = parseFloat(line.substr(34, 9));\n                this.biomtMatrices[m].elements[n + 8] = parseFloat(line.substr(44, 9));\n                this.biomtMatrices[m].elements[n + 12] = parseFloat(line.substr(54, 10));\n             }\n             // missing residues\n             else if (type == 465 && line.substr(18, 1) == ' ' && line.substr(20, 1) == ' ' && line.substr(21, 1) != 'S') {\n                var resn = line.substr(15, 3);\n                var chain = line.substr(19, 1);\n                var resi = parseInt(line.substr(21, 5));\n\n                //var structure = parseInt(line.substr(13, 1));\n                //if(line.substr(13, 1) == ' ') structure = 1;\n\n                //var chainNum = structure + '_' + chain;\n                var chainNum = id + '_' + chain;\n\n                if(chainMissingResidueArray[chainNum] === undefined) chainMissingResidueArray[chainNum] = [];\n                var resObject = {};\n                resObject.resi = resi;\n                resObject.name = this.residueName2Abbr(resn).toLowerCase();\n\n                if(chain != prevMissingChain) {\n                    maxMissingResi = 0;\n                }\n\n                // not all listed residues are considered missing, e.g., PDB ID 4OR2, only the firts four residues are considered missing\n                if(!isNaN(resi) && (prevMissingChain == '' || (chain != prevMissingChain) || (chain == prevMissingChain && resi > maxMissingResi)) ) {\n                    chainMissingResidueArray[chainNum].push(resObject);\n\n                    maxMissingResi = resi;\n                    prevMissingChain = chain;\n                }\n\n             }\n             else if (type == 900 && this.emd === undefined && line.substr(34).trim() == 'RELATED DB: EMDB') {\n                 //REMARK 900 RELATED ID: EMD-3906   RELATED DB: EMDB\n                 this.emd = line.substr(23, 11).trim();\n             }\n        } else if (record === 'ENDMDL') {\n            ++moleculeNum;\n        } else if (record === 'JRNL  ') {\n            if(line.substr(12, 4) === 'PMID') {\n                this.pmid = line.substr(19).trim();\n            }\n        } else if (record === 'ATOM  ' || record === 'HETATM') {\n            var structure = (moleculeNum === 1) ? id : id + moleculeNum.toString();\n\n            var alt = line.substr(16, 1);\n            //if (alt !== \" \" && alt !== \"A\") continue;\n\n            // \"CA\" has to appear before \"O\". Otherwise the cartoon of secondary structure will have breaks\n            // Concatenation of two pdbs will have several atoms for the same serial\n            ++serial;\n\n            var serial2 = parseInt(line.substr(6, 5));\n            oriSerial2NewSerial[serial2] = serial;\n\n            var elem = line.substr(76, 2).replace(/ /g, \"\");\n            if (elem === '') { // for some incorrect PDB files\n               elem = line.substr(12, 2).replace(/ /g,\"\");\n            }\n\n            var chain = line.substr(21, 1);\n            if(chain === '') chain = 1;\n\n            chainNum = structure + \"_\" + chain;\n            if(chainNum !== prevChainNum) {\n                prevResi = 0;\n                bModifyResi = false;\n            }\n\n            //var oriResi = line.substr(22, 4).trim();\n            var oriResi = line.substr(22, 5).trim();\n            oriResidueNum = chainNum + \"_\" + oriResi;\n            //if(oriResidueNum !== prevOriResidueNum) {\n            //    if(bModifyResi) {\n            //      ++prevResi;\n            //    }\n            //    else {\n            //      prevResi = (chainNum !== prevChainNum) ? 0 : parseInt(prevResidueNum.substr(prevResidueNum.lastIndexOf(\"_\") + 1));\n            //    }\n            //}\n\n            var resi = parseInt(oriResi);\n            if(oriResi != resi || bModifyResi) { // e.g., 99A and 99\n              bModifyResi = true;\n              //resi = (prevResi == 0) ? resi : prevResi + 1;\n            }\n\n            residueNum = chainNum + \"_\" + resi;\n\n            var atom = line.substr(12, 4).replace(/ /g, '');\n            var chain_resi = chain + \"_\" + resi;\n\n            var x = parseFloat(line.substr(30, 8));\n            var y = parseFloat(line.substr(38, 8));\n            var z = parseFloat(line.substr(46, 8));\n            var resn = line.substr(17, 3);\n            var coord = new THREE.Vector3(x, y, z);\n\n            var atomDetails = {\n                het: record[0] === 'H', // optional, used to determine chemicals, water, ions, etc\n                serial: serial,         // required, unique atom id\n                name: atom,             // required, atom name\n                alt: alt,               // optional, some alternative coordinates\n                resn: resn,             // optional, used to determine protein or nucleotide\n                structure: structure,   // optional, used to identify structure\n                chain: chain,           // optional, used to identify chain\n                resi: resi,             // optional, used to identify residue ID\n                //insc: line.substr(26, 1),\n                coord: coord,           // required, used to draw 3D shape\n                b: parseFloat(line.substr(60, 8)), // optional, used to draw B-factor tube\n                elem: elem,             // optional, used to determine hydrogen bond\n                bonds: [],              // required, used to connect atoms\n                ss: 'coil',             // optional, used to show secondary structures\n                ssbegin: false,         // optional, used to show the beginning of secondary structures\n                ssend: false            // optional, used to show the end of secondary structures\n            };\n\n            this.atoms[serial] = atomDetails;\n\n            this.dAtoms[serial] = 1;\n            this.hAtoms[serial] = 1;\n\n            // Assign secondary structures from the input\n            // if a residue is assigned both sheet and helix, it is assigned as sheet\n            if($.inArray(chain_resi, sheetArray) !== -1) {\n              this.atoms[serial].ss = 'sheet';\n\n              if($.inArray(chain_resi, sheetStart) !== -1) {\n                this.atoms[serial].ssbegin = true;\n              }\n\n              // do not use else if. Some residues are both start and end of secondary structure\n              if($.inArray(chain_resi, sheetEnd) !== -1) {\n                this.atoms[serial].ssend = true;\n              }\n            }\n            else if($.inArray(chain_resi, helixArray) !== -1) {\n              this.atoms[serial].ss = 'helix';\n\n              if($.inArray(chain_resi, helixStart) !== -1) {\n                this.atoms[serial].ssbegin = true;\n              }\n\n              // do not use else if. Some residues are both start and end of secondary structure\n              if($.inArray(chain_resi, helixEnd) !== -1) {\n                this.atoms[serial].ssend = true;\n              }\n            }\n\n            var secondaries = '-';\n            if(this.atoms[serial].ss === 'helix') {\n                secondaries = 'H';\n            }\n            else if(this.atoms[serial].ss === 'sheet') {\n                secondaries = 'E';\n            }\n            //else if(this.atoms[serial].ss === 'coil') {\n            //    secondaries = 'c';\n            //}\n            else if(!this.atoms[serial].het && this.residueColors.hasOwnProperty(this.atoms[serial].resn.toUpperCase()) ) {\n                secondaries = 'c';\n            }\n            else {\n                secondaries = 'o';\n            }\n\n            this.secondaries[residueNum] = secondaries;\n\n            // different residue\n            //if(residueNum !== prevResidueNum) {\n            if(oriResidueNum !== prevOriResidueNum) {\n                var residue = this.residueName2Abbr(resn);\n\n                this.residueId2Name[residueNum] = residue;\n\n                if(serial !== 1) this.residues[prevResidueNum] = residuesTmp;\n\n                if(residueNum !== prevResidueNum) {\n                    residuesTmp = {};\n                }\n\n                // different chain\n                if(chainNum !== prevChainNum) {\n                    // a chain could be separated in two sections\n                    if(serial !== 1) {\n                        //this.chains[prevChainNum] = this.unionHash2Atoms(this.chains[prevChainNum], chainsTmp);\n                        this.chains[prevChainNum] = this.unionHash(this.chains[prevChainNum], chainsTmp);\n                    }\n\n                    chainsTmp = {};\n\n                    if(this.structures[structure.toString()] === undefined) this.structures[structure.toString()] = [];\n                    this.structures[structure.toString()].push(chainNum);\n\n                    if(this.chainsSeq[chainNum] === undefined) this.chainsSeq[chainNum] = [];\n/*\n                    if(this.chainsAn[chainNum] === undefined ) this.chainsAn[chainNum] = [];\n                    if(this.chainsAn[chainNum][0] === undefined ) this.chainsAn[chainNum][0] = [];\n                    if(this.chainsAn[chainNum][1] === undefined ) this.chainsAn[chainNum][1] = [];\n                    if(this.chainsAnTitle[chainNum] === undefined ) this.chainsAnTitle[chainNum] = [];\n                    if(this.chainsAnTitle[chainNum][0] === undefined ) this.chainsAnTitle[chainNum][0] = [];\n                    if(this.chainsAnTitle[chainNum][1] === undefined ) this.chainsAnTitle[chainNum][1] = [];\n*/\n                      var resObject = {};\n                      resObject.resi = resi;\n                      resObject.name = residue;\n\n                    this.chainsSeq[chainNum].push(resObject);\n\n/*\n                      var numberStr = '';\n                      if(resi % 10 === 0) numberStr = resi.toString();\n\n                    this.chainsAn[chainNum][0].push(numberStr);\n                    this.chainsAn[chainNum][1].push(secondaries);\n                    this.chainsAnTitle[chainNum][0].push(\"\");\n                    this.chainsAnTitle[chainNum][1].push(\"SS\");\n*/\n                }\n                else {\n                      var resObject = {};\n                      resObject.resi = resi;\n                      resObject.name = residue;\n\n                    this.chainsSeq[chainNum].push(resObject);\n\n/*\n                      var numberStr = '';\n                      if(resi % 10 === 0) numberStr = resi.toString();\n\n                    this.chainsAn[chainNum][0].push(numberStr);\n                    this.chainsAn[chainNum][1].push(secondaries);\n*/\n                }\n            }\n\n            chainsTmp[serial] = 1;\n            residuesTmp[serial] = 1;\n\n            prevRecord = record;\n\n            prevChainNum = chainNum;\n            prevResidueNum = residueNum;\n            prevOriResidueNum = oriResidueNum;\n\n        } else if (record === 'CONECT') {\n            var from = parseInt(line.substr(6, 5));\n            for (var j = 0; j < 4; ++j) {\n                var to = parseInt(line.substr([11, 16, 21, 26][j], 5));\n                if (isNaN(to)) continue;\n\n                if(this.atoms[oriSerial2NewSerial[from]] !== undefined) this.atoms[oriSerial2NewSerial[from]].bonds.push(oriSerial2NewSerial[to]);\n            }\n        } else if (record.substr(0,3) === 'TER') {\n            // Concatenation of two pdbs will have several atoms for the same serial\n            ++serial;\n        }\n    }\n\n    // copy disulfide bonds\n    var structureArray = Object.keys(this.structures);\n    for(var s = 0, sl = structureArray.length; s < sl; ++s) {\n        var structure = structureArray[s];\n\n        if(structure == id) continue;\n\n        if(this.ssbondpnts[structure] === undefined) this.ssbondpnts[structure] = [];\n\n        if(this.ssbondpnts[id] !== undefined) {\n            for(var j = 0, jl = this.ssbondpnts[id].length; j < jl; ++j) {\n                var ori_resid = this.ssbondpnts[id][j];\n                var pos = ori_resid.indexOf('_');\n                var resid = structure + ori_resid.substr(pos);\n\n                this.ssbondpnts[structure].push(resid);\n            }\n        }\n    }\n\n    this.adjustSeq(chainMissingResidueArray);\n\n//    this.missingResidues = [];\n//    for(var chainid in chainMissingResidueArray) {\n//        var resArray = chainMissingResidueArray[chainid];\n//        for(var i = 0; i < resArray.length; ++i) {\n//            this.missingResidues.push(chainid + '_' + resArray[i].resi);\n//        }\n//    }\n\n    // remove the reference\n    lines = null;\n\n    // add the last residue set\n    this.residues[residueNum] = residuesTmp;\n    this.chains[chainNum] = this.unionHash2Atoms(this.chains[chainNum], chainsTmp);\n\n    var curChain, curResi, curInsc, curResAtoms = [], me = this;\n    // refresh for atoms in each residue\n    var refreshBonds = function (f) {\n        var n = curResAtoms.length;\n        for (var j = 0; j < n; ++j) {\n            var atom0 = curResAtoms[j];\n            for (var k = j + 1; k < n; ++k) {\n                var atom1 = curResAtoms[k];\n                if (atom0.alt === atom1.alt && me.hasCovalentBond(atom0, atom1)) {\n                //if (me.hasCovalentBond(atom0, atom1)) {\n                    atom0.bonds.push(atom1.serial);\n                    atom1.bonds.push(atom0.serial);\n                }\n            }\n            f && f(atom0);\n        }\n    };\n    var pmin = new THREE.Vector3( 9999, 9999, 9999);\n    var pmax = new THREE.Vector3(-9999,-9999,-9999);\n    var psum = new THREE.Vector3();\n    var cnt = 0;\n\n    // lipids may be considered as protein if \"ATOM\" instead of \"HETATM\" was used\n    var lipidResidHash = {};\n\n    // assign atoms\n    for (var i in this.atoms) {\n        var atom = this.atoms[i];\n        var coord = atom.coord;\n        psum.add(coord);\n        pmin.min(coord);\n        pmax.max(coord);\n        ++cnt;\n\n        if(!atom.het) {\n          if($.inArray(atom.resn, this.nucleotidesArray) !== -1) {\n            this.nucleotides[atom.serial] = 1;\n            //if (atom.name === 'P') {\n            if (atom.name === \"O3'\" || atom.name === \"O3*\") {\n                this.nucleotidesO3[atom.serial] = 1;\n\n                this.secondaries[atom.structure + '_' + atom.chain + '_' + atom.resi] = 'o'; // nucleotide\n            }\n          }\n          else {\n            if (atom.elem === 'P') {\n                lipidResidHash[atom.structure + '_' + atom.chain + '_' + atom.resi] = 1;\n            }\n\n            this.proteins[atom.serial] = 1;\n            if (atom.name === 'CA') this.calphas[atom.serial] = 1;\n            if (atom.name !== 'N' && atom.name !== 'CA' && atom.name !== 'C' && atom.name !== 'O') this.sidec[atom.serial] = 1;\n          }\n        }\n        else if(atom.het) {\n          if(atom.resn === 'HOH' || atom.resn === 'WAT' || atom.resn === 'SOL') {\n            this.water[atom.serial] = 1;\n          }\n          else if($.inArray(atom.resn, this.ionsArray) !== -1 || atom.elem.trim() === atom.resn.trim()) {\n            this.ions[atom.serial] = 1;\n          }\n          else {\n            this.chemicals[atom.serial] = 1;\n          }\n        }\n\n        if (!(curChain === atom.chain && curResi === atom.resi)) {\n            // a new residue, add the residue-residue bond beides the regular bonds\n            refreshBonds(function (atom0) {\n                if (((atom0.name === 'C' && atom.name === 'N') || (atom0.name === 'O3\\'' && atom.name === 'P')) && me.hasCovalentBond(atom0, atom)) {\n                    atom0.bonds.push(atom.serial);\n                    atom.bonds.push(atom0.serial);\n                }\n            });\n            curChain = atom.chain;\n            curResi = atom.resi;\n            //curInsc = atom.insc;\n            curResAtoms.length = 0;\n        }\n        curResAtoms.push(atom);\n    } // end of for\n\n    // reset lipid\n    for(resid in lipidResidHash) {\n        var atomHash = this.residues[resid];\n        for(serial in atomHash) {\n            var atom = this.atoms[serial];\n\n            atom.het = true;\n            this.chemicals[atom.serial] = 1;\n            this.secondaries[resid] = 'o'; // nucleotide\n\n            delete this.proteins[atom.serial];\n            if (atom.name === 'CA') delete this.calphas[atom.serial];\n            if (atom.name !== 'N' && atom.name !== 'CA' && atom.name !== 'C' && atom.name !== 'O') delete this.sidec[atom.serial];\n        }\n    }\n\n    // last residue\n    refreshBonds();\n\n    this.pmin = pmin;\n    this.pmax = pmax;\n\n    this.cnt = cnt;\n\n    this.maxD = this.pmax.distanceTo(this.pmin);\n    this.center = psum.multiplyScalar(1.0 / this.cnt);\n\n    if (this.maxD < 5) this.maxD = 5;\n\n    this.oriMaxD = this.maxD;\n    this.oriCenter = this.center.clone();\n};\n\niCn3D.prototype.adjustSeq = function (chainMissingResidueArray) {\n    // adjust sequences\n    for(var chainNum in this.chainsSeq) {\n        if(chainMissingResidueArray[chainNum] === undefined) continue;\n\n        var A = this.chainsSeq[chainNum];\n        //var A2 = this.chainsAn[chainNum][0];\n        //var A3 = this.chainsAn[chainNum][1];\n        var B = chainMissingResidueArray[chainNum];\n\n        var m = A.length;\n        var n = B.length;\n\n        var C = new Array(m + n);\n        //var C2 = new Array(m + n);\n        //var C3 = new Array(m + n);\n\n        // http://www.algolist.net/Algorithms/Merge/Sorted_arrays\n        // m - size of A\n        // n - size of B\n        // size of C array must be equal or greater than m + n\n          var i, j, k;\n          i = 0;\n          j = 0;\n          k = 0;\n          while (i < m && j < n) {\n                if (A[i].resi <= B[j].resi) {\n                      C[k] = A[i];\n                      //C2[k] = A2[i];\n                      //C3[k] = A3[i];\n                      i++;\n                } else {\n                      C[k] = B[j];\n                      //if(B[j].resi % 10 === 0) {\n                      //    C2[k] = B[j].resi.toString();\n                      //}\n                      //else {\n                      //    C2[k] = '';\n                      //}\n                      //C3[k] = '-';\n                      j++;\n                }\n                k++;\n          }\n          if (i < m) {\n                for (var p = i; p < m; p++) {\n                      C[k] = A[p];\n                      //C2[k] = A2[p];\n                      //C3[k] = A3[p];\n                      k++;\n                }\n          } else {\n                for (var p = j; p < n; p++) {\n                      C[k] = B[p];\n                      //if(B[p].resi % 10 === 0) {\n                      //    C2[k] = B[p].resi.toString();\n                      //}\n                      //else {\n                      //    C2[k] = '';\n                      //}\n                      //C3[k] = '-';\n                      k++;\n                }\n          }\n\n        this.chainsSeq[chainNum] = C;\n        //this.chainsAn[chainNum][0] = C2;\n        //this.chainsAn[chainNum][1] = C3;\n    }\n};\n/**\n * @author Jiyao Wang <wangjiy@ncbi.nlm.nih.gov> / https://github.com/ncbi/icn3d\n */\n\n// modified from iview (http://istar.cse.cuhk.edu.hk/iview/)\niCn3D.prototype.createSphere = function (atom, defaultRadius, forceDefault, scale, bHighlight) {\n    var mesh;\n\n    if(defaultRadius === undefined) defaultRadius = 0.8;\n    if(forceDefault === undefined) forceDefault = false;\n    if(scale === undefined) scale = 1.0;\n\n    var radius = (this.vdwRadii[atom.elem] || defaultRadius);\n\n    if(bHighlight === 2) {\n      //if(scale > 0.9) { // sphere\n      //  scale = 1.5;\n      //}\n      //else if(scale < 0.5) { // dot\n      //  scale = 1.0;\n      //}\n\n      scale *= 1.5;\n\n      var color = this.hColor;\n\n      mesh = new THREE.Mesh(this.sphereGeometry, new THREE.MeshPhongMaterial({ transparent: true, opacity: 0.5, specular: this.frac, shininess: 30, emissive: 0x000000, color: color }));\n\n      mesh.scale.x = mesh.scale.y = mesh.scale.z = forceDefault ? defaultRadius :  radius * (scale ? scale : 1);\n      mesh.position.copy(atom.coord);\n      this.mdl.add(mesh);\n    }\n    else if(bHighlight === 1) {\n      mesh = new THREE.Mesh(this.sphereGeometry, this.matShader);\n\n      mesh.scale.x = mesh.scale.y = mesh.scale.z = forceDefault ? defaultRadius :  radius * (scale ? scale : 1);\n      mesh.position.copy(atom.coord);\n      mesh.renderOrder = this.renderOrderPicking;\n      //this.mdlPicking.add(mesh);\n      this.mdl.add(mesh);\n    }\n    else {\n      if(atom.color === undefined) {\n          atom.color = this.defaultAtomColor;\n      }\n\n      var color = atom.color;\n\n      mesh = new THREE.Mesh(this.sphereGeometry, new THREE.MeshPhongMaterial({ specular: this.frac, shininess: 30, emissive: 0x000000, color: color }));\n      mesh.scale.x = mesh.scale.y = mesh.scale.z = forceDefault ? defaultRadius :  radius * (scale ? scale : 1);\n      mesh.position.copy(atom.coord);\n\n      if(this.bImpo) {\n          this.posArraySphere.push(atom.coord.x);\n          this.posArraySphere.push(atom.coord.y);\n          this.posArraySphere.push(atom.coord.z);\n\n          this.colorArraySphere.push(atom.color.r);\n          this.colorArraySphere.push(atom.color.g);\n          this.colorArraySphere.push(atom.color.b);\n\n          var realRadius = forceDefault ? defaultRadius :  radius * (scale ? scale : 1);\n          this.radiusArraySphere.push(realRadius);\n\n          if(this.cnt <= this.maxatomcnt) this.mdl_ghost.add(mesh);\n      }\n      else {\n          this.mdl.add(mesh);\n      }\n    }\n\n    //this.mdl.add(mesh);\n\n    if(bHighlight === 1 || bHighlight === 2) {\n        if(this.bImpo) {\n            if(this.cnt <= this.maxatomcnt) this.prevHighlightObjects_ghost.push(mesh);\n        }\n        else {\n            this.prevHighlightObjects.push(mesh);\n        }\n    }\n    else {\n        if(this.bImpo) {\n            if(this.cnt <= this.maxatomcnt) this.objects_ghost.push(mesh);\n        }\n        else {\n            this.objects.push(mesh);\n        }\n    }\n};\n\n// modified from iview (http://istar.cse.cuhk.edu.hk/iview/)\niCn3D.prototype.createCylinder = function (p0, p1, radius, color, bHighlight, color2, bPicking) {\n    var mesh;\n    if(bHighlight === 1) {\n        mesh = new THREE.Mesh(this.cylinderGeometryOutline, this.matShader);\n\n        mesh.position.copy(p0).add(p1).multiplyScalar(0.5);\n        mesh.matrixAutoUpdate = false;\n        mesh.lookAt(p1.clone().sub(p0));\n        mesh.updateMatrix();\n\n        mesh.matrix.multiply(new THREE.Matrix4().makeScale(radius, radius, p0.distanceTo(p1))).multiply(new THREE.Matrix4().makeRotationX(Math.PI * 0.5));\n\n        mesh.renderOrder = this.renderOrderPicking;\n        //this.mdlPicking.add(mesh);\n        this.mdl.add(mesh);\n\n        this.prevHighlightObjects.push(mesh);\n    }\n    else {\n        if(bHighlight === 2) {\n          mesh = new THREE.Mesh(this.cylinderGeometry, new THREE.MeshPhongMaterial({ transparent: true, opacity: 0.5, specular: this.frac, shininess: 30, emissive: 0x000000, color: color }));\n\n          radius *= 1.5;\n        }\n        else {\n          mesh = new THREE.Mesh(this.cylinderGeometry, new THREE.MeshPhongMaterial({ specular: this.frac, shininess: 30, emissive: 0x000000, color: color }));\n        }\n\n        mesh.position.copy(p0).add(p1).multiplyScalar(0.5);\n        mesh.matrixAutoUpdate = false;\n        //mesh.lookAt(p0);\n        mesh.lookAt(p1.clone().sub(p0));\n        mesh.updateMatrix();\n\n        mesh.matrix.multiply(new THREE.Matrix4().makeScale(radius, radius, p0.distanceTo(p1))).multiply(new THREE.Matrix4().makeRotationX(Math.PI * 0.5));\n\n        if(this.bImpo) {\n          this.posArray.push(p0.x);\n          this.posArray.push(p0.y);\n          this.posArray.push(p0.z);\n\n          this.colorArray.push(color.r);\n          this.colorArray.push(color.g);\n          this.colorArray.push(color.b);\n\n          this.pos2Array.push(p1.x);\n          this.pos2Array.push(p1.y);\n          this.pos2Array.push(p1.z);\n\n          if(color2 !== undefined) {\n              this.color2Array.push(color2.r);\n              this.color2Array.push(color2.g);\n              this.color2Array.push(color2.b);\n          }\n          else {\n              this.color2Array.push(color.r);\n              this.color2Array.push(color.g);\n              this.color2Array.push(color.b);\n          }\n\n          this.radiusArray.push(radius);\n\n          if(this.cnt <= this.maxatomcnt) this.mdl_ghost.add(mesh);\n        }\n        else {\n            this.mdl.add(mesh);\n        }\n\n        if(bHighlight === 2) {\n            if(this.bImpo) {\n                if(this.cnt <= this.maxatomcnt) this.prevHighlightObjects_ghost.push(mesh);\n            }\n            else {\n                this.prevHighlightObjects.push(mesh);\n            }\n        }\n        else {\n            if(this.bImpo) {\n                if(this.cnt <= this.maxatomcnt) this.objects_ghost.push(mesh);\n            }\n            else {\n                if(bPicking === undefined || bPicking) this.objects.push(mesh);\n            }\n        }\n    }\n};\n\n// from iview (http://istar.cse.cuhk.edu.hk/iview/)\niCn3D.prototype.createRepresentationSub = function (atoms, f0, f01) {\n    var me = this;\n\n    //var ged = new THREE.Geometry();\n    var clbondArray = [];\n    for (var i in atoms) {\n        var atom0 = atoms[i];\n        f0 && f0(atom0);\n\n        for (var j in atom0.bonds) {\n            var atom1 = this.atoms[atom0.bonds[j]];\n            if (atom1 === undefined || atom1.serial < atom0.serial) continue;\n            if (atom1.chain === atom0.chain && ((atom1.resi === atom0.resi) || (atom0.name === 'C' && atom1.name === 'N') || (atom0.name === 'O3\\'' && atom1.name === 'P') || (atom0.name === 'O3*' && atom1.name === 'P') || (atom0.name === 'SG' && atom1.name === 'SG'))) {\n                f01 && f01(atom0, atom1);\n            } else {\n                //ged.vertices.push(atom0.coord);\n                //ged.vertices.push(atom1.coord);\n                clbondArray.push([atom0.coord, atom1.coord]);\n            }\n        }\n    }\n    //if (ged.vertices.length && this.bShowCrossResidueBond) {\n    if (clbondArray.length > 0 && this.bShowCrossResidueBond) {\n        //ged.computeLineDistances();\n        //this.mdl.add(new THREE.Line(ged, new THREE.LineDashedMaterial({ linewidth: this.linewidth, color: this.defaultBondColor, dashSize: 0.3, gapSize: 0.15 }), THREE.LineSegments));\n        var color = new THREE.Color(0x00FF00);\n\n        for(var i = 0, il = clbondArray.length; i < il; ++i) {\n            me.createCylinder(clbondArray[i][0], clbondArray[i][1], this.cylinderRadius, color, 0);\n        }\n    }\n};\n\n// modified from iview (http://istar.cse.cuhk.edu.hk/iview/)\niCn3D.prototype.createSphereRepresentation = function (atoms, defaultRadius, forceDefault, scale, bHighlight) {\n    var me = this;\n\n    this.createRepresentationSub(atoms, function (atom0) {\n        me.createSphere(atom0, defaultRadius, forceDefault, scale, bHighlight);\n    });\n};\n\niCn3D.prototype.createBoxRepresentation_P_CA = function (atoms, scale, bHighlight) {\n    var me = this;\n    this.createRepresentationSub(atoms, function (atom0) {\n        if(atom0.name === 'CA' || atom0.name === \"O3'\" || atom0.name === \"O3*\") {\n            me.createBox(atom0, undefined, undefined, scale, undefined, bHighlight);\n        }\n    });\n};\n\n// modified from iview (http://istar.cse.cuhk.edu.hk/iview/)\niCn3D.prototype.createStickRepresentation = function (atoms, atomR, bondR, scale, bHighlight, bSchematic) {\n    var me = this;\n    var factor = (bSchematic !== undefined && bSchematic) ? atomR / me.cylinderRadius : 1;\n\n//        if(bHighlight !== 2) {\n        this.createRepresentationSub(atoms, function (atom0) {\n                me.createSphere(atom0, atomR, !scale, scale, bHighlight);\n        }, function (atom0, atom1) {\n            var mp = atom0.coord.clone().add(atom1.coord).multiplyScalar(0.5);\n            var pair = atom0.serial + '_' + atom1.serial;\n\n            if(me.doublebonds.hasOwnProperty(pair)) { // show double bond\n                var a0, a1, a2;\n\n                var v0;\n                var random = new THREE.Vector3(Math.random(),Math.random(),Math.random());\n                if(atom0.bonds.length == 1 && atom1.bonds.length == 1) {\n                    v0 = atom1.coord.clone();\n                    v0.sub(atom0.coord);\n\n                    var v = random.clone();\n                    v0.cross(v).normalize().multiplyScalar(0.2 * factor);\n                }\n                else {\n                    if(atom0.bonds.length >= atom1.bonds.length && atom0.bonds.length > 1) {\n                        a0 = atom0.serial;\n                        a1 = atom0.bonds[0];\n                        a2 = atom0.bonds[1];\n                    }\n                    //else {\n                    else if(atom1.bonds.length >= atom0.bonds.length && atom1.bonds.length > 1) {\n                        a0 = atom1.serial;\n                        a1 = atom1.bonds[0];\n                        a2 = atom1.bonds[1];\n                    }\n                    else {\n                        console.log(\"Double bond was not drawn due to the undefined cross plane\");\n                        return;\n                    }\n\n                    var v1 = me.atoms[a0].coord.clone();\n                    v1.sub(me.atoms[a1].coord);\n                    var v2 = me.atoms[a0].coord.clone();\n                    v2.sub(me.atoms[a2].coord);\n\n                    v1.cross(v2);\n\n                    // parallel\n                    if(parseInt(v1.length() * 10000) == 0) {\n                        //v1 = random.clone();\n                        // use a constant so that they are fixed,e.g., in CO2\n                        v1 = new THREE.Vector3(0.2, 0.3, 0.5);\n                    }\n\n                    v0 = atom1.coord.clone();\n                    v0.sub(atom0.coord);\n\n                    v0.cross(v1).normalize().multiplyScalar(0.2 * factor);\n                    // parallel\n                    if(parseInt(v0.length() * 10000) == 0) {\n                        //v1 = random.clone();\n                        // use a constant so that they are fixed,e.g., in CO2\n                        v1 = new THREE.Vector3(0.5, 0.3, 0.2);\n                        v0.cross(v1).normalize().multiplyScalar(0.2 * factor);\n                    }\n                }\n\n                if (atom0.color === atom1.color) {\n                    me.createCylinder(atom0.coord.clone().add(v0), atom1.coord.clone().add(v0), me.cylinderRadius * factor * 0.3, atom0.color, bHighlight);\n                    me.createCylinder(atom0.coord.clone().sub(v0), atom1.coord.clone().sub(v0), me.cylinderRadius * factor * 0.3, atom0.color, bHighlight);\n                } else {\n                    if(me.bImpo) {\n                        me.createCylinder(atom0.coord.clone().add(v0), atom1.coord.clone().add(v0), me.cylinderRadius * factor * 0.3, atom0.color, bHighlight, atom1.color);\n                        me.createCylinder(atom0.coord.clone().sub(v0), atom1.coord.clone().sub(v0), me.cylinderRadius * factor * 0.3, atom0.color, bHighlight, atom1.color);\n                    }\n                    else {\n                        me.createCylinder(atom0.coord.clone().add(v0), mp.clone().add(v0), me.cylinderRadius * factor * 0.3, atom0.color, bHighlight);\n                        me.createCylinder(atom1.coord.clone().add(v0), mp.clone().add(v0), me.cylinderRadius * factor * 0.3, atom1.color, bHighlight);\n\n                        me.createCylinder(atom0.coord.clone().sub(v0), mp.clone().sub(v0), me.cylinderRadius * factor * 0.3, atom0.color, bHighlight);\n                        me.createCylinder(atom1.coord.clone().sub(v0), mp.clone().sub(v0), me.cylinderRadius * factor * 0.3, atom1.color, bHighlight);\n                    }\n                }\n            }\n            else if(me.aromaticbonds.hasOwnProperty(pair)) { // show aromatic bond\n                var a0, a1, a2;\n                if(atom0.bonds.length > atom1.bonds.length && atom0.bonds.length > 1) {\n                    a0 = atom0.serial;\n                    a1 = atom0.bonds[0];\n                    a2 = atom0.bonds[1];\n                }\n                else if(atom1.bonds.length > 1) {\n                    a0 = atom1.serial;\n                    a1 = atom1.bonds[0];\n                    a2 = atom1.bonds[1];\n                }\n                else {\n                    return;\n                }\n\n                var v1 = me.atoms[a0].coord.clone();\n                v1.sub(me.atoms[a1].coord);\n                var v2 = me.atoms[a0].coord.clone();\n                v2.sub(me.atoms[a2].coord);\n\n                v1.cross(v2);\n\n                var v0 = atom1.coord.clone();\n                v0.sub(atom0.coord);\n\n                v0.cross(v1).normalize().multiplyScalar(0.2 * factor);\n\n                // find an aromatic neighbor\n                var aromaticNeighbor = 0;\n                for(var i = 0, il = atom0.bondOrder.length; i < il; ++i) {\n                    if(atom0.bondOrder[i] === '1.5' && atom0.bonds[i] !== atom1.serial) {\n                        aromaticNeighbor = atom0.bonds[i];\n                    }\n                }\n\n                var dashed = \"add\";\n                if(aromaticNeighbor === 0 ) { // no neighbor found, atom order does not matter\n                    dashed = \"add\";\n                }\n                else {\n                    // calculate the angle between atom1, atom0add, atomNeighbor and the angle atom1, atom0sub, atomNeighbor\n                    var atom0add = atom0.coord.clone().add(v0);\n                    var atom0sub = atom0.coord.clone().sub(v0);\n\n                    var a = atom1.coord.clone().sub(atom0add).normalize();\n                    var b = me.atoms[aromaticNeighbor].coord.clone().sub(atom0add).normalize();\n\n                    var c = atom1.coord.clone().sub(atom0sub).normalize();\n                    var d = me.atoms[aromaticNeighbor].coord.clone().sub(atom0sub).normalize();\n\n                    var angleadd = Math.acos(a.dot(b));\n                    var anglesub = Math.acos(c.dot(d));\n\n                    if(angleadd < anglesub) {\n                        dashed = 'sub';\n                    }\n                    else {\n                        dashed = 'add';\n                    }\n                }\n\n                if (atom0.color === atom1.color) {\n                    var base, step;\n                    if(dashed === 'add') {\n                        me.createCylinder(atom0.coord.clone().sub(v0), atom1.coord.clone().sub(v0), me.cylinderRadius * factor * 0.3, atom0.color, bHighlight);\n\n                        base = atom0.coord.clone().add(v0);\n                        step = atom1.coord.clone().add(v0).sub(base).multiplyScalar(1.0/11);\n                    }\n                    else {\n                        me.createCylinder(atom0.coord.clone().add(v0), atom1.coord.clone().add(v0), me.cylinderRadius * factor * 0.3, atom0.color, bHighlight);\n\n                        base = atom0.coord.clone().sub(v0);\n                        step = atom1.coord.clone().sub(v0).sub(base).multiplyScalar(1.0/11);\n                    }\n\n                    for(var i = 0; i <= 10; ++i) {\n                        if(i % 2 == 0) {\n                            var pos1 = base.clone().add(step.clone().multiplyScalar(i));\n                            var pos2 = base.clone().add(step.clone().multiplyScalar(i + 1));\n                            me.createCylinder(pos1, pos2, me.cylinderRadius * factor * 0.3, atom0.color, bHighlight);\n                        }\n                    }\n\n                } else {\n                    var base, step;\n                    if(dashed === 'add') {\n                        me.createCylinder(atom0.coord.clone().sub(v0), mp.clone().sub(v0), me.cylinderRadius * factor * 0.3, atom0.color, bHighlight);\n                        me.createCylinder(atom1.coord.clone().sub(v0), mp.clone().sub(v0), me.cylinderRadius * factor * 0.3, atom1.color, bHighlight);\n\n                        base = atom0.coord.clone().add(v0);\n                        step = atom1.coord.clone().add(v0).sub(base).multiplyScalar(1.0/11);\n                    }\n                    else {\n                        me.createCylinder(atom0.coord.clone().add(v0), mp.clone().add(v0), me.cylinderRadius * factor * 0.3, atom0.color, bHighlight);\n                        me.createCylinder(atom1.coord.clone().add(v0), mp.clone().add(v0), me.cylinderRadius * factor * 0.3, atom1.color, bHighlight);\n\n                        base = atom0.coord.clone().sub(v0);\n                        step = atom1.coord.clone().sub(v0).sub(base).multiplyScalar(1.0/11);\n                    }\n\n                    for(var i = 0; i <= 10; ++i) {\n                        if(i % 2 == 0) {\n                            var pos1 = base.clone().add(step.clone().multiplyScalar(i));\n                            var pos2 = base.clone().add(step.clone().multiplyScalar(i + 1));\n                            if(i < 5) {\n                                me.createCylinder(pos1, pos2, me.cylinderRadius * factor * 0.3, atom0.color, bHighlight);\n                            }\n                            else {\n                                me.createCylinder(pos1, pos2, me.cylinderRadius * factor * 0.3, atom1.color, bHighlight);\n                            }\n                        }\n                    }\n                }\n            }\n            else if(me.triplebonds.hasOwnProperty(pair)) { // show triple bond\n                var random = new THREE.Vector3(Math.random(),Math.random(),Math.random());\n                var v = atom1.coord.clone();\n                v.sub(atom0.coord);\n\n                var c = random.clone();\n                c.cross(v).normalize().multiplyScalar(0.3 * factor);\n\n                if (atom0.color === atom1.color) {\n                    me.createCylinder(atom0.coord, atom1.coord, me.cylinderRadius * factor * 0.2, atom0.color, bHighlight);\n                    me.createCylinder(atom0.coord.clone().add(c), atom1.coord.clone().add(c), me.cylinderRadius * factor * 0.2, atom0.color, bHighlight);\n                    me.createCylinder(atom0.coord.clone().sub(c), atom1.coord.clone().sub(c), me.cylinderRadius * factor * 0.2, atom0.color, bHighlight);\n                } else {\n                    if(me.bImpo) {\n                        me.createCylinder(atom0.coord, atom1.coord, me.cylinderRadius * factor * 0.2, atom0.color, bHighlight, atom1.color);\n                        me.createCylinder(atom0.coord.clone().add(c), atom1.coord.clone().add(c), me.cylinderRadius * factor * 0.2, atom0.color, bHighlight, atom1.color);\n                        me.createCylinder(atom0.coord.clone().sub(c), atom1.coord.clone().sub(c), me.cylinderRadius * factor * 0.2, atom0.color, bHighlight, atom1.color);\n                    }\n                    else {\n                        me.createCylinder(atom0.coord, mp, me.cylinderRadius * factor * 0.2, atom0.color, bHighlight);\n                        me.createCylinder(atom1.coord, mp, me.cylinderRadius * factor * 0.2, atom1.color, bHighlight);\n\n                        me.createCylinder(atom0.coord.clone().add(c), mp.clone().add(c), me.cylinderRadius * factor * 0.2, atom0.color, bHighlight);\n                        me.createCylinder(atom1.coord.clone().add(c), mp.clone().add(c), me.cylinderRadius * factor * 0.2, atom1.color, bHighlight);\n\n                        me.createCylinder(atom0.coord.clone().sub(c), mp.clone().sub(c), me.cylinderRadius * factor * 0.2, atom0.color, bHighlight);\n                        me.createCylinder(atom1.coord.clone().sub(c), mp.clone().sub(c), me.cylinderRadius * factor * 0.2, atom1.color, bHighlight);\n                    }\n                }\n            }\n            else {\n                if (atom0.color === atom1.color) {\n                    me.createCylinder(atom0.coord, atom1.coord, bondR, atom0.color, bHighlight);\n                } else {\n                    if(me.bImpo) {\n                        me.createCylinder(atom0.coord, atom1.coord, bondR, atom0.color, bHighlight, atom1.color);\n                    }\n                    else {\n                        me.createCylinder(atom0.coord, mp, bondR, atom0.color, bHighlight);\n                        me.createCylinder(atom1.coord, mp, bondR, atom1.color, bHighlight);\n                    }\n                }\n            }\n        });\n//        }\n//        else if(bHighlight === 2) {\n//            this.createBoxRepresentation_P_CA(atoms, 1.2, bHighlight);\n//        }\n};\n\n// modified from iview (http://istar.cse.cuhk.edu.hk/iview/)\niCn3D.prototype.createLineRepresentation = function (atoms, bHighlight) {\n    var me = this;\n    var geo = new THREE.Geometry();\n    this.createRepresentationSub(atoms, undefined, function (atom0, atom1) {\n        if (atom0.color === atom1.color) {\n            geo.vertices.push(atom0.coord);\n            geo.vertices.push(atom1.coord);\n            geo.colors.push(atom0.color);\n            geo.colors.push(atom1.color);\n        } else {\n            var mp = atom0.coord.clone().add(atom1.coord).multiplyScalar(0.5);\n            geo.vertices.push(atom0.coord);\n            geo.vertices.push(mp);\n            geo.vertices.push(atom1.coord);\n            geo.vertices.push(mp);\n            geo.colors.push(atom0.color);\n            geo.colors.push(atom0.color);\n            geo.colors.push(atom1.color);\n            geo.colors.push(atom1.color);\n        }\n    });\n\n    if(bHighlight !== 2) {\n        var line;\n        if(bHighlight === 1) {\n            // highlight didn't work for lines\n            //line = new THREE.Mesh(geo, this.matShader);\n        }\n        else {\n            //line = new THREE.Line(geo, new THREE.LineBasicMaterial({ linewidth: this.linewidth, vertexColors: true }), THREE.LineSegments);\n            line = new THREE.LineSegments(geo, new THREE.LineBasicMaterial({ linewidth: this.linewidth, vertexColors: true }));\n            this.mdl.add(line);\n        }\n\n        if(bHighlight === 1) {\n            this.prevHighlightObjects.push(line);\n        }\n        else {\n            this.objects.push(line);\n        }\n    }\n    else if(bHighlight === 2) {\n        this.createBoxRepresentation_P_CA(atoms, 0.8, bHighlight);\n    }\n};\n\n/*\n// modified from iview (http://istar.cse.cuhk.edu.hk/iview/)\n// Catmull�Rom subdivision\niCn3D.prototype.subdivide = function (_pnts, _clrs, DIV, bShowArray, bHighlight, prevone, nexttwo, bExtendLastRes) {\n    var ret = [];\n    var pos = [];\n    var color = [];\n\n    var pnts = new Array(); // Smoothing test\n\n    var prevoneLen = (prevone !== undefined) ? prevone.length : 0;\n    var nexttwoLenOri = (nexttwo !== undefined) ? nexttwo.length : 0;\n\n    if(prevoneLen > 0) pnts.push(prevone[0]);\n\n    pnts.push(_pnts[0]);\n    for (var i = 1, lim = _pnts.length - 1; i < lim; ++i) {\n        var p0 = _pnts[i], p1 = _pnts[i + 1];\n        pnts.push(p0.smoothen ? p0.clone().add(p1).multiplyScalar(0.5) : p0);\n    }\n    pnts.push(_pnts[_pnts.length - 1]);\n\n    if(nexttwoLenOri > 0) pnts.push(nexttwo[0]);\n    if(nexttwoLenOri > 1) pnts.push(nexttwo[1]);\n\n    var savedPoints = [];\n    var savedPos = [];\n    var savedColor = [];\n\n    var nexttwoLen = nexttwoLenOri;\n    if(bExtendLastRes) {\n        nexttwoLen = (nexttwoLenOri > 0) ? nexttwoLenOri - 1 : 0;\n    }\n\n    for (var i = -1, size = pnts.length, DIVINV = 1 / DIV; i <= size - 3; ++i) {\n        var newI = i - prevoneLen;\n        var p0 = pnts[i === -1 ? 0 : i];\n        var p1 = pnts[i + 1];\n        var p2 = pnts[i + 2];\n        var p3 = pnts[i === size - 3 ? size - 1 : i + 3];\n        var v0 = p2.clone().sub(p0).multiplyScalar(0.5);\n        var v1 = p3.clone().sub(p1).multiplyScalar(0.5);\n\n        //if(i > -1 && bHighlight && bShowArray !== undefined && bShowArray[i + 1]) {\n        if(i > -1 && (bShowArray === undefined || bShowArray[newI + 1]) ) {\n            // get from previous i for the first half of residue\n            if(i >= -1 + prevoneLen && i <= size - 3 - nexttwoLen + 1) {\n                ret = ret.concat(savedPoints);\n                pos = pos.concat(savedPos);\n                color = color.concat(savedColor);\n            }\n        }\n\n        savedPoints = [];\n        savedPos = [];\n        savedColor = [];\n\n        for (var j = 0; j < DIV; ++j) {\n            var t = DIVINV * j;\n            var x = p1.x + t * v0.x\n                     + t * t * (-3 * p1.x + 3 * p2.x - 2 * v0.x - v1.x)\n                     + t * t * t * (2 * p1.x - 2 * p2.x + v0.x + v1.x);\n            var y = p1.y + t * v0.y\n                     + t * t * (-3 * p1.y + 3 * p2.y - 2 * v0.y - v1.y)\n                     + t * t * t * (2 * p1.y - 2 * p2.y + v0.y + v1.y);\n            var z = p1.z + t * v0.z\n                     + t * t * (-3 * p1.z + 3 * p2.z - 2 * v0.z - v1.z)\n                     + t * t * t * (2 * p1.z - 2 * p2.z + v0.z + v1.z);\n\n            if(!bShowArray) {\n                if(i >= -1 + prevoneLen && i <= size - 3 - nexttwoLen) {\n                    ret.push(new THREE.Vector3(x, y, z));\n                    pos.push(newI + 1);\n                    color.push(_clrs[newI+1]);\n                }\n            }\n            else {\n                if(i >= -1 + prevoneLen && i <= size - 3 - nexttwoLen) {\n                    if(bShowArray[newI + 1]) {\n                        if(j <= parseInt((DIV) / 2) ) {\n                            ret.push(new THREE.Vector3(x, y, z));\n                            pos.push(bShowArray[newI + 1]);\n                            color.push(_clrs[newI+1]);\n                        }\n                    }\n                }\n\n                if(i >= -1 + prevoneLen && i <= size - 3 - nexttwoLen + 1) {\n                    if(bShowArray[newI + 2]) {\n                        if(j > parseInt((DIV) / 2) ) {\n                            savedPoints.push(new THREE.Vector3(x, y, z));\n                            savedPos.push(bShowArray[newI + 2]);\n                            savedColor.push(_clrs[newI+2]);\n                        }\n                    }\n                }\n            } // end else\n\n        } // end for (var j = 0;\n    } // end for (var i = -1;\n\n    if(!bShowArray || bShowArray[newI + 1]) {\n        //if(bHighlight) {\n        ret = ret.concat(savedPoints);\n        pos = pos.concat(savedPos);\n        color = color.concat(savedColor);\n        //}\n\n        ret.push(pnts[pnts.length - 1 - nexttwoLen]);\n        pos.push(pnts.length - 1 - nexttwoLen);\n        color.push(_clrs[pnts.length - 1 - nexttwoLen]);\n    }\n\n    savedPoints = [];\n    savedPos = [];\n    savedColor = [];\n    pnts = [];\n\n    var pnts_positions = [];\n\n    pnts_positions.push(ret);\n    pnts_positions.push(pos);\n    pnts_positions.push(color);\n\n    return pnts_positions;\n};\n*/\n\niCn3D.prototype.getKnot = function (alpha, ti, Pi, Pj) {\n    var alpha = 1;\n\n    //return Math.pow(Pi.distanceTo(Pj), alpha) + ti;\n    return Pi.distanceTo(Pj) + ti;\n}\n\niCn3D.prototype.getValueFromKnot = function (t, t0, t1, t2, t3, y0, y1, y2, y3) {\n    var inf = 9999;\n\n    // m(i) = ( t(i+1) - t(i) == 0 ) ? 0 : ( y(i+1) - y(i) ) / ( t(i+1) - t(i) )\n    var m0 = (y1 - y0) / (t1 - t0);\n    var m1 = (y2 - y1) / (t2 - t1);\n    var m2 = (y3 - y2) / (t3 - t2);\n\n    // L(i) = m(i) * (t - t(i)) + y(i)\n    //var L0 = m0 * (t - t0) + y0;\n    var L1 = m1 * (t - t1) + y1;\n    //var L2 = m2 * (t - t2) + y2;\n\n    var denom = (t1 + t2) * (t1 + t2) - 4*(t0*t1 + t2*t3 - t0*t3);\n    var d0 = 0;\n    var d3 = 0;\n    var d1, d2;\n\n    if(denom == 0) {\n        d1 = inf;\n        d2 = inf;\n    }\n    else {\n        d1 = 6 * (3*m1*t1 + 2*m0*t3 + m2*t1 - 2*m0*t1 - 2*m1*t3 - m1*t2 - m2*t1) / denom;\n        d2 = 6 * (3*m1*t2 + 2*m2*t0 + m0*t1 - 2*m1*t0 - 2*m2*t2 - m0*t2 - m1*t1) / denom;\n    }\n\n    // a(i) = ( 2*d(i) + d(i+1) ) / 6 / (t(i) - t(i+1))\n    // b(i) = ( 2*d(i+1) + d(i) ) / 6 / (t(i+1) - t(i))\n    //var a0 = ( 2*d0 + d1 ) / 6 / (t0 - t1);\n    var a1 = ( 2*d1 + d2 ) / 6 / (t1 - t2);\n    //var a2 = ( 2*d2 + d3 ) / 6 / (t2 - t3);\n\n    //var b0 = ( 2*d1 + d0 ) / 6 / (t1 - t0);\n    var b1 = ( 2*d2 + d1 ) / 6 / (t2 - t1);\n    //var b2 = ( 2*d3 + d2 ) / 6 / (t3 - t2);\n\n    // C(i) = a(i)*(t - t(i))*(t - t(i+1))*(t - t(i+1)) + b(i)*(t - t(i))*(t - t(i))*(t - t(i+1))\n    //var C0 = a0*(t - t0)*(t - t1)*(t - t1) + b0*(t - t0)*(t - t0)*(t - t1);\n    var C1 = a1*(t - t1)*(t - t2)*(t - t2) + b1*(t - t1)*(t - t1)*(t - t2);\n    //var C2 = a2*(t - t2)*(t - t3)*(t - t3) + b2*(t - t2)*(t - t2)*(t - t3);\n\n    var F1 = L1 + C1;\n\n    return F1;\n}\n\n// cubic splines for four points: http://thalestriangles.blogspot.com/2014/02/a-bit-of-ex-spline-ation.html\n// https://math.stackexchange.com/questions/577641/how-to-calculate-interpolating-splines-in-3d-space\niCn3D.prototype.subdivide = function (_pnts, _clrs, DIV, bShowArray, bHighlight, prevone, nexttwo, bExtendLastRes) {\n    var ret = [];\n    var pos = [];\n    var color = [];\n\n    var pnts = new Array(); // Smoothing test\n\n    var prevoneLen = (prevone !== undefined) ? prevone.length : 0;\n    var nexttwoLenOri = (nexttwo !== undefined) ? nexttwo.length : 0;\n\n    if(prevoneLen > 0) pnts.push(prevone[0]);\n\n    pnts.push(_pnts[0]);\n    for (var i = 1, lim = _pnts.length - 1; i < lim; ++i) {\n        var p0 = _pnts[i], p1 = _pnts[i + 1];\n        pnts.push(p0.smoothen ? p0.clone().add(p1).multiplyScalar(0.5) : p0);\n    }\n    pnts.push(_pnts[_pnts.length - 1]);\n\n    if(nexttwoLenOri > 0) pnts.push(nexttwo[0]);\n    if(nexttwoLenOri > 1) pnts.push(nexttwo[1]);\n\n    var savedPoints = [];\n    var savedPos = [];\n    var savedColor = [];\n\n    var nexttwoLen = nexttwoLenOri;\n    if(bExtendLastRes) {\n        nexttwoLen = (nexttwoLenOri > 0) ? nexttwoLenOri - 1 : 0;\n    }\n\n    var alpha = 1;\n\n    for (var i = -1, size = pnts.length, DIVINV = 1 / DIV; i <= size - 3; ++i) {\n        var newI = i - prevoneLen;\n        var p0 = pnts[i === -1 ? 0 : i];\n        var p1 = pnts[i + 1];\n        var p2 = pnts[i + 2];\n        var p3 = pnts[i === size - 3 ? size - 1 : i + 3];\n\n        var t0 = 0;\n        var t1 = this.getKnot(alpha, t0, p0, p1);\n        var t2 = this.getKnot(alpha, t1, p1, p2);\n        var t3 = this.getKnot(alpha, t2, p2, p3);\n\n        if(t1 - t0 < 1e-4) t1 = t0 + 1;\n        if(t2 - t1 < 1e-4) t2 = t1 + 1;\n        if(t3 - t2 < 1e-4) t3 = t2 + 1;\n\n        //if(i > -1 && bHighlight && bShowArray !== undefined && bShowArray[i + 1]) {\n        if(i > -1 && (bShowArray === undefined || bShowArray[newI + 1]) ) {\n            // get from previous i for the first half of residue\n            if(i >= -1 + prevoneLen && i <= size - 3 - nexttwoLen + 1) {\n                ret = ret.concat(savedPoints);\n                pos = pos.concat(savedPos);\n                color = color.concat(savedColor);\n            }\n        }\n\n        savedPoints = [];\n        savedPos = [];\n        savedColor = [];\n\n        var step = (t2 - t1) * DIVINV;\n        for (var j = 0; j < DIV; ++j) {\n            var t = t1 + step * j;\n            var x = this.getValueFromKnot(t, t0, t1, t2, t3, p0.x, p1.x, p2.x, p3.x);\n            var y = this.getValueFromKnot(t, t0, t1, t2, t3, p0.y, p1.y, p2.y, p3.y);\n            var z = this.getValueFromKnot(t, t0, t1, t2, t3, p0.z, p1.z, p2.z, p3.z);\n\n            if(!bShowArray) {\n                if(i >= -1 + prevoneLen && i <= size - 3 - nexttwoLen) {\n                    ret.push(new THREE.Vector3(x, y, z));\n                    pos.push(newI + 1);\n                    color.push(_clrs[newI+1]);\n                }\n            }\n            else {\n                if(i >= -1 + prevoneLen && i <= size - 3 - nexttwoLen) {\n                    if(bShowArray[newI + 1]) {\n                        if(j <= parseInt((DIV) / 2) ) {\n                            ret.push(new THREE.Vector3(x, y, z));\n                            pos.push(bShowArray[newI + 1]);\n                            color.push(_clrs[newI+1]);\n                        }\n                    }\n                }\n\n                if(i >= -1 + prevoneLen && i <= size - 3 - nexttwoLen + 1) {\n                    if(bShowArray[newI + 2]) {\n                        if(j > parseInt((DIV) / 2) ) {\n                            savedPoints.push(new THREE.Vector3(x, y, z));\n                            savedPos.push(bShowArray[newI + 2]);\n                            savedColor.push(_clrs[newI+2]);\n                        }\n                    }\n                }\n            } // end else\n\n        } // end for (var j = 0;\n    } // end for (var i = -1;\n\n    if(!bShowArray || bShowArray[newI + 1]) {\n        //if(bHighlight) {\n        ret = ret.concat(savedPoints);\n        pos = pos.concat(savedPos);\n        color = color.concat(savedColor);\n        //}\n\n        ret.push(pnts[pnts.length - 1 - nexttwoLen]);\n        pos.push(pnts.length - 1 - nexttwoLen);\n        color.push(_clrs[pnts.length - 1 - nexttwoLen]);\n    }\n\n    savedPoints = [];\n    savedPos = [];\n    savedColor = [];\n    pnts = [];\n\n    var pnts_positions = [];\n\n    pnts_positions.push(ret);\n    pnts_positions.push(pos);\n    pnts_positions.push(color);\n\n    return pnts_positions;\n};\n\niCn3D.prototype.createCurveSubArrow = function (p, width, colors, div, bHighlight, bRibbon, num, positionIndex, pntsCA, prevCOArray, bShowArray, calphaIdArray, bShowArrow, prevone, nexttwo) {\n    var divPoints = [], positions = [];\n\n    divPoints.push(p);\n    positions.push(positionIndex);\n\n    this.prepareStrand(divPoints, positions, width, colors, div, undefined, bHighlight, bRibbon, num, pntsCA, prevCOArray, false, bShowArray, calphaIdArray, bShowArrow, prevone, nexttwo);\n\n    divPoints = [];\n    positions = [];\n};\n\niCn3D.prototype.setCalphaDrawnCoord = function (pnts, div, calphaIdArray) {\n    var index = 0;\n\n    if(calphaIdArray !== undefined) {\n        for(var i = 0, il = pnts.length; i < il; i += div) { // pnts.length = (calphaIdArray.length - 1) * div + 1\n            var serial = calphaIdArray[index];\n\n            if(this.atoms.hasOwnProperty(serial)) {\n                this.atoms[serial].coord2 = pnts[i].clone();\n            }\n\n            ++index;\n        }\n    }\n};\n\n\n// modified from iview (http://star.cse.cuhk.edu.hk/iview/)\niCn3D.prototype.createCurveSub = function (_pnts, width, colors, div, bHighlight, bRibbon, bNoSmoothen, bShowArray, calphaIdArray, positions, prevone, nexttwo) {\n    if (_pnts.length === 0) return;\n    div = div || 5;\n    var pnts;\n    if(!bNoSmoothen) {\n        var bExtendLastRes = true;\n        var pnts_clrs = this.subdivide(_pnts, colors, div, bShowArray, bHighlight, prevone, nexttwo, bExtendLastRes);\n        pnts = pnts_clrs[0];\n        colors = pnts_clrs[2];\n    }\n    else {\n        pnts = _pnts;\n    }\n    if (pnts.length === 0) return;\n\n    this.setCalphaDrawnCoord(pnts, div, calphaIdArray);\n\n    if(bHighlight === 1) {\n        var radius = this.coilWidth / 2;\n        //var radiusSegments = 8;\n        var radiusSegments = 4; // save memory\n        var closed = false;\n\n        if(pnts.length > 1) {\n            if(positions !== undefined) {\n                var currPos, prevPos;\n                var currPoints = [];\n                for(var i = 0, il = pnts.length; i < il; ++i) {\n                    currPos = positions[i];\n\n                    if( (currPos !== prevPos && currPos !== prevPos + 1 && prevPos !== undefined) || (i === il -1) ) {\n                        // first tube\n                        var geometry0 = new THREE.TubeGeometry(\n                            new THREE.CatmullRomCurve3(currPoints), // path\n                            currPoints.length, // segments\n                            radius,\n                            radiusSegments,\n                            closed\n                        );\n\n                        mesh = new THREE.Mesh(geometry0, this.matShader);\n                        mesh.renderOrder = this.renderOrderPicking;\n                        //this.mdlPicking.add(mesh);\n                        this.mdl.add(mesh);\n\n                        this.prevHighlightObjects.push(mesh);\n\n                        geometry0 = null;\n\n                        currPoints = [];\n                    }\n\n                    currPoints.push(pnts[i]);\n\n                    prevPos = currPos;\n                }\n\n                currPoints = [];\n            }\n            else {\n                var geometry0 = new THREE.TubeGeometry(\n                    new THREE.CatmullRomCurve3(pnts), // path\n                    pnts.length, // segments\n                    radius,\n                    radiusSegments,\n                    closed\n                );\n\n                mesh = new THREE.Mesh(geometry0, this.matShader);\n                mesh.renderOrder = this.renderOrderPicking;\n                //this.mdlPicking.add(mesh);\n                this.mdl.add(mesh);\n\n                this.prevHighlightObjects.push(mesh);\n\n                geometry0 = null;\n            }\n        }\n    }\n    else {\n        var geo = new THREE.Geometry();\n\n        if(bHighlight === 2 && bRibbon) {\n            for (var i = 0, divInv = 1 / div; i < pnts.length; ++i) {\n                // shift the highlight a little bit to avoid the overlap with ribbon\n                pnts[i].addScalar(0.6); // this.ribbonthickness is 0.4\n                geo.vertices.push(pnts[i]);\n                //geo.colors.push(new THREE.Color(colors[i === 0 ? 0 : Math.round((i - 1) * divInv)]));\n                geo.colors.push(new THREE.Color(colors[i]));\n            }\n        }\n        else {\n            for (var i = 0, divInv = 1 / div; i < pnts.length; ++i) {\n                geo.vertices.push(pnts[i]);\n                //geo.colors.push(new THREE.Color(colors[i === 0 ? 0 : Math.round((i - 1) * divInv)]));\n                geo.colors.push(new THREE.Color(colors[i]));\n            }\n        }\n\n        //var line = new THREE.Line(geo, new THREE.LineBasicMaterial({ linewidth: width, vertexColors: true }), THREE.LineStrip);\n        var line = new THREE.Line(geo, new THREE.LineBasicMaterial({ linewidth: width, vertexColors: true }));\n        this.mdl.add(line);\n        if(bHighlight === 2) {\n            this.prevHighlightObjects.push(line);\n        }\n        else {\n            this.objects.push(line);\n        }\n    }\n\n    pnts = null;\n};\n\n// modified from iview (http://istar.cse.cuhk.edu.hk/iview/)\niCn3D.prototype.createCylinderCurve = function (atoms, atomNameArray, radius, bLines, bHighlight) {\n    var start = null;\n    var currentChain, currentResi;\n    var i;\n    var pnts = [], colors = [], radii = [];\n\n    var maxDistance = 8.0; // max residue-residue (or nucleitide-nucleitide) distance allowed\n\n    for (i in atoms) {\n        var atom = atoms[i];\n        if (atom.het) continue;\n\n        //if (atom.name !== atomName) continue;\n        if(atomNameArray.indexOf(atom.name) == -1) continue;\n\n        if (start !== null && currentChain === atom.chain && currentResi + 1 === atom.resi && Math.abs(start.coord.x - atom.coord.x) < maxDistance && Math.abs(start.coord.y - atom.coord.y) < maxDistance && Math.abs(start.coord.z - atom.coord.z) < maxDistance ) {\n//            if (start !== null && currentChain === atom.chain && Math.abs(start.coord.x - atom.coord.x) < maxDistance && Math.abs(start.coord.y - atom.coord.y) < maxDistance && Math.abs(start.coord.z - atom.coord.z) < maxDistance ) {\n            var middleCoord = start.coord.clone().add(atom.coord).multiplyScalar(0.5);\n\n            if(!bHighlight) {\n                if(bLines) {\n                    var line = this.createSingleLine( start.coord, middleCoord, start.color, false);\n                    this.mdl.add(line);\n                    this.objects.push(line);\n                    line = this.createSingleLine( middleCoord, atom.coord, atom.color, false);\n                    this.mdl.add(line);\n                    this.objects.push(line);\n                }\n                else {\n                    this.createCylinder(start.coord, middleCoord, radius, start.color);\n                    this.createCylinder(middleCoord, atom.coord, radius, atom.color);\n                    this.createSphere(atom, radius, true, 1, bHighlight);\n                }\n            }\n            else if(bHighlight === 1) {\n                this.createCylinder(start.coord, middleCoord, radius, start.color, bHighlight);\n                this.createCylinder(middleCoord, atom.coord, radius, atom.color, bHighlight);\n                this.createSphere(atom, radius, true, 1, bHighlight);\n            }\n        }\n\n        start = atom;\n        currentChain = atom.chain;\n        currentResi = atom.resi;\n\n        if(bHighlight === 2) this.createBox(atom, undefined, undefined, undefined, undefined, bHighlight);\n    }\n    if (start !== null && currentChain === atom.chain && currentResi + 1 === atom.resi && Math.abs(start.coord.x - atom.coord.x) < maxDistance && Math.abs(start.coord.y - atom.coord.y) < maxDistance && Math.abs(start.coord.z - atom.coord.z) < maxDistance ) {\n//        if (start !== null && currentChain === atom.chain && Math.abs(start.coord.x - atom.coord.x) < maxDistance && Math.abs(start.coord.y - atom.coord.y) < maxDistance && Math.abs(start.coord.z - atom.coord.z) < maxDistance ) {\n        var middleCoord = start.coord.add(atom.coord).multiplyScalar(0.5);\n        if(!bHighlight) {\n            if(bLines) {\n                var line = this.createSingleLine( start.coord, middleCoord, start.color, false);\n                this.mdl.add(line);\n                this.objects.push(line);\n                line = this.createSingleLine( middleCoord, atom.coord, atom.color, false);\n                this.mdl.add(line);\n                this.objects.push(line);\n            }\n            else {\n                this.createCylinder(start.coord, middleCoord, radius, start.color);\n                this.createCylinder(middleCoord, atom.coord, radius, atom.color);\n            }\n        }\n        else if(bHighlight === 1) {\n            this.createCylinder(start.coord, middleCoord, radius, start.color, bHighlight);\n            this.createCylinder(middleCoord, atom.coord, radius, atom.color, bHighlight);\n            this.createSphere(atom, radius, true, 1, bHighlight);\n        }\n    }\n};\n\niCn3D.prototype.prepareStrand = function(divPoints, positions, width, colors, div, thickness, bHighlight, bRibbon, num, pntsCA, prevCOArray, bStrip, bShowArray, calphaIdArray, bShowArrow, prevone, nexttwo) {\n    if(pntsCA.length === 1) {\n        return;\n    }\n\n    var colorsLastTwo = [];\n    colorsLastTwo.push(colors[colors.length - 2]);\n    colorsLastTwo.push(colors[colors.length - 1]);\n\n    div = div || this.axisDIV;\n    var numM1Inv2 = 2 / (num - 1);\n    var delta, lastCAIndex, lastPrevCOIndex, v;\n\n    var pnts = {}, colorsTmp = [];\n    for(var i = 0, il = positions.length; i < il; ++i) pnts[i] = [];\n\n    // smooth C-alpha\n    var pnts_clrs = this.subdivide(pntsCA, colors, div, undefined, undefined, prevone, nexttwo);\n    var pntsCASmooth = pnts_clrs[0]; // get all smoothen pnts, do not use 'bShowArray'\n    //colors = pnts_clrs[2];\n\n    if(pntsCASmooth.length === 1) {\n        return;\n    }\n\n    // draw the sheet without the last residue\n    // use the sheet coord for n-2 residues\n    var colorsTmp = [];\n    var lastIndex = (bShowArrow === undefined || bShowArrow) ? pntsCA.length - 2 : pntsCA.length;\n\n    for (var i = 0, il = lastIndex; i < il; ++i) {\n        for(var index = 0, indexl = positions.length; index < indexl; ++index) {\n            pnts[index].push(divPoints[index][i]);\n        }\n        colorsTmp.push(colors[i]);\n    }\n    colorsTmp.push(colors[i]);\n\n    if(bShowArrow === undefined || bShowArrow) {\n        // assign the sheet coord from C-alpha for the 2nd to the last residue of the sheet\n        for(var i = 0, il = positions.length; i < il; ++i) {\n            delta = -1 + numM1Inv2 * positions[i];\n            lastCAIndex = pntsCASmooth.length - 1 - div;\n            lastPrevCOIndex = pntsCA.length - 2;\n            v = new THREE.Vector3(pntsCASmooth[lastCAIndex].x + prevCOArray[lastPrevCOIndex].x * delta, pntsCASmooth[lastCAIndex].y + prevCOArray[lastPrevCOIndex].y * delta, pntsCASmooth[lastCAIndex].z + prevCOArray[lastPrevCOIndex].z * delta);\n            pnts[i].push(v);\n        }\n    }\n\n    var posIndex = [];\n    var results;\n    for(var i = 0, il = positions.length; i < il; ++i) {\n        results = this.subdivide(pnts[i], colorsTmp, div, bShowArray, bHighlight);\n        pnts[i] = results[0];\n        colors = results[2];\n        if(i === 0) {\n            posIndex = results[1];\n        }\n    }\n\n    if(bStrip) {\n        this.createStrip(pnts[0], pnts[1], colors, div, thickness, bHighlight, true, undefined, calphaIdArray, posIndex, prevone, nexttwo);\n    }\n    else {\n        this.createCurveSub(pnts[0], width, colors, div, bHighlight, bRibbon, true, undefined, calphaIdArray, posIndex, prevone, nexttwo);\n    }\n\n    if(bShowArrow === undefined || bShowArrow) {\n        // draw the arrow\n        colorsTmp = [];\n\n        posIndex = [];\n        for(var index = 0, indexl = positions.length; index < indexl; ++index) {\n            pnts[index] = [];\n\n            for (var i = div * (pntsCA.length - 2), il = div * (pntsCA.length - 1); bShowArray[parseInt(i/div)] && i < il; i = i + div) {\n                var pos = parseInt(i/div);\n                for (var j = 0; j < div; ++j) {\n                    var delta = -1 + numM1Inv2 * positions[index];\n                    var scale = 1.8; // scale of the arrow width\n                    delta = delta * scale * (div - j) / div;\n                    var oriIndex = parseInt(i/div);\n\n                    var v = new THREE.Vector3(pntsCASmooth[i+j].x + prevCOArray[oriIndex].x * delta, pntsCASmooth[i+j].y + prevCOArray[oriIndex].y * delta, pntsCASmooth[i+j].z + prevCOArray[oriIndex].z * delta);\n                    v.smoothen = true;\n                    pnts[index].push(v);\n                    colorsTmp.push(colorsLastTwo[0]);\n                    if(index === 0) posIndex.push(pos);\n                }\n            }\n\n            // last residue\n            // make the arrow end with 0\n            var delta = 0;\n            var lastCAIndex = pntsCASmooth.length - 1;\n            var lastPrevCOIndex = pntsCA.length - 1;\n\n            //if(bShowArray[lastPrevCOIndex]) {\n                var v = new THREE.Vector3(pntsCASmooth[lastCAIndex].x + prevCOArray[lastPrevCOIndex].x * delta, pntsCASmooth[lastCAIndex].y + prevCOArray[lastPrevCOIndex].y * delta, pntsCASmooth[lastCAIndex].z + prevCOArray[lastPrevCOIndex].z * delta);\n                v.smoothen = true;\n                pnts[index].push(v);\n                colorsTmp.push(colorsLastTwo[1]);\n                if(index === 0) posIndex.push(lastCAIndex);\n            //}\n        }\n\n        pntsCASmooth = [];\n\n        //colorsTmp.push(colors[colors.length - 2]);\n        //colorsTmp.push(colors[colors.length - 1]);\n\n        if(bStrip) {\n            this.createStrip(pnts[0], pnts[1], colorsTmp, div, thickness, bHighlight, true, undefined, undefined, posIndex, prevone, nexttwo);\n        }\n        else {\n            this.createCurveSub(pnts[0], width, colorsTmp, div, bHighlight, bRibbon, true, undefined, undefined, posIndex, prevone, nexttwo);\n        }\n    }\n\n    for(var i in pnts) {\n        for(var j = 0, jl = pnts[i].length; j < jl; ++j) {\n            pnts[i][j] = null;\n        }\n        pnts[i] = [];\n    }\n\n    pnts = {};\n};\n\niCn3D.prototype.createStripArrow = function (p0, p1, colors, div, thickness, bHighlight, num, start, end, pntsCA, prevCOArray, bShowArray, calphaIdArray, bShowArrow, prevone, nexttwo) {\n    var divPoints = [], positions = [];\n\n    divPoints.push(p0);\n    divPoints.push(p1);\n    positions.push(start);\n    positions.push(end);\n\n    this.prepareStrand(divPoints, positions, undefined, colors, div, thickness, bHighlight, undefined, num, pntsCA, prevCOArray, true, bShowArray, calphaIdArray, bShowArrow, prevone, nexttwo);\n\n    divPoints = [];\n    positions = [];\n};\n\n// modified from iview (http://istar.cse.cuhk.edu.hk/iview/)\niCn3D.prototype.createStrip = function (p0, p1, colors, div, thickness, bHighlight, bNoSmoothen, bShowArray, calphaIdArray, positions, prevone, nexttwo) {\n    if (p0.length < 2) return;\n    div = div || this.axisDIV;\n    if(!bNoSmoothen) {\n        var bExtendLastRes = true;\n        var pnts_clrs0 = this.subdivide(p0, colors, div, bShowArray, bHighlight, prevone, nexttwo, bExtendLastRes);\n        var pnts_clrs1 = this.subdivide(p1, colors, div, bShowArray, bHighlight, prevone, nexttwo, bExtendLastRes);\n        p0 = pnts_clrs0[0];\n        p1 = pnts_clrs1[0];\n        colors = pnts_clrs0[2];\n    }\n    if (p0.length < 2) return;\n\n    this.setCalphaDrawnCoord(p0, div, calphaIdArray);\n\n    if(bHighlight === 1) {\n        //mesh = new THREE.Mesh(geo, this.matShader);\n\n        var radius = this.coilWidth / 2;\n        //var radiusSegments = 8;\n        var radiusSegments = 4; // save memory\n        var closed = false;\n\n        if(positions !== undefined) {\n            var currPos, prevPos;\n            var currP0 = [], currP1 = [];\n\n            for(var i = 0, il = p0.length; i < il; ++i) {\n                currPos = positions[i];\n\n                if((currPos !== prevPos && currPos !== prevPos + 1 && prevPos !== undefined) || (i === il -1) ) {\n                    // first tube\n                    var geometry0 = new THREE.TubeGeometry(\n                        new THREE.CatmullRomCurve3(currP0), // path\n                        currP0.length, // segments\n                        radius,\n                        radiusSegments,\n                        closed\n                    );\n\n                    mesh = new THREE.Mesh(geometry0, this.matShader);\n                    mesh.renderOrder = this.renderOrderPicking;\n                    //this.mdlPicking.add(mesh);\n                    this.mdl.add(mesh);\n\n                    this.prevHighlightObjects.push(mesh);\n\n                    geometry0 = null;\n\n                    // second tube\n                    var geometry1 = new THREE.TubeGeometry(\n                        new THREE.CatmullRomCurve3(currP1), // path\n                        currP1.length, // segments\n                        radius,\n                        radiusSegments,\n                        closed\n                    );\n\n                    mesh = new THREE.Mesh(geometry1, this.matShader);\n                    mesh.renderOrder = this.renderOrderPicking;\n                    //this.mdlPicking.add(mesh);\n                    this.mdl.add(mesh);\n\n                    this.prevHighlightObjects.push(mesh);\n\n                    geometry1 = null;\n\n                    currP0 = [];\n                    currP1 = [];\n                }\n\n                currP0.push(p0[i]);\n                currP1.push(p1[i]);\n\n                prevPos = currPos;\n            }\n\n            currP0 = [];\n            currP1 = [];\n        }\n        else {\n            // first tube\n            var geometry0 = new THREE.TubeGeometry(\n                new THREE.CatmullRomCurve3(p0), // path\n                p0.length, // segments\n                radius,\n                radiusSegments,\n                closed\n            );\n\n            mesh = new THREE.Mesh(geometry0, this.matShader);\n            mesh.renderOrder = this.renderOrderPicking;\n            //this.mdlPicking.add(mesh);\n            this.mdl.add(mesh);\n\n            this.prevHighlightObjects.push(mesh);\n\n            geometry0 = null;\n\n            // second tube\n            var geometry1 = new THREE.TubeGeometry(\n                new THREE.CatmullRomCurve3(p1), // path\n                p1.length, // segments\n                radius,\n                radiusSegments,\n                closed\n            );\n\n            mesh = new THREE.Mesh(geometry1, this.matShader);\n            mesh.renderOrder = this.renderOrderPicking;\n            //this.mdlPicking.add(mesh);\n            this.mdl.add(mesh);\n\n            this.prevHighlightObjects.push(mesh);\n\n            geometry1 = null;\n        }\n    }\n    else {\n        var geo = new THREE.Geometry();\n        var vs = geo.vertices, fs = geo.faces;\n        var axis, p0v, p1v, a0v, a1v;\n        for (var i = 0, lim = p0.length; i < lim; ++i) {\n            vs.push(p0v = p0[i]); // 0\n            vs.push(p0v); // 1\n            vs.push(p1v = p1[i]); // 2\n            vs.push(p1v); // 3\n            if (i < lim - 1) {\n                axis = p1[i].clone().sub(p0[i]).cross(p0[i + 1].clone().sub(p0[i])).normalize().multiplyScalar(thickness);\n            }\n            vs.push(a0v = p0[i].clone().add(axis)); // 4\n            vs.push(a0v); // 5\n            vs.push(a1v = p1[i].clone().add(axis)); // 6\n            vs.push(a1v); // 7\n        }\n        var faces = [[0, 2, -6, -8], [-4, -2, 6, 4], [7, 3, -5, -1], [-3, -7, 1, 5]];\n\n        for (var i = 1, lim = p0.length, divInv = 1 / div; i < lim; ++i) {\n            var offset = 8 * i;\n            //var color = new THREE.Color(colors[Math.round((i - 1) * divInv)]);\n            var color = new THREE.Color(colors[i - 1]);\n            for (var j = 0; j < 4; ++j) {\n                fs.push(new THREE.Face3(offset + faces[j][0], offset + faces[j][1], offset + faces[j][2], undefined, color));\n                fs.push(new THREE.Face3(offset + faces[j][3], offset + faces[j][0], offset + faces[j][2], undefined, color));\n            }\n        }\n        var vsize = vs.length - 8; // Cap\n        for (var i = 0; i < 4; ++i) {\n            vs.push(vs[i * 2]);\n            vs.push(vs[vsize + i * 2]);\n        };\n        vsize += 8;\n        fs.push(new THREE.Face3(vsize, vsize + 2, vsize + 6, undefined, fs[0].color));\n        fs.push(new THREE.Face3(vsize + 4, vsize, vsize + 6, undefined, fs[0].color));\n        fs.push(new THREE.Face3(vsize + 1, vsize + 5, vsize + 7, undefined, fs[fs.length - 3].color));\n        fs.push(new THREE.Face3(vsize + 3, vsize + 1, vsize + 7, undefined, fs[fs.length - 3].color));\n        geo.computeFaceNormals();\n        geo.computeVertexNormals(false);\n\n        var mesh;\n\n        if(bHighlight === 2) {\n          mesh = new THREE.Mesh(geo, new THREE.MeshPhongMaterial({ transparent: true, opacity: 0.5, specular: this.frac, shininess: 30, emissive: 0x000000, vertexColors: THREE.FaceColors, side: THREE.DoubleSide }));\n\n          this.mdl.add(mesh);\n          this.prevHighlightObjects.push(mesh);\n        }\n        else {\n          mesh = new THREE.Mesh(geo, new THREE.MeshPhongMaterial({ specular: this.frac, shininess: 30, emissive: 0x000000, vertexColors: THREE.FaceColors, side: THREE.DoubleSide }));\n\n          this.mdl.add(mesh);\n          this.objects.push(mesh);\n        }\n    }\n\n    p0 = null;\n    p1 = null;\n};\n\n// significantly modified from iview (http://istar.cse.cuhk.edu.hk/iview/)\niCn3D.prototype.createStrand = function (atoms, num, div, fill, coilWidth, helixSheetWidth, doNotSmoothen, thickness, bHighlight) {\n    var bRibbon = fill ? true: false;\n\n    // when highlight, the input atoms may only include part of sheet or helix\n    // include the whole sheet or helix when highlighting\n    var atomsAdjust = {};\n\n    //if( (bHighlight === 1 || bHighlight === 2) && !this.bAllAtoms) {\n    if( !this.bAllAtoms) {\n        var currChain, currResi, currAtom, prevChain, prevResi, prevAtom;\n        var firstAtom, lastAtom;\n        var index = 0, length = Object.keys(atoms).length;\n\n        atomsAdjust = this.cloneHash(atoms);\n        for(var serial in atoms) {\n          currChain = atoms[serial].structure + '_' + atoms[serial].chain;\n          currResi = parseInt(atoms[serial].resi);\n          currAtom = atoms[serial];\n\n          if(prevChain === undefined) firstAtom = atoms[serial];\n\n          if( (currChain !== prevChain && prevChain !== undefined) || (currResi !== prevResi && currResi !== prevResi + 1 && prevResi !== undefined) || index === length - 1) {\n            if( (currChain !== prevChain && prevChain !== undefined) || (currResi !== prevResi && currResi !== prevResi + 1 && prevResi !== undefined) ) {\n//              if( (currChain !== prevChain && prevChain !== undefined) || index === length - 1) {\n//                if( (currChain !== prevChain && prevChain !== undefined) ) {\n                lastAtom = prevAtom;\n            }\n            else if(index === length - 1) {\n                lastAtom = currAtom;\n            }\n\n            // fill the beginning\n            var beginResi = firstAtom.resi;\n            if(firstAtom.ss !== 'coil' && !(firstAtom.ssbegin) ) {\n                for(var i = firstAtom.resi - 1; i > 0; --i) {\n                    var residueid = firstAtom.structure + '_' + firstAtom.chain + '_' + i;\n                    if(!this.residues.hasOwnProperty(residueid)) break;\n\n                    var atom = this.getFirstCalphaAtomObj(this.residues[residueid]);\n\n                    if(atom.ss === firstAtom.ss && atom.ssbegin) {\n                        beginResi = atom.resi;\n                        break;\n                    }\n                }\n\n                for(var i = beginResi; i < firstAtom.resi; ++i) {\n                    var residueid = firstAtom.structure + '_' + firstAtom.chain + '_' + i;\n                    atomsAdjust = this.unionHash(atomsAdjust, this.hash2Atoms(this.residues[residueid]));\n                }\n            }\n\n            // add one extra residue for coils between strands/helix\n            if(this.pk === 3 && bHighlight === 1 && firstAtom.ss === 'coil') {\n                    var residueid = firstAtom.structure + '_' + firstAtom.chain + '_' + (firstAtom.resi - 1);\n                    if(this.residues.hasOwnProperty(residueid)) {\n                        atomsAdjust = this.unionHash(atomsAdjust, this.hash2Atoms(this.residues[residueid]));\n                        atoms = this.unionHash(atoms, this.hash2Atoms(this.residues[residueid]));\n                    }\n            }\n\n            // fill the end\n            var endResi = lastAtom.resi;\n            // when a coil connects to a sheet and the last residue of coil is highlighted, the first sheet residue is set as atom.notshow. This residue should not be shown.\n            if(lastAtom.ss !== 'coil' && !(lastAtom.ssend) && !(lastAtom.notshow)) {\n                var endChainResi = this.getLastAtomObj(this.chains[lastAtom.structure + '_' + lastAtom.chain]).resi;\n                for(var i = lastAtom.resi + 1; i <= endChainResi; ++i) {\n                    var residueid = lastAtom.structure + '_' + lastAtom.chain + '_' + i;\n                    if(!this.residues.hasOwnProperty(residueid)) break;\n\n                    var atom = this.getFirstCalphaAtomObj(this.residues[residueid]);\n\n                    if(atom.ss === lastAtom.ss && atom.ssend) {\n                        endResi = atom.resi;\n                        break;\n                    }\n                }\n\n                for(var i = lastAtom.resi + 1; i <= endResi; ++i) {\n                    var residueid = lastAtom.structure + '_' + lastAtom.chain + '_' + i;\n                    atomsAdjust = this.unionHash(atomsAdjust, this.hash2Atoms(this.residues[residueid]));\n                }\n            }\n\n            // add one extra residue for coils between strands/helix\n            if(this.pk === 3 && bHighlight === 1 && lastAtom.ss === 'coil') {\n                    var residueid = lastAtom.structure + '_' + lastAtom.chain + '_' + (lastAtom.resi + 1);\n                    if(this.residues.hasOwnProperty(residueid)) {\n                        atomsAdjust = this.unionHash(atomsAdjust, this.hash2Atoms(this.residues[residueid]));\n                        atoms = this.unionHash(atoms, this.hash2Atoms(this.residues[residueid]));\n                    }\n            }\n\n            // reset notshow\n            if(lastAtom.notshow) lastAtom.notshow = undefined;\n\n            firstAtom = currAtom;\n          }\n\n          prevChain = currChain;\n          prevResi = currResi;\n          prevAtom = currAtom;\n\n          ++index;\n        }\n    }\n    else {\n        atomsAdjust = atoms;\n    }\n\n    if(bHighlight === 2) {\n        if(fill) {\n            fill = false;\n            num = null;\n            div = null;\n            coilWidth = null;\n            helixSheetWidth = null;\n            thickness = undefined;\n        }\n        else {\n            fill = true;\n            num = 2;\n            div = undefined;\n            coilWidth = undefined;\n            helixSheetWidth = undefined;\n            thickness = this.ribbonthickness;\n        }\n    }\n\n    num = num || this.strandDIV;\n    div = div || this.axisDIV;\n    coilWidth = coilWidth || this.coilWidth;\n    doNotSmoothen = doNotSmoothen || false;\n    helixSheetWidth = helixSheetWidth || this.helixSheetWidth;\n    var pnts = {}; for (var k = 0; k < num; ++k) pnts[k] = [];\n    var pntsCA = [];\n    var prevCOArray = [];\n    var bShowArray = [];\n    var calphaIdArray = []; // used to store one of the final positions drawn in 3D\n    var colors = [];\n    var currentChain, currentResi, currentCA = null, currentO = null, currentColor = null, prevCoorCA = null, prevCoorO = null, prevColor = null;\n    var prevCO = null, ss = null, ssend = false, atomid = null, prevAtomid = null, prevResi = null, calphaid = null, prevCalphaid = null;\n    var strandWidth, bSheetSegment = false, bHelixSegment = false;\n    var atom, tubeAtoms = {};\n\n    // test the first 30 atoms to see whether only C-alpha is available\n    this.bCalphaOnly = this.isCalphaPhosOnly(atomsAdjust); //, 'CA');\n\n    // when highlight, draw whole beta sheet and use bShowArray to show the highlight part\n    var residueHash = {};\n    for(var i in atomsAdjust) {\n        var atom = atomsAdjust[i];\n\n        residueid = atom.structure + '_' + atom.chain + '_' + atom.resi;\n        residueHash[residueid] = 1;\n    }\n    var totalResidueCount = Object.keys(residueHash).length;\n\n    var drawnResidueCount = 0;\n    var highlightResiduesCount = 0;\n\n    var bFullAtom = (Object.keys(this.hAtoms).length == Object.keys(this.atoms).length) ? true : false;\n\n    var caArray = []; // record all C-alpha atoms to predict the helix\n\n    for (var i in atomsAdjust) {\n        atom = atomsAdjust[i];\n        var atomOxygen = undefined;\n        if ((atom.name === 'O' || atom.name === 'CA') && !atom.het) {\n                // \"CA\" has to appear before \"O\"\n\n                if (atom.name === 'CA') {\n                    if ( atoms.hasOwnProperty(i) && ((atom.ss !== 'helix' && atom.ss !== 'sheet') || atom.ssend || atom.ssbegin) ) {\n                        tubeAtoms[i] = atom;\n                    }\n\n                    currentCA = atom.coord;\n                    currentColor = atom.color;\n                    calphaid = atom.serial;\n\n                    caArray.push(atom.serial);\n                }\n\n                if (atom.name === 'O' || (this.bCalphaOnly && atom.name === 'CA')) {\n                    if(currentCA === null || currentCA === undefined) {\n                        currentCA = atom.coord;\n                        currentColor = atom.color;\n                        calphaid = atom.serial;\n                    }\n\n                    if(atom.name === 'O') {\n                        currentO = atom.coord;\n                    }\n                    // smoothen each coil, helix and sheet separately. The joint residue has to be included both in the previous and next segment\n                    var bSameChain = true;\n//                    if (currentChain !== atom.chain || currentResi + 1 !== atom.resi) {\n                    if (currentChain !== atom.chain) {\n                        bSameChain = false;\n                    }\n\n                    if(atom.ssend && atom.ss === 'sheet') {\n                        bSheetSegment = true;\n                    }\n                    else if(atom.ssend && atom.ss === 'helix') {\n                        bHelixSegment = true;\n                    }\n\n                    // assign the previous residue\n                    if(prevCoorO) {\n                        if(bHighlight === 1 || bHighlight === 2) {\n                            colors.push(this.hColor);\n                        }\n                        else {\n                            colors.push(prevColor);\n                        }\n\n                        if(ss !== 'coil' && atom.ss === 'coil') {\n                            strandWidth = coilWidth;\n                        }\n                        else if(ssend && atom.ssbegin) { // a transition between two ss\n                            strandWidth = coilWidth;\n                        }\n                        else {\n                            strandWidth = (ss === 'coil') ? coilWidth : helixSheetWidth;\n                        }\n\n                        var O, oldCA, resSpan = 4;\n                        if(atom.name === 'O') {\n                            O = prevCoorO.clone();\n                            if(prevCoorCA !== null && prevCoorCA !== undefined) {\n                                O.sub(prevCoorCA);\n                            }\n                            else {\n                                prevCoorCA = prevCoorO.clone();\n                                if(caArray.length > resSpan + 1) { // use the calpha and the previous 4th c-alpha to calculate the helix direction\n                                    O = prevCoorCA.clone();\n                                    oldCA = this.atoms[caArray[caArray.length - 1 - resSpan - 1]].coord.clone();\n                                    O.sub(oldCA);\n                                }\n                                else {\n                                    O = new THREE.Vector3(Math.random(),Math.random(),Math.random());\n                                }\n                            }\n                        }\n                        else if(this.bCalphaOnly && atom.name === 'CA') {\n                            if(caArray.length > resSpan + 1) { // use the calpha and the previous 4th c-alpha to calculate the helix direction\n                                O = prevCoorCA.clone();\n                                oldCA = this.atoms[caArray[caArray.length - 1 - resSpan - 1]].coord.clone();\n                                O.sub(oldCA);\n                            }\n                            else {\n                                O = new THREE.Vector3(Math.random(),Math.random(),Math.random());\n                            }\n                        }\n\n                        O.normalize(); // can be omitted for performance\n                        O.multiplyScalar(strandWidth);\n                        if (prevCO !== null && O.dot(prevCO) < 0) O.negate();\n                        prevCO = O;\n\n                        for (var j = 0, numM1Inv2 = 2 / (num - 1); j < num; ++j) {\n                            var delta = -1 + numM1Inv2 * j;\n                            var v = new THREE.Vector3(prevCoorCA.x + prevCO.x * delta, prevCoorCA.y + prevCO.y * delta, prevCoorCA.z + prevCO.z * delta);\n                            if (!doNotSmoothen && ss === 'sheet') v.smoothen = true;\n                            pnts[j].push(v);\n                        }\n\n                        pntsCA.push(prevCoorCA);\n                        prevCOArray.push(prevCO);\n\n                        if(atoms.hasOwnProperty(prevAtomid)) {\n                            bShowArray.push(prevResi);\n                            calphaIdArray.push(prevCalphaid);\n\n                            ++highlightResiduesCount;\n                        }\n                        else {\n                            bShowArray.push(0);\n                            calphaIdArray.push(0);\n                        }\n\n                        ++drawnResidueCount;\n                    }\n\n                    //var maxDist = 6.0;\n                    //var bBrokenSs = (prevCoorCA && Math.abs(currentCA.x - prevCoorCA.x) > maxDist) || (prevCoorCA && Math.abs(currentCA.y - prevCoorCA.y) > maxDist) || (prevCoorCA && Math.abs(currentCA.z - prevCoorCA.z) > maxDist);\n\n                    if ((atom.ssbegin || atom.ssend || (drawnResidueCount === totalResidueCount - 1)) && pnts[0].length > 0 && bSameChain) {\n                        var atomName = 'CA';\n\n                        var prevone = [], nexttwo = [];\n\n                        var prevoneResid = this.atoms[prevAtomid].structure + '_' + this.atoms[prevAtomid].chain + '_' + (this.atoms[prevAtomid].resi - 1).toString();\n                        var prevoneCoord = this.getAtomCoordFromResi(prevoneResid, atomName);\n                        prevone = (prevoneCoord !== undefined) ? [prevoneCoord] : [];\n\n                        var nextoneResid = this.atoms[prevAtomid].structure + '_' + this.atoms[prevAtomid].chain + '_' + (this.atoms[prevAtomid].resi + 1).toString();\n                        var nextoneCoord = this.getAtomCoordFromResi(nextoneResid, atomName);\n                        if(nextoneCoord !== undefined) {\n                            nexttwo.push(nextoneCoord);\n                        }\n\n                        var nexttwoResid = this.atoms[prevAtomid].structure + '_' + this.atoms[prevAtomid].chain + '_' + (this.atoms[prevAtomid].resi + 2).toString();\n                        var nexttwoCoord = this.getAtomCoordFromResi(nexttwoResid, atomName);\n                        if(nexttwoCoord !== undefined) {\n                            nexttwo.push(nexttwoCoord);\n                        }\n\n                        // assign the current joint residue to the previous segment\n                        if(bHighlight === 1 || bHighlight === 2) {\n                            colors.push(this.hColor);\n                        }\n                        else {\n                            //colors.push(atom.color);\n                            colors.push(prevColor);\n                        }\n\n                        if(atom.ssend && atom.ss === 'sheet') { // current residue is the end of ss and is the end of arrow\n                            strandWidth = 0; // make the arrow end sharp\n                        }\n                        else if(ss === 'coil' && atom.ssbegin) {\n                            strandWidth = coilWidth;\n                        }\n                        else if(ssend && atom.ssbegin) { // current residue is the start of ss and  the previous residue is the end of ss, then use coil\n                            strandWidth = coilWidth;\n                        }\n                        else { // use the ss from the previous residue\n                            strandWidth = (atom.ss === 'coil') ? coilWidth : helixSheetWidth;\n                        }\n\n                        var O, oldCA, resSpan = 4;\n                        if(atom.name === 'O') {\n                            O = currentO.clone();\n                            O.sub(currentCA);\n                        }\n                        else if(this.bCalphaOnly && atom.name === 'CA') {\n                            if(caArray.length > resSpan) { // use the calpha and the previous 4th c-alpha to calculate the helix direction\n                                O = currentCA.clone();\n                                oldCA = this.atoms[caArray[caArray.length - 1 - resSpan]].coord.clone();\n                                O.sub(oldCA);\n                            }\n                            else {\n                                O = new THREE.Vector3(Math.random(),Math.random(),Math.random());\n                            }\n                        }\n\n                        O.normalize(); // can be omitted for performance\n                        O.multiplyScalar(strandWidth);\n                        if (prevCO !== null && O.dot(prevCO) < 0) O.negate();\n                        prevCO = O;\n\n                        for (var j = 0, numM1Inv2 = 2 / (num - 1); j < num; ++j) {\n                            var delta = -1 + numM1Inv2 * j;\n                            var v = new THREE.Vector3(currentCA.x + prevCO.x * delta, currentCA.y + prevCO.y * delta, currentCA.z + prevCO.z * delta);\n                            if (!doNotSmoothen && ss === 'sheet') v.smoothen = true;\n                            pnts[j].push(v);\n                        }\n\n                        atomid = atom.serial;\n\n                        pntsCA.push(currentCA);\n                        prevCOArray.push(prevCO);\n\n                        // when a coil connects to a sheet and the last residue of coild is highlighted, the first sheet residue is set as atom.highlightStyle. This residue should not be shown.\n                        //if(atoms.hasOwnProperty(atomid) && (bHighlight === 1 && !atom.notshow) ) {\n                        if(atoms.hasOwnProperty(atomid)) {\n                            bShowArray.push(atom.resi);\n                            calphaIdArray.push(calphaid);\n                        }\n                        else {\n                            bShowArray.push(0);\n                            calphaIdArray.push(0);\n                        }\n\n                        // draw the current segment\n                        for (var j = 0; !fill && j < num; ++j) {\n                            if(bSheetSegment) {\n                                this.createCurveSubArrow(pnts[j], 1, colors, div, bHighlight, bRibbon, num, j, pntsCA, prevCOArray, bShowArray, calphaIdArray, true, prevone, nexttwo);\n                            }\n                            else if(bHelixSegment) {\n                                if(bFullAtom) {\n                                    this.createCurveSub(pnts[j], 1, colors, div, bHighlight, bRibbon, false, bShowArray, calphaIdArray, undefined, prevone, nexttwo);\n                                }\n                                else {\n                                    this.createCurveSubArrow(pnts[j], 1, colors, div, bHighlight, bRibbon, num, j, pntsCA, prevCOArray, bShowArray, calphaIdArray, false, prevone, nexttwo);\n                                }\n                            }\n                        }\n                        if (fill) {\n                            if(bSheetSegment) {\n                                var start = 0, end = num - 1;\n                                this.createStripArrow(pnts[0], pnts[num - 1], colors, div, thickness, bHighlight, num, start, end, pntsCA, prevCOArray, bShowArray, calphaIdArray, true, prevone, nexttwo);\n                            }\n                            else if(bHelixSegment) {\n                                if(bFullAtom) {\n                                    this.createStrip(pnts[0], pnts[num - 1], colors, div, thickness, bHighlight, false, bShowArray, calphaIdArray, undefined, prevone, nexttwo);\n                                }\n                                else {\n                                    var start = 0, end = num - 1;\n                                    this.createStripArrow(pnts[0], pnts[num - 1], colors, div, thickness, bHighlight, num, start, end, pntsCA, prevCOArray, bShowArray, calphaIdArray, true, prevone, nexttwo);\n                                }\n                            }\n                            else {\n                                if(bHighlight === 2) { // draw coils only when highlighted. if not highlighted, coils will be drawn as tubes separately\n                                    this.createStrip(pnts[0], pnts[num - 1], colors, div, thickness, bHighlight, false, bShowArray, calphaIdArray, undefined, prevone, nexttwo);\n                                }\n                            }\n                        }\n                        for (var k = 0; k < num; ++k) pnts[k] = [];\n\n                        colors = [];\n                        pntsCA = [];\n                        prevCOArray = [];\n                        bShowArray = [];\n                        calphaIdArray = [];\n                        bSheetSegment = false;\n                        bHelixSegment = false;\n                    } // end if (atom.ssbegin || atom.ssend)\n\n                    // end of a chain\n//                    if ((currentChain !== atom.chain || currentResi + 1 !== atom.resi) && pnts[0].length > 0) {\n                    if ((currentChain !== atom.chain) && pnts[0].length > 0) {\n\n                        var atomName = 'CA';\n\n                        var prevoneResid = this.atoms[prevAtomid].structure + '_' + this.atoms[prevAtomid].chain + '_' + (this.atoms[prevAtomid].resi - 1).toString();\n                        var prevoneCoord = this.getAtomCoordFromResi(prevoneResid, atomName);\n                        var prevone = (prevoneCoord !== undefined) ? [prevoneCoord] : [];\n\n                        var nexttwo = [];\n\n                        for (var j = 0; !fill && j < num; ++j) {\n                            if(bSheetSegment) {\n                                this.createCurveSubArrow(pnts[j], 1, colors, div, bHighlight, bRibbon, num, j, pntsCA, prevCOArray, bShowArray, calphaIdArray, true, prevone, nexttwo);\n                            }\n                            else if(bHelixSegment) {\n                                if(bFullAtom) {\n                                    this.createCurveSub(pnts[j], 1, colors, div, bHighlight, bRibbon, false, bShowArray, calphaIdArray, undefined, prevone, nexttwo);\n                                }\n                                else {\n                                    this.createCurveSubArrow(pnts[j], 1, colors, div, bHighlight, bRibbon, num, j, pntsCA, prevCOArray, bShowArray, calphaIdArray, false, prevone, nexttwo);\n                                }\n                            }\n                        }\n                        if (fill) {\n                            if(bSheetSegment) {\n                                var start = 0, end = num - 1;\n                                this.createStripArrow(pnts[0], pnts[num - 1], colors, div, thickness, bHighlight, num, start, end, pntsCA, prevCOArray, bShowArray, calphaIdArray, true, prevone, nexttwo);\n                            }\n                            else if(bHelixSegment) {\n                                if(bFullAtom) {\n                                    this.createStrip(pnts[0], pnts[num - 1], colors, div, thickness, bHighlight, false, bShowArray, calphaIdArray, undefined, prevone, nexttwo);\n                                }\n                                else {\n                                    var start = 0, end = num - 1;\n                                    this.createStripArrow(pnts[0], pnts[num - 1], colors, div, thickness, bHighlight, num, start, end, pntsCA, prevCOArray, bShowArray, calphaIdArray, false, prevone, nexttwo);\n                                }\n                            }\n                        }\n\n                        for (var k = 0; k < num; ++k) pnts[k] = [];\n                        colors = [];\n                        pntsCA = [];\n                        prevCOArray = [];\n                        bShowArray = [];\n                        calphaIdArray = [];\n                        bSheetSegment = false;\n                        bHelixSegment = false;\n                    }\n\n                    currentChain = atom.chain;\n                    currentResi = atom.resi;\n                    ss = atom.ss;\n                    ssend = atom.ssend;\n                    prevAtomid = atom.serial;\n                    prevResi = atom.resi;\n\n                    prevCalphaid = calphaid;\n\n                    // only update when atom.name === 'O'\n                    prevCoorCA = currentCA;\n                    prevCoorO = atom.coord;\n                    prevColor = currentColor;\n                } // end if (atom.name === 'O' || (this.bCalphaOnly && atom.name === 'CA') ) {\n        } // end if ((atom.name === 'O' || atom.name === 'CA') && !atom.het) {\n    } // end for\n\n    caArray = [];\n\n    this.createTube(tubeAtoms, 'CA', coilWidth, bHighlight);\n\n    tubeAtoms = {};\n    pnts = {};\n};\n\n/*\niCn3D.prototype.createStrandBrick = function (brick, color, thickness, bHighlight) {\n    var num = this.strandDIV;\n    var div = this.axisDIV;\n    var doNotSmoothen = false;\n    var helixSheetWidth = this.helixSheetWidth;\n\n    if(bHighlight === 2) {\n        thickness *= 1.5;\n        helixSheetWidth *= 1.5;\n    }\n\n    var pnts = {}; for (var k = 0; k < num; ++k) pnts[k] = [];\n    var colors = [];\n    var prevCO = null, ss = null;\n    for (var i = 0; i < 2; ++i) {\n        var currentCA = brick.coords[i];\n\n        colors.push(new THREE.Color(color));\n\n        var O = new THREE.Vector3(brick.coords[2].x, brick.coords[2].y, brick.coords[2].z);\n        O.normalize();\n\n        O.multiplyScalar(helixSheetWidth);\n        if (prevCO !== null && O.dot(prevCO) < 0) O.negate();\n        prevCO = O;\n        for (var j = 0, numM1Inv2 = 2 / (num - 1); j < num; ++j) {\n            var delta = -1 + numM1Inv2 * j;\n            var v = new THREE.Vector3(currentCA.x + prevCO.x * delta, currentCA.y + prevCO.y * delta, currentCA.z + prevCO.z * delta);\n            if (!doNotSmoothen) v.smoothen = true;\n            pnts[j].push(v);\n        }\n    }\n    this.createStrip(pnts[0], pnts[num - 1], colors, div, thickness, bHighlight);\n};\n*/\n\n// modified from iview (http://istar.cse.cuhk.edu.hk/iview/)\niCn3D.prototype.createTubeSub = function (_pnts, colors, radii, bHighlight, prevone, nexttwo) {\n    if (_pnts.length < 2) return;\n    var circleDiv = this.tubeDIV, axisDiv = this.axisDIV;\n    var circleDivInv = 1 / circleDiv, axisDivInv = 1 / axisDiv;\n    var geo = new THREE.Geometry();\n    var pnts_clrs = this.subdivide(_pnts, colors, axisDiv, undefined, undefined, prevone, nexttwo);\n\n    var pnts = pnts_clrs[0];\n    colors = pnts_clrs[2];\n\n    var prevAxis1 = new THREE.Vector3(), prevAxis2;\n    for (var i = 0, lim = pnts.length; i < lim; ++i) {\n        var r, idx = (i - 1) * axisDivInv;\n        if (i === 0) r = radii[0];\n        else {\n            if (idx % 1 === 0) r = radii[idx];\n            else {\n                var floored = Math.floor(idx);\n                var tmp = idx - floored;\n                r = radii[floored] * tmp + radii[floored + 1] * (1 - tmp);\n            }\n        }\n        var delta, axis1, axis2;\n        if (i < lim - 1) {\n            delta = pnts[i].clone().sub(pnts[i + 1]);\n            axis1 = new THREE.Vector3(0, -delta.z, delta.y).normalize().multiplyScalar(r);\n            axis2 = delta.clone().cross(axis1).normalize().multiplyScalar(r);\n            //      var dir = 1, offset = 0;\n            if (prevAxis1.dot(axis1) < 0) {\n                axis1.negate(); axis2.negate();  //dir = -1;//offset = 2 * Math.PI / axisDiv;\n            }\n            prevAxis1 = axis1; prevAxis2 = axis2;\n        } else {\n            axis1 = prevAxis1; axis2 = prevAxis2;\n        }\n        for (var j = 0; j < circleDiv; ++j) {\n            var angle = 2 * Math.PI * circleDivInv * j; //* dir  + offset;\n            geo.vertices.push(pnts[i].clone().add(axis1.clone().multiplyScalar(Math.cos(angle))).add(axis2.clone().multiplyScalar(Math.sin(angle))));\n        }\n    }\n    var offset = 0;\n    for (var i = 0, lim = pnts.length - 1; i < lim; ++i) {\n        //var c = new THREE.Color(colors[Math.round((i - 1) * axisDivInv)]);\n        var c = new THREE.Color(colors[i]);\n\n        var reg = 0;\n        var r1 = geo.vertices[offset].clone().sub(geo.vertices[offset + circleDiv]).lengthSq();\n        var r2 = geo.vertices[offset].clone().sub(geo.vertices[offset + circleDiv + 1]).lengthSq();\n        if (r1 > r2) { r1 = r2; reg = 1; };\n        for (var j = 0; j < circleDiv; ++j) {\n            geo.faces.push(new THREE.Face3(offset + j, offset + (j + reg) % circleDiv + circleDiv, offset + (j + 1) % circleDiv, undefined, c));\n            geo.faces.push(new THREE.Face3(offset + (j + 1) % circleDiv, offset + (j + reg) % circleDiv + circleDiv, offset + (j + reg + 1) % circleDiv + circleDiv, undefined, c));\n        }\n        offset += circleDiv;\n    }\n    geo.computeFaceNormals();\n    geo.computeVertexNormals(false);\n\n    var mesh;\n    if(bHighlight === 2) {\n      mesh = new THREE.Mesh(geo, new THREE.MeshPhongMaterial({ transparent: true, opacity: 0.5, specular: this.frac, shininess: 30, emissive: 0x000000, vertexColors: THREE.FaceColors, side: THREE.DoubleSide }));\n      this.mdl.add(mesh);\n    }\n    else if(bHighlight === 1) {\n      mesh = new THREE.Mesh(geo, this.matShader);\n      mesh.renderOrder = this.renderOrderPicking;\n      //this.mdlPicking.add(mesh);\n      this.mdl.add(mesh);\n    }\n    else {\n      mesh = new THREE.Mesh(geo, new THREE.MeshPhongMaterial({ specular: this.frac, shininess: 30, emissive: 0x000000, vertexColors: THREE.FaceColors, side: THREE.DoubleSide }));\n      this.mdl.add(mesh);\n    }\n\n    if(bHighlight === 1 || bHighlight === 2) {\n        this.prevHighlightObjects.push(mesh);\n    }\n    else {\n        this.objects.push(mesh);\n    }\n};\n\niCn3D.prototype.getAtomCoordFromResi = function (resid, atomName) {\n    if(this.residues.hasOwnProperty(resid)) {\n        for(var i in this.residues[resid]) {\n            if(this.atoms[i].name === atomName && !this.atoms[i].het) {\n                var coord = (this.atoms[i].coord2 !== undefined) ? this.atoms[i].coord2 : this.atoms[i].coord;\n\n                return coord;\n            }\n        }\n    }\n\n    return undefined;\n}\n\n// modified from iview (http://istar.cse.cuhk.edu.hk/iview/)\niCn3D.prototype.createTube = function (atoms, atomName, radius, bHighlight) {\n    var pnts = [], colors = [], radii = [], prevone = [], nexttwo = [];\n    var currentChain, currentResi;\n    var index = 0;\n    var prevAtom;\n    var maxDist = 6.0;\n    var maxDist2 = 3.0; // avoid tube between the residues in 3 residue helix\n\n    var pnts_colors_radii_prevone_nexttwo = [];\n    var firstAtom, atom;\n\n    for (var i in atoms) {\n        atom = atoms[i];\n        if ((atom.name === atomName) && !atom.het) {\n            if(index == 0) {\n                firstAtom = atom;\n            }\n\n            //if (index > 0 && (currentChain !== atom.chain || currentResi + 1 !== atom.resi || Math.abs(atom.coord.x - prevAtom.coord.x) > maxDist || Math.abs(atom.coord.y - prevAtom.coord.y) > maxDist || Math.abs(atom.coord.z - prevAtom.coord.z) > maxDist) ) {\n            if (index > 0 && (currentChain !== atom.chain || Math.abs(atom.coord.x - prevAtom.coord.x) > maxDist || Math.abs(atom.coord.y - prevAtom.coord.y) > maxDist || Math.abs(atom.coord.z - prevAtom.coord.z) > maxDist\n              || (currentResi + 1 !== atom.resi && (Math.abs(atom.coord.x - prevAtom.coord.x) > maxDist2 || Math.abs(atom.coord.y - prevAtom.coord.y) > maxDist2 || Math.abs(atom.coord.z - prevAtom.coord.z) > maxDist2) )\n              ) ) {\n                if(bHighlight !== 2) {\n                    //this.createTubeSub(pnts, colors, radii, bHighlight);\n                    var prevoneResid = firstAtom.structure + '_' + firstAtom.chain + '_' + (firstAtom.resi - 1).toString();\n                    var prevoneCoord = this.getAtomCoordFromResi(prevoneResid, atomName);\n                    prevone = (prevoneCoord !== undefined) ? [prevoneCoord] : [];\n\n                    var nextoneResid = prevAtom.structure + '_' + prevAtom.chain + '_' + (prevAtom.resi + 1).toString();\n                    var nextoneCoord = this.getAtomCoordFromResi(nextoneResid, atomName);\n                    if(nextoneCoord !== undefined) {\n                        nexttwo.push(nextoneCoord);\n                    }\n\n                    var nexttwoResid = prevAtom.structure + '_' + prevAtom.chain + '_' + (prevAtom.resi + 2).toString();\n                    var nexttwoCoord = this.getAtomCoordFromResi(nexttwoResid, atomName);\n                    if(nexttwoCoord !== undefined) {\n                        nexttwo.push(nexttwoCoord);\n                    }\n\n                    pnts_colors_radii_prevone_nexttwo.push({'pnts':pnts, 'colors':colors, 'radii':radii, 'prevone':prevone, 'nexttwo':nexttwo});\n                }\n                pnts = []; colors = []; radii = []; prevone = []; nexttwo = [];\n                firstAtom = atom;\n                index = 0;\n            }\n            pnts.push(atom.coord);\n\n            var radiusFinal = radius;\n            if(radius) {\n                radiusFinal = radius;\n            }\n            else {\n                if(atom.b > 0 && atom.b <= 100) {\n                    radiusFinal = atom.b * 0.01;\n                }\n                else if(atom.b > 100) {\n                    radiusFinal = 100 * 0.01;\n                }\n                else {\n                    radiusFinal = this.coilWidth;\n                }\n            }\n\n            //radii.push(radius || (atom.b > 0 ? atom.b * 0.01 : this.coilWidth));\n            radii.push(radiusFinal);\n\n            colors.push(atom.color);\n            // the starting residue of a coil uses the color from thenext residue to avoid using the color of the last helix/sheet residue\n            if(index === 1) colors[colors.length - 2] = atom.color;\n\n            currentChain = atom.chain;\n            currentResi = atom.resi;\n\n            var scale = 1.2;\n            if(bHighlight === 2 && !atom.ssbegin) {\n                this.createBox(atom, undefined, undefined, scale, undefined, bHighlight);\n            }\n\n            ++index;\n\n            prevAtom = atom;\n        }\n    }\n    if(bHighlight !== 2) {\n        //this.createTubeSub(pnts, colors, radii, bHighlight);\n\n        prevone = [];\n        if(firstAtom !== undefined) {\n            var prevoneResid = firstAtom.structure + '_' + firstAtom.chain + '_' + (firstAtom.resi - 1).toString();\n            var prevoneCoord = this.getAtomCoordFromResi(prevoneResid, atomName);\n            prevone = (prevoneCoord !== undefined) ? [prevoneCoord] : [];\n        }\n\n        nexttwo = [];\n        if(atom !== undefined) {\n            var nextoneResid = atom.structure + '_' + atom.chain + '_' + (atom.resi + 1).toString();\n            var nextoneCoord = this.getAtomCoordFromResi(nextoneResid, atomName);\n            if(nextoneCoord !== undefined) {\n                nexttwo.push(nextoneCoord);\n            }\n\n            var nexttwoResid = atom.structure + '_' + atom.chain + '_' + (atom.resi + 2).toString();\n            var nexttwoCoord = this.getAtomCoordFromResi(nexttwoResid, atomName);\n            if(nexttwoCoord !== undefined) {\n                nexttwo.push(nexttwoCoord);\n            }\n        }\n\n        pnts_colors_radii_prevone_nexttwo.push({'pnts':pnts, 'colors':colors, 'radii':radii, 'prevone':prevone, 'nexttwo':nexttwo});\n    }\n\n    for(var i = 0, il = pnts_colors_radii_prevone_nexttwo.length; i < il; ++i) {\n        var pnts = pnts_colors_radii_prevone_nexttwo[i].pnts;\n        var colors = pnts_colors_radii_prevone_nexttwo[i].colors;\n        var radii = pnts_colors_radii_prevone_nexttwo[i].radii;\n        var prevone = pnts_colors_radii_prevone_nexttwo[i].prevone;\n        var nexttwo = pnts_colors_radii_prevone_nexttwo[i].nexttwo;\n\n        this.createTubeSub(pnts, colors, radii, bHighlight, prevone, nexttwo);\n    }\n\n    pnts_colors_radii_prevone_nexttwo = [];\n};\n\n// modified from iview (http://istar.cse.cuhk.edu.hk/iview/)\niCn3D.prototype.createCylinderHelix = function (atoms, radius, bHighlight) {\n    var start = null;\n    var currentChain, currentResi;\n    var others = {}, beta = {};\n    var i;\n    for (i in atoms) {\n        var atom = atoms[i];\n        if (atom.het) continue;\n        if ((atom.ss !== 'helix' && atom.ss !== 'sheet') || atom.ssend || atom.ssbegin) others[atom.serial] = atom;\n        if (atom.ss === 'sheet') beta[atom.serial] = atom;\n        if (atom.name !== 'CA') continue;\n        if (atom.ss === 'helix' && atom.ssend) {\n            if (start !== null && currentChain === atom.chain && currentResi < atom.resi) {\n                if(bHighlight === 1 || bHighlight === 2) {\n                    this.createCylinder(start.coord, atom.coord, radius, this.hColor, bHighlight);\n                }\n                else {\n                    this.createCylinder(start.coord, atom.coord, radius, atom.color);\n                }\n            }\n\n            start = null;\n        }\n\n        if (start === null && atom.ss === 'helix' && atom.ssbegin) {\n            start = atom;\n\n            currentChain = atom.chain;\n            currentResi = atom.resi;\n        }\n    }\n\n    if(bHighlight === 1 || bHighlight === 2) {\n        if(Object.keys(others).length > 0) this.createTube(others, 'CA', this.coilWidth, bHighlight);\n        if(Object.keys(beta).length > 0) this.createStrand(beta, undefined, undefined, true, 0, this.helixSheetWidth, false, this.ribbonthickness * 2, bHighlight);\n    }\n    else {\n        if(Object.keys(others).length > 0) this.createTube(others, 'CA', this.coilWidth);\n        if(Object.keys(beta).length > 0) this.createStrand(beta, undefined, undefined, true, 0, this.helixSheetWidth, false, this.ribbonthickness * 2);\n    }\n};\n\n// modified from GLmol (http://webglmol.osdn.jp/index-en.html)\niCn3D.prototype.drawNucleicAcidStick = function(atomlist, bHighlight) {\n   var currentChain, currentResi, start = null, end = null;\n   var i;\n\n   for (i in atomlist) {\n      var atom = atomlist[i];\n      if (atom === undefined || atom.het) continue;\n\n      if (atom.resi !== currentResi || atom.chain !== currentChain) {\n         if (start !== null && end !== null) {\n            this.createCylinder(new THREE.Vector3(start.coord.x, start.coord.y, start.coord.z),\n                              new THREE.Vector3(end.coord.x, end.coord.y, end.coord.z), this.cylinderRadius, start.color, bHighlight);\n         }\n         start = null; end = null;\n      }\n      if (atom.name === 'O3\\'' || atom.name === 'O3*') start = atom;\n      if (atom.resn === '  A' || atom.resn === '  G' || atom.resn === ' DA' || atom.resn === ' DG') {\n         if (atom.name === 'N1')  end = atom; //  N1(AG), N3(CTU)\n      } else if (atom.name === 'N3') {\n         end = atom;\n      }\n      currentResi = atom.resi; currentChain = atom.chain;\n   }\n   if (start !== null && end !== null)\n      this.createCylinder(new THREE.Vector3(start.coord.x, start.coord.y, start.coord.z),\n                        new THREE.Vector3(end.coord.x, end.coord.y, end.coord.z), this.cylinderRadius, start.color, bHighlight);\n};\n\n//iCn3D.prototype.isCalphaPhosOnly = function(atomlist, atomname1, atomname2) {\niCn3D.prototype.isCalphaPhosOnly = function(atomlist) {\n      var bCalphaPhosOnly = false;\n\n      var index = 0, testLength = 50; //30\n      //var bOtherAtoms = false;\n      var nOtherAtoms = 0;\n      for(var i in atomlist) {\n        if(index < testLength) {\n          if(atomlist[i].name !== \"CA\" && atomlist[i].name !== \"P\" && atomlist[i].name !== \"O3'\" && atomlist[i].name !== \"O3*\") {\n            //bOtherAtoms = true;\n            //break;\n            ++nOtherAtoms;\n          }\n        }\n        else {\n          break;\n        }\n\n        ++index;\n      }\n\n      //if(!bOtherAtoms) {\n      if(nOtherAtoms < 0.5 * index) {\n        bCalphaPhosOnly = true;\n      }\n\n      return bCalphaPhosOnly;\n};\n\n// modified from GLmol (http://webglmol.osdn.jp/index-en.html)\niCn3D.prototype.drawCartoonNucleicAcid = function(atomlist, div, thickness, bHighlight) {\n   this.drawStrandNucleicAcid(atomlist, 2, div, true, undefined, thickness, bHighlight);\n};\n\n// modified from GLmol (http://webglmol.osdn.jp/index-en.html)\niCn3D.prototype.drawStrandNucleicAcid = function(atomlist, num, div, fill, nucleicAcidWidth, thickness, bHighlight) {\n   if(bHighlight === 2) {\n       num = undefined;\n       thickness = undefined;\n   }\n\n   nucleicAcidWidth = nucleicAcidWidth || this.nucleicAcidWidth;\n   div = div || this.axisDIV;\n   num = num || this.nucleicAcidStrandDIV;\n   var i, j, k;\n   var pnts = []; for (k = 0; k < num; k++) pnts[k] = [];\n   var colors = [];\n   var currentChain, currentResi, currentO3;\n   var prevOO = null;\n\n   for (i in atomlist) {\n      var atom = atomlist[i];\n      if (atom === undefined) continue;\n\n      if ((atom.name === 'O3\\'' || atom.name === 'OP2' || atom.name === 'O3*' || atom.name === 'O2P') && !atom.het) {\n         if (atom.name === 'O3\\'' || atom.name === 'O3*') { // to connect 3' end. FIXME: better way to do?\n            if (currentChain !== atom.chain || currentResi + 1 !== atom.resi) {\n//            if (currentChain !== atom.chain) {\n               if (currentO3 && prevOO) {\n                  for (j = 0; j < num; j++) {\n                     var delta = -1 + 2 / (num - 1) * j;\n                     pnts[j].push(new THREE.Vector3(currentO3.x + prevOO.x * delta,\n                      currentO3.y + prevOO.y * delta, currentO3.z + prevOO.z * delta));\n                  }\n               }\n               if (fill) this.createStrip(pnts[0], pnts[1], colors, div, thickness, bHighlight);\n               for (j = 0; !thickness && j < num; j++)\n                  this.createCurveSub(pnts[j], 1 ,colors, div, bHighlight);\n               var pnts = []; for (k = 0; k < num; k++) pnts[k] = [];\n               colors = [];\n               prevOO = null;\n            }\n            currentO3 = new THREE.Vector3(atom.coord.x, atom.coord.y, atom.coord.z);\n            currentChain = atom.chain;\n            currentResi = atom.resi;\n            if(bHighlight === 1 || bHighlight === 2) {\n                colors.push(this.hColor);\n            }\n            else {\n                colors.push(atom.color);\n            }\n\n         }\n         else if (atom.name === 'OP2' || atom.name === 'O2P') {\n            if (!currentO3) {prevOO = null; continue;} // for 5' phosphate (e.g. 3QX3)\n            var O = new THREE.Vector3(atom.coord.x, atom.coord.y, atom.coord.z);\n            O.sub(currentO3);\n            O.normalize().multiplyScalar(nucleicAcidWidth);  // TODO: refactor\n            //if (prevOO !== undefined && O.dot(prevOO) < 0) {\n            if (prevOO !== null && O.dot(prevOO) < 0) {\n               O.negate();\n            }\n            prevOO = O;\n            for (j = 0; j < num; j++) {\n               var delta = -1 + 2 / (num - 1) * j;\n               pnts[j].push(new THREE.Vector3(currentO3.x + prevOO.x * delta,\n                 currentO3.y + prevOO.y * delta, currentO3.z + prevOO.z * delta));\n            }\n            currentO3 = null;\n         }\n      }\n   }\n\n   if (currentO3 && prevOO) {\n      for (j = 0; j < num; j++) {\n         var delta = -1 + 2 / (num - 1) * j;\n         pnts[j].push(new THREE.Vector3(currentO3.x + prevOO.x * delta,\n           currentO3.y + prevOO.y * delta, currentO3.z + prevOO.z * delta));\n      }\n   }\n   if (fill) this.createStrip(pnts[0], pnts[1], colors, div, thickness, bHighlight);\n   for (j = 0; !thickness && j < num; j++)\n      this.createCurveSub(pnts[j], 1 ,colors, div, bHighlight);\n};\n\niCn3D.prototype.createSingleLine = function ( src, dst, colorHex, dashed, dashSize ) {\n    var geom = new THREE.Geometry();\n    var mat;\n\n    if(dashed) {\n        mat = new THREE.LineDashedMaterial({ linewidth: 1, color: colorHex, dashSize: dashSize, gapSize: 0.5*dashSize });\n    } else {\n        mat = new THREE.LineBasicMaterial({ linewidth: 1, color: colorHex });\n    }\n\n    geom.vertices.push( src );\n    geom.vertices.push( dst );\n    if(dashed) geom.computeLineDistances(); // This one is SUPER important, otherwise dashed lines will appear as simple plain lines\n\n    //var axis = new THREE.Line( geom, mat, THREE.LineSegments );\n    var axis = new THREE.LineSegments( geom, mat );\n\n    return axis;\n};\n\n// used for highlight\niCn3D.prototype.createBox = function (atom, defaultRadius, forceDefault, scale, color, bHighlight) {\n    var mesh;\n\n    if(defaultRadius === undefined) defaultRadius = 0.8;\n    if(forceDefault === undefined) forceDefault = false;\n    if(scale === undefined) scale = 0.8;\n\n    if(bHighlight) {\n        if(color === undefined) color = this.hColor;\n\n          mesh = new THREE.Mesh(this.boxGeometry, new THREE.MeshPhongMaterial({ transparent: true, opacity: 0.5, specular: this.frac, shininess: 30, emissive: 0x000000, color: color }));\n    }\n    else {\n        if(color === undefined) color = atom.color;\n\n          mesh = new THREE.Mesh(this.boxGeometry, new THREE.MeshPhongMaterial({ specular: this.frac, shininess: 30, emissive: 0x000000, color: color }));\n    }\n\n    mesh.scale.x = mesh.scale.y = mesh.scale.z = forceDefault ? defaultRadius : (this.vdwRadii[atom.elem] || defaultRadius) * (scale ? scale : 1);\n    mesh.position.copy(atom.coord);\n    this.mdl.add(mesh);\n\n    if(bHighlight) {\n        this.prevHighlightObjects.push(mesh);\n    }\n    else {\n        this.objects.push(mesh);\n    }\n};\n\n// modified from 3Dmol (http://3dmol.csb.pitt.edu/)\n// new: http://stackoverflow.com/questions/23514274/three-js-2d-text-sprite-labels\n// old: http://stemkoski.github.io/Three.js/Sprite-Text-Labels.html\niCn3D.prototype.makeTextSprite = function ( message, parameters ) {\n\n    if ( parameters === undefined ) parameters = {};\n    var fontface = parameters.hasOwnProperty(\"fontface\") ? parameters[\"fontface\"] : \"Arial\";\n    var fontsize = parameters.hasOwnProperty(\"fontsize\") ? parameters[\"fontsize\"] : 18;\n\n    var a = parameters.hasOwnProperty(\"alpha\") ? parameters[\"alpha\"] : 1.0;\n\n    var bBkgd = true;\n    var bSchematic = false;\n    if(parameters.hasOwnProperty(\"bSchematic\") &&  parameters[\"bSchematic\"]) {\n        bSchematic = true;\n\n        fontsize = 40;\n    }\n\n    var backgroundColor, borderColor, borderThickness;\n    if(parameters.hasOwnProperty(\"backgroundColor\") &&  parameters[\"backgroundColor\"] !== undefined) {\n        backgroundColor = this.hexToRgb(parameters[\"backgroundColor\"], a);\n\n        borderColor = parameters.hasOwnProperty(\"borderColor\") ? this.hexToRgb(parameters[\"borderColor\"], a) : { r:0, g:0, b:0, a:1.0 };\n        borderThickness = parameters.hasOwnProperty(\"borderThickness\") ? parameters[\"borderThickness\"] : 4;\n    }\n    else {\n        bBkgd = false;\n        backgroundColor = undefined;\n        borderColor = undefined;\n        borderThickness = 0;\n    }\n\n    var textAlpha = 1.0;\n    var textColor = parameters.hasOwnProperty(\"textColor\") &&  parameters[\"textColor\"] !== undefined ? this.hexToRgb(parameters[\"textColor\"], textAlpha) : { r:255, g:255, b:0, a:1.0 };\n\n    var canvas = document.createElement('canvas');\n\n    var context = canvas.getContext('2d');\n\n    context.font = \"Bold \" + fontsize + \"px \" + fontface;\n\n    var metrics = context.measureText( message );\n\n    var textWidth = metrics.width;\n\n    var width = textWidth + 2*borderThickness;\n    var height = fontsize + 2*borderThickness;\n\n    if(bSchematic) {\n        if(width > height) {\n            height = width;\n        }\n        else {\n            width = height;\n        }\n    }\n\n    //var factor = (bSchematic) ? 3 * this.oriMaxD / 100 : 3 * this.oriMaxD / 100;\n    var factor = (bSchematic) ? 3 * this.maxD / 100 : 3 * this.maxD / 100;\n\n    var expandWidthFactor = 0.8 * textWidth / height;\n\n/*\n    // define width and height will make long text be squashed, but make the label to appear at the exact location\n    if(bSchematic || message.length <= textLengthThreshold) {\n        canvas.width = width;\n        canvas.height = height;\n\n        factor = 3 * this.oriMaxD / 100;\n    }\n*/\n\n    canvas.width = width;\n    canvas.height = height;\n\n    context.clearRect(0, 0, width, height);\n\n    //var radius = context.measureText( \"M\" ).width;\n\n    if(bBkgd) {\n        // background color\n        context.fillStyle   = \"rgba(\" + backgroundColor.r + \",\" + backgroundColor.g + \",\" + backgroundColor.b + \",\" + backgroundColor.a + \")\";\n        // border color\n        context.strokeStyle = \"rgba(\" + borderColor.r + \",\" + borderColor.g + \",\" + borderColor.b + \",\" + borderColor.a + \")\";\n\n        context.lineWidth = borderThickness;\n\n        if(bSchematic) {\n            var r = width * 0.35;\n            this.circle(context, 0, 0, width, height, r);\n        }\n        else {\n            //var r = (message.length <= textLengthThreshold) ? height * 0.5 : 0;\n            //var r = height * 0.8;\n            var r = 0;\n            this.roundRect(context, 0, 0, width, height, r);\n        }\n    }\n\n    // need to redefine again\n    context.font = \"Bold \" + fontsize + \"px \" + fontface;\n\n    context.textAlign = \"center\";\n    context.textBaseline = \"middle\";\n\n    context.fillStyle = \"rgba(\"+textColor.r+\", \"+textColor.g+\", \"+textColor.b+\", 1.0)\";\n    context.strokeStyle = \"rgba(\"+textColor.r+\", \"+textColor.g+\", \"+textColor.b+\", 1.0)\";\n\n    context.fillText( message, width * 0.5, height * 0.5);\n\n    // canvas contents will be used for a texture\n    var texture = new THREE.Texture(canvas)\n    texture.needsUpdate = true;\n\n    var frontOfTarget = true;\n    //var spriteMaterial = new THREE.SpriteMaterial( { map: texture, useScreenCoordinates: false } );\n    var spriteMaterial = new THREE.SpriteMaterial( {\n        map: texture,\n        //useScreenCoordinates: false,\n        depthTest: !frontOfTarget,\n        depthWrite: !frontOfTarget\n    } );\n\n    //https://stackoverflow.com/questions/29421702/threejs-texture\n    spriteMaterial.map.minFilter = THREE.LinearFilter;\n\n    var sprite = new THREE.Sprite( spriteMaterial );\n\n    if(bSchematic) {\n        sprite.scale.set(factor, factor, 1.0);\n    }\n    else {\n        sprite.scale.set(expandWidthFactor * factor, factor, 1.0);\n    }\n\n    return sprite;\n};\n\n// function for drawing rounded rectangles\niCn3D.prototype.roundRect = function (ctx, x, y, w, h, r) {\n    ctx.beginPath();\n    ctx.moveTo(x+r, y);\n    ctx.lineTo(x+w-r, y);\n    ctx.quadraticCurveTo(x+w, y, x+w, y+r);\n    ctx.lineTo(x+w, y+h-r);\n    ctx.quadraticCurveTo(x+w, y+h, x+w-r, y+h);\n    ctx.lineTo(x+r, y+h);\n    ctx.quadraticCurveTo(x, y+h, x, y+h-r);\n    ctx.lineTo(x, y+r);\n    ctx.quadraticCurveTo(x, y, x+r, y);\n    ctx.closePath();\n    ctx.fill();\n    ctx.stroke();\n};\n\niCn3D.prototype.circle = function (ctx, x, y, w, h, r) {\n    ctx.beginPath();\n    ctx.arc(x+w/2, y+h/2, r, 0, 2*Math.PI, true);\n    ctx.closePath();\n    ctx.fill();\n    ctx.stroke();\n};\n\n// modified from iview (http://istar.cse.cuhk.edu.hk/iview/)\niCn3D.prototype.createLabelRepresentation = function (labels) {\n    var tmpMaxD = this.maxD;\n\n    for(var name in labels) {\n        var labelArray = (labels[name] !== undefined) ? labels[name] : [];\n\n        for (var i = 0, il = labelArray.length; i < il; ++i) {\n            var label = labelArray[i];\n            // make sure fontsize is a number\n\n            if(label.size == 0) label.size = undefined;\n            if(label.color == 0) label.color = undefined;\n            if(label.background == 0) label.background = undefined;\n\n            var labelsize = (label.size !== undefined) ? label.size : this.LABELSIZE;\n            var labelcolor = (label.color !== undefined) ? label.color : '#ffff00';\n            var labelbackground = (label.background !== undefined) ? label.background : '#cccccc';\n            var labelalpha = (label.alpha !== undefined) ? label.alpha : 1.0;\n            // if label.background is undefined, no background will be drawn\n            labelbackground = label.background;\n\n            if(labelcolor !== undefined && labelbackground !== undefined && labelcolor.toLowerCase() === labelbackground.toLowerCase()) {\n                labelcolor = \"#888888\";\n            }\n\n            var bChemicalInProteinOrTrace = false;\n            var bStick = false;\n            if(Object.keys(this.proteins).length + Object.keys(this.nucleotides).length > 0) {\n                var firstAtom = this.getFirstAtomObj(this.hAtoms);\n                if(firstAtom !== undefined) {\n                    if(this.chemicals.hasOwnProperty(firstAtom.serial)\n                      || firstAtom.style == 'c alpha trace' || firstAtom.style == 'o3 trace'\n                      //|| firstAtom.style == 'schematic'\n                      ) {\n                        bChemicalInProteinOrTrace = true;\n                    }\n\n                    if(firstAtom.style == 'stick' || firstAtom.style == 'ball and stick') {\n                        bStick = true;\n                    }\n                }\n            }\n\n            // somehow the transformation is not stable when reset camera\n/*\n            if(bChemicalInProteinOrTrace) {\n                this.maxD = 15; // 50\n                this.setCamera();\n            }\n            else if(bStick) {\n                this.maxD = 30; // 50\n                this.setCamera();\n            }\n            else {\n                if(Object.keys(this.proteins).length + Object.keys(this.nucleotides).length > 0) {\n                    this.maxD = 100;\n                    this.setCamera();\n                }\n                else {\n                    this.maxD = 15;\n                    this.setCamera();\n                }\n            }\n*/\n\n            var bb;\n            if(label.bSchematic !== undefined && label.bSchematic) {\n\n                bb = this.makeTextSprite(label.text, {fontsize: parseInt(labelsize), textColor: labelcolor, borderColor: labelbackground, backgroundColor: labelbackground, alpha: labelalpha, bSchematic: 1});\n            }\n            else {\n                if(label.text.length === 1) {\n                    bb = this.makeTextSprite(label.text, {fontsize: parseInt(labelsize), textColor: labelcolor, borderColor: labelbackground, backgroundColor: labelbackground, alpha: labelalpha, bSchematic: 1});\n                }\n                else {\n                    bb = this.makeTextSprite(label.text, {fontsize: parseInt(labelsize), textColor: labelcolor, borderColor: labelbackground, backgroundColor: labelbackground, alpha: labelalpha, bSchematic: 0});\n                }\n            }\n\n            bb.position.set(label.position.x, label.position.y, label.position.z);\n            this.mdl.add(bb);\n            // do not add labels to objects for pk\n        }\n    }\n\n    // somehow the transformation is not stable when reset camera\n//    this.maxD = tmpMaxD;\n//    this.setCamera();\n};\n\n/**\n * @author Jiyao Wang <wangjiy@ncbi.nlm.nih.gov> / https://github.com/ncbi/icn3d\n */\n\niCn3D.prototype.setAtmClr = function(atoms, hex) {\n    for (var i in atoms) {\n        var atom = this.atoms[i];\n        atom.color = new THREE.Color().setHex(hex);\n\n        this.atomPrevColors[i] = atom.color;\n    }\n};\n\niCn3D.prototype.updateChainsColor = function (atom) {\n    var chainid = atom.structure + '_' + atom.chain;\n    if(this.chainsColor[chainid] !== undefined) {  // for mmdbid and align input\n        this.chainsColor[chainid] = atom.color;\n    }\n};\n\niCn3D.prototype.setMmdbChainColor = function (inAtoms) {\n    var atoms = (inAtoms === undefined) ? this.hAtoms : inAtoms;\n    this.applyOriginalColor(this.hash2Atoms(atoms));\n\n    // atom color\n    var atomHash = this.unionHash(this.chemicals, this.ions);\n\n    for (var i in atomHash) {\n        var atom = this.atoms[i];\n        atom.color = this.atomColors[atom.elem] || this.defaultAtomColor;\n\n        this.atomPrevColors[i] = atom.color;\n    }\n};\n\niCn3D.prototype.setConservationColor = function (atoms, bIdentity) {\n/*\n    for (var i in atoms) {\n        var atom = this.atoms[i];\n        atom.color = this.defaultAtomColor;\n\n        this.atomPrevColors[i] = atom.color;\n    }\n*/\n    this.setMmdbChainColor(atoms);\n\n    for(var chainid in this.alnChainsSeq) {\n        var resObjectArray = this.alnChainsSeq[chainid];\n\n        for(var i = 0, il = resObjectArray.length; i < il; ++i) {\n            var residueid = chainid + '_' + resObjectArray[i].resi;\n\n            for(var j in this.residues[residueid]) {\n                if(atoms.hasOwnProperty(j)) {\n                    var color = (bIdentity) ? new THREE.Color(resObjectArray[i].color) : new THREE.Color(resObjectArray[i].color2);\n                    this.atoms[j].color = color;\n                    this.atomPrevColors[j] = color;\n                }\n            }\n        }\n    }\n};\n\niCn3D.prototype.setColorByOptions = function (options, atoms, bUseInputColor) {\n if(options !== undefined) {\n  if(bUseInputColor !== undefined && bUseInputColor) {\n    for (var i in atoms) {\n        var atom = this.atoms[i];\n\n        this.atomPrevColors[i] = atom.color;\n    }\n  }\n  else if(options.color.indexOf(\"#\") === 0) {\n    for (var i in atoms) {\n        var atom = this.atoms[i];\n        atom.color = new THREE.Color().setStyle(options.color.toLowerCase());\n\n        this.atomPrevColors[i] = atom.color;\n    }\n  }\n  else {\n    switch (options.color.toLowerCase()) {\n        case 'spectrum':\n            var idx = 0;\n            //var lastTerSerialInv = 1 / this.lastTerSerial;\n            //var lastTerSerialInv = 1 / this.cnt;\n            var cnt = 0;\n            for (var i in atoms) {\n                var atom = this.atoms[i];\n                if(!atom.het) ++cnt;\n            }\n\n            var lastTerSerialInv = 1 / cnt;\n            for (var i in atoms) {\n                var atom = this.atoms[i];\n                atom.color = atom.het ? this.atomColors[atom.elem] || this.defaultAtomColor : new THREE.Color().setHSL(2 / 3 * (1 - idx++ * lastTerSerialInv), 1, 0.45);\n                //atom.color = this.atomColors[atom.elem] || this.defaultAtomColor;\n\n                this.atomPrevColors[i] = atom.color;\n            }\n            break;\n        case 'chain':\n            if(this.chainsColor !== undefined && Object.keys(this.chainsColor).length > 0) { // mmdb input\n                this.setMmdbChainColor();\n            }\n            else {\n                var index = -1, prevChain = '', colorLength = this.stdChainColors.length;\n                for (var i in atoms) {\n                    var atom = this.atoms[i];\n\n                    if(atom.chain != prevChain) {\n                        ++index;\n\n                        index = index % colorLength;\n                    }\n\n                    atom.color = this.stdChainColors[index];\n\n                    if(Object.keys(this.chainsColor).length > 0) this.updateChainsColor(atom);\n                    this.atomPrevColors[i] = atom.color;\n\n                    prevChain = atom.chain;\n                }\n            }\n            break;\n        case 'secondary structure':\n            this.sheetcolor = 'green';\n            for (var i in atoms) {\n                var atom = this.atoms[i];\n                // secondary color of nucleotide: blue (new THREE.Color(0x0000FF))\n                atom.color = atom.het ? this.atomColors[atom.elem] || this.defaultAtomColor : this.ssColors[atom.ss] || new THREE.Color(0xFF00FF);\n\n                this.atomPrevColors[i] = atom.color;\n            }\n\n            break;\n\n        case 'secondary structure yellow':\n            this.sheetcolor = 'yellow';\n            for (var i in atoms) {\n                var atom = this.atoms[i];\n                // secondary color of nucleotide: blue (new THREE.Color(0x0000FF))\n                atom.color = atom.het ? this.atomColors[atom.elem] || this.defaultAtomColor : this.ssColors2[atom.ss] || new THREE.Color(0xFF00FF);\n\n                this.atomPrevColors[i] = atom.color;\n            }\n\n            break;\n\n        case 'residue':\n            for (var i in atoms) {\n                var atom = this.atoms[i];\n                atom.color = atom.het ? this.atomColors[atom.elem] || this.defaultAtomColor : this.residueColors[atom.resn] || this.defaultResidueColor;\n\n                this.atomPrevColors[i] = atom.color;\n            }\n            break;\n        case 'charge':\n            for (var i in atoms) {\n                var atom = this.atoms[i];\n\n                //atom.color = atom.het ? this.atomColors[atom.elem] || this.defaultAtomColor : this.chargeColors[atom.resn] || this.defaultResidueColor;\n                atom.color = atom.het ? this.defaultAtomColor : this.chargeColors[atom.resn] || this.defaultResidueColor;\n\n                this.atomPrevColors[i] = atom.color;\n            }\n            break;\n        case 'hydrophobic':\n            for (var i in atoms) {\n                var atom = this.atoms[i];\n\n                //atom.color = atom.het ? this.atomColors[atom.elem] || this.defaultAtomColor : this.chargeColors[atom.resn] || this.defaultResidueColor;\n                atom.color = atom.het ? this.defaultAtomColor : this.hydrophobicColors[atom.resn] || this.defaultResidueColor;\n\n                this.atomPrevColors[i] = atom.color;\n            }\n            break;\n        case 'atom':\n            for (var i in atoms) {\n                var atom = this.atoms[i];\n                atom.color = this.atomColors[atom.elem] || this.defaultAtomColor;\n\n                this.atomPrevColors[i] = atom.color;\n            }\n            break;\n\n        case 'b factor':\n/*\n            //http://proteopedia.org/wiki/index.php/Disorder\n            // < 30: blue; > 60: red; use 45 as the middle value\n            if (!this.middB) {\n                var minB = 1000, maxB = -1000;\n                for (var i in this.atoms) {\n                    var atom = this.atoms[i];\n                    if (minB > atom.b) minB = atom.b;\n                    if (maxB < atom.b) maxB = atom.b;\n                }\n\n                if(minB > 30) minB = 30;\n                if(maxB < 60) maxB = 60;\n\n                this.middB = 45; //(maxB + minB) * 0.5;\n                this.spanBinv1 = (this.middB > minB) ? 1.0 / (this.middB - minB) : 0;\n                this.spanBinv2 = (this.middB < maxB) ? 1.0 / (maxB - this.middB) : 0;\n            }\n*/\n\n            // http://proteopedia.org/wiki/index.php/Temperature_color_schemes\n            // Fixed: Middle (white): 50, red: >= 100, blue: 0\n            this.middB = 50;\n            this.spanBinv1 = 0.02;\n            this.spanBinv2 = 0.02;\n\n            for (var i in atoms) {\n                var atom = this.atoms[i];\n                if(atom.b === undefined || parseInt(atom.b * 1000) == 0) { // invalid b-factor\n                    atom.color =  new THREE.Color().setRGB(0, 1, 0);\n                }\n                else {\n                    var b = atom.b;\n                    if(b > 100) b = 100;\n\n                    atom.color = b < this.middB ? new THREE.Color().setRGB(1 - (s = (this.middB - b) * this.spanBinv1), 1 - s, 1) : new THREE.Color().setRGB(1, 1 - (s = (b - this.middB) * this.spanBinv2), 1 - s);\n                }\n\n                this.atomPrevColors[i] = atom.color;\n            }\n            break;\n\n        case 'b factor percentile':\n            //http://proteopedia.org/wiki/index.php/Disorder\n            // percentile normalize B-factor values from 0 to 1\n            var minB = 1000, maxB = -1000;\n            if (!this.bfactorArray) {\n                this.bfactorArray = [];\n                for (var i in this.atoms) {\n                    var atom = this.atoms[i];\n                    if (minB > atom.b) minB = atom.b;\n                    if (maxB < atom.b) maxB = atom.b;\n\n                    this.bfactorArray.push(atom.b);\n                }\n\n                this.bfactorArray.sort(function(a, b) { return a - b; });\n            }\n\n            var totalCnt = this.bfactorArray.length;\n            for (var i in atoms) {\n                var atom = this.atoms[i];\n                if(atom.b === undefined || parseInt(atom.b * 1000) == 0 || this.bfactorArray.length == 0) { // invalid b-factor\n                    atom.color =  new THREE.Color().setRGB(0, 1, 0);\n                }\n                else {\n                    var percentile = this.bfactorArray.indexOf(atom.b) / totalCnt;\n\n                    atom.color = percentile < 0.5 ? new THREE.Color().setRGB(percentile * 2, percentile * 2, 1) : new THREE.Color().setRGB(1, (1 - percentile) * 2, (1 - percentile) * 2);\n                }\n\n                this.atomPrevColors[i] = atom.color;\n            }\n\n            break;\n\n        case 'identity':\n            this.setConservationColor(atoms, true);\n            break;\n\n        case 'conserved': // backward-compatible, \"conserved\" was changed to \"identity\"\n            this.setConservationColor(atoms, true);\n            break;\n\n        case 'conservation':\n            this.setConservationColor(atoms, false);\n            break;\n\n        case 'white':\n            this.setAtmClr(atoms, 0xFFFFFF);\n            break;\n\n        case 'grey':\n            this.setAtmClr(atoms, 0x888888);\n            break;\n\n        case 'red':\n            this.setAtmClr(atoms, 0xFF0000);\n            break;\n        case 'green':\n            this.setAtmClr(atoms, 0x00FF00);\n            break;\n        case 'blue':\n            this.setAtmClr(atoms, 0x0000FF);\n            break;\n        case 'magenta':\n            this.setAtmClr(atoms, 0xFF00FF);\n            break;\n        case 'yellow':\n            this.setAtmClr(atoms, 0xFFFF00);\n            break;\n        case 'cyan':\n            this.setAtmClr(atoms, 0x00FFFF);\n            break;\n        case 'custom':\n            // do the coloring separately\n            break;\n\n        default: // the \"#\" was missed in order to make sharelink work\n            for (var i in atoms) {\n                var atom = this.atoms[i];\n                atom.color = new THREE.Color().setStyle(\"#\" + options.color.toLowerCase());\n\n                this.atomPrevColors[i] = atom.color;\n            }\n\n            break;\n    }\n  }\n }\n};\n\niCn3D.prototype.applyDisplayOptions = function (options, atoms, bHighlight) { var me = this; // atoms: hash of key -> 1\n    if(options === undefined) options = this.opts;\n\n    var residueHash = {};\n    var singletonResidueHash = {};\n    var atomsObj = {};\n    var residueid;\n\n    if(bHighlight === 1 && Object.keys(atoms).length < Object.keys(this.atoms).length) {\n        atomsObj = this.hash2Atoms(atoms);\n\n        //for(var i in atomsObj) {\n        //    var atom = atomsObj[i];\n\n        //    residueid = atom.structure + '_' + atom.chain + '_' + atom.resi;\n        //    residueHash[residueid] = 1;\n        //}\n\n        residueHash = me.getResiduesFromAtoms(atoms);\n\n        // find singleton residues\n        for(var i in residueHash) {\n            residueid = i;\n\n            var last = i.lastIndexOf('_');\n            var base = i.substr(0, last + 1);\n            var lastResi = parseInt(i.substr(last + 1));\n\n            var prevResidueid = base + (lastResi - 1).toString();\n            var nextResidueid = base + (lastResi + 1).toString();\n\n            if(!residueHash.hasOwnProperty(prevResidueid) && !residueHash.hasOwnProperty(prevResidueid)) {\n                singletonResidueHash[i] = 1;\n            }\n        }\n\n        // show the only atom in a transparent box\n        if(Object.keys(atomsObj).length === 1 && Object.keys(this.residues[residueid]).length > 1\n              && atomsObj[Object.keys(atomsObj)[0]].style !== 'sphere' && atomsObj[Object.keys(atomsObj)[0]].style !== 'dot') {\n            if(this.bCid === undefined || !this.bCid) {\n                for(var i in atomsObj) {\n                    var atom = atomsObj[i];\n                    var scale = 1.0;\n                    this.createBox(atom, undefined, undefined, scale, undefined, bHighlight);\n                }\n            }\n        }\n        else {\n            // if only one residue, add the next residue in order to show highlight\n            for(var residueid in singletonResidueHash) {\n                //var atom = this.getFirstAtomObj(this.residues[residueid]);\n                // get calpha\n                var calpha = this.getFirstCalphaAtomObj(this.residues[residueid]);\n                var atom = calpha;\n\n                var prevResidueid = atom.structure + '_' + atom.chain + '_' + parseInt(atom.resi - 1);\n                var nextResidueid = atom.structure + '_' + atom.chain + '_' + parseInt(atom.resi + 1);\n\n                //ribbon, strand, cylinder and plate, nucleotide cartoon, o3 trace, schematic, c alpha trace, b factor tube, lines, stick, ball and stick, sphere, dot\n\n                if(atom.style === 'cylinder and plate' && atom.ss === 'helix') { // no way to highlight part of cylinder\n                    for(var i in this.residues[residueid]) {\n                        var atom = this.atoms[i];\n                        var scale = 1.0;\n                        this.createBox(atom, undefined, undefined, scale, undefined, bHighlight);\n                    }\n                }\n                else if( (atom.style === 'ribbon' && atom.ss === 'coil') || (atom.style === 'strand' && atom.ss === 'coil') || atom.style === 'o3 trace' || atom.style === 'schematic' || atom.style === 'c alpha trace' || atom.style === 'b factor tube' || (atom.style === 'cylinder and plate' && atom.ss !== 'helix') ) {\n                    // do not add extra residue if the side chain is shown\n                    if(calpha !== undefined && calpha.style2 !== undefined && calpha.style2 !== 'nothing') continue;\n\n                    var bAddResidue = false;\n                    // add the next residue with same style\n                    if(!bAddResidue && this.residues.hasOwnProperty(nextResidueid)) {\n                        var index2 = Object.keys(this.residues[nextResidueid])[0];\n                        var atom2 = this.hash2Atoms(this.residues[nextResidueid])[index2];\n                        if( (atom.style === atom2.style && !atom2.ssbegin) || atom2.ssbegin) {\n                            var residueAtoms = this.residues[nextResidueid];\n                            atoms = this.unionHash(atoms, residueAtoms);\n\n                            bAddResidue = true;\n\n                            // record the highlight style for the artificial residue\n                            if(atom2.ssbegin) {\n                                for(var i in residueAtoms) {\n                                    this.atoms[i].notshow = true;\n                                }\n                            }\n                        }\n                    }\n\n                    // add the previous residue with same style\n                    if(!bAddResidue && this.residues.hasOwnProperty(prevResidueid)) {\n                        var index2 = Object.keys(this.residues[prevResidueid])[0];\n                        var atom2 = this.hash2Atoms(this.residues[prevResidueid])[index2];\n                        if(atom.style === atom2.style) {\n                            atoms = this.unionHash(atoms, this.residues[prevResidueid]);\n\n                            bAddResidue = true;\n                        }\n                    }\n                }\n                else if( (atom.style === 'ribbon' && atom.ss !== 'coil' && atom.ssend) || (atom.style === 'strand' && atom.ss !== 'coil' && atom.ssend)) {\n                    // do not add extra residue if the side chain is shown\n                    if(calpha !== undefined && calpha.style2 !== undefined && calpha.style2 !== 'nothing') continue;\n\n                    var bAddResidue = false;\n                    // add the next residue with same style\n                    if(!bAddResidue && this.residues.hasOwnProperty(nextResidueid)) {\n                        var index2 = Object.keys(this.residues[nextResidueid])[0];\n                        var atom2 = this.hash2Atoms(this.residues[nextResidueid])[index2];\n                        //if(atom.style === atom2.style && !atom2.ssbegin) {\n                            atoms = this.unionHash(atoms, this.residues[nextResidueid]);\n\n                            bAddResidue = true;\n                        //}\n                    }\n                }\n            } // end for\n        } // end else {\n\n        atomsObj = {};\n    } // end if(bHighlight === 1)\n\n    this.setStyle2Atoms(atoms);\n\n    //this.bAllAtoms = (Object.keys(atoms).length === Object.keys(this.atoms).length);\n    this.bAllAtoms = false;\n    if(atoms && atoms !== undefined ) {\n        this.bAllAtoms = (Object.keys(atoms).length === Object.keys(this.atoms).length);\n    }\n\n//        var currentCalphas = {};\n//        if(this.opts['sidec'] !== 'nothing') {\n//            currentCalphas = this.intHash(this.hAtoms, this.calphas);\n//        }\n\n    var chemicalSchematicRadius = this.cylinderRadius * 0.5;\n\n    // remove schematic labels\n    //if(this.labels !== undefined) this.labels['schematic'] = undefined;\n    if(this.labels !== undefined) delete this.labels['schematic'];\n\n    var bOnlySideChains = false;\n\n    if(bHighlight) {\n        var residueHashCalpha = this.getResiduesFromCalphaAtoms(this.hAtoms);\n\n        var proteinAtoms = this.intHash(this.hAtoms, this.proteins);\n        var residueHash = this.getResiduesFromAtoms(proteinAtoms);\n\n        if(Object.keys(residueHash) > Object.keys(residueHashCalpha)) { // some residues have only side chains\n            bOnlySideChains = true;\n        }\n\n/*\n        bOnlySideChains = true;\n\n        for(var i in this.hAtoms) {\n            if(this.atoms[i].name == 'CA') {\n                bOnlySideChains = false;\n                break;\n            }\n        }\n*/\n    }\n\n    for(var style in this.style2atoms) {\n      // 14 styles: ribbon, strand, cylinder and plate, nucleotide cartoon, o3 trace, schematic, c alpha trace, b factor tube, lines, stick, ball and stick, sphere, dot, nothing\n      var atomHash = this.style2atoms[style];\n      //var bPhosphorusOnly = this.isCalphaPhosOnly(this.hash2Atoms(atomHash), \"O3'\", \"O3*\") || this.isCalphaPhosOnly(this.hash2Atoms(atomHash), \"P\");\n      var bPhosphorusOnly = this.isCalphaPhosOnly(this.hash2Atoms(atomHash));\n\n      //if(style === 'ribbon') {\n      if(style === 'ribbon' && (!bHighlight || (bHighlight && !bOnlySideChains))) {\n          this.createStrand(this.hash2Atoms(atomHash), 2, undefined, true, undefined, undefined, false, this.ribbonthickness, bHighlight);\n      }\n      //else if(style === 'strand') {\n      else if(style === 'strand' && (!bHighlight || (bHighlight && !bOnlySideChains))) {\n          this.createStrand(this.hash2Atoms(atomHash), null, null, null, null, null, false, undefined, bHighlight);\n      }\n      //else if(style === 'cylinder and plate') {\n      else if(style === 'cylinder and plate' && (!bHighlight || (bHighlight && !bOnlySideChains))) {\n        this.createCylinderHelix(this.hash2Atoms(atomHash), this.cylinderHelixRadius, bHighlight);\n      }\n      else if(style === 'nucleotide cartoon') {\n        if(bPhosphorusOnly) {\n            this.createCylinderCurve(this.hash2Atoms(atomHash), [\"P\"], this.traceRadius, false, bHighlight);\n        }\n        else {\n            this.drawCartoonNucleicAcid(this.hash2Atoms(atomHash), null, this.ribbonthickness, bHighlight);\n\n            if(bHighlight !== 2) this.drawNucleicAcidStick(this.hash2Atoms(atomHash), bHighlight);\n        }\n      }\n      else if(style === 'o3 trace') {\n        if(bPhosphorusOnly) {\n            this.createCylinderCurve(this.hash2Atoms(atomHash), [\"P\"], this.traceRadius, false, bHighlight);\n        }\n        else {\n            this.createCylinderCurve(this.hash2Atoms(atomHash), [\"O3'\", \"O3*\"], this.traceRadius, false, bHighlight);\n        }\n      }\n      //else if(style === 'phosphorus lines') {\n      //  this.createCylinderCurve(this.hash2Atoms(atomHash), [\"O3'\", \"O3*\"], 0.2, true, bHighlight);\n      //}\n      else if(style === 'schematic') {\n        // either proteins, nucleotides, or chemicals\n        var firstAtom = this.getFirstAtomObj(atomHash);\n\n        //if(firstAtom.het) { // chemicals\n        if(this.chemicals.hasOwnProperty(firstAtom.serial)) { // chemicals\n            this.addNonCarbonAtomLabels(this.hash2Atoms(atomHash));\n\n            bSchematic = true;\n            this.createStickRepresentation(this.hash2Atoms(atomHash), chemicalSchematicRadius, chemicalSchematicRadius, undefined, bHighlight, bSchematic);\n        }\n        else { // nucleotides or proteins\n            this.addResiudeLabels(this.hash2Atoms(atomHash), true);\n\n            if(bPhosphorusOnly) {\n                this.createCylinderCurve(this.hash2Atoms(atomHash), [\"P\"], this.traceRadius, false, bHighlight);\n            }\n            else {\n                this.createCylinderCurve(this.hash2Atoms(atomHash), [\"O3'\", \"O3*\"], this.traceRadius, false, bHighlight);\n            }\n            this.createCylinderCurve(this.hash2Atoms(atomHash), ['CA'], this.traceRadius, false, bHighlight);\n        }\n      }\n      else if(style === 'c alpha trace') {\n        this.createCylinderCurve(this.hash2Atoms(atomHash), ['CA'], this.traceRadius, false, bHighlight);\n      }\n      else if(style === 'b factor tube') {\n        this.createTube(this.hash2Atoms(atomHash), 'CA', null, bHighlight);\n      }\n      else if(style === 'lines') {\n        if(bHighlight === 1) {\n            this.createStickRepresentation(this.hash2Atoms(atomHash), this.hlLineRadius, this.hlLineRadius, undefined, bHighlight);\n        }\n        else {\n            this.createLineRepresentation(this.hash2Atoms(atomHash), bHighlight);\n        }\n      }\n      else if(style === 'stick') {\n        this.createStickRepresentation(this.hash2Atoms(atomHash), this.cylinderRadius, this.cylinderRadius, undefined, bHighlight);\n      }\n      else if(style === 'ball and stick') {\n        this.createStickRepresentation(this.hash2Atoms(atomHash), this.cylinderRadius, this.cylinderRadius * 0.5, this.dotSphereScale, bHighlight);\n      }\n      else if(style === 'sphere') {\n        this.createSphereRepresentation(this.hash2Atoms(atomHash), this.sphereRadius, undefined, undefined, bHighlight);\n      }\n      else if(style === 'dot') {\n        this.createSphereRepresentation(this.hash2Atoms(atomHash), this.sphereRadius, false, this.dotSphereScale, bHighlight);\n      }\n    } // end for loop\n\n    if(this.cnt > this.maxmaxatomcnt) { // release memory\n        this.init_base();\n    }\n\n    // hide the previous labels\n    if(this.labels !== undefined && Object.keys(this.labels).length > 0) {\n        this.hideLabels();\n\n        // labels\n        this.createLabelRepresentation(this.labels);\n    }\n};\n\niCn3D.prototype.hideLabels = function () { var me = this;\n    // remove previous labels\n    if(this.mdl !== undefined) {\n        for(var i = 0, il = this.mdl.children.length; i < il; ++i) {\n             var mesh = this.mdl.children[i];\n             if(mesh !== undefined && mesh.type === 'Sprite') {\n                 this.mdl.remove(mesh); // somehow didn't work\n             }\n        }\n    }\n};\n\niCn3D.prototype.setStyle2Atoms = function (atoms) {\n      this.style2atoms = {};\n\n      for(var i in atoms) {\n        // do not show water in assemly\n        //if(this.bAssembly && this.water.hasOwnProperty(i)) {\n        //    this.atoms[i].style = 'nothing';\n        //}\n\n        if(this.style2atoms[this.atoms[i].style] === undefined) this.style2atoms[this.atoms[i].style] = {};\n\n        this.style2atoms[this.atoms[i].style][i] = 1;\n\n        // side chains\n        if(this.atoms[i].style2 !== undefined && this.atoms[i].style2 !== 'nothing') {\n            if(this.style2atoms[this.atoms[i].style2] === undefined) this.style2atoms[this.atoms[i].style2] = {};\n\n            this.style2atoms[this.atoms[i].style2][i] = 1;\n        }\n      }\n\n/*\n      for(var i in this.atoms) {\n          if(atoms.hasOwnProperty(i)) {\n            if(this.style2atoms[this.atoms[i].style] === undefined) this.style2atoms[this.atoms[i].style] = {};\n\n            this.style2atoms[this.atoms[i].style][i] = 1;\n\n            // side chains\n            if(this.style2atoms[this.atoms[i].style2] === undefined) this.style2atoms[this.atoms[i].style2] = {};\n\n            this.style2atoms[this.atoms[i].style2][i] = 1;\n          }\n          else if(this.atoms[i].style == 'schematic') { // always display schematic\n            if(this.style2atoms[this.atoms[i].style] === undefined) this.style2atoms[this.atoms[i].style] = {};\n            this.style2atoms[this.atoms[i].style][i] = 1;\n          }\n      }\n*/\n};\n\n// set atom style when loading a structure\niCn3D.prototype.setAtomStyleByOptions = function (options) {\n    if(options === undefined) options = this.opts;\n\n    var selectedAtoms;\n\n    if (options.proteins !== undefined) {\n        selectedAtoms = this.intHash(this.hAtoms, this.proteins);\n        for(var i in selectedAtoms) {\n          this.atoms[i].style = options.proteins.toLowerCase();\n        }\n    }\n\n    // side chain use style2\n    if (options.sidec !== undefined && options.sidec !== 'nothing') {\n        selectedAtoms = this.intHash(this.hAtoms, this.sidec);\n        //var sidec_calpha = this.unionHash(this.calphas, this.sidec);\n        //selectedAtoms = this.intHash(this.hAtoms, sidec_calpha);\n\n        for(var i in selectedAtoms) {\n          this.atoms[i].style2 = options.sidec.toLowerCase();\n        }\n    }\n\n    if (options.chemicals !== undefined) {\n        selectedAtoms = this.intHash(this.hAtoms, this.chemicals);\n        for(var i in selectedAtoms) {\n          this.atoms[i].style = options.chemicals.toLowerCase();\n        }\n    }\n\n    if (options.ions !== undefined) {\n        selectedAtoms = this.intHash(this.hAtoms, this.ions);\n        for(var i in selectedAtoms) {\n          this.atoms[i].style = options.ions.toLowerCase();\n        }\n    }\n\n    if (options.water !== undefined) {\n        selectedAtoms = this.intHash(this.hAtoms, this.water);\n        for(var i in selectedAtoms) {\n          this.atoms[i].style = options.water.toLowerCase();\n        }\n    }\n\n    if (options.nucleotides !== undefined) {\n        selectedAtoms = this.intHash(this.hAtoms, this.nucleotides);\n        for(var i in selectedAtoms) {\n          this.atoms[i].style = options.nucleotides.toLowerCase();\n        }\n    }\n};\n\niCn3D.prototype.rebuildSceneBase = function (options) { var me = this;\n    jQuery.extend(me.opts, options);\n\n    this.cam_z = this.maxD * 2;\n    //this.cam_z = -this.maxD * 2;\n\n    if(this.scene !== undefined) {\n        for(var i = this.scene.children.length - 1; i >= 0; i--) {\n             var obj = this.scene.children[i];\n             this.scene.remove(obj);\n        }\n    }\n    else {\n        this.scene = new THREE.Scene();\n    }\n\n    if(this.scene_ghost !== undefined) {\n        for(var i = this.scene_ghost.children.length - 1; i >= 0; i--) {\n             var obj = this.scene_ghost.children[i];\n             this.scene_ghost.remove(obj);\n        }\n    }\n    else {\n        this.scene_ghost = new THREE.Scene();\n    }\n\n    //this.directionalLight = new THREE.DirectionalLight(0xFFFFFF, 1.2);\n    this.directionalLight = new THREE.DirectionalLight(0xFFFFFF, 1.0);\n\n    if(this.cam_z > 0) {\n      this.directionalLight.position.set(0, 0, 1);\n    }\n    else {\n      this.directionalLight.position.set(0, 0, -1);\n    }\n\n    //var ambientLight = new THREE.AmbientLight(0x202020);\n    //var ambientLight = new THREE.AmbientLight(0xdddddd, 0.2);\n    var ambientLight = new THREE.AmbientLight(0x404040);\n\n    this.scene.add(this.directionalLight);\n    this.scene.add(ambientLight);\n\n    //this.group = new THREE.Object3D();  // regular display\n\n    this.mdl = new THREE.Object3D();  // regular display\n    //this.mdlPicking = new THREE.Object3D();  // pk display\n    this.mdlImpostor = new THREE.Object3D();  // Impostor display\n\n    //this.scene.add(this.mdlPicking);\n    this.scene.add(this.mdl);\n    this.scene.add(this.mdlImpostor);\n\n    // highlight on impostors\n    this.mdl_ghost = new THREE.Object3D();  // Impostor display\n    this.scene_ghost.add(this.mdl_ghost);\n\n    //this.scene_ghost.add(this.directionalLight);\n    //this.scene_ghost.add(ambientLight);\n\n    // related to pk\n    this.objects = []; // define objects for pk, not all elements are used for pk\n    this.objects_ghost = []; // define objects for pk, not all elements are used for pk\n    this.raycaster = new THREE.Raycaster();\n    this.projector = new THREE.Projector();\n    this.mouse = new THREE.Vector2();\n\n    var background = this.backgroundColors[this.opts.background.toLowerCase()];\n\n    if(this.opts.background.toLowerCase() === 'transparent') {\n        this.renderer.setClearColor(background, 0);\n    }\n    else {\n        this.renderer.setClearColor(background, 1);\n    }\n\n    this.perspectiveCamera = new THREE.PerspectiveCamera(20, this.container.whratio, 0.1, 10000);\n    this.perspectiveCamera.position.set(0, 0, this.cam_z);\n    this.perspectiveCamera.lookAt(new THREE.Vector3(0, 0, 0));\n\n    this.orthographicCamera = new THREE.OrthographicCamera();\n    this.orthographicCamera.position.set(0, 0, this.cam_z);\n    this.orthographicCamera.lookAt(new THREE.Vector3(0, 0, 0));\n\n    this.cams = {\n        perspective: this.perspectiveCamera,\n        orthographic: this.orthographicCamera,\n    };\n};\n\niCn3D.prototype.setCamera = function() {\n    this.cam = this.cams[this.opts.camera.toLowerCase()];\n\n    if(this.cam === this.perspectiveCamera) {\n        var factor = (this.biomtMatrices !== undefined && this.biomtMatrices.length * this.cnt > 10 * this.maxatomcnt) ? 1 : 2;\n        if(this.cam_z > 0) {\n          this.cam.position.z = this.maxD * factor; // forperspective, the z positionshould be large enough to see the whole molecule\n        }\n        else {\n          this.cam.position.z = -this.maxD * factor; // forperspective, the z positionshould be large enough to see the whole molecule\n        }\n\n        if(this.opts['slab'] === 'yes') {\n            this.cam.near = this.maxD * 2;\n        }\n        else {\n            this.cam.near = 0.1;\n        }\n        this.cam.far = 10000;\n\n        this.controls = new THREE.TrackballControls( this.cam, document.getElementById(this.id), this );\n    }\n    else if (this.cam === this.orthographicCamera){\n        if(this.biomtMatrices !== undefined && this.biomtMatrices.length * this.cnt > 10 * this.maxatomcnt) {\n            this.cam.right = this.maxD/2 * 1.5;\n        }\n        else {\n            this.cam.right = this.maxD/2 * 2.5;\n        }\n\n        this.cam.left = -this.cam.right;\n        this.cam.top = this.cam.right /this.container.whratio;\n        this.cam.bottom = -this.cam.right /this.container.whratio;\n\n          if(this.opts['slab'] === 'yes') {\n              this.cam.near = this.maxD * 2;\n          }\n          else {\n            this.cam.near = 0;\n          }\n\n          this.cam.far = 10000;\n\n        this.controls = new THREE.OrthographicTrackballControls( this.cam, document.getElementById(this.id), this );\n    }\n\n    this.cam.updateProjectionMatrix();\n};\n\niCn3D.prototype.render = function () {\n    this.directionalLight.position.copy(this.cam.position);\n\n    this.renderer.gammaInput = true\n    this.renderer.gammaOutput = true\n\n    this.renderer.setPixelRatio( window.devicePixelRatio ); // r71\n    this.renderer.render(this.scene, this.cam);\n    //this.renderer.render(this.scene_ghost, this.cam);\n};\n\niCn3D.prototype.clearImpostors = function () {\n    this.posArray = [];\n    this.colorArray = [];\n    this.pos2Array = [];\n    this.color2Array = [];\n    this.radiusArray = [];\n\n    this.posArraySphere = [];\n    this.colorArraySphere = [];\n    this.radiusArraySphere = [];\n};\n\niCn3D.prototype.applyTransformation = function (_zoomFactor, mouseChange, quaternion) {\n    var para = {};\n    para.update = false;\n\n    // zoom\n    para._zoomFactor = _zoomFactor;\n\n    // translate\n    para.mouseChange = new THREE.Vector2();\n    para.mouseChange.copy(mouseChange);\n\n    // rotation\n    para.quaternion = new THREE.Quaternion();\n    para.quaternion.copy(quaternion);\n\n    this.controls.update(para);\n};\n\niCn3D.prototype.applyCenterOptions = function (options) {\n    if(options === undefined) options = this.opts;\n\n    switch (options.rotationcenter.toLowerCase()) {\n        case 'molecule center':\n            // move the molecule to the origin\n            if(this.center !== undefined) {\n                this.setRotationCenter(this.center);\n            }\n            break;\n        case 'pick center':\n            if(this.pAtom !== undefined) {\n              this.setRotationCenter(this.pAtom.coord);\n            }\n            break;\n        case 'display center':\n            var center = this.centerAtoms(this.dAtoms).center;\n            this.setRotationCenter(center);\n            break;\n        case 'highlight center':\n            var center = this.centerAtoms(this.hAtoms).center;\n            this.setRotationCenter(center);\n            break;\n    }\n};\n\niCn3D.prototype.setRotationCenter = function (coord) {\n   this.mdl.position.set(0,0,0);\n   this.mdlImpostor.position.set(0,0,0);\n   this.mdl_ghost.position.set(0,0,0);\n\n    //this.mdlPicking.position.sub(coord);\n    this.mdl.position.sub(coord);\n    this.mdlImpostor.position.sub(coord);\n    this.mdl_ghost.position.sub(coord);\n};\n\niCn3D.prototype.applyOriginalColor = function (atoms) {\n    if(atoms === undefined) atoms = this.atoms;\n\n    for (var i in atoms) {\n        var atom = atoms[i];\n        var chainid = atom.structure + '_' + atom.chain;\n\n        if(this.chainsColor.hasOwnProperty(chainid)) {\n            atom.color = this.chainsColor[chainid];\n        }\n        else {\n            atom.color = this.atomColors[atom.elem];\n            //break;\n        }\n\n        this.atomPrevColors[i] = atom.color;\n    }\n};\n\n/**\n * @author Jiyao Wang <wangjiy@ncbi.nlm.nih.gov> / https://github.com/ncbi/icn3d\n */\n\niCn3D.prototype.onBeforeRender = function(renderer, scene, camera, geometry, material) {\n  var u = material.uniforms;\n  var updateList = [];\n\n  if (u.objectId) {\n    u.objectId.value = SupportsReadPixelsFloat ? this.id : this.id / 255\n    updateList.push('objectId')\n  }\n\n  if (u.modelViewMatrixInverse || u.modelViewMatrixInverseTranspose ||\n      u.modelViewProjectionMatrix || u.modelViewProjectionMatrixInverse\n  ) {\n    this.modelViewMatrix.multiplyMatrices(camera.matrixWorldInverse, this.matrixWorld);\n  }\n\n  if (u.modelViewMatrixInverse) {\n    u.modelViewMatrixInverse.value.getInverse(this.modelViewMatrix);\n    updateList.push('modelViewMatrixInverse');\n  }\n\n  if (u.modelViewMatrixInverseTranspose) {\n    if (u.modelViewMatrixInverse) {\n      u.modelViewMatrixInverseTranspose.value.copy(\n        u.modelViewMatrixInverse.value\n      ).transpose();\n    } else {\n      u.modelViewMatrixInverseTranspose.value\n        .getInverse(this.modelViewMatrix)\n        .transpose();\n    }\n    updateList.push('modelViewMatrixInverseTranspose');\n  }\n\n  if (u.modelViewProjectionMatrix) {\n    camera.updateProjectionMatrix();\n    u.modelViewProjectionMatrix.value.multiplyMatrices(\n      camera.projectionMatrix, this.modelViewMatrix\n    );\n    updateList.push('modelViewProjectionMatrix');\n  }\n\n  if (u.modelViewProjectionMatrixInverse) {\n    var tmpMatrix = new THREE.Matrix4();\n    if (u.modelViewProjectionMatrix) {\n      tmpMatrix.copy(\n        u.modelViewProjectionMatrix.value\n      );\n      u.modelViewProjectionMatrixInverse.value.getInverse(\n        tmpMatrix\n      );\n    } else {\n      camera.updateProjectionMatrix();\n      tmpMatrix.multiplyMatrices(\n        camera.projectionMatrix, this.modelViewMatrix\n      );\n      u.modelViewProjectionMatrixInverse.value.getInverse(\n        tmpMatrix\n      );\n    }\n    updateList.push('modelViewProjectionMatrixInverse');\n  }\n\n  if (u.projectionMatrix) {\n    camera.updateProjectionMatrix();\n    u.projectionMatrix.value.copy( camera.projectionMatrix );\n    updateList.push('projectionMatrix');\n  }\n\n  if (u.projectionMatrixInverse) {\n    camera.updateProjectionMatrix();\n    u.projectionMatrixInverse.value.getInverse(camera.projectionMatrix);\n    updateList.push('projectionMatrixInverse');\n  }\n\n  if (updateList.length) {\n    var materialProperties = renderer.properties.get(material);\n\n    if (materialProperties.program) {\n      var gl = renderer.getContext();\n      var p = materialProperties.program;\n      gl.useProgram(p.program);\n      var pu = p.getUniforms();\n\n      updateList.forEach(function (name) {\n        pu.setValue(gl, name, u[ name ].value)\n      });\n    }\n  }\n};\n\niCn3D.prototype.setParametersForShader = function (opacity) { var me = this;\n/*\n    var modelViewMatrix = new THREE.Uniform( new THREE.Matrix4() )\n            .onUpdate( function( object ){\n                this.value.copy( object.modelViewMatrix );\n    } );\n\n    var modelViewMatrixInverse = new THREE.Uniform( new THREE.Matrix4() )\n            .onUpdate( function( object ){\n                this.value.getInverse( object.modelViewMatrix );\n    } );\n\n    var modelViewMatrixInverseTranspose = new THREE.Uniform( new THREE.Matrix4() )\n            .onUpdate( function( object ){\n                this.value.getInverse( object.modelViewMatrix ).transpose();\n    } );\n\n    var modelViewProjectionMatrix = new THREE.Uniform( new THREE.Matrix4() )\n            .onUpdate( function( object ){\n                this.value.multiplyMatrices( me.cam.projectionMatrix, object.modelViewMatrix );\n    } );\n\n    var modelViewProjectionMatrixInverse = new THREE.Uniform( new THREE.Matrix4() )\n            .onUpdate( function( object ){\n                var tmpMatrix = new THREE.Matrix4();\n                tmpMatrix.multiplyMatrices(me.cam.projectionMatrix, object.modelViewMatrix);\n                this.value.getInverse(tmpMatrix);\n    } );\n\n    var projectionMatrix = new THREE.Uniform( new THREE.Matrix4() )\n            .onUpdate( function(  ){\n                this.value.copy( me.cam.projectionMatrix );\n    } );\n\n    var projectionMatrixInverse = new THREE.Uniform( new THREE.Matrix4() )\n            .onUpdate( function(  ){\n                this.value.getInverse( me.cam.projectionMatrix );\n    } );\n*/\n\n    var background = this.backgroundColors[this.opts.background.toLowerCase()];\n    //var near = 2 * this.maxD;\n    var near = 1.5 * this.maxD;\n    //var far = 2.5 * this.maxD;\n    var far = 3 * this.maxD;\n\n    var opacityValue = (opacity !== undefined) ? opacity : 1.0;\n\n    this.uniforms = THREE.UniformsUtils.merge([\n      THREE.UniformsLib.common,\n      {\n/*\n        modelViewMatrix: modelViewMatrix,\n        modelViewMatrixInverse: modelViewMatrixInverse,\n        modelViewMatrixInverseTranspose: modelViewMatrixInverseTranspose,\n        modelViewProjectionMatrix: modelViewProjectionMatrix,\n        modelViewProjectionMatrixInverse: modelViewProjectionMatrixInverse,\n        projectionMatrix: projectionMatrix,\n        projectionMatrixInverse: projectionMatrixInverse,\n*/\n\n        modelViewMatrix: { value: new THREE.Matrix4() },\n        modelViewMatrixInverse: { value: new THREE.Matrix4() },\n        modelViewMatrixInverseTranspose: { value: new THREE.Matrix4() },\n        modelViewProjectionMatrix: { value: new THREE.Matrix4() },\n        modelViewProjectionMatrixInverse: { value: new THREE.Matrix4() },\n        projectionMatrix: { value: new THREE.Matrix4() },\n        projectionMatrixInverse: { value: new THREE.Matrix4() },\n\n        //ambientLightColor: { type: \"v3\", value: [0.25, 0.25, 0.25] },\n        diffuse: { type: \"v3\", value: [1.0, 1.0, 1.0] },\n        emissive: { type: \"v3\", value: [0.0,0.0,0.0] },\n        roughness: { type: \"f\", value: 0.5 }, // 0.4\n        metalness: { type: \"f\", value: 0.3 }, // 0.5\n        opacity: { type: \"f\", value: opacityValue },\n        nearClip: { type: \"f\", value: 0.1 },\n        ortho: { type: \"f\", value: 0.0 },\n        shrink: { type: \"f\", value: 0.13 },\n        fogColor: { type: \"v3\", value: [background.r, background.g, background.b] },\n        fogNear: { type: \"f\", value: near },\n        fogFar: { type: \"f\", value: far },\n        fogDensity: { type: \"f\", value: 2.0 }\n      },\n        THREE.UniformsLib.ambient,\n        THREE.UniformsLib.lights\n    ]);\n\n    /*\n    //fog_pars_fragment\n    #ifdef USE_FOG\n        uniform vec3 fogColor;\n        #ifdef FOG_EXP2\n            uniform float fogDensity;\n        #else\n            uniform float fogNear;\n            uniform float fogFar;\n        #endif\n    #endif\n    */\n\n    this.defines = {\n        USE_COLOR: 1,\n        //PICKING: 1,\n        NEAR_CLIP: 1,\n        CAP: 1\n    };\n\n    if(this.opts['fog'] === 'yes') {\n        this.defines['USE_FOG'] = 1;\n        if(this.opts['camera'] === 'orthographic') {\n            this.defines['FOG_EXP2'] = 1;\n        }\n    }\n\n    if(this.bExtFragDepth) {\n        this.defines['USE_LOGDEPTHBUF_EXT'] = 1;\n    }\n};\n\niCn3D.prototype.drawImpostorShader = function () { var me = this;\n    this.setParametersForShader();\n\n    this.createImpostorShaderSphere(\"SphereImpostor\");\n    this.createImpostorShaderCylinder(\"CylinderImpostor\");\n    //this.createImpostorShaderCylinder(\"HyperballStickImpostor\");\n};\n\niCn3D.prototype.getShader = function (name) { var me = this;\n  var shaderText = $NGL_shaderTextHash[name];\n  var reInclude = /#include\\s+(\\S+)/gmi;\n\n  shaderText = shaderText.replace( reInclude, function( match, p1 ){\n\n        var chunk;\n        if(THREE.ShaderChunk.hasOwnProperty(p1)) {\n            chunk = THREE.ShaderChunk[ p1 ];\n        }\n\n        return chunk ? chunk : \"\";\n\n  } );\n\n  return shaderText;\n};\n\niCn3D.prototype.createImpostorShaderBase = function (shaderName, mapping, mappingIndices, data, attributeData, count, mappingSize, mappingIndicesSize, mappingItemSize) { var me = this;\n  var shaderMaterial =\n    new THREE.ShaderMaterial({\n      defines: me.defines,\n      uniforms:  me.uniforms,\n      vertexShader:   me.getShader(shaderName + \".vert\"),\n      fragmentShader: me.getShader(shaderName + \".frag\"),\n      depthTest: true,\n      depthWrite: true,\n      needsUpdate: true,\n      lights: true\n  });\n\n  shaderMaterial.extensions.fragDepth = true;\n\n  if(shaderName == 'CylinderImpostor') {\n      this.CylinderImpostorMaterial = shaderMaterial;\n  }\n  else if(shaderName == 'SphereImpostor') {\n      this.SphereImpostorMaterial = shaderMaterial;\n  }\n\n    //MappedBuffer\n    var attributeSize = count * mappingSize;\n\n    var n = count * mappingIndicesSize;\n    var TypedArray = attributeSize > 65535 ? Uint32Array : Uint16Array;\n    var index = new TypedArray( n );\n\n        //makeIndex();\n    var ix, it;\n\n    for( var v = 0; v < count; v++ ) {\n        ix = v * mappingIndicesSize;\n        it = v * mappingSize;\n\n        index.set( mappingIndices, ix );\n\n        for( var s = 0; s < mappingIndicesSize; ++s ){\n            index[ ix + s ] += it;\n        }\n    }\n\n\n    var geometry = new THREE.BufferGeometry();\n\n    // buffer.js\n    var dynamic = true;\n\n    if( index ){\n        geometry.setIndex(\n            new THREE.BufferAttribute( index, 1 )\n        );\n        geometry.getIndex().setDynamic( dynamic );\n    }\n\n    // add attributes from buffer.js\n    var itemSize = {\n        \"f\": 1, \"v2\": 2, \"v3\": 3, \"c\": 3\n    };\n\n    for( var name in attributeData ){\n\n        var buf;\n        var a = attributeData[ name ];\n\n            buf = new Float32Array(\n                attributeSize * itemSize[ a.type ]\n            );\n\n        geometry.addAttribute(\n            name,\n            new THREE.BufferAttribute( buf, itemSize[ a.type ] )\n                .setDynamic( dynamic )\n        );\n\n    }\n\n    // set attributes from mapped-buffer.js\n    var attributes = geometry.attributes;\n\n    var a, d, itemSize2, array, i, j;\n\n    for( var name in data ){\n\n        d = data[ name ];\n        a = attributes[ name ];\n        itemSize2 = a.itemSize;\n        array = a.array;\n\n        for( var k = 0; k < count; ++k ) {\n\n            n = k * itemSize2;\n            i = n * mappingSize;\n\n            for( var l = 0; l < mappingSize; ++l ) {\n\n                j = i + ( itemSize2 * l );\n\n                for( var m = 0; m < itemSize2; ++m ) {\n\n                    array[ j + m ] = d[ n + m ];\n\n                }\n\n            }\n\n        }\n\n        a.needsUpdate = true;\n\n    }\n\n    // makemapping\n    var aMapping = geometry.attributes.mapping.array;\n\n    for( var v = 0; v < count; v++ ) {\n        aMapping.set( mapping, v * mappingItemSize * mappingSize );\n    }\n\n    var mesh = new THREE.Mesh(geometry, shaderMaterial);\n\n    // important: https://stackoverflow.com/questions/21184061/mesh-suddenly-disappears-in-three-js-clipping\n    // You are moving the camera in the CPU. You are moving the vertices of the plane in the GPU\n    mesh.frustumCulled = false;\n\n    mesh.scale.x = mesh.scale.y = mesh.scale.z = 1.0;\n\n    if(shaderName == 'CylinderImpostor') {\n      mesh.type = 'Cylinder';\n    }\n    else if(shaderName == 'SphereImpostor') {\n      mesh.type = 'Sphere';\n    }\n\n    //mesh.onBeforeRender = this.onBeforeRender(this.renderer, this.scene, this.cam, geometry, shaderMaterial);\n    mesh.onBeforeRender = this.onBeforeRender;\n\n    this.mdlImpostor.add(mesh);\n\n    //this.objects.push(mesh);\n};\n\niCn3D.prototype.createImpostorShaderCylinder = function (shaderName) { var me = this;\n    var positions = new Float32Array( me.posArray );\n    var colors = new Float32Array( me.colorArray );\n    var positions2 = new Float32Array( me.pos2Array );\n    var colors2 = new Float32Array( me.color2Array );\n    var radii = new Float32Array( me.radiusArray );\n\n    // cylinder\n    var mapping = new Float32Array([\n        -1.0,  1.0, -1.0,\n        -1.0, -1.0, -1.0,\n         1.0,  1.0, -1.0,\n         1.0,  1.0,  1.0,\n         1.0, -1.0, -1.0,\n         1.0, -1.0,  1.0\n    ]);\n\n    var mappingIndices = new Uint16Array([\n        0, 1, 2,\n        1, 4, 2,\n        2, 4, 3,\n        4, 5, 3\n    ]);\n\n    var mappingIndicesSize = 12;\n    var mappingType = \"v3\";\n    var mappingSize = 6;\n    var mappingItemSize = 3;\n\n\n    var count = positions.length / 3;\n\n    var data = {\n        \"position1\": positions,\n        \"color\": colors,\n        \"position2\": positions2,\n        \"color2\": colors2,\n        \"radius\": radii\n    };\n\n    var attributeData = {\n        \"position1\": { type: \"v3\", value: null },\n        \"color\": { type: \"v3\", value: null },\n        \"position2\": { type: \"v3\", value: null },\n        \"color2\": { type: \"v3\", value: null },\n        \"radius\": { type: \"f\", value: null },\n        \"mapping\": { type: mappingType, value: null }\n    };\n\n    this.createImpostorShaderBase(shaderName, mapping, mappingIndices, data, attributeData, count, mappingSize, mappingIndicesSize, mappingItemSize);\n\n    data = null;\n    positions = null;\n    colors = null;\n    positions2 = null;\n    colors2 = null;\n    radii = null;\n\n  me.posArray = null;\n  me.colorArray = null;\n  me.pos2Array = null;\n  me.color2Array = null;\n  me.radiusArray = null;\n};\n\niCn3D.prototype.createImpostorShaderSphere = function (shaderName) { var me = this;\n    var positions = new Float32Array( me.posArraySphere );\n    var colors = new Float32Array( me.colorArraySphere );\n    var radii = new Float32Array( me.radiusArraySphere );\n\n    // sphere\n    var mapping = new Float32Array([\n        -1.0,  1.0,\n        -1.0, -1.0,\n         1.0,  1.0,\n         1.0, -1.0\n    ]);\n\n    var mappingIndices = new Uint16Array([\n        0, 1, 2,\n        1, 3, 2\n    ]);\n\n    var mappingIndicesSize = 6;\n    var mappingType = \"v2\";\n    var mappingSize = 4;\n    var mappingItemSize = 2;\n\n    var count = positions.length / 3;\n\n    var data = {\n        \"position\": positions,\n        \"color\": colors,\n        \"radius\": radii\n    };\n\n    var attributeData = {\n        \"position\": { type: \"v3\", value: null },\n        \"color\": { type: \"v3\", value: null },\n        \"radius\": { type: \"f\", value: null },\n        \"mapping\": { type: mappingType, value: null }\n    };\n\n    this.createImpostorShaderBase(shaderName, mapping, mappingIndices, data, attributeData, count, mappingSize, mappingIndicesSize, mappingItemSize);\n\n    data = null;\n    positions = null;\n    colors = null;\n    radii = null;\n\n  me.posArraySphere = null;\n  me.colorArraySphere = null;\n  me.radiusArraySphere = null;\n};\n\n/**\n * @author Jiyao Wang <wangjiy@ncbi.nlm.nih.gov> / https://github.com/ncbi/icn3d\n */\n\niCn3D.prototype.positionFromGeometry = function( mesh ){\n    var geometry = mesh.geometry;\n\n    var vertices = geometry.vertices;\n\n    var meshPosition = mesh.position;\n    var scale = mesh.scale;\n    var matrix = mesh.matrix;\n\n    var j, v3;\n    var n = vertices.length;\n    //var position = new Float32Array( n * 3 );\n    var position = [];\n\n    for( var v = 0; v < n; v++ ){\n\n        j = v * 3;\n\n        if(geometry.type == 'SphereGeometry' || geometry.type == 'BoxGeometry') {\n            v3 = vertices[v].clone().multiply(scale).add(meshPosition);\n        }\n        else if(geometry.type == 'CylinderGeometry') {\n            v3 = vertices[v].clone().applyMatrix4(matrix);\n        }\n        else {\n            v3 = vertices[v];\n        }\n\n        position[ j + 0 ] = v3.x;\n        position[ j + 1 ] = v3.y;\n        position[ j + 2 ] = v3.z;\n    }\n\n    return position;\n\n};\n\n\niCn3D.prototype.colorFromGeometry = function( mesh ){\n    var geometry = mesh.geometry;\n\n    var meshColor = new THREE.Color(1, 1, 1);\n    if(geometry.type == 'SphereGeometry' || geometry.type == 'BoxGeometry' || geometry.type == 'CylinderGeometry') {\n         if(mesh.material !== undefined) meshColor = mesh.material.color;\n    }\n\n    var faces = geometry.faces;\n    var vn = geometry.vertices.length;\n\n    var bSurfaceVertex = (geometry.type == 'Surface') ? true : false;\n\n    var j, f, c1, c2, c3;\n    var n = faces.length;\n    //var color = new Float32Array( vn * 3 );\n    var color = [];\n\n    for( var v = 0; v < n; v++ ){\n\n        f = faces[ v ];\n\n        if(geometry.type == 'Surface') {\n            c1 = f.vertexColors[0];\n            c2 = f.vertexColors[1];\n            c3 = f.vertexColors[2];\n        }\n        else if(geometry.type == 'SphereGeometry' || geometry.type == 'BoxGeometry' || geometry.type == 'CylinderGeometry') {\n            c1 = meshColor;\n            c2 = meshColor;\n            c3 = meshColor;\n        }\n        else {\n            c1 = f.color;\n            c2 = f.color;\n            c3 = f.color;\n        }\n\n        j = f.a * 3;\n        color[ j + 0 ] = c1.r;\n        color[ j + 1 ] = c1.g;\n        color[ j + 2 ] = c1.b;\n\n        j = f.b * 3;\n        color[ j + 0 ] = c2.r;\n        color[ j + 1 ] = c2.g;\n        color[ j + 2 ] = c2.b;\n\n        j = f.c * 3;\n        color[ j + 0 ] = c3.r;\n        color[ j + 1 ] = c3.g;\n        color[ j + 2 ] = c3.b;\n\n    }\n\n    return color;\n\n};\n\n\niCn3D.prototype.indexFromGeometry = function( mesh ){\n    var geometry = mesh.geometry;\n\n    var faces = geometry.faces;\n\n    var j, f;\n    var n = faces.length;\n    //var TypedArray = n * 3 > 65535 ? Uint32Array : Uint16Array;\n    //var index = new TypedArray( n * 3 );\n    var index = [];\n\n    for( var v = 0; v < n; v++ ){\n\n        j = v * 3;\n        f = faces[ v ];\n\n        index[ j + 0 ] = f.a;\n        index[ j + 1 ] = f.b;\n        index[ j + 2 ] = f.c;\n\n    }\n\n    return index;\n\n};\n\n\niCn3D.prototype.normalFromGeometry = function( mesh ){\n    var geometry = mesh.geometry;\n\n    var faces = geometry.faces;\n    var vn = geometry.vertices.length;\n\n    var j, f, nn, n1, n2, n3;\n    var n = faces.length;\n    //var normal = new Float32Array( vn * 3 );\n    var normal = [];\n\n    for( var v = 0; v < n; v++ ){\n\n        f = faces[ v ];\n        nn = f.vertexNormals;\n        n1 = nn[ 0 ];\n        n2 = nn[ 1 ];\n        n3 = nn[ 2 ];\n\n        j = f.a * 3;\n        normal[ j + 0 ] = n1.x;\n        normal[ j + 1 ] = n1.y;\n        normal[ j + 2 ] = n1.z;\n\n        j = f.b * 3;\n        normal[ j + 0 ] = n2.x;\n        normal[ j + 1 ] = n2.y;\n        normal[ j + 2 ] = n2.z;\n\n        j = f.c * 3;\n        normal[ j + 0 ] = n3.x;\n        normal[ j + 1 ] = n3.y;\n        normal[ j + 2 ] = n3.z;\n\n    }\n\n    return normal;\n\n};\n\niCn3D.prototype.hashvalue2array = function(hash) {\n    //return $.map(hash, function(v) { return v; });\n\n    var array = [];\n    for(var i in hash) {\n        array.push(hash[i]);\n    }\n\n    return array;\n};\n\niCn3D.prototype.drawSymmetryMates = function() {\n    //if(this.bInstanced) {\n    if(this.bInstanced && Object.keys(this.atoms).length * this.biomtMatrices.length > this.maxatomcnt) {\n        this.drawSymmetryMatesInstancing();\n    }\n    else {\n        this.drawSymmetryMatesNoInstancing();\n    }\n}\n\niCn3D.prototype.drawSymmetryMatesNoInstancing = function() {\n   if (this.biomtMatrices === undefined || this.biomtMatrices.length == 0) return;\n   var cnt = 1; // itself\n   var centerSum = this.center.clone();\n\n   var identity = new THREE.Matrix4();\n   identity.identity();\n\n   for (var i = 0; i < this.biomtMatrices.length; i++) {  // skip itself\n      var mat = this.biomtMatrices[i];\n      if (mat === undefined) continue;\n\n      // skip itself\n      if(mat.equals(identity)) continue;\n\n      var symmetryMate = this.mdl.clone();\n      symmetryMate.applyMatrix(mat);\n\n      this.mdl.add(symmetryMate);\n\n      symmetryMate = this.mdlImpostor.clone();\n      symmetryMate.applyMatrix(mat);\n\n      //symmetryMate.onBeforeRender = this.onBeforeRender;\n      for(var j = symmetryMate.children.length - 1; j >= 0; j--) {\n           var mesh = symmetryMate.children[j];\n           mesh.onBeforeRender = this.onBeforeRender;\n      }\n\n      this.mdlImpostor.add(symmetryMate);\n\n      //symmetryMate = this.mdlPicking.clone();\n      //symmetryMate.applyMatrix(mat);\n\n      //this.mdlPicking.add(symmetryMate);\n\n      symmetryMate = this.mdl_ghost.clone();\n      symmetryMate.applyMatrix(mat);\n\n      this.mdl_ghost.add(symmetryMate);\n\n      var center = this.center.clone();\n      center.applyMatrix4(mat);\n      centerSum.add(center);\n\n      ++cnt;\n   }\n\n   if(this.bSetInstancing === undefined || !this.bSetInstancing) {\n       this.maxD *= Math.sqrt(cnt);\n\n       this.center = centerSum.multiplyScalar(1.0 / cnt);\n\n       this.maxDAssembly = this.maxD;\n\n       this.centerAssembly = this.center.clone();\n\n       this.setCenter(this.center);\n\n       // reset cameara\n       this.setCamera();\n   }\n   else {\n       this.maxD = this.maxDAssembly;\n\n       this.center = this.centerAssembly.clone();\n\n       this.setCenter(this.center);\n\n       // reset cameara\n       this.setCamera();\n   }\n\n   this.bSetInstancing = true;\n};\n\niCn3D.prototype.createInstancedGeometry = function(mesh) {\n   var baseGeometry = mesh.geometry;\n\n   var geometry = new THREE.InstancedBufferGeometry();\n\n   var positionArray = [];\n   var normalArray = [];\n   var colorArray = [];\n   var indexArray = [];\n\n   var radiusArray = [];\n   var mappingArray = [];\n   var position2Array = [];\n   var color2Array = [];\n\n   if( baseGeometry.vertices && baseGeometry.faces ){\n       this.instancedMaterial = this.getInstancedMaterial('Instancing');\n\n       var positionArray2 = this.positionFromGeometry( mesh );\n       var normalArray2 = this.normalFromGeometry( mesh );\n       var colorArray2 = this.colorFromGeometry( mesh );\n       var indexArray2 = this.indexFromGeometry( mesh );\n\n       positionArray = positionArray.concat(positionArray2);\n       normalArray = normalArray.concat(normalArray2);\n       colorArray = colorArray.concat(colorArray2);\n       indexArray = indexArray.concat(indexArray2);\n\n       var bCylinderArray = [];\n       var bCylinder = (baseGeometry.type == 'CylinderGeometry') ? 1.0 : 0.0;\n       for(var i = 0, il = positionArray.length / 3; i < il; ++i) {\n           bCylinderArray.push(bCylinder);\n       }\n\n       geometry.addAttribute('position', new THREE.BufferAttribute(new Float32Array(positionArray), 3));\n       geometry.addAttribute('normal', new THREE.BufferAttribute(new Float32Array(normalArray), 3) );\n       geometry.addAttribute('color', new THREE.BufferAttribute(new Float32Array(colorArray), 3) );\n\n       geometry.addAttribute('cylinder', new THREE.BufferAttribute(new Float32Array(bCylinderArray), 1) );\n       geometry.setIndex(new THREE.BufferAttribute(new Uint32Array(indexArray), 1));\n\n       positionArray2 = null;\n       normalArray2 = null;\n       colorArray2 = null;\n       indexArray2 = null;\n\n   }\n   else if(this.bImpo && baseGeometry.attributes.color2 !== undefined) { // cylinder\n       this.instancedMaterial = this.getInstancedMaterial('CylinderInstancing');\n\n       var positionArray2 = this.hashvalue2array(baseGeometry.attributes.position1.array);\n       var colorArray2 = this.hashvalue2array(baseGeometry.attributes.color.array);\n\n       var positionArray2b = this.hashvalue2array(baseGeometry.attributes.position2.array);\n       var colorArray2b = this.hashvalue2array(baseGeometry.attributes.color2.array);\n\n       var indexArray2 = this.hashvalue2array(baseGeometry.index.array);\n       var radiusArray2 = this.hashvalue2array(baseGeometry.attributes.radius.array);\n       var mappingArray2 = this.hashvalue2array(baseGeometry.attributes.mapping.array);\n\n       positionArray = positionArray.concat(positionArray2);\n       colorArray = colorArray.concat(colorArray2);\n\n       position2Array = position2Array.concat(positionArray2b);\n       color2Array = color2Array.concat(colorArray2b);\n\n       indexArray = indexArray.concat(indexArray2);\n       radiusArray = radiusArray.concat(radiusArray2);\n       mappingArray = mappingArray.concat(mappingArray2);\n\n       geometry.addAttribute('position1', new THREE.BufferAttribute(new Float32Array(positionArray), 3));\n       geometry.addAttribute('color', new THREE.BufferAttribute(new Float32Array(colorArray), 3) );\n\n       geometry.addAttribute('position2', new THREE.BufferAttribute(new Float32Array(position2Array), 3));\n       geometry.addAttribute('color2', new THREE.BufferAttribute(new Float32Array(color2Array), 3) );\n\n       geometry.addAttribute('radius', new THREE.BufferAttribute(new Float32Array(radiusArray), 1) );\n       geometry.addAttribute('mapping', new THREE.BufferAttribute(new Float32Array(mappingArray), 3) );\n       geometry.setIndex(new THREE.BufferAttribute(new Uint32Array(indexArray), 1));\n\n       positionArray2 = null;\n       colorArray2 = null;\n       positionArray2b = null;\n       colorArray2b = null;\n       indexArray2 = null;\n       radiusArray2 = null;\n       mappingArray2 = null;\n   }\n   else if(this.bImpo && baseGeometry.attributes.color !== undefined) { // sphere\n       this.instancedMaterial = this.getInstancedMaterial('SphereInstancing');\n\n       var positionArray2 = this.hashvalue2array(baseGeometry.attributes.position.array);\n       var colorArray2 = this.hashvalue2array(baseGeometry.attributes.color.array);\n       var indexArray2 = this.hashvalue2array(baseGeometry.index.array);\n       var radiusArray2 = this.hashvalue2array(baseGeometry.attributes.radius.array);\n       var mappingArray2 = this.hashvalue2array(baseGeometry.attributes.mapping.array);\n\n       positionArray = positionArray.concat(positionArray2);\n       colorArray = colorArray.concat(colorArray2);\n       indexArray = indexArray.concat(indexArray2);\n       radiusArray = radiusArray.concat(radiusArray2);\n       mappingArray = mappingArray.concat(mappingArray2);\n\n       geometry.addAttribute('position', new THREE.BufferAttribute(new Float32Array(positionArray), 3));\n       geometry.addAttribute('color', new THREE.BufferAttribute(new Float32Array(colorArray), 3) );\n       geometry.addAttribute('radius', new THREE.BufferAttribute(new Float32Array(radiusArray), 1) );\n       geometry.addAttribute('mapping', new THREE.BufferAttribute(new Float32Array(mappingArray), 2) );\n       geometry.setIndex(new THREE.BufferAttribute(new Uint32Array(indexArray), 1));\n\n       positionArray2 = null;\n       colorArray2 = null;\n       indexArray2 = null;\n       radiusArray2 = null;\n       mappingArray2 = null;\n   }\n\n   positionArray = null;\n   normalArray = null;\n   colorArray = null;\n   indexArray = null;\n\n   radiusArray = null;\n   mappingArray = null;\n   position2Array = null;\n   color2Array = null;\n\n   var matricesAttribute1 = new THREE.InstancedBufferAttribute( new Float32Array( this.matricesElements1 ), 4 );\n   var matricesAttribute2 = new THREE.InstancedBufferAttribute( new Float32Array( this.matricesElements2 ), 4 );\n   var matricesAttribute3 = new THREE.InstancedBufferAttribute( new Float32Array( this.matricesElements3 ), 4 );\n   var matricesAttribute4 = new THREE.InstancedBufferAttribute( new Float32Array( this.matricesElements4 ), 4 );\n\n   geometry.addAttribute( 'matrix1', matricesAttribute1 );\n   geometry.addAttribute( 'matrix2', matricesAttribute2 );\n   geometry.addAttribute( 'matrix3', matricesAttribute3 );\n   geometry.addAttribute( 'matrix4', matricesAttribute4 );\n\n   return geometry;\n};\n\niCn3D.prototype.getInstancedMaterial = function(name) {\n   //var material = new THREE.RawShaderMaterial({\n   var material = new THREE.ShaderMaterial({\n      defines: this.defines,\n      uniforms:  this.uniforms,\n      vertexShader:   this.getShader(name + \".vert\"),\n      fragmentShader: this.getShader(name + \".frag\"),\n      depthTest: true,\n      depthWrite: true,\n      needsUpdate: true,\n      lights: true\n   });\n\n   material.extensions.fragDepth = true;\n   //https://stackoverflow.com/questions/33094496/three-js-shadermaterial-flatshading\n   material.extensions.derivatives = '#extension GL_OES_standard_derivatives : enable';\n\n   return material;\n}\n\niCn3D.prototype.drawSymmetryMatesInstancing = function() {\n   if (this.biomtMatrices === undefined || this.biomtMatrices.length == 0) return;\n   var cnt = 1; // itself\n   var centerSum = this.center.clone();\n\n   this.setParametersForShader();\n\n   if(this.bSetInstancing === undefined || !this.bSetInstancing) {\n       //this.offsets = [];\n       //this.orientations = [];\n       this.matricesElements1 = [];\n       this.matricesElements2 = [];\n       this.matricesElements3 = [];\n       this.matricesElements4 = [];\n\n       var identity = new THREE.Matrix4();\n       identity.identity();\n\n       for (var i = 0; i < this.biomtMatrices.length; i++) {  // skip itself\n          var mat = this.biomtMatrices[i];\n          if (mat === undefined) continue;\n\n          var matArray = mat.toArray();\n\n          // skip itself\n          if(mat.equals(identity)) continue;\n\n          this.matricesElements1.push(matArray[0], matArray[1], matArray[2], matArray[3]);\n          this.matricesElements2.push(matArray[4], matArray[5], matArray[6], matArray[7]);\n          this.matricesElements3.push(matArray[8], matArray[9], matArray[10], matArray[11]);\n          this.matricesElements4.push(matArray[12], matArray[13], matArray[14], matArray[15]);\n\n          var center = this.center.clone();\n          center.applyMatrix4(mat);\n          centerSum.add(center);\n\n          ++cnt;\n       }\n   }\n\n   for(var i = 0, il = this.mdl.children.length; i < il; ++i) {\n       var mesh = this.mdl.children[i];\n\n       if(mesh.type === 'Sprite') continue;\n\n       var geometry = this.createInstancedGeometry(mesh);\n\n       var mesh2 = new THREE.Mesh(geometry, this.instancedMaterial);\n\n       mesh2.onBeforeRender = this.onBeforeRender;\n\n       // important: https://stackoverflow.com/questions/21184061/mesh-suddenly-disappears-in-three-js-clipping\n       // You are moving the camera in the CPU. You are moving the vertices of the plane in the GPU\n       mesh2.frustumCulled = false;\n\n       geometry = undefined;\n\n       this.mdl.add(mesh2);\n   }\n\n   for(var i = 0, il = this.mdlImpostor.children.length; i < il; ++i) {\n       var mesh = this.mdlImpostor.children[i];\n\n       var geometry = this.createInstancedGeometry(mesh);\n\n/*\n       var material;\n       if(mesh.type == 'Sphere') {\n         material = this.SphereImpostorMaterial;\n       }\n       else { //if(mesh.type == 'Cylinder') {\n         material = this.CylinderImpostorMaterial;\n       }\n*/\n       var mesh2 = new THREE.Mesh(geometry, this.instancedMaterial);\n       //var mesh2 = new THREE.Mesh(geometry, material);\n\n       mesh2.onBeforeRender = this.onBeforeRender;\n\n       // important: https://stackoverflow.com/questions/21184061/mesh-suddenly-disappears-in-three-js-clipping\n       // You are moving the camera in the CPU. You are moving the vertices of the plane in the GPU\n       mesh2.frustumCulled = false;\n\n       geometry = null;\n\n       this.mdlImpostor.add(mesh2);\n   }\n\n   if(this.bSetInstancing === undefined || !this.bSetInstancing) {\n       this.maxD *= Math.sqrt(cnt);\n\n       this.center = centerSum.multiplyScalar(1.0 / cnt);\n\n       this.maxDAssembly = this.maxD;\n\n       this.centerAssembly = this.center.clone();\n\n       this.setCenter(this.center);\n\n       // reset cameara\n       this.setCamera();\n   }\n   else {\n       this.maxD = this.maxDAssembly;\n\n       this.center = this.centerAssembly.clone();\n\n       this.setCenter(this.center);\n\n       // reset cameara\n       this.setCamera();\n   }\n\n   this.bSetInstancing = true;\n};\n\n/**\n * @author Jiyao Wang <wangjiy@ncbi.nlm.nih.gov> / https://github.com/ncbi/icn3d\n */\n\niCn3D.prototype.cloneHash = function(from) {\n  var to = {};\n  for(var i in from) {\n    to[i] = from[i];\n  }\n\n  return to;\n};\n\niCn3D.prototype.residueName2Abbr = function(residueName) {\n  if(residueName !== undefined && residueName.charAt(0) !== ' ' && residueName.charAt(1) === ' ') {\n    //residueName = 'n' + residueName.charAt(0);\n    residueName = residueName.charAt(0);\n  }\n\n  switch(residueName) {\n    case '  A':\n      return 'A';\n      break;\n    case '  C':\n      return 'C';\n      break;\n    case '  G':\n      return 'G';\n      break;\n    case '  T':\n      return 'T';\n      break;\n    case '  U':\n      return 'U';\n      break;\n    case '  I':\n      return 'I';\n      break;\n    case ' DA':\n      return 'A';\n      break;\n    case ' DC':\n      return 'C';\n      break;\n    case ' DG':\n      return 'G';\n      break;\n    case ' DT':\n      return 'T';\n      break;\n    case ' DU':\n      return 'U';\n      break;\n    case ' DI':\n      return 'I';\n      break;\n    case 'ALA':\n      return 'A';\n      break;\n    case 'ARG':\n      return 'R';\n      break;\n    case 'ASN':\n      return 'N';\n      break;\n    case 'ASP':\n      return 'D';\n      break;\n    case 'CYS':\n      return 'C';\n      break;\n    case 'GLU':\n      return 'E';\n      break;\n    case 'GLN':\n      return 'Q';\n      break;\n    case 'GLY':\n      return 'G';\n      break;\n    case 'HIS':\n      return 'H';\n      break;\n    case 'ILE':\n      return 'I';\n      break;\n    case 'LEU':\n      return 'L';\n      break;\n    case 'LYS':\n      return 'K';\n      break;\n    case 'MET':\n      return 'M';\n      break;\n    case 'PHE':\n      return 'F';\n      break;\n    case 'PRO':\n      return 'P';\n      break;\n    case 'SER':\n      return 'S';\n      break;\n    case 'THR':\n      return 'T';\n      break;\n    case 'TRP':\n      return 'W';\n      break;\n    case 'TYR':\n      return 'Y';\n      break;\n    case 'VAL':\n      return 'V';\n      break;\n    case 'SEC':\n      return 'U';\n      break;\n//        case 'PYL':\n//          return 'O';\n//          break;\n\n    case 'HOH':\n      return 'O';\n      break;\n    case 'WAT':\n      return 'O';\n      break;\n\n    default:\n      return residueName;\n  }\n};\n\niCn3D.prototype.intHash = function(atoms1, atoms2) {\n    var results = {};\n\n    if(Object.keys(atoms1).length < Object.keys(atoms2).length) {\n        for (var i in atoms1) {\n            if (atoms2 !== undefined && atoms2[i]) {\n                results[i] = atoms1[i];\n            }\n        }\n    }\n    else {\n        for (var i in atoms2) {\n            if (atoms1 !== undefined && atoms1[i]) {\n                results[i] = atoms2[i];\n            }\n        }\n    }\n\n    atoms1 = {};\n    atoms2 = {};\n\n    return results;\n};\n\n// get atoms in allAtoms, but not in \"atoms\"\niCn3D.prototype.exclHash = function(includeAtoms, excludeAtoms) {\n    var results = {};\n\n    for (var i in includeAtoms) {\n        if (!(i in excludeAtoms)) {\n            results[i] = includeAtoms[i];\n        }\n    }\n\n    includeAtoms = {};\n    excludeAtoms = {};\n\n    return results;\n};\n\niCn3D.prototype.unionHash = function(atoms1, atoms2) {\n    // The commented-out version has a problem: atom1 became undefined.\n    //jQuery.extend(atoms1, atoms2);\n\n    //return atoms1;\n\n    return this.unionHashNotInPlace(atoms1, atoms2);\n};\n\niCn3D.prototype.unionHashNotInPlace = function(atoms1, atoms2) {\n    var results = jQuery.extend({}, atoms1, atoms2);\n    atoms1 = {};\n    atoms2 = {};\n\n    return results;\n};\n\niCn3D.prototype.intHash2Atoms = function(atoms1, atoms2) {\n    return this.hash2Atoms(this.intHash(atoms1, atoms2));\n};\n\n// get atoms in allAtoms, but not in \"atoms\"\niCn3D.prototype.exclHash2Atoms = function(includeAtoms, excludeAtoms) {\n    return this.hash2Atoms(this.exclHash(includeAtoms, excludeAtoms));\n};\n\niCn3D.prototype.unionHash2Atoms = function(atoms1, atoms2) {\n    return this.hash2Atoms(this.unionHash(atoms1, atoms2));\n};\n\niCn3D.prototype.hash2Atoms = function(hash) {\n    var atoms = {};\n    for(var i in hash) {\n      atoms[i] = this.atoms[i];\n    }\n\n    hash = {};\n\n    return atoms;\n};\n\n// from iview (http://istar.cse.cuhk.edu.hk/iview/)\niCn3D.prototype.exportCanvas = function () {\n    this.render();\n    window.open(this.renderer.domElement.toDataURL('image/png'));\n};\n\n// zoom\niCn3D.prototype.zoomIn = function (normalizedFactor) { // 0.1\n  var para = {};\n  para._zoomFactor = 1 - normalizedFactor;\n  para.update = true;\n  this.controls.update(para);\n  this.render();\n};\n\niCn3D.prototype.zoomOut = function (normalizedFactor) { // 0.1\n  var para = {};\n  para._zoomFactor = 1 + normalizedFactor;\n  para.update = true;\n  this.controls.update(para);\n  this.render();\n};\n\n// rotate\niCn3D.prototype.rotateLeft = function (degree) { // 5\n  var axis = new THREE.Vector3(0,1,0);\n  var angle = -degree / 180.0 * Math.PI;\n\n  axis.applyQuaternion( this.cam.quaternion ).normalize();\n\n  var quaternion = new THREE.Quaternion();\n  quaternion.setFromAxisAngle( axis, -angle );\n\n  var para = {};\n  para.quaternion = quaternion;\n  para.update = true;\n\n  this.controls.update(para);\n  this.render();\n};\n\niCn3D.prototype.rotateRight = function (degree) { // 5\n  var axis = new THREE.Vector3(0,1,0);\n  var angle = degree / 180.0 * Math.PI;\n\n  axis.applyQuaternion( this.cam.quaternion ).normalize();\n\n  var quaternion = new THREE.Quaternion();\n  quaternion.setFromAxisAngle( axis, -angle );\n\n  var para = {};\n  para.quaternion = quaternion;\n  para.update = true;\n\n  this.controls.update(para);\n  this.render();\n};\n\niCn3D.prototype.rotateUp = function (degree) { // 5\n  var axis = new THREE.Vector3(1,0,0);\n  var angle = -degree / 180.0 * Math.PI;\n\n  axis.applyQuaternion( this.cam.quaternion ).normalize();\n\n  var quaternion = new THREE.Quaternion();\n  quaternion.setFromAxisAngle( axis, -angle );\n\n  var para = {};\n  para.quaternion = quaternion;\n  para.update = true;\n\n  this.controls.update(para);\n  this.render();\n};\n\niCn3D.prototype.rotateDown = function (degree) { // 5\n  var axis = new THREE.Vector3(1,0,0);\n  var angle = degree / 180.0 * Math.PI;\n\n  axis.applyQuaternion( this.cam.quaternion ).normalize();\n\n  var quaternion = new THREE.Quaternion();\n  quaternion.setFromAxisAngle( axis, -angle );\n\n  var para = {};\n  para.quaternion = quaternion;\n  para.update = true;\n\n  this.controls.update(para);\n  this.render();\n};\n\n// translate\niCn3D.prototype.translateLeft = function (percentScreenSize) { // 1\n  var mouseChange = new THREE.Vector2(0,0);\n\n  // 1 means the full screen size\n  mouseChange.x -= percentScreenSize / 100.0;\n\n  var para = {};\n  para.mouseChange = mouseChange;\n  para.update = true;\n\n  this.controls.update(para);\n  this.render();\n};\n\niCn3D.prototype.translateRight = function (percentScreenSize) { // 1\n  var mouseChange = new THREE.Vector2(0,0);\n\n  mouseChange.x += percentScreenSize / 100.0;\n\n  var para = {};\n  para.mouseChange = mouseChange;\n  para.update = true;\n\n  this.controls.update(para);\n  this.render();\n};\n\niCn3D.prototype.translateUp = function (percentScreenSize) { // 1\n  var mouseChange = new THREE.Vector2(0,0);\n\n  mouseChange.y -= percentScreenSize / 100.0;\n\n  var para = {};\n  para.mouseChange = mouseChange;\n  para.update = true;\n\n  this.controls.update(para);\n  this.render();\n};\n\niCn3D.prototype.translateDown = function (percentScreenSize) { // 1\n  var mouseChange = new THREE.Vector2(0,0);\n\n  mouseChange.y += percentScreenSize / 100.0;\n\n  var para = {};\n  para.mouseChange = mouseChange;\n  para.update = true;\n\n  this.controls.update(para);\n  this.render();\n};\n\niCn3D.prototype.showPickingHilight = function(atom) {\n  if(!this.bShift && !this.bCtrl) this.removeHlObjects();\n\n  this.pickedAtomList = {};\n  if(this.pk === 1) {\n    this.pickedAtomList[atom.serial] = 1;\n  }\n  else if(this.pk === 2) {\n    var residueid = atom.structure + '_' + atom.chain + '_' + atom.resi;\n    this.pickedAtomList = this.residues[residueid];\n  }\n  else if(this.pk === 3) {\n    this.pickedAtomList = this.selectStrandHelixFromAtom(atom);\n  }\n  else if(this.pk === 4) {\n    var chainid = atom.structure + '_' + atom.chain;\n    this.pickedAtomList = this.chains[chainid];\n  }\n\n  if(this.pk === 0) {\n      this.bShowHighlight = false;\n  }\n  else {\n      this.bShowHighlight = true;\n  }\n\n  var intersectAtoms = (Object.keys(this.hAtoms).length == Object.keys(this.atoms).length) ? {} : this.intHash(this.hAtoms, this.pickedAtomList);\n  var intersectAtomsSize = Object.keys(intersectAtoms).length;\n\n  if(!this.bShift && !this.bCtrl) {\n      //if(intersectAtomsSize > 0) {\n      //    this.hAtoms = this.exclHash(this.hAtoms, this.pickedAtomList);\n      //}\n      //else {\n      //    this.hAtoms = this.cloneHash(this.pickedAtomList);\n      //}\n      this.hAtoms = this.cloneHash(this.pickedAtomList);\n  }\n  else if(this.bShift) { // select a range\n\n    if(this.prevPickedAtomList === undefined) {\n        this.hAtoms = this.unionHash(this.hAtoms, this.pickedAtomList);\n    }\n    else {\n        var prevAtom = this.getFirstAtomObj(this.prevPickedAtomList);\n        var currAtom = this.getFirstAtomObj(this.pickedAtomList);\n\n        var prevChainid = prevAtom.structure + '_' + prevAtom.chain;\n        var currChainid = currAtom.structure + '_' + currAtom.chain;\n\n        if(prevChainid != currChainid) {\n            this.hAtoms = this.unionHash(this.hAtoms, this.pickedAtomList);\n        }\n        else { // range in the same chain only\n            var combinedAtomList = this.unionHash(this.prevPickedAtomList, this.pickedAtomList);\n\n            var firstAtom = this.getFirstAtomObj(combinedAtomList);\n            var lastAtom = this.getLastAtomObj(combinedAtomList);\n\n            for(var i = firstAtom.serial; i <= lastAtom.serial; ++i) {\n                this.hAtoms[i] = 1;\n            }\n        }\n    }\n\n    // remember this shift selection\n    this.prevPickedAtomList = this.cloneHash(this.pickedAtomList);\n  }\n  else if(this.bCtrl) {\n      if(intersectAtomsSize > 0) {\n          this.hAtoms = this.exclHash(this.hAtoms, this.pickedAtomList);\n      }\n      else {\n          this.hAtoms = this.unionHash(this.hAtoms, this.pickedAtomList);\n      }\n  }\n\n  this.removeHlObjects();\n  this.addHlObjects();\n};\n\niCn3D.prototype.showPicking = function(atom, x, y) { var me = this;\n    this.showPickingBase(atom, x, y); // including render step\n};\n\niCn3D.prototype.showPickingBase = function(atom, x, y) { var me = this;\n  if(x === undefined && y === undefined) { // NOT mouse over\n      this.showPickingHilight(atom); // including render step\n\n/*\n      //var text = '#' + atom.structure + '.' + atom.chain + ':' + atom.resi + '@' + atom.name;\n      var residueText = '.' + atom.chain + ':' + atom.resi;\n      var text = residueText + '@' + atom.name;\n\n      var labels = {};\n      labels['picking'] = [];\n\n      var label = {};\n      label.position = new THREE.Vector3(atom.coord.x + 1, atom.coord.y + 1, atom.coord.z + 1); // shifted by 1\n\n      if(this.pk === 1) {\n        label.text = text;\n      }\n      else if(this.pk === 2) {\n        label.text = residueText;\n      }\n    //  else if(this.pk === 3) {\n    //    label.text = residueText;\n    //  }\n\n      if(this.pk === 1 || this.pk === 2) {\n          labels['picking'].push(label);\n\n          //http://www.johannes-raida.de/tutorials/three.js/tutorial13/tutorial13.htm\n          this.createLabelRepresentation(labels);\n      }\n*/\n\n\n  }\n};\n\niCn3D.prototype.removeHlObjects = function () {\n   // remove prevous highlight\n   for(var i in this.prevHighlightObjects) {\n       //this.mdlPicking.remove(this.prevHighlightObjects[i]);\n       this.mdl.remove(this.prevHighlightObjects[i]);\n   }\n\n   this.prevHighlightObjects = [];\n\n   // remove prevous highlight\n   for(var i in this.prevHighlightObjects_ghost) {\n       //this.mdlPicking.remove(this.prevHighlightObjects_ghost[i]);\n       this.mdl.remove(this.prevHighlightObjects_ghost[i]);\n   }\n\n   this.prevHighlightObjects_ghost = [];\n\n};\n\niCn3D.prototype.addHlObjects = function (color, bRender, atomsHash) {\n   if(color === undefined) color = this.hColor;\n   if(atomsHash === undefined) atomsHash = this.hAtoms;\n\n   this.applyDisplayOptions(this.opts, this.intHash(atomsHash, this.dAtoms), this.bHighlight);\n\n   if(bRender === undefined || bRender) this.render();\n};\n\niCn3D.prototype.resetOrientation = function() {\n    var bSet = false;\n    if(this.commands.length > 0) {\n        var commandTransformation = this.commands[0].split('|||');\n\n        if(commandTransformation.length == 2) {\n            var transformation = JSON.parse(commandTransformation[1]);\n\n            this._zoomFactor = transformation.factor;\n\n            this.mouseChange.x = transformation.mouseChange.x;\n            this.mouseChange.y = transformation.mouseChange.y;\n\n            this.quaternion._x = transformation.quaternion._x;\n            this.quaternion._y = transformation.quaternion._y;\n            this.quaternion._z = transformation.quaternion._z;\n            this.quaternion._w = transformation.quaternion._w;\n\n            bSet = true;\n        }\n    }\n\n    if(!bSet) {\n        this._zoomFactor = 1.0;\n        this.mouseChange = new THREE.Vector2(0,0);\n        this.quaternion = new THREE.Quaternion(0,0,0,1);\n    }\n\n    //reset this.maxD\n    this.maxD = this.oriMaxD;\n    this.center = this.oriCenter.clone();\n\n    if(this.ori_chemicalbinding == 'show') {\n        this.bSkipChemicalbinding = false;\n    }\n    else if(this.ori_chemicalbinding == 'hide') {\n        this.bSkipChemicalbinding = true;\n    }\n};\n\n // from iview (http://istar.cse.cuhk.edu.hk/iview/)\n iCn3D.prototype.getAtomsFromPosition = function(point, threshold) {\n    var i, atom;\n\n    if(threshold === undefined || threshold === null) {\n      threshold = 1;\n    }\n\n    for (i in this.atoms) {\n       var atom = this.atoms[i];\n\n       //if(atom.coord.x < point.x - threshold || atom.coord.x > point.x + threshold) continue;\n       //if(atom.coord.y < point.y - threshold || atom.coord.y > point.y + threshold) continue;\n       //if(atom.coord.z < point.z - threshold || atom.coord.z > point.z + threshold) continue;\n\n       if(this.ions.hasOwnProperty(i) && this.opts['ions'] === 'sphere') {\n           var adjust = this.vdwRadii[atom.elem];\n\n           if(Math.abs(atom.coord.x - point.x) - adjust > threshold) continue;\n           if(Math.abs(atom.coord.y - point.y) - adjust > threshold) continue;\n           if(Math.abs(atom.coord.z - point.z) - adjust > threshold) continue;\n       }\n       else {\n           if(atom.coord.x < point.x - threshold || atom.coord.x > point.x + threshold) continue;\n           if(atom.coord.y < point.y - threshold || atom.coord.y > point.y + threshold) continue;\n           if(atom.coord.z < point.z - threshold || atom.coord.z > point.z + threshold) continue;\n       }\n\n       return atom;\n    }\n\n    return null;\n };\n\niCn3D.prototype.getFirstAtomObj = function(atomsHash) {\n    if(atomsHash == undefined) return this.atoms[0];\n\n    var atomKeys = Object.keys(atomsHash);\n    var firstIndex = atomKeys[0];\n\n    return this.atoms[firstIndex];\n};\n\niCn3D.prototype.getFirstCalphaAtomObj = function(atomsHash) {\n    if(atomsHash == undefined) return this.atoms[0];\n\n    var firstIndex;\n\n    for(var i in atomsHash) {\n        if(this.atoms[i].name == 'CA') {\n            firstIndex = i;\n            break;\n        }\n    }\n\n    return (firstIndex !== undefined) ? this.atoms[firstIndex] : this.getFirstAtomObj(atomsHash);\n};\n\niCn3D.prototype.getLastAtomObj = function(atomsHash) {\n    var atomKeys = Object.keys(atomsHash);\n    var lastIndex = atomKeys[atomKeys.length - 1];\n\n    return this.atoms[lastIndex];\n};\n\n // http://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb\n iCn3D.prototype.hexToRgb = function (hex, a) {\n     var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n     return result ? {\n         r: parseInt(result[1], 16),\n         g: parseInt(result[2], 16),\n         b: parseInt(result[3], 16),\n         a: a\n     } : null;\n };\n\niCn3D.prototype.selectStrandHelixFromAtom = function(atom) {\n    var firstAtom = atom;\n    var lastAtom = atom;\n\n    var atomsHash = {};\n\n    // fill the beginning\n    var beginResi = firstAtom.resi;\n    if(!firstAtom.ssbegin) {\n        for(var i = firstAtom.resi - 1; i > 0; --i) {\n            var residueid = firstAtom.structure + '_' + firstAtom.chain + '_' + i;\n            if(!this.residues.hasOwnProperty(residueid)) break;\n\n            var atom = this.getFirstCalphaAtomObj(this.residues[residueid]);\n            beginResi = atom.resi;\n\n            if( (firstAtom.ss !== 'coil' && atom.ss === firstAtom.ss && atom.ssbegin)\n              || (firstAtom.ss === 'coil' && atom.ss !== firstAtom.ss) ) {\n                if(firstAtom.ss === 'coil' && atom.ss !== firstAtom.ss) {\n                    beginResi = atom.resi + 1;\n                }\n                break;\n            }\n        }\n\n        for(var i = beginResi; i <= firstAtom.resi; ++i) {\n            var residueid = firstAtom.structure + '_' + firstAtom.chain + '_' + i;\n            atomsHash = this.unionHash(atomsHash, this.hash2Atoms(this.residues[residueid]));\n        }\n    }\n\n    // fill the end\n    var endResi = lastAtom.resi;\n    var endChainResi = this.getLastAtomObj(this.chains[lastAtom.structure + '_' + lastAtom.chain]).resi;\n    for(var i = lastAtom.resi + 1; i <= endChainResi; ++i) {\n        var residueid = lastAtom.structure + '_' + lastAtom.chain + '_' + i;\n        if(!this.residues.hasOwnProperty(residueid)) break;\n\n        var atom = this.getFirstCalphaAtomObj(this.residues[residueid]);\n        endResi = atom.resi;\n\n        if( (lastAtom.ss !== 'coil' && atom.ss === lastAtom.ss && atom.ssend) || (lastAtom.ss === 'coil' && atom.ss !== lastAtom.ss) ) {\n            if(lastAtom.ss === 'coil' && atom.ss !== lastAtom.ss) {\n                endResi = atom.resi - 1;\n            }\n            break;\n        }\n    }\n\n    for(var i = lastAtom.resi + 1; i <= endResi; ++i) {\n        var residueid = lastAtom.structure + '_' + lastAtom.chain + '_' + i;\n        atomsHash = this.unionHash(atomsHash, this.hash2Atoms(this.residues[residueid]));\n    }\n\n    return atomsHash;\n};\n\niCn3D.prototype.addNonCarbonAtomLabels = function (atoms) {\n    var size = 18;\n    var background = \"#FFFFFF\";\n\n    var atomsHash = this.intHash(this.hAtoms, atoms);\n\n    if(this.labels['schematic'] === undefined) this.labels['schematic'] = [];\n\n    for(var i in atomsHash) {\n        var atom = this.atoms[i];\n\n        //if(!atom.het) continue;\n        if(!this.residues.hasOwnProperty(atom.structure + '_' + atom.chain + '_' + atom.resi)) continue;\n        if(atom.elem === 'C') continue;\n\n        var label = {}; // Each label contains 'position', 'text', 'color', 'background'\n\n        label.position = atom.coord;\n\n        label.bSchematic = 1;\n\n        label.text = atom.elem;\n        label.size = size;\n\n        label.color = \"#\" + atom.color.getHexString();\n        label.background = background;\n\n        this.labels['schematic'].push(label);\n    }\n\n    this.removeHlObjects();\n};\n\niCn3D.prototype.addResiudeLabels = function (atoms, bSchematic, alpha) {\n    var size = 18;\n    var background = \"#CCCCCC\";\n    if(alpha === undefined) alpha = 1.0;\n\n    var atomsHash = this.intHash(this.hAtoms, atoms);\n\n    if(bSchematic) {\n        if(this.labels['schematic'] === undefined) this.labels['schematic'] = [];\n    }\n    else {\n        if(this.labels['residue'] === undefined) this.labels['residue'] = [];\n    }\n\n    var prevReidueID = '';\n    for(var i in atomsHash) {\n        var atom = this.atoms[i];\n\n        // allow chemicals\n        //if(atom.het) continue;\n\n        var label = {}; // Each label contains 'position', 'text', 'color', 'background'\n\n        var currReidueID = atom.structure + '_' + atom.chain + '_' + atom.resi;\n\n        if( (!atom.het && (atom.name === 'CA' || atom.name === \"O3'\" || atom.name === \"O3*\") )\n          || this.water.hasOwnProperty(atom.serial)\n          || this.ions.hasOwnProperty(atom.serial)\n          || (this.chemicals.hasOwnProperty(atom.serial) && currReidueID !== prevReidueID) ) {\n            label.position = atom.coord;\n\n            label.bSchematic = 0;\n            if(bSchematic) label.bSchematic = 1;\n\n            label.text = this.residueName2Abbr(atom.resn);\n            label.size = size;\n\n            var atomColorStr = atom.color.getHexString().toUpperCase();\n            label.color = (atomColorStr === \"CCCCCC\" || atomColorStr === \"C8C8C8\") ? \"#888888\" : \"#\" + atomColorStr;\n            label.background = background;\n            //label.alpha = alpha; // this.hideLabels() didn't work. Remove this line for now\n\n            if(bSchematic) {\n                this.labels['schematic'].push(label);\n            }\n            else {\n                this.labels['residue'].push(label);\n            }\n        }\n\n        prevReidueID = currReidueID;\n    }\n\n    this.removeHlObjects();\n};\n\niCn3D.prototype.setCenter = function(center) {\n   this.mdl.position.set(0,0,0);\n   this.mdlImpostor.position.set(0,0,0);\n   this.mdl_ghost.position.set(0,0,0);\n\n   this.mdl.position.sub(center);\n   //this.mdlPicking.position.sub(center);\n   this.mdlImpostor.position.sub(center);\n   this.mdl_ghost.position.sub(center);\n};\n\niCn3D.prototype.getResiduesFromAtoms = function(atomsHash) {\n    var residuesHash = {};\n    for(var i in atomsHash) {\n        var residueid = this.atoms[i].structure + '_' + this.atoms[i].chain + '_' + this.atoms[i].resi;\n        residuesHash[residueid] = 1;\n    }\n\n    return residuesHash;\n};\n\niCn3D.prototype.getResiduesFromCalphaAtoms = function(atomsHash) {\n    var residuesHash = {};\n    for(var i in atomsHash) {\n        if((this.atoms[i].name == 'CA' && this.proteins.hasOwnProperty(i)) || !this.proteins.hasOwnProperty(i)) {\n            var residueid = this.atoms[i].structure + '_' + this.atoms[i].chain + '_' + this.atoms[i].resi;\n            residuesHash[residueid] = 1;\n        }\n    }\n\n    return residuesHash;\n};\n\n\n/*\n * JavaScript Canvas to Blob\n * https://github.com/blueimp/JavaScript-Canvas-to-Blob\n *\n * Copyright 2012, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n *\n * Based on stackoverflow user Stoive's code snippet:\n * http://stackoverflow.com/q/4998908\n */\n\n/* global atob, Blob, define */\n\n;(function (window) {\n  'use strict'\n\n  var CanvasPrototype =\n    window.HTMLCanvasElement && window.HTMLCanvasElement.prototype\n  var hasBlobConstructor =\n    window.Blob &&\n    (function () {\n      try {\n        return Boolean(new Blob())\n      } catch (e) {\n        return false\n      }\n    })()\n  var hasArrayBufferViewSupport =\n    hasBlobConstructor &&\n    window.Uint8Array &&\n    (function () {\n      try {\n        return new Blob([new Uint8Array(100)]).size === 100\n      } catch (e) {\n        return false\n      }\n    })()\n  var BlobBuilder =\n    window.BlobBuilder ||\n    window.WebKitBlobBuilder ||\n    window.MozBlobBuilder ||\n    window.MSBlobBuilder\n  var dataURIPattern = /^data:((.*?)(;charset=.*?)?)(;base64)?,/\n  var dataURLtoBlob =\n    (hasBlobConstructor || BlobBuilder) &&\n    window.atob &&\n    window.ArrayBuffer &&\n    window.Uint8Array &&\n    function (dataURI) {\n      var matches,\n        mediaType,\n        isBase64,\n        dataString,\n        byteString,\n        arrayBuffer,\n        intArray,\n        i,\n        bb\n      // Parse the dataURI components as per RFC 2397\n      matches = dataURI.match(dataURIPattern)\n      if (!matches) {\n        throw new Error('invalid data URI')\n      }\n      // Default to text/plain;charset=US-ASCII\n      mediaType = matches[2]\n        ? matches[1]\n        : 'text/plain' + (matches[3] || ';charset=US-ASCII')\n      isBase64 = !!matches[4]\n      dataString = dataURI.slice(matches[0].length)\n      if (isBase64) {\n        // Convert base64 to raw binary data held in a string:\n        byteString = atob(dataString)\n      } else {\n        // Convert base64/URLEncoded data component to raw binary:\n        byteString = decodeURIComponent(dataString)\n      }\n      // Write the bytes of the string to an ArrayBuffer:\n      arrayBuffer = new ArrayBuffer(byteString.length)\n      intArray = new Uint8Array(arrayBuffer)\n      for (i = 0; i < byteString.length; i += 1) {\n        intArray[i] = byteString.charCodeAt(i)\n      }\n      // Write the ArrayBuffer (or ArrayBufferView) to a blob:\n      if (hasBlobConstructor) {\n        return new Blob([hasArrayBufferViewSupport ? intArray : arrayBuffer], {\n          type: mediaType\n        })\n      }\n      bb = new BlobBuilder()\n      bb.append(arrayBuffer)\n      return bb.getBlob(mediaType)\n    }\n  if (window.HTMLCanvasElement && !CanvasPrototype.toBlob) {\n    if (CanvasPrototype.mozGetAsFile) {\n      CanvasPrototype.toBlob = function (callback, type, quality) {\n        var self = this\n        setTimeout(function () {\n          if (quality && CanvasPrototype.toDataURL && dataURLtoBlob) {\n            callback(dataURLtoBlob(self.toDataURL(type, quality)))\n          } else {\n            callback(self.mozGetAsFile('blob', type))\n          }\n        })\n      }\n    } else if (CanvasPrototype.toDataURL && dataURLtoBlob) {\n      CanvasPrototype.toBlob = function (callback, type, quality) {\n        var self = this\n        setTimeout(function () {\n          callback(dataURLtoBlob(self.toDataURL(type, quality)))\n        })\n      }\n    }\n  }\n  if (typeof define === 'function' && define.amd) {\n    define(function () {\n      return dataURLtoBlob\n    })\n  } else if (typeof module === 'object' && module.exports) {\n    module.exports = dataURLtoBlob\n  } else {\n    window.dataURLtoBlob = dataURLtoBlob\n  }\n})(window)\n\n/* FileSaver.js\n * A saveAs() FileSaver implementation.\n * 1.3.8\n * 2018-03-22 14:03:47\n *\n * By Eli Grey, https://eligrey.com\n * License: MIT\n *   See https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md\n */\n\n/*global self */\n/*jslint bitwise: true, indent: 4, laxbreak: true, laxcomma: true, smarttabs: true, plusplus: true */\n\n/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/src/FileSaver.js */\n\nvar saveAs = saveAs || (function(view) {\n    \"use strict\";\n    // IE <10 is explicitly unsupported\n    if (typeof view === \"undefined\" || typeof navigator !== \"undefined\" && /MSIE [1-9]\\./.test(navigator.userAgent)) {\n        return;\n    }\n    var\n          doc = view.document\n          // only get URL when necessary in case Blob.js hasn't overridden it yet\n        , get_URL = function() {\n            return view.URL || view.webkitURL || view;\n        }\n        , save_link = doc.createElementNS(\"http://www.w3.org/1999/xhtml\", \"a\")\n        , can_use_save_link = \"download\" in save_link\n        , click = function(node) {\n            var event = new MouseEvent(\"click\");\n            node.dispatchEvent(event);\n        }\n        , is_safari = /constructor/i.test(view.HTMLElement) || view.safari\n        , is_chrome_ios =/CriOS\\/[\\d]+/.test(navigator.userAgent)\n        , setImmediate = view.setImmediate || view.setTimeout\n        , throw_outside = function(ex) {\n            setImmediate(function() {\n                throw ex;\n            }, 0);\n        }\n        , force_saveable_type = \"application/octet-stream\"\n        // the Blob API is fundamentally broken as there is no \"downloadfinished\" event to subscribe to\n        , arbitrary_revoke_timeout = 1000 * 40 // in ms\n        , revoke = function(file) {\n            var revoker = function() {\n                if (typeof file === \"string\") { // file is an object URL\n                    get_URL().revokeObjectURL(file);\n                } else { // file is a File\n                    file.remove();\n                }\n            };\n            setTimeout(revoker, arbitrary_revoke_timeout);\n        }\n        , dispatch = function(filesaver, event_types, event) {\n            event_types = [].concat(event_types);\n            var i = event_types.length;\n            while (i--) {\n                var listener = filesaver[\"on\" + event_types[i]];\n                if (typeof listener === \"function\") {\n                    try {\n                        listener.call(filesaver, event || filesaver);\n                    } catch (ex) {\n                        throw_outside(ex);\n                    }\n                }\n            }\n        }\n        , auto_bom = function(blob) {\n            // prepend BOM for UTF-8 XML and text/* types (including HTML)\n            // note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n            //if (blob && /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\n            if (/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\n                return new Blob([String.fromCharCode(0xFEFF), blob], {type: blob.type});\n            }\n            return blob;\n        }\n        , FileSaver = function(blob, name, no_auto_bom) {\n            if (!no_auto_bom) {\n                blob = auto_bom(blob);\n            }\n            // First try a.download, then web filesystem, then object URLs\n            var\n                  filesaver = this\n                , type = (blob) ? blob.type : undefined\n                , force = type === force_saveable_type\n                , object_url\n                , dispatch_all = function() {\n                    dispatch(filesaver, \"writestart progress write writeend\".split(\" \"));\n                }\n                // on any filesys errors revert to saving with object URLs\n                , fs_error = function() {\n                    if ((is_chrome_ios || (force && is_safari)) && view.FileReader) {\n                        // Safari doesn't allow downloading of blob urls\n                        var reader = new FileReader();\n                        reader.onloadend = function() {\n                            var url = is_chrome_ios ? reader.result : reader.result.replace(/^data:[^;]*;/, 'data:attachment/file;');\n                            var popup = view.open(url, '_blank');\n                            if(!popup) view.location.href = url;\n                            url=undefined; // release reference before dispatching\n                            filesaver.readyState = filesaver.DONE;\n                            dispatch_all();\n                        };\n                        reader.readAsDataURL(blob);\n                        filesaver.readyState = filesaver.INIT;\n                        return;\n                    }\n                    // don't create more object URLs than needed\n                    if (!object_url) object_url = get_URL().createObjectURL(blob);\n                    if (force) {\n                        view.location.href = object_url;\n                    } else {\n                        var opened = view.open(object_url, \"_blank\");\n                        if (!opened) {\n                            // Apple does not allow window.open, see https://developer.apple.com/library/safari/documentation/Tools/Conceptual/SafariExtensionGuide/WorkingwithWindowsandTabs/WorkingwithWindowsandTabs.html\n                            view.location.href = object_url;\n                        }\n                    }\n                    filesaver.readyState = filesaver.DONE;\n                    dispatch_all();\n                    revoke(object_url);\n                }\n            ;\n            filesaver.readyState = filesaver.INIT;\n\n            if (can_use_save_link) {\n                if (!object_url) object_url = get_URL().createObjectURL(blob);\n                setImmediate(function() {\n                    save_link.href = object_url;\n                    save_link.download = name;\n                    click(save_link);\n                    dispatch_all();\n                    revoke(object_url);\n                    filesaver.readyState = filesaver.DONE;\n                }, 0);\n                return;\n            }\n\n            fs_error();\n        }\n        , FS_proto = FileSaver.prototype\n        , saveAs = function(blob, name, no_auto_bom) {\n            return new FileSaver(blob, name || blob.name || \"download\", no_auto_bom);\n        }\n    ;\n\n    // IE 10+ (native saveAs)\n    if (typeof navigator !== \"undefined\" && navigator.msSaveOrOpenBlob) {\n        return function(blob, name, no_auto_bom) {\n            name = name || blob.name || \"download\";\n\n            if (!no_auto_bom) {\n                blob = auto_bom(blob);\n            }\n            return navigator.msSaveOrOpenBlob(blob, name);\n        };\n    }\n\n    // todo: detect chrome extensions & packaged apps\n    //save_link.target = \"_blank\";\n\n    FS_proto.abort = function(){};\n    FS_proto.readyState = FS_proto.INIT = 0;\n    FS_proto.WRITING = 1;\n    FS_proto.DONE = 2;\n\n    FS_proto.error =\n    FS_proto.onwritestart =\n    FS_proto.onprogress =\n    FS_proto.onwrite =\n    FS_proto.onabort =\n    FS_proto.onerror =\n    FS_proto.onwriteend =\n        null;\n\n    return saveAs;\n}(\n       typeof self !== \"undefined\" && self\n    || typeof window !== \"undefined\" && window\n    || this\n));\n\n/*! marchingcube.js\n * @author David Koes  / https://github.com/3dmol/3Dmol.js/tree/master/3Dmol\n * Modified by Jiyao Wang / https://github.com/ncbi/icn3d\n */\n\nvar $3Dmol = $3Dmol || {};\n\n//Encapsulate marching cube algorithm for isosurface generation\n// (currently used by protein surface rendering and generic volumetric data reading)\n$3Dmol.MarchingCubeInitializer = function() {\n\n    //Marching cube algorithm - assume data has been pre-treated so isovalue is 0\n    // (i.e. select points greater than 0)\n    //origin -  vector of origin of volumetric data (default is (0,0,0))\n    // nX, nY, nZ - specifies number of voxels in each dimension\n    // scale - cube diagonal unit vector scale (3Dmol vector) (specifying distance between data points); diagonal of cube\n    // - default is 1 - assumes unit cube (1,1,1) diag)\n    // fulltable - if true, use full marching cubes and tritables - else use trimmed table (e.g. surf render)\n    // voxel - if true, draws with a blocky voxel style (default false)\n    // verts, faces - vertex and face arrays to fill up\n\n    //to match with protein surface...\n    var ISDONE = 2;\n    var my = {};\n\n    my.march = function(data, verts, faces, spec) {\n\n        var fulltable = !!(spec.fulltable);\n        var origin = (spec.hasOwnProperty('origin') && spec.origin.hasOwnProperty('x')) ? spec.origin : {x:0, y:0, z:0};\n        var voxel = !!(spec.voxel);\n        var transform = spec.matrix; //if this is set, it overrides origin and unitCube\n\n        var nX = spec.nX || 0;\n        var nY = spec.nY || 0;\n        var nZ = spec.nZ || 0;\n\n        var scale = spec.scale || 1.0;\n        var unitCube = null;\n        if(spec.unitCube) {\n            unitCube = spec.unitCube;\n        } else {\n            unitCube = {x:scale,y:scale,z:scale};\n        }\n\n        //keep track of calculated vertices to avoid repeats\n        var vertnums = new Int32Array(nX*nY*nZ);\n\n        var i, il;\n\n        for (i = 0, il = vertnums.length; i < il; ++i)\n            vertnums[i] = -1;\n\n        // create (or retrieve) a vertex at the appropriate point for\n        // the edge (p1,p2)\n\n        var getVertex = function(i, j, k, code, p1, p2) {\n            var pt = {x:0,y:0,z:0};\n            var val1 = !!(code & (1 << p1));\n            var val2 = !!(code & (1 << p2));\n\n            // p1 if they are the same or if !val1\n            var p = p1;\n            if (!val1 && val2)\n                p = p2;\n\n            // adjust i,j,k by p\n            if (p & 1)\n                k++;\n            if (p & 2)\n                j++;\n            if (p & 4)\n                i++;\n\n            if(transform) {\n                pt = new $3Dmol.Vector3(i,j,k);\n                pt = pt.applyMatrix4(transform);\n                pt = {x: pt.x, y: pt.y, z: pt.z}; //remove vector gunk\n            } else {\n                pt.x = origin.x+unitCube.x*i;\n                pt.y = origin.y+unitCube.y*j;\n                pt.z = origin.z+unitCube.z*k;\n            }\n\n            var index = ((nY * i) + j) * nZ + k;\n\n            //Have to add option to do voxels\n            if (!voxel) {\n\n                if (vertnums[index] < 0) // not created yet\n                {\n                    vertnums[index] = verts.length;\n                    verts.push( pt );\n                }\n                return vertnums[index];\n\n            }\n\n            else {\n                verts.push(pt);\n                return verts.length - 1;\n            }\n\n        };\n\n        var intersects = new Int32Array(12);\n\n        var etable = (fulltable) ? edgeTable2 : edgeTable;\n        var tritable = (fulltable) ? triTable2 : triTable;\n\n        //Run marching cubes algorithm\n        for (i = 0; i < nX-1; ++i) {\n\n            for (var j = 0; j < nY-1; ++j){\n\n                for (var k = 0; k < nZ-1; ++k){\n\n                    var code = 0;\n\n                    for (var p = 0; p < 8; ++p) {\n                        var index = ((nY * (i + ((p & 4) >> 2))) + j + ((p & 2) >> 1)) *\n                                        nZ + k + (p & 1);\n\n                        //TODO: Need to fix vpBits in protein surface for this to work\n                        var val = !!(data[index] & ISDONE);\n                        //var val = !!(data[index] > 0);\n\n                        code |= val << p;\n                    }\n\n                    if (code === 0 || code === 255)\n                        continue;\n\n                    var ecode = etable[code];\n\n                    if (ecode === 0)\n                        continue;\n\n                    var ttable = tritable[code];\n\n                    if (ecode & 1)\n                        intersects[0] = getVertex(i, j, k, code, 0, 1);\n                    if (ecode & 2)\n                        intersects[1] = getVertex(i, j, k, code, 1, 3);\n                    if (ecode & 4)\n                        intersects[2] = getVertex(i, j, k, code, 3, 2);\n                    if (ecode & 8)\n                        intersects[3] = getVertex(i, j, k, code, 2, 0);\n                    if (ecode & 16)\n                        intersects[4] = getVertex(i, j, k, code, 4, 5);\n                    if (ecode & 32)\n                        intersects[5] = getVertex(i, j, k, code, 5, 7);\n                    if (ecode & 64)\n                        intersects[6] = getVertex(i, j, k, code, 7, 6);\n                    if (ecode & 128)\n                        intersects[7] = getVertex(i, j, k, code, 6, 4);\n                    if (ecode & 256)\n                        intersects[8] = getVertex(i, j, k, code, 0, 4);\n                    if (ecode & 512)\n                        intersects[9] = getVertex(i, j, k, code, 1, 5);\n                    if (ecode & 1024)\n                        intersects[10] = getVertex(i, j, k, code, 3, 7);\n                    if (ecode & 2048)\n                        intersects[11] = getVertex(i, j, k, code, 2, 6);\n\n                    for (var t = 0; t < ttable.length; t += 3) {\n\n                        var a = intersects[ttable[t]],\n                            b = intersects[ttable[t+1]],\n                            c = intersects[ttable[t+2]];\n\n                        if (voxel && t >= 3) {\n                            verts.push(verts[a]); a = verts.length - 1;\n                            verts.push(verts[b]); b = verts.length - 1;\n                            verts.push(verts[c]); c = verts.length - 1;\n                        }\n\n\n                        faces.push(a); faces.push(b); faces.push(c);\n                    }\n\n                }\n\n            }\n\n        }\n\n\n    };\n\n    my.laplacianSmooth = function(numiter, verts, faces) {\n            var tps = new Array(verts.length);\n            var i, il, j, jl, k, kl;\n            for (i = 0, il = verts.length; i < il; i++)\n                    tps[i] = {\n                        x : 0,\n                        y : 0,\n                        z : 0\n                    };\n            var vertdeg = new Array(20);\n            var flagvert;\n            for (i = 0; i < 20; i++)\n                    vertdeg[i] = new Array(verts.length);\n            for (i = 0, il = verts.length; i < il; i++)\n                    vertdeg[0][i] = 0;\n            for (i = 0, il = faces.length / 3; i < il; i++) {\n                var aoffset = i*3, boffset = i*3 + 1, coffset = i*3 + 2;\n                flagvert = true;\n                for (j = 0, jl = vertdeg[0][faces[aoffset]]; j < jl; j++) {\n                    if (faces[boffset] == vertdeg[j + 1][faces[aoffset]]) {\n                        flagvert = false;\n                        break;\n                    }\n                }\n                if (flagvert) {\n                    vertdeg[0][faces[aoffset]]++;\n                    vertdeg[vertdeg[0][faces[aoffset]]][faces[aoffset]] = faces[boffset];\n                }\n                flagvert = true;\n                for (j = 0, jl = vertdeg[0][faces[aoffset]]; j < jl; j++) {\n                    if (faces[coffset] == vertdeg[j + 1][faces[aoffset]]) {\n                        flagvert = false;\n                        break;\n                    }\n                }\n                if (flagvert) {\n                    vertdeg[0][faces[aoffset]]++;\n                    vertdeg[vertdeg[0][faces[aoffset]]][faces[aoffset]] = faces[coffset];\n                }\n                // b\n                flagvert = true;\n                for (j = 0, jl = vertdeg[0][faces[boffset]]; j < jl; j++) {\n                    if (faces[aoffset] == vertdeg[j + 1][faces[boffset]]) {\n                        flagvert = false;\n                        break;\n                    }\n                }\n                if (flagvert) {\n                    vertdeg[0][faces[boffset]]++;\n                    vertdeg[vertdeg[0][faces[boffset]]][faces[boffset]] = faces[aoffset];\n                }\n                flagvert = true;\n                for (j = 0, jl = vertdeg[0][faces[boffset]]; j < jl; j++) {\n                    if (faces[coffset] == vertdeg[j + 1][faces[boffset]]) {\n                        flagvert = false;\n                        break;\n                    }\n                }\n                if (flagvert) {\n                    vertdeg[0][faces[boffset]]++;\n                    vertdeg[vertdeg[0][faces[boffset]]][faces[boffset]] = faces[coffset];\n                }\n                // c\n                flagvert = true;\n                for (j = 0; j < vertdeg[0][faces[coffset]]; j++) {\n                    if (faces[aoffset] == vertdeg[j + 1][faces[coffset]]) {\n                        flagvert = false;\n                        break;\n                    }\n                }\n                if (flagvert) {\n                    vertdeg[0][faces[coffset]]++;\n                    vertdeg[vertdeg[0][faces[coffset]]][faces[coffset]] = faces[aoffset];\n                }\n                flagvert = true;\n                for (j = 0, jl = vertdeg[0][faces[coffset]]; j < jl; j++) {\n                    if (faces[boffset] == vertdeg[j + 1][faces[coffset]]) {\n                        flagvert = false;\n                        break;\n                    }\n                }\n                if (flagvert) {\n                    vertdeg[0][faces[coffset]]++;\n                    vertdeg[vertdeg[0][faces[coffset]]][faces[coffset]] = faces[boffset];\n                }\n            }\n\n            var wt = 1.00;\n            var wt2 = 0.50;\n            var ssign;\n            var scaleFactor = 1;\n            var outwt = 0.75 / (scaleFactor + 3.5); // area-preserving\n            for (k = 0; k < numiter; k++) {\n                    for (i = 0, il = verts.length; i < il; i++) {\n                            if (vertdeg[0][i] < 3) {\n                                    tps[i].x = verts[i].x;\n                                    tps[i].y = verts[i].y;\n                                    tps[i].z = verts[i].z;\n                            } else if (vertdeg[0][i] == 3 || vertdeg[0][i] == 4) {\n                                    tps[i].x = 0;\n                                    tps[i].y = 0;\n                                    tps[i].z = 0;\n                                    for (j = 0, jl = vertdeg[0][i]; j < jl; j++) {\n                                            tps[i].x += verts[vertdeg[j + 1][i]].x;\n                                            tps[i].y += verts[vertdeg[j + 1][i]].y;\n                                            tps[i].z += verts[vertdeg[j + 1][i]].z;\n                                    }\n                                    tps[i].x += wt2 * verts[i].x;\n                                    tps[i].y += wt2 * verts[i].y;\n                                    tps[i].z += wt2 * verts[i].z;\n                                    tps[i].x /= wt2 + vertdeg[0][i];\n                                    tps[i].y /= wt2 + vertdeg[0][i];\n                                    tps[i].z /= wt2 + vertdeg[0][i];\n                            } else {\n                                    tps[i].x = 0;\n                                    tps[i].y = 0;\n                                    tps[i].z = 0;\n                                    for (j = 0, jl = vertdeg[0][i]; j < jl; j++) {\n                                            tps[i].x += verts[vertdeg[j + 1][i]].x;\n                                            tps[i].y += verts[vertdeg[j + 1][i]].y;\n                                            tps[i].z += verts[vertdeg[j + 1][i]].z;\n                                    }\n                                    tps[i].x += wt * verts[i].x;\n                                    tps[i].y += wt * verts[i].y;\n                                    tps[i].z += wt * verts[i].z;\n                                    tps[i].x /= wt + vertdeg[0][i];\n                                    tps[i].y /= wt + vertdeg[0][i];\n                                    tps[i].z /= wt + vertdeg[0][i];\n                            }\n                    }\n                    for (i = 0, il = verts.length; i < il; i++) {\n                            verts[i].x = tps[i].x;\n                            verts[i].y = tps[i].y;\n                            verts[i].z = tps[i].z;\n                    }\n                    /*\n                     * computenorm(); for (var i = 0; i < vertnumber; i++) { if\n                     * (verts[i].inout) ssign = 1; else ssign = -1; verts[i].x += ssign *\n                     * outwt * verts[i].pn.x; verts[i].y += ssign * outwt *\n                     * verts[i].pn.y; verts[i].z += ssign * outwt * verts[i].pn.z; }\n                     */\n            }\n    };\n\n\n    /*\n     * These tables are based off those by Paul Bourke and Geoffrey Heller:\n     * http://paulbourke.net/geometry/polygonise/\n     * http://paulbourke.net/geometry/polygonise/table2.txt\n     *\n     * However, they have been substantially modified to reflect a more\n     * sensible corner numbering scheme and the discrete nature of our voxel data\n     * (resulting in fewer faces).\n     */\n    my.edgeTable = [ 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,\n            0xb00, 0x0, 0x0, 0x0, 0x700, 0x0, 0xd00, 0xe00, 0xf00, 0x0, 0x0, 0x0,\n            0x8a, 0x0, 0x15, 0x0, 0x86, 0x0, 0x0, 0x0, 0x28c, 0x0, 0x813, 0xf19,\n            0xe10, 0x0, 0x0, 0x0, 0x2a, 0x0, 0x0, 0x0, 0x126, 0x0, 0x0, 0x15, 0x1c,\n            0x0, 0xf23, 0x419, 0xd20, 0x0, 0xa8, 0xa2, 0xaa, 0x0, 0x285, 0x9ab,\n            0x8a2, 0x0, 0x2af, 0x125, 0xac, 0xfaa, 0xea3, 0xda9, 0xca0, 0x0, 0x0,\n            0x0, 0x0, 0x0, 0x45, 0x0, 0x384, 0x0, 0x0, 0x0, 0x700, 0x8a, 0x83,\n            0x648, 0x780, 0x0, 0x51, 0x0, 0x81a, 0x54, 0x55, 0x54, 0x56, 0x0, 0x51,\n            0x0, 0xe5c, 0x14a, 0x451, 0x759, 0x650, 0x0, 0x0, 0x0, 0x2a, 0x0, 0x45,\n            0x0, 0x1f6, 0x0, 0x0, 0x15, 0xdfc, 0x8a, 0x7f3, 0x4f9, 0x5f0, 0xb00,\n            0x68, 0x921, 0x6a, 0x348, 0x245, 0x16f, 0x66, 0xb00, 0xe6f, 0xd65,\n            0xc6c, 0x76a, 0x663, 0x569, 0x460, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,\n            0xf46, 0x0, 0x0, 0x45, 0x24c, 0x2a, 0x823, 0x29, 0xb40, 0x0, 0x0, 0x0,\n            0x6ba, 0x0, 0x8f5, 0xfff, 0xef6, 0x0, 0xff, 0x2f5, 0x2fc, 0x9ea, 0x8f3,\n            0xbf9, 0xaf0, 0x0, 0x0, 0x51, 0x152, 0x0, 0xf55, 0x45f, 0xd56, 0x54,\n            0x357, 0x55, 0x154, 0x852, 0xb53, 0x59, 0x950, 0x700, 0x2c8, 0xc2,\n            0x48a, 0xfc4, 0xec5, 0xdcf, 0xcc6, 0x2c4, 0x2cf, 0xc5, 0xcc, 0xbca,\n            0xac3, 0x9c9, 0x8c0, 0x0, 0x0, 0x0, 0x0, 0xa8, 0x1a4, 0xa8, 0x7a6,\n            0xa2, 0xa2, 0x2a4, 0xbac, 0xaa, 0xa3, 0x2a8, 0x3a0, 0xd00, 0xc18,\n            0xd00, 0xe3a, 0x34, 0x35, 0x73f, 0x636, 0x924, 0x83f, 0xb35, 0xa3c,\n            0x12a, 0x33, 0x339, 0x230, 0xe00, 0xe00, 0xc12, 0xd9a, 0x684, 0x795,\n            0x49f, 0x596, 0x92, 0xb9f, 0x815, 0x99c, 0x9a, 0x393, 0x99, 0x190,\n            0xf00, 0xe08, 0xd01, 0xc0a, 0x704, 0x605, 0x50f, 0x406, 0xb02, 0xa0f,\n            0x905, 0x80c, 0x30a, 0x203, 0x109, 0x0 ];\n\n    var edgeTable = new Uint32Array(my.edgeTable);\n\n    var triTable = my.triTable = [ [], [], [], [], [], [], [], [ 11, 9, 8 ], [], [], [],\n            [ 8, 10, 9 ], [], [ 10, 8, 11 ], [ 9, 11, 10 ],\n            [ 8, 10, 9, 8, 11, 10 ], [], [], [], [ 1, 7, 3 ], [], [ 4, 2, 0 ], [],\n            [ 2, 1, 7 ], [], [], [], [ 2, 7, 3, 2, 9, 7 ], [],\n            [ 1, 4, 11, 1, 0, 4 ], [ 3, 8, 0, 11, 9, 4, 11, 10, 9 ],\n            [ 4, 11, 9, 11, 10, 9 ], [], [], [], [ 5, 3, 1 ], [], [], [],\n            [ 2, 5, 8, 2, 1, 5 ], [], [], [ 2, 4, 0 ], [ 3, 2, 4 ], [],\n            [ 0, 9, 1, 8, 10, 5, 8, 11, 10 ], [ 3, 4, 0, 3, 10, 4 ],\n            [ 5, 8, 10, 8, 11, 10 ], [], [ 3, 5, 7 ], [ 7, 1, 5 ],\n            [ 1, 7, 3, 1, 5, 7 ], [], [ 9, 2, 0, 9, 7, 2 ],\n            [ 0, 3, 8, 1, 7, 11, 1, 5, 7 ], [ 11, 1, 7, 1, 5, 7 ], [],\n            [ 9, 1, 0, 5, 3, 2, 5, 7, 3 ], [ 8, 2, 5, 8, 0, 2 ],\n            [ 2, 5, 3, 5, 7, 3 ], [ 3, 9, 1, 3, 8, 9, 7, 11, 10, 7, 10, 5 ],\n            [ 9, 1, 0, 10, 7, 11, 10, 5, 7 ], [ 3, 8, 0, 7, 10, 5, 7, 11, 10 ],\n            [ 11, 5, 7, 11, 10, 5 ], [], [], [], [], [], [ 0, 6, 2 ], [],\n            [ 7, 2, 9, 7, 9, 8 ], [], [], [], [ 8, 10, 9 ], [ 7, 1, 3 ],\n            [ 7, 1, 0 ], [ 6, 9, 3, 6, 10, 9 ], [ 7, 10, 8, 10, 9, 8 ], [],\n            [ 6, 0, 4 ], [], [ 11, 1, 4, 11, 3, 1 ], [ 2, 4, 6 ],\n            [ 2, 0, 4, 2, 4, 6 ], [ 2, 4, 6 ], [ 1, 4, 2, 4, 6, 2 ], [],\n            [ 6, 0, 4 ], [], [ 2, 11, 3, 6, 9, 4, 6, 10, 9 ], [ 8, 6, 1, 8, 1, 3 ],\n            [ 10, 0, 6, 0, 4, 6 ], [ 8, 0, 3, 9, 6, 10, 9, 4, 6 ],\n            [ 10, 4, 6, 10, 9, 4 ], [], [], [], [ 5, 3, 1 ], [], [ 0, 6, 2 ], [],\n            [ 7, 4, 8, 5, 2, 1, 5, 6, 2 ], [], [], [ 2, 4, 0 ],\n            [ 7, 4, 8, 2, 11, 3, 10, 5, 6 ], [ 7, 1, 3 ],\n            [ 5, 6, 10, 0, 9, 1, 8, 7, 4 ], [ 5, 6, 10, 7, 0, 3, 7, 4, 0 ],\n            [ 10, 5, 6, 4, 8, 7 ], [ 9, 11, 8 ], [ 3, 5, 6 ],\n            [ 0, 5, 11, 0, 11, 8 ], [ 6, 3, 5, 3, 1, 5 ], [ 3, 9, 6, 3, 8, 9 ],\n            [ 9, 6, 0, 6, 2, 0 ], [ 0, 3, 8, 2, 5, 6, 2, 1, 5 ],\n            [ 1, 6, 2, 1, 5, 6 ], [ 9, 11, 8 ], [ 1, 0, 9, 6, 10, 5, 11, 3, 2 ],\n            [ 6, 10, 5, 2, 8, 0, 2, 11, 8 ], [ 3, 2, 11, 10, 5, 6 ],\n            [ 10, 5, 6, 9, 3, 8, 9, 1, 3 ], [ 0, 9, 1, 5, 6, 10 ],\n            [ 8, 0, 3, 10, 5, 6 ], [ 10, 5, 6 ], [], [], [], [], [], [], [],\n            [ 1, 10, 2, 9, 11, 6, 9, 8, 11 ], [], [], [ 6, 0, 2 ],\n            [ 3, 6, 9, 3, 2, 6 ], [ 3, 5, 1 ], [ 0, 5, 1, 0, 11, 5 ], [ 0, 3, 5 ],\n            [ 6, 9, 11, 9, 8, 11 ], [], [], [], [ 4, 5, 9, 7, 1, 10, 7, 3, 1 ], [],\n            [ 11, 6, 7, 2, 4, 5, 2, 0, 4 ],\n            [ 11, 6, 7, 8, 0, 3, 1, 10, 2, 9, 4, 5 ],\n            [ 6, 7, 11, 1, 10, 2, 9, 4, 5 ], [],\n            [ 4, 1, 0, 4, 5, 1, 6, 7, 3, 6, 3, 2 ], [ 9, 4, 5, 0, 6, 7, 0, 2, 6 ],\n            [ 4, 5, 9, 6, 3, 2, 6, 7, 3 ], [ 6, 7, 11, 5, 3, 8, 5, 1, 3 ],\n            [ 6, 7, 11, 4, 1, 0, 4, 5, 1 ], [ 4, 5, 9, 3, 8, 0, 11, 6, 7 ],\n            [ 9, 4, 5, 7, 11, 6 ], [], [], [ 0, 6, 4 ], [ 8, 6, 4, 8, 1, 6 ], [],\n            [ 0, 10, 2, 0, 9, 10, 4, 8, 11, 4, 11, 6 ],\n            [ 10, 2, 1, 6, 0, 3, 6, 4, 0 ], [ 10, 2, 1, 11, 4, 8, 11, 6, 4 ],\n            [ 4, 2, 6 ], [ 1, 0, 9, 2, 4, 8, 2, 6, 4 ], [ 2, 4, 0, 2, 6, 4 ],\n            [ 8, 2, 4, 2, 6, 4 ], [ 11, 4, 1, 11, 6, 4 ],\n            [ 0, 9, 1, 4, 11, 6, 4, 8, 11 ], [ 3, 6, 0, 6, 4, 0 ],\n            [ 8, 6, 4, 8, 11, 6 ], [ 10, 8, 9 ], [ 6, 3, 9, 6, 7, 3 ], [ 6, 7, 1 ],\n            [ 10, 7, 1, 7, 3, 1 ], [ 7, 11, 6, 8, 10, 2, 8, 9, 10 ],\n            [ 11, 6, 7, 10, 0, 9, 10, 2, 0 ], [ 2, 1, 10, 7, 11, 6, 8, 0, 3 ],\n            [ 1, 10, 2, 6, 7, 11 ], [ 7, 2, 6, 7, 9, 2 ],\n            [ 1, 0, 9, 3, 6, 7, 3, 2, 6 ], [ 7, 0, 6, 0, 2, 6 ],\n            [ 2, 7, 3, 2, 6, 7 ], [ 7, 11, 6, 3, 9, 1, 3, 8, 9 ],\n            [ 9, 1, 0, 11, 6, 7 ], [ 0, 3, 8, 11, 6, 7 ], [ 11, 6, 7 ], [], [], [],\n            [], [ 5, 3, 7 ], [ 8, 5, 2, 8, 7, 5 ], [ 5, 3, 7 ],\n            [ 1, 10, 2, 5, 8, 7, 5, 9, 8 ], [ 1, 7, 5 ], [ 1, 7, 5 ],\n            [ 9, 2, 7, 9, 7, 5 ], [ 11, 3, 2, 8, 5, 9, 8, 7, 5 ],\n            [ 1, 3, 7, 1, 7, 5 ], [ 0, 7, 1, 7, 5, 1 ], [ 9, 3, 5, 3, 7, 5 ],\n            [ 9, 7, 5, 9, 8, 7 ], [ 8, 10, 11 ], [ 3, 4, 10, 3, 10, 11 ],\n            [ 8, 10, 11 ], [ 5, 9, 4, 1, 11, 3, 1, 10, 11 ], [ 2, 4, 5 ],\n            [ 5, 2, 4, 2, 0, 4 ], [ 0, 3, 8, 5, 9, 4, 10, 2, 1 ],\n            [ 2, 1, 10, 9, 4, 5 ], [ 2, 8, 5, 2, 11, 8 ],\n            [ 3, 2, 11, 1, 4, 5, 1, 0, 4 ], [ 9, 4, 5, 8, 2, 11, 8, 0, 2 ],\n            [ 11, 3, 2, 9, 4, 5 ], [ 8, 5, 3, 5, 1, 3 ], [ 5, 0, 4, 5, 1, 0 ],\n            [ 3, 8, 0, 4, 5, 9 ], [ 9, 4, 5 ], [ 11, 9, 10 ], [ 11, 9, 10 ],\n            [ 1, 11, 4, 1, 10, 11 ], [ 8, 7, 4, 11, 1, 10, 11, 3, 1 ],\n            [ 2, 7, 9, 2, 9, 10 ], [ 4, 8, 7, 0, 10, 2, 0, 9, 10 ],\n            [ 2, 1, 10, 0, 7, 4, 0, 3, 7 ], [ 10, 2, 1, 8, 7, 4 ], [ 1, 7, 4 ],\n            [ 3, 2, 11, 4, 8, 7, 9, 1, 0 ], [ 11, 4, 2, 4, 0, 2 ],\n            [ 2, 11, 3, 7, 4, 8 ], [ 4, 1, 7, 1, 3, 7 ], [ 1, 0, 9, 8, 7, 4 ],\n            [ 3, 4, 0, 3, 7, 4 ], [ 8, 7, 4 ], [ 8, 9, 10, 8, 10, 11 ],\n            [ 3, 9, 11, 9, 10, 11 ], [ 0, 10, 8, 10, 11, 8 ],\n            [ 10, 3, 1, 10, 11, 3 ], [ 2, 8, 10, 8, 9, 10 ], [ 9, 2, 0, 9, 10, 2 ],\n            [ 8, 0, 3, 1, 10, 2 ], [ 10, 2, 1 ], [ 1, 11, 9, 11, 8, 9 ],\n            [ 11, 3, 2, 0, 9, 1 ], [ 11, 0, 2, 11, 8, 0 ], [ 11, 3, 2 ],\n            [ 8, 1, 3, 8, 9, 1 ], [ 9, 1, 0 ], [ 8, 0, 3 ], [] ];\n\n    var edgeTable2 = [ 0x0, 0x109, 0x203, 0x30a, 0x80c, 0x905, 0xa0f,\n            0xb06, 0x406, 0x50f, 0x605, 0x70c, 0xc0a, 0xd03, 0xe09, 0xf00, 0x190,\n            0x99, 0x393, 0x29a, 0x99c, 0x895, 0xb9f, 0xa96, 0x596, 0x49f, 0x795,\n            0x69c, 0xd9a, 0xc93, 0xf99, 0xe90, 0x230, 0x339, 0x33, 0x13a, 0xa3c,\n            0xb35, 0x83f, 0x936, 0x636, 0x73f, 0x435, 0x53c, 0xe3a, 0xf33, 0xc39,\n            0xd30, 0x3a0, 0x2a9, 0x1a3, 0xaa, 0xbac, 0xaa5, 0x9af, 0x8a6, 0x7a6,\n            0x6af, 0x5a5, 0x4ac, 0xfaa, 0xea3, 0xda9, 0xca0, 0x8c0, 0x9c9, 0xac3,\n            0xbca, 0xcc, 0x1c5, 0x2cf, 0x3c6, 0xcc6, 0xdcf, 0xec5, 0xfcc, 0x4ca,\n            0x5c3, 0x6c9, 0x7c0, 0x950, 0x859, 0xb53, 0xa5a, 0x15c, 0x55, 0x35f,\n            0x256, 0xd56, 0xc5f, 0xf55, 0xe5c, 0x55a, 0x453, 0x759, 0x650, 0xaf0,\n            0xbf9, 0x8f3, 0x9fa, 0x2fc, 0x3f5, 0xff, 0x1f6, 0xef6, 0xfff, 0xcf5,\n            0xdfc, 0x6fa, 0x7f3, 0x4f9, 0x5f0, 0xb60, 0xa69, 0x963, 0x86a, 0x36c,\n            0x265, 0x16f, 0x66, 0xf66, 0xe6f, 0xd65, 0xc6c, 0x76a, 0x663, 0x569,\n            0x460, 0x460, 0x569, 0x663, 0x76a, 0xc6c, 0xd65, 0xe6f, 0xf66, 0x66,\n            0x16f, 0x265, 0x36c, 0x86a, 0x963, 0xa69, 0xb60, 0x5f0, 0x4f9, 0x7f3,\n            0x6fa, 0xdfc, 0xcf5, 0xfff, 0xef6, 0x1f6, 0xff, 0x3f5, 0x2fc, 0x9fa,\n            0x8f3, 0xbf9, 0xaf0, 0x650, 0x759, 0x453, 0x55a, 0xe5c, 0xf55, 0xc5f,\n            0xd56, 0x256, 0x35f, 0x55, 0x15c, 0xa5a, 0xb53, 0x859, 0x950, 0x7c0,\n            0x6c9, 0x5c3, 0x4ca, 0xfcc, 0xec5, 0xdcf, 0xcc6, 0x3c6, 0x2cf, 0x1c5,\n            0xcc, 0xbca, 0xac3, 0x9c9, 0x8c0, 0xca0, 0xda9, 0xea3, 0xfaa, 0x4ac,\n            0x5a5, 0x6af, 0x7a6, 0x8a6, 0x9af, 0xaa5, 0xbac, 0xaa, 0x1a3, 0x2a9,\n            0x3a0, 0xd30, 0xc39, 0xf33, 0xe3a, 0x53c, 0x435, 0x73f, 0x636, 0x936,\n            0x83f, 0xb35, 0xa3c, 0x13a, 0x33, 0x339, 0x230, 0xe90, 0xf99, 0xc93,\n            0xd9a, 0x69c, 0x795, 0x49f, 0x596, 0xa96, 0xb9f, 0x895, 0x99c, 0x29a,\n            0x393, 0x99, 0x190, 0xf00, 0xe09, 0xd03, 0xc0a, 0x70c, 0x605, 0x50f,\n            0x406, 0xb06, 0xa0f, 0x905, 0x80c, 0x30a, 0x203, 0x109, 0x0 ];\n\n    var triTable2 = [ [], [ 8, 3, 0 ], [ 9, 0, 1 ], [ 8, 3, 1, 8, 1, 9 ],\n            [ 11, 2, 3 ], [ 11, 2, 0, 11, 0, 8 ], [ 11, 2, 3, 0, 1, 9 ],\n            [ 2, 1, 11, 1, 9, 11, 11, 9, 8 ], [ 10, 1, 2 ], [ 8, 3, 0, 1, 2, 10 ],\n            [ 9, 0, 2, 9, 2, 10 ], [ 3, 2, 8, 2, 10, 8, 8, 10, 9 ],\n            [ 10, 1, 3, 10, 3, 11 ], [ 1, 0, 10, 0, 8, 10, 10, 8, 11 ],\n            [ 0, 3, 9, 3, 11, 9, 9, 11, 10 ], [ 8, 10, 9, 8, 11, 10 ], [ 8, 4, 7 ],\n            [ 3, 0, 4, 3, 4, 7 ], [ 1, 9, 0, 8, 4, 7 ],\n            [ 9, 4, 1, 4, 7, 1, 1, 7, 3 ], [ 2, 3, 11, 7, 8, 4 ],\n            [ 7, 11, 4, 11, 2, 4, 4, 2, 0 ], [ 3, 11, 2, 4, 7, 8, 9, 0, 1 ],\n            [ 2, 7, 11, 2, 1, 7, 1, 4, 7, 1, 9, 4 ], [ 10, 1, 2, 8, 4, 7 ],\n            [ 2, 10, 1, 0, 4, 7, 0, 7, 3 ], [ 4, 7, 8, 0, 2, 10, 0, 10, 9 ],\n            [ 2, 7, 3, 2, 9, 7, 7, 9, 4, 2, 10, 9 ],\n            [ 8, 4, 7, 11, 10, 1, 11, 1, 3 ],\n            [ 11, 4, 7, 1, 4, 11, 1, 11, 10, 1, 0, 4 ],\n            [ 3, 8, 0, 7, 11, 4, 11, 9, 4, 11, 10, 9 ],\n            [ 7, 11, 4, 4, 11, 9, 11, 10, 9 ], [ 9, 5, 4 ], [ 3, 0, 8, 4, 9, 5 ],\n            [ 5, 4, 0, 5, 0, 1 ], [ 4, 8, 5, 8, 3, 5, 5, 3, 1 ],\n            [ 11, 2, 3, 9, 5, 4 ], [ 9, 5, 4, 8, 11, 2, 8, 2, 0 ],\n            [ 3, 11, 2, 1, 5, 4, 1, 4, 0 ],\n            [ 8, 5, 4, 2, 5, 8, 2, 8, 11, 2, 1, 5 ], [ 2, 10, 1, 9, 5, 4 ],\n            [ 0, 8, 3, 5, 4, 9, 10, 1, 2 ], [ 10, 5, 2, 5, 4, 2, 2, 4, 0 ],\n            [ 3, 4, 8, 3, 2, 4, 2, 5, 4, 2, 10, 5 ],\n            [ 5, 4, 9, 1, 3, 11, 1, 11, 10 ],\n            [ 0, 9, 1, 4, 8, 5, 8, 10, 5, 8, 11, 10 ],\n            [ 3, 4, 0, 3, 10, 4, 4, 10, 5, 3, 11, 10 ],\n            [ 4, 8, 5, 5, 8, 10, 8, 11, 10 ], [ 9, 5, 7, 9, 7, 8 ],\n            [ 0, 9, 3, 9, 5, 3, 3, 5, 7 ], [ 8, 0, 7, 0, 1, 7, 7, 1, 5 ],\n            [ 1, 7, 3, 1, 5, 7 ], [ 11, 2, 3, 8, 9, 5, 8, 5, 7 ],\n            [ 9, 2, 0, 9, 7, 2, 2, 7, 11, 9, 5, 7 ],\n            [ 0, 3, 8, 2, 1, 11, 1, 7, 11, 1, 5, 7 ],\n            [ 2, 1, 11, 11, 1, 7, 1, 5, 7 ], [ 1, 2, 10, 5, 7, 8, 5, 8, 9 ],\n            [ 9, 1, 0, 10, 5, 2, 5, 3, 2, 5, 7, 3 ],\n            [ 5, 2, 10, 8, 2, 5, 8, 5, 7, 8, 0, 2 ],\n            [ 10, 5, 2, 2, 5, 3, 5, 7, 3 ],\n            [ 3, 9, 1, 3, 8, 9, 7, 11, 10, 7, 10, 5 ],\n            [ 9, 1, 0, 10, 7, 11, 10, 5, 7 ], [ 3, 8, 0, 7, 10, 5, 7, 11, 10 ],\n            [ 11, 5, 7, 11, 10, 5 ], [ 11, 7, 6 ], [ 0, 8, 3, 11, 7, 6 ],\n            [ 9, 0, 1, 11, 7, 6 ], [ 7, 6, 11, 3, 1, 9, 3, 9, 8 ],\n            [ 2, 3, 7, 2, 7, 6 ], [ 8, 7, 0, 7, 6, 0, 0, 6, 2 ],\n            [ 1, 9, 0, 3, 7, 6, 3, 6, 2 ], [ 7, 6, 2, 7, 2, 9, 2, 1, 9, 7, 9, 8 ],\n            [ 1, 2, 10, 6, 11, 7 ], [ 2, 10, 1, 7, 6, 11, 8, 3, 0 ],\n            [ 11, 7, 6, 10, 9, 0, 10, 0, 2 ],\n            [ 7, 6, 11, 3, 2, 8, 8, 2, 10, 8, 10, 9 ],\n            [ 6, 10, 7, 10, 1, 7, 7, 1, 3 ],\n            [ 6, 10, 1, 6, 1, 7, 7, 1, 0, 7, 0, 8 ],\n            [ 9, 0, 3, 6, 9, 3, 6, 10, 9, 6, 3, 7 ],\n            [ 6, 10, 7, 7, 10, 8, 10, 9, 8 ], [ 8, 4, 6, 8, 6, 11 ],\n            [ 11, 3, 6, 3, 0, 6, 6, 0, 4 ], [ 0, 1, 9, 4, 6, 11, 4, 11, 8 ],\n            [ 1, 9, 4, 11, 1, 4, 11, 3, 1, 11, 4, 6 ],\n            [ 3, 8, 2, 8, 4, 2, 2, 4, 6 ], [ 2, 0, 4, 2, 4, 6 ],\n            [ 1, 9, 0, 3, 8, 2, 2, 8, 4, 2, 4, 6 ], [ 9, 4, 1, 1, 4, 2, 4, 6, 2 ],\n            [ 10, 1, 2, 11, 8, 4, 11, 4, 6 ],\n            [ 10, 1, 2, 11, 3, 6, 6, 3, 0, 6, 0, 4 ],\n            [ 0, 2, 10, 0, 10, 9, 4, 11, 8, 4, 6, 11 ],\n            [ 2, 11, 3, 6, 9, 4, 6, 10, 9 ],\n            [ 8, 4, 6, 8, 6, 1, 6, 10, 1, 8, 1, 3 ],\n            [ 1, 0, 10, 10, 0, 6, 0, 4, 6 ], [ 8, 0, 3, 9, 6, 10, 9, 4, 6 ],\n            [ 10, 4, 6, 10, 9, 4 ], [ 9, 5, 4, 7, 6, 11 ],\n            [ 4, 9, 5, 3, 0, 8, 11, 7, 6 ], [ 6, 11, 7, 4, 0, 1, 4, 1, 5 ],\n            [ 6, 11, 7, 4, 8, 5, 5, 8, 3, 5, 3, 1 ], [ 4, 9, 5, 6, 2, 3, 6, 3, 7 ],\n            [ 9, 5, 4, 8, 7, 0, 0, 7, 6, 0, 6, 2 ],\n            [ 4, 0, 1, 4, 1, 5, 6, 3, 7, 6, 2, 3 ], [ 7, 4, 8, 5, 2, 1, 5, 6, 2 ],\n            [ 6, 11, 7, 1, 2, 10, 9, 5, 4 ],\n            [ 11, 7, 6, 8, 3, 0, 1, 2, 10, 9, 5, 4 ],\n            [ 11, 7, 6, 10, 5, 2, 2, 5, 4, 2, 4, 0 ],\n            [ 7, 4, 8, 2, 11, 3, 10, 5, 6 ],\n            [ 4, 9, 5, 6, 10, 7, 7, 10, 1, 7, 1, 3 ],\n            [ 5, 6, 10, 0, 9, 1, 8, 7, 4 ], [ 5, 6, 10, 7, 0, 3, 7, 4, 0 ],\n            [ 10, 5, 6, 4, 8, 7 ], [ 5, 6, 9, 6, 11, 9, 9, 11, 8 ],\n            [ 0, 9, 5, 0, 5, 3, 3, 5, 6, 3, 6, 11 ],\n            [ 0, 1, 5, 0, 5, 11, 5, 6, 11, 0, 11, 8 ],\n            [ 11, 3, 6, 6, 3, 5, 3, 1, 5 ], [ 9, 5, 6, 3, 9, 6, 3, 8, 9, 3, 6, 2 ],\n            [ 5, 6, 9, 9, 6, 0, 6, 2, 0 ], [ 0, 3, 8, 2, 5, 6, 2, 1, 5 ],\n            [ 1, 6, 2, 1, 5, 6 ], [ 1, 2, 10, 5, 6, 9, 9, 6, 11, 9, 11, 8 ],\n            [ 1, 0, 9, 6, 10, 5, 11, 3, 2 ], [ 6, 10, 5, 2, 8, 0, 2, 11, 8 ],\n            [ 3, 2, 11, 10, 5, 6 ], [ 10, 5, 6, 9, 3, 8, 9, 1, 3 ],\n            [ 0, 9, 1, 5, 6, 10 ], [ 8, 0, 3, 10, 5, 6 ], [ 10, 5, 6 ],\n            [ 10, 6, 5 ], [ 8, 3, 0, 10, 6, 5 ], [ 0, 1, 9, 5, 10, 6 ],\n            [ 10, 6, 5, 9, 8, 3, 9, 3, 1 ], [ 3, 11, 2, 10, 6, 5 ],\n            [ 6, 5, 10, 2, 0, 8, 2, 8, 11 ], [ 1, 9, 0, 6, 5, 10, 11, 2, 3 ],\n            [ 1, 10, 2, 5, 9, 6, 9, 11, 6, 9, 8, 11 ], [ 1, 2, 6, 1, 6, 5 ],\n            [ 0, 8, 3, 2, 6, 5, 2, 5, 1 ], [ 5, 9, 6, 9, 0, 6, 6, 0, 2 ],\n            [ 9, 6, 5, 3, 6, 9, 3, 9, 8, 3, 2, 6 ], [ 11, 6, 3, 6, 5, 3, 3, 5, 1 ],\n            [ 0, 5, 1, 0, 11, 5, 5, 11, 6, 0, 8, 11 ],\n            [ 0, 5, 9, 0, 3, 5, 3, 6, 5, 3, 11, 6 ],\n            [ 5, 9, 6, 6, 9, 11, 9, 8, 11 ], [ 10, 6, 5, 4, 7, 8 ],\n            [ 5, 10, 6, 7, 3, 0, 7, 0, 4 ], [ 5, 10, 6, 0, 1, 9, 8, 4, 7 ],\n            [ 4, 5, 9, 6, 7, 10, 7, 1, 10, 7, 3, 1 ],\n            [ 7, 8, 4, 2, 3, 11, 10, 6, 5 ],\n            [ 11, 6, 7, 10, 2, 5, 2, 4, 5, 2, 0, 4 ],\n            [ 11, 6, 7, 8, 0, 3, 1, 10, 2, 9, 4, 5 ],\n            [ 6, 7, 11, 1, 10, 2, 9, 4, 5 ], [ 7, 8, 4, 5, 1, 2, 5, 2, 6 ],\n            [ 4, 1, 0, 4, 5, 1, 6, 7, 3, 6, 3, 2 ],\n            [ 9, 4, 5, 8, 0, 7, 0, 6, 7, 0, 2, 6 ], [ 4, 5, 9, 6, 3, 2, 6, 7, 3 ],\n            [ 6, 7, 11, 4, 5, 8, 5, 3, 8, 5, 1, 3 ],\n            [ 6, 7, 11, 4, 1, 0, 4, 5, 1 ], [ 4, 5, 9, 3, 8, 0, 11, 6, 7 ],\n            [ 9, 4, 5, 7, 11, 6 ], [ 10, 6, 4, 10, 4, 9 ],\n            [ 8, 3, 0, 9, 10, 6, 9, 6, 4 ], [ 1, 10, 0, 10, 6, 0, 0, 6, 4 ],\n            [ 8, 6, 4, 8, 1, 6, 6, 1, 10, 8, 3, 1 ],\n            [ 2, 3, 11, 6, 4, 9, 6, 9, 10 ],\n            [ 0, 10, 2, 0, 9, 10, 4, 8, 11, 4, 11, 6 ],\n            [ 10, 2, 1, 11, 6, 3, 6, 0, 3, 6, 4, 0 ],\n            [ 10, 2, 1, 11, 4, 8, 11, 6, 4 ], [ 9, 1, 4, 1, 2, 4, 4, 2, 6 ],\n            [ 1, 0, 9, 3, 2, 8, 2, 4, 8, 2, 6, 4 ], [ 2, 4, 0, 2, 6, 4 ],\n            [ 3, 2, 8, 8, 2, 4, 2, 6, 4 ],\n            [ 1, 4, 9, 11, 4, 1, 11, 1, 3, 11, 6, 4 ],\n            [ 0, 9, 1, 4, 11, 6, 4, 8, 11 ], [ 11, 6, 3, 3, 6, 0, 6, 4, 0 ],\n            [ 8, 6, 4, 8, 11, 6 ], [ 6, 7, 10, 7, 8, 10, 10, 8, 9 ],\n            [ 9, 3, 0, 6, 3, 9, 6, 9, 10, 6, 7, 3 ],\n            [ 6, 1, 10, 6, 7, 1, 7, 0, 1, 7, 8, 0 ],\n            [ 6, 7, 10, 10, 7, 1, 7, 3, 1 ],\n            [ 7, 11, 6, 3, 8, 2, 8, 10, 2, 8, 9, 10 ],\n            [ 11, 6, 7, 10, 0, 9, 10, 2, 0 ], [ 2, 1, 10, 7, 11, 6, 8, 0, 3 ],\n            [ 1, 10, 2, 6, 7, 11 ], [ 7, 2, 6, 7, 9, 2, 2, 9, 1, 7, 8, 9 ],\n            [ 1, 0, 9, 3, 6, 7, 3, 2, 6 ], [ 8, 0, 7, 7, 0, 6, 0, 2, 6 ],\n            [ 2, 7, 3, 2, 6, 7 ], [ 7, 11, 6, 3, 9, 1, 3, 8, 9 ],\n            [ 9, 1, 0, 11, 6, 7 ], [ 0, 3, 8, 11, 6, 7 ], [ 11, 6, 7 ],\n            [ 11, 7, 5, 11, 5, 10 ], [ 3, 0, 8, 7, 5, 10, 7, 10, 11 ],\n            [ 9, 0, 1, 10, 11, 7, 10, 7, 5 ],\n            [ 3, 1, 9, 3, 9, 8, 7, 10, 11, 7, 5, 10 ],\n            [ 10, 2, 5, 2, 3, 5, 5, 3, 7 ],\n            [ 5, 10, 2, 8, 5, 2, 8, 7, 5, 8, 2, 0 ],\n            [ 9, 0, 1, 10, 2, 5, 5, 2, 3, 5, 3, 7 ],\n            [ 1, 10, 2, 5, 8, 7, 5, 9, 8 ], [ 2, 11, 1, 11, 7, 1, 1, 7, 5 ],\n            [ 0, 8, 3, 2, 11, 1, 1, 11, 7, 1, 7, 5 ],\n            [ 9, 0, 2, 9, 2, 7, 2, 11, 7, 9, 7, 5 ],\n            [ 11, 3, 2, 8, 5, 9, 8, 7, 5 ], [ 1, 3, 7, 1, 7, 5 ],\n            [ 8, 7, 0, 0, 7, 1, 7, 5, 1 ], [ 0, 3, 9, 9, 3, 5, 3, 7, 5 ],\n            [ 9, 7, 5, 9, 8, 7 ], [ 4, 5, 8, 5, 10, 8, 8, 10, 11 ],\n            [ 3, 0, 4, 3, 4, 10, 4, 5, 10, 3, 10, 11 ],\n            [ 0, 1, 9, 4, 5, 8, 8, 5, 10, 8, 10, 11 ],\n            [ 5, 9, 4, 1, 11, 3, 1, 10, 11 ],\n            [ 3, 8, 4, 3, 4, 2, 2, 4, 5, 2, 5, 10 ],\n            [ 10, 2, 5, 5, 2, 4, 2, 0, 4 ], [ 0, 3, 8, 5, 9, 4, 10, 2, 1 ],\n            [ 2, 1, 10, 9, 4, 5 ], [ 8, 4, 5, 2, 8, 5, 2, 11, 8, 2, 5, 1 ],\n            [ 3, 2, 11, 1, 4, 5, 1, 0, 4 ], [ 9, 4, 5, 8, 2, 11, 8, 0, 2 ],\n            [ 11, 3, 2, 9, 4, 5 ], [ 4, 5, 8, 8, 5, 3, 5, 1, 3 ],\n            [ 5, 0, 4, 5, 1, 0 ], [ 3, 8, 0, 4, 5, 9 ], [ 9, 4, 5 ],\n            [ 7, 4, 11, 4, 9, 11, 11, 9, 10 ],\n            [ 3, 0, 8, 7, 4, 11, 11, 4, 9, 11, 9, 10 ],\n            [ 11, 7, 4, 1, 11, 4, 1, 10, 11, 1, 4, 0 ],\n            [ 8, 7, 4, 11, 1, 10, 11, 3, 1 ],\n            [ 2, 3, 7, 2, 7, 9, 7, 4, 9, 2, 9, 10 ],\n            [ 4, 8, 7, 0, 10, 2, 0, 9, 10 ], [ 2, 1, 10, 0, 7, 4, 0, 3, 7 ],\n            [ 10, 2, 1, 8, 7, 4 ], [ 2, 11, 7, 2, 7, 1, 1, 7, 4, 1, 4, 9 ],\n            [ 3, 2, 11, 4, 8, 7, 9, 1, 0 ], [ 7, 4, 11, 11, 4, 2, 4, 0, 2 ],\n            [ 2, 11, 3, 7, 4, 8 ], [ 9, 1, 4, 4, 1, 7, 1, 3, 7 ],\n            [ 1, 0, 9, 8, 7, 4 ], [ 3, 4, 0, 3, 7, 4 ], [ 8, 7, 4 ],\n            [ 8, 9, 10, 8, 10, 11 ], [ 0, 9, 3, 3, 9, 11, 9, 10, 11 ],\n            [ 1, 10, 0, 0, 10, 8, 10, 11, 8 ], [ 10, 3, 1, 10, 11, 3 ],\n            [ 3, 8, 2, 2, 8, 10, 8, 9, 10 ], [ 9, 2, 0, 9, 10, 2 ],\n            [ 8, 0, 3, 1, 10, 2 ], [ 10, 2, 1 ], [ 2, 11, 1, 1, 11, 9, 11, 8, 9 ],\n            [ 11, 3, 2, 0, 9, 1 ], [ 11, 0, 2, 11, 8, 0 ], [ 11, 3, 2 ],\n            [ 8, 1, 3, 8, 9, 1 ], [ 9, 1, 0 ], [ 8, 0, 3 ], [] ];\n\n            return my;\n};\n\n//each webworker needs its own marching cube object\n$3Dmol.MarchingCube  = $3Dmol.MarchingCubeInitializer();\n\n\n\n\n/*! ProteinSurface4.js\n * @author David Koes  / https://github.com/3dmol/3Dmol.js/tree/master/3Dmol\n * Modified by Jiyao Wang / https://github.com/ncbi/icn3d\n */\n\n/*  ProteinSurface.js by biochem_fan\n\nPorted and modified for Javascript based on EDTSurf,\n  whose license is as follows.\n\nPermission to use, copy, modify, and distribute this program for any\npurpose, with or without fee, is hereby granted, provided that this\ncopyright notice and the reference information appear in all copies or\nsubstantial portions of the Software. It is provided \"as is\" without\nexpress or implied warranty.\n\nReference:\nhttp://zhanglab.ccmb.med.umich.edu/EDTSurf/\nD. Xu, Y. Zhang (2009) Generating Triangulated Macromolecular Surfaces\nby Euclidean Distance Transform. PLoS ONE 4(12): e8140.\n\n=======\n\nTODO: Improved performance on Firefox\n      Reduce memory consumption\n      Refactor!\n */\n\n\n// dkoes\n// Surface calculations.  This must be safe to use within a web worker.\nif (typeof console === 'undefined') {\n    // this should only be true inside of a webworker\n    console = {\n        log : function() {\n        }\n    };\n}\n\n$3Dmol.ProteinSurface = function(threshbox) {\n\n    // constants for vpbits bitmasks\n    /** @const */\n    var INOUT = 1;\n    /** @const */\n    var ISDONE = 2;\n    /** @const */\n    var ISBOUND = 4;\n\n    var ptranx = 0, ptrany = 0, ptranz = 0;\n    var probeRadius = 1.4;\n    var defaultScaleFactor = 2;\n    var scaleFactor = defaultScaleFactor; // 2 is .5A grid; if this is made user configurable,\n                            // also have to adjust offset used to find non-shown\n                            // atoms\n    var pHeight = 0, pWidth = 0, pLength = 0;\n    var cutRadius = 0;\n    var vpBits = null; // uint8 array of bitmasks\n    var vpDistance = null; // floatarray of _squared_ distances\n    var vpAtomID = null; // intarray\n    var vertnumber = 0, facenumber = 0;\n    var pminx = 0, pminy = 0, pminz = 0, pmaxx = 0, pmaxy = 0, pmaxz = 0;\n\n    var vdwRadii = {\n            \"H\" : 1.2,\n            \"Li\" : 1.82,\n            \"Na\" : 2.27,\n            \"K\" : 2.75,\n            \"C\" : 1.7,\n            \"N\" : 1.55,\n            \"O\" : 1.52,\n            \"F\" : 1.47,\n            \"P\" : 1.80,\n            \"S\" : 1.80,\n            \"CL\" : 1.75,\n            \"BR\" : 1.85,\n            \"SE\" : 1.90,\n            \"ZN\" : 1.39,\n            \"CU\" : 1.4,\n            \"NI\" : 1.63,\n            \"X\" : 2\n        };\n\n    /** @param {AtomSpec} atom */\n    var getVDWIndex = function(atom) {\n        if(!atom.elem || typeof(vdwRadii[atom.elem]) == \"undefined\") {\n            return \"X\";\n        }\n        return atom.elem;\n    };\n\n    var depty = {}, widxz = {};\n    var faces, verts;\n    var nb = [ new Int32Array([ 1, 0, 0 ]), new Int32Array([ -1, 0, 0 ]),\n               new Int32Array([ 0, 1, 0 ]), new Int32Array([ 0, -1, 0 ]),\n               new Int32Array([ 0, 0, 1 ]),\n               new Int32Array([ 0, 0, -1 ]),\n               new Int32Array([ 1, 1, 0 ]),\n               new Int32Array([ 1, -1, 0 ]),\n               new Int32Array([ -1, 1, 0 ]),\n               new Int32Array([ -1, -1, 0 ]),\n               new Int32Array([ 1, 0, 1 ]),\n               new Int32Array([ 1, 0, -1 ]),\n               new Int32Array([ -1, 0, 1 ]),\n               new Int32Array([ -1, 0, -1 ]),\n               new Int32Array([ 0, 1, 1 ]),\n               new Int32Array([ 0, 1, -1 ]),\n               new Int32Array([ 0, -1, 1 ]),\n               new Int32Array([ 0, -1, -1 ]),\n               new Int32Array([ 1, 1, 1 ]),\n               new Int32Array([ 1, 1, -1 ]),\n               new Int32Array([ 1, -1, 1 ]),\n               new Int32Array([ -1, 1, 1 ]),\n               new Int32Array([ 1, -1, -1 ]),\n               new Int32Array([ -1, -1, 1 ]),\n               new Int32Array([ -1, 1, -1 ]),\n               new Int32Array([ -1, -1, -1 ]) ];\n\n    var origextent;\n\n    var inOrigExtent = function(x, y, z) {\n        if (x < origextent[0][0] || x > origextent[1][0])\n            return false;\n        if (y < origextent[0][1] || y > origextent[1][1])\n            return false;\n        if (z < origextent[0][2] || z > origextent[1][2])\n            return false;\n        return true;\n    };\n\n    this.getFacesAndVertices = function(atomlist) {\n        var atomsToShow = {};\n        var i, il;\n        for (i = 0, il = atomlist.length; i < il; i++)\n            atomsToShow[atomlist[i]] = 1;\n        var vertices = verts;\n        for (i = 0, il = vertices.length; i < il; i++) {\n            vertices[i].x = vertices[i].x / scaleFactor - ptranx;\n            vertices[i].y = vertices[i].y / scaleFactor - ptrany;\n            vertices[i].z = vertices[i].z / scaleFactor - ptranz;\n        }\n\n        var finalfaces = [];\n        for (i = 0, il = faces.length; i < il; i += 3) {\n            //var f = faces[i];\n            var fa = faces[i], fb = faces[i+1], fc = faces[i+2];\n            var a = vertices[fa]['atomid'], b = vertices[fb]['atomid'], c = vertices[fc]['atomid'];\n\n            // must be a unique face for each atom\n            var which = a;\n            if (b < which)\n                which = b;\n            if (c < which)\n                which = c;\n            if (!atomsToShow[which]) {\n                continue;\n            }\n            //var av = vertices[faces[i]];\n            //var bv = vertices[faces[i+1]];\n            //var cv = vertices[faces[i+2]];\n\n            if (fa !== fb && fb !== fc && fa !== fc){\n                //finalfaces.push(fa);\n                //finalfaces.push(fb);\n                //finalfaces.push(fc);\n\n                // !!! different between 3Dmol and iCn3D\n                finalfaces.push({\"a\":fa, \"b\":fb, \"c\":fc});\n            }\n\n        }\n\n        //try to help the garbage collector\n        vpBits = null; // uint8 array of bitmasks\n        vpDistance = null; // floatarray\n        vpAtomID = null; // intarray\n\n        return {\n            'vertices' : vertices,\n            'faces' : finalfaces\n        };\n    };\n\n\n    this.initparm = function(extent, btype, volume) {\n        // !!! different between 3Dmol and iCn3D\n        //if(volume > 1000000) //heuristical decrease resolution to avoid large memory consumption\n        //    scaleFactor = defaultScaleFactor/2;\n\n        var margin = (1 / scaleFactor) * 5.5; // need margin to avoid\n                                                // boundary/round off effects\n        origextent = extent;\n        pminx = extent[0][0]; pmaxx = extent[1][0];\n        pminy = extent[0][1]; pmaxy = extent[1][1];\n        pminz = extent[0][2]; pmaxz = extent[1][2];\n\n        if (!btype) {\n            pminx -= margin;\n            pminy -= margin;\n            pminz -= margin;\n            pmaxx += margin;\n            pmaxy += margin;\n            pmaxz += margin;\n        } else {\n            pminx -= probeRadius + margin;\n            pminy -= probeRadius + margin;\n            pminz -= probeRadius + margin;\n            pmaxx += probeRadius + margin;\n            pmaxy += probeRadius + margin;\n            pmaxz += probeRadius + margin;\n        }\n\n        pminx = Math.floor(pminx * scaleFactor) / scaleFactor;\n        pminy = Math.floor(pminy * scaleFactor) / scaleFactor;\n        pminz = Math.floor(pminz * scaleFactor) / scaleFactor;\n        pmaxx = Math.ceil(pmaxx * scaleFactor) / scaleFactor;\n        pmaxy = Math.ceil(pmaxy * scaleFactor) / scaleFactor;\n        pmaxz = Math.ceil(pmaxz * scaleFactor) / scaleFactor;\n\n        ptranx = -pminx;\n        ptrany = -pminy;\n        ptranz = -pminz;\n\n        // !!! different between 3Dmol and iCn3D\n        // copied from surface.js from iview\n        var boxLength = 128;\n        scaleFactor = pmaxx - pminx;\n        if ((pmaxy - pminy) > scaleFactor) scaleFactor = pmaxy - pminy;\n        if ((pmaxz - pminz) > scaleFactor) scaleFactor = pmaxz - pminz;\n        scaleFactor = (boxLength - 1.0) / scaleFactor;\n\n        boxLength = Math.floor(boxLength * defaultScaleFactor / scaleFactor);\n        scaleFactor = defaultScaleFactor;\n        //var threshbox = 180; // maximum possible boxsize\n        if (boxLength > threshbox) {\n            var sfthresh = threshbox / boxLength;\n            boxLength = Math.floor(threshbox);\n            scaleFactor = scaleFactor * sfthresh;\n        }\n        // end of surface.js part\n\n        pLength = Math.ceil(scaleFactor * (pmaxx - pminx)) + 1;\n        pWidth = Math.ceil(scaleFactor * (pmaxy - pminy)) + 1;\n        pHeight = Math.ceil(scaleFactor * (pmaxz - pminz)) + 1;\n\n        this.boundingatom(btype);\n        cutRadius = probeRadius * scaleFactor;\n\n        vpBits = new Uint8Array(pLength * pWidth * pHeight);\n        vpDistance = new Float64Array(pLength * pWidth * pHeight); // float 32\n        // doesn't\n        // play\n        // nicely\n        // with\n        // native\n        // floats\n        vpAtomID = new Int32Array(pLength * pWidth * pHeight);\n        //console.log(\"Box size: \", pLength, pWidth, pHeight, vpBits.length);\n    };\n\n    this.boundingatom = function(btype) {\n        var tradius = [];\n        var txz, tdept, sradius, idx;\n        flagradius = btype;\n\n        for ( var i in vdwRadii) {\n            if(!vdwRadii.hasOwnProperty(i))\n                continue;\n            var r = vdwRadii[i];\n            if (!btype)\n                tradius[i] = r * scaleFactor + 0.5;\n            else\n                tradius[i] = (r + probeRadius) * scaleFactor + 0.5;\n\n            sradius = tradius[i] * tradius[i];\n            widxz[i] = Math.floor(tradius[i]) + 1;\n            depty[i] = new Int32Array(widxz[i] * widxz[i]);\n            indx = 0;\n            for (j = 0; j < widxz[i]; j++) {\n                for (k = 0; k < widxz[i]; k++) {\n                    txz = j * j + k * k;\n                    if (txz > sradius)\n                        depty[i][indx] = -1; // outside\n                    else {\n                        tdept = Math.sqrt(sradius - txz);\n                        depty[i][indx] = Math.floor(tdept);\n                    }\n                    indx++;\n                }\n            }\n        }\n    };\n\n    this.fillvoxels = function(atoms, atomlist) { // (int seqinit,int\n        // seqterm,bool\n        // atomtype,atom*\n        // proseq,bool bcolor)\n        var i, il;\n        for (i = 0, il = vpBits.length; i < il; i++) {\n            vpBits[i] = 0;\n            vpDistance[i] = -1.0;\n            vpAtomID[i] = -1;\n        }\n\n        for (i in atomlist) {\n            var atom = atoms[atomlist[i]];\n            if (atom === undefined)\n                continue;\n            this.fillAtom(atom, atoms);\n        }\n\n        for (i = 0, il = vpBits.length; i < il; i++)\n            if (vpBits[i] & INOUT)\n                vpBits[i] |= ISDONE;\n\n    };\n\n\n    this.fillAtom = function(atom, atoms) {\n        var cx, cy, cz, ox, oy, oz, mi, mj, mk, i, j, k, si, sj, sk;\n        var ii, jj, kk, n;\n        //cx = Math.floor(0.5 + scaleFactor * (atom.x + ptranx));\n        //cy = Math.floor(0.5 + scaleFactor * (atom.y + ptrany));\n        //cz = Math.floor(0.5 + scaleFactor * (atom.z + ptranz));\n\n        // !!! different between 3Dmol and iCn3D\n        cx = Math.floor(0.5 + scaleFactor * (atom.coord.x + ptranx));\n        cy = Math.floor(0.5 + scaleFactor * (atom.coord.y + ptrany));\n        cz = Math.floor(0.5 + scaleFactor * (atom.coord.z + ptranz));\n\n        var at = getVDWIndex(atom);\n        var nind = 0;\n        var cnt = 0;\n        var pWH = pWidth*pHeight;\n\n        for (i = 0, n = widxz[at]; i < n; i++) {\n            for (j = 0; j < n; j++) {\n                if (depty[at][nind] != -1) {\n                    for (ii = -1; ii < 2; ii++) {\n                        for (jj = -1; jj < 2; jj++) {\n                            for (kk = -1; kk < 2; kk++) {\n                                if (ii !== 0 && jj !== 0 && kk !== 0) {\n                                    mi = ii * i;\n                                    mk = kk * j;\n                                    for (k = 0; k <= depty[at][nind]; k++) {\n                                        mj = k * jj;\n                                        si = cx + mi;\n                                        sj = cy + mj;\n                                        sk = cz + mk;\n                                        if (si < 0 || sj < 0 ||\n                                                sk < 0 ||\n                                                si >= pLength ||\n                                                sj >= pWidth ||\n                                                sk >= pHeight)\n                                            continue;\n                                        var index = si * pWH + sj * pHeight + sk;\n\n                                        if (!(vpBits[index] & INOUT)) {\n                                            vpBits[index] |= INOUT;\n                                            vpAtomID[index] = atom.serial;\n                                        } else {\n                                            var atom2 = atoms[vpAtomID[index]];\n                                            if(atom2.serial != atom.serial) {\n                                                ox = cx + mi - Math.floor(0.5 + scaleFactor *\n                                                        (atom2.x + ptranx));\n                                                oy = cy + mj - Math.floor(0.5 + scaleFactor *\n                                                        (atom2.y + ptrany));\n                                                oz = cz + mk - Math.floor(0.5 + scaleFactor *\n                                                        (atom2.z + ptranz));\n                                                if (mi * mi + mj * mj + mk * mk < ox *\n                                                        ox + oy * oy + oz * oz)\n                                                    vpAtomID[index] = atom.serial;\n                                            }\n                                        }\n\n                                    }// k\n                                }// if\n                            }// kk\n                        }// jj\n                    }// ii\n                }// if\n                nind++;\n            }// j\n        }// i\n    };\n\n    this.fillvoxelswaals = function(atoms, atomlist) {\n        var i, il;\n        for (i = 0, il = vpBits.length; i < il; i++)\n            vpBits[i] &= ~ISDONE; // not isdone\n\n        for (i in atomlist) {\n            var atom = atoms[atomlist[i]];\n            if (atom === undefined)\n                continue;\n\n            this.fillAtomWaals(atom, atoms);\n        }\n    };\n\n    this.fillAtomWaals = function(atom, atoms) {\n        var cx, cy, cz, ox, oy, oz, nind = 0;\n        var mi, mj, mk, si, sj, sk, i, j, k, ii, jj, kk, n;\n        //cx = Math.floor(0.5 + scaleFactor * (atom.x + ptranx));\n        //cy = Math.floor(0.5 + scaleFactor * (atom.y + ptrany));\n        //cz = Math.floor(0.5 + scaleFactor * (atom.z + ptranz));\n\n        // !!! different between 3Dmol and iCn3D\n        cx = Math.floor(0.5 + scaleFactor * (atom.coord.x + ptranx));\n        cy = Math.floor(0.5 + scaleFactor * (atom.coord.y + ptrany));\n        cz = Math.floor(0.5 + scaleFactor * (atom.coord.z + ptranz));\n\n        var at = getVDWIndex(atom);\n        var pWH = pWidth*pHeight;\n        for (i = 0, n = widxz[at]; i < n; i++) {\n            for (j = 0; j < n; j++) {\n                if (depty[at][nind] != -1) {\n                    for (ii = -1; ii < 2; ii++) {\n                        for (jj = -1; jj < 2; jj++) {\n                            for (kk = -1; kk < 2; kk++) {\n                                if (ii !== 0 && jj !== 0 && kk !== 0) {\n                                    mi = ii * i;\n                                    mk = kk * j;\n                                    for (k = 0; k <= depty[at][nind]; k++) {\n                                        mj = k * jj;\n                                        si = cx + mi;\n                                        sj = cy + mj;\n                                        sk = cz + mk;\n                                        if (si < 0 || sj < 0 ||\n                                                sk < 0 ||\n                                                si >= pLength ||\n                                                sj >= pWidth ||\n                                                sk >= pHeight)\n                                            continue;\n                                        var index = si * pWH + sj * pHeight + sk;\n                                        if (!(vpBits[index] & ISDONE)) {\n                                            vpBits[index] |= ISDONE;\n                                            vpAtomID[index] = atom.serial;\n                                        }  else {\n                                            var atom2 = atoms[vpAtomID[index]];\n                                            if(atom2.serial != atom.serial) {\n                                                ox = cx + mi - Math.floor(0.5 + scaleFactor *\n                                                        (atom2.x + ptranx));\n                                                oy = cy + mj - Math.floor(0.5 + scaleFactor *\n                                                        (atom2.y + ptrany));\n                                                oz = cz + mk - Math.floor(0.5 + scaleFactor *\n                                                        (atom2.z + ptranz));\n                                                if (mi * mi + mj * mj + mk * mk < ox *\n                                                        ox + oy * oy + oz * oz)\n                                                    vpAtomID[index] = atom.serial;\n                                            }\n                                        }\n                                    }// k\n                                }// if\n                            }// kk\n                        }// jj\n                    }// ii\n                }// if\n                nind++;\n            }// j\n        }// i\n    };\n\n    this.buildboundary = function() {\n        var pWH = pWidth*pHeight;\n        for (i = 0; i < pLength; i++) {\n            for (j = 0; j < pHeight; j++) {\n                for (k = 0; k < pWidth; k++) {\n                    var index = i * pWH + k * pHeight + j;\n                    if (vpBits[index] & INOUT) {\n                        var flagbound = false;\n                        var ii = 0;\n                        while (ii < 26) {\n                            var ti = i + nb[ii][0], tj = j + nb[ii][2], tk = k +\n                                    nb[ii][1];\n                            if (ti > -1 &&\n                                ti < pLength &&\n                                tk > -1 &&\n                                tk < pWidth &&\n                                tj > -1 &&\n                                tj < pHeight &&\n                                !(vpBits[ti * pWH + tk * pHeight + tj] & INOUT)) {\n                                vpBits[index] |= ISBOUND;\n                                break;\n                            } else\n                                ii++;\n                        }\n                    }\n                }\n            }\n        }\n    };\n\n    // a little class for 3d array, should really generalize this and\n    // use throughout...\n    var PointGrid = function(length, width, height) {\n        // the standard says this is zero initialized\n        var data = new Int32Array(length * width * height * 3);\n\n        // set position x,y,z to pt, which has ix,iy,and iz\n        this.set = function(x, y, z, pt) {\n            var index = ((((x * width) + y) * height) + z) * 3;\n            data[index] = pt.ix;\n            data[index + 1] = pt.iy;\n            data[index + 2] = pt.iz;\n        };\n\n        // return point at x,y,z\n        this.get = function(x, y, z) {\n            var index = ((((x * width) + y) * height) + z) * 3;\n            return {\n                ix : data[index],\n                iy : data[index + 1],\n                iz : data[index + 2]\n            };\n        };\n    };\n\n    this.fastdistancemap = function() {\n        var eliminate = 0;\n        var certificate;\n        var i, j, k, n;\n\n        var boundPoint = new PointGrid(pLength, pWidth, pHeight);\n        var pWH = pWidth*pHeight;\n        var cutRSq = cutRadius*cutRadius;\n\n        var inarray = [];\n        var outarray = [];\n\n        var index;\n\n        for (i = 0; i < pLength; i++) {\n            for (j = 0; j < pWidth; j++) {\n                for (k = 0; k < pHeight; k++) {\n                    index = i * pWH + j * pHeight + k;\n                    vpBits[index] &= ~ISDONE; // isdone = false\n                    if (vpBits[index] & INOUT) {\n                        if (vpBits[index] & ISBOUND) {\n                            var triple = {\n                                ix : i,\n                                iy : j,\n                                iz : k\n                            };\n                            boundPoint.set(i, j, k, triple);\n                            inarray.push(triple);\n                            vpDistance[index] = 0;\n                            vpBits[index] |= ISDONE;\n                            vpBits[index] &= ~ISBOUND;\n                        }\n                    }\n                }\n            }\n        }\n\n        do {\n            outarray = this.fastoneshell(inarray, boundPoint);\n            inarray = [];\n            for (i = 0, n = outarray.length; i < n; i++) {\n                index = pWH * outarray[i].ix + pHeight *\n                    outarray[i].iy + outarray[i].iz;\n                vpBits[index] &= ~ISBOUND;\n                if (vpDistance[index] <= 1.0404 * cutRSq) {\n                    inarray.push({\n                        ix : outarray[i].ix,\n                        iy : outarray[i].iy,\n                        iz : outarray[i].iz\n                    });\n                }\n            }\n        } while (inarray.length !== 0);\n\n        inarray = [];\n        outarray = [];\n        boundPoint = null;\n\n        var cutsf = scaleFactor - 0.5;\n        if (cutsf < 0)\n            cutsf = 0;\n        var cutoff = cutRSq - 0.50 / (0.1 + cutsf);\n        for (i = 0; i < pLength; i++) {\n            for (j = 0; j < pWidth; j++) {\n                for (k = 0; k < pHeight; k++) {\n                    index = i * pWH + j * pHeight + k;\n                    vpBits[index] &= ~ISBOUND;\n                    // ses solid\n                    if (vpBits[index] & INOUT) {\n                        if (!(vpBits[index] & ISDONE) ||\n                                ((vpBits[index] & ISDONE) && vpDistance[index] >= cutoff)) {\n                            vpBits[index] |= ISBOUND;\n                        }\n                    }\n                }\n            }\n        }\n\n    };\n\n    this.fastoneshell = function(inarray, boundPoint) { // (int* innum,int\n        // *allocout,voxel2\n        // ***boundPoint, int*\n        // outnum, int *elimi)\n        var tx, ty, tz;\n        var dx, dy, dz;\n        var i, j, n;\n        var square;\n        var bp, index;\n        var outarray = [];\n        if (inarray.length === 0)\n            return outarray;\n\n        tnv = {\n            ix : -1,\n            iy : -1,\n            iz : -1\n        };\n        var pWH = pWidth*pHeight;\n        for ( i = 0, n = inarray.length; i < n; i++) {\n            tx = inarray[i].ix;\n            ty = inarray[i].iy;\n            tz = inarray[i].iz;\n            bp = boundPoint.get(tx, ty, tz);\n\n            for (j = 0; j < 6; j++) {\n                tnv.ix = tx + nb[j][0];\n                tnv.iy = ty + nb[j][1];\n                tnv.iz = tz + nb[j][2];\n\n                if (tnv.ix < pLength && tnv.ix > -1 && tnv.iy < pWidth &&\n                        tnv.iy > -1 && tnv.iz < pHeight && tnv.iz > -1) {\n                    index = tnv.ix * pWH + pHeight * tnv.iy + tnv.iz;\n\n                    if ((vpBits[index] & INOUT) && !(vpBits[index] & ISDONE)) {\n\n                        boundPoint.set(tnv.ix, tnv.iy, tz + nb[j][2], bp);\n                        dx = tnv.ix - bp.ix;\n                        dy = tnv.iy - bp.iy;\n                        dz = tnv.iz - bp.iz;\n                        square = dx * dx + dy * dy + dz * dz;\n                        vpDistance[index] = square;\n                        vpBits[index] |= ISDONE;\n                        vpBits[index] |= ISBOUND;\n\n                        outarray.push({\n                            ix : tnv.ix,\n                            iy : tnv.iy,\n                            iz : tnv.iz\n                        });\n                    } else if ((vpBits[index] & INOUT) && (vpBits[index] & ISDONE)) {\n\n                        dx = tnv.ix - bp.ix;\n                        dy = tnv.iy - bp.iy;\n                        dz = tnv.iz - bp.iz;\n                        square = dx * dx + dy * dy + dz * dz;\n                        if (square < vpDistance[index]) {\n                            boundPoint.set(tnv.ix, tnv.iy, tnv.iz, bp);\n\n                            vpDistance[index] = square;\n                            if (!(vpBits[index] & ISBOUND)) {\n                                vpBits[index] |= ISBOUND;\n                                outarray.push({\n                                    ix : tnv.ix,\n                                    iy : tnv.iy,\n                                    iz : tnv.iz\n                                });\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        // console.log(\"part1\", positout);\n\n        for (i = 0, n = inarray.length; i < n; i++) {\n            tx = inarray[i].ix;\n            ty = inarray[i].iy;\n            tz = inarray[i].iz;\n            bp = boundPoint.get(tx, ty, tz);\n\n            for (j = 6; j < 18; j++) {\n                tnv.ix = tx + nb[j][0];\n                tnv.iy = ty + nb[j][1];\n                tnv.iz = tz + nb[j][2];\n\n                if(tnv.ix < pLength && tnv.ix > -1 && tnv.iy < pWidth &&\n                        tnv.iy > -1 && tnv.iz < pHeight && tnv.iz > -1) {\n                    index = tnv.ix * pWH + pHeight * tnv.iy + tnv.iz;\n\n                    if ((vpBits[index] & INOUT) && !(vpBits[index] & ISDONE)) {\n                        boundPoint.set(tnv.ix, tnv.iy, tz + nb[j][2], bp);\n\n                        dx = tnv.ix - bp.ix;\n                        dy = tnv.iy - bp.iy;\n                        dz = tnv.iz - bp.iz;\n                        square = dx * dx + dy * dy + dz * dz;\n                        vpDistance[index] = square;\n                        vpBits[index] |= ISDONE;\n                        vpBits[index] |= ISBOUND;\n\n                        outarray.push({\n                            ix : tnv.ix,\n                            iy : tnv.iy,\n                            iz : tnv.iz\n                        });\n                    } else if ((vpBits[index] & INOUT) && (vpBits[index] & ISDONE)) {\n                        dx = tnv.ix - bp.ix;\n                        dy = tnv.iy - bp.iy;\n                        dz = tnv.iz - bp.iz;\n                        square = dx * dx + dy * dy + dz * dz;\n                        if (square < vpDistance[index]) {\n                            boundPoint.set(tnv.ix, tnv.iy, tnv.iz, bp);\n                            vpDistance[index] = square;\n                            if (!(vpBits[index] & ISBOUND)) {\n                                vpBits[index] |= ISBOUND;\n                                outarray.push({\n                                    ix : tnv.ix,\n                                    iy : tnv.iy,\n                                    iz : tnv.iz\n                                });\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        // console.log(\"part2\", positout);\n\n        for (i = 0, n = inarray.length; i < n; i++) {\n            tx = inarray[i].ix;\n            ty = inarray[i].iy;\n            tz = inarray[i].iz;\n            bp = boundPoint.get(tx, ty, tz);\n\n            for (j = 18; j < 26; j++) {\n                tnv.ix = tx + nb[j][0];\n                tnv.iy = ty + nb[j][1];\n                tnv.iz = tz + nb[j][2];\n\n                if (tnv.ix < pLength && tnv.ix > -1 && tnv.iy < pWidth &&\n                        tnv.iy > -1 && tnv.iz < pHeight && tnv.iz > -1) {\n                    index = tnv.ix * pWH + pHeight * tnv.iy + tnv.iz;\n\n                    if ((vpBits[index] & INOUT) && !(vpBits[index] & ISDONE)) {\n                        boundPoint.set(tnv.ix, tnv.iy, tz + nb[j][2], bp);\n\n                        dx = tnv.ix - bp.ix;\n                        dy = tnv.iy - bp.iy;\n                        dz = tnv.iz - bp.iz;\n                        square = dx * dx + dy * dy + dz * dz;\n                        vpDistance[index] = square;\n                        vpBits[index] |= ISDONE;\n                        vpBits[index] |= ISBOUND;\n\n                        outarray.push({\n                            ix : tnv.ix,\n                            iy : tnv.iy,\n                            iz : tnv.iz\n                        });\n                    } else if ((vpBits[index] & INOUT)  && (vpBits[index] & ISDONE)) {\n                        dx = tnv.ix - bp.ix;\n                        dy = tnv.iy - bp.iy;\n                        dz = tnv.iz - bp.iz;\n                        square = dx * dx + dy * dy + dz * dz;\n                        if (square < vpDistance[index]) {\n                            boundPoint.set(tnv.ix, tnv.iy, tnv.iz, bp);\n\n                            vpDistance[index] = square;\n                            if (!(vpBits[index] & ISBOUND)) {\n                                vpBits[index] |= ISBOUND;\n                                outarray.push({\n                                    ix : tnv.ix,\n                                    iy : tnv.iy,\n                                    iz : tnv.iz\n                                });\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        // console.log(\"part3\", positout);\n        return outarray;\n    };\n\n    this.marchingcubeinit = function(stype) {\n        for ( var i = 0, lim = vpBits.length; i < lim; i++) {\n            if (stype == 1) {// vdw\n                vpBits[i] &= ~ISBOUND;\n            } else if (stype == 4) { // ses\n                vpBits[i] &= ~ISDONE;\n                if (vpBits[i] & ISBOUND)\n                    vpBits[i] |= ISDONE;\n                vpBits[i] &= ~ISBOUND;\n            } else if (stype == 2) {// after vdw\n                if ((vpBits[i] & ISBOUND) && (vpBits[i] & ISDONE))\n                    vpBits[i] &= ~ISBOUND;\n                else if ((vpBits[i] & ISBOUND) && !(vpBits[i] & ISDONE))\n                    vpBits[i] |= ISDONE;\n            } else if (stype == 3) { // sas\n                vpBits[i] &= ~ISBOUND;\n            }\n        }\n    };\n\n    // this code allows me to empirically prune the marching cubes code tables\n    // to more efficiently handle discrete data\n    var counter = function() {\n        var data = Array(256);\n        for ( var i = 0; i < 256; i++)\n            data[i] = [];\n\n        this.incrementUsed = function(i, j) {\n            if (typeof data[i][j] === 'undefined')\n                data[i][j] = {\n                    used : 0,\n                    unused : 0\n                };\n            data[i][j].used++;\n        };\n\n        this.incrementUnused = function(i, j) {\n            if (typeof data[i][j] === 'undefined')\n                data[i][j] = {\n                    used : 0,\n                    unused : 0\n                };\n            data[i][j].unused++;\n\n        };\n\n        var redoTable = function(triTable) {\n            var str = \"[\";\n            for ( var i = 0; i < triTable.length; i++) {\n                var code = 0;\n                var table = triTable[i];\n                for ( var j = 0; j < table.length; j++) {\n                    code |= (1 << (table[j]));\n                }\n                str += \"0x\" + code.toString(16) + \", \";\n            }\n            str += \"]\";\n            //console.log(str);\n        };\n\n        this.print = function() {\n\n            var table = MarchingCube.triTable;\n            var str;\n            var newtable = [];\n            for ( var i = 0; i < table.length; i++) {\n                var newarr = [];\n                for ( var j = 0; j < table[i].length; j += 3) {\n                    var k = j / 3;\n                    if (typeof data[i][k] === 'undefined' || !data[i][k].unused) {\n                        newarr.push(table[i][j]);\n                        newarr.push(table[i][j + 1]);\n                        newarr.push(table[i][j + 2]);\n                    }\n                    if (typeof data[i][k] === 'undefined')\n                        console.log(\"undef \" + i + \",\" + k);\n                }\n                newtable.push(newarr);\n            }\n            //console.log(JSON.stringify(newtable));\n            redoTable(newtable);\n        };\n    };\n\n    this.marchingcube = function(stype) {\n        this.marchingcubeinit(stype);\n        verts = []; faces = [];\n        $3Dmol.MarchingCube.march(vpBits, verts, faces, {\n            smooth : 1,\n            nX : pLength,\n            nY : pWidth,\n            nZ : pHeight\n        });\n\n        var pWH = pWidth*pHeight;\n        for (var i = 0, vlen = verts.length; i < vlen; i++) {\n            verts[i]['atomid'] = vpAtomID[verts[i].x * pWH + pHeight *\n                    verts[i].y + verts[i].z];\n        }\n\n        $3Dmol.MarchingCube.laplacianSmooth(1, verts, faces);\n\n    };\n\n\n};\n\n/*! setupsurface.js from SurfaceWorker.js\n * @author David Koes  / https://github.com/3dmol/3Dmol.js/tree/master/3Dmol\n * Modified by Jiyao Wang / https://github.com/ncbi/icn3d\n */\n\n$3Dmol.SetupSurface = function (data) {\n    var me = this;\n\n    //var $3Dmol = $3Dmol || {};\n\n    //var vol = $3Dmol.volume(data.extent);\n    var vol = undefined;\n\n    var threshbox = data.threshbox; // maximum possible boxsize, default 180\n\n    var ps = new $3Dmol.ProteinSurface(threshbox);\n    ps.initparm(data.extent, (data.type === 1) ? false : true);\n\n    ps.fillvoxels(data.allatoms, data.extendedAtoms);\n\n    ps.buildboundary();\n\n    //if (data.type === 4 || data.type === 2) {\n    if (data.type === 2) {\n        ps.fastdistancemap();\n        ps.boundingatom(false);\n        ps.fillvoxelswaals(data.allatoms, data.extendedAtoms);\n    }\n\n    //ps.marchingcube(data.type);\n    ps.marchingcube();\n\n    ps.vpBits = null; // uint8 array of bitmasks\n    ps.vpDistance = null; // floatarray of _squared_ distances\n    ps.vpAtomID = null; // intarray\n\n    var result = ps.getFacesAndVertices(data.atomsToShow);\n\n    ps.faces = null;\n    ps.verts = null;\n\n    return result;\n};\n\n\n/*! ProteinSurface4.js\n * @author David Koes  / https://github.com/3dmol/3Dmol.js/tree/master/3Dmol\n * Modified by Jiyao Wang / https://github.com/ncbi/icn3d\n */\n\n/*  ProteinSurface.js by biochem_fan\n\nPorted and modified for Javascript based on EDTSurf,\n  whose license is as follows.\n\nPermission to use, copy, modify, and distribute this program for any\npurpose, with or without fee, is hereby granted, provided that this\ncopyright notice and the reference information appear in all copies or\nsubstantial portions of the Software. It is provided \"as is\" without\nexpress or implied warranty.\n\nReference:\nhttp://zhanglab.ccmb.med.umich.edu/EDTSurf/\nD. Xu, Y. Zhang (2009) Generating Triangulated Macromolecular Surfaces\nby Euclidean Distance Transform. PLoS ONE 4(12): e8140.\n\n=======\n\nTODO: Improved performance on Firefox\n      Reduce memory consumption\n      Refactor!\n */\n\n\n// dkoes\n// Surface calculations.  This must be safe to use within a web worker.\nif (typeof console === 'undefined') {\n    // this should only be true inside of a webworker\n    console = {\n        log : function() {\n        }\n    };\n}\n\n$3Dmol.ElectronMap = function(threshbox) {\n\n    // constants for vpbits bitmasks\n    /** @const */\n    var INOUT = 1;\n    /** @const */\n    var ISDONE = 2;\n    /** @const */\n    var ISBOUND = 4;\n\n    var isovalue = 1.5;\n    var dataArray = {};\n    var matrix, center, pmin, pmax, water, header, type;\n\n    var ptranx = 0, ptrany = 0, ptranz = 0;\n    var probeRadius = 1.4;\n    var defaultScaleFactor = 2;\n    var scaleFactor = defaultScaleFactor; // 2 is .5A grid; if this is made user configurable,\n                            // also have to adjust offset used to find non-shown\n                            // atoms\n    var pHeight = 0, pWidth = 0, pLength = 0;\n    var cutRadius = 0;\n    var vpBits = null; // uint8 array of bitmasks\n    var vpDistance = null; // floatarray of _squared_ distances\n    var vpAtomID = null; // intarray\n    var vertnumber = 0, facenumber = 0;\n    var pminx = 0, pminy = 0, pminz = 0, pmaxx = 0, pmaxy = 0, pmaxz = 0;\n\n    var depty = {}, widxz = {};\n    var faces, verts;\n    var nb = [ new Int32Array([ 1, 0, 0 ]), new Int32Array([ -1, 0, 0 ]),\n               new Int32Array([ 0, 1, 0 ]), new Int32Array([ 0, -1, 0 ]),\n               new Int32Array([ 0, 0, 1 ]),\n               new Int32Array([ 0, 0, -1 ]),\n               new Int32Array([ 1, 1, 0 ]),\n               new Int32Array([ 1, -1, 0 ]),\n               new Int32Array([ -1, 1, 0 ]),\n               new Int32Array([ -1, -1, 0 ]),\n               new Int32Array([ 1, 0, 1 ]),\n               new Int32Array([ 1, 0, -1 ]),\n               new Int32Array([ -1, 0, 1 ]),\n               new Int32Array([ -1, 0, -1 ]),\n               new Int32Array([ 0, 1, 1 ]),\n               new Int32Array([ 0, 1, -1 ]),\n               new Int32Array([ 0, -1, 1 ]),\n               new Int32Array([ 0, -1, -1 ]),\n               new Int32Array([ 1, 1, 1 ]),\n               new Int32Array([ 1, 1, -1 ]),\n               new Int32Array([ 1, -1, 1 ]),\n               new Int32Array([ -1, 1, 1 ]),\n               new Int32Array([ 1, -1, -1 ]),\n               new Int32Array([ -1, -1, 1 ]),\n               new Int32Array([ -1, 1, -1 ]),\n               new Int32Array([ -1, -1, -1 ]) ];\n\n    this.getFacesAndVertices = function(allatoms, atomlist) {\n        var atomsToShow = {};\n        var i, il;\n        for (i = 0, il = atomlist.length; i < il; i++)\n            atomsToShow[atomlist[i]] = 1;\n        var vertices = verts;\n\n        for (i = 0, il = vertices.length; i < il; i++) {\n/*\n            vertices[i].x = vertices[i].x / scaleFactor - ptranx;\n            vertices[i].y = vertices[i].y / scaleFactor - ptrany;\n            vertices[i].z = vertices[i].z / scaleFactor - ptranz;\n*/\n            var r = new THREE.Vector3(vertices[i].x, vertices[i].y, vertices[i].z).applyMatrix4(matrix);\n            vertices[i].x = r.x / scaleFactor - ptranx;\n            vertices[i].y = r.y / scaleFactor - ptrany;\n            vertices[i].z = r.z / scaleFactor - ptranz;\n        }\n\n        var finalfaces = [];\n\n        for (i = 0, il = faces.length; i < il; i += 3) {\n            //var f = faces[i];\n            var fa = faces[i], fb = faces[i+1], fc = faces[i+2];\n\n            if (fa !== fb && fb !== fc && fa !== fc){\n                finalfaces.push({\"a\":fa, \"b\":fb, \"c\":fc});\n            }\n        }\n\n        //try to help the garbage collector\n        vpBits = null; // uint8 array of bitmasks\n        vpDistance = null; // floatarray\n        vpAtomID = null; // intarray\n\n        return {\n            'vertices' : vertices, //shownVertices,\n            'faces' : finalfaces\n        };\n    };\n\n\n    this.initparm = function(inHeader, inData, inMatrix, inIsovalue, inCenter, inMaxdist, inPmin, inPmax, inWater, inType) {\n        header = inHeader;\n\n        if(header.max !== undefined) { // EM density map from EBI\n            isovalue = header.min + (header.max - header.min) * inIsovalue / 100.0;\n        }\n        else if(header.mean !== undefined) { // density map from EBI\n            isovalue = header.mean + header.sigma * inIsovalue; // electron density map from EBI\n        }\n        else {\n            isovalue = inIsovalue;\n        }\n\n        dataArray = inData;\n        matrix = inMatrix;\n        center = inCenter;\n        maxdist = inMaxdist;\n        pmin = inPmin;\n        pmax = inPmax;\n        water = inWater;\n        type = inType;\n\n        var margin = (1 / scaleFactor) * 5.5; // need margin to avoid\n                                                // boundary/round off effects\n        //origextent = extent;\n\n        pminx = 0; pmaxx = header.xExtent - 1;\n        pminy = 0; pmaxy = header.yExtent - 1;\n        pminz = 0; pmaxz = header.zExtent - 1;\n\n        ptranx = -pminx;\n        ptrany = -pminy;\n        ptranz = -pminz;\n\n        var maxLen = pmaxx - pminx;\n        if ((pmaxy - pminy) > maxLen) maxLen = pmaxy - pminy;\n        if ((pmaxz - pminz) > maxLen) maxLen = pmaxz - pminz;\n\n        scaleFactor = 1;\n        boxLength = maxLen;\n\n        pLength = Math.ceil(scaleFactor * (pmaxx - pminx)) + 1;\n        pWidth = Math.ceil(scaleFactor * (pmaxy - pminy)) + 1;\n        pHeight = Math.ceil(scaleFactor * (pmaxz - pminz)) + 1;\n\n        //this.boundingatom();\n        cutRadius = probeRadius * scaleFactor;\n\n        vpBits = new Uint8Array(pLength * pWidth * pHeight);\n        //vpDistance = new Float64Array(pLength * pWidth * pHeight); // float 32\n        //vpAtomID = new Int32Array(pLength * pWidth * pHeight);\n        vpAtomID = new Uint8Array(pLength * pWidth * pHeight);\n        //console.log(\"Box size: \", pLength, pWidth, pHeight, vpBits.length);\n    };\n\n    this.fillvoxels = function(atoms, atomlist) { // (int seqinit,int\n        // seqterm,bool\n        // atomtype,atom*\n        // proseq,bool bcolor)\n        var i, j, k, il;\n        for (i = 0, il = vpBits.length; i < il; i++) {\n            vpBits[i] = 0;\n            //vpDistance[i] = -1.0;\n            vpAtomID[i] = 0;\n        }\n\n        var inverseMatrix = new THREE.Matrix4().getInverse(matrix);\n\n        var indexArray = [];\n        maxdist = parseInt(maxdist); // has to be integer\n        var widthHeight = pWidth * pHeight;\n        var lengthWidth = pLength * pWidth;\n\n        for (var serial in atomlist) {\n            var atom = atoms[atomlist[serial]];\n            var r = new THREE.Vector3(atom.coord.x, atom.coord.y, atom.coord.z).applyMatrix4(inverseMatrix);\n\n            for(i = Math.floor(r.x) - maxdist, il = Math.ceil(r.x) + maxdist; i <= il; ++i) {\n                if(i < 0 || i > header.xExtent - 1) continue;\n                for(j = Math.floor(r.y) - maxdist, jl = Math.ceil(r.y) + maxdist; j<= jl; ++j) {\n                    if(j < 0 || j > header.yExtent - 1) continue;\n                    for(k = Math.floor(r.z) - maxdist, kl = Math.ceil(r.z) + maxdist; k<= kl; ++k) {\n                        if(k < 0 || k > header.zExtent - 1) continue;\n\n                        var index = i * widthHeight + j * pHeight + k;\n                        indexArray.push(index);\n                    }\n                }\n            }\n        }\n\n        for(i = 0, il = indexArray.length; i < il; ++i) {\n            var index = indexArray[i];\n            if(type == '2fofc') {\n                vpBits[index] = (dataArray[index] >= isovalue) ? 1 : 0;\n                //vpAtomID[index] = (dataArray[index] >= 0) ? 1 : 0; // determine whether it's positive\n            }\n            else if(type == 'fofc') {\n                vpBits[index] = (dataArray[index] >= isovalue || dataArray[index] <= -isovalue) ? 1 : 0;\n                vpAtomID[index] = (dataArray[index] >= 0) ? 1 : 0; // determine whether it's positive\n            }\n            else if(type == 'em') {\n                vpBits[index] = (dataArray[index] >= isovalue) ? 1 : 0;\n                //vpAtomID[index] = (dataArray[index] >= 0) ? 1 : 0; // determine whether it's positive\n            }\n        }\n\n/*\n        var index = 0;\n        for(i = 0; i < pLength; ++i) {\n            for(j = 0; j < pWidth; ++j) {\n                for(k = 0; k < pHeight; ++k) {\n                    vpBits[index] = (dataArray[index] >= isovalue || dataArray[index] <= -isovalue) ? 1 : 0;\n                    vpAtomID[index] = (dataArray[index] >= 0) ? 1 : 0;\n                    ++index;\n                }\n            }\n        }\n*/\n\n        for (i = 0, il = vpBits.length; i < il; i++)\n            if (vpBits[i] & INOUT)\n                vpBits[i] |= ISDONE;\n\n    };\n\n    this.buildboundary = function() {\n        var pWH = pWidth*pHeight;\n        for (i = 0; i < pLength; i++) {\n            for (j = 0; j < pHeight; j++) {\n                for (k = 0; k < pWidth; k++) {\n                    var index = i * pWH + k * pHeight + j;\n                    if (vpBits[index] & INOUT) {\n                        var flagbound = false;\n                        var ii = 0;\n                        while (ii < 26) {\n                            var ti = i + nb[ii][0], tj = j + nb[ii][2], tk = k +\n                                    nb[ii][1];\n                            if (ti > -1 &&\n                                ti < pLength &&\n                                tk > -1 &&\n                                tk < pWidth &&\n                                tj > -1 &&\n                                tj < pHeight &&\n                                !(vpBits[ti * pWH + tk * pHeight + tj] & INOUT)) {\n                                vpBits[index] |= ISBOUND;\n                                break;\n                            } else\n                                ii++;\n                        }\n                    }\n                }\n            }\n        }\n    };\n\n    this.marchingcubeinit = function(stype) {\n        for ( var i = 0, lim = vpBits.length; i < lim; i++) {\n            if (stype == 1) {// vdw\n                vpBits[i] &= ~ISBOUND;\n            } else if (stype == 4) { // ses\n                vpBits[i] &= ~ISDONE;\n                if (vpBits[i] & ISBOUND)\n                    vpBits[i] |= ISDONE;\n                vpBits[i] &= ~ISBOUND;\n            } else if (stype == 2) {// after vdw\n                if ((vpBits[i] & ISBOUND) && (vpBits[i] & ISDONE))\n                    vpBits[i] &= ~ISBOUND;\n                else if ((vpBits[i] & ISBOUND) && !(vpBits[i] & ISDONE))\n                    vpBits[i] |= ISDONE;\n            } else if (stype == 3) { // sas\n                vpBits[i] &= ~ISBOUND;\n            }\n            else {\n                vpBits[i] &= ~ISBOUND;\n            }\n        }\n    };\n\n    // this code allows me to empirically prune the marching cubes code tables\n    // to more efficiently handle discrete data\n    var counter = function() {\n        var data = Array(256);\n        for ( var i = 0; i < 256; i++)\n            data[i] = [];\n\n        this.incrementUsed = function(i, j) {\n            if (typeof data[i][j] === 'undefined')\n                data[i][j] = {\n                    used : 0,\n                    unused : 0\n                };\n            data[i][j].used++;\n        };\n\n        this.incrementUnused = function(i, j) {\n            if (typeof data[i][j] === 'undefined')\n                data[i][j] = {\n                    used : 0,\n                    unused : 0\n                };\n            data[i][j].unused++;\n\n        };\n\n        var redoTable = function(triTable) {\n            var str = \"[\";\n            for ( var i = 0; i < triTable.length; i++) {\n                var code = 0;\n                var table = triTable[i];\n                for ( var j = 0; j < table.length; j++) {\n                    code |= (1 << (table[j]));\n                }\n                str += \"0x\" + code.toString(16) + \", \";\n            }\n            str += \"]\";\n            //console.log(str);\n        };\n\n        this.print = function() {\n\n            var table = MarchingCube.triTable;\n            var str;\n            var newtable = [];\n            for ( var i = 0; i < table.length; i++) {\n                var newarr = [];\n                for ( var j = 0; j < table[i].length; j += 3) {\n                    var k = j / 3;\n                    if (typeof data[i][k] === 'undefined' || !data[i][k].unused) {\n                        newarr.push(table[i][j]);\n                        newarr.push(table[i][j + 1]);\n                        newarr.push(table[i][j + 2]);\n                    }\n                    if (typeof data[i][k] === 'undefined')\n                        console.log(\"undef \" + i + \",\" + k);\n                }\n                newtable.push(newarr);\n            }\n            //console.log(JSON.stringify(newtable));\n            redoTable(newtable);\n        };\n    };\n\n    this.marchingcube = function(stype) {\n        this.marchingcubeinit(stype);\n        verts = []; faces = [];\n\n        $3Dmol.MarchingCube.march(vpBits, verts, faces, {\n            smooth : 1,\n            nX : pLength,\n            nY : pWidth,\n            nZ : pHeight\n        });\n\n        var pWH = pWidth*pHeight;\n        for (var i = 0, vlen = verts.length; i < vlen; i++) {\n            // positive values\n            verts[i]['atomid'] = vpAtomID[verts[i].x * pWH + pHeight *\n                    verts[i].y + verts[i].z];\n        }\n\n        $3Dmol.MarchingCube.laplacianSmooth(1, verts, faces);\n\n    };\n};\n\n/*! setupsurface.js from SurfaceWorker.js\n * @author David Koes  / https://github.com/3dmol/3Dmol.js/tree/master/3Dmol\n * Modified by Jiyao Wang / https://github.com/ncbi/icn3d\n */\n\n$3Dmol.SetupMap = function (data) {\n    var ps = new $3Dmol.ElectronMap();\n    ps.initparm(data.header, data.data, data.matrix, data.isovalue, data.center, data.maxdist, data.pmin, data.pmax, data.water, data.type);\n\n    ps.fillvoxels(data.allatoms, data.extendedAtoms);\n\n    ps.buildboundary();\n\n    ps.marchingcube();\n\n    ps.vpBits = null; // uint8 array of bitmasks\n    //ps.vpDistance = null; // floatarray of _squared_ distances\n    ps.vpAtomID = null; // intarray\n\n    var result = ps.getFacesAndVertices(data.allatoms, data.atomsToShow);\n\n    ps.faces = null;\n    ps.verts = null;\n\n    return result;\n};\n\n\n/**\n * @author Jiyao Wang <wangjiy@ncbi.nlm.nih.gov> / https://github.com/ncbi/icn3d\n */\n\n// modified from iview (http://istar.cse.cuhk.edu.hk/iview/)\niCn3D.prototype.createSurfaceRepresentation = function (atoms, type, wireframe, opacity) { var me = this;\n    if(Object.keys(atoms).length == 0) return;\n\n    if(opacity == undefined) opacity = 1.0;\n\n    this.opacity = opacity;\n\n    var geo;\n\n    var extent = this.getExtent(atoms);\n\n    // surface from 3Dmol\n    var distance = 5; // consider atom 5 angstrom from the selected atoms\n\n    var extendedAtoms = [];\n\n    if(this.bConsiderNeighbors) {\n        extendedAtoms = Object.keys(this.unionHash(atoms, this.getAtomsWithinAtom(this.atoms, atoms, distance)));\n    }\n    else {\n        extendedAtoms = Object.keys(atoms);\n    }\n\n    //var sigma2fofc = 1.5;\n    //var sigmafofc = 3.0;\n    var maxdist = 1; // maximum distance to show electron density map, set it between 1 AND 2\n\n    var bTransparent = (parseInt(10*opacity) != 10 && !wireframe && !(this.bInstanced && Object.keys(this.atoms).length * this.biomtMatrices.length > this.maxatomcnt) ) ? true : false;\n\n    var ps;\n    if(type == 11) { // 2fofc\n        //maxdist = (me.mapData.sigma2 < 1.5) ? 2 : 1;\n\n        ps = $3Dmol.SetupMap({\n            //extent: extent,\n            allatoms: this.atoms,\n            atomsToShow: Object.keys(atoms),\n            extendedAtoms: extendedAtoms,\n            water: this.water,\n            //type: type,\n            //threshbox: this.threshbox,\n            header: me.mapData.header2,\n            data: me.mapData.data2,\n            matrix: me.mapData.matrix2,\n            isovalue: me.mapData.sigma2,\n            center: this.center,\n            maxdist: maxdist,\n            pmin: this.pmin,\n            pmax: this.pmax,\n            type: '2fofc'\n        });\n    }\n    else if(type == 12) { // fofc\n        //maxdist = (me.mapData.sigma < 3) ? 2 : 1;\n        ps = $3Dmol.SetupMap({\n            //extent: extent,\n            allatoms: this.atoms,\n            atomsToShow: Object.keys(atoms),\n            extendedAtoms: extendedAtoms,\n            water: this.water,\n            //type: type,\n            //threshbox: this.threshbox,\n            header: me.mapData.header,\n            data: me.mapData.data,\n            matrix: me.mapData.matrix,\n            isovalue: me.mapData.sigma,\n            center: this.center,\n            maxdist: maxdist,\n            pmin: this.pmin,\n            pmax: this.pmax,\n            type: 'fofc'\n        });\n    }\n    else if(type == 13) { // em\n        maxdist = 3; // EM map has no unit cell. It could include more gird space.\n\n        ps = $3Dmol.SetupMap({\n            //extent: extent,\n            allatoms: this.atoms,\n            atomsToShow: Object.keys(atoms),\n            extendedAtoms: extendedAtoms,\n            water: this.water,\n            //type: type,\n            //threshbox: this.threshbox,\n            header: me.mapData.headerEm,\n            data: me.mapData.dataEm,\n            matrix: me.mapData.matrixEm,\n            isovalue: me.mapData.sigmaEm,\n            center: this.center,\n            maxdist: maxdist,\n            pmin: this.pmin,\n            pmax: this.pmax,\n            type: 'em'\n        });\n    }\n    else {\n        ps = $3Dmol.SetupSurface({\n            extent: extent,\n            allatoms: this.atoms,\n            atomsToShow: Object.keys(atoms),\n            extendedAtoms: extendedAtoms,\n            type: type,\n            threshbox: (bTransparent) ? 60 : this.threshbox\n        });\n    }\n\n    var verts = ps.vertices;\n    var faces = ps.faces;\n\n    var colorFor2fofc = new THREE.Color('#00FFFF');\n    var colorForfofcPos = new THREE.Color('#00FF00');\n    //var colorForfofcNeg = new THREE.Color('#ff3300');\n    var colorForfofcNeg = new THREE.Color('#ff0000');\n    var colorForEm = new THREE.Color('#00FFFF');\n\n    geo = new THREE.Geometry();\n    geo.vertices = verts.map(function (v) {\n        var r = new THREE.Vector3(v.x, v.y, v.z);\n\n        r.atomid = v.atomid;\n        return r;\n    });\n\n    geo.faces = faces.map(function (f) {\n        //return new THREE.Face3(f.a, f.b, f.c);\n        var vertexColors = ['a', 'b', 'c' ].map(function (d) {\n            if(type == 11) { // 2fofc\n                return colorFor2fofc;\n            }\n            else if(type == 12) { // fofc\n                return (geo.vertices[f[d]].atomid) ? colorForfofcPos : colorForfofcNeg;\n            }\n            else if(type == 13) { // em\n                return colorForEm;\n            }\n            else {\n                var atomid = geo.vertices[f[d]].atomid;\n                return me.atoms[atomid].color;\n            }\n        });\n\n        return new THREE.Face3(f.a, f.b, f.c, undefined, vertexColors);\n    });\n\n\n    //http://analyticphysics.com/Coding%20Methods/Special%20Topics%20in%20Three.js.htm\n    //var c = geo.center();\n\n    //geo.computeFaceNormals();\n    //geo.computeVertexNormals(false);\n    geo.computeVertexNormals(true);\n\n    geo.colorsNeedUpdate = true;\n    geo.normalsNeedUpdate = true;\n\n    geo.type = 'Surface'; // to be recognized in vrml.js for 3D printing\n\n    //var normalArray = geo.data.normals;\n    var normalArray = JSON.parse(JSON.stringify(geo)).data.normals;\n\n    if(bTransparent) { // WebGL has someordering problem when dealing with transparency\n      // the following method minimize the number of objects by a factor of 3\n      var va2faces = {};\n\n      for(var i = 0, il = faces.length; i < il; ++i) {\n        var va = faces[i].a;\n        var vb = faces[i].b;\n        var vc = faces[i].c;\n\n        // It produces less objects using va as the key\n        if(va2faces[va] === undefined) va2faces[va] = [];\n        //va2faces[va].push(va);\n        va2faces[va].push(vb);\n        va2faces[va].push(vc);\n      }\n\n      for(var va in va2faces) {\n        var geometry = new THREE.Geometry();\n        geometry.vertices = [];\n        geometry.faces = [];\n\n        var faceVertices = va2faces[va];\n        for(var i = 0, il = faceVertices.length; i < il; i += 2) {\n            var vb = faceVertices[i];\n            var vc = faceVertices[i + 1];\n\n            geometry.vertices.push(new THREE.Vector3(verts[va].x, verts[va].y, verts[va].z));\n            geometry.vertices.push(new THREE.Vector3(verts[vb].x, verts[vb].y, verts[vb].z));\n            geometry.vertices.push(new THREE.Vector3(verts[vc].x, verts[vc].y, verts[vc].z));\n\n            var vertexColors = [];\n            vertexColors.push(me.atoms[verts[va].atomid].color);\n            vertexColors.push(me.atoms[verts[vb].atomid].color);\n            vertexColors.push(me.atoms[verts[vc].atomid].color);\n\n            var normals = [];\n            normals.push(normalArray[va]);\n            normals.push(normalArray[vb]);\n            normals.push(normalArray[vc]);\n\n            var initPos = i / 2 * 3;\n            geometry.faces.push(new THREE.Face3(initPos, initPos + 1, initPos + 2, normals, vertexColors));\n        }\n\n        //geometry.computeVertexNormals(false);\n\n        geometry.colorsNeedUpdate = true;\n        //geometry.normalsNeedUpdate = true;\n\n        geometry.type = 'Surface'; // to be recognized in vrml.js for 3D printing\n\n        var mesh = new THREE.Mesh(geometry, new THREE.MeshPhongMaterial({\n            specular: this.frac,\n            shininess: 10, //30,\n            emissive: 0x000000,\n            vertexColors: THREE.VertexColors,\n            wireframe: wireframe,\n            opacity: opacity,\n            transparent: true,\n            side: THREE.DoubleSide\n        }));\n\n        //http://www.html5gamedevs.com/topic/7288-threejs-transparency-bug-or-limitation-or-what/\n        //mesh.renderOrder = 0; // default 0\n        var sum = new THREE.Vector3(0,0,0);\n        for(var i = 0, il = mesh.geometry.vertices.length; i < il; ++i) {\n            sum = sum.add(mesh.geometry.vertices[i]);\n        }\n\n        var realPos = sum.multiplyScalar(1.0 / mesh.geometry.vertices.length).sub(me.oriCenter).applyMatrix4(me.cam.matrixWorldInverse);\n        mesh.renderOrder = (me.cam_z > 0) ? -parseInt(realPos.z) : parseInt(realPos.z);\n\n        mesh.onBeforeRender = function(renderer, scene, camera, geometry, material, group) {\n            //https://juejin.im/post/5a0872d4f265da43062a4156\n            var sum = new THREE.Vector3(0,0,0);\n            for(var i = 0, il = this.geometry.vertices.length; i < il; ++i) {\n                sum = sum.add(this.geometry.vertices[i]);\n            }\n\n            var realPos = sum.multiplyScalar(1.0 / this.geometry.vertices.length).sub(me.oriCenter).applyMatrix4(me.cam.matrixWorldInverse);\n            this.renderOrder = (me.cam_z > 0) ? -parseInt(realPos.z) : parseInt(realPos.z);\n        };\n\n        me.mdl.add(mesh);\n\n        if(type == 11 || type == 12) {\n            this.prevMaps.push(mesh);\n        }\n        else if(type == 13) {\n            this.prevEmmaps.push(mesh);\n        }\n        else {\n            this.prevSurfaces.push(mesh);\n        }\n      } // for(var va\n    }\n    else {\n        var mesh = new THREE.Mesh(geo, new THREE.MeshPhongMaterial({\n            specular: this.frac,\n            shininess: 10, //30,\n            emissive: 0x000000,\n            vertexColors: THREE.VertexColors,\n            wireframe: wireframe,\n            opacity: opacity,\n            transparent: true,\n            side: THREE.DoubleSide\n        }));\n\n        //http://www.html5gamedevs.com/topic/7288-threejs-transparency-bug-or-limitation-or-what/\n        mesh.renderOrder = 0; // default 0\n\n        me.mdl.add(mesh);\n\n        if(type == 11 || type == 12) {\n            this.prevMaps.push(mesh);\n        }\n        else if(type == 13) {\n            this.prevEmmaps.push(mesh);\n        }\n        else {\n            this.prevSurfaces.push(mesh);\n        }\n    }\n\n    // remove the reference\n    ps = null;\n    verts = null;\n    faces = null;\n\n    // remove the reference\n    geo = null;\n\n    // do not add surface to raycasting objects for pk\n};\n\n// http://soledadpenades.com/articles/three-js-tutorials/drawing-the-coordinate-axes/\niCn3D.prototype.buildAxes = function (radius) {\n    var axes = new THREE.Object3D();\n\n    axes.add( this.createSingleLine( new THREE.Vector3( 0, 0, 0 ), new THREE.Vector3( 0 + radius, 0, 0 ), 0xFF0000, false, 0.5 ) ); // +X\n    axes.add( this.createSingleLine( new THREE.Vector3( 0, 0, 0 ), new THREE.Vector3( 0 - radius, 0, 0 ), 0x800000, true, 0.5) ); // -X\n\n    axes.add( this.createSingleLine( new THREE.Vector3( 0, 0, 0 ), new THREE.Vector3( 0, 0 + radius, 0 ), 0x00FF00, false, 0.5 ) ); // +Y\n    axes.add( this.createSingleLine( new THREE.Vector3( 0, 0, 0 ), new THREE.Vector3( 0, 0 - radius, 0 ), 0x008000, true, 0.5 ) ); // -Y\n\n    axes.add( this.createSingleLine( new THREE.Vector3( 0, 0, 0 ), new THREE.Vector3( 0, 0, 0 + radius ), 0x0000FF, false, 0.5 ) ); // +Z\n    axes.add( this.createSingleLine( new THREE.Vector3( 0, 0, 0 ), new THREE.Vector3( 0, 0, 0 - radius ), 0x000080, true, 0.5 ) ); // -Z\n\n    this.scene.add( axes );\n};\n\niCn3D.prototype.createLines = function(lines) { // show extra lines, not used for pk, so no this.objects\n   if(lines !== undefined) {\n     for(var name in lines) {\n         var lineArray = lines[name];\n\n         for(var i = 0, il = lineArray.length; i < il; ++i) {\n           var line = lineArray[i];\n\n           var p1 = line.position1;\n           var p2 = line.position2;\n\n           var dashed = (line.dashed) ? line.dashed : false;\n           var dashSize = 0.3;\n\n           //this.mdl.add(this.createSingleLine( p1, p2, colorHex, dashed, dashSize ));\n\n           var radius = this.lineRadius;\n\n           var colorStr = '#' + line.color.replace(/\\#/g, '');\n\n           var color = new THREE.Color(colorStr);\n\n           if(!dashed) {\n                if(name == 'stabilizer') {\n                    this.createBrick(p1, p2, radius, color);\n                }\n                else {\n                    this.createCylinder(p1, p2, radius, color);\n                }\n           }\n           else {\n             var distance = p1.distanceTo(p2);\n\n             var nsteps = parseInt(distance / dashSize);\n             var step = p2.clone().sub(p1).multiplyScalar(dashSize/distance);\n\n             var start, end;\n             for(var j = 0; j < nsteps; ++j) {\n                 if(j % 2 == 1) {\n                      start = p1.clone().add(step.clone().multiplyScalar(j));\n                      end = p1.clone().add(step.clone().multiplyScalar(j + 1));\n\n                      if(name == 'stabilizer') {\n                        this.createBrick(start, end, radius, color);\n                      }\n                      else {\n                        this.createCylinder(start, end, radius, color);\n                      }\n                  }\n             }\n           }\n         }\n     }\n   }\n\n   // do not add the artificial lines to raycasting objects\n};\n\niCn3D.prototype.createBrick = function (p0, p1, radius, color) {\n    var cylinderGeometry = new THREE.CylinderGeometry(1, 1, 1, 4, 1);\n\n    var mesh = new THREE.Mesh(cylinderGeometry, new THREE.MeshPhongMaterial({ specular: this.frac, shininess: 30, emissive: 0x000000, color: color }));\n\n    mesh.position.copy(p0).add(p1).multiplyScalar(0.5);\n    mesh.matrixAutoUpdate = false;\n    mesh.lookAt(p1.clone().sub(p0));\n    mesh.updateMatrix();\n\n    mesh.matrix.multiply(new THREE.Matrix4().makeScale(radius, radius, p0.distanceTo(p1))).multiply(new THREE.Matrix4().makeRotationX(Math.PI * 0.5));\n\n    this.mdl.add(mesh);\n};\n\n\n/**\n * @author Jiyao Wang <wangjiy@ncbi.nlm.nih.gov> / https://github.com/ncbi/icn3d\n */\n\niCn3D.prototype.applyPrevColor = function () {\n    for (var i in this.atoms) {\n        var atom = this.atoms[i];\n        atom.color = this.atomPrevColors[i];\n    }\n};\n\niCn3D.prototype.applyChemicalbindingOptions = function (options) {\n    if(options === undefined) options = this.opts;\n\n    // display mode\n    if (options.chemicalbinding === 'show') {\n        var startAtoms;\n        if(this.chemicals !== undefined && Object.keys(this.chemicals).length > 0) { // show chemical-protein interaction\n            startAtoms = this.hash2Atoms(this.chemicals);\n        }\n\n        // find atoms in chainid1, which interact with chainid2\n        var radius = 4;\n\n        if(startAtoms !== undefined) {\n            var targetAtoms = this.getAtomsWithinAtom(this.atoms, startAtoms, radius);\n\n/*\n            var residueHash = {};\n\n            // draw sidec for these residues\n            for(var i in targetAtoms) {\n              if(startAtoms.hasOwnProperty(i)) continue;\n              residueHash[this.atoms[i].structure + '_' + this.atoms[i].chain + '_' + this.atoms[i].resi] = 1;\n            }\n\n            var residueArray = Object.keys(residueHash);\n\n            for(var i = 0, il = residueArray.length; i < il; ++i) {\n                for(var j in this.residues[residueArray[i]]) {\n                    // all atoms should be shown for hbonds\n                    //this.atoms[j].style2 = 'stick';\n                    this.atoms[j].style2 = 'lines';\n                }\n            }\n*/\n            // show hydrogens\n            var threshold = 3.5;\n            this.opts[\"hbonds\"] = \"yes\";\n            //this.opts[\"water\"] = \"dot\";\n\n            if(Object.keys(targetAtoms).length > 0) {\n                this.calculateChemicalHbonds(startAtoms, targetAtoms, parseFloat(threshold) );\n            }\n\n            // zoom in on the atoms\n            this.zoominSelection( this.unionHash(startAtoms, targetAtoms) );\n\n            //this.opts['fog'] = 'yes';\n        }\n    }\n    else if (options.chemicalbinding === 'hide') {\n        // truen off hdonds\n        this.hideHbonds();\n\n        // center on the atoms\n        this.zoominSelection(this.atoms);\n\n        //this.opts['fog'] = 'no';\n    }\n};\n\niCn3D.prototype.hideHbonds = function () {\n        this.opts[\"hbonds\"] = \"no\";\n        if(this.lines === undefined) this.lines = {};\n        this.lines['hbond'] = [];\n        this.hbondpnts = [];\n\n        for(var i in this.atoms) {\n            this.atoms[i].style2 = 'nothing';\n        }\n\n        for(var i in this.sidec) {\n            this.atoms[i].style2 = this.opts[\"sidec\"];\n        }\n\n        for(var i in this.water) {\n            this.atoms[i].style = this.opts[\"water\"];\n        }\n};\n\niCn3D.prototype.applySsbondsOptions = function (options) {\n    if(options === undefined) options = this.opts;\n\n    if (options.ssbonds.toLowerCase() === 'yes' && this.ssbondpnts !== undefined) {\n      var color = '#FFFF00';\n      var colorObj = new THREE.Color(0xFFFF00);\n\n      var structureArray = Object.keys(this.structures);\n      var start, end;\n\n      if(this.bAlternate) {\n          start = this.ALTERNATE_STRUCTURE;\n          end = this.ALTERNATE_STRUCTURE + 1;\n      }\n      else {\n          start = 0;\n          end = structureArray.length;\n      }\n\n      this.lines['ssbond'] = [];\n\n      for(var s = start, sl = end; s < sl; ++s) {\n          var structure = structureArray[s];\n\n          if(this.ssbondpnts[structure] === undefined) continue;\n\n          //for(var i = 0, lim = Math.floor(this.ssbondpnts[structure].length / 2); i < lim; i++) {\n          for(var i = Math.floor(this.ssbondpnts[structure].length / 2) - 1; i >= 0; i--) {\n            var res1 = this.ssbondpnts[structure][2 * i], res2 = this.ssbondpnts[structure][2 * i + 1];\n            var serial1, serial2;\n\n            var line = {};\n            line.color = color;\n            line.dashed = true;\n\n            var bFound = false;\n            for(var j in this.residues[res1]) {\n                if(this.atoms[j].name === 'SG') {\n                    serial1 = this.atoms[j].serial;\n                    line.position1 = this.atoms[j].coord;\n                    line.serial1 = this.atoms[j].serial;\n                    bFound = true;\n                    break;\n                }\n            }\n\n            if(!bFound) {\n                for(var j in this.residues[res1]) {\n                    if(this.atoms[j].name === 'CA') {\n                        line.position1 = this.atoms[j].coord;\n                        line.serial1 = this.atoms[j].serial;\n                        bFound = true;\n                        break;\n                    }\n                }\n            }\n\n            bFound = false;\n            for(var j in this.residues[res2]) {\n                if(this.atoms[j].name === 'SG') {\n                    serial2 = this.atoms[j].serial;\n                    line.position2 = this.atoms[j].coord;\n                    line.serial2 = this.atoms[j].serial;\n                    bFound = true;\n                    break;\n                }\n            }\n\n            if(!bFound) {\n                for(var j in this.residues[res2]) {\n                    if(this.atoms[j].name === 'CA') {\n                        line.position2 = this.atoms[j].coord;\n                        line.serial2 = this.atoms[j].serial;\n                        bFound = true;\n                        break;\n                    }\n                }\n            }\n\n            // only draw bonds connected with currently displayed atoms\n            if(line.serial1 !== undefined && line.serial2 !== undefined && !this.dAtoms.hasOwnProperty(line.serial1) && !this.dAtoms.hasOwnProperty(line.serial2)) continue;\n\n            // determine whether it's true disulfide bonds\n            // disulfide bond is about 2.05 angstrom\n            var distMax = 3;\n            if(line.position1 === undefined || line.position2 === undefined || line.position1.distanceTo(line.position2) > distMax) {\n                this.ssbondpnts[structure].splice(2 * i, 2);\n                continue;\n            }\n\n            //if(this.atoms[serial1].ids !== undefined) { // mmdb id as input\n                // remove the original disulfide bonds\n                var pos = this.atoms[serial1].bonds.indexOf(serial2);\n                var array1, array2;\n                if(pos != -1) {\n                    array1 = this.atoms[serial1].bonds.slice(0, pos);\n                    array2 = this.atoms[serial1].bonds.slice(pos + 1);\n\n                    this.atoms[serial1].bonds = array1.concat(array2);\n                }\n\n                pos = this.atoms[serial2].bonds.indexOf(serial1);\n                if(pos != -1) {\n                    array1 = this.atoms[serial2].bonds.slice(0, pos);\n                    array2 = this.atoms[serial2].bonds.slice(pos + 1);\n\n                    this.atoms[serial2].bonds = array1.concat(array2);\n                }\n            //}\n\n            //if(this.lines['ssbond'] === undefined) this.lines['ssbond'] = [];\n            this.lines['ssbond'].push(line);\n\n            // create bonds for disulfide bonds\n            //this.createCylinder(line.position1, line.position2, this.cylinderRadius * 0.5, colorObj);\n            this.createCylinder(line.position1, line.position2, this.cylinderRadius, colorObj);\n\n            // show ball and stick for these two residues\n            var residueAtoms = this.unionHash(this.residues[res1], this.residues[res2]);\n\n            // show side chains for the selected atoms\n            var atoms = this.intHash(residueAtoms, this.sidec);\n            var calpha_atoms = this.intHash(residueAtoms, this.calphas);\n            // include calphas\n            atoms = this.unionHash(atoms, calpha_atoms);\n\n            // draw sidec separatedly\n            for(var j in atoms) {\n              this.atoms[j].style2 = 'stick';\n            }\n          } // for(var i = 0,\n      } // for(var s = 0,\n    } // if (options.ssbonds.toLowerCase() === 'yes'\n};\n\niCn3D.prototype.applyMapOptions = function (options) {\n    if(options === undefined) options = this.opts;\n\n    switch (options.mapwireframe) {\n        case 'yes':\n            options.mapwireframe = true;\n            break;\n        case 'no':\n            options.mapwireframe = false;\n            break;\n    }\n\n    var atoms, currAtoms;\n\n    // only show the surface for atoms which are displaying\n    atoms = this.intHash(this.dAtoms, this.hAtoms);\n\n    currAtoms = this.hash2Atoms(atoms);\n\n    switch (options.map.toLowerCase()) {\n        case '2fofc':\n            this.createSurfaceRepresentation(currAtoms, 11, options.mapwireframe);\n            break;\n        case 'fofc':\n            this.createSurfaceRepresentation(currAtoms, 12, options.mapwireframe);\n            break;\n        case 'nothing':\n            // remove surfaces\n            this.removeMaps();\n            break;\n    }\n};\n\niCn3D.prototype.applyEmmapOptions = function (options) {\n    if(options === undefined) options = this.opts;\n\n    switch (options.emmapwireframe) {\n        case 'yes':\n            options.emmapwireframe = true;\n            break;\n        case 'no':\n            options.emmapwireframe = false;\n            break;\n    }\n\n    var atoms, currAtoms;\n\n    // only show the surface for atoms which are displaying\n    atoms = this.intHash(this.dAtoms, this.hAtoms);\n\n    currAtoms = this.hash2Atoms(atoms);\n\n    switch (options.emmap.toLowerCase()) {\n        case 'em':\n            this.createSurfaceRepresentation(currAtoms, 13, options.emmapwireframe);\n            break;\n        case 'nothing':\n            // remove surfaces\n            this.removeEmmaps();\n            break;\n    }\n};\n\niCn3D.prototype.setFog = function() {\n    var background = this.backgroundColors[this.opts.background.toLowerCase()];\n\n    // apply fog\n    if(this.opts['fog'] === 'yes') {\n        if(this.opts['camera'] === 'perspective') {        //perspective, orthographic\n            //this.scene.fog = new THREE.Fog(background, this.cam_z, this.cam_z + 0.5 * this.maxD);\n            //this.scene.fog = new THREE.Fog(background, 2 * this.maxD, 2.5 * this.maxD);\n            this.scene.fog = new THREE.Fog(background, 1.5 * this.maxD, 3 * this.maxD);\n        }\n        else if(this.opts['camera'] === 'orthographic') {\n            //this.scene.fog = new THREE.FogExp2(background, 2);\n            //this.scene.fog.near = 1.5 * this.maxD;\n            //this.scene.fog.far = 3 * this.maxD;\n\n            this.scene.fog = undefined;\n        }\n    }\n    else {\n        this.scene.fog = undefined;\n    }\n};\n\n// change the display atom when alternating\niCn3D.prototype.alternateStructures = function () {\n    var hAtomsCount = Object.keys(this.hAtoms).length;\n    var allAtomsCount = Object.keys(this.atoms).length;\n\n    this.dAtoms = {};\n\n    var moleculeArray = Object.keys(this.structures);\n    for(var i = 0, il = moleculeArray.length; i < il; ++i) {\n        var structure = moleculeArray[i];\n        if(i > this.ALTERNATE_STRUCTURE || (this.ALTERNATE_STRUCTURE === il - 1 && i === 0) ) {\n            for(var k in this.structures[structure]) {\n                var chain = this.structures[structure][k];\n                this.dAtoms = this.unionHash(this.dAtoms, this.chains[chain]);\n            }\n\n            this.ALTERNATE_STRUCTURE = i;\n            break;\n        }\n    }\n\n    if(hAtomsCount < allAtomsCount) {\n        this.dAtoms = this.intHash(this.dAtoms, this.hAtoms);\n\n        this.bShowHighlight = false;\n        this.opts['rotationcenter'] = 'highlight center';\n    }\n\n    // also alternating the surfaces\n    this.removeSurfaces();\n    this.applySurfaceOptions();\n\n    this.removeMaps();\n    this.applyMapOptions();\n\n    this.removeEmmaps();\n    this.applyEmmapOptions();\n\n    this.draw();\n\n    this.bShowHighlight = true;\n    this.opts['rotationcenter'] = 'molecule center';\n};\n\niCn3D.prototype.updateStabilizer = function () {\n    this.stabilizerpnts = [];\n\n    if(this.pairArray !== undefined) {\n        for(var i = 0, il = this.pairArray.length; i < il; i += 2) {\n            var coordI = this.getResidueRepPos(this.pairArray[i]);\n            var coordJ = this.getResidueRepPos(this.pairArray[i + 1]);\n\n            this.stabilizerpnts.push(coordI);\n            this.stabilizerpnts.push(coordJ);\n        }\n    }\n};\n\niCn3D.prototype.getResidueRepPos = function (serial) { var me = this;\n    var atomIn = this.atoms[serial];\n    var residueid = atomIn.structure + \"_\" + atomIn.chain + \"_\" + atomIn.resi;\n\n    var pos;\n    if(!this.proteins.hasOwnProperty(serial) && !this.nucleotides.hasOwnProperty(serial)) { // chemicals or ions\n        pos = atomIn.coord;\n    }\n    else {\n        for(var i in this.residues[residueid]) {\n            var atom = this.atoms[i];\n            if(atom.name === 'N3') { // nucleotide: N3\n                pos = this.atoms[i].coord;\n                break;\n            }\n            else if(atom.name === 'CA' && atom.ss == 'coil') { // protein coil: CA\n                pos = this.atoms[i].coord;\n                break;\n            }\n            else if(atom.name === 'CA' && (atom.ss == 'helix' || atom.ss == 'sheet')) { // protein secondary: CA\n                pos = (this.atoms[i].coord2 !== undefined) ? this.atoms[i].coord2 : this.atoms[i].coord;\n                break;\n            }\n        }\n    }\n\n    if(pos === undefined) pos = atomIn.coord;\n\n    return pos;\n};\n\niCn3D.prototype.applySurfaceOptions = function (options) {\n    if(options === undefined) options = this.opts;\n\n    //switch (options.wireframe.toLowerCase()) {\n    switch (options.wireframe) {\n        case 'yes':\n            options.wireframe = true;\n            break;\n        case 'no':\n            options.wireframe = false;\n            break;\n    }\n\n    options.opacity = parseFloat(options.opacity);\n\n    var atoms, currAtoms;\n\n    // only show the surface for atoms which are displaying\n    atoms = this.intHash(this.dAtoms, this.hAtoms);\n    // exclude water molecules\n    if(options['water'] === 'nothing') atoms = this.exclHash(atoms, this.water);\n\n    currAtoms = this.hash2Atoms(atoms);\n\n    switch (options.surface.toLowerCase()) {\n        case 'van der waals surface':\n            this.createSurfaceRepresentation(currAtoms, 1, options.wireframe, options.opacity);\n            break;\n//            case 'solvent excluded surface':\n//                this.createSurfaceRepresentation(currAtoms, 2, options.wireframe, options.opacity);\n//                break;\n        case 'solvent accessible surface':\n            this.createSurfaceRepresentation(currAtoms, 3, options.wireframe, options.opacity);\n            break;\n        case 'molecular surface':\n            this.createSurfaceRepresentation(currAtoms, 2, options.wireframe, options.opacity);\n            break;\n        case 'van der waals surface with context':\n            this.createSurfaceRepresentation(currAtoms, 1, options.wireframe, options.opacity);\n            break;\n        case 'solvent accessible surface with context':\n            this.createSurfaceRepresentation(currAtoms, 3, options.wireframe, options.opacity);\n            break;\n        case 'molecular surface with context':\n            this.createSurfaceRepresentation(currAtoms, 2, options.wireframe, options.opacity);\n            break;\n        case 'nothing':\n            // remove surfaces\n            this.removeSurfaces();\n            break;\n    }\n};\n\niCn3D.prototype.applyOtherOptions = function (options) {\n    if(options === undefined) options = this.opts;\n\n    this.lines['hbond'] = [];\n\n    //common part options\n\n    // lines\n    //if (options.hbonds.toLowerCase() === 'yes' || options.ncbonds.toLowerCase() === 'yes') {\n    if (options.hbonds.toLowerCase() === 'yes') {\n        var color = '#00FF00';\n        var pnts = this.hbondpnts;\n\n         for (var i = 0, lim = Math.floor(pnts.length / 2); i < lim; i++) {\n            var line = {};\n            line.position1 = pnts[2 * i].coord;\n            line.serial1 = pnts[2 * i].serial;\n            line.position2 = pnts[2 * i + 1].coord;\n            line.serial2 = pnts[2 * i + 1].serial;\n            line.color = color;\n            line.dashed = true;\n\n            // only draw bonds connected with currently displayed atoms\n            if(line.serial1 !== undefined && line.serial2 !== undefined && !this.dAtoms.hasOwnProperty(line.serial1) && !this.dAtoms.hasOwnProperty(line.serial2)) continue;\n\n            if(this.lines['hbond'] === undefined) this.lines['hbond'] = [];\n            this.lines['hbond'].push(line);\n         }\n\n        //this.createLines(this.lines);\n    }\n\n    if (this.pairArray !== undefined && this.pairArray.length > 0) {\n        this.updateStabilizer(); // to update this.stabilizerpnts\n\n        var color = '#FFFFFF';\n        var pnts = this.stabilizerpnts;\n        this.lines['stabilizer'] = []; // reset\n        for (var i = 0, lim = Math.floor(pnts.length / 2); i < lim; i++) {\n            var line = {};\n            line.position1 = pnts[2 * i];\n            line.position2 = pnts[2 * i + 1];\n            line.color = color;\n            line.dashed = false; // if true, there will be too many cylinders in the dashed lines\n\n            this.lines['stabilizer'].push(line);\n        }\n    }\n\n    this.createLines(this.lines);\n\n    // maps\n    if(this.prevMaps !== undefined) {\n        for(var i = 0, il = this.prevMaps.length; i < il; ++i) {\n            this.mdl.add(this.prevMaps[i]);\n        }\n    }\n\n    // EM map\n    if(this.prevEmmaps !== undefined) {\n        for(var i = 0, il = this.prevEmmaps.length; i < il; ++i) {\n            this.mdl.add(this.prevEmmaps[i]);\n        }\n    }\n\n    // surfaces\n    if(this.prevSurfaces !== undefined) {\n        for(var i = 0, il = this.prevSurfaces.length; i < il; ++i) {\n            this.mdl.add(this.prevSurfaces[i]);\n        }\n    }\n\n    this.applyCenterOptions(options);\n\n    switch (options.axis.toLowerCase()) {\n        case 'yes':\n            this.axis = true;\n\n            this.buildAxes(this.maxD/2);\n\n            break;\n        case 'no':\n            this.axis = false;\n            break;\n    }\n    switch (options.pk.toLowerCase()) {\n        case 'atom':\n            this.pk = 1;\n            break;\n        case 'no':\n            this.pk = 0;\n            break;\n        case 'residue':\n            this.pk = 2;\n            break;\n        case 'strand':\n            this.pk = 3;\n            break;\n    }\n};\n\niCn3D.prototype.rebuildScene = function (options) { var me = this;\n    this.rebuildSceneBase(options);\n\n    if(this.bSkipChemicalbinding === undefined || !this.bSkipChemicalbinding) this.applyChemicalbindingOptions();\n    this.bSkipChemicalbinding = true;\n\n    // show disulfide bonds, set side chains\n    this.applySsbondsOptions();\n\n    this.applyDisplayOptions(this.opts, this.dAtoms);\n\n    this.applyOtherOptions();\n\n    this.setFog();\n\n    this.setCamera();\n\n    //https://stackoverflow.com/questions/15726560/three-js-raycaster-intersection-empty-when-objects-not-part-of-scene\n    me.scene_ghost.updateMatrixWorld(true);\n};\n\niCn3D.prototype.draw = function () { var me = this;\n    this.rebuildScene();\n\n    // Impostor display using the saved arrays\n    if(this.bImpo) {\n        this.drawImpostorShader();\n    }\n\n    this.applyPrevColor();\n\n//    if(Object.keys(me.mapData).length > 0) me.applyMapOptions();\n\n    //if(this.bSSOnly) this.drawHelixBrick(this.molid2ss, this.molid2color);\n\n    if(this.biomtMatrices !== undefined && this.biomtMatrices.length > 1) {\n        if(this.bAssembly) {\n            this.drawSymmetryMates();\n        }\n        else {\n            this.centerSelection();\n        }\n    }\n\n    // show the hAtoms\n    var hAtomsLen = (this.hAtoms !== undefined) ? Object.keys(this.hAtoms).length : 0;\n\n    //if(hAtomsLen > 0 && hAtomsLen < Object.keys(this.atoms).length) {\n    if(hAtomsLen > 0 && hAtomsLen < Object.keys(this.dAtoms).length) {\n        this.removeHlObjects();\n        if(this.bShowHighlight === undefined || this.bShowHighlight) this.addHlObjects();\n    }\n\n    if(this.bRender === true) {\n      this.applyTransformation(this._zoomFactor, this.mouseChange, this.quaternion);\n      this.render();\n\n      // reset to hide the side chain\n      //this.opts['sidec'] = 'nothing';\n    }\n\n    this.clearImpostors();\n};\n\n/**\n * @author Jiyao Wang <wangjiy@ncbi.nlm.nih.gov> / https://github.com/ncbi/icn3d\n */\n\n// get hbonds between \"molecule\" and \"chemical\"\niCn3D.prototype.calculateChemicalHbonds = function (startAtoms, targetAtoms, threshold) {\n    if(Object.keys(startAtoms).length === 0 || Object.keys(targetAtoms).length === 0) return;\n\n    var atomHbond = {};\n    var chain_resi, chain_resi_atom;\n\n    var maxlengthSq = threshold * threshold;\n\n    for (var i in startAtoms) {\n      var atom = startAtoms[i];\n\n      if(atom.elem === \"N\" || atom.elem === \"O\" || atom.elem === \"F\") { // calculate hydrogen bond\n        chain_resi_atom = atom.structure + \"_\" + atom.chain + \"_\" + atom.resi + \"_\" + atom.name;\n\n        atomHbond[chain_resi_atom] = atom;\n      }\n    } // end of for (var i in startAtoms) {\n\n    var hbondsAtoms = {};\n    var residueHash = {};\n\n    for (var i in targetAtoms) {\n      var atom = targetAtoms[i];\n\n      if(atom.elem === \"N\" || atom.elem === \"O\" || atom.elem === \"F\") { // calculate hydrogen bond\n        chain_resi = atom.structure + \"_\" + atom.chain + \"_\" + atom.resi;\n        chain_resi_atom = chain_resi + \"_\" + atom.name;\n\n        for (var j in atomHbond) {\n          var xdiff = Math.abs(atom.coord.x - atomHbond[j].coord.x);\n          if(xdiff > threshold) continue;\n\n          var ydiff = Math.abs(atom.coord.y - atomHbond[j].coord.y);\n          if(ydiff > threshold) continue;\n\n          var zdiff = Math.abs(atom.coord.z - atomHbond[j].coord.z);\n          if(zdiff > threshold) continue;\n\n          var dist = xdiff * xdiff + ydiff * ydiff + zdiff * zdiff;\n          if(dist > maxlengthSq) continue;\n\n          // output hydrogen bonds\n          this.hbondpnts.push({'serial': atom.serial, 'coord': atom.coord});\n          this.hbondpnts.push({'serial': atomHbond[j].serial, 'coord': atomHbond[j].coord});\n\n          hbondsAtoms = this.unionHash(hbondsAtoms, this.residues[atom.structure + \"_\" + atom.chain + \"_\" + atom.resi]);\n          hbondsAtoms = this.unionHash(hbondsAtoms, this.residues[atomHbond[j].structure + \"_\" + atomHbond[j].chain + \"_\" + atomHbond[j].resi]);\n\n          residueHash[chain_resi] = 1;\n        } // end of for (var j in atomHbond) {\n      }\n    } // end of for (var i in targetAtoms) {\n\n    var residueArray = Object.keys(residueHash);\n\n    // draw sidec for these residues\n    for(var i = 0, il = residueArray.length; i < il; ++i) {\n        for(var j in this.residues[residueArray[i]]) {\n            // all atoms should be shown for hbonds\n            this.atoms[j].style2 = 'stick';\n            //this.atoms[j].style2 = 'lines';\n        }\n    }\n\n    return hbondsAtoms;\n};\n\niCn3D.prototype.getChainsFromAtoms = function(atomsHash) {\n    var chainsHash = {};\n    for(var i in atomsHash) {\n       var atom = this.atoms[i];\n       var chainid = atom.structure + \"_\" + atom.chain;\n\n       chainsHash[chainid] = 1;\n    }\n\n    return chainsHash;\n};\n\n\n iCn3D.prototype.getNeighboringAtoms = function(atomlist, atomlistTarget, distance) {\n    var me = this;\n\n    var extent = this.getExtent(atomlistTarget);\n\n    var targetRadiusSq1 = (extent[2][0] - extent[0][0]) * (extent[2][0] - extent[0][0]) + (extent[2][1] - extent[0][1]) * (extent[2][1] - extent[0][1]) + (extent[2][2] - extent[0][2]) * (extent[2][2] - extent[0][2]);\n    var targetRadiusSq2 = (extent[2][0] - extent[1][0]) * (extent[2][0] - extent[1][0]) + (extent[2][1] - extent[1][1]) * (extent[2][1] - extent[1][1]) + (extent[2][2] - extent[1][2]) * (extent[2][2] - extent[1][2]);\n    var targetRadiusSq = (targetRadiusSq1 > targetRadiusSq2) ? targetRadiusSq1 : targetRadiusSq2;\n    var targetRadius = Math.sqrt(targetRadiusSq);\n\n    var maxDistSq = (targetRadius + distance) * (targetRadius + distance);\n\n    var neighbors = {};\n    for (var i in atomlist) {\n       //var atom = atomlist[i];\n       var atom = me.atoms[i];\n\n       // exclude the target atoms\n       if(atom.serial in atomlistTarget) continue;\n\n       if (atom.coord.x < extent[0][0] - distance || atom.coord.x > extent[1][0] + distance) continue;\n       if (atom.coord.y < extent[0][1] - distance || atom.coord.y > extent[1][1] + distance) continue;\n       if (atom.coord.z < extent[0][2] - distance || atom.coord.z > extent[1][2] + distance) continue;\n\n       // only show protein or DNA/RNA\n       //if(atom.serial in this.proteins || atom.serial in this.nucleotides) {\n           var atomDistSq = (atom.coord.x - extent[2][0]) * (atom.coord.x - extent[2][0]) + (atom.coord.y - extent[2][1]) * (atom.coord.y - extent[2][1]) + (atom.coord.z - extent[2][2]) * (atom.coord.z - extent[2][2]);\n\n           if(atomDistSq < maxDistSq) {\n               neighbors[atom.serial] = atom;\n           }\n       //}\n    }\n\n    return neighbors;\n };\n\n // modified from iview (http://istar.cse.cuhk.edu.hk/iview/)\n iCn3D.prototype.getAtomsWithinAtom = function(atomlist, atomlistTarget, distance) {\n    var me = this;\n\n    var neighbors = this.getNeighboringAtoms(atomlist, atomlistTarget, distance);\n\n    var ret = {};\n    for(var i in atomlistTarget) {\n        //var oriAtom = atomlistTarget[i];\n        var oriAtom = me.atoms[i];\n        var radius = this.vdwRadii[oriAtom.elem] || this.defaultRadius;\n\n        for (var j in neighbors) {\n           var atom = neighbors[j];\n\n           // exclude the target atoms\n           if(atom.serial in atomlistTarget) continue;\n\n           var atomDistSq = (atom.coord.x - oriAtom.coord.x) * (atom.coord.x - oriAtom.coord.x) + (atom.coord.y - oriAtom.coord.y) * (atom.coord.y - oriAtom.coord.y) + (atom.coord.z - oriAtom.coord.z) * (atom.coord.z - oriAtom.coord.z);\n\n           var maxDistSq = (radius + distance) * (radius + distance);\n\n           if(atomDistSq < maxDistSq) {\n               ret[atom.serial] = atom;\n           }\n       }\n    }\n\n    return ret;\n };\n\n // from iview (http://istar.cse.cuhk.edu.hk/iview/)\n iCn3D.prototype.getExtent = function(atomlist) {\n    var me = this;\n\n    var xmin = ymin = zmin = 9999;\n    var xmax = ymax = zmax = -9999;\n    var xsum = ysum = zsum = cnt = 0;\n    var i;\n    for (i in atomlist) {\n       //var atom = atomlist[i];\n       var atom = me.atoms[i];\n       cnt++;\n       xsum += atom.coord.x; ysum += atom.coord.y; zsum += atom.coord.z;\n\n\n       xmin = (xmin < atom.coord.x) ? xmin : atom.coord.x;\n\n       ymin = (ymin < atom.coord.y) ? ymin : atom.coord.y;\n       zmin = (zmin < atom.coord.z) ? zmin : atom.coord.z;\n       xmax = (xmax > atom.coord.x) ? xmax : atom.coord.x;\n       ymax = (ymax > atom.coord.y) ? ymax : atom.coord.y;\n       zmax = (zmax > atom.coord.z) ? zmax : atom.coord.z;\n    }\n\n    return [[xmin, ymin, zmin], [xmax, ymax, zmax], [xsum / cnt, ysum / cnt, zsum / cnt]];\n };\n\niCn3D.prototype.centerAtoms = function(atoms) {\n    var pmin = new THREE.Vector3( 9999, 9999, 9999);\n    var pmax = new THREE.Vector3(-9999,-9999,-9999);\n    var psum = new THREE.Vector3();\n    var cnt = 0;\n\n    for (var i in atoms) {\n        var atom = this.atoms[i];\n        var coord = atom.coord;\n        psum.add(coord);\n        pmin.min(coord);\n        pmax.max(coord);\n        ++cnt;\n    }\n\n    var maxD = pmax.distanceTo(pmin);\n\n    return {\"center\": psum.multiplyScalar(1.0 / cnt), \"maxD\": maxD};\n};\n\niCn3D.prototype.removeSurfaces = function () {\n   // remove prevous highlight\n   for(var i = 0, il = this.prevSurfaces.length; i < il; ++i) {\n       this.mdl.remove(this.prevSurfaces[i]);\n   }\n\n   this.prevSurfaces = [];\n};\n\niCn3D.prototype.removeLastSurface = function () {\n   // remove prevous highlight\n   if(this.prevSurfaces.length > 0) {\n       this.mdl.remove(this.prevSurfaces[this.prevSurfaces.length - 1]);\n       this.prevSurfaces.slice(this.prevSurfaces.length - 1, 1);\n   }\n};\n\niCn3D.prototype.removeMaps = function () {\n   // remove prevous highlight\n   for(var i = 0, il = this.prevMaps.length; i < il; ++i) {\n       this.mdl.remove(this.prevMaps[i]);\n   }\n\n   this.prevMaps = [];\n};\n\niCn3D.prototype.removeEmmaps = function () {\n   // remove prevous highlight\n   for(var i = 0, il = this.prevEmmaps.length; i < il; ++i) {\n       this.mdl.remove(this.prevEmmaps[i]);\n   }\n\n   this.prevEmmaps = [];\n};\n\niCn3D.prototype.removeLastMap = function () {\n   // remove prevous highlight\n   if(this.prevMaps.length > 0) {\n       this.mdl.remove(this.prevMaps[this.prevMaps.length - 1]);\n       this.prevMaps.slice(this.prevMaps.length - 1, 1);\n   }\n};\n\niCn3D.prototype.removeLastEmmap = function () {\n   // remove prevous highlight\n   if(this.prevEmmaps.length > 0) {\n       this.mdl.remove(this.prevEmmaps[this.prevEmmaps.length - 1]);\n       this.prevEmmaps.slice(this.prevEmmaps.length - 1, 1);\n   }\n};\n\niCn3D.prototype.zoominSelection = function(atoms) {\n   if(atoms === undefined) {\n       atoms = this.hash2Atoms(this.hAtoms);\n   }\n\n   // center on the hAtoms if more than one residue is selected\n   if(Object.keys(atoms).length > 1) {\n           var centerAtomsResults = this.centerAtoms(atoms);\n           this.maxD = centerAtomsResults.maxD;\n           if (this.maxD < 5) this.maxD = 5;\n\n           this.mdl.position.set(0,0,0);\n           this.mdlImpostor.position.set(0,0,0);\n           this.mdl_ghost.position.set(0,0,0);\n\n           this.mdl.position.sub(centerAtomsResults.center);\n           //this.mdlPicking.position.sub(centerAtomsResults.center);\n           this.mdlImpostor.position.sub(centerAtomsResults.center);\n           this.mdl_ghost.position.sub(centerAtomsResults.center);\n\n           this.center = centerAtomsResults.center;\n\n           // reset cameara\n           this.setCamera();\n   }\n};\n\niCn3D.prototype.centerSelection = function(atoms) {\n   this.resetOrientation();\n\n   if(atoms === undefined) {\n       atoms = this.hash2Atoms(this.hAtoms);\n   }\n\n   // center on the hAtoms if more than one residue is selected\n   if(Object.keys(atoms).length > 1) {\n           var centerAtomsResults = this.centerAtoms(atoms);\n\n           this.center = centerAtomsResults.center;\n           this.setCenter(this.center);\n\n           // reset cameara\n           this.setCamera();\n   }\n};\n\n/**\n * @author Jiyao Wang <wangjiy@ncbi.nlm.nih.gov> / https://github.com/ncbi/icn3d\n */\n\n// make dialog movable outside of the window\n// http://stackoverflow.com/questions/6696461/jquery-ui-dialog-drag-question\n// if (!$.ui.dialog.prototype._makeDraggableBase) {\n//     $.ui.dialog.prototype._makeDraggableBase = $.ui.dialog.prototype._makeDraggable;\n//     $.ui.dialog.prototype._makeDraggable = function() {\n//         this._makeDraggableBase();\n//         this.uiDialog.draggable(\"option\", \"containment\", false);\n//     };\n// }\n\nvar iCn3DUI = function(cfg) {\n    var me = this;\n\n    this.REVISION = '2.7.4';\n\n    me.bFullUi = true;\n\n    me.cfg = cfg;\n    me.divid = me.cfg.divid;\n    me.pre = me.divid + \"_\";\n\n    me.inputid = '';\n\n    me.setOperation = 'or'; // by default the set operation is 'or'\n\n    me.WIDTH = 400; // total width of view area\n    me.HEIGHT = 400; // total height of view area\n\n    me.RESIDUE_WIDTH = 10;  // sequences\n    me.MENU_HEIGHT = 40;\n\n    // used to set the position for the log/command textarea\n    //me.MENU_WIDTH = 690;\n    me.MENU_WIDTH = 750;\n\n    me.LESSWIDTH = 20;\n    me.LESSWIDTH_RESIZE = 20;\n    me.LESSHEIGHT = 20;\n\n    me.ROT_DIR = 'right';\n    me.bHideSelection = true;\n\n    me.CMD_HEIGHT = 0.8*me.MENU_HEIGHT;\n\n    //me.EXTRAHEIGHT = 2*me.MENU_HEIGHT + me.CMD_HEIGHT;\n    me.EXTRAHEIGHT = me.MENU_HEIGHT + me.CMD_HEIGHT;\n    if(me.cfg.showmenu != undefined && me.cfg.showmenu == false) {\n        //me.EXTRAHEIGHT -= 2*me.MENU_HEIGHT;\n        me.EXTRAHEIGHT -= me.MENU_HEIGHT;\n    }\n    if(me.cfg.showcommand != undefined && me.cfg.showcommand == false) {\n        me.EXTRAHEIGHT -= me.CMD_HEIGHT;\n    }\n\n    me.GREY8 = \"#888888\"; // style protein grey\n    me.GREYB = \"#BBBBBB\";\n    me.GREYC = \"#CCCCCC\"; // grey background\n    me.GREYD = \"#DDDDDD\";\n    me.ORANGE = \"#FFA500\";\n\n    // https://www.ncbi.nlm.nih.gov/Class/FieldGuide/BLOSUM62.txt, range from -4 to 11\n    me.b62ResArray = ['A', 'R', 'N', 'D', 'C', 'Q', 'E', 'G', 'H', 'I', 'L', 'K', 'M', 'F', 'P', 'S', 'T', 'W', 'Y', 'V', 'B', 'Z', 'X', '*']; // length: 24\n\n    me.b62Matrix = [\n            [4, -1, -2, -2, 0, -1, -1, 0, -2, -1, -1, -1, -1, -2, -1, 1, 0, -3, -2, 0, -2, -1, 0, -4],\n            [-1, 5, 0, -2, -3, 1, 0, -2, 0, -3, -2, 2, -1, -3, -2, -1, -1, -3, -2, -3, -1, 0, -1, -4],\n            [-2, 0, 6, 1, -3, 0, 0, 0, 1, -3, -3, 0, -2, -3, -2, 1, 0, -4, -2, -3, 3, 0, -1, -4],\n            [-2, -2, 1, 6, -3, 0, 2, -1, -1, -3, -4, -1, -3, -3, -1, 0, -1, -4, -3, -3, 4, 1, -1, -4],\n            [0, -3, -3, -3, 9, -3, -4, -3, -3, -1, -1, -3, -1, -2, -3, -1, -1, -2, -2, -1, -3, -3, -2, -4],\n            [-1, 1, 0, 0, -3, 5, 2, -2, 0, -3, -2, 1, 0, -3, -1, 0, -1, -2, -1, -2, 0, 3, -1, -4],\n            [-1, 0, 0, 2, -4, 2, 5, -2, 0, -3, -3, 1, -2, -3, -1, 0, -1, -3, -2, -2, 1, 4, -1, -4],\n            [0, -2, 0, -1, -3, -2, -2, 6, -2, -4, -4, -2, -3, -3, -2, 0, -2, -2, -3, -3, -1, -2, -1, -4],\n            [-2, 0, 1, -1, -3, 0, 0, -2, 8, -3, -3, -1, -2, -1, -2, -1, -2, -2, 2, -3, 0, 0, -1, -4],\n            [-1, -3, -3, -3, -1, -3, -3, -4, -3, 4, 2, -3, 1, 0, -3, -2, -1, -3, -1, 3, -3, -3, -1, -4],\n            [-1, -2, -3, -4, -1, -2, -3, -4, -3, 2, 4, -2, 2, 0, -3, -2, -1, -2, -1, 1, -4, -3, -1, -4],\n            [-1, 2, 0, -1, -3, 1, 1, -2, -1, -3, -2, 5, -1, -3, -1, 0, -1, -3, -2, -2, 0, 1, -1, -4],\n            [-1, -1, -2, -3, -1, 0, -2, -3, -2, 1, 2, -1, 5, 0, -2, -1, -1, -1, -1, 1, -3, -1, -1, -4],\n            [-2, -3, -3, -3, -2, -3, -3, -3, -1, 0, 0, -3, 0, 6, -4, -2, -2, 1, 3, -1, -3, -3, -1, -4],\n            [-1, -2, -2, -1, -3, -1, -1, -2, -2, -3, -3, -1, -2, -4, 7, -1, -1, -4, -3, -2, -2, -1, -2, -4],\n            [1, -1, 1, 0, -1, 0, 0, 0, -1, -2, -2, 0, -1, -2, -1, 4, 1, -3, -2, -2, 0, 0, 0, -4],\n            [0, -1, 0, -1, -1, -1, -1, -2, -2, -1, -1, -1, -1, -2, -1, 1, 5, -2, -2, 0, -1, -1, 0, -4],\n            [-3, -3, -4, -4, -2, -2, -3, -2, -2, -3, -2, -3, -1, 1, -4, -3, -2, 11, 2, -3, -4, -3, -2, -4],\n            [-2, -2, -2, -3, -2, -1, -2, -3, 2, -1, -1, -2, -1, 3, -3, -2, -2, 2, 7, -1, -3, -2, -1, -4],\n            [0, -3, -3, -3, -1, -2, -2, -3, -3, 3, 1, -2, 1, -1, -2, -2, 0, -3, -1, 4, -3, -2, -1, -4],\n            [-2, -1, 3, 4, -3, 0, 1, -1, 0, -3, -4, 0, -3, -3, -2, 0, -1, -4, -3, -3, 4, 1, -1, -4],\n            [-1, 0, 0, 1, -3, 3, 4, -2, 0, -3, -3, 1, -1, -3, -1, 0, -1, -3, -2, -2, 1, 4, -1, -4],\n            [0, -1, -1, -1, -2, -1, -1, -1, -1, -1, -1, -1, -1, -1, -2, 0, 0, -2, -1, -1, -1, -1, -1, -4],\n            [-4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, 1],\n        ];\n\n    me.opts = {};\n    me.opts['camera']             = 'perspective';        //perspective, orthographic\n    me.opts['background']         = 'transparent';        //transparent, black, grey, white\n    me.opts['color']              = 'chain';              //spectrum, secondary structure, charge, hydrophobic, conserved, chain, residue, atom, b factor, red, green, blue, magenta, yellow, cyan, white, grey, custom\n    me.opts['proteins']           = 'ribbon';             //ribbon, strand, cylinder and plate, schematic, c alpha trace, b factor tube, lines, stick, ball and stick, sphere, nothing\n    me.opts['sidec']              = 'nothing';            //lines, stick, ball and stick, sphere, nothing\n    me.opts['nucleotides']        = 'nucleotide cartoon'; //nucleotide cartoon, o3 trace, schematic, lines, stick,\n                                                              // nucleotides ball and stick, sphere, nothing\n    me.opts['surface']            = 'nothing';            //Van der Waals surface, molecular surface, solvent accessible surface, nothing\n    me.opts['opacity']            = '1.0';                //1.0, 0.9, 0.8, 0.7, 0.6, 0.5\n    me.opts['wireframe']          = 'no';                 //yes, no\n    me.opts['map']                = 'nothing';            //2fofc, fofc, nothing\n    me.opts['mapwireframe']       = 'yes';                //yes, no\n    me.opts['emmap']              = 'nothing';            //em, nothing\n    me.opts['emmapwireframe']     = 'yes';                //yes, no\n    me.opts['chemicals']          = 'stick';              //lines, stick, ball and stick, schematic, sphere, nothing\n    me.opts['water']              = 'nothing';            //sphere, dot, nothing\n    me.opts['ions']               = 'sphere';             //sphere, dot, nothing\n    me.opts['hbonds']             = 'no';                 //yes, no\n    //me.opts['stabilizer']           = 'no';                 //yes, no\n    me.opts['ssbonds']            = 'yes';                 //yes, no\n    me.opts['rotationcenter']     = 'molecule center';    //molecule center, pick center, display center\n    me.opts['axis']               = 'no';                 //yes, no\n    me.opts['fog']                = 'no';                 //yes, no\n    me.opts['slab']               = 'no';                 //yes, no\n    me.opts['pk']                 = 'residue';            //no, atom, residue, strand, chain\n    me.opts['chemicalbinding']      = 'hide';               //show, hide\n\n    if(me.cfg.align !== undefined) me.opts['color'] = 'identity';\n    if(me.cfg.blast_rep_id !== undefined) me.opts['color'] = 'conservation';\n    if(me.cfg.cid !== undefined) me.opts['color'] = 'atom';\n\n    if(me.cfg.options !== undefined) jQuery.extend(me.opts, me.cfg.options);\n\n    me.init();\n\n    me.modifyIcn3d();\n\n\n};\n\niCn3DUI.prototype = {\n\n    constructor: iCn3DUI,\n\n    init: function () { var me = this;\n        me.bSelectResidue = false;\n        me.bSelectAlignResidue = false;\n        me.selectedResidues = {};\n\n        me.bAnnoShown = false;\n        me.bSetChainsAdvancedMenu = false;\n        me.b2DShown = false;\n\n        me.bCrashed = false;\n        me.prevCommands = \"\";\n\n        me.bAddCommands = true;\n        me.bAddLogs = true;\n\n        me.bNotLoadStructure = false;\n\n        me.bInitial = true;\n\n        //me.bInputfile = false;\n\n        $(\"#\" + me.pre + \"dl_annotations\").html('');\n        $(\"#\" + me.pre + \"dl_2ddgm\").html('');\n    },\n\n    // modify iCn3D function\n    modifyIcn3d: function() {var me = this;\n        me.modifyIcn3dshowPicking();\n    },\n\n    switchHighlightLevelUp: function() { var me = this;\n          if(!me.icn3d.bShift && !me.icn3d.bCtrl) me.icn3d.removeHlObjects();\n\n          if(me.icn3d.highlightlevel === 1) { // atom -> residue\n              me.icn3d.highlightlevel = 2;\n\n              var firstAtom = me.icn3d.getFirstAtomObj(me.icn3d.pickedAtomList);\n\n              if(!me.icn3d.bShift && !me.icn3d.bCtrl) {\n                  me.icn3d.hAtoms = me.icn3d.cloneHash(me.icn3d.residues[firstAtom.structure + '_' + firstAtom.chain + '_' + firstAtom.resi]);\n            }\n            else {\n                me.icn3d.hAtoms = me.icn3d.unionHash(me.icn3d.hAtoms, me.icn3d.residues[firstAtom.structure + '_' + firstAtom.chain + '_' + firstAtom.resi]);\n            }\n          }\n          else if(me.icn3d.highlightlevel === 2) { // residue -> strand\n              me.icn3d.highlightlevel = 3;\n\n              var firstAtom = me.icn3d.getFirstAtomObj(me.icn3d.pickedAtomList);\n              if(!me.icn3d.bShift && !me.icn3d.bCtrl) {\n                  me.icn3d.hAtoms = me.icn3d.cloneHash(me.icn3d.selectStrandHelixFromAtom(firstAtom));\n            }\n            else {\n                me.icn3d.hAtoms = me.icn3d.unionHash(me.icn3d.hAtoms, me.icn3d.selectStrandHelixFromAtom(firstAtom));\n            }\n          }\n          else if(me.icn3d.highlightlevel === 3) { // strand -> chain\n              me.icn3d.highlightlevel = 4;\n\n              var firstAtom = me.icn3d.getFirstAtomObj(me.icn3d.pickedAtomList);\n              if(!me.icn3d.bShift && !me.icn3d.bCtrl) {\n                  me.icn3d.hAtoms = me.icn3d.cloneHash(me.icn3d.chains[firstAtom.structure + '_' + firstAtom.chain]);\n            }\n            else {\n                me.icn3d.hAtoms = me.icn3d.unionHash(me.icn3d.hAtoms, me.icn3d.chains[firstAtom.structure + '_' + firstAtom.chain]);\n            }\n          }\n          else if(me.icn3d.highlightlevel === 4 || me.icn3d.highlightlevel === 5) { // chain -> structure\n              me.icn3d.highlightlevel = 5;\n\n              var firstAtom = me.icn3d.getFirstAtomObj(me.icn3d.pickedAtomList);\n\n              if(!me.icn3d.bShift && !me.icn3d.bCtrl) me.icn3d.hAtoms = {};\n              var chainArray = me.icn3d.structures[firstAtom.structure];\n              for(var i = 0, il = chainArray.length; i < il; ++i) {\n                  me.icn3d.hAtoms = me.icn3d.unionHash(me.icn3d.hAtoms, me.icn3d.chains[chainArray[i]]);\n            }\n          }\n\n          me.icn3d.addHlObjects();\n          me.updateHlAll();\n    },\n\n    switchHighlightLevelDown: function() { var me = this;\n          me.icn3d.removeHlObjects();\n\n          if( (me.icn3d.highlightlevel === 2 || me.icn3d.highlightlevel === 1) && Object.keys(me.icn3d.pickedAtomList).length === 1) { // residue -> atom\n              me.icn3d.highlightlevel = 1;\n\n              me.icn3d.hAtoms = me.icn3d.cloneHash(me.icn3d.pickedAtomList);\n              if(!me.icn3d.bShift && !me.icn3d.bCtrl) {\n                  me.icn3d.hAtoms = me.icn3d.cloneHash(me.icn3d.pickedAtomList);\n            }\n            else {\n                me.icn3d.hAtoms = me.icn3d.unionHash(me.icn3d.hAtoms, me.icn3d.pickedAtomList);\n            }\n          }\n          else if(me.icn3d.highlightlevel === 3) { // strand -> residue\n            var residueHash = {};\n\n            for(var i in me.icn3d.pickedAtomList) {\n                residueid = me.icn3d.atoms[i].structure + '_' + me.icn3d.atoms[i].chain + '_' + me.icn3d.atoms[i].resi;\n                residueHash[residueid] = 1;\n            }\n\n            if(Object.keys(residueHash).length === 1) {\n                me.icn3d.highlightlevel = 2;\n\n                var firstAtom = me.icn3d.getFirstAtomObj(me.icn3d.pickedAtomList);\n                if(!me.icn3d.bShift && !me.icn3d.bCtrl) {\n                    me.icn3d.hAtoms = me.icn3d.cloneHash(me.icn3d.residues[firstAtom.structure + '_' + firstAtom.chain + '_' + firstAtom.resi]);\n                }\n                else {\n                    me.icn3d.hAtoms = me.icn3d.unionHash(me.icn3d.hAtoms, me.icn3d.residues[firstAtom.structure + '_' + firstAtom.chain + '_' + firstAtom.resi]);\n                }\n            }\n          }\n          else if(me.icn3d.highlightlevel === 4) { // chain -> strand\n              me.icn3d.highlightlevel = 3;\n\n              var firstAtom = me.icn3d.getFirstAtomObj(me.icn3d.pickedAtomList);\n              if(!me.icn3d.bShift && !me.icn3d.bCtrl) {\n                  me.icn3d.hAtoms = me.icn3d.cloneHash(me.icn3d.selectStrandHelixFromAtom(firstAtom));\n              }\n              else {\n                  me.icn3d.hAtoms = me.icn3d.unionHash(me.icn3d.hAtoms, me.icn3d.selectStrandHelixFromAtom(firstAtom));\n              }\n          }\n          else if(me.icn3d.highlightlevel === 5) { // structure -> chain\n              me.icn3d.highlightlevel = 4;\n\n              var firstAtom = me.icn3d.getFirstAtomObj(me.icn3d.pickedAtomList);\n              if(!me.icn3d.bShift && !me.icn3d.bCtrl) {\n                  me.icn3d.hAtoms = me.icn3d.cloneHash(me.icn3d.chains[firstAtom.structure + '_' + firstAtom.chain]);\n            }\n            else {\n                me.icn3d.hAtoms = me.icn3d.unionHash(me.icn3d.hAtoms, me.icn3d.chains[firstAtom.structure + '_' + firstAtom.chain]);\n            }\n          }\n\n          me.icn3d.addHlObjects();\n          me.updateHlAll();\n    },\n\n    switchHighlightLevel: function() { var me = this;\n      $(document).bind('keydown', function (e) {\n        if(e.keyCode === 38) { // arrow up, select upper level of atoms\n          e.preventDefault();\n\n          if(Object.keys(me.icn3d.pickedAtomList).length == 0 || !me.icn3d.hAtoms.hasOwnProperty(me.icn3d.getFirstAtomObj(me.icn3d.pickedAtomList).serial)) {\n              me.icn3d.pickedAtomList = me.icn3d.cloneHash(me.icn3d.hAtoms);\n              //me.icn3d.pk = 2;\n          }\n\n          me.switchHighlightLevelUp();\n          me.setLogCmd(\"highlight level up\", true);\n        }\n        else if(e.keyCode === 40) { // arrow down, select down level of atoms\n          e.preventDefault();\n\n          if(Object.keys(me.icn3d.pickedAtomList).length == 0 || !me.icn3d.hAtoms.hasOwnProperty(me.icn3d.getFirstAtomObj(me.icn3d.pickedAtomList).serial)) {\n              me.icn3d.pickedAtomList = me.icn3d.cloneHash(me.icn3d.hAtoms);\n              //me.icn3d.pk = 2;\n          }\n\n          me.switchHighlightLevelDown();\n          me.setLogCmd(\"highlight level down\", true);\n        }\n      });\n    },\n\n    allCustomEvents: function() { var me = this;\n      // add custom events here\n    },\n\n    setCustomDialogs: function() { var me = this;\n        var html = \"\";\n\n        return html;\n    },\n\n    modifyIcn3dshowPicking: function() {var me = this;\n        iCn3D.prototype.showPicking = function(atom, x, y) {\n          if(me.cfg.cid !== undefined) {\n              this.pk = 1; // atom\n          }\n          else {\n              // do not change the picking option\n          }\n\n          me.icn3d.highlightlevel = me.icn3d.pk;\n\n          this.showPickingBase(atom, x, y);\n\n          if(x !== undefined && y !== undefined) { // mouse over\n            if(me.cfg.showmenu != undefined && me.cfg.showmenu == true) {\n                y += me.MENU_HEIGHT;\n            }\n\n            var text = (this.pk == 1) ? atom.resn + atom.resi + '@' + atom.name : atom.resn + atom.resi;\n            //if(me.cfg.align !== undefined) {\n            if(Object.keys(me.icn3d.structures).length > 1) {\n                text = atom.structure + ' ' + text;\n                $(\"#\" + me.pre + \"popup\").css(\"width\", \"100px\");\n            }\n            else {\n                $(\"#\" + me.pre + \"popup\").css(\"width\", \"80px\");\n            }\n\n            $(\"#\" + me.pre + \"popup\").html(text);\n            $(\"#\" + me.pre + \"popup\").css(\"top\", y).css(\"left\", x+20).show();\n          }\n          else {\n              // highlight the sequence background\n              var idArray = this.id.split('_'); // id: div0_canvas\n              me.pre = idArray[0] + \"_\";\n\n              me.updateHlAll();\n\n              var transformation = {};\n              transformation.factor = this._zoomFactor;\n              transformation.mouseChange = this.mouseChange;\n              //transformation.quaternion = this.quaternion;\n              transformation.quaternion = {};\n              transformation.quaternion._x = parseFloat(this.quaternion._x).toPrecision(5);\n              transformation.quaternion._y = parseFloat(this.quaternion._y).toPrecision(5);\n              transformation.quaternion._z = parseFloat(this.quaternion._z).toPrecision(5);\n              transformation.quaternion._w = parseFloat(this.quaternion._w).toPrecision(5);\n\n              if(me.bAddCommands) {\n                  this.commands.push('pickatom ' + atom.serial + '|||' + me.getTransformationStr(transformation));\n                  this.optsHistory.push(this.cloneHash(this.opts));\n                  this.optsHistory[this.optsHistory.length - 1].hlatomcount = Object.keys(this.hAtoms).length;\n\n                  if(me.isSessionStorageSupported()) me.saveCommandsToSession();\n\n                  me.STATENUMBER = this.commands.length;\n              }\n\n              this.logs.push('pickatom ' + atom.serial + ' (chain: ' + atom.structure + '_' + atom.chain + ', residue: ' + atom.resn + ', number: ' + atom.resi + ', atom: ' + atom.name + ')');\n              if ( $( \"#\" + me.pre + \"logtext\" ).length )  {\n                $(\"#\" + me.pre + \"logtext\").val(\"> \" + this.logs.join(\"\\n> \") + \"\\n> \").scrollTop($(\"#\" + me.pre + \"logtext\")[0].scrollHeight);\n              }\n          }\n/*\n          // add label\n          var residueText = atom.resn + atom.resi;\n\n          var text;\n          if(me.cfg.cid !== undefined) {\n              text = atom.name;\n              this.pk = 1; // atom\n          }\n          else {\n              text = residueText + '@' + atom.name;\n              // do not change the picking option\n              //this.pk = 2; // residue\n          }\n\n          var labels = {};\n          labels['picking'] = [];\n\n          var label = {};\n          label.position = new THREE.Vector3(atom.coord.x + 1, atom.coord.y + 1, atom.coord.z + 1); // shifted by 1\n\n          if(this.pk === 1) {\n            label.text = text;\n          }\n          else if(this.pk === 2) {\n            label.text = residueText;\n          }\n\n          label.background = \"#CCCCCC\";\n\n          if(this.pk === 1 || this.pk === 2) {\n              labels['picking'].push(label);\n\n              //http://www.johannes-raida.de/tutorials/three.js/tutorial13/tutorial13.htm\n              if(me.bMeasureDistance === undefined || !me.bMeasureDistance) this.createLabelRepresentation(labels);\n          }\n*/\n        };\n    },\n\n    // ======= functions start==============\n    // show3DStructure is the main function to show 3D structure\n    show3DStructure: function() { var me = this;\n      me.deferred = $.Deferred(function() {\n        if(me.isSessionStorageSupported()) me.getCommandsBeforeCrash();\n\n        me.setViewerWidthHeight();\n\n        var width, height;\n\n        if(me.cfg.width.toString().indexOf('%') !== -1) {\n          width = me.WIDTH * me.cfg.width.substr(0, me.cfg.width.toString().indexOf('%')) / 100.0 - me.LESSWIDTH;\n        }\n        else {\n          width = me.cfg.width;\n        }\n\n        if(me.cfg.height.toString().indexOf('%') !== -1) {\n          height = me.HEIGHT * me.cfg.height.substr(0, me.cfg.height.toString().indexOf('%')) / 100.0 - me.EXTRAHEIGHT - me.LESSHEIGHT;\n        }\n        else {\n          height = me.cfg.height;\n        }\n\n        me.realWidth = width;\n        me.realHeight = height;\n\n        me.setTopMenusHtml(me.divid);\n\n        me.allEventFunctions();\n\n        me.allCustomEvents();\n\n        var extraHeight = 0;\n        if(me.cfg.showmenu == undefined || me.cfg.showmenu) {\n            //extraHeight += 2*me.MENU_HEIGHT;\n            extraHeight += me.MENU_HEIGHT;\n        }\n        if(me.cfg.showcommand == undefined || me.cfg.showcommand) {\n            extraHeight += me.CMD_HEIGHT;\n        }\n\n        if(me.cfg.showmenu != undefined && me.cfg.showmenu == false) {\n          me.hideMenu();\n        }\n        else {\n          me.showMenu();\n        }\n\n        if(me.cfg.showtitle != undefined && me.cfg.showtitle == false) {\n          $(\"#\" + me.pre + \"title\").hide();\n        }\n        else {\n          $(\"#\" + me.pre + \"title\").show();\n        }\n\n        $(\"#\" + me.pre + \"viewer\").width(width).height(parseInt(height) + extraHeight);\n        $(\"#\" + me.pre + \"canvas\").width(width).height(parseInt(height));\n        //$(\"#\" + me.pre + \"canvas\").resizable(); // resizing behavor not good for canvas.\n\n        me.icn3d = new iCn3D(me.pre + 'canvas');\n        if(!me.isMobile()) me.icn3d.scaleFactor = 2.0;\n\n        me.handleContextLost();\n\n        me.icn3d.setWidthHeight(width, height);\n\n        me.icn3d.ori_chemicalbinding = me.opts['chemicalbinding'];\n\n\n        if(me.cfg.bCalphaOnly !== undefined) me.icn3d.bCalphaOnly = me.cfg.bCalphaOnly;\n\n        //me.deferred = undefined; // sequential calls\n\n        me.icn3d.opts = me.icn3d.cloneHash(me.opts);\n\n        me.STATENUMBER = me.icn3d.commands.length;\n\n        // If previously crashed, recover it\n        if(me.isSessionStorageSupported() && me.bCrashed) {\n            me.bCrashed = false;\n\n            var loadCommand = me.commandsBeforeCrash.split('|||')[0];\n            var id = loadCommand.substr(loadCommand.lastIndexOf(' ') + 1);\n\n            // reload only if viewing the same structure\n            if(id === me.cfg.mmtfid || id === me.cfg.pdbid || id === me.cfg.mmdbid || id === me.cfg.gi  || id === me.cfg.blast_rep_id || id === me.cfg.cid || id === me.cfg.mmcifid || id === me.cfg.align) {\n                me.loadScript(me.commandsBeforeCrash, true);\n\n                return;\n            }\n        }\n\n        me.icn3d.molTitle = '';\n\n        if(me.cfg.url !== undefined) {\n            var type_url = me.cfg.url.split('|');\n            var type = type_url[0];\n            var url = type_url[1];\n\n            me.icn3d.molTitle = \"\";\n            me.inputid = undefined;\n\n            me.setLogCmd('load url ' + url + ' | type ' + type, true);\n\n            me.downloadUrl(url, type);\n        }\n        else if(me.cfg.mmtfid !== undefined) {\n           me.inputid = me.cfg.mmtfid;\n\n           me.setLogCmd('load mmtf ' + me.cfg.mmtfid, true);\n\n           me.downloadMmtf(me.cfg.mmtfid);\n        }\n        else if(me.cfg.pdbid !== undefined) {\n           me.inputid = me.cfg.pdbid;\n\n           me.setLogCmd('load pdb ' + me.cfg.pdbid, true);\n\n           me.downloadPdb(me.cfg.pdbid);\n        }\n        else if(me.cfg.mmdbid !== undefined) {\n           me.inputid = me.cfg.mmdbid;\n\n           me.setLogCmd('load mmdb ' + me.cfg.mmdbid + ' | parameters ' + me.cfg.inpara, true);\n\n           me.downloadMmdb(me.cfg.mmdbid);\n        }\n        else if(me.cfg.gi !== undefined) {\n           me.setLogCmd('load gi ' + me.cfg.gi, true);\n\n           me.downloadGi(me.cfg.gi);\n        }\n        else if(me.cfg.blast_rep_id !== undefined) {\n           me.setLogCmd('load seq_struct_ids ' + me.cfg.query_id + ',' + me.cfg.blast_rep_id, true);\n\n           me.downloadBlast_rep_id(me.cfg.query_id + ',' + me.cfg.blast_rep_id);\n        }\n        else if(me.cfg.cid !== undefined) {\n           me.inputid = me.cfg.cid;\n\n           var url = \"https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/\" + me.inputid + \"/description/jsonp\";\n           $.ajax({\n              url: url,\n              dataType: 'jsonp',\n              tryCount : 0,\n              retryLimit : 1,\n              success: function(data) {\n                  if(data.InformationList !== undefined && data.InformationList.Information !== undefined) me.icn3d.molTitle = data.InformationList.Information[0].Title;\n              },\n              error : function(xhr, textStatus, errorThrown ) {\n                this.tryCount++;\n                if (this.tryCount <= this.retryLimit) {\n                    //try again\n                    $.ajax(this);\n                    return;\n                }\n                return;\n              }\n           });\n\n            me.setLogCmd('load cid ' + me.cfg.cid, true);\n\n            me.downloadCid(me.cfg.cid);\n        }\n        else if(me.cfg.mmcifid !== undefined) {\n            me.inputid = me.cfg.mmcifid;\n\n            me.setLogCmd('load mmcif ' + me.cfg.mmcifid, true);\n\n            me.downloadMmcif(me.cfg.mmcifid);\n        }\n        else if(me.cfg.align !== undefined) {\n            var alignArray = me.cfg.align.split(','); // e.g., 6 IDs: 103701,1,4,68563,1,167 [mmdbid1,biounit,molecule,mmdbid2,biounit,molecule], or 2IDs: 103701,68563 [mmdbid1,mmdbid2]\n\n            if(alignArray.length === 6) {\n                me.inputid = alignArray[0] + \"_\" + alignArray[3];\n            }\n            else if(alignArray.length === 2) {\n                me.inputid = alignArray[0] + \"_\" + alignArray[1];\n            }\n\n            me.setLogCmd('load alignment ' + me.cfg.align + ' | parameters ' + me.cfg.inpara, true);\n\n            me.downloadAlignment(me.cfg.align);\n        }\n        else if(me.cfg.command !== undefined && me.cfg.command !== '') {\n            me.loadScript(me.cfg.command);\n        }\n        else {\n            alert(\"Please use the \\\"File\\\" menu to retrieve a structure of interest or to display a local file.\");\n        }\n      });\n\n      return me.deferred.promise();\n    },\n\n    hideMenu: function() { var me = this;\n      if($(\"#\" + me.pre + \"mnlist\")[0] !== undefined) $(\"#\" + me.pre + \"mnlist\")[0].style.display = \"none\";\n      if($(\"#\" + me.pre + \"mnLogSection\")[0] !== undefined) $(\"#\" + me.pre + \"mnLogSection\")[0].style.display = \"none\";\n      if($(\"#\" + me.pre + \"cmdlog\")[0] !== undefined) $(\"#\" + me.pre + \"cmdlog\")[0].style.display = \"none\";\n\n      $(\"#\" + me.pre + \"title\")[0].style.margin = \"10px 0 0 10px\";\n    },\n\n    showMenu: function() { var me = this;\n      if($(\"#\" + me.pre + \"mnlist\")[0] !== undefined) $(\"#\" + me.pre + \"mnlist\")[0].style.display = \"block\";\n      if($(\"#\" + me.pre + \"mnLogSection\")[0] !== undefined) $(\"#\" + me.pre + \"mnLogSection\")[0].style.display = \"block\";\n      if($(\"#\" + me.pre + \"cmdlog\")[0] !== undefined) $(\"#\" + me.pre + \"cmdlog\")[0].style.display = \"block\";\n\n      //if($(\"#\" + me.pre + \"title\")[0] !== undefined) $(\"#\" + me.pre + \"title\")[0].style.display = \"block\";\n    },\n\n    saveSelectionIfSelected: function (id, value) { var me = this;\n      if(me.bSelectResidue || me.bSelectAlignResidue) {\n          var name = $(\"#\" + me.pre + \"seq_command_name2\").val().replace(/\\s+/g, '_');\n          //var description = $(\"#\" + me.pre + \"seq_command_desc2\").val();\n\n          if(name === \"\") {\n            name = $(\"#\" + me.pre + \"alignseq_command_name\").val().replace(/\\s+/g, '_');\n            //description = $(\"#\" + me.pre + \"alignseq_command_desc\").val();\n          }\n\n          if(name !== \"\") me.saveSelection(name, name);\n\n          me.bSelectResidue = false;\n          me.bSelectAlignResidue = false;\n      }\n    },\n\n    setOption: function (id, value) { var me = this;\n      //var options2 = {};\n      //options2[id] = value;\n\n      // remember the options\n      me.icn3d.opts[id] = value;\n\n      me.saveSelectionIfSelected();\n\n      if(id === 'color') {\n          me.icn3d.setColorByOptions(me.icn3d.opts, me.icn3d.hAtoms);\n\n          me.icn3d.draw();\n\n          var residueHash = me.icn3d.getResiduesFromCalphaAtoms(me.icn3d.hAtoms);\n          me.changeSeqColor(Object.keys(residueHash));\n      }\n      else if(id === 'surface' || id === 'opacity' || id === 'wireframe') {\n          if(id === 'opacity' || id === 'wireframe') {\n              me.icn3d.removeLastSurface();\n          }\n          me.icn3d.applySurfaceOptions();\n          //me.icn3d.render();\n          me.icn3d.draw(); // to make surface work in assembly\n      }\n      else if(id === 'map' || id === 'mapwireframe') {\n          if(id === 'mapwireframe') {\n              me.icn3d.removeLastMap();\n          }\n\n          me.icn3d.applyMapOptions();\n\n          //me.icn3d.render();\n          me.icn3d.draw(); // to make surface work in assembly\n      }\n      else if(id === 'emmap' || id === 'emmapwireframe') {\n          if(id === 'emmapwireframe') {\n              me.icn3d.removeLastEmmap();\n          }\n\n          me.icn3d.applyEmmapOptions();\n\n          //me.icn3d.render();\n          me.icn3d.draw(); // to make surface work in assembly\n      }\n      else if(id === 'chemicalbinding') {\n          me.icn3d.bSkipChemicalbinding = false;\n          me.icn3d.draw();\n      }\n      else {\n          me.icn3d.draw();\n      }\n    },\n\n    setStyle: function (selectionType, style) { var me = this;\n      var atoms = {};\n      switch (selectionType) {\n          case 'proteins':\n              atoms = me.icn3d.intHash(me.icn3d.hAtoms, me.icn3d.proteins);\n              break;\n          case 'sidec':\n              atoms = me.icn3d.intHash(me.icn3d.hAtoms, me.icn3d.sidec);\n              calpha_atoms = me.icn3d.intHash(me.icn3d.hAtoms, me.icn3d.calphas);\n              // include calphas\n              atoms = me.icn3d.unionHash(atoms, calpha_atoms);\n              break;\n          case 'nucleotides':\n              atoms = me.icn3d.intHash(me.icn3d.hAtoms, me.icn3d.nucleotides);\n              break;\n          case 'chemicals':\n              atoms = me.icn3d.intHash(me.icn3d.hAtoms, me.icn3d.chemicals);\n              break;\n          case 'ions':\n              atoms = me.icn3d.intHash(me.icn3d.hAtoms, me.icn3d.ions);\n              break;\n          case 'water':\n              atoms = me.icn3d.intHash(me.icn3d.hAtoms, me.icn3d.water);\n              break;\n      }\n\n      // draw sidec separatedly\n      if(selectionType === 'sidec') {\n          for(var i in atoms) {\n            me.icn3d.atoms[i].style2 = style;\n          }\n      }\n      else {\n          for(var i in atoms) {\n            me.icn3d.atoms[i].style = style;\n          }\n      }\n\n      me.icn3d.opts[selectionType] = style;\n\n      me.saveSelectionIfSelected();\n\n      me.icn3d.draw();\n    },\n\n    setLogCmd: function (str, bSetCommand, bAddLogs) { var me = this;\n      if(str.trim() === '') return false;\n\n      var pos = str.indexOf('|||');\n      if(pos !== -1) str = str.substr(0, pos);\n\n      var transformation = {};\n      transformation.factor = me.icn3d._zoomFactor;\n      transformation.mouseChange = me.icn3d.mouseChange;\n\n      transformation.quaternion = {};\n      transformation.quaternion._x = parseFloat(me.icn3d.quaternion._x).toPrecision(5);\n      transformation.quaternion._y = parseFloat(me.icn3d.quaternion._y).toPrecision(5);\n      transformation.quaternion._z = parseFloat(me.icn3d.quaternion._z).toPrecision(5);\n      transformation.quaternion._w = parseFloat(me.icn3d.quaternion._w).toPrecision(5);\n\n      if(bSetCommand) {\n          // save the command only when it's not a history command, i.e., not in the process of going back and forth\n          if(me.bAddCommands) {\n              // If a new command was called, remove the forward commands and push to the command array\n              if(me.STATENUMBER < me.icn3d.commands.length) {\n                  var oldCommand = me.icn3d.commands[me.STATENUMBER - 1];\n                  var pos = oldCommand.indexOf('|||');\n                  if(str !== oldCommand.substr(0, pos)) {\n                    me.icn3d.commands = me.icn3d.commands.slice(0, me.STATENUMBER);\n\n                    me.icn3d.commands.push(str + '|||' + me.getTransformationStr(transformation));\n                    me.icn3d.optsHistory.push(me.icn3d.cloneHash(me.icn3d.opts));\n                    me.icn3d.optsHistory[me.icn3d.optsHistory.length - 1].hlatomcount = Object.keys(me.icn3d.hAtoms).length;\n\n                    if(me.isSessionStorageSupported()) me.saveCommandsToSession();\n\n                    me.STATENUMBER = me.icn3d.commands.length;\n                  }\n              }\n              else {\n                me.icn3d.commands.push(str + '|||' + me.getTransformationStr(transformation));\n\n                me.icn3d.optsHistory.push(me.icn3d.cloneHash(me.icn3d.opts));\n                if(me.icn3d.hAtoms !== undefined) me.icn3d.optsHistory[me.icn3d.optsHistory.length - 1].hlatomcount = Object.keys(me.icn3d.hAtoms).length;\n\n                if(me.isSessionStorageSupported()) me.saveCommandsToSession();\n\n                me.STATENUMBER = me.icn3d.commands.length;\n              }\n          }\n      }\n\n      if(me.bAddLogs && me.cfg.showcommand) {\n          me.icn3d.logs.push(str);\n\n          // move cursor to the end, and scroll to the end\n          $(\"#\" + me.pre + \"logtext\").val(\"> \" + me.icn3d.logs.join(\"\\n> \") + \"\\n> \").scrollTop($(\"#\" + me.pre + \"logtext\")[0].scrollHeight);\n      }\n\n      me.adjustIcon();\n    },\n\n    renderStructure: function () {  var me = this;\n      if(me.bInitial) {\n          if(me.cfg.command !== undefined && me.cfg.command !== '') {\n              me.icn3d.bRender = false;\n\n              jQuery.extend(me.icn3d.opts, me.opts);\n              me.icn3d.draw();\n          }\n          else {\n              jQuery.extend(me.icn3d.opts, me.opts);\n              me.icn3d.draw();\n          }\n\n          if(Object.keys(me.icn3d.structures).length > 1) {\n              $(\"#\" + me.pre + \"alternate\").show();\n          }\n          else {\n              $(\"#\" + me.pre + \"alternate\").hide();\n          }\n      }\n      else {\n          me.saveSelectionIfSelected();\n\n          me.icn3d.draw();\n      }\n\n      if(me.bInitial && me.cfg.command !== undefined && me.cfg.command !== '') {\n              me.icn3d.bRender = true;\n              me.loadScript(me.cfg.command);\n      }\n\n      // display the structure right away. load the mns and sequences later\n      setTimeout(function(){\n          if(me.bInitial) {\n              if(me.cfg.showsets !== undefined && me.cfg.showsets) {\n                   me.showSets();\n              }\n\n              if(me.cfg.align !== undefined) {\n                  var bShowHighlight = false;\n                  seqObj = me.getAlignSequencesAnnotations(Object.keys(me.icn3d.alnChains), undefined, undefined, bShowHighlight);\n\n                  $(\"#\" + me.pre + \"dl_sequence2\").html(seqObj.sequencesHtml);\n                  $(\"#\" + me.pre + \"dl_sequence2\").width(me.RESIDUE_WIDTH * seqObj.maxSeqCnt + 200);\n              }\n\n              //me.setProtNuclLigInMenu();\n\n              if(me.cfg.showanno !== undefined && me.cfg.showanno) {\n                   var cmd = \"view annotations\";\n                   me.setLogCmd(cmd, true);\n\n                   me.showAnnotations();\n/*\n                   if(Object.keys(me.icn3d.proteins).length > 0) {\n                      $.when(me.applyCommandAnnotationsAndCddSite(cmd)).then(function() {\n                          // do something afterward\n                      });\n                   }\n                   else {\n                      me.applyCommandAnnotationsAndCddSiteBase(cmd);\n                   }\n*/\n              }\n          }\n          else {\n              me.updateHlAll();\n          }\n\n          me.bInitial = false;\n      }, 0);\n    },\n\n    exportCustomAtoms: function () { var me = this;\n       var html = \"\";\n\n       var nameArray = (me.icn3d.defNames2Residues !== undefined) ? Object.keys(me.icn3d.defNames2Residues).sort() : [];\n\n       for(var i = 0, il = nameArray.length; i < il; ++i) {\n         var name = nameArray[i];\n         var residueArray = me.icn3d.defNames2Residues[name];\n         var description = me.icn3d.defNames2Descr[name];\n         var command = me.icn3d.defNames2Command[name];\n         command = command.replace(/,/g, ', ');\n\n         html += name + \"\\tselect \";\n\n         html += me.residueids2spec(residueArray);\n\n         html += \"\\n\";\n       } // outer for\n\n       nameArray = (me.icn3d.defNames2Atoms !== undefined) ? Object.keys(me.icn3d.defNames2Atoms).sort() : [];\n\n       for(var i = 0, il = nameArray.length; i < il; ++i) {\n         var name = nameArray[i];\n         var atomArray = me.icn3d.defNames2Atoms[name];\n         var description = me.icn3d.defNames2Descr[name];\n         var command = me.icn3d.defNames2Command[name];\n         command = command.replace(/,/g, ', ');\n\n         var residueArray = me.atoms2residues(atomArray);\n\n         if(residueArray.length > 0) {\n             html += name + \"\\tselect \";\n             html += me.residueids2spec(residueArray);\n\n             html += \"\\n\";\n         }\n       } // outer for\n\n       return html;\n    },\n\n    atoms2residues: function(atomArray) { var me = this;\n         var atoms = {};\n         for(var j = 0, jl = atomArray.length; j < jl; ++j) {\n             atoms[atomArray[j]] = 1;\n         }\n\n         var residueHash = me.icn3d.getResiduesFromCalphaAtoms(atoms);\n\n         return Object.keys(residueHash);\n    },\n\n    residueids2spec: function(residueArray) { var me = this;\n         var spec = \"\";\n\n         if(residueArray !== undefined){\n             var residueArraySorted = residueArray.sort(function(a, b) {\n                        if(a !== '' && !isNaN(a)) {\n                            return parseInt(a) - parseInt(b);\n                        }\n                        else {\n                            var lastPosA = a.lastIndexOf('_');\n                            var lastPosB = b.lastIndexOf('_');\n                            if(a.substr(0, lastPosA) < b.substr(0, lastPosB)) return -1;\n                            else if(a.substr(0, lastPosA) > b.substr(0, lastPosB)) return 1;\n                            else if(a.substr(0, lastPosA) == b.substr(0, lastPosB)) {\n                                if(parseInt(a.substr(lastPosA + 1)) < parseInt(b.substr(lastPosB + 1)) ) return -1;\n                                else if(parseInt(a.substr(lastPosA + 1)) > parseInt(b.substr(lastPosB + 1)) ) return 1;\n                                else if(parseInt(a.substr(lastPosA + 1)) == parseInt(b.substr(lastPosB + 1)) ) return 0;\n                            }\n                        }\n                    });\n\n             var prevChain = '', chain, prevResi = 0, resi, lastDashPos, firstDashPos, struturePart, chainPart;\n             var startResi;\n             var bMultipleStructures = (Object.keys(me.icn3d.structures).length == 1) ? false : true;\n             for(var j = 0, jl = residueArraySorted.length; j < jl; ++j) {\n                 var residueid = residueArraySorted[j];\n\n                 lastDashPos = residueid.lastIndexOf('_');\n                 chain = residueid.substr(0, lastDashPos);\n                 resi = parseInt(residueid.substr(lastDashPos+1));\n\n                 firstDashPos = prevChain.indexOf('_');\n                 struturePart = prevChain.substr(0, firstDashPos);\n                 chainPart = prevChain.substr(firstDashPos + 1);\n\n                 if(prevChain !== chain) {\n                     if(j > 0) {\n                         if(prevResi === startResi) {\n                             if(bMultipleStructures) {\n                                 spec += '$' + struturePart + '.' + chainPart + ':' + startResi + ' or ';\n                             }\n                             else {\n                                 spec += '.' + chainPart + ':' + startResi + ' or ';\n                             }\n                         }\n                         else {\n                             if(bMultipleStructures) {\n                                 spec += '$' + struturePart + '.' + chainPart + ':' + startResi + '-' + prevResi + ' or ';\n                             }\n                             else {\n                                 spec += '.' + chainPart + ':' + startResi + '-' + prevResi + ' or ';\n                             }\n                         }\n                     }\n\n                     startResi = resi;\n                 }\n                 else if(prevChain === chain) {\n                     if(resi !== prevResi + 1) {\n                         if(prevResi === startResi) {\n                             if(bMultipleStructures) {\n                                 spec += '$' + struturePart + '.' + chainPart + ':' + startResi + ' or ';\n                             }\n                             else {\n                                 spec += '.' + chainPart + ':' + startResi + ' or ';\n                             }\n                         }\n                         else {\n                             if(bMultipleStructures) {\n                                 spec += '$' + struturePart + '.' + chainPart + ':' + startResi + '-' + prevResi + ' or ';\n                             }\n                             else {\n                                 spec += '.' + chainPart + ':' + startResi + '-' + prevResi + ' or ';\n                             }\n                         }\n\n                         startResi = resi;\n                     }\n                 }\n\n                 prevChain = chain;\n                 prevResi = resi;\n             }\n\n             // last residue\n             firstDashPos = prevChain.indexOf('_');\n             struturePart = prevChain.substr(0, firstDashPos);\n             chainPart = prevChain.substr(firstDashPos + 1);\n\n             if(prevResi === startResi) {\n                 if(bMultipleStructures) {\n                     spec += '$' + struturePart + '.' + chainPart + ':' + startResi;\n                 }\n                 else {\n                     spec += '.' + chainPart + ':' + startResi;\n                 }\n             }\n             else {\n                 if(bMultipleStructures) {\n                     spec += '$' + struturePart + '.' + chainPart + ':' + startResi + '-' + prevResi;\n                 }\n                 else {\n                     spec += '.' + chainPart + ':' + startResi + '-' + prevResi;\n                 }\n             }\n         }\n\n         return spec;\n    },\n\n    pickCustomSphere: function (radius) {   var me = this; // me.icn3d.pAtom is set already\n//        me.removeHlMenus();\n\n        var select = \"select zone cutoff \" + radius;\n\n        var atomlistTarget = {};\n\n        for(var i in me.icn3d.hAtoms) {\n          atomlistTarget[i] = me.icn3d.atoms[i];\n        }\n\n        // select all atom, not just displayed atoms\n        var atoms = me.icn3d.getAtomsWithinAtom(me.icn3d.atoms, atomlistTarget, parseFloat(radius));\n\n        var residues = {}, atomArray = undefined;\n\n        for (var i in atoms) {\n            var atom = atoms[i];\n            var residueid = atom.structure + '_' + atom.chain + '_' + atom.resi;\n            residues[residueid] = 1;\n\n            //atomArray.push(i);\n        }\n\n        var residueArray = Object.keys(residues);\n\n        me.icn3d.hAtoms = {};\n        for(var index = 0, indexl = residueArray.length; index < indexl; ++index) {\n          var residueid = residueArray[index];\n          for(var i in me.icn3d.residues[residueid]) {\n            //var atom = me.icn3d.atoms[i];\n            //atom.color = new THREE.Color(0xFF0000);\n\n            //me.icn3d.atomPrevColors[i] = atom.color;\n\n            me.icn3d.hAtoms[i] = 1;\n          }\n        }\n\n        me.icn3d.dAtoms = me.icn3d.cloneHash(me.icn3d.atoms);\n\n        var commandname, commanddesc;\n          var firstAtom = me.icn3d.getFirstAtomObj(atomlistTarget);\n          commandname = \"sphere.\" + firstAtom.chain + \":\" + me.icn3d.residueName2Abbr(firstAtom.resn.substr(0, 3)) + firstAtom.resi + \"-\" + $(\"#\" + me.pre + \"radius_aroundsphere\").val() + \"A\";\n          commanddesc = \"select a sphere around currently selected \" + Object.keys(me.icn3d.hAtoms).length + \" atoms with a radius of \" + radius + \" angstrom\";\n\n        me.addCustomSelection(residueArray, commandname, commanddesc, select, true);\n\n        var nameArray = [commandname];\n\n        //me.changeCustomResidues(nameArray);\n\n        me.saveSelectionIfSelected();\n\n        me.icn3d.draw(); // show all neighbors, even not displayed before\n    },\n\n    // between the highlighted and the rest atoms\n    showHbonds: function (threshold) { var me = this;\n        me.icn3d.opts[\"hbonds\"] = \"yes\";\n        me.icn3d.opts[\"water\"] = \"dot\";\n\n        var select = 'hbonds ' + threshold;\n\n       var complement = {};\n\n       for(var i in me.icn3d.atoms) {\n           if(!me.icn3d.hAtoms.hasOwnProperty(i) && me.icn3d.dAtoms.hasOwnProperty(i)) {\n               complement[i] = me.icn3d.atoms[i];\n           }\n       }\n\n        var firstAtom = me.icn3d.getFirstAtomObj(me.icn3d.hAtoms);\n\n        if(Object.keys(complement).length > 0 && Object.keys(me.icn3d.hAtoms).length > 0) {\n            var selectedAtoms = me.icn3d.calculateChemicalHbonds(complement, me.icn3d.intHash2Atoms(me.icn3d.dAtoms, me.icn3d.hAtoms), parseFloat(threshold) );\n\n            var residues = {}, atomArray = undefined;\n\n            for (var i in selectedAtoms) {\n                var residueid = me.icn3d.atoms[i].structure + '_' + me.icn3d.atoms[i].chain + '_' + me.icn3d.atoms[i].resi;\n                residues[residueid] = 1;\n\n                //atomArray.push(i);\n\n                //me.icn3d.atoms[i].style2 = 'stick';\n            }\n\n            me.icn3d.hAtoms = {};\n            for(var resid in residues) {\n                for(var i in me.icn3d.residues[resid]) {\n                    me.icn3d.hAtoms[i] = 1;\n                    me.icn3d.atoms[i].style2 = 'stick';\n                    //me.icn3d.atoms[i].style2 = 'lines';\n                }\n            }\n\n            var commandname = 'hbonds_' + firstAtom.serial;\n            var commanddesc = 'all atoms that are hydrogen-bonded with the selected atoms';\n            me.addCustomSelection(Object.keys(residues), commandname, commanddesc, select, true);\n\n            var nameArray = [commandname];\n\n            //me.changeCustomResidues(nameArray);\n\n            me.saveSelectionIfSelected();\n\n            //me.setStyle('sidec', 'ball and stick');\n\n            me.icn3d.draw();\n        }\n    },\n\n    // show all disulfide bonds\n    showSsbonds: function () { var me = this;\n         me.icn3d.opts[\"ssbonds\"] = \"yes\";\n\n         var select = 'disulfide bonds';\n\n//         me.removeHlMenus();\n\n         var residues = {}, atomArray = undefined;\n\n         var structureArray = Object.keys(me.icn3d.structures);\n\n         for(var s = 0, sl = structureArray.length; s < sl; ++s) {\n             var structure = structureArray[s];\n\n             if(me.icn3d.ssbondpnts[structure] === undefined) continue;\n\n             for (var i = 0, lim = Math.floor(me.icn3d.ssbondpnts[structure].length / 2); i < lim; i++) {\n                var res1 = me.icn3d.ssbondpnts[structure][2 * i], res2 = me.icn3d.ssbondpnts[structure][2 * i + 1];\n\n                residues[res1] = 1;\n                residues[res2] = 1;\n\n                me.icn3d.hAtoms = me.icn3d.unionHash(me.icn3d.hAtoms, me.icn3d.residues[res1]);\n                me.icn3d.hAtoms = me.icn3d.unionHash(me.icn3d.hAtoms, me.icn3d.residues[res2]);\n\n            }\n        }\n\n        if(Object.keys(residues).length > 0) {\n            var commandname = 'ssbonds';\n            var commanddesc = 'all atoms that have disulfide bonds';\n            me.addCustomSelection(Object.keys(residues), commandname, commanddesc, select, true);\n\n            var nameArray = [commandname];\n\n            //me.changeCustomResidues(nameArray);\n\n            me.saveSelectionIfSelected();\n\n            // show side chains for the selected atoms\n            //me.setStyle('sidec', 'stick');\n\n            me.icn3d.draw();\n        }\n    },\n\n    addLine: function (x1, y1, z1, x2, y2, z2, color, dashed, type) { var me = this;\n        var line = {}; // Each line contains 'position1', 'position2', 'color', and a boolean of 'dashed'\n        line.position1 = new THREE.Vector3(x1, y1, z1);\n        line.position2 = new THREE.Vector3(x2, y2, z2);\n        line.color = color;\n        line.dashed = dashed;\n\n        if(me.icn3d.lines[type] === undefined) me.icn3d.lines[type] = [];\n\n        if(type !== undefined) {\n            me.icn3d.lines[type].push(line);\n        }\n        else {\n            me.icn3d.lines['custom'].push(line);\n        }\n\n        me.icn3d.removeHlObjects();\n\n        //me.icn3d.draw();\n    },\n\n    back: function () { var me = this;\n      me.backForward = true;\n\n      me.STATENUMBER--;\n\n      // do not add to the array me.icn3d.commands\n      me.bAddCommands = false;\n      me.bAddLogs = false; // turn off log\n\n      me.bNotLoadStructure = true;\n\n      if(me.STATENUMBER < 1) {\n        me.STATENUMBER = 1;\n      }\n      else {\n        me.execCommands(0, me.STATENUMBER-1, me.STATENUMBER);\n      }\n\n      me.adjustIcon();\n\n      me.bAddCommands = true;\n      me.bAddLogs = true;\n    },\n\n    forward: function () { var me = this;\n      me.backForward = true;\n\n      me.STATENUMBER++;\n\n      // do not add to the array me.icn3d.commands\n      me.bAddCommands = false;\n      me.bAddLogs = false; // turn off log\n\n      me.bNotLoadStructure = true;\n\n      if(me.STATENUMBER > me.icn3d.commands.length) {\n        me.STATENUMBER = me.icn3d.commands.length;\n      }\n      else {\n        me.execCommands(0, me.STATENUMBER-1, me.STATENUMBER);\n      }\n\n      me.adjustIcon();\n\n      me.bAddCommands = true;\n      me.bAddLogs = true;\n    },\n\n    toggleSelection: function () { var me = this;\n        if(me.bHideSelection) {\n            for(var i in me.icn3d.dAtoms) {\n                if(me.icn3d.hAtoms.hasOwnProperty(i)) delete me.icn3d.dAtoms[i];\n            }\n\n              me.bHideSelection = false;\n        }\n        else {\n            me.icn3d.dAtoms = me.icn3d.unionHash(me.icn3d.dAtoms, me.icn3d.hAtoms);\n\n              me.bHideSelection = true;\n        }\n\n        me.icn3d.draw();\n    },\n\n    adjustIcon: function () { var me = this;\n      if(me.STATENUMBER === 1) {\n        if($(\"#\" + me.pre + \"back\").hasClass('icn3d-middleIcon')) {\n          $(\"#\" + me.pre + \"back\").toggleClass('icn3d-middleIcon');\n          $(\"#\" + me.pre + \"back\").toggleClass('icn3d-endIcon');\n        }\n      }\n      else {\n        if($(\"#\" + me.pre + \"back\").hasClass('icn3d-endIcon')) {\n          $(\"#\" + me.pre + \"back\").toggleClass('icn3d-middleIcon');\n          $(\"#\" + me.pre + \"back\").toggleClass('icn3d-endIcon');\n        }\n      }\n\n      if(me.STATENUMBER === me.icn3d.commands.length) {\n        if($(\"#\" + me.pre + \"forward\").hasClass('icn3d-middleIcon')) {\n          $(\"#\" + me.pre + \"forward\").toggleClass('icn3d-middleIcon');\n          $(\"#\" + me.pre + \"forward\").toggleClass('icn3d-endIcon');\n        }\n      }\n      else {\n        if($(\"#\" + me.pre + \"forward\").hasClass('icn3d-endIcon')) {\n          $(\"#\" + me.pre + \"forward\").toggleClass('icn3d-middleIcon');\n          $(\"#\" + me.pre + \"forward\").toggleClass('icn3d-endIcon');\n        }\n      }\n    },\n\n    toggle: function (id1, id2, id3, id4) { var me = this;\n      $(\"#\" + id1).toggleClass('ui-icon-plus');\n      $(\"#\" + id1).toggleClass('ui-icon-minus');\n\n      $(\"#\" + id2).toggleClass('ui-icon-plus');\n      $(\"#\" + id2).toggleClass('ui-icon-minus');\n\n      $(\"#\" + id1).toggleClass('icn3d-shown');\n      $(\"#\" + id1).toggleClass('icn3d-hidden');\n\n      $(\"#\" + id2).toggleClass('icn3d-shown');\n      $(\"#\" + id2).toggleClass('icn3d-hidden');\n\n      $(\"#\" + id3).toggleClass('icn3d-shown');\n      $(\"#\" + id3).toggleClass('icn3d-hidden');\n\n      $(\"#\" + id4).toggleClass('icn3d-shown');\n      $(\"#\" + id4).toggleClass('icn3d-hidden');\n    },\n\n    selectComplement: function() { var me = this;\n           var complement = {};\n           //var residueHash = {}, chainHash = {};\n           //var residueid, chainid;\n\n           for(var i in me.icn3d.atoms) {\n               if(!me.icn3d.hAtoms.hasOwnProperty(i)) {\n                   complement[i] = 1;\n                   //chainid = me.icn3d.atoms[i].structure + '_' + me.icn3d.atoms[i].chain;\n                   //residueid = chainid + '_' + me.icn3d.atoms[i].resi;\n                   //chainHash[chainid] =1;\n                   //residueHash[residueid] = 1;\n               }\n           }\n\n           me.icn3d.hAtoms = me.icn3d.cloneHash(complement);\n\n           //me.highlightResidues(Object.keys(residueHash), Object.keys(chainHash));\n           me.updateHlAll();\n    },\n\n    saveCommandsToSession: function() { var me = this;\n        var dataStr = me.icn3d.commands.join('\\n');\n        var data = decodeURIComponent(dataStr);\n\n        sessionStorage.setItem('commands', data);\n    },\n\n    addChainLabels: function (atoms) { var me = this;\n        var size = 18;\n        var background = \"#CCCCCC\";\n\n        var atomsHash = me.icn3d.intHash(me.icn3d.hAtoms, atoms);\n\n        if(me.icn3d.labels['chain'] === undefined) me.icn3d.labels['chain'] = [];\n\n        var chainHash = me.icn3d.getChainsFromAtoms(atomsHash);\n\n        for(var chainid in chainHash) {\n            var label = {};\n\n            label.position = me.icn3d.centerAtoms(me.icn3d.chains[chainid]).center;\n\n            var pos = chainid.indexOf('_');\n            var chainName = chainid.substr(pos + 1);\n            var proteinName = me.getProteinName(chainid);\n            if(proteinName.length > 20) proteinName = proteinName.substr(0, 20) + '...';\n\n            label.text = 'Chain ' + chainName + ': ' + proteinName;\n            label.size = size;\n\n            var atomColorStr = me.icn3d.getFirstCalphaAtomObj(me.icn3d.chains[chainid]).color.getHexString().toUpperCase();\n            label.color = (atomColorStr === \"CCCCCC\" || atomColorStr === \"C8C8C8\") ? \"#888888\" : \"#\" + atomColorStr;\n            label.background = background;\n\n            me.icn3d.labels['chain'].push(label);\n        }\n\n        me.icn3d.removeHlObjects();\n    },\n\n    addTerminiLabels: function (atoms) { var me = this;\n        var size = 18;\n        var background = \"#CCCCCC\";\n\n        var protNucl = me.icn3d.unionHash(me.icn3d.proteins, me.icn3d.nucleotides);\n        var hlProtNucl = me.icn3d.intHash(me.icn3d.dAtoms, protNucl);\n        var atomsHash = me.icn3d.intHash(hlProtNucl, atoms);\n\n        if(me.icn3d.labels['chain'] === undefined) me.icn3d.labels['chain'] = [];\n\n        var chainHash = me.icn3d.getChainsFromAtoms(atomsHash);\n\n        for(var chainid in chainHash) {\n            var chainAtomsHash = me.icn3d.intHash(hlProtNucl, me.icn3d.chains[chainid]);\n            var serialArray = Object.keys(chainAtomsHash);\n            var firstAtom = me.icn3d.atoms[serialArray[0]];\n            var lastAtom = me.icn3d.atoms[serialArray[serialArray.length - 1]];\n\n            var labelN = {}, labelC = {};\n\n            labelN.position = firstAtom.coord;\n            labelC.position = lastAtom.coord;\n\n            labelN.text = 'N-';\n            labelC.text = 'C-';\n\n            if(me.icn3d.nucleotides.hasOwnProperty(firstAtom.serial)) {\n                labelN.text = \"5'\";\n                labelC.text = \"3'\";\n            }\n\n            labelN.size = size;\n            labelC.size = size;\n\n            var atomNColorStr = firstAtom.color.getHexString().toUpperCase();\n            var atomCColorStr = lastAtom.color.getHexString().toUpperCase();\n\n            labelN.color = (atomNColorStr === \"CCCCCC\" || atomNColorStr === \"C8C8C8\") ? \"#888888\" : \"#\" + atomNColorStr;\n            labelC.color = (atomCColorStr === \"CCCCCC\" || atomCColorStr === \"C8C8C8\") ? \"#888888\" : \"#\" + atomCColorStr;\n\n            labelN.background = background;\n            labelC.background = background;\n\n            me.icn3d.labels['chain'].push(labelN);\n            me.icn3d.labels['chain'].push(labelC);\n        }\n\n        me.icn3d.removeHlObjects();\n    },\n\n    //http://jasonjl.me/blog/2015/06/21/taking-action-on-browser-crashes/\n    getCommandsBeforeCrash: function() { var me = this;\n       window.addEventListener('load', function () {\n          sessionStorage.setItem('good_exit', 'pending');\n       });\n\n       window.addEventListener('beforeunload', function () {\n          sessionStorage.setItem('good_exit', 'true');\n       });\n\n       if(sessionStorage.getItem('good_exit') && sessionStorage.getItem('good_exit') === 'pending') {\n          if(!me.isMac()) me.bCrashed = true;  // this doesn't work in mac\n          me.commandsBeforeCrash = sessionStorage.getItem('commands');\n          if(!me.commandsBeforeCrash) me.commandsBeforeCrash = '';\n       }\n    },\n\n    addLineFromPicking: function(type) { var me = this;\n             var size = 0, color, background = 0;\n             var color = $(\"#\" + me.pre + type + \"color\" ).val();\n\n             var x = (me.icn3d.pAtom.coord.x + me.icn3d.pAtom2.coord.x) / 2;\n             var y = (me.icn3d.pAtom.coord.y + me.icn3d.pAtom2.coord.y) / 2;\n             var z = (me.icn3d.pAtom.coord.z + me.icn3d.pAtom2.coord.z) / 2;\n\n             var dashed = (type == 'stabilizer') ? false : true;\n\n             me.setLogCmd('add line | x1 ' + me.icn3d.pAtom.coord.x.toPrecision(4)  + ' y1 ' + me.icn3d.pAtom.coord.y.toPrecision(4) + ' z1 ' + me.icn3d.pAtom.coord.z.toPrecision(4) + ' | x2 ' + me.icn3d.pAtom2.coord.x.toPrecision(4)  + ' y2 ' + me.icn3d.pAtom2.coord.y.toPrecision(4) + ' z2 ' + me.icn3d.pAtom2.coord.z.toPrecision(4) + ' | color ' + color + ' | dashed ' + dashed + ' | type ' + type, true);\n\n             me.addLine(me.icn3d.pAtom.coord.x, me.icn3d.pAtom.coord.y, me.icn3d.pAtom.coord.z, me.icn3d.pAtom2.coord.x, me.icn3d.pAtom2.coord.y, me.icn3d.pAtom2.coord.z, color, dashed, type);\n\n             me.icn3d.pickpair = false;\n    },\n\n    setEntrezLinks: function(db) { var me = this;\n      var structArray = Object.keys(me.icn3d.structures);\n\n      var url;\n\n      if(structArray.length === 1) {\n          url = \"https://www.ncbi.nlm.nih.gov/\" + db + \"/?term=\" + structArray[0];\n          me.setLogCmd(\"Entrez \" + db + \" about PDB \" + structArray[0] + \": \" + url, false);\n\n          window.open(url, '_blank');\n      }\n      else if(structArray.length === 2) {\n          url = \"https://www.ncbi.nlm.nih.gov/\" + db + \"/?term=\" + structArray[0] + \" OR \" + structArray[1];\n          me.setLogCmd(\"Entrez \" + db + \" about PDB \" + structArray[0] + \" OR \" + structArray[1] + \": \" + url, false);\n\n          window.open(url, '_blank');\n      }\n    },\n\n    shareLink: function() { var me = this;\n           var url = me.shareLinkUrl();\n\n           if(me.bInputfile) {\n               alert(\"Share Link does NOT work when the data is from custom files. Please save 'iCn3D PNG Image' in the File menu and open it in iCn3D.\");\n               return;\n           }\n\n            if(url.length > 4000) {\n               alert(\"The url is more than 4000 characters and may not work. Please save 'iCn3D PNG Image' or 'State File' and open them in iCn3D.\");\n               return;\n           }\n\n\n           me.setLogCmd(\"share link: \" + url, false);\n\n           //window.open(url, '_blank');\n\n/*\n           //https://gist.github.com/hayageek/4584508\n           var request = gapi.client.urlshortener.url.insert({\n                'resource': {\n                  'longUrl': url\n                }\n           });\n           request.execute(function(response) {\n                var shorturl = 'Problem in getting shortened URL';\n                if(response.id !== undefined) {\n                    shorturl = response.id;\n                }\n\n                $(\"#\" + me.pre + \"ori_url\").val(url);\n                $(\"#\" + me.pre + \"short_url\").val(shorturl);\n\n                me.openDialog(me.pre + 'dl_copyurl', 'Copy a Share Link URL');\n           });\n*/\n\n           //https://firebase.google.com/docs/dynamic-links/rest\n           //Web API Key: AIzaSyBxl9CgM0dY5lagHL4UOhEpLWE1fuwdnvc\n           var fdlUrl = \"https://firebasedynamiclinks.googleapis.com/v1/shortLinks?key=AIzaSyBxl9CgM0dY5lagHL4UOhEpLWE1fuwdnvc\";\n           $.ajax({\n              url: fdlUrl,\n              type: 'POST',\n              //data : {'longDynamicLink': 'https://d55qc.app.goo.gl/?link=' + url, \"suffix\": {\"option\": \"SHORT\"}},\n              //data : {'longDynamicLink': 'https://d55qc.app.goo.gl/?link=' + encodeURIComponent(url)},\n              data : {'longDynamicLink': 'https://icn3d.page.link/?link=' + encodeURIComponent(url)},\n              dataType: 'json',\n              success: function(data) {\n                var shorturl = 'Problem in getting shortened URL';\n                if(data.shortLink !== undefined) {\n                    shorturl = data.shortLink;\n                }\n\n                $(\"#\" + me.pre + \"ori_url\").val(url);\n                $(\"#\" + me.pre + \"short_url\").val(shorturl);\n\n                me.openDialog(me.pre + 'dl_copyurl', 'Copy a Share Link URL');\n              },\n              error : function(xhr, textStatus, errorThrown ) {\n                var shorturl = 'Problem in getting shortened URL';\n\n                $(\"#\" + me.pre + \"ori_url\").val(url);\n                $(\"#\" + me.pre + \"short_url\").val(shorturl);\n\n                me.openDialog(me.pre + 'dl_copyurl', 'Copy a Share Link URL');\n              }\n           });\n    },\n\n    exportInteractions: function() { var me = this;\n       var text = '<html><body><b>Interacting residues</b>:<br/><table border=1 cellpadding=0 cellspacing=0><tr><th>Base Chain: Residues</th><th>Interacting Chain</th></tr>';\n\n       //me.chainids2resids[fisrtChainid][secondChainid].push(resid);\n/*\n       for(var fisrtChainid in me.chainids2resids) {\n           for(var secondChainid in me.chainids2resids[fisrtChainid]) {\n               text += '<tr><td>' + fisrtChainid + ': ';\n               text += me.residueids2spec(me.chainids2resids[fisrtChainid][secondChainid]);\n               text += '</td><td>' + secondChainid + '</td></tr>';\n           }\n       }\n*/\n\n       for(var fisrtChainid in me.chainname2residues) {\n           for(var name in me.chainname2residues[fisrtChainid]) {\n               var secondChainid = fisrtChainid.substr(0, fisrtChainid.indexOf('_')) + '_' + name.substr(0, name.indexOf(' '));\n               text += '<tr><td>' + fisrtChainid + ': ';\n               text += me.residueids2spec(me.chainname2residues[fisrtChainid][name]);\n               text += '</td><td>' + secondChainid + '</td></tr>';\n           }\n       }\n\n       text += '</table><br/></body></html>';\n\n       var file_pref = (me.inputid) ? me.inputid : \"custom\";\n       me.saveFile(file_pref + '_interactions.html', 'html', text);\n    },\n\n    saveColor: function() { var me = this;\n       for(var i in me.icn3d.atoms) {\n           var atom = me.icn3d.atoms[i];\n           atom.colorSave = atom.color.clone();\n       }\n    },\n\n    applySavedColor: function() { var me = this;\n       for(var i in me.icn3d.atoms) {\n           var atom = me.icn3d.atoms[i];\n           if(atom.colorSave !== undefined) {\n               atom.color = atom.colorSave.clone();\n           }\n       }\n\n       me.icn3d.draw();\n\n       me.changeSeqColor(Object.keys(me.icn3d.residues));\n    },\n\n    saveStyle: function() { var me = this;\n       for(var i in me.icn3d.atoms) {\n           var atom = me.icn3d.atoms[i];\n           atom.styleSave = atom.style;\n           if(atom.style2 !== undefined) atom.style2Save = atom.style2;\n       }\n    },\n\n    applySavedStyle: function() { var me = this;\n       for(var i in me.icn3d.atoms) {\n           var atom = me.icn3d.atoms[i];\n           if(atom.styleSave !== undefined) {\n               atom.style = atom.styleSave;\n           }\n           if(atom.style2Save !== undefined) {\n               atom.style2 = atom.style2Save;\n           }\n       }\n\n       me.icn3d.draw();\n    },\n\n    // ====== functions end ===============\n\n    // ====== events start ===============\n    // back and forward arrows\n    clickBack: function() { var me = this;\n        $(\"#\" + me.pre + \"back\").add(\"#\" + me.pre + \"mn6_back\").click(function(e) {\n           e.preventDefault();\n\n           me.setLogCmd(\"back\", false);\n           me.back();\n        });\n    },\n\n    clickForward: function() { var me = this;\n        $(\"#\" + me.pre + \"forward\").add(\"#\" + me.pre + \"mn6_forward\").click(function(e) {\n           e.preventDefault();\n\n           me.setLogCmd(\"forward\", false);\n           me.forward();\n        });\n    },\n\n    clickToggle: function() { var me = this;\n        $(\"#\" + me.pre + \"toggle\").add(\"#\" + me.pre + \"mn2_toggle\").click(function(e) {\n           //me.setLogCmd(\"toggle selection\", true);\n           me.toggleSelection();\n           me.setLogCmd(\"toggle selection\", true);\n        });\n    },\n\n    clickHlColorYellow: function() { var me = this;\n        $(\"#\" + me.pre + \"mn2_hl_clrYellow\").click(function(e) {\n           me.setLogCmd(\"set highlight color yellow\", true);\n           me.icn3d.hColor = new THREE.Color(0xFFFF00);\n           me.icn3d.matShader = me.icn3d.setOutlineColor('yellow');\n           me.icn3d.draw(); // required to make it work properly\n        });\n    },\n\n    clickHlColorGreen: function() { var me = this;\n        $(\"#\" + me.pre + \"mn2_hl_clrGreen\").click(function(e) {\n           me.setLogCmd(\"set highlight color green\", true);\n           me.icn3d.hColor = new THREE.Color(0x00FF00);\n           me.icn3d.matShader = me.icn3d.setOutlineColor('green');\n           me.icn3d.draw(); // required to make it work properly\n        });\n    },\n\n    clickHlColorRed: function() { var me = this;\n        $(\"#\" + me.pre + \"mn2_hl_clrRed\").click(function(e) {\n           me.setLogCmd(\"set highlight color red\", true);\n           me.icn3d.hColor = new THREE.Color(0xFF0000);\n           me.icn3d.matShader = me.icn3d.setOutlineColor('red');\n           me.icn3d.draw(); // required to make it work properly\n        });\n    },\n\n    clickHlStyleOutline: function() { var me = this;\n        $(\"#\" + me.pre + \"mn2_hl_styleOutline\").click(function(e) {\n           me.setLogCmd(\"set highlight style outline\", true);\n           me.icn3d.bHighlight = 1;\n\n           me.showHighlight();\n\n           //me.icn3d.draw();\n        });\n    },\n\n    clickHlStyleObject: function() { var me = this;\n        $(\"#\" + me.pre + \"mn2_hl_styleObject\").click(function(e) {\n           me.setLogCmd(\"set highlight style 3d\", true);\n           me.icn3d.bHighlight = 2;\n\n           me.showHighlight();\n\n           //me.icn3d.draw();\n        });\n    },\n\n    clickHlStyleNone: function() { var me = this;\n        $(\"#\" + me.pre + \"mn2_hl_styleNone\").click(function (e) {\n            e.stopImmediatePropagation();\n\n            me.clearHighlight();\n\n            me.setLogCmd(\"clear selection\", true);\n        });\n    },\n\n    clickAlternate: function() { var me = this;\n        $(\"#\" + me.pre + \"alternate\").add(\"#\" + me.pre + \"mn2_alternate\").click(function(e) {\n           //me.setLogCmd(\"alternate structures\", false);\n           me.icn3d.bAlternate = true;\n\n           me.icn3d.alternateStructures();\n\n           me.icn3d.bAlternate = false;\n           me.setLogCmd(\"alternate structures\", false);\n        });\n    },\n\n    //mn 1\n    clkMn1_mmtfid: function() { var me = this;\n        $(\"#\" + me.pre + \"mn1_mmtfid\").click(function(e) {\n           me.openDialog(me.pre + 'dl_mmtfid', 'Please input MMTF ID');\n        });\n    },\n\n    clkMn1_pdbid: function() { var me = this;\n        $(\"#\" + me.pre + \"mn1_pdbid\").click(function(e) {\n           me.openDialog(me.pre + 'dl_pdbid', 'Please input PDB ID');\n        });\n    },\n\n    clkMn1_align: function() { var me = this;\n        $(\"#\" + me.pre + \"mn1_align\").click(function(e) {\n           me.openDialog(me.pre + 'dl_align', 'Align two 3D structures');\n        });\n    },\n\n    clkMn1_pdbfile: function() { var me = this;\n        $(\"#\" + me.pre + \"mn1_pdbfile\").click(function(e) {\n           me.openDialog(me.pre + 'dl_pdbfile', 'Please input PDB File');\n        });\n    },\n\n    clkMn1_mol2file: function() { var me = this;\n        $(\"#\" + me.pre + \"mn1_mol2file\").click(function(e) {\n           me.openDialog(me.pre + 'dl_mol2file', 'Please input Mol2 File');\n        });\n    },\n    clkMn1_sdffile: function() { var me = this;\n        $(\"#\" + me.pre + \"mn1_sdffile\").click(function(e) {\n           me.openDialog(me.pre + 'dl_sdffile', 'Please input SDF File');\n        });\n    },\n    clkMn1_xyzfile: function() { var me = this;\n        $(\"#\" + me.pre + \"mn1_xyzfile\").click(function(e) {\n           me.openDialog(me.pre + 'dl_xyzfile', 'Please input XYZ File');\n        });\n    },\n    clkMn1_urlfile: function() { var me = this;\n        $(\"#\" + me.pre + \"mn1_urlfile\").click(function(e) {\n           me.openDialog(me.pre + 'dl_urlfile', 'Load data by URL');\n        });\n    },\n\n    clkMn1_mmciffile: function() { var me = this;\n        $(\"#\" + me.pre + \"mn1_mmciffile\").click(function(e) {\n           me.openDialog(me.pre + 'dl_mmciffile', 'Please input mmCIF File');\n        });\n    },\n\n    clkMn1_mmcifid: function() { var me = this;\n        $(\"#\" + me.pre + \"mn1_mmcifid\").click(function(e) {\n           me.openDialog(me.pre + 'dl_mmcifid', 'Please input mmCIF ID');\n        });\n    },\n\n    clkMn1_mmdbid: function() { var me = this;\n        $(\"#\" + me.pre + \"mn1_mmdbid\").click(function(e) {\n           me.openDialog(me.pre + 'dl_mmdbid', 'Please input MMDB ID');\n        });\n    },\n\n    clkMn1_blast_rep_id: function() { var me = this;\n        $(\"#\" + me.pre + \"mn1_blast_rep_id\").click(function(e) {\n           me.openDialog(me.pre + 'dl_blast_rep_id', 'Align sequence to structure');\n        });\n    },\n\n    clkMn1_gi: function() { var me = this;\n        $(\"#\" + me.pre + \"mn1_gi\").click(function(e) {\n           me.openDialog(me.pre + 'dl_gi', 'Please input protein gi');\n        });\n    },\n\n    clkMn1_cid: function() { var me = this;\n        $(\"#\" + me.pre + \"mn1_cid\").click(function(e) {\n           me.openDialog(me.pre + 'dl_cid', 'Please input PubChem CID');\n        });\n    },\n\n    clkMn1_pngimage: function() { var me = this;\n        $(\"#\" + me.pre + \"mn1_pngimage\").click(function(e) {\n           me.openDialog(me.pre + 'dl_pngimage', 'Please input the PNG image');\n        });\n    },\n\n    clkMn1_state: function() { var me = this;\n        $(\"#\" + me.pre + \"mn1_state\").click(function(e) {\n           me.openDialog(me.pre + 'dl_state', 'Please input the state file');\n        });\n    },\n\n    clkMn1_selection: function() { var me = this;\n        $(\"#\" + me.pre + \"mn1_selection\").click(function(e) {\n           me.openDialog(me.pre + 'dl_selection', 'Please input the selection file');\n        });\n    },\n\n    clkMn1_exportState: function() { var me = this;\n        $(\"#\" + me.pre + \"mn1_exportState\").click(function (e) {\n           me.setLogCmd(\"export state file\", false);\n\n           var file_pref = (me.inputid) ? me.inputid : \"custom\";\n           me.saveFile(file_pref + '_statefile.txt', 'command');\n        });\n    },\n\n    exportStlFile: function(postfix) { var me = this;\n       // assemblies\n       if(me.icn3d.biomtMatrices !== undefined && me.icn3d.biomtMatrices.length > 1 && me.icn3d.bAssembly) {\n            // use a smaller grid to build the surface for assembly\n            me.icn3d.threshbox = 180 / Math.pow(me.icn3d.biomtMatrices.length, 0.33);\n\n            me.icn3d.removeSurfaces();\n            me.icn3d.applySurfaceOptions();\n\n            me.icn3d.removeMaps();\n            me.icn3d.applyMapOptions();\n\n            me.icn3d.removeEmmaps();\n            me.icn3d.applyEmmapOptions();\n       }\n\n       var text = me.saveStlFile();\n       var file_pref = (me.inputid) ? me.inputid : \"custom\";\n       me.saveFile(file_pref + postfix + '.stl', 'binary', text);\n\n       // assemblies\n       if(me.icn3d.biomtMatrices !== undefined && me.icn3d.biomtMatrices.length > 1 && me.icn3d.bAssembly\n         && Object.keys(me.icn3d.dAtoms).length * me.icn3d.biomtMatrices.length > me.icn3d.maxAtoms3DMultiFile ) {\n            alert(me.icn3d.biomtMatrices.length + \" files will be generated for this assembly. Please merge these files using some software and 3D print the merged file.\");\n\n            var identity = new THREE.Matrix4();\n            identity.identity();\n\n            var index = 1;\n            for (var i = 0; i < me.icn3d.biomtMatrices.length; i++) {  // skip itself\n              var mat = me.icn3d.biomtMatrices[i];\n              if (mat === undefined) continue;\n\n              // skip itself\n              if(mat.equals(identity)) continue;\n\n              var time = (i + 1) * 100;\n\n              //https://stackoverflow.com/questions/1190642/how-can-i-pass-a-parameter-to-a-settimeout-callback\n              setTimeout(function(mat, index){\n                  text = me.saveStlFile(mat);\n                  me.saveFile(file_pref + postfix + index + '.stl', 'binary', text);\n                  text = '';\n              }.bind(this, mat, index), time);\n\n              ++index;\n            }\n\n            // reset grid to build the surface for assembly\n            me.icn3d.threshbox = 180;\n       }\n    },\n\n    exportVrmlFile: function(postfix) { var me = this;\n       // assemblies\n       if(me.icn3d.biomtMatrices !== undefined && me.icn3d.biomtMatrices.length > 1 && me.icn3d.bAssembly) {\n            // use a smaller grid to build the surface for assembly\n            me.icn3d.threshbox = 180 / Math.pow(me.icn3d.biomtMatrices.length, 0.33);\n\n            me.icn3d.removeSurfaces();\n            me.icn3d.applySurfaceOptions();\n\n            me.icn3d.removeMaps();\n            me.icn3d.applyMapOptions();\n\n            me.icn3d.removeEmmaps();\n            me.icn3d.applyEmmapOptions();\n       }\n\n       var text = me.saveVrmlFile();\n       var file_pref = (me.inputid) ? me.inputid : \"custom\";\n       //me.saveFile(file_pref + postfix + '.wrl', 'text', text);\n       me.saveFile(file_pref + postfix + '.vrml', 'text', text);\n\n       // assemblies\n       if(me.icn3d.biomtMatrices !== undefined && me.icn3d.biomtMatrices.length > 1 && me.icn3d.bAssembly\n         && Object.keys(me.icn3d.dAtoms).length * me.icn3d.biomtMatrices.length > me.icn3d.maxAtoms3DMultiFile ) {\n            alert(me.icn3d.biomtMatrices.length + \" files will be generated for this assembly. Please merge these files using some software and 3D print the merged file.\");\n\n            var identity = new THREE.Matrix4();\n            identity.identity();\n\n            var index = 1;\n            for (var i = 0; i < me.icn3d.biomtMatrices.length; i++) {  // skip itself\n              var mat = me.icn3d.biomtMatrices[i];\n              if (mat === undefined) continue;\n\n              // skip itself\n              if(mat.equals(identity)) continue;\n\n              var time = (i + 1) * 100;\n\n              //https://stackoverflow.com/questions/1190642/how-can-i-pass-a-parameter-to-a-settimeout-callback\n              setTimeout(function(mat, index){\n                  text = me.saveVrmlFile(mat);\n                  //me.saveFile(me.inputid + postfix + index + '.wrl', 'text', text);\n                  me.saveFile(file_pref + postfix + index + '.vrml', 'text', text);\n                  text = '';\n              }.bind(this, mat, index), time);\n\n              ++index;\n            }\n\n            // reset grid to build the surface for assembly\n            me.icn3d.threshbox = 180;\n       }\n    },\n\n    clkMn1_exportStl: function() { var me = this;\n        $(\"#\" + me.pre + \"mn1_exportStl\").click(function (e) {\n           me.setLogCmd(\"export stl file\", false);\n\n           //me.hideStabilizer();\n\n           me.exportStlFile('');\n        });\n    },\n\n    clkMn1_exportVrml: function() { var me = this;\n        $(\"#\" + me.pre + \"mn1_exportVrml\").click(function (e) {\n           me.setLogCmd(\"export vrml file\", false);\n\n           //me.hideStabilizer();\n\n           me.exportVrmlFile('');\n        });\n    },\n\n    clkMn1_exportStlStab: function() { var me = this;\n        $(\"#\" + me.pre + \"mn1_exportStlStab\").click(function (e) {\n           me.setLogCmd(\"export stl stabilizer file\", false);\n\n           //me.icn3d.bRender = false;\n\n           me.hideStabilizer();\n           me.resetAfter3Dprint();\n           me.addStabilizer();\n\n           me.exportStlFile('_stab');\n        });\n    },\n\n    clkMn1_exportVrmlStab: function() { var me = this;\n        $(\"#\" + me.pre + \"mn1_exportVrmlStab\").click(function (e) {\n           me.setLogCmd(\"export vrml stabilizer file\", false);\n\n           //me.icn3d.bRender = false;\n\n           me.hideStabilizer();\n           me.resetAfter3Dprint();\n           me.addStabilizer();\n\n           me.exportVrmlFile('_stab');\n        });\n    },\n\n    clkMn6_exportInteraction: function() { var me = this;\n        $(\"#\" + me.pre + \"mn6_exportInteraction\").click(function (e) {\n           me.setLogCmd(\"export interactions\", false);\n\n           me.exportInteractions();\n        });\n    },\n\n    clkMn1_exportCanvas: function() { var me = this;\n        $(\"#\" + me.pre + \"mn1_exportCanvas\").add(\"#\" + me.pre + \"saveimage\").click(function (e) {\n           me.setLogCmd(\"export canvas\", false);\n\n           var file_pref = (me.inputid) ? me.inputid : \"custom\";\n           me.saveFile(file_pref + '_image_icn3d_loadable.png', 'png');\n        });\n    },\n\n    clkMn1_exportCounts: function() { var me = this;\n        $(\"#\" + me.pre + \"mn1_exportCounts\").click(function (e) {\n           me.setLogCmd(\"export counts\", false);\n\n           var text = '<html><body><b>Total Count for atoms with coordinates</b>:<br/><table border=1><tr><th>Structure Count</th><th>Chain Count</th><th>Residue Count</th><th>Atom Count</th></tr>';\n\n           text += '<tr><td>' + Object.keys(me.icn3d.structures).length + '</td><td>' + Object.keys(me.icn3d.chains).length + '</td><td>' + Object.keys(me.icn3d.residues).length + '</td><td>' + Object.keys(me.icn3d.atoms).length + '</td></tr>';\n\n           text += '</table><br/>';\n\n           text += '<b>Counts by Chain for atoms with coordinates</b>:<br/><table border=1><tr><th>Structure</th><th>Chain</th><th>Residue Count</th><th>Atom Count</th></tr>';\n\n           var chainArray = Object.keys(me.icn3d.chains);\n           for(var i = 0, il = chainArray.length; i < il; ++i) {\n               var chainid = chainArray[i];\n               var pos = chainid.indexOf('_');\n               var structure = chainid.substr(0, pos);\n               var chain = chainid.substr(pos + 1);\n\n               var residueHash = {};\n               var atoms = me.icn3d.chains[chainid];\n               for(var j in atoms) {\n                   residueHash[me.icn3d.atoms[j].resi] = 1;\n               }\n\n               text += '<tr><td>' + structure + '</td><td>' + chain + '</td><td>' + Object.keys(residueHash).length + '</td><td>' + Object.keys(me.icn3d.chains[chainid]).length + '</td></tr>';\n           }\n\n           text += '</table><br/></body></html>';\n\n           var file_pref = (me.inputid) ? me.inputid : \"custom\";\n           me.saveFile(file_pref + '_counts.html', 'html', text);\n        });\n    },\n\n    clkMn1_exportSelections: function() { var me = this;\n        $(\"#\" + me.pre + \"mn1_exportSelections\").click(function (e) {\n           me.setLogCmd(\"export all selections\", false);\n\n           var text = me.exportCustomAtoms();\n\n           var file_pref = (me.inputid) ? me.inputid : \"custom\";\n           me.saveFile(file_pref + '_selections.txt', 'text', [text]);\n        });\n    },\n\n    clkMn1_sharelink: function() { var me = this;\n        $(\"#\" + me.pre + \"mn1_sharelink\").click(function (e) {\n            me.shareLink();\n        });\n    },\n\n    clkMn1_link_structure: function() { var me = this;\n        $(\"#\" + me.pre + \"mn1_link_structure\").click(function (e) {\n           var url = me.getLinkToStructureSummary(true);\n\n           window.open(url, '_blank');\n        });\n    },\n\n    clkMn1_link_bind: function() { var me = this;\n        $(\"#\" + me.pre + \"mn1_link_bind\").click(function (e) {\n           url = \"https://www.ncbi.nlm.nih.gov/pccompound?LinkName=pccompound_structure&from_uid=\" + me.inputid;\n           me.setLogCmd(\"link to 3D protein structures bound to CID \" + me.inputid + \": \" + url, false);\n\n           window.open(url, '_blank');\n        });\n    },\n\n    clkMn1_link_vast: function() { var me = this;\n        $(\"#\" + me.pre + \"mn1_link_vast\").click(function (e) {\n           if(me.inputid === undefined) {\n                   url = \"https://www.ncbi.nlm.nih.gov/pccompound?term=\" + me.icn3d.molTitle;\n                   me.setLogCmd(\"link to compounds \" + me.icn3d.molTitle + \": \" + url, false);\n           }\n           else {\n               if(me.cfg.cid !== undefined) {\n                       url = \"https://www.ncbi.nlm.nih.gov/pccompound?LinkName=pccompound_pccompound_3d&from_uid=\" + me.inputid;\n                       me.setLogCmd(\"link to compounds with structure similar to CID \" + me.inputid + \": \" + url, false);\n               }\n               else {\n                   var idArray = me.inputid.split('_');\n\n                   var url;\n                   if(idArray.length === 1) {\n                       url = \"https://www.ncbi.nlm.nih.gov/Structure/vastplus/vastplus.cgi?uid=\" + me.inputid;\n                       me.setLogCmd(\"link to structures similar to \" + me.inputid + \": \" + url, false);\n                   }\n                   else if(idArray.length === 2) {\n                       url = \"https://www.ncbi.nlm.nih.gov/Structure/vastplus/vastplus.cgi?uid=\" + idArray[0];\n                       me.setLogCmd(\"link to structures similar to \" + idArray[0] + \": \" + url, false);\n                   }\n               }\n\n               window.open(url, '_blank');\n           }\n        });\n    },\n\n    clkMn1_link_pubmed: function() { var me = this;\n        $(\"#\" + me.pre + \"mn1_link_pubmed\").click(function (e) {\n           var url;\n           if(me.inputid === undefined) {\n               var url;\n               url = \"https://www.ncbi.nlm.nih.gov/pubmed/?term=\" + me.icn3d.molTitle;\n               me.setLogCmd(\"link to literature about \" + me.icn3d.molTitle + \": \" + url, false);\n\n               window.open(url, '_blank');\n           }\n           else if(me.pmid !== undefined) {\n               var idArray = me.pmid.toString().split('_');\n\n               var url;\n               if(idArray.length === 1) {\n                   url = \"https://www.ncbi.nlm.nih.gov/pubmed/\" + me.pmid;\n                   me.setLogCmd(\"link to PubMed ID \" + me.pmid + \": \" + url, false);\n               }\n               else if(idArray.length === 2) {\n                   url = \"https://www.ncbi.nlm.nih.gov/pubmed/?term=\" + idArray[0] + \" OR \" + idArray[1];\n                   me.setLogCmd(\"link to PubMed IDs \" + idArray[0] + \", \" + idArray[1] + \": \" + url, false);\n               }\n\n               window.open(url, '_blank');\n           }\n           else if(isNaN(me.inputid)) {\n               var idArray = me.inputid.toString().split('_');\n\n               var url;\n               if(idArray.length === 1) {\n                   url = \"https://www.ncbi.nlm.nih.gov/pubmed/?term=\" + me.inputid;\n                   me.setLogCmd(\"link to literature about PDB \" + me.inputid + \": \" + url, false);\n               }\n               else if(idArray.length === 2) {\n                   url = \"https://www.ncbi.nlm.nih.gov/pubmed/?term=\" + idArray[0] + \" OR \" + idArray[1];\n                   me.setLogCmd(\"link to literature about PDB \" + idArray[0] + \" OR \" + idArray[1] + \": \" + url, false);\n               }\n\n               window.open(url, '_blank');\n           }\n           else {\n               if(me.cfg.cid !== undefined) {\n                   alert(\"No literature information is available for this compound in the SDF file.\");\n               }\n               else {\n                   alert(\"No literature information is available for this structure.\");\n               }\n           }\n        });\n    },\n\n    clkMn1_link_protein: function() { var me = this;\n        $(\"#\" + me.pre + \"mn1_link_protein\").click(function (e) {\n          //me.setEntrezLinks('protein');\n          var structArray = Object.keys(me.icn3d.structures);\n\n          var chainArray = Object.keys(me.icn3d.chains);\n          var text = '';\n          for(var i = 0, il = chainArray.length; i < il; ++i) {\n              var firstAtom = me.icn3d.getFirstCalphaAtomObj(me.icn3d.chains[chainArray[i]]);\n\n              if(me.icn3d.proteins.hasOwnProperty(firstAtom.serial) && chainArray[i].length == 6) {\n                  text += chainArray[i] + '[accession] OR ';\n              }\n          }\n          if(text.length > 0) text = text.substr(0, text.length - 4);\n\n          var url = \"https://www.ncbi.nlm.nih.gov/protein/?term=\" + text;\n          me.setLogCmd(\"link to Entrez protein about PDB \" + structArray + \": \" + url, false);\n\n          window.open(url, '_blank');\n        });\n    },\n\n    // mn 2\n    clkMn2_selectannotations: function() { var me = this;\n        $(\"#\" + me.pre + \"mn6_selectannotations\").click(function (e) {\n           me.showAnnotations();\n           me.setLogCmd(\"view annotations\", true);\n        });\n    },\n\n    clkMn2_selectall: function() { var me = this;\n        $(\"#\" + me.pre + \"mn2_selectall\").click(function (e) {\n           me.setLogCmd(\"select all\", true);\n\n           me.selectAll();\n\n           me.removeHlAll();\n\n           me.icn3d.draw();\n\n        });\n\n        $(\"#\" + me.pre + \"clearall\").click(function (e) {\n           me.setLogCmd(\"clear all\", true);\n\n           me.bSelectResidue = false;\n\n           me.selectAll();\n\n           me.removeHlAll();\n\n           me.icn3d.draw();\n\n        });\n\n    },\n\n    clkMn2_selectcomplement: function() { var me = this;\n        $(\"#\" + me.pre + \"mn2_selectcomplement\").click(function (e) {\n           if(Object.keys(me.icn3d.hAtoms).length < Object.keys(me.icn3d.atoms).length) {\n               me.setLogCmd(\"select complement\", true);\n\n               me.selectComplement();\n           }\n        });\n    },\n\n    clkMn2_selectsidechains: function() { var me = this;\n        $(\"#\" + me.pre + \"mn2_selectsidechains\").click(function (e) {\n           me.setLogCmd(\"select side chains\", true);\n\n           me.selectSideChains();\n        });\n    },\n\n    clkMn2_alignment: function() { var me = this;\n        $(\"#\" + me.pre + \"mn2_alignment\").click(function (e) {\n           me.openDialog(me.pre + 'dl_alignment', 'Select residues in aligned sequences');\n        });\n    },\n\n    clkMn2_command: function() { var me = this;\n        $(\"#\" + me.pre + \"mn2_command\").click(function (e) {\n           me.openDialog(me.pre + 'dl_advanced2', 'Select by specification');\n           //$(\"#\" + me.pre + \"dl_setsmenu\").hide();\n           //$(\"#\" + me.pre + \"dl_setoperations\").hide();\n           //$(\"#\" + me.pre + \"dl_command\").show();\n        });\n    },\n\n    clkMn2_definedsets: function() { var me = this;\n        $(\"#\" + me.pre + \"mn2_definedsets\").add(\"#\" + me.pre + \"definedsets\").click(function (e) {\n           me.showSets();\n\n           me.setLogCmd('defined sets', true);\n        });\n\n        $(\"#\" + me.pre + \"setOr\").click(function (e) {\n           me.setOperation = 'or';\n        });\n        $(\"#\" + me.pre + \"setAnd\").click(function (e) {\n           me.setOperation = 'and';\n        });\n        $(\"#\" + me.pre + \"setNot\").click(function (e) {\n           me.setOperation = 'not';\n        });\n    },\n\n    clkMn2_pkNo: function() { var me = this;\n        $(\"#\" + me.pre + \"mn2_pkNo\").click(function (e) {\n           me.icn3d.pk = 0;\n           me.icn3d.opts['pk'] = 'no';\n           me.setLogCmd('set pk off', true);\n\n           me.icn3d.draw();\n           me.icn3d.removeHlObjects();\n        });\n    },\n\n    clkMn2_pkYes: function() { var me = this;\n        $(\"#\" + me.pre + \"mn2_pkYes\").click(function (e) {\n           me.icn3d.pk = 1;\n           me.icn3d.opts['pk'] = 'atom';\n           me.setLogCmd('set pk atom', true);\n        });\n    },\n\n    clkMn2_pkResidue: function() { var me = this;\n        $(\"#\" + me.pre + \"mn2_pkResidue\").click(function (e) {\n           me.icn3d.pk = 2;\n           me.icn3d.opts['pk'] = 'residue';\n           me.setLogCmd('set pk residue', true);\n        });\n    },\n\n    clkMn2_pkStrand: function() { var me = this;\n        $(\"#\" + me.pre + \"mn2_pkStrand\").click(function (e) {\n           me.icn3d.pk = 3;\n           me.icn3d.opts['pk'] = 'strand';\n           me.setLogCmd('set pk strand', true);\n        });\n    },\n\n    clkMn2_pkChain: function() { var me = this;\n        $(\"#\" + me.pre + \"mn2_pkChain\").click(function (e) {\n           me.icn3d.pk = 4;\n           me.icn3d.opts['pk'] = 'chain';\n           me.setLogCmd('set pk chain', true);\n        });\n    },\n\n    clkMn2_aroundsphere: function() { var me = this;\n        $(\"#\" + me.pre + \"mn2_aroundsphere\").click(function (e) {\n           me.openDialog(me.pre + 'dl_aroundsphere', 'Select a sphere around current selection');\n        });\n    },\n\n    clkMn2_select_chain: function() { var me = this;\n        $(\"#\" + me.pre + \"mn2_select_chain\").add(\"#\" + me.pre + \"definedSets\").click(function (e) {\n           me.openDialog(me.pre + 'dl_select_chain', 'Select Structure/Chain/Custom Selection');\n        });\n    },\n\n    // mn 3\n    clkMn3_proteinsRibbon: function() { var me = this;\n        $(\"#\" + me.pre + \"mn3_proteinsRibbon\").click(function (e) {\n           me.setStyle('proteins', 'ribbon');\n           me.setLogCmd('style proteins ribbon', true);\n        });\n    },\n\n    clkMn3_proteinsStrand: function() { var me = this;\n        $(\"#\" + me.pre + \"mn3_proteinsStrand\").click(function (e) {\n           me.setStyle('proteins', 'strand');\n\n           me.setLogCmd('style proteins strand', true);\n        });\n    },\n\n    clkMn3_proteinsCylinder: function() { var me = this;\n        $(\"#\" + me.pre + \"mn3_proteinsCylinder\").click(function (e) {\n           me.setStyle('proteins', 'cylinder and plate');\n           me.setLogCmd('style proteins cylinder and plate', true);\n        });\n    },\n\n    clkMn3_proteinsSchematic: function() { var me = this;\n        $(\"#\" + me.pre + \"mn3_proteinsSchematic\").click(function (e) {\n           me.setStyle('proteins', 'schematic');\n           me.setLogCmd('style proteins schematic', true);\n        });\n    },\n\n    clkMn3_proteinsCalpha: function() { var me = this;\n        $(\"#\" + me.pre + \"mn3_proteinsCalpha\").click(function (e) {\n           me.setStyle('proteins', 'c alpha trace');\n           me.setLogCmd('style proteins c alpha trace', true);\n        });\n    },\n\n    clkMn3_proteinsBfactor: function() { var me = this;\n        $(\"#\" + me.pre + \"mn3_proteinsBfactor\").click(function (e) {\n           me.setStyle('proteins', 'b factor tube');\n           me.setLogCmd('style proteins b factor tube', true);\n        });\n    },\n\n    clkMn3_proteinsLines: function() { var me = this;\n        $(\"#\" + me.pre + \"mn3_proteinsLines\").click(function (e) {\n           me.setStyle('proteins', 'lines');\n           me.setLogCmd('style proteins lines', true);\n        });\n    },\n\n    clkMn3_proteinsStick: function() { var me = this;\n        $(\"#\" + me.pre + \"mn3_proteinsStick\").click(function (e) {\n           me.setStyle('proteins', 'stick');\n           me.setLogCmd('style proteins stick', true);\n        });\n    },\n\n    clkMn3_proteinsBallstick: function() { var me = this;\n        $(\"#\" + me.pre + \"mn3_proteinsBallstick\").click(function (e) {\n           me.setStyle('proteins', 'ball and stick');\n           me.setLogCmd('style proteins ball and stick', true);\n        });\n    },\n\n    clkMn3_proteinsSphere: function() { var me = this;\n        $(\"#\" + me.pre + \"mn3_proteinsSphere\").click(function (e) {\n           me.setStyle('proteins', 'sphere');\n           me.setLogCmd('style proteins sphere', true);\n        });\n    },\n\n    clkMn3_proteinsNo: function() { var me = this;\n        $(\"#\" + me.pre + \"mn3_proteinsNo\").click(function (e) {\n           me.setStyle('proteins', 'nothing');\n           me.setLogCmd('style proteins nothing', true);\n        });\n    },\n\n    clkMn3_sidecLines: function() { var me = this;\n        $(\"#\" + me.pre + \"mn3_sidecLines\").click(function (e) {\n           me.setStyle('sidec', 'lines');\n           me.setLogCmd('style sidec lines', true);\n        });\n    },\n\n    clkMn3_sidecStick: function() { var me = this;\n        $(\"#\" + me.pre + \"mn3_sidecStick\").click(function (e) {\n           me.setStyle('sidec', 'stick');\n           me.setLogCmd('style sidec stick', true);\n        });\n    },\n\n    clkMn3_sidecBallstick: function() { var me = this;\n        $(\"#\" + me.pre + \"mn3_sidecBallstick\").click(function (e) {\n           me.setStyle('sidec', 'ball and stick');\n           me.setLogCmd('style sidec ball and stick', true);\n        });\n    },\n\n    clkMn3_sidecSphere: function() { var me = this;\n        $(\"#\" + me.pre + \"mn3_sidecSphere\").click(function (e) {\n           me.setStyle('sidec', 'sphere');\n           me.setLogCmd('style sidec sphere', true);\n        });\n    },\n\n    clkMn3_sidecNo: function() { var me = this;\n        $(\"#\" + me.pre + \"mn3_sidecNo\").click(function (e) {\n           me.setStyle('sidec', 'nothing');\n           me.setLogCmd('style sidec nothing', true);\n        });\n    },\n\n\n    clkMn3_nuclCartoon: function() { var me = this;\n        $(\"#\" + me.pre + \"mn3_nuclCartoon\").click(function (e) {\n           me.setStyle('nucleotides', 'nucleotide cartoon');\n           me.setLogCmd('style nucleotides nucleotide cartoon', true);\n        });\n    },\n\n    clkMn3_nuclSchematic: function() { var me = this;\n        $(\"#\" + me.pre + \"mn3_nuclSchematic\").click(function (e) {\n           me.setStyle('nucleotides', 'schematic');\n           me.setLogCmd('style nucleotides schematic', true);\n        });\n    },\n\n    clkMn3_nuclPhos: function() { var me = this;\n        $(\"#\" + me.pre + \"mn3_nuclPhos\").click(function (e) {\n           me.setStyle('nucleotides', 'o3 trace');\n           me.setLogCmd('style nucleotides o3 trace', true);\n        });\n    },\n\n    clkMn3_nuclLines: function() { var me = this;\n        $(\"#\" + me.pre + \"mn3_nuclLines\").click(function (e) {\n           me.setStyle('nucleotides', 'lines');\n           me.setLogCmd('style nucleotides lines', true);\n        });\n    },\n\n    clkMn3_nuclStick: function() { var me = this;\n        $(\"#\" + me.pre + \"mn3_nuclStick\").click(function (e) {\n           me.setStyle('nucleotides', 'stick');\n           me.setLogCmd('style nucleotides stick', true);\n        });\n    },\n\n    clkMn3_nuclBallstick: function() { var me = this;\n        $(\"#\" + me.pre + \"mn3_nuclBallstick\").click(function (e) {\n           me.setStyle('nucleotides', 'ball and stick');\n           me.setLogCmd('style nucleotides ball and stick', true);\n        });\n    },\n\n    clkMn3_nuclSphere: function() { var me = this;\n        $(\"#\" + me.pre + \"mn3_nuclSphere\").click(function (e) {\n           me.setStyle('nucleotides', 'sphere');\n           me.setLogCmd('style nucleotides sphere', true);\n        });\n    },\n\n    clkMn3_nuclNo: function() { var me = this;\n        $(\"#\" + me.pre + \"mn3_nuclNo\").click(function (e) {\n           me.setStyle('nucleotides', 'nothing');\n           me.setLogCmd('style nucleotides nothing', true);\n        });\n    },\n\n    clkMn3_ligLines: function() { var me = this;\n        $(\"#\" + me.pre + \"mn3_ligLines\").click(function (e) {\n           me.setStyle('chemicals', 'lines');\n           me.setLogCmd('style chemicals lines', true);\n        });\n    },\n\n    clkMn3_ligStick: function() { var me = this;\n        $(\"#\" + me.pre + \"mn3_ligStick\").click(function (e) {\n           me.setStyle('chemicals', 'stick');\n           me.setLogCmd('style chemicals stick', true);\n        });\n    },\n\n    clkMn3_ligBallstick: function() { var me = this;\n        $(\"#\" + me.pre + \"mn3_ligBallstick\").click(function (e) {\n           me.setStyle('chemicals', 'ball and stick');\n           me.setLogCmd('style chemicals ball and stick', true);\n        });\n    },\n\n    clkMn3_ligSchematic: function() { var me = this;\n        $(\"#\" + me.pre + \"mn3_ligSchematic\").click(function (e) {\n           me.setStyle('chemicals', 'schematic');\n           me.setLogCmd('style chemicals schematic', true);\n        });\n    },\n\n    clkMn3_ligSphere: function() { var me = this;\n        $(\"#\" + me.pre + \"mn3_ligSphere\").click(function (e) {\n           me.setStyle('chemicals', 'sphere');\n           me.setLogCmd('style chemicals sphere', true);\n        });\n    },\n\n    clkMn3_ligNo: function() { var me = this;\n        $(\"#\" + me.pre + \"mn3_ligNo\").click(function (e) {\n           me.setStyle('chemicals', 'nothing');\n           me.setLogCmd('style chemicals nothing', true);\n        });\n    },\n\n    clkMn3_ionsSphere: function() { var me = this;\n        $(\"#\" + me.pre + \"mn3_ionsSphere\").click(function (e) {\n           me.setStyle('ions', 'sphere');\n           me.setLogCmd('style ions sphere', true);\n        });\n    },\n\n    clkMn3_ionsDot: function() { var me = this;\n        $(\"#\" + me.pre + \"mn3_ionsDot\").click(function (e) {\n           me.setStyle('ions', 'dot');\n           me.setLogCmd('style ions dot', true);\n        });\n    },\n\n    clkMn3_ionsNo: function() { var me = this;\n        $(\"#\" + me.pre + \"mn3_ionsNo\").click(function (e) {\n           me.setStyle('ions', 'nothing');\n           me.setLogCmd('style ions nothing', true);\n        });\n    },\n\n    clkMn3_waterSphere: function() { var me = this;\n        $(\"#\" + me.pre + \"mn3_waterSphere\").click(function (e) {\n           me.setStyle('water', 'sphere');\n           me.setLogCmd('style water sphere', true);\n        });\n    },\n\n    clkMn3_waterDot: function() { var me = this;\n        $(\"#\" + me.pre + \"mn3_waterDot\").click(function (e) {\n           me.setStyle('water', 'dot');\n           me.setLogCmd('style water dot', true);\n        });\n    },\n\n    clkMn3_waterNo: function() { var me = this;\n        $(\"#\" + me.pre + \"mn3_waterNo\").click(function (e) {\n           me.setStyle('water', 'nothing');\n           me.setLogCmd('style water nothing', true);\n        });\n    },\n\n    // mn 4\n    clkMn4_clrSpectrum: function() { var me = this;\n        $(\"#\" + me.pre + \"mn4_clrSpectrum\").click(function (e) {\n           me.setOption('color', 'spectrum');\n           me.setLogCmd('color spectrum', true);\n        });\n    },\n\n    clkMn4_clrChain: function() { var me = this;\n        $(\"#\" + me.pre + \"mn4_clrChain\").click(function (e) {\n           me.setOption('color', 'chain');\n           me.setLogCmd('color chain', true);\n        });\n    },\n\n    clkMn4_clrSSGreen: function() { var me = this;\n        $(\"#\" + me.pre + \"mn4_clrSSGreen\").click(function (e) {\n           me.icn3d.sheetcolor = 'green';\n\n           me.setOption('color', 'secondary structure');\n           me.setLogCmd('color secondary structure', true);\n        });\n    },\n\n    clkMn4_clrSSYellow: function() { var me = this;\n        $(\"#\" + me.pre + \"mn4_clrSSYellow\").click(function (e) {\n           me.icn3d.sheetcolor = 'yellow';\n\n           me.setOption('color', 'secondary structure yellow');\n           me.setLogCmd('color secondary structure yellow', true);\n        });\n    },\n\n    clkMn4_clrResidue: function() { var me = this;\n        $(\"#\" + me.pre + \"mn4_clrResidue\").click(function (e) {\n           me.setOption('color', 'residue');\n           me.setLogCmd('color residue', true);\n        });\n    },\n\n    clkMn4_clrCharge: function() { var me = this;\n        $(\"#\" + me.pre + \"mn4_clrCharge\").click(function (e) {\n           me.setOption('color', 'charge');\n           me.setLogCmd('color charge', true);\n        });\n    },\n\n    clkMn4_clrHydrophobic: function() { var me = this;\n        $(\"#\" + me.pre + \"mn4_clrHydrophobic\").click(function (e) {\n           me.setOption('color', 'hydrophobic');\n           me.setLogCmd('color hydrophobic', true);\n        });\n    },\n\n    clkMn4_clrAtom: function() { var me = this;\n        $(\"#\" + me.pre + \"mn4_clrAtom\").click(function (e) {\n           me.setOption('color', 'atom');\n           me.setLogCmd('color atom', true);\n        });\n    },\n\n    clkMn4_clrBfactor: function() { var me = this;\n        $(\"#\" + me.pre + \"mn4_clrBfactor\").click(function (e) {\n           me.setOption('color', 'b factor');\n           me.setLogCmd('color b factor', true);\n        });\n    },\n\n    clkMn4_clrBfactorNorm: function() { var me = this;\n        $(\"#\" + me.pre + \"mn4_clrBfactorNorm\").click(function (e) {\n           me.setOption('color', 'b factor percentile');\n           me.setLogCmd('color b factor percentile', true);\n        });\n    },\n\n    clkMn4_clrIdentity: function() { var me = this;\n        $(\"#\" + me.pre + \"mn4_clrIdentity\").click(function (e) {\n           me.setOption('color', 'identity');\n           me.setLogCmd('color identity', true);\n        });\n    },\n\n    clkMn4_clrConserved: function() { var me = this;\n        $(\"#\" + me.pre + \"mn4_clrConserved\").click(function (e) {\n           me.setOption('color', 'conservation');\n           me.setLogCmd('color conservation', true);\n        });\n    },\n\n    clkMn4_clrRed: function() { var me = this;\n        $(\"#\" + me.pre + \"mn4_clrRed\").click(function (e) {\n           me.setOption('color', 'red');\n           me.setLogCmd('color red', true);\n        });\n    },\n\n    clkMn4_clrGreen: function() { var me = this;\n        $(\"#\" + me.pre + \"mn4_clrGreen\").click(function (e) {\n           me.setOption('color', 'green');\n           me.setLogCmd('color green', true);\n        });\n    },\n\n    clkMn4_clrBlue: function() { var me = this;\n        $(\"#\" + me.pre + \"mn4_clrBlue\").click(function (e) {\n           me.setOption('color', 'blue');\n           me.setLogCmd('color blue', true);\n        });\n    },\n\n    clkMn4_clrMagenta: function() { var me = this;\n        $(\"#\" + me.pre + \"mn4_clrMagenta\").click(function (e) {\n           me.setOption('color', 'magenta');\n           me.setLogCmd('color magenta', true);\n        });\n    },\n\n    clkMn4_clrYellow: function() { var me = this;\n        $(\"#\" + me.pre + \"mn4_clrYellow\").click(function (e) {\n           me.setOption('color', 'yellow');\n           me.setLogCmd('color yellow', true);\n        });\n    },\n\n    clkMn4_clrCyan: function() { var me = this;\n        $(\"#\" + me.pre + \"mn4_clrCyan\").click(function (e) {\n           me.setOption('color', 'cyan');\n           me.setLogCmd('color cyan', true);\n        });\n    },\n\n    clkMn4_clrWhite: function() { var me = this;\n        $(\"#\" + me.pre + \"mn4_clrWhite\").click(function (e) {\n           me.setOption('color', 'white');\n           me.setLogCmd('color white', true);\n        });\n    },\n\n    clkMn4_clrGrey: function() { var me = this;\n        $(\"#\" + me.pre + \"mn4_clrGrey\").click(function (e) {\n           me.setOption('color', 'grey');\n           me.setLogCmd('color grey', true);\n        });\n    },\n\n    clkMn4_clrCustom: function() { var me = this;\n        $(\"#\" + me.pre + \"mn4_clrCustom\").click(function (e) {\n           me.openDialog(me.pre + 'dl_clr', 'Color picker');\n        });\n    },\n\n    clkMn4_clrSave: function() { var me = this;\n        $(\"#\" + me.pre + \"mn4_clrSave\").click(function (e) {\n           me.saveColor();\n\n           me.setLogCmd('save color', true);\n        });\n    },\n\n    clkMn4_clrApplySave: function() { var me = this;\n        $(\"#\" + me.pre + \"mn4_clrApplySave\").click(function (e) {\n           me.applySavedColor();\n\n           me.setLogCmd('apply saved color', true);\n        });\n    },\n\n    clkMn3_styleSave: function() { var me = this;\n        $(\"#\" + me.pre + \"mn3_styleSave\").click(function (e) {\n           me.saveStyle();\n           me.setLogCmd('save style', true);\n        });\n    },\n\n    clkMn3_styleApplySave: function() { var me = this;\n        $(\"#\" + me.pre + \"mn3_styleApplySave\").click(function (e) {\n           me.applySavedStyle();\n           me.setLogCmd('apply saved style', true);\n        });\n    },\n\n    // mn 5\n    clkMn5_neighborsYes: function() { var me = this;\n        $(\"#\" + me.pre + \"mn5_neighborsYes\").click(function (e) {\n           me.icn3d.bConsiderNeighbors = true;\n\n           me.icn3d.removeLastSurface();\n           me.icn3d.applySurfaceOptions();\n           me.icn3d.render();\n\n           me.setLogCmd('set surface neighbors on', true);\n        });\n    },\n\n    clkMn5_neighborsNo: function() { var me = this;\n        $(\"#\" + me.pre + \"mn5_neighborsNo\").click(function (e) {\n           me.icn3d.bConsiderNeighbors = false;\n\n           me.icn3d.removeLastSurface();\n           me.icn3d.applySurfaceOptions();\n           me.icn3d.render();\n\n           me.setLogCmd('set surface neighbors off', true);\n        });\n    },\n\n    clkMn5_surfaceVDW: function() { var me = this;\n        $(\"#\" + me.pre + \"mn5_surfaceVDW\").click(function (e) {\n           me.icn3d.bConsiderNeighbors = false;\n           me.setOption('surface', 'Van der Waals surface');\n           me.setLogCmd('set surface Van der Waals surface', true);\n        });\n    },\n\n    clkMn5_surfaceSAS: function() { var me = this;\n        $(\"#\" + me.pre + \"mn5_surfaceSAS\").click(function (e) {\n           me.icn3d.bConsiderNeighbors = false;\n           me.setOption('surface', 'solvent accessible surface');\n           me.setLogCmd('set surface solvent accessible surface', true);\n        });\n    },\n\n    clkMn5_surfaceMolecular: function() { var me = this;\n        $(\"#\" + me.pre + \"mn5_surfaceMolecular\").click(function (e) {\n           me.icn3d.bConsiderNeighbors = false;\n           me.setOption('surface', 'molecular surface');\n           me.setLogCmd('set surface molecular surface', true);\n        });\n    },\n\n    clkMn5_surfaceVDWContext: function() { var me = this;\n        $(\"#\" + me.pre + \"mn5_surfaceVDWContext\").click(function (e) {\n           me.icn3d.bConsiderNeighbors = true;\n           me.setOption('surface', 'Van der Waals surface with context');\n           me.setLogCmd('set surface Van der Waals surface with context', true);\n        });\n    },\n\n    clkMn5_surfaceSASContext: function() { var me = this;\n        $(\"#\" + me.pre + \"mn5_surfaceSASContext\").click(function (e) {\n           me.icn3d.bConsiderNeighbors = true;\n           me.setOption('surface', 'solvent accessible surface with context');\n           me.setLogCmd('set surface solvent accessible surface with context', true);\n        });\n    },\n\n    clkMn5_surfaceMolecularContext: function() { var me = this;\n        $(\"#\" + me.pre + \"mn5_surfaceMolecularContext\").click(function (e) {\n           me.icn3d.bConsiderNeighbors = true;\n           me.setOption('surface', 'molecular surface with context');\n           me.setLogCmd('set surface molecular surface with context', true);\n        });\n    },\n\n    clkMn5_surfaceNo: function() { var me = this;\n        $(\"#\" + me.pre + \"mn5_surfaceNo\").click(function (e) {\n           me.setOption('surface', 'nothing');\n           me.setLogCmd('set surface nothing', true);\n        });\n    },\n\n    clkMn5_opacity10: function() { var me = this;\n        $(\"#\" + me.pre + \"mn5_opacity10\").click(function (e) {\n           me.setOption('opacity', '1.0');\n           me.setLogCmd('set surface opacity 1.0', true);\n        });\n    },\n\n    clkMn5_opacity09: function() { var me = this;\n        $(\"#\" + me.pre + \"mn5_opacity09\").click(function (e) {\n           me.setOption('opacity', '0.9');\n           me.setLogCmd('set surface opacity 0.9', true);\n        });\n    },\n\n    clkMn5_opacity08: function() { var me = this;\n        $(\"#\" + me.pre + \"mn5_opacity08\").click(function (e) {\n           me.setOption('opacity', '0.8');\n           me.setLogCmd('set surface opacity 0.8', true);\n        });\n    },\n\n    clkMn5_opacity07: function() { var me = this;\n        $(\"#\" + me.pre + \"mn5_opacity07\").click(function (e) {\n           me.setOption('opacity', '0.7');\n           me.setLogCmd('set surface opacity 0.7', true);\n        });\n    },\n\n    clkMn5_opacity06: function() { var me = this;\n        $(\"#\" + me.pre + \"mn5_opacity06\").click(function (e) {\n           me.setOption('opacity', '0.6');\n           me.setLogCmd('set surface opacity 0.6', true);\n        });\n    },\n\n    clkMn5_opacity05: function() { var me = this;\n        $(\"#\" + me.pre + \"mn5_opacity05\").click(function (e) {\n           me.setOption('opacity', '0.5');\n           me.setLogCmd('set surface opacity 0.5', true);\n        });\n    },\n\n    clkMn5_opacity04: function() { var me = this;\n        $(\"#\" + me.pre + \"mn5_opacity04\").click(function (e) {\n           me.setOption('opacity', '0.4');\n           me.setLogCmd('set surface opacity 0.4', true);\n        });\n    },\n\n    clkMn5_opacity03: function() { var me = this;\n        $(\"#\" + me.pre + \"mn5_opacity03\").click(function (e) {\n           me.setOption('opacity', '0.3');\n           me.setLogCmd('set surface opacity 0.3', true);\n        });\n    },\n\n    clkMn5_opacity02: function() { var me = this;\n        $(\"#\" + me.pre + \"mn5_opacity02\").click(function (e) {\n           me.setOption('opacity', '0.2');\n           me.setLogCmd('set surface opacity 0.2', true);\n        });\n    },\n\n    clkMn5_opacity01: function() { var me = this;\n        $(\"#\" + me.pre + \"mn5_opacity01\").click(function (e) {\n           me.setOption('opacity', '0.1');\n           me.setLogCmd('set surface opacity 0.1', true);\n        });\n    },\n\n    clkMn5_wireframeYes: function() { var me = this;\n        $(\"#\" + me.pre + \"mn5_wireframeYes\").click(function (e) {\n           me.setOption('wireframe', 'yes');\n           me.setLogCmd('set surface wireframe on', true);\n        });\n    },\n\n    clkMn5_wireframeNo: function() { var me = this;\n        $(\"#\" + me.pre + \"mn5_wireframeNo\").click(function (e) {\n           me.setOption('wireframe', 'no');\n           me.setLogCmd('set surface wireframe off', true);\n        });\n    },\n\n    clkMn5_elecmap2fofc: function() { var me = this;\n        $(\"#\" + me.pre + \"mn5_elecmap2fofc\").click(function (e) {\n           me.openDialog(me.pre + 'dl_elecmap2fofc', '2Fo-Fc Electron Density Map');\n        });\n    },\n\n    clkMn5_elecmapfofc: function() { var me = this;\n        $(\"#\" + me.pre + \"mn5_elecmapfofc\").click(function (e) {\n           me.openDialog(me.pre + 'dl_elecmapfofc', 'Fo-Fc Electron Density Map');\n        });\n    },\n\n    clkMn5_elecmapNo: function() { var me = this;\n        $(\"#\" + me.pre + \"mn5_elecmapNo\").add(\"#\" + me.pre + \"elecmapNo2\").add(\"#\" + me.pre + \"elecmapNo3\").click(function (e) {\n           me.setOption('map', 'nothing');\n           me.setLogCmd('set map nothing', true);\n        });\n    },\n\n    clickApplymap2fofc: function() { var me = this;\n        $(\"#\" + me.pre + \"applymap2fofc\").click(function(e) {\n           e.preventDefault();\n           //dialog.dialog( \"close\" );\n\n           var sigma2fofc = parseFloat($(\"#\" + me.pre + \"sigma2fofc\" ).val());\n\n           var type = '2fofc';\n           me.Dsn6Parser(me.inputid, type, sigma2fofc);\n\n           //me.setOption('map', '2fofc');\n           me.setLogCmd('set map 2fofc sigma ' + sigma2fofc + ';', true);\n        });\n    },\n\n    clickApplymapfofc: function() { var me = this;\n        $(\"#\" + me.pre + \"applymapfofc\").click(function(e) {\n           e.preventDefault();\n           //dialog.dialog( \"close\" );\n\n           var sigmafofc = parseFloat($(\"#\" + me.pre + \"sigmafofc\" ).val());\n\n           var type = 'fofc';\n           me.Dsn6Parser(me.inputid, type, sigmafofc);\n\n           //me.setOption('map', 'fofc');\n           me.setLogCmd('set map fofc sigma ' + sigmafofc + ';', true);\n        });\n    },\n\n    clkMn5_mapwireframeYes: function() { var me = this;\n        $(\"#\" + me.pre + \"mn5_mapwireframeYes\").click(function (e) {\n           //me.Dsn6Parser(me.inputid);\n\n           me.setOption('mapwireframe', 'yes');\n           me.setLogCmd('set map wireframe on', true);\n        });\n    },\n\n    clkMn5_mapwireframeNo: function() { var me = this;\n        $(\"#\" + me.pre + \"mn5_mapwireframeNo\").click(function (e) {\n           me.setOption('mapwireframe', 'no');\n           me.setLogCmd('set map wireframe off', true);\n        });\n    },\n\n    clkMn5_emmap: function() { var me = this;\n        $(\"#\" + me.pre + \"mn5_emmap\").click(function (e) {\n           me.openDialog(me.pre + 'dl_emmap', 'EM Density Map');\n        });\n    },\n\n    clkMn5_emmapNo: function() { var me = this;\n        $(\"#\" + me.pre + \"mn5_emmapNo\").add(\"#\" + me.pre + \"emmapNo2\").click(function (e) {\n           me.setOption('emmap', 'nothing');\n           me.setLogCmd('set emmap nothing', true);\n        });\n    },\n\n    clickApplyemmap: function() { var me = this;\n        $(\"#\" + me.pre + \"applyemmap\").click(function(e) {\n           e.preventDefault();\n           //dialog.dialog( \"close\" );\n\n           var empercentage = parseFloat($(\"#\" + me.pre + \"empercentage\" ).val());\n\n           var type = 'em';\n           //me.emd = 'emd-3906';\n           me.DensityCifParser(me.inputid, type, empercentage, me.icn3d.emd);\n\n           me.setLogCmd('set emmap percentage ' + empercentage + ';', true);\n        });\n    },\n\n    clkMn5_emmapwireframeYes: function() { var me = this;\n        $(\"#\" + me.pre + \"mn5_emmapwireframeYes\").click(function (e) {\n           //me.Dsn6Parser(me.inputid);\n\n           me.setOption('emmapwireframe', 'yes');\n           me.setLogCmd('set emmap wireframe on', true);\n        });\n    },\n\n    clkMn5_emmapwireframeNo: function() { var me = this;\n        $(\"#\" + me.pre + \"mn5_emmapwireframeNo\").click(function (e) {\n           me.setOption('emmapwireframe', 'no');\n           me.setLogCmd('set emmap wireframe off', true);\n        });\n    },\n\n    // mn 6\n    clkMn6_assemblyYes: function() { var me = this;\n        $(\"#\" + me.pre + \"mn6_assemblyYes\").click(function (e) {\n           me.icn3d.bAssembly = true;\n           me.setLogCmd('set assembly on', true);\n           me.icn3d.draw();\n        });\n    },\n\n    clkMn6_assemblyNo: function() { var me = this;\n        $(\"#\" + me.pre + \"mn6_assemblyNo\").click(function (e) {\n           me.icn3d.bAssembly = false;\n           me.setLogCmd('set assembly off', true);\n           me.icn3d.draw();\n        });\n    },\n\n    clkMn6_addlabelResidues: function() { var me = this;\n        $(\"#\" + me.pre + \"mn6_addlabelResidues\").click(function (e) {\n           //me.setLogCmd('add residue labels', true);\n\n           me.icn3d.addResiudeLabels(me.icn3d.hAtoms);\n\n           me.saveSelectionIfSelected();\n           me.setLogCmd('add residue labels', true);\n           me.icn3d.draw();\n        });\n    },\n\n    clkMn6_addlabelChains: function() { var me = this;\n        $(\"#\" + me.pre + \"mn6_addlabelChains\").click(function (e) {\n           me.addChainLabels(me.icn3d.hAtoms);\n\n           me.saveSelectionIfSelected();\n           me.setLogCmd('add chain labels', true);\n           me.icn3d.draw();\n        });\n    },\n\n    clkMn6_addlabelTermini: function() { var me = this;\n        $(\"#\" + me.pre + \"mn6_addlabelTermini\").click(function (e) {\n           me.addTerminiLabels(me.icn3d.hAtoms);\n\n           me.saveSelectionIfSelected();\n           me.setLogCmd('add terminal labels', true);\n           me.icn3d.draw();\n        });\n    },\n\n    clkMn6_addlabelYes: function() { var me = this;\n        $(\"#\" + me.pre + \"mn6_addlabelYes\").click(function (e) {\n           me.openDialog(me.pre + 'dl_addlabel', 'Add custom labels by selection');\n           me.icn3d.pk = 1;\n           me.icn3d.opts['pk'] = 'atom';\n           me.icn3d.pickpair = true;\n           me.icn3d.pAtomNum = 0;\n        });\n    },\n\n    clkMn6_addlabelSelection: function() { var me = this;\n        $(\"#\" + me.pre + \"mn6_addlabelSelection\").click(function (e) {\n           me.openDialog(me.pre + 'dl_addlabelselection', 'Add custom labels by the current selection');\n        });\n    },\n\n    clkMn2_saveselection: function() { var me = this;\n        $(\"#\" + me.pre + \"mn2_saveselection\").click(function (e) {\n           me.openDialog(me.pre + 'dl_saveselection', 'Save the current selection');\n        });\n    },\n\n    clkMn6_addlabelNo: function() { var me = this;\n        $(\"#\" + me.pre + \"mn6_addlabelNo\").add(\"#\" + me.pre + \"removeLabels\").click(function (e) {\n           me.icn3d.pickpair = false;\n\n           //me.icn3d.labels['residue'] = [];\n           //me.icn3d.labels['custom'] = [];\n\n           var select = \"set labels off\";\n           me.setLogCmd(select, true);\n\n           for(var name in me.icn3d.labels) {\n               //if(name === 'residue' || name === 'custom') {\n                   me.icn3d.labels[name] = [];\n               //}\n           }\n\n           me.icn3d.draw();\n        });\n    },\n\n    clkMn6_distanceYes: function() { var me = this;\n        $(\"#\" + me.pre + \"mn6_distanceYes\").click(function (e) {\n           me.openDialog(me.pre + 'dl_distance', 'Measure the distance of atoms');\n           me.icn3d.pk = 1;\n           me.icn3d.opts['pk'] = 'atom';\n           me.icn3d.pickpair = true;\n           me.icn3d.pAtomNum = 0;\n\n           me.bMeasureDistance = true;\n        });\n    },\n\n    clkMn6_distanceNo: function() { var me = this;\n        $(\"#\" + me.pre + \"mn6_distanceNo\").click(function (e) {\n           me.icn3d.pickpair = false;\n\n           var select = \"set lines off\";\n           me.setLogCmd(select, true);\n\n           me.icn3d.labels['distance'] = [];\n           me.icn3d.lines['distance'] = [];\n\n           me.icn3d.pk = 2;\n\n           me.icn3d.draw();\n        });\n    },\n\n    clkMn2_selectedcenter: function() { var me = this;\n        $(\"#\" + me.pre + \"mn2_selectedcenter\").add(\"#\" + me.pre + \"zoomin_selection\").click(function (e) {\n           //me.setLogCmd('zoom selection', true);\n\n           me.icn3d.zoominSelection();\n           me.icn3d.draw();\n           me.setLogCmd('zoom selection', true);\n        });\n    },\n\n    clkMn6_center: function() { var me = this;\n        $(\"#\" + me.pre + \"mn6_center\").click(function (e) {\n           //me.setLogCmd('center selection', true);\n\n           me.icn3d.centerSelection();\n           me.icn3d.draw();\n           me.setLogCmd('center selection', true);\n        });\n    },\n\n    clkMn6_resetOrientation: function() { var me = this;\n        $(\"#\" + me.pre + \"mn6_resetOrientation\").add(\"#\" + me.pre + \"resetOrientation\").click(function (e) {\n           //me.setLogCmd('reset orientation', true);\n\n           me.icn3d.resetOrientation();\n\n           me.icn3d.applyOriginalColor();\n\n           me.icn3d.draw();\n           me.setLogCmd('reset orientation', true);\n        });\n    },\n\n    clkMn6_chemicalbindingshow: function() { var me = this;\n        $(\"#\" + me.pre + \"mn6_chemicalbindingshow\").add(\"#\" + me.pre + \"chemicalbindingshow\").click(function (e) {\n           me.setOption('chemicalbinding', 'show');\n           me.setLogCmd('set chemicalbinding show', true);\n        });\n    },\n\n    clkMn6_chemicalbindinghide: function() { var me = this;\n        $(\"#\" + me.pre + \"mn6_chemicalbindinghide\").add(\"#\" + me.pre + \"chemicalbindinghide\").click(function (e) {\n           me.setOption('chemicalbinding', 'hide');\n           me.setLogCmd('set chemicalbinding hide', true);\n        });\n    },\n\n    clkMn6_rotateleft: function() { var me = this;\n        $(\"#\" + me.pre + \"mn6_rotateleft\").click(function (e) {\n           me.setLogCmd('rotate left', true);\n\n           me.icn3d.bStopRotate = false;\n           me.icn3d.rotateCount = 0;\n           me.icn3d.rotateCountMax = 6000;\n           me.ROT_DIR = 'left';\n\n           me.rotStruc('left');\n        });\n    },\n\n    clkMn6_rotateright: function() { var me = this;\n        $(\"#\" + me.pre + \"mn6_rotateright\").click(function (e) {\n           me.setLogCmd('rotate right', true);\n\n           me.icn3d.bStopRotate = false;\n           me.icn3d.rotateCount = 0;\n           me.icn3d.rotateCountMax = 6000;\n           me.ROT_DIR = 'right';\n\n           me.rotStruc('right');\n        });\n    },\n\n    clkMn6_rotateup: function() { var me = this;\n        $(\"#\" + me.pre + \"mn6_rotateup\").click(function (e) {\n           me.setLogCmd('rotate up', true);\n\n           me.icn3d.bStopRotate = false;\n           me.icn3d.rotateCount = 0;\n           me.icn3d.rotateCountMax = 6000;\n           me.ROT_DIR = 'up';\n\n           me.rotStruc('up');\n        });\n    },\n\n    clkMn6_rotatedown: function() { var me = this;\n        $(\"#\" + me.pre + \"mn6_rotatedown\").click(function (e) {\n           me.setLogCmd('rotate down', true);\n\n           me.icn3d.bStopRotate = false;\n           me.icn3d.rotateCount = 0;\n           me.icn3d.rotateCountMax = 6000;\n           me.ROT_DIR = 'down';\n\n           me.rotStruc('down');\n        });\n    },\n\n    clkMn6_cameraPers: function() { var me = this;\n        $(\"#\" + me.pre + \"mn6_cameraPers\").click(function (e) {\n           me.setOption('camera', 'perspective');\n           me.setLogCmd('set camera perspective', true);\n        });\n    },\n\n    clkMn6_cameraOrth: function() { var me = this;\n        $(\"#\" + me.pre + \"mn6_cameraOrth\").click(function (e) {\n           me.setOption('camera', 'orthographic');\n           me.setLogCmd('set camera orthographic', true);\n        });\n    },\n\n    clkMn6_bkgdBlack: function() { var me = this;\n        $(\"#\" + me.pre + \"mn6_bkgdBlack\").click(function (e) {\n           me.setOption('background', 'black');\n           me.setLogCmd('set background black', true);\n        });\n    },\n\n    clkMn6_bkgdGrey: function() { var me = this;\n        $(\"#\" + me.pre + \"mn6_bkgdGrey\").click(function (e) {\n           me.setOption('background', 'grey');\n           me.setLogCmd('set background grey', true);\n        });\n    },\n\n    clkMn6_bkgdWhite: function() { var me = this;\n        $(\"#\" + me.pre + \"mn6_bkgdWhite\").click(function (e) {\n           me.setOption('background', 'white');\n           me.setLogCmd('set background white', true);\n        });\n    },\n\n    clkMn6_bkgdTransparent: function() { var me = this;\n        $(\"#\" + me.pre + \"mn6_bkgdTransparent\").click(function (e) {\n           me.setOption('background', 'transparent');\n           me.setLogCmd('set background transparent', true);\n        });\n    },\n\n    clkMn6_showfogYes: function() { var me = this;\n        $(\"#\" + me.pre + \"mn6_showfogYes\").click(function (e) {\n           me.setOption('fog', 'yes');\n           me.setLogCmd('set fog on', true);\n        });\n    },\n\n    clkMn6_showfogNo: function() { var me = this;\n        $(\"#\" + me.pre + \"mn6_showfogNo\").click(function (e) {\n           me.setOption('fog', 'no');\n           me.setLogCmd('set fog off', true);\n        });\n    },\n\n    clkMn6_showslabYes: function() { var me = this;\n        $(\"#\" + me.pre + \"mn6_showslabYes\").click(function (e) {\n           me.setOption('slab', 'yes');\n           me.setLogCmd('set slab on', true);\n        });\n    },\n\n    clkMn6_showslabNo: function() { var me = this;\n        $(\"#\" + me.pre + \"mn6_showslabNo\").click(function (e) {\n           me.setOption('slab', 'no');\n           me.setLogCmd('set slab off', true);\n        });\n    },\n\n    clkMn6_showaxisYes: function() { var me = this;\n        $(\"#\" + me.pre + \"mn6_showaxisYes\").click(function (e) {\n           me.setOption('axis', 'yes');\n           me.setLogCmd('set axis on', true);\n        });\n    },\n\n    clkMn6_showaxisNo: function() { var me = this;\n        $(\"#\" + me.pre + \"mn6_showaxisNo\").click(function (e) {\n           me.setOption('axis', 'no');\n           me.setLogCmd('set axis off', true);\n        });\n    },\n\n    clkMn6_hbondsYes: function() { var me = this;\n        $(\"#\" + me.pre + \"mn6_hbondsYes\").click(function (e) {\n           me.openDialog(me.pre + 'dl_hbonds', 'Hydrogen bonds to selection');\n        });\n    },\n\n    clkMn6_hbondsNo: function() { var me = this;\n        $(\"#\" + me.pre + \"mn6_hbondsNo\").click(function (e) {\n           var select = \"set hbonds off\";\n           me.setLogCmd(select, true);\n\n           me.icn3d.hideHbonds();\n           me.icn3d.draw();\n        });\n    },\n\n    clkmn1_stabilizerYes: function() { var me = this;\n        $(\"#\" + me.pre + \"mn1_stabilizerYes\").click(function (e) {\n           //me.openDialog(me.pre + 'dl_stabilizer', 'Hydrogen bonds inside selection');\n\n           var select = \"stabilizer\";\n\n           me.addStabilizer();\n           me.prepareFor3Dprint();\n           //me.icn3d.draw();\n\n           me.setLogCmd(select, true);\n        });\n    },\n\n    clkmn1_stabilizerNo: function() { var me = this;\n        $(\"#\" + me.pre + \"mn1_stabilizerNo\").click(function (e) {\n           var select = \"set stabilizer off\";\n           me.setLogCmd(select, true);\n\n           me.hideStabilizer();\n\n           me.icn3d.draw();\n        });\n    },\n\n    clkmn1_stabilizerOne: function() { var me = this;\n        $(\"#\" + me.pre + \"mn1_stabilizerOne\").click(function (e) {\n           me.openDialog(me.pre + 'dl_stabilizer', 'Add One Stabilizer');\n           me.icn3d.pk = 1;\n           me.icn3d.opts['pk'] = 'atom';\n           me.icn3d.pickpair = true;\n           me.icn3d.pAtomNum = 0;\n        });\n    },\n\n    clkmn1_stabilizerRmOne: function() { var me = this;\n        $(\"#\" + me.pre + \"mn1_stabilizerRmOne\").click(function (e) {\n           me.openDialog(me.pre + 'dl_stabilizer_rm', 'Remove One Stabilizer');\n           me.icn3d.pk = 1;\n           me.icn3d.opts['pk'] = 'atom';\n           me.icn3d.pickpair = true;\n           me.icn3d.pAtomNum = 0;\n        });\n    },\n\n    clkmn1_thicknessSet: function() { var me = this;\n        $(\"#\" + me.pre + \"mn1_thicknessSet\").click(function (e) {\n           me.openDialog(me.pre + 'dl_thickness', 'Set Thickness for 3D Printing');\n        });\n    },\n\n    clkmn5_setThickness: function() { var me = this;\n        $(\"#\" + me.pre + \"mn3_setThickness\").click(function (e) {\n           me.openDialog(me.pre + 'dl_thickness2', 'Set Thickness');\n        });\n    },\n\n    clkmn1_thicknessReset: function() { var me = this;\n        $(\"#\" + me.pre + \"mn1_thicknessReset\").click(function (e) {\n           var select = \"reset thickness\";\n           me.setLogCmd(select, true);\n\n           me.bSetThickness = false;\n\n           me.resetAfter3Dprint();\n           me.icn3d.draw();\n        });\n    },\n\n    clkMn6_ssbondsYes: function() { var me = this;\n        $(\"#\" + me.pre + \"mn6_ssbondsYes\").click(function (e) {\n           var select = \"disulfide bonds\";\n           me.setLogCmd(select, true);\n\n           me.showSsbonds();\n        });\n    },\n\n    clkMn6_ssbondsNo: function() { var me = this;\n        $(\"#\" + me.pre + \"mn6_ssbondsNo\").click(function (e) {\n           me.icn3d.opts[\"ssbonds\"] = \"no\";\n\n           var select = \"set disulfide bonds off\";\n           me.setLogCmd(select, true);\n\n           me.icn3d.lines['ssbond'] = [];\n\n           me.setStyle('sidec', 'nothing');\n        });\n    },\n\n    clkMn6_clbondsYes: function() { var me = this;\n        $(\"#\" + me.pre + \"mn6_clbondsYes\").click(function (e) {\n           var select = \"cross linkage\";\n           me.setLogCmd(select, true);\n\n           me.icn3d.bShowCrossResidueBond = true;\n\n           me.setStyle('proteins', 'lines')\n           //me.icn3d.draw();\n        });\n    },\n\n    clkMn6_clbondsNo: function() { var me = this;\n        $(\"#\" + me.pre + \"mn6_clbondsNo\").click(function (e) {\n           me.icn3d.opts[\"clbonds\"] = \"no\";\n\n           var select = \"set cross linkage off\";\n           me.setLogCmd(select, true);\n\n           me.icn3d.bShowCrossResidueBond = false;\n           //me.opts['proteins'] = 'ribbon';\n\n           //me.icn3d.draw();\n           me.setStyle('proteins', 'ribbon')\n        });\n    },\n\n    // other\n    clickViewswitch: function() { var me = this;\n/*\n        $(\"#\" + me.pre + \"viewswitch\").click(function (e) {\n            if($(\"#\" + me.pre + \"viewswitch\")[0].checked) { // mode: Detailed View\n                me.setAnnoViewAndDisplay('overview');\n                me.setLogCmd(\"set view overview\", true);\n            }\n            else { // mode: all\n                me.setAnnoViewAndDisplay('detailed view');\n                me.setLogCmd(\"set view detailed view\", true);\n            }\n        });\n*/\n        $(\"#\" + me.pre + \"anno_summary\").click(function (e) {\n            e.preventDefault();\n\n            me.setAnnoViewAndDisplay('overview');\n            me.setLogCmd(\"set view overview\", true);\n        });\n\n        $(\"#\" + me.pre + \"anno_details\").click(function (e) {\n            e.preventDefault();\n\n            me.setAnnoViewAndDisplay('detailed view');\n            me.setLogCmd(\"set view detailed view\", true);\n        });\n    },\n\n    clickShow_annotations: function() { var me = this;\n        $(\"#\" + me.pre + \"show_annotations\").click(function(e) {\n             me.showAnnotations();\n             me.setLogCmd(\"view annotations\", true);\n        });\n    },\n\n    clickShowallchains: function() { var me = this;\n        $(\"#\" + me.pre + \"showallchains\").click(function(e) {\n             me.showAnnoAllChains();\n             me.setLogCmd(\"show annotations all chains\", true);\n        });\n    },\n\n    clickShow_alignsequences: function() { var me = this;\n        $(\"#\" + me.pre + \"show_alignsequences\").click(function(e) {\n             me.openDialog(me.pre + 'dl_alignment', 'Select residues in aligned sequences');\n        });\n    },\n\n    clickShow_2ddgm: function() { var me = this;\n        $(\"#\" + me.pre + \"show_2ddgm\").add(\"#\" + me.pre + \"mn2_2ddgm\").click(function(e) {\n             me.openDialog(me.pre + 'dl_2ddgm', 'Interactions');\n             if(!me.b2DShown) {\n                 if(me.cfg.align !== undefined) {\n                     var structureArray = Object.keys(me.icn3d.structures);\n                     me.set2DDiagramsForAlign(structureArray[0].toUpperCase(), structureArray[1].toUpperCase());\n                 }\n                 else {\n                     me.download2Ddgm(me.inputid.toUpperCase());\n                 }\n             }\n\n             me.setLogCmd(\"view interactions\", true);\n        });\n    },\n\n    clickSearchSeq: function() { var me = this;\n        $(document).on(\"click\", \"#\" + me.pre + \"search_seq_button\", function(e) {\n           e.stopImmediatePropagation();\n\n           var select = $(\"#\" + me.pre + \"search_seq\").val();\n           if(isNaN(select) && select.indexOf('$') == -1 && select.indexOf('.') == -1 && select.indexOf(':') == -1 && select.indexOf('@') == -1) {\n               select = ':' + select;\n           }\n\n           var commandname = select;\n           //var commanddesc = \"search with the one-letter sequence \" + select;\n           var commanddesc = select;\n\n           me.selectByCommand(select, commandname, commanddesc);\n           //me.setLogCmd('select ' + select + ' | name ' + commandname + ' | description ' + commanddesc, true);\n           me.setLogCmd('select ' + select + ' | name ' + commandname, true);\n        });\n    },\n\n    clickReload_mmtf: function() { var me = this;\n        $(\"#\" + me.pre + \"reload_mmtf\").click(function(e) {\n           e.preventDefault();\n\n           dialog.dialog( \"close\" );\n\n           me.setLogCmd(\"load mmtf \" + $(\"#\" + me.pre + \"mmtfid\").val(), false);\n\n           window.open('https://www.ncbi.nlm.nih.gov/Structure/icn3d/full.html?mmtfid=' + $(\"#\" + me.pre + \"mmtfid\").val(), '_blank');\n        });\n    },\n\n    clickReload_pdb: function() { var me = this;\n        $(\"#\" + me.pre + \"reload_pdb\").click(function(e) {\n           e.preventDefault();\n\n           dialog.dialog( \"close\" );\n\n           me.setLogCmd(\"load pdb \" + $(\"#\" + me.pre + \"pdbid\").val(), false);\n\n           window.open('https://www.ncbi.nlm.nih.gov/Structure/icn3d/full.html?pdbid=' + $(\"#\" + me.pre + \"pdbid\").val(), '_blank');\n        });\n    },\n\n    clickReload_align_refined: function() { var me = this;\n        $(\"#\" + me.pre + \"reload_align_refined\").click(function(e) {\n           e.preventDefault();\n\n           dialog.dialog( \"close\" );\n\n           var alignment = $(\"#\" + me.pre + \"alignid1\").val() + \",\" + $(\"#\" + me.pre + \"alignid2\").val();\n\n           me.setLogCmd(\"load alignment \" + alignment + ' | parameters &atype=1', false);\n\n           window.open('https://www.ncbi.nlm.nih.gov/Structure/icn3d/full.html?align=' + alignment + '&showalignseq=1&atype=1', '_blank');\n        });\n    },\n\n    clickReload_align_ori: function() { var me = this;\n        $(\"#\" + me.pre + \"reload_align_ori\").click(function(e) {\n           e.preventDefault();\n\n           dialog.dialog( \"close\" );\n\n           var alignment = $(\"#\" + me.pre + \"alignid1\").val() + \",\" + $(\"#\" + me.pre + \"alignid2\").val();\n\n           me.setLogCmd(\"load alignment \" + alignment + ' | parameters &atype=0', false);\n\n           window.open('https://www.ncbi.nlm.nih.gov/Structure/icn3d/full.html?align=' + alignment + '&showalignseq=1&atype=0', '_blank');\n        });\n    },\n\n    clickReload_mmcif: function() { var me = this;\n        $(\"#\" + me.pre + \"reload_mmcif\").click(function(e) {\n           e.preventDefault();\n\n           dialog.dialog( \"close\" );\n\n           me.setLogCmd(\"load mmcif \" + $(\"#\" + me.pre + \"mmcifid\").val(), false);\n\n           window.open('https://www.ncbi.nlm.nih.gov/Structure/icn3d/full.html?mmcifid=' + $(\"#\" + me.pre + \"mmcifid\").val(), '_blank');\n        });\n    },\n\n    clickReload_mmdb: function() { var me = this;\n        $(\"#\" + me.pre + \"reload_mmdb\").click(function(e) {\n           e.preventDefault();\n\n           dialog.dialog( \"close\" );\n\n           me.setLogCmd(\"load mmdb \" + $(\"#\" + me.pre + \"mmdbid\").val(), false);\n\n           //me.downloadMmdb($(\"#\" + me.pre + \"mmdbid\").val());\n           window.open('https://www.ncbi.nlm.nih.gov/Structure/icn3d/full.html?mmdbid=' + $(\"#\" + me.pre + \"mmdbid\").val(), '_blank');\n        });\n    },\n\n    clickReload_blast_rep_id: function() { var me = this;\n        $(\"#\" + me.pre + \"reload_blast_rep_id\").click(function(e) {\n           e.preventDefault();\n\n           dialog.dialog( \"close\" );\n\n           //var query_id = $(\"#\" + me.pre + \"query_id\").val().toUpperCase();\n           var query_id = $(\"#\" + me.pre + \"query_id\").val();\n           var query_fasta = encodeURIComponent($(\"#\" + me.pre + \"query_fasta\").val());\n           //var blast_rep_id = $(\"#\" + me.pre + \"blast_rep_id\").val().toUpperCase();\n           var blast_rep_id = $(\"#\" + me.pre + \"blast_rep_id\").val();\n\n           me.setLogCmd(\"load seq_struc_ids \" + query_id + \",\" + blast_rep_id, false);\n\n           query_id = (query_id !== '' && query_id !== undefined) ? query_id : query_fasta;\n\n//           if(query_id !== '' && query_id !== undefined) {\n               window.open('https://www.ncbi.nlm.nih.gov/Structure/icn3d/full.html?from=icn3d&blast_rep_id=' + blast_rep_id + '&query_id=' + query_id, '_blank');\n/*\n           }\n           else if(query_fasta !== '' && query_fasta !== undefined) {\n               var form = document.createElement(\"form\");\n               form.setAttribute(\"method\", \"post\");\n               form.setAttribute(\"action\", \"https://www.ncbi.nlm.nih.gov/Structure/icn3d/full.html\");\n\n               form.setAttribute(\"target\", \"_blank\");\n\n               var hiddenField = document.createElement(\"input\");\n               hiddenField.setAttribute('command', 'view+annotations;+set+annotation+cdd;+set+view+detailed+view;+select+chain+' + blast_rep_id + ';+show+selection');\n               hiddenField.setAttribute('query_id', query_fasta);\n               hiddenField.setAttribute('blast_rep_id', blast_rep_id);\n               form.appendChild(hiddenField);\n               document.body.appendChild(form);\n\n               var newWin = window.open('', '_blank');\n\n               if (newWin) {\n                   form.submit();\n               } else {\n                   alert('You must allow popups for this to work.');\n               }\n           }\n*/\n        });\n    },\n\n    clickReload_gi: function() { var me = this;\n        $(\"#\" + me.pre + \"reload_gi\").click(function(e) {\n           e.preventDefault();\n\n           dialog.dialog( \"close\" );\n\n           me.setLogCmd(\"load gi \" + $(\"#\" + me.pre + \"gi\").val(), false);\n\n           window.open('https://www.ncbi.nlm.nih.gov/Structure/icn3d/full.html?gi=' + $(\"#\" + me.pre + \"gi\").val(), '_blank');\n        });\n    },\n\n    clickReload_cid: function() { var me = this;\n        $(\"#\" + me.pre + \"reload_cid\").click(function(e) {\n           e.preventDefault();\n\n           dialog.dialog( \"close\" );\n\n           me.setLogCmd(\"load cid \" + $(\"#\" + me.pre + \"cid\").val(), false);\n\n           window.open('https://www.ncbi.nlm.nih.gov/Structure/icn3d/full.html?cid=' + $(\"#\" + me.pre + \"cid\").val(), '_blank');\n        });\n    },\n\n    clickReload_pngimage: function() { var me = this;\n        $(\"#\" + me.pre + \"reload_pngimage\").click(function(e) {\n           e.preventDefault();\n\n           dialog.dialog( \"close\" );\n           //close all dialog\n           $(\".ui-dialog-content\").dialog(\"close\");\n\n           // initialize icn3dui\n           me.init();\n           me.icn3d.init();\n\n           var file = $(\"#\" + me.pre + \"pngimage\")[0].files[0];\n\n           if(!file) {\n             alert(\"Please select a file before clicking 'Load'\");\n           }\n           else {\n             if (!window.File || !window.FileReader || !window.FileList || !window.Blob) {\n                alert('The File APIs are not fully supported in this browser.');\n             }\n\n             var reader = new FileReader();\n             reader.onload = function (e) {\n               var imageStr = e.target.result; // or = reader.result;\n\n               var matchedStr = 'Share Link: ';\n               var pos = imageStr.indexOf(matchedStr);\n\n               var matchedStrData = \"Start of data file======\\n\";\n               var posData = imageStr.indexOf(matchedStrData);\n\n               if(pos == -1 && posData == -1) {\n                   alert('Please load a PNG image saved by clicking \"Save Datas > PNG Image\" in the Data menu...');\n               }\n               else if(pos != -1) {\n                   var url = imageStr.substr(pos + matchedStr.length);\n\n                   me.setLogCmd('load iCn3D PNG image ' + $(\"#\" + me.pre + \"pngimage\").val(), false);\n\n                   window.open(url);\n               }\n               else if(posData != -1) {\n                   me.bInputfile = true;\n\n                   var posDataEnd = imageStr.indexOf(\"End of data file======\\n\");\n                   var data = imageStr.substr(posData + matchedStrData.length, posDataEnd - posData - matchedStrData.length);\n\n                   var matchedStrState = \"Start of state file======\\n\";\n                   var posState = imageStr.indexOf(matchedStrState);\n\n                   var posStateEnd = imageStr.indexOf(\"End of state file======\\n\");\n                   var statefile = imageStr.substr(posState + matchedStrState.length, posStateEnd - posState- matchedStrState.length);\n\n                   var matchedStrType = \"Start of type file======\\n\";\n                   var posType = imageStr.indexOf(matchedStrType);\n\n                   var posTypeEnd = imageStr.indexOf(\"End of type file======\\n\");\n                   var type = imageStr.substr(posType + matchedStrType.length, posTypeEnd - posType - matchedStrType.length - 1); // remove the new line char\n\n                    if(type === 'pdb') {\n                        $.when( me.loadPdbData(data))\n                         .then(function() {\n                             me.icn3d.commands = [];\n                             me.icn3d.optsHistory = [];\n\n                             me.loadScript(statefile, true);\n                         });\n                    }\n                    else {\n                        if(type === 'mol2') {\n                            me.loadMol2Data(data);\n                        }\n                        else if(type === 'sdf') {\n                            me.loadSdfData(data);\n                        }\n                        else if(type === 'xyz') {\n                            me.loadXyzData(data);\n                        }\n                        else if(type === 'mmcif') {\n                            me.loadMmcifData(data);\n                        }\n\n                       me.icn3d.commands = [];\n                       me.icn3d.optsHistory = [];\n\n                       me.loadScript(statefile, true);\n                   }\n\n                   me.setLogCmd('load iCn3D PNG image ' + $(\"#\" + me.pre + \"pngimage\").val(), false);\n               }\n             };\n\n             reader.readAsText(file);\n           }\n\n        });\n    },\n\n    clickReload_state: function() { var me = this;\n        $(\"#\" + me.pre + \"reload_state\").click(function(e) {\n           e.preventDefault();\n\n           dialog.dialog( \"close\" );\n           //close all dialog\n           $(\".ui-dialog-content\").dialog(\"close\");\n\n           // initialize icn3dui\n           //Do NOT clear data if iCn3D loads a pdb or other data file and then load a state file\n           if(!me.bInputfile) {\n               me.init();\n               me.icn3d.init();\n           }\n\n           var file = $(\"#\" + me.pre + \"state\")[0].files[0];\n\n           if(!file) {\n             alert(\"Please select a file before clicking 'Load'\");\n           }\n           else {\n             if (!window.File || !window.FileReader || !window.FileList || !window.Blob) {\n                alert('The File APIs are not fully supported in this browser.');\n             }\n\n             var reader = new FileReader();\n             reader.onload = function (e) {\n               var dataStr = e.target.result; // or = reader.result;\n\n               me.setLogCmd('load state file ' + $(\"#\" + me.pre + \"state\").val(), false);\n\n               me.icn3d.commands = [];\n               me.icn3d.optsHistory = [];\n\n               me.loadScript(dataStr, true);\n             };\n\n             reader.readAsText(file);\n           }\n\n        });\n    },\n\n    clickReload_selectionfile: function() { var me = this;\n        $(\"#\" + me.pre + \"reload_selectionfile\").click(function(e) {\n           e.preventDefault();\n\n           dialog.dialog( \"close\" );\n\n           var file = $(\"#\" + me.pre + \"selectionfile\")[0].files[0];\n\n           if(!file) {\n             alert(\"Please select a file before clicking 'Load'\");\n           }\n           else {\n             if (!window.File || !window.FileReader || !window.FileList || !window.Blob) {\n                alert('The File APIs are not fully supported in this browser.');\n             }\n\n             var reader = new FileReader();\n             reader.onload = function (e) {\n               var dataStr = e.target.result; // or = reader.result;\n\n               //me.setLogCmd('load selection file ' + $(\"#\" + me.pre + \"selectionfile\").val(), false);\n\n               me.loadSelection(dataStr);\n               me.setLogCmd('load selection file ' + $(\"#\" + me.pre + \"selectionfile\").val(), false);\n             };\n\n             reader.readAsText(file);\n           }\n\n        });\n    },\n\n    clickReload_pdbfile: function() { var me = this;\n        $(\"#\" + me.pre + \"reload_pdbfile\").click(function(e) {\n           e.preventDefault();\n\n           me.bInitial = true;\n\n           dialog.dialog( \"close\" );\n           //close all dialog\n           $(\".ui-dialog-content\").dialog(\"close\");\n\n           var file = $(\"#\" + me.pre + \"pdbfile\")[0].files[0];\n\n           if(!file) {\n             alert(\"Please select a file before clicking 'Load'\");\n           }\n           else {\n             if (!window.File || !window.FileReader || !window.FileList || !window.Blob) {\n                alert('The File APIs are not fully supported in this browser.');\n             }\n\n             var reader = new FileReader();\n             reader.onload = function (e) {\n               var dataStr = e.target.result; // or = reader.result;\n\n               me.setLogCmd('load pdb file ' + $(\"#\" + me.pre + \"pdbfile\").val(), false);\n\n               me.icn3d.molTitle = \"\";\n\n               me.init();\n               me.icn3d.init();\n\n               me.bInputfile = true;\n               me.InputfileData = dataStr;\n               me.InputfileType = 'pdb';\n\n               me.loadPdbData(dataStr);\n             };\n\n             reader.readAsText(file);\n           }\n\n        });\n    },\n\n    clickReload_mol2file: function() { var me = this;\n        $(\"#\" + me.pre + \"reload_mol2file\").click(function(e) {\n           e.preventDefault();\n\n           me.bInitial = true;\n\n           dialog.dialog( \"close\" );\n           //close all dialog\n           $(\".ui-dialog-content\").dialog(\"close\");\n\n           var file = $(\"#\" + me.pre + \"mol2file\")[0].files[0];\n\n           if(!file) {\n             alert(\"Please select a file before clicking 'Load'\");\n           }\n           else {\n             if (!window.File || !window.FileReader || !window.FileList || !window.Blob) {\n                alert('The File APIs are not fully supported in this browser.');\n             }\n\n             var reader = new FileReader();\n             reader.onload = function (e) {\n               var dataStr = e.target.result; // or = reader.result;\n\n               me.setLogCmd('load mol2 file ' + $(\"#\" + me.pre + \"mol2file\").val(), false);\n\n               me.icn3d.molTitle = \"\";\n\n               me.inputid = undefined;\n\n               me.init();\n               me.icn3d.init();\n\n               me.bInputfile = true;\n               me.InputfileData = dataStr;\n               me.InputfileType = 'mol2';\n\n               me.loadMol2Data(dataStr);\n             };\n\n             reader.readAsText(file);\n           }\n\n        });\n    },\n\n    clickReload_sdffile: function() { var me = this;\n        $(\"#\" + me.pre + \"reload_sdffile\").click(function(e) {\n           e.preventDefault();\n\n           me.bInitial = true;\n\n           dialog.dialog( \"close\" );\n           //close all dialog\n           $(\".ui-dialog-content\").dialog(\"close\");\n\n           var file = $(\"#\" + me.pre + \"sdffile\")[0].files[0];\n\n           if(!file) {\n             alert(\"Please select a file before clicking 'Load'\");\n           }\n           else {\n             if (!window.File || !window.FileReader || !window.FileList || !window.Blob) {\n                alert('The File APIs are not fully supported in this browser.');\n             }\n\n             var reader = new FileReader();\n             reader.onload = function (e) {\n               var dataStr = e.target.result; // or = reader.result;\n\n               me.setLogCmd('load sdf file ' + $(\"#\" + me.pre + \"sdffile\").val(), false);\n\n               me.icn3d.molTitle = \"\";\n               me.inputid = undefined;\n\n               me.init();\n               me.icn3d.init();\n\n               me.bInputfile = true;\n               me.InputfileData = dataStr;\n               me.InputfileType = 'sdf';\n\n               me.loadSdfData(dataStr);\n             };\n\n             reader.readAsText(file);\n           }\n\n        });\n    },\n\n    clickReload_xyzfile: function() { var me = this;\n        $(\"#\" + me.pre + \"reload_xyzfile\").click(function(e) {\n           e.preventDefault();\n\n           me.bInitial = true;\n\n           dialog.dialog( \"close\" );\n           //close all dialog\n           $(\".ui-dialog-content\").dialog(\"close\");\n\n           var file = $(\"#\" + me.pre + \"xyzfile\")[0].files[0];\n\n           if(!file) {\n             alert(\"Please select a file before clicking 'Load'\");\n           }\n           else {\n             if (!window.File || !window.FileReader || !window.FileList || !window.Blob) {\n                alert('The File APIs are not fully supported in this browser.');\n             }\n\n             var reader = new FileReader();\n             reader.onload = function (e) {\n               var dataStr = e.target.result; // or = reader.result;\n\n               me.setLogCmd('load xyz file ' + $(\"#\" + me.pre + \"xyzfile\").val(), false);\n\n               me.icn3d.molTitle = \"\";\n               me.inputid = undefined;\n\n               me.init();\n               me.icn3d.init();\n\n               me.bInputfile = true;\n               me.InputfileData = dataStr;\n               me.InputfileType = 'xyz';\n\n               me.loadXyzData(dataStr);\n             };\n\n             reader.readAsText(file);\n           }\n\n        });\n    },\n\n    clickReload_urlfile: function() { var me = this;\n        $(\"#\" + me.pre + \"reload_urlfile\").click(function(e) {\n           e.preventDefault();\n\n           me.bInitial = true;\n\n           dialog.dialog( \"close\" );\n           //close all dialog\n           $(\".ui-dialog-content\").dialog(\"close\");\n\n           var type = $(\"#\" + me.pre + \"filetype\").val();\n           var url = $(\"#\" + me.pre + \"urlfile\").val();\n\n           me.init();\n           me.icn3d.init();\n\n           me.bInputfile = true;\n\n           me.downloadUrl(url, type);\n        });\n    },\n\n    clickReload_mmciffile: function() { var me = this;\n        $(\"#\" + me.pre + \"reload_mmciffile\").click(function(e) {\n           e.preventDefault();\n\n           me.bInitial = true;\n\n           dialog.dialog( \"close\" );\n           //close all dialog\n           $(\".ui-dialog-content\").dialog(\"close\");\n\n           var file = $(\"#\" + me.pre + \"mmciffile\")[0].files[0];\n\n           if(!file) {\n             alert(\"Please select a file before clicking 'Load'\");\n           }\n           else {\n             if (!window.File || !window.FileReader || !window.FileList || !window.Blob) {\n                alert('The File APIs are not fully supported in this browser.');\n             }\n\n             var reader = new FileReader();\n             reader.onload = function (e) {\n               var dataStr = e.target.result; // or = reader.result;\n\n               me.setLogCmd('load mmcif file ' + $(\"#\" + me.pre + \"mmciffile\").val(), false);\n\n               me.icn3d.molTitle = \"\";\n\n                var url = \"//www.ncbi.nlm.nih.gov/Structure/mmcifparser/mmcifparser.cgi\";\n\n                me.icn3d.bCid = undefined;\n\n               $.ajax({\n                  url: url,\n                  type: 'POST',\n                  data : {'mmciffile': dataStr},\n                  dataType: 'jsonp',\n                  cache: true,\n                  tryCount : 0,\n                  retryLimit : 1,\n                  beforeSend: function() {\n                      if($(\"#\" + me.pre + \"wait\")) $(\"#\" + me.pre + \"wait\").show();\n                      if($(\"#\" + me.pre + \"canvas\")) $(\"#\" + me.pre + \"canvas\").hide();\n                      if($(\"#\" + me.pre + \"cmdlog\")) $(\"#\" + me.pre + \"cmdlog\").hide();\n                  },\n                  complete: function() {\n                      if($(\"#\" + me.pre + \"wait\")) $(\"#\" + me.pre + \"wait\").hide();\n                      if($(\"#\" + me.pre + \"canvas\")) $(\"#\" + me.pre + \"canvas\").show();\n                      if($(\"#\" + me.pre + \"cmdlog\")) $(\"#\" + me.pre + \"cmdlog\").show();\n                  },\n                  success: function(data) {\n                      me.init();\n                      me.icn3d.init();\n\n                      me.bInputfile = true;\n                      me.InputfileData = data;\n                      me.InputfileType = 'mmcif';\n\n                      me.loadMmcifData(data);\n                  },\n                  error : function(xhr, textStatus, errorThrown ) {\n                    this.tryCount++;\n                    if (this.tryCount <= this.retryLimit) {\n                        //try again\n                        $.ajax(this);\n                        return;\n                    }\n                    return;\n                  }\n                });\n             };\n\n             reader.readAsText(file);\n           }\n\n        });\n    },\n\n    clickApplycustomcolor: function() { var me = this;\n        $(\"#\" + me.pre + \"applycustomcolor\").click(function(e) {\n           e.preventDefault();\n           dialog.dialog( \"close\" );\n\n           me.setOption(\"color\", $(\"#\" + me.pre + \"colorcustom\").val());\n           me.setLogCmd(\"color \" + $(\"#\" + me.pre + \"colorcustom\").val(), true);\n        });\n    },\n\n    clickApplypick_aroundsphere: function() { var me = this;\n        $(\"#\" + me.pre + \"applypick_aroundsphere\").click(function(e) {\n            e.preventDefault();\n\n            dialog.dialog( \"close\" );\n            var radius = parseFloat($(\"#\" + me.pre + \"radius_aroundsphere\").val());\n\n               var select = \"select zone cutoff \" + radius;\n               //me.setLogCmd(select, true);\n\n               me.pickCustomSphere(radius);\n\n               me.updateHlAll();\n\n               me.setLogCmd(select, true);\n        });\n    },\n\n    clickApplyhbonds: function() { var me = this;\n        $(\"#\" + me.pre + \"applyhbonds\").click(function(e) {\n           e.preventDefault();\n           dialog.dialog( \"close\" );\n\n           var threshold = parseFloat($(\"#\" + me.pre + \"hbondthreshold\" ).val());\n\n           var select = \"hbonds \" + threshold;\n           //me.setLogCmd(select, true);\n\n           me.showHbonds(threshold);\n           me.setLogCmd(select, true);\n        });\n    },\n\n    clickApplypick_labels: function() { var me = this;\n        $(\"#\" + me.pre + \"applypick_labels\").click(function(e) {\n           e.preventDefault();\n           dialog.dialog( \"close\" );\n\n           var text = $(\"#\" + me.pre + \"labeltext\" ).val();\n           var size = $(\"#\" + me.pre + \"labelsize\" ).val();\n           var color = $(\"#\" + me.pre + \"labelcolor\" ).val();\n           var background = $(\"#\" + me.pre + \"labelbkgd\" ).val();\n           if(size === '0' || size === '' || size === 'undefined') size = 0;\n           if(color === '0' || color === '' || color === 'undefined') color = 0;\n           if(background === '0' || background === '' || background === 'undefined') background = 0;\n\n           if(me.icn3d.pAtom === undefined || me.icn3d.pAtom2 === undefined) {\n             alert(\"Please pick another atom\");\n           }\n           else {\n             var x = (me.icn3d.pAtom.coord.x + me.icn3d.pAtom2.coord.x) / 2;\n             var y = (me.icn3d.pAtom.coord.y + me.icn3d.pAtom2.coord.y) / 2;\n             var z = (me.icn3d.pAtom.coord.z + me.icn3d.pAtom2.coord.z) / 2;\n\n             //me.setLogCmd('add label ' + text + ' | x ' + x  + ' y ' + y + ' z ' + z + ' | size ' + size + ' | color ' + color + ' | background ' + background + ' | type custom', true);\n\n             me.addLabel(text, x, y, z, size, color, background, 'custom');\n\n             me.icn3d.pickpair = false;\n\n             var sizeStr = '', colorStr = '', backgroundStr = '';\n             if(size != 0) sizeStr = ' | size ' + size;\n             if(color != 0) colorStr = ' | color ' + color;\n             if(background != 0) backgroundStr = ' | background ' + background;\n\n             me.setLogCmd('add label ' + text + ' | x ' + x.toPrecision(4)  + ' y ' + y.toPrecision(4) + ' z ' + z.toPrecision(4) + sizeStr + colorStr + backgroundStr + ' | type custom', true);\n             me.icn3d.draw();\n           }\n        });\n    },\n\n    clickApplyselection_labels: function() { var me = this;\n        $(\"#\" + me.pre + \"applyselection_labels\").click(function(e) {\n           e.preventDefault();\n           dialog.dialog( \"close\" );\n\n           var text = $(\"#\" + me.pre + \"labeltext2\" ).val();\n           var size = $(\"#\" + me.pre + \"labelsize2\" ).val();\n           var color = $(\"#\" + me.pre + \"labelcolor2\" ).val();\n           var background = $(\"#\" + me.pre + \"labelbkgd2\" ).val();\n           if(size === '0' || size === '' || size === 'undefined') size = 0;\n           if(color === '0' || color === '' || color === 'undefined') color = 0;\n           if(background === '0' || background === '' || background === 'undefined') background = 0;\n\n             var position = me.icn3d.centerAtoms(me.icn3d.hash2Atoms(me.icn3d.hAtoms));\n             var x = position.center.x;\n             var y = position.center.y;\n             var z = position.center.z;\n\n             //me.setLogCmd('add label ' + text + ' | size ' + size + ' | color ' + color + ' | background ' + background + ' | type custom', true);\n\n             me.addLabel(text, x, y, z, size, color, background, 'custom');\n\n             var sizeStr = '', colorStr = '', backgroundStr = '';\n             if(size != 0) sizeStr = ' | size ' + size;\n             if(color != 0) colorStr = ' | color ' + color;\n             if(background != 0) backgroundStr = ' | background ' + background;\n\n             me.setLogCmd('add label ' + text + ' | x ' + x.toPrecision(4)  + ' y ' + y.toPrecision(4) + ' z ' + z.toPrecision(4) + sizeStr + colorStr + backgroundStr + ' | type custom', true);\n\n             me.icn3d.draw();\n        });\n    },\n\n    clickApplypick_stabilizer: function() { var me = this;\n        $(\"#\" + me.pre + \"applypick_stabilizer\").click(function(e) {\n           e.preventDefault();\n           dialog.dialog( \"close\" );\n\n           if(me.icn3d.pAtom === undefined || me.icn3d.pAtom2 === undefined) {\n             alert(\"Please pick another atom\");\n           }\n           else {\n             me.icn3d.pickpair = false;\n\n             me.setLogCmd('add one stabilizer | ' + me.icn3d.pAtom.serial + ' ' + me.icn3d.pAtom2.serial, true);\n\n             if(me.icn3d.pairArray === undefined) me.icn3d.pairArray = [];\n             me.icn3d.pairArray.push(me.icn3d.pAtom.serial);\n             me.icn3d.pairArray.push(me.icn3d.pAtom2.serial);\n\n             //me.updateStabilizer();\n             me.setThichknessFor3Dprint();\n\n             me.icn3d.draw();\n           }\n        });\n    },\n\n    // https://github.com/tovic/color-picker\n    // https://tovic.github.io/color-picker/color-picker.value-update.html\n    pickColor: function() { var me = this;\n        var picker = new CP(document.querySelector(\"#\" + me.pre + \"colorcustom\"));\n\n        picker.on(\"change\", function(color) {\n            this.target.value = color;\n        });\n\n        $(\"#\" + me.pre + \"colorcustom\").on(\"input keyup paste cut\", function() {\n            var color = $(\"#\" + me.pre + \"colorcustom\").val();\n            picker.set('#' + color).enter();\n        });\n    },\n\n    clickApplypick_stabilizer_rm: function() { var me = this;\n        $(\"#\" + me.pre + \"applypick_stabilizer_rm\").click(function(e) {\n           e.preventDefault();\n           dialog.dialog( \"close\" );\n\n           if(me.icn3d.pAtom === undefined || me.icn3d.pAtom2 === undefined) {\n             alert(\"Please pick another atom\");\n           }\n           else {\n             me.icn3d.pickpair = false;\n\n             me.setLogCmd('remove one stabilizer | ' + me.icn3d.pAtom.serial + ' ' + me.icn3d.pAtom2.serial, true);\n\n             var rmLineArray = [];\n             rmLineArray.push(me.icn3d.pAtom.serial);\n             rmLineArray.push(me.icn3d.pAtom2.serial);\n\n             me.removeOneStabilizer(rmLineArray);\n\n             //me.updateStabilizer();\n\n             me.icn3d.draw();\n           }\n        });\n    },\n\n    clickApplypick_measuredistance: function() { var me = this;\n        $(\"#\" + me.pre + \"applypick_measuredistance\").click(function(e) {\n           e.preventDefault();\n           dialog.dialog( \"close\" );\n           me.bMeasureDistance = false;\n\n           if(me.icn3d.pAtom === undefined || me.icn3d.pAtom2 === undefined) {\n             alert(\"Please pick another atom\");\n           }\n           else {\n             var size = 0, color, background = 0;\n             var color = $(\"#\" + me.pre + \"linecolor\" ).val();\n\n             var x = (me.icn3d.pAtom.coord.x + me.icn3d.pAtom2.coord.x) / 2;\n             var y = (me.icn3d.pAtom.coord.y + me.icn3d.pAtom2.coord.y) / 2;\n             var z = (me.icn3d.pAtom.coord.z + me.icn3d.pAtom2.coord.z) / 2;\n\n             me.addLineFromPicking('distance');\n\n             var distance = parseInt(me.icn3d.pAtom.coord.distanceTo(me.icn3d.pAtom2.coord) * 10) / 10;\n\n             var text = distance.toString() + \" A\";\n\n             me.addLabel(text, x, y, z, size, color, background, 'distance');\n\n             var sizeStr = '', colorStr = '', backgroundStr = '';\n             if(size != 0) sizeStr = ' | size ' + size;\n             if(color != 0) colorStr = ' | color ' + color;\n             if(background != 0) backgroundStr = ' | background ' + background;\n\n             me.setLogCmd('add label ' + text + ' | x ' + x.toPrecision(4)  + ' y ' + y.toPrecision(4) + ' z ' + z.toPrecision(4) + sizeStr + colorStr + backgroundStr + ' | type distance', true);\n\n             me.icn3d.draw();\n\n             me.icn3d.pk = 2;\n           }\n        });\n    },\n\n    clickApply_thickness: function() { var me = this;\n        $(\"#\" + me.pre + \"apply_thickness_3dprint\").click(function(e) {\n            e.preventDefault();\n            //dialog.dialog( \"close\" );\n\n            me.bSetThickness = true;\n\n            me.icn3d.lineRadius = parseFloat($(\"#\" + me.pre + \"linerad_3dprint\" ).val()); //0.1; // hbonds, distance lines\n            me.icn3d.coilWidth = parseFloat($(\"#\" + me.pre + \"coilrad_3dprint\" ).val()); //0.4; // style cartoon-coil\n            me.icn3d.cylinderRadius = parseFloat($(\"#\" + me.pre + \"stickrad_3dprint\" ).val()); //0.4; // style stick\n            me.icn3d.traceRadius = parseFloat($(\"#\" + me.pre + \"stickrad_3dprint\" ).val()); //0.2; // style c alpha trace, nucleotide stick\n            me.icn3d.dotSphereScale = parseFloat($(\"#\" + me.pre + \"ballscale_3dprint\" ).val()); //0.3; // style ball and stick, dot\n\n            me.icn3d.ribbonthickness = parseFloat($(\"#\" + me.pre + \"ribbonthick_3dprint\" ).val()); //0.4; // style ribbon, nucleotide cartoon, stand thickness\n            me.icn3d.helixSheetWidth = parseFloat($(\"#\" + me.pre + \"prtribbonwidth_3dprint\" ).val()); //1.3; // style ribbon, stand thickness\n            me.icn3d.nucleicAcidWidth = parseFloat($(\"#\" + me.pre + \"nucleotideribbonwidth_3dprint\" ).val()); //0.8; // nucleotide cartoon\n\n            me.setLogCmd('set thickness | linerad ' + me.icn3d.lineRadius + ' | coilrad ' + me.icn3d.coilWidth + ' | stickrad ' + me.icn3d.cylinderRadius + ' | tracerad ' + me.icn3d.traceRadius + ' | ribbonthick ' + me.icn3d.ribbonthickness + ' | proteinwidth ' + me.icn3d.helixSheetWidth + ' | nucleotidewidth ' + me.icn3d.nucleicAcidWidth  + ' | ballscale ' + me.icn3d.dotSphereScale, true);\n\n            me.icn3d.draw();\n        });\n\n        $(\"#\" + me.pre + \"apply_thickness_style\").click(function(e) {\n            e.preventDefault();\n            //dialog.dialog( \"close\" );\n\n            me.bSetThickness = true;\n\n            me.icn3d.lineRadius = parseFloat($(\"#\" + me.pre + \"linerad_style\" ).val()); //0.1; // hbonds, distance lines\n            me.icn3d.coilWidth = parseFloat($(\"#\" + me.pre + \"coilrad_style\" ).val()); //0.4; // style cartoon-coil\n            me.icn3d.cylinderRadius = parseFloat($(\"#\" + me.pre + \"stickrad_style\" ).val()); //0.4; // style stick\n            me.icn3d.traceRadius = parseFloat($(\"#\" + me.pre + \"stickrad_style\" ).val()); //0.2; // style c alpha trace, nucleotide stick\n            me.icn3d.dotSphereScale = parseFloat($(\"#\" + me.pre + \"ballscale_style\" ).val()); //0.3; // style ball and stick, dot\n\n            me.icn3d.ribbonthickness = parseFloat($(\"#\" + me.pre + \"ribbonthick_style\" ).val()); //0.4; // style ribbon, nucleotide cartoon, stand thickness\n            me.icn3d.helixSheetWidth = parseFloat($(\"#\" + me.pre + \"prtribbonwidth_style\" ).val()); //1.3; // style ribbon, stand thickness\n            me.icn3d.nucleicAcidWidth = parseFloat($(\"#\" + me.pre + \"nucleotideribbonwidth_style\" ).val()); //0.8; // nucleotide cartoon\n\n            me.setLogCmd('set thickness | linerad ' + me.icn3d.lineRadius + ' | coilrad ' + me.icn3d.coilWidth + ' | stickrad ' + me.icn3d.cylinderRadius + ' | tracerad ' + me.icn3d.traceRadius + ' | ribbonthick ' + me.icn3d.ribbonthickness + ' | proteinwidth ' + me.icn3d.helixSheetWidth + ' | nucleotidewidth ' + me.icn3d.nucleicAcidWidth  + ' | ballscale ' + me.icn3d.dotSphereScale, true);\n\n            me.icn3d.draw();\n        });\n    },\n\n    clickReset: function() { var me = this;\n        $(\"#\" + me.pre + \"reset\").click(function (e) {\n            //me.setLogCmd(\"reset\", true);\n\n            //reset me.icn3d.maxD\n            me.icn3d.maxD = me.icn3d.oriMaxD;\n            me.icn3d.center = me.icn3d.oriCenter.clone();\n\n            me.icn3d.reinitAfterLoad();\n\n            me.renderFinalStep(1);\n            me.setMode('all');\n\n            me.setLogCmd(\"reset\", true);\n\n            me.removeSeqChainBkgd();\n            me.removeSeqResidueBkgd();\n\n            me.removeHl2D();\n            me.removeHlMenus();\n        });\n    },\n\n    clickToggleHighlight: function() { var me = this;\n        $(\"#\" + me.pre + \"toggleHighlight\").add(\"#\" + me.pre + \"toggleHighlight2\").click(function (e) {\n            e.stopImmediatePropagation();\n            me.toggleHighlight();\n        });\n\n        $(document).on(\"click\", \"#\" + me.pre + \"seq_clearselection\", function(e) {\n            e.stopImmediatePropagation();\n            dialog.dialog( \"close\" );\n\n            me.clearHighlight();\n        });\n\n        $(document).on(\"click\", \"#\" + me.pre + \"seq_clearselection2\", function(e) {\n            e.stopImmediatePropagation();\n\n            e.preventDefault();\n\n            me.clearHighlight();\n            me.setLogCmd(\"clear selection\", true);\n        });\n\n        $(document).on(\"click\", \"#\" + me.pre + \"alignseq_clearselection\", function(e) {\n            e.stopImmediatePropagation();\n            me.clearHighlight();\n            me.setLogCmd(\"clear selection\", true);\n        });\n    },\n\n    pressCommandtext: function() { var me = this;\n        $(\"#\" + me.pre + \"logtext\").keypress(function(e){\n           me.bAddLogs = false; // turn off log\n\n           var code = (e.keyCode ? e.keyCode : e.which);\n\n           if(code == 13) { //Enter keycode\n              e.preventDefault();\n\n              var dataStr = $(this).val();\n\n              me.icn3d.bRender = true;\n\n              var commandArray = dataStr.split('\\n');\n              var lastCommand = commandArray[commandArray.length - 1].substr(2).trim(); // skip \"> \"\n              me.icn3d.logs.push(lastCommand);\n              $(\"#\" + me.pre + \"logtext\").val(\"> \" + me.icn3d.logs.join(\"\\n> \") + \"\\n> \").scrollTop($(\"#\" + me.pre + \"logtext\")[0].scrollHeight);\n\n              if(lastCommand !== '') {\n                var transformation = {};\n                transformation.factor = me.icn3d._zoomFactor;\n                transformation.mouseChange = me.icn3d.mouseChange;\n                transformation.quaternion = me.icn3d.quaternion;\n\n                me.icn3d.commands.push(lastCommand + '|||' + me.getTransformationStr(transformation));\n                me.icn3d.optsHistory.push(me.icn3d.cloneHash(me.icn3d.opts));\n                me.icn3d.optsHistory[me.icn3d.optsHistory.length - 1].hlatomcount = Object.keys(me.icn3d.hAtoms).length;\n\n                if(me.isSessionStorageSupported()) me.saveCommandsToSession();\n\n                me.STATENUMBER = me.icn3d.commands.length;\n\n                if(lastCommand.indexOf('load') !== -1) {\n                    me.applyCommandLoad(lastCommand);\n                }\n                else if(lastCommand.indexOf('set map') !== -1 && lastCommand.indexOf('set map wireframe') === -1) {\n                    me.applyCommandMap(lastCommand);\n                }\n                else if(lastCommand.indexOf('view annotations') == 0\n                  //|| lastCommand.indexOf('set annotation cdd') == 0\n                  //|| lastCommand.indexOf('set annotation site') == 0\n                  ) {\n                    me.applyCommandAnnotationsAndCddSite(lastCommand);\n                }\n                else if(lastCommand.indexOf('set annotation clinvar') == 0\n                  || lastCommand.indexOf('set annotation snp') == 0) {\n                    me.applyCommandSnpClinvar(lastCommand);\n                }\n                else if(lastCommand.indexOf('set annotation 3ddomain') == 0) {\n                    me.applyCommand3ddomain(lastCommand);\n                }\n                else if(lastCommand.indexOf('set annotation all') == 0) {\n                    //$.when(me.applyCommandAnnotationsAndCddSite(lastCommand))\n                    //    .then(me.applyCommandSnpClinvar(lastCommand))\n                    $.when(me.applyCommandSnpClinvar(lastCommand))\n                        .then(me.applyCommandSnpClinvar(lastCommand));\n\n                    me.setAnnoTabAll();\n                }\n                else {\n                    me.applyCommand(lastCommand + '|||' + me.getTransformationStr(transformation));\n                }\n\n                me.saveSelectionIfSelected();\n                me.icn3d.draw();\n              }\n           }\n\n           me.bAddLogs = true;\n        });\n    },\n\n    clickSeqSaveSelection: function() { var me = this;\n        $(document).on(\"click\", \"#\" + me.pre + \"seq_saveselection\", function(e) {\n           e.stopImmediatePropagation();\n           dialog.dialog( \"close\" );\n\n           if(!$('#' + me.pre + 'dl_definedsets').hasClass('ui-dialog-content') || !$('#' + me.pre + 'dl_definedsets').dialog( 'isOpen' )) {\n             me.openDialog(me.pre + 'dl_definedsets', 'Select sets');\n           }\n\n           me.bSelectResidue = false;\n\n           var name = $(\"#\" + me.pre + \"seq_command_name\").val().replace(/\\s+/g, '_');\n           //var description = $(\"#\" + me.pre + \"seq_command_desc\").val();\n\n           me.saveSelection(name, name);\n        });\n\n        $(document).on(\"click\", \"#\" + me.pre + \"seq_saveselection2\", function(e) {\n           e.stopImmediatePropagation();\n\n           if(!$('#' + me.pre + 'dl_definedsets').hasClass('ui-dialog-content') || !$('#' + me.pre + 'dl_definedsets').dialog( 'isOpen' )) {\n             me.openDialog(me.pre + 'dl_definedsets', 'Select sets');\n           }\n\n           me.bSelectResidue = false;\n\n           var name = $(\"#\" + me.pre + \"seq_command_name2\").val().replace(/\\s+/g, '_');\n           //var description = $(\"#\" + me.pre + \"seq_command_desc2\").val();\n\n           me.saveSelection(name, name);\n        });\n    },\n\n    clickAlignSeqSaveSelection: function() { var me = this;\n        $(document).on(\"click\", \"#\" + me.pre + \"alignseq_saveselection\", function(e) {\n            e.stopImmediatePropagation();\n\n           if(!$('#' + me.pre + 'dl_definedsets').hasClass('ui-dialog-content') || !$('#' + me.pre + 'dl_definedsets').dialog( 'isOpen' )) {\n             me.openDialog(me.pre + 'dl_definedsets', 'Select sets');\n           }\n\n            me.bSelectAlignResidue = false;\n\n            var name = $(\"#\" + me.pre + \"alignseq_command_name\").val().replace(/\\s+/g, '_');\n            //var description = $(\"#\" + me.pre + \"alignseq_command_desc\").val();\n\n            me.saveSelection(name, name);\n        });\n    },\n\n    clickOutputSelection: function() { var me = this;\n        $(document).on(\"click\", \".\" + me.pre + \"outputselection\", function(e) {\n              e.stopImmediatePropagation();\n            me.bSelectResidue = false;\n            me.bSelectAlignResidue = false;\n            me.setLogCmd('output selection', true);\n            me.outputSelection();\n        });\n    },\n\n    bindMouseup: function() { var me = this;\n        $(\"accordion\").bind('mouseup touchend', function (e) {\n          if(me.icn3d.controls) {\n            me.icn3d.controls.noRotate = false;\n            me.icn3d.controls.noZoom = false;\n            me.icn3d.controls.noPan = false;\n          }\n        });\n    },\n\n    bindMousedown: function() { var me = this;\n        $(\"accordion\").bind('mousedown touchstart', function (e) {\n          if(me.icn3d.controls) {\n            me.icn3d.controls.noRotate = true;\n            me.icn3d.controls.noZoom = true;\n            me.icn3d.controls.noPan = true;\n          }\n        });\n    },\n\n    expandShrink: function() { var me = this;\n        //$(\"[id$=_cddseq_expand]\").on('click', '.ui-icon-plus', function(e) {\n        $(document).on(\"click\", \".icn3d-expand\", function(e) {\n            e.stopImmediatePropagation();\n\n            var oriId = $(this).attr('id');\n            var pos = oriId.lastIndexOf('_');\n            var id = oriId.substr(0, pos);\n\n            $(\"#\" + id).show();\n            $(\"#\" + id + \"_expand\").hide();\n            $(\"#\" + id + \"_shrink\").show();\n        });\n\n        //$(\"[id$=_cddseq_shrink]\").on('click', '.ui-icon-minus', function(e) {\n        $(document).on(\"click\", \".icn3d-shrink\", function(e) {\n            e.stopImmediatePropagation();\n\n            var oriId = $(this).attr('id');\n            var pos = oriId.lastIndexOf('_');\n            var id = oriId.substr(0, pos);\n\n            $(\"#\" + id).hide();\n            $(\"#\" + id + \"_expand\").show();\n            $(\"#\" + id + \"_shrink\").hide();\n        });\n    },\n\n    scrollAnno: function() { var me = this;\n        window.onscroll = function (e) {\n            if(me.view == 'detailed view' && $(window).scrollTop() == 0 && $(window).scrollTop() == 0 && $(\"#\" + me.pre + \"dl_selectannotations\").scrollTop() == 0) {\n                // show fixed titles\n                me.showFixedTitle();\n            }\n            else {\n                // remove fixed titles\n                me.hideFixedTitle();\n            }\n        } ;\n\n        $( \"#\" + me.pre + \"dl_selectannotations\" ).scroll(function() {\n            if(me.view == 'detailed view' && $(window).scrollTop() == 0 && $(window).scrollTop() == 0 && $(\"#\" + me.pre + \"dl_selectannotations\").scrollTop() == 0) {\n                // show fixed titles\n                me.showFixedTitle();\n            }\n            else {\n                // remove fixed titles\n                me.hideFixedTitle();\n            }\n        });\n    },\n\n    // ===== events end\n    allEventFunctions: function() { var me = this;\n        me.clickModeswitch();\n        me.clickViewswitch();\n\n        if(! me.isMobile()) {\n            me.selectSequenceNonMobile();\n        }\n        else {\n            me.selectSequenceMobile();\n            me.selectChainMobile();\n        }\n\n        me.clickBack();\n        me.clickForward();\n        me.clickToggle();\n\n        me.clickHlColorYellow();\n        me.clickHlColorGreen();\n        me.clickHlColorRed();\n        me.clickHlStyleOutline();\n        me.clickHlStyleObject();\n        me.clickHlStyleNone();\n\n        me.clickAlternate();\n        me.clkMn1_mmtfid();\n        me.clkMn1_pdbid();\n        me.clkMn1_align();\n        me.clkMn1_pdbfile();\n        me.clkMn1_mol2file();\n        me.clkMn1_sdffile();\n        me.clkMn1_xyzfile();\n        me.clkMn1_urlfile();\n        me.clkMn1_mmciffile();\n        me.clkMn1_mmcifid();\n        me.clkMn1_mmdbid();\n        me.clkMn1_blast_rep_id();\n        me.clkMn1_gi();\n        me.clkMn1_cid();\n        me.clkMn1_pngimage();\n        me.clkMn1_state();\n        me.clkMn1_selection();\n        me.clkMn1_exportState();\n        me.clkMn1_exportStl();\n        me.clkMn1_exportVrml();\n        me.clkMn1_exportStlStab();\n        me.clkMn1_exportVrmlStab();\n        me.clkMn6_exportInteraction();\n        me.clkMn1_exportCanvas();\n        me.clkMn1_exportCounts();\n        me.clkMn1_exportSelections();\n        me.clkMn1_sharelink();\n        me.clkMn1_link_structure();\n        me.clkMn1_link_bind();\n        me.clkMn1_link_vast();\n        me.clkMn1_link_pubmed();\n        me.clkMn1_link_protein();\n//        me.clkMn1_link_gene();\n//        me.clkMn1_link_chemicals();\n        me.clkMn2_selectannotations();\n//        me.clkMn2_selectresidues();\n        me.clkMn2_selectcomplement();\n        me.clkMn2_selectsidechains();\n        me.clkMn2_selectall();\n        me.clkMn2_alignment();\n        me.clkMn2_command();\n        me.clkMn2_definedsets();\n        me.clkMn2_pkYes();\n        me.clkMn2_pkNo();\n        me.clkMn2_pkResidue();\n        me.clkMn2_pkStrand();\n        me.clkMn2_pkChain();\n        me.clkMn2_aroundsphere();\n        me.clkMn2_select_chain();\n        me.clkMn3_proteinsRibbon();\n        me.clkMn3_proteinsStrand();\n        me.clkMn3_proteinsCylinder();\n        me.clkMn3_proteinsSchematic();\n        me.clkMn3_proteinsCalpha();\n        me.clkMn3_proteinsBfactor();\n        me.clkMn3_proteinsLines();\n        me.clkMn3_proteinsStick();\n        me.clkMn3_proteinsBallstick();\n        me.clkMn3_proteinsSphere();\n        me.clkMn3_proteinsNo();\n        me.clkMn3_sidecLines();\n        me.clkMn3_sidecStick();\n        me.clkMn3_sidecBallstick();\n        me.clkMn3_sidecSphere();\n        me.clkMn3_sidecNo();\n        me.clkMn3_nuclCartoon();\n        me.clkMn3_nuclSchematic();\n        me.clkMn3_nuclPhos();\n        me.clkMn3_nuclLines();\n        me.clkMn3_nuclStick();\n        me.clkMn3_nuclBallstick();\n        me.clkMn3_nuclSphere();\n        me.clkMn3_nuclNo();\n        me.clkMn3_ligLines();\n        me.clkMn3_ligStick();\n        me.clkMn3_ligBallstick();\n        me.clkMn3_ligSchematic();\n        me.clkMn3_ligSphere();\n        me.clkMn3_ligNo();\n        me.clkMn3_ionsSphere();\n        me.clkMn3_ionsDot();\n        me.clkMn3_ionsNo();\n        me.clkMn3_waterSphere();\n        me.clkMn3_waterDot();\n        me.clkMn3_waterNo();\n        me.clkMn4_clrSpectrum();\n        me.clkMn4_clrChain();\n        me.clkMn4_clrSSGreen();\n        me.clkMn4_clrSSYellow();\n        me.clkMn4_clrResidue();\n        me.clkMn4_clrCharge();\n        me.clkMn4_clrHydrophobic();\n        me.clkMn4_clrAtom();\n        me.clkMn4_clrBfactor();\n        me.clkMn4_clrBfactorNorm();\n        me.clkMn4_clrConserved();\n        me.clkMn4_clrIdentity();\n        me.clkMn4_clrRed();\n        me.clkMn4_clrGreen();\n        me.clkMn4_clrBlue();\n        me.clkMn4_clrMagenta();\n        me.clkMn4_clrYellow();\n        me.clkMn4_clrCyan();\n        me.clkMn4_clrWhite();\n        me.clkMn4_clrGrey();\n        me.clkMn4_clrCustom();\n        me.clkMn4_clrSave();\n        me.clkMn4_clrApplySave();\n        me.clkMn3_styleSave();\n        me.clkMn3_styleApplySave();\n        me.clkMn5_neighborsYes();\n        me.clkMn5_neighborsNo();\n        me.clkMn5_surfaceVDW();\n        //me.clkMn5_surfaceSES();\n        me.clkMn5_surfaceSAS();\n        me.clkMn5_surfaceMolecular();\n        me.clkMn5_surfaceVDWContext();\n        me.clkMn5_surfaceSASContext();\n        me.clkMn5_surfaceMolecularContext();\n        me.clkMn5_surfaceNo();\n        me.clkMn5_opacity10();\n        me.clkMn5_opacity09();\n        me.clkMn5_opacity08();\n        me.clkMn5_opacity07();\n        me.clkMn5_opacity06();\n        me.clkMn5_opacity05();\n        me.clkMn5_opacity04();\n        me.clkMn5_opacity03();\n        me.clkMn5_opacity02();\n        me.clkMn5_opacity01();\n        me.clkMn5_wireframeYes();\n        me.clkMn5_wireframeNo();\n        me.clkMn5_elecmap2fofc();\n        me.clkMn5_elecmapfofc();\n        me.clkMn5_elecmapNo();\n        me.clkMn5_mapwireframeYes();\n        me.clkMn5_mapwireframeNo();\n\n        me.clkMn5_emmap();\n        me.clkMn5_emmapNo();\n        me.clickApplyemmap();\n        me.clkMn5_emmapwireframeYes();\n        me.clkMn5_emmapwireframeNo();\n\n        me.clkMn6_assemblyYes();\n        me.clkMn6_assemblyNo();\n        me.clkMn6_addlabelResidues();\n        me.clkMn6_addlabelChains();\n        me.clkMn6_addlabelTermini();\n        me.clkMn6_addlabelYes();\n        me.clkMn6_addlabelSelection();\n        me.clkMn2_saveselection();\n        me.clkMn6_addlabelNo();\n        me.clkMn6_distanceYes();\n        me.clkmn1_stabilizerOne();\n        me.clkmn1_stabilizerRmOne();\n        me.clkmn1_thicknessSet();\n        me.clkmn5_setThickness();\n        me.clkmn1_thicknessReset();\n        me.clkMn6_distanceNo();\n        me.clkMn2_selectedcenter();\n        me.clkMn6_center();\n        me.clkMn6_resetOrientation();\n        me.clkMn6_chemicalbindingshow();\n        me.clkMn6_chemicalbindinghide();\n        me.clkMn6_rotateleft();\n        me.clkMn6_rotateright();\n        me.clkMn6_rotateup();\n        me.clkMn6_rotatedown();\n        me.clkMn6_cameraPers();\n        me.clkMn6_cameraOrth();\n        me.clkMn6_bkgdBlack();\n        me.clkMn6_bkgdGrey();\n        me.clkMn6_bkgdWhite();\n        me.clkMn6_bkgdTransparent();\n        me.clkMn6_showfogYes();\n        me.clkMn6_showfogNo();\n        me.clkMn6_showslabYes();\n        me.clkMn6_showslabNo();\n        me.clkMn6_showaxisYes();\n        me.clkMn6_showaxisNo();\n        me.clkMn6_hbondsYes();\n        me.clkMn6_hbondsNo();\n        me.clkmn1_stabilizerYes();\n        me.clkmn1_stabilizerNo();\n        me.clkMn6_ssbondsYes();\n        me.clkMn6_ssbondsNo();\n        me.clkMn6_clbondsYes();\n        me.clkMn6_clbondsNo();\n        me.clickCustomAtoms();\n        me.clickShow_selected();\n        me.clickShow_annotations();\n        me.clickShowallchains();\n//        me.clickShow_sequences();\n        me.clickShow_alignsequences();\n        me.clickShow_2ddgm();\n//        me.clickShow_selected_atom();\n        me.clickCommand_apply();\n        me.clickSearchSeq();\n        me.clickReload_pdb();\n        me.clickReload_align_refined();\n        me.clickReload_align_ori();\n        me.clickReload_mmtf();\n        me.clickReload_pdbfile();\n        me.clickReload_mol2file();\n        me.clickReload_sdffile();\n        me.clickReload_xyzfile();\n        me.clickReload_urlfile();\n        me.clickReload_mmciffile();\n        me.clickReload_mmcif();\n        me.clickReload_mmdb();\n        me.clickReload_blast_rep_id();\n        me.clickReload_gi();\n        me.clickReload_cid();\n        me.clickReload_pngimage();\n        me.clickReload_state();\n        me.clickReload_selectionfile();\n        me.clickApplycustomcolor();\n        me.clickApplypick_aroundsphere();\n        me.clickApplyhbonds();\n        me.clickApplymap2fofc();\n        me.clickApplymapfofc();\n//        me.clickApplystabilizer();\n        me.clickApplypick_labels();\n        me.clickApplyselection_labels();\n        me.clickApplypick_measuredistance();\n        me.clickApplypick_stabilizer();\n        me.clickApplypick_stabilizer_rm();\n        me.pickColor();\n        me.clickApply_thickness();\n        me.clickReset();\n        me.clickToggleHighlight();\n        me.pressCommandtext();\n//        me.clickFilter_ckbx_all();\n//        me.clickFilter();\n//        me.clickHighlight_3d_dgm();\n        me.clickSeqSaveSelection();\n        me.clickAlignSeqSaveSelection();\n        me.clickOutputSelection();\n        me.click2Ddgm();\n        me.bindMouseup();\n        me.bindMousedown();\n        me.windowResize();\n        me.setTabs();\n        me.clickAddTrack();\n        me.clickDefineHelix();\n        me.clickDefineSheet();\n        me.clickDefineCoil();\n        me.clickDeleteSets();\n        me.clickAddTrackButton();\n\n        me.expandShrink();\n        me.scrollAnno();\n        me.switchHighlightLevel();\n    }\n};\n\n/**\n * @author Jiyao Wang <wangjiy@ncbi.nlm.nih.gov> / https://github.com/ncbi/icn3d\n */\n\n/*! The following are shared by full_ui.js and simple_ui.js */\n\nif (typeof jQuery === 'undefined') { throw new Error('iCn3DUI requires jQuery') }\nif (typeof iCn3D === 'undefined') { throw new Error('iCn3DUI requires iCn3D') }\n\n/*\niCn3DUI.prototype.clickHighlight_3d_dgm = function() { var me = this;\n    $(\"#\" + me.pre + \"highlight_3d_dgm\").click(function (e) {\n       //e.preventDefault();\n       me.icn3d.removeHlObjects();\n\n       var ckbxes = document.getElementsByName(me.pre + \"filter_ckbx\");\n\n       var mols = \"\";\n\n       var molid2ssTmp = {}, molid2colorTmp = {};\n\n       me.icn3d.hAtoms = {};\n       for(var i = 0, il = ckbxes.length; i < il; ++i) { // skip the first \"all\" checkbox\n         if(ckbxes[i].checked && ckbxes[i].value != 'chemicals') {\n           var value = ckbxes[i].value;\n           var chain = ckbxes[i].getAttribute('chain');\n\n           if(me.icn3d.molid2ss.hasOwnProperty(value)) { // condensed view\n               molid2ssTmp[value] = me.icn3d.molid2ss[value];\n               molid2colorTmp[value] = me.icn3d.molid2color[value];\n           }\n           else { // all atom view\n               me.icn3d.hAtoms = me.icn3d.unionHash(me.icn3d.hAtoms, me.icn3d.chains[chain]);\n           }\n         }\n       }\n\n       me.icn3d.drawHelixBrick(molid2ssTmp, molid2colorTmp, me.icn3d.bHighlight); // condensed view\n       me.icn3d.addHlObjects(undefined, false); // all atom view\n\n       me.icn3d.render();\n    });\n};\n*/\n\niCn3DUI.prototype.rotStruc = function (direction, bInitial) { var me = this;\n    if(me.icn3d.bStopRotate) return false;\n    if(me.icn3d.rotateCount > me.icn3d.rotateCountMax) {\n        // back to the original orientation\n        me.icn3d.resetOrientation();\n\n        return false;\n    }\n    ++me.icn3d.rotateCount;\n\n    if(bInitial !== undefined && bInitial) {\n        if(direction === 'left') {\n          me.ROT_DIR = 'left';\n        }\n        else if(direction === 'right') {\n          me.ROT_DIR = 'right';\n        }\n        else if(direction === 'up') {\n          me.ROT_DIR = 'up';\n        }\n        else if(direction === 'down') {\n          me.ROT_DIR = 'down';\n        }\n        else {\n          return false;\n        }\n    }\n\n    if(direction === 'left' && me.ROT_DIR === 'left') {\n      me.icn3d.rotateLeft(1);\n    }\n    else if(direction === 'right' && me.ROT_DIR === 'right') {\n      me.icn3d.rotateRight(1);\n    }\n    else if(direction === 'up' && me.ROT_DIR === 'up') {\n      me.icn3d.rotateUp(1);\n    }\n    else if(direction === 'down' && me.ROT_DIR === 'down') {\n      me.icn3d.rotateDown(1);\n    }\n    else {\n      return false;\n    }\n\n    setTimeout(function(){ me.rotStruc(direction); }, 100);\n};\n\niCn3DUI.prototype.showTitle = function() { var me = this;\n    if(me.icn3d.molTitle !== undefined && me.icn3d.molTitle !== '') {\n        var title = me.icn3d.molTitle;\n\n        if(me.inputid === undefined) {\n            if(me.icn3d.molTitle.length > 40) title = me.icn3d.molTitle.substr(0, 40) + \"...\";\n\n            $(\"#\" + me.pre + \"title\").html(title);\n        }\n        else if(me.cfg.cid !== undefined) {\n            var url = me.getLinkToStructureSummary();\n\n            $(\"#\" + me.pre + \"title\").html(\"PubChem CID <a href='\" + url + \"' target='_blank' style='color:\" + me.GREYD + \"'>\" + me.inputid.toUpperCase() + \"</a>: \" + title);\n        }\n        else if(me.cfg.align !== undefined) {\n            $(\"#\" + me.pre + \"title\").html(title);\n        }\n        else {\n            var url = me.getLinkToStructureSummary();\n\n            if(me.icn3d.molTitle.length > 40) title = me.icn3d.molTitle.substr(0, 40) + \"...\";\n\n            //var asymmetricStr = (me.bAssemblyUseAsu) ? \" (Asymmetric Unit)\" : \"\";\n            var asymmetricStr = \"\";\n\n            $(\"#\" + me.pre + \"title\").html(\"PDB ID <a href='\" + url + \"' target='_blank' style='color:\" + me.GREYD + \"'>\" + me.inputid.toUpperCase() + \"</a>\" + asymmetricStr + \": \" + title);\n        }\n    }\n    else {\n        $(\"#\" + me.pre + \"title\").html(\"\");\n    }\n};\n\niCn3DUI.prototype.getLinkToStructureSummary = function(bLog) { var me = this;\n\n       var url = \"https://www.ncbi.nlm.nih.gov/structure/?term=\";\n\n       if(me.cfg.cid !== undefined) {\n           url = \"https://www.ncbi.nlm.nih.gov/pccompound/?term=\";\n       }\n       else {\n           if(me.inputid.indexOf(\",\") !== -1) {\n               url = \"https://www.ncbi.nlm.nih.gov/structure/?term=\";\n           }\n           else {\n               //url = \"https://www.ncbi.nlm.nih.gov/Structure/mmdb/mmdbsrv.cgi?uid=\";\n               url = \"https://www.ncbi.nlm.nih.gov/Structure/pdb/\";\n           }\n       }\n\n       if(me.inputid === undefined) {\n           url = \"https://www.ncbi.nlm.nih.gov/pccompound/?term=\" + me.molTitle;\n       }\n       else {\n           var idArray = me.inputid.split('_');\n\n           if(idArray.length === 1) {\n               url += me.inputid;\n               if(bLog !== undefined && bLog) me.setLogCmd(\"link to Structure Summary \" + me.inputid + \": \" + url, false);\n           }\n           else if(idArray.length === 2) {\n               url += idArray[0] + \" OR \" + idArray[1];\n               if(bLog !== undefined && bLog) me.setLogCmd(\"link to structures \" + idArray[0] + \" and \" + idArray[1] + \": \" + url, false);\n           }\n       }\n\n       return url;\n},\n\niCn3DUI.prototype.isIE = function() { var me = this;\n    //http://stackoverflow.com/questions/19999388/check-if-user-is-using-ie-with-jquery\n    var ua = window.navigator.userAgent;\n    var msie = ua.indexOf(\"MSIE \");\n\n    if (msie > 0 || !!navigator.userAgent.match(/Trident.*rv\\:11\\./))      // If Internet Explorer\n        return true;\n    else                 // If another browser, return 0\n        return false;\n};\n\niCn3DUI.prototype.passFloat32 = function( array, output ){ var me = this;\n    var n = array.length;\n    if( !output ) output = new Uint8Array( 4 * n );\n    var dv = me.getDataView( output );\n    for( var i = 0; i < n; ++i ){\n        dv.setFloat32( 4 * i, array[ i ], true); // litteEndian = true\n    };\n    return me.getUint8View( output );\n};\n\niCn3DUI.prototype.passInt8 = function( array, output ){ var me = this;\n    var n = array.length;\n    if( !output ) output = new Uint8Array( 1 * n );\n    var dv = me.getDataView( output );\n    for( var i = 0; i < n; ++i ){\n        dv.setInt8( 1 * i, array[ i ], true); // litteEndian = true\n    };\n    return me.getUint8View( output );\n};\n\niCn3DUI.prototype.passInt16 = function( array, output ){ var me = this;\n    var n = array.length;\n    if( !output ) output = new Uint8Array( 2 * n );\n    var dv = me.getDataView( output );\n    for( var i = 0; i < n; ++i ){\n        dv.setInt16( 2 * i, array[ i ], true); // litteEndian = true\n    };\n    return me.getUint8View( output );\n};\n\niCn3DUI.prototype.passInt32 = function( array, output ){ var me = this;\n    var n = array.length;\n    if( !output ) output = new Uint8Array( 4 * n );\n    var dv = me.getDataView( output );\n    for( var i = 0; i < n; ++i ){\n        dv.setInt32( 4 * i, array[ i ], true); // litteEndian = true\n    };\n    return me.getUint8View( output );\n};\n\n// ------------\n\niCn3DUI.prototype.getUint8View = function( typedArray ){ var me = this;\n    return me.getView( Uint8Array, typedArray );\n};\n\niCn3DUI.prototype.getDataView = function( typedArray ){ var me = this;\n    return me.getView( DataView, typedArray );\n};\n\niCn3DUI.prototype.getView = function( ctor, typedArray, elemSize ){ var me = this;\n    return typedArray ? new ctor(\n        typedArray.buffer,\n        typedArray.byteOffset,\n        typedArray.byteLength / ( elemSize || 1 )\n    ) : undefined;\n};\n\niCn3DUI.prototype.getBlobFromBufferAndText = function(arrayBuffer, text) { var me = this;\n    //var start = \"data:image/png;base64,\";\n\n    //var strArray0 = new Uint8Array(start.length);\n    //for(var i = 0; i < start.length; ++i) {\n    //   strArray0[i] = me.passInt8([start.charCodeAt(i)])[0];\n    //}\n\n    var strArray = new Uint8Array(arrayBuffer);\n\n    var strArray2 = new Uint8Array(text.length);\n    for(var i = 0; i < text.length; ++i) {\n       strArray2[i] = me.passInt8([text.charCodeAt(i)])[0];\n    }\n\n    var blobArray = []; // hold blobs\n\n    //blobArray.push(new Blob([strArray0],{ type: \"application/octet-stream\"}));\n    blobArray.push(new Blob([strArray],{ type: \"application/octet-stream\"}));\n    blobArray.push(new Blob([strArray2],{ type: \"application/octet-stream\"}));\n\n    //var blob = new Blob(blobArray,{ type: \"application/octet-stream\"});\n    var blob = new Blob(blobArray,{ type: \"image/png\"});\n\n    return blob;\n};\n\niCn3DUI.prototype.getTransformationStr = function(transformation) { var me = this;\n    var transformation2 = {\"factor\": 1.0, \"mouseChange\": {\"x\": 0, \"y\": 0}, \"quaternion\": {\"_x\": 0, \"_y\": 0, \"_z\": 0, \"_w\": 1} };\n    transformation2.factor = parseFloat(transformation.factor).toPrecision(5);\n    transformation2.mouseChange.x = parseFloat(transformation.mouseChange.x).toPrecision(5);\n    transformation2.mouseChange.y = parseFloat(transformation.mouseChange.y).toPrecision(5);\n    transformation2.quaternion._x = parseFloat(transformation.quaternion._x).toPrecision(5);\n    transformation2.quaternion._y = parseFloat(transformation.quaternion._y).toPrecision(5);\n    transformation2.quaternion._z = parseFloat(transformation.quaternion._z).toPrecision(5);\n    transformation2.quaternion._w = parseFloat(transformation.quaternion._w).toPrecision(5);\n\n    if(transformation2.factor == '1.0000') transformation2.factor = 1;\n    if(transformation2.mouseChange.x == '0.0000') transformation2.mouseChange.x = 0;\n    if(transformation2.mouseChange.y == '0.0000') transformation2.mouseChange.y = 0;\n\n    if(transformation2.quaternion._x == '0.0000') transformation2.quaternion._x = 0;\n    if(transformation2.quaternion._y == '0.0000') transformation2.quaternion._y = 0;\n    if(transformation2.quaternion._z == '0.0000') transformation2.quaternion._z = 0;\n    if(transformation2.quaternion._w == '1.0000') transformation2.quaternion._w = 1;\n\n    return JSON.stringify(transformation2);\n};\n\n/*\niCn3DUI.prototype.createLinkForBlob = function(blob, filename) { var me = this;\n    var link = document.createElement('a');\n    link.href = window.URL.createObjectURL(blob);\n    link.setAttribute('download', filename);\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n};\n*/\n\niCn3DUI.prototype.saveFile = function(filename, type, text) { var me = this;\n    //Save file\n    var blob;\n\n    if(type === 'command') {\n        var dataStr = '';\n        for(var i = 0, il = me.icn3d.commands.length; i < il; ++i) {\n            var command = me.icn3d.commands[i].trim();\n            if(i == il - 1) {\n               var command_tf = command.split('|||');\n\n               var transformation = {};\n               transformation.factor = me.icn3d._zoomFactor;\n               transformation.mouseChange = me.icn3d.mouseChange;\n               transformation.quaternion = me.icn3d.quaternion;\n\n               command = command_tf[0] + '|||' + me.getTransformationStr(transformation);\n            }\n\n            dataStr += command + '\\n';\n        }\n        var data = decodeURIComponent(dataStr);\n\n        blob = new Blob([data],{ type: \"text;charset=utf-8;\"});\n    }\n    else if(type === 'png') {\n        me.icn3d.render();\n\n        var bAddURL = true;\n        if (!window.File || !window.FileReader || !window.FileList || !window.Blob) {\n            bAddURL = false;\n        }\n\n        if(me.isIE()) {\n            blob = me.icn3d.renderer.domElement.msToBlob();\n\n            if(bAddURL) {\n                var reader = new FileReader();\n                reader.onload = function (e) {\n                    var arrayBuffer = e.target.result; // or = reader.result;\n\n                    var url = me.shareLinkUrl();\n\n                    var text = \"\";\n                    if(me.bInputfile) {\n                        text += \"\\nStart of type file======\\n\";\n                        text += me.InputfileType + \"\\n\";\n                        text += \"End of type file======\\n\";\n\n                        text += \"Start of data file======\\n\";\n                        text += me.InputfileData;\n                        text += \"End of data file======\\n\";\n\n                        text += \"Start of state file======\\n\";\n                        text += url;\n                        text += \"End of state file======\\n\";\n                    }\n                    else {\n                        text += \"\\nShare Link: \" + url;\n                    }\n\n                    blob = me.getBlobFromBufferAndText(arrayBuffer, text);\n\n                    //if(window.navigator.msSaveBlob) navigator.msSaveBlob(blob, filename);\n                    saveAs(blob, filename);\n\n                    return;\n                };\n\n                reader.readAsArrayBuffer(blob);\n            }\n        }\n        else {\n            me.icn3d.renderer.domElement.toBlob(function(data) {\n                if(bAddURL) {\n                    var reader = new FileReader();\n                    reader.onload = function (e) {\n                        var arrayBuffer = e.target.result; // or = reader.result;\n\n                        var url = me.shareLinkUrl();\n\n                        var text = \"\";\n                        if(me.bInputfile) {\n                            text += \"\\nStart of type file======\\n\";\n                            text += me.InputfileType + \"\\n\";\n                            text += \"End of type file======\\n\";\n\n                            text += \"Start of data file======\\n\";\n                            text += me.InputfileData;\n                            text += \"End of data file======\\n\";\n\n                            text += \"Start of state file======\\n\";\n                            text += url;\n                            text += \"End of state file======\\n\";\n                        }\n                        else {\n                            text += \"\\nShare Link: \" + url;\n                        }\n                        blob = me.getBlobFromBufferAndText(arrayBuffer, text);\n\n                        //me.createLinkForBlob(blob, filename);\n                        saveAs(blob, filename);\n\n                        return;\n                    };\n\n                    reader.readAsArrayBuffer(data);\n                }\n                else {\n                    blob = data;\n\n                    //me.createLinkForBlob(blob, filename);\n                    saveAs(blob, filename);\n\n                    return;\n                }\n            });\n        }\n    }\n    else if(type === 'html') {\n        var dataStr = text;\n        var data = decodeURIComponent(dataStr);\n\n        blob = new Blob([data],{ type: \"text/html;charset=utf-8;\"});\n    }\n    else if(type === 'text') {\n        //var dataStr = text;\n        //var data = decodeURIComponent(dataStr);\n\n        //blob = new Blob([data],{ type: \"text;charset=utf-8;\"});\n\n        var data = text; // here text is an array of text\n\n        blob = new Blob(data,{ type: \"text;charset=utf-8;\"});\n    }\n    else if(type === 'binary') {\n        var data = text; // here text is an array of blobs\n\n        //blob = new Blob([data],{ type: \"application/octet-stream\"});\n        blob = new Blob(data,{ type: \"application/octet-stream\"});\n    }\n\n/*\n    //https://github.com/mholt/PapaParse/issues/175\n    //IE11 & Edge\n    if(me.isIE() && window.navigator.msSaveBlob){\n        navigator.msSaveBlob(blob, filename);\n    } else {\n        //In FF link must be added to DOM to be clicked\n        var link = document.createElement('a');\n        link.href = window.URL.createObjectURL(blob);\n        link.setAttribute('download', filename);\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n    }\n*/\n\n    if(type !== 'png') {\n        //https://github.com/eligrey/FileSaver.js/\n        saveAs(blob, filename);\n    }\n};\n\n\niCn3DUI.prototype.isMobile = function() {\n    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n};\n\niCn3DUI.prototype.isMac = function() {\n    return /Mac/i.test(navigator.userAgent);\n};\n\niCn3DUI.prototype.isSessionStorageSupported = function() {\n  var testKey = 'test';\n  try {\n    sessionStorage.setItem(testKey, '1');\n    sessionStorage.removeItem(testKey);\n    return true;\n  } catch (error) {\n    return false;\n  }\n};\n\niCn3DUI.prototype.resizeCanvas = function (width, height, bForceResize, bDraw) { var me = this;\n  if( (bForceResize !== undefined && bForceResize) || (me.cfg.resize !== undefined && me.cfg.resize) ) {\n    //var heightTmp = parseInt(height) - me.EXTRAHEIGHT;\n    var heightTmp = height;\n    $(\"#\" + me.pre + \"canvas\").width(width).height(heightTmp);\n\n    $(\"#\" + me.pre + \"viewer\").width(width).height(height);\n\n    me.icn3d.setWidthHeight(width, heightTmp);\n\n    if(bDraw === undefined || bDraw) {\n        me.icn3d.draw();\n    }\n  }\n};\n\niCn3DUI.prototype.handleContextLost = function() { var me = this;\n    //https://www.khronos.org/webgl/wiki/HandlingContextLost\n    // 1 add a lost context handler and tell it to prevent the default behavior\n\n    var canvas = $(\"#\" + me.pre + \"canvas\")[0];\n    canvas.addEventListener(\"webglcontextlost\", function(event) {\n        event.preventDefault();\n    }, false);\n\n    // 2 re-setup all your WebGL state and re-create all your WebGL resources when the context is restored.\n    canvas.addEventListener(\"webglcontextrestored\", function(event) {\n        // IE11 error: WebGL content is taking too long to render on your GPU. Temporarily switching to software rendering.\n        console.log(\"WebGL context was lost. Reset WebGLRenderer and launch iCn3D again.\");\n\n        me.icn3d.renderer = new THREE.WebGLRenderer({\n            canvas: me.icn3d.container.get(0),\n            antialias: true,\n            preserveDrawingBuffer: true,\n            alpha: true\n        });\n\n        me.icn3d.draw();\n\n    }, false);\n};\n\niCn3DUI.prototype.windowResize = function() { var me = this;\n    if(me.cfg.resize !== undefined && me.cfg.resize && !me.isMobile() ) {\n        $(window).resize(function() {\n            me.WIDTH = $( window ).width();\n            me.HEIGHT = $( window ).height();\n\n            var width = me.WIDTH - me.LESSWIDTH_RESIZE;\n            var height = me.HEIGHT - me.LESSHEIGHT - me.EXTRAHEIGHT;\n\n            if(me.icn3d !== undefined) me.resizeCanvas(width, height);\n        });\n    }\n};\n\niCn3DUI.prototype.setViewerWidthHeight = function() { var me = this;\n    me.WIDTH = $( window ).width();\n    me.HEIGHT = $( window ).height();\n\n    var viewer_width = $( \"#\" + me.pre + \"viewer\" ).width();\n    var viewer_height = $( \"#\" + me.pre + \"viewer\" ).height();\n\n    if(viewer_width && me.WIDTH > viewer_width) me.WIDTH = viewer_width;\n    if(viewer_height && me.HEIGHT > viewer_height) me.HEIGHT = viewer_height;\n\n    if(me.isMac() && me.isMobile()) {\n      if(me.WIDTH < me.MENU_WIDTH) me.WIDTH = me.MENU_WIDTH;\n\n      me.HEIGHT = $( window ).height() / $( window ).width() * me.MENU_WIDTH;\n    }\n\n    if(me.cfg.width.toString().indexOf('%') === -1) {\n        me.WIDTH = parseInt(me.cfg.width) + me.LESSWIDTH;\n    }\n\n    if(me.cfg.height.toString().indexOf('%') === -1) {\n        me.HEIGHT = parseInt(me.cfg.height) + me.EXTRAHEIGHT + me.LESSHEIGHT;\n    }\n};\n\niCn3DUI.prototype.shareLinkUrl = function() { var me = this;\n       var url = \"https://www.ncbi.nlm.nih.gov/Structure/icn3d/full.html?\";\n\n       var pos = -1;\n       if(me.cfg.inpara !== undefined) pos = me.cfg.inpara.indexOf('&command=');\n       var inparaWithoutCommand = (pos !== -1 ) ? me.cfg.inpara.substr(0, pos) : me.cfg.inpara;\n\n       var start = 0;\n       if(inparaWithoutCommand !== undefined) {\n         url += inparaWithoutCommand.substr(1) + '&command=';\n         start = 1;\n       }\n       else {\n         url += 'command=';\n         start = 0;\n       }\n\n       if(me.bInputfile) start = 0;\n\n       var transformation = {};\n       transformation.factor = me.icn3d._zoomFactor;\n       transformation.mouseChange = me.icn3d.mouseChange;\n       transformation.quaternion = me.icn3d.quaternion;\n\n       var bCommands = false;\n       var statefile = \"\";\n       for(var i = start, il = me.icn3d.commands.length; i < il; ++i) {\n           bCommands = true;\n\n           var command_tf = me.icn3d.commands[i].split('|||');\n           var commandStr = command_tf[0].trim();\n\n           if(i === il - 1) {\n               //var transformation = (command_tf.length > 1) ? ('|||' + command_tf[1]) : '';\n               if(i !== 1 && i !== 0) {\n                   url += '; ';\n               }\n               url += commandStr + '|||' + me.getTransformationStr(transformation);\n           }\n           else if(i === 1) {\n               url += commandStr;\n           }\n           else if(i !== 1 && i !== il - 1) {\n               url += '; ' + commandStr;\n           }\n\n           statefile += me.icn3d.commands[i] + \"\\n\";\n       }\n\n       // remove \"&command=\"\n       if(!bCommands) {\n           url = url.substr(0, url.length - 9);\n       }\n\n       if(me.bInputfile) url = statefile;\n\n       return url;\n};\n\niCn3DUI.prototype.addLabel = function (text, x, y, z, size, color, background, type) { var me = this;\n    var label = {}; // Each label contains 'position', 'text', 'color', 'background'\n\n    if(size === '0' || size === '' || size === 'undefined') size = undefined;\n    if(color === '0' || color === '' || color === 'undefined') color = undefined;\n    if(background === '0' || background === '' || background === 'undefined') background = undefined;\n\n    var position = new THREE.Vector3();\n    position.x = x;\n    position.y = y;\n    position.z = z;\n\n    label.position = position;\n\n    label.text = text;\n    label.size = size;\n    label.color = color;\n    label.background = background;\n\n    if(me.icn3d.labels[type] === undefined) me.icn3d.labels[type] = [];\n\n    if(type !== undefined) {\n        me.icn3d.labels[type].push(label);\n    }\n    else {\n        me.icn3d.labels['custom'].push(label);\n    }\n\n    me.icn3d.removeHlObjects();\n\n    //me.icn3d.draw();\n};\n\n/**\n * @author Jiyao Wang <wangjiy@ncbi.nlm.nih.gov> / https://github.com/ncbi/icn3d\n */\n\niCn3DUI.prototype.showLoading = function () { var me = this;\n      if($(\"#\" + me.pre + \"wait\")) $(\"#\" + me.pre + \"wait\").show();\n      if($(\"#\" + me.pre + \"canvas\")) $(\"#\" + me.pre + \"canvas\").hide();\n      if($(\"#\" + me.pre + \"cmdlog\")) $(\"#\" + me.pre + \"cmdlog\").hide();\n};\n\niCn3DUI.prototype.hideLoading = function () { var me = this;\n    if(me.bCommandLoad === undefined || !me.bCommandLoad) {\n      if($(\"#\" + me.pre + \"wait\")) $(\"#\" + me.pre + \"wait\").hide();\n      if($(\"#\" + me.pre + \"canvas\")) $(\"#\" + me.pre + \"canvas\").show();\n      if($(\"#\" + me.pre + \"cmdlog\")) $(\"#\" + me.pre + \"cmdlog\").show();\n    }\n};\n\niCn3DUI.prototype.downloadMmcif = function (mmcifid) { var me = this;\n   var url, dataType;\n\n   url = \"https://files.rcsb.org/view/\" + mmcifid + \".cif\";\n\n   dataType = \"text\";\n\n   me.icn3d.bCid = undefined;\n\n   $.ajax({\n      url: url,\n      dataType: dataType,\n      cache: true,\n      tryCount : 0,\n      retryLimit : 1,\n      beforeSend: function() {\n          me.showLoading();\n      },\n      complete: function() {\n          me.hideLoading();\n      },\n      success: function(data) {\n           url = \"https://www.ncbi.nlm.nih.gov/Structure/mmcifparser/mmcifparser.cgi\";\n           $.ajax({\n              url: url,\n              type: 'POST',\n              data : {'mmciffile': data},\n              dataType: 'jsonp',\n              cache: true,\n              tryCount : 0,\n              retryLimit : 1,\n              beforeSend: function() {\n                  me.showLoading();\n              },\n              complete: function() {\n                  me.hideLoading();\n              },\n              success: function(data) {\n                  me.loadMmcifData(data);\n              },\n              error : function(xhr, textStatus, errorThrown ) {\n                this.tryCount++;\n                if (this.tryCount <= this.retryLimit) {\n                    //try again\n                    $.ajax(this);\n                    return;\n                }\n                return;\n              }\n            });\n      },\n      error : function(xhr, textStatus, errorThrown ) {\n        this.tryCount++;\n        if (this.tryCount <= this.retryLimit) {\n            //try again\n            $.ajax(this);\n            return;\n        }\n        return;\n      }\n    });\n};\n\niCn3DUI.prototype.downloadMmcifSymmetry = function (mmcifid, type) { var me = this;\n  // chain functions together\n  me.deferredSymmetry = $.Deferred(function() {\n      me.downloadMmcifSymmetryBase(mmcifid, type);\n  }); // end of me.deferred = $.Deferred(function() {\n\n  return me.deferredSymmetry.promise();\n};\n\niCn3DUI.prototype.downloadMmcifSymmetryBase = function (mmcifid, type) { var me = this;\n   var url, dataType;\n\n   if(me.isMac()) { // safari has a problem in getting data from https://files.rcsb.org/header/\n       url = \"https://files.rcsb.org/view/\" + mmcifid + \".cif\";\n   }\n   else {\n       url = \"https://files.rcsb.org/header/\" + mmcifid + \".cif\";\n   }\n\n   dataType = \"text\";\n\n   me.icn3d.bCid = undefined;\n\n   $.ajax({\n      url: url,\n      dataType: dataType,\n      cache: true,\n      tryCount : 0,\n      retryLimit : 1,\n      success: function(data) {\n           url = \"https://www.ncbi.nlm.nih.gov/Structure/mmcifparser/mmcifparser.cgi\";\n\n           $.ajax({\n              url: url,\n              type: 'POST',\n              data : {'mmcifheader': data},\n              dataType: 'jsonp',\n              cache: true,\n              tryCount : 0,\n              retryLimit : 1,\n              success: function(data) {\n                  if(data.emd !== undefined) me.icn3d.emd = data.emd;\n\n                  if(me.bAssemblyUseAsu) me.loadMmcifSymmetry(data);\n\n                  if(type === 'mmtfid' && data.missingseq !== undefined) {\n                        // adjust missing residues\n                        var maxMissingResi = 0, prevMissingChain = '';\n                        var chainMissingResidueArray = {};\n                        for(var i = 0, il = data.missingseq.length; i < il; ++i) {\n\n                            var resn = data.missingseq[i].resn;\n                            var chain = data.missingseq[i].chain;\n                            var resi = data.missingseq[i].resi;\n\n                            var chainNum = mmcifid + '_' + chain;\n\n                            if(chainMissingResidueArray[chainNum] === undefined) chainMissingResidueArray[chainNum] = [];\n                            var resObject = {};\n                            resObject.resi = resi;\n                            resObject.name = me.icn3d.residueName2Abbr(resn).toLowerCase();\n\n                            if(chain != prevMissingChain) {\n                                maxMissingResi = 0;\n                            }\n\n                            // not all listed residues are considered missing, e.g., PDB ID 4OR2, only the firts four residues are considered missing\n                            if(!isNaN(resi) && (prevMissingChain == '' || (chain != prevMissingChain) || (chain == prevMissingChain && resi > maxMissingResi)) ) {\n                                chainMissingResidueArray[chainNum].push(resObject);\n\n                                maxMissingResi = resi;\n                                prevMissingChain = chain;\n                            }\n                        }\n\n                        me.icn3d.adjustSeq(chainMissingResidueArray);\n                  }\n\n                  if(me.deferredSymmetry !== undefined) me.deferredSymmetry.resolve();\n              },\n              error : function(xhr, textStatus, errorThrown ) {\n                this.tryCount++;\n                if (this.tryCount <= this.retryLimit) {\n                    //try again\n                    $.ajax(this);\n                    return;\n                }\n\n                if(me.deferredSymmetry !== undefined) me.deferredSymmetry.resolve();\n                return;\n              }\n            });\n      },\n      error : function(xhr, textStatus, errorThrown ) {\n        this.tryCount++;\n        if (this.tryCount <= this.retryLimit) {\n            //try again\n            $.ajax(this);\n            return;\n        }\n\n        return;\n      }\n    });\n};\n\niCn3DUI.prototype.loadMmcifData = function(data) { var me = this;\n    if (data.atoms !== undefined) {\n        me.icn3d.init();\n\n        if(data.emd !== undefined) me.icn3d.emd = data.emd;\n\n        if(me.icn3d.emd !== undefined) {\n          $(\"#\" + me.pre + \"mapWrapper1\").hide();\n          $(\"#\" + me.pre + \"mapWrapper2\").hide();\n          $(\"#\" + me.pre + \"mapWrapper3\").hide();\n        }\n        else {\n          $(\"#\" + me.pre + \"emmapWrapper1\").hide();\n          $(\"#\" + me.pre + \"emmapWrapper2\").hide();\n          $(\"#\" + me.pre + \"emmapWrapper3\").hide();\n        }\n\n        me.loadAtomDataIn(data, data.mmcif, 'mmcifid');\n\n        if(me.cfg.align === undefined && Object.keys(me.icn3d.structures).length == 1) {\n            $(\"#\" + me.pre + \"alternateWrapper\").hide();\n        }\n\n        // load assembly info\n        var assembly = (data.assembly !== undefined) ? data.assembly : [];\n        for(var i = 0, il = assembly.length; i < il; ++i) {\n          if (me.icn3d.biomtMatrices[i] == undefined) me.icn3d.biomtMatrices[i] = new THREE.Matrix4().identity();\n\n          for(var j = 0, jl = assembly[i].length; j < jl; ++j) {\n            me.icn3d.biomtMatrices[i].elements[j] = assembly[i][j];\n          }\n        }\n\n        if(me.icn3d.biomtMatrices !== undefined && me.icn3d.biomtMatrices.length > 1) {\n            $(\"#\" + me.pre + \"assemblyWrapper\").show();\n\n            me.icn3d.asuCnt = me.icn3d.biomtMatrices.length;\n        }\n        else {\n            $(\"#\" + me.pre + \"assemblyWrapper\").hide();\n        }\n\n        me.icn3d.setAtomStyleByOptions(me.opts);\n        me.icn3d.setColorByOptions(me.opts, me.icn3d.atoms);\n\n        me.renderStructure();\n\n        if(me.cfg.rotate !== undefined) me.rotStruc(me.cfg.rotate, true);\n\n        //if(me.cfg.showseq !== undefined && me.cfg.showseq) me.openDialog(me.pre + 'dl_selectresidues', 'Select residues in sequences');\n\n        if(me.deferred !== undefined) me.deferred.resolve(); if(me.deferred2 !== undefined) me.deferred2.resolve();\n    }\n    else {\n        alert('invalid atoms data.');\n        return false;\n    }\n};\n\niCn3DUI.prototype.loadMmcifSymmetry = function(data) { var me = this;\n    // load assembly info\n    var assembly = data.assembly;\n    var pmatrix = data.pmatrix;\n\n    for(var i = 0, il = assembly.length; i < il; ++i) {\n      var mat4 = new THREE.Matrix4();\n      mat4.fromArray(assembly[i]);\n\n      me.icn3d.biomtMatrices[i] = mat4;\n    }\n\n    me.icn3d.asuCnt = me.icn3d.biomtMatrices.length;\n};\n\niCn3DUI.prototype.parseMmdbData = function (data) { var me = this;\n        if(data.atoms === undefined && data.molid2rescount === undefined) {\n            alert('invalid MMDB data.');\n            return false;\n        }\n\n        me.icn3d.init();\n\n        // used in download2Ddgm()\n        me.interactionData = {\"moleculeInfor\": data.moleculeInfor, \"intrac\": data.intrac, \"intracResidues\": data.intracResidues};\n\n        me.mmdb_data = data;\n\n        var id = (data.pdbId !== undefined) ? data.pdbId : data.mmdbId;\n        me.inputid = id;\n\n        // get molid2color = {}, chain2molid = {}, molid2chain = {};\n        var labelsize = 40;\n\n        //var molid2rescount = data.molid2rescount;\n        var molid2rescount = data.moleculeInfor;\n        var molid2color = {}, chain2molid = {}, molid2chain = {};\n        me.icn3d.chainsColor = {};\n        me.icn3d.chainsGene = {};\n\n        var html = \"<table width='100%'><tr><td></td><th>#</th><th align='center'>Chain</th><th align='center'>Residue Count</th></tr>\";\n\n        var index = 1;\n        var chainNameHash = {};\n        for(var i in molid2rescount) {\n          var color = '#' + ( '000000' + molid2rescount[i].color.toString( 16 ) ).slice( - 6 );\n          var chainName = molid2rescount[i].chain.trim();\n          if(chainNameHash[chainName] === undefined) {\n              chainNameHash[chainName] = 1;\n          }\n          else {\n              ++chainNameHash[chainName];\n          }\n\n          var chainNameFinal = (chainNameHash[chainName] === 1) ? chainName : chainName + chainNameHash[chainName].toString();\n          var chain = id + '_' + chainNameFinal;\n          html += \"<tr style='color:\" + color + \"'><td><input type='checkbox' name='\" + me.pre + \"filter_ckbx' value='\" + i + \"' chain='\" + chain + \"'/></td><td align='center'>\" + index + \"</td><td align='center'>\" + chainNameFinal + \"</td><td align='center'>\" + molid2rescount[i].resCount + \"</td></tr>\";\n\n          molid2color[i] = color;\n          chain2molid[chain] = i;\n          molid2chain[i] = chain;\n\n          me.icn3d.chainsColor[chain] = new THREE.Color(color);\n\n          me.icn3d.chainsGene[chain] = {'geneId': molid2rescount[i].geneId, 'geneSymbol': molid2rescount[i].geneSymbol, 'geneDesc': molid2rescount[i].geneDesc};\n          ++index;\n        }\n\n        if(me.icn3d.chemicals !== undefined && Object.keys(me.icn3d.chemicals).length > 0) {\n          html += \"<tr><td><input type='checkbox' name='\" + me.pre + \"filter_ckbx' value='chemicals'/></td><td align='center'>\" + index + \"</td><td align='center'>Chemicals</td><td align='center'>\" + Object.keys(me.icn3d.chemicals).length + \" atoms</td></tr>\";\n        }\n\n        html += \"</table>\";\n\n        me.icn3d.molid2color = molid2color;\n        me.icn3d.chain2molid = chain2molid;\n        me.icn3d.molid2chain = molid2chain;\n\n        //if ((me.cfg.inpara !== undefined && me.cfg.inpara.indexOf('mols=') != -1) || (data.atomCount <= maxatomcnt && data.atoms !== undefined) ) {\n        // small structure with all atoms\n        // show surface options\n        $(\"#\" + me.pre + \"accordion5\").show();\n\n        me.loadAtomDataIn(data, id, 'mmdbid');\n\n        // \"asuAtomCount\" is defined when: 1) atom count is over the threshold 2) buidx=1 3) asu atom count is smaller than biological unit atom count\n        me.bAssemblyUseAsu = (data.asuAtomCount !== undefined) ? true : false;\n\n/*\n        if(me.bAssemblyUseAsu) { // set up symmetric matrices\n            $(\"#\" + me.pre + \"assemblyWrapper\").show();\n            me.icn3d.bAssembly = true;\n\n            //me.downloadMmcifSymmetry(id);\n\n            $.when(me.downloadMmcifSymmetry(id)).then(function() {\n                me.downloadMmdbPart2();\n            });\n        }\n        else {\n            $(\"#\" + me.pre + \"assemblyWrapper\").hide();\n            me.icn3d.bAssembly = false;\n\n            me.downloadMmdbPart2();\n        }\n*/\n\n        $.when(me.downloadMmcifSymmetry(id)).then(function() {\n            me.downloadMmdbPart2();\n        });\n};\n\niCn3DUI.prototype.downloadMmdb = function (mmdbid, bGi) { var me = this;\n   //var maxatomcnt = (me.cfg.maxatomcnt === undefined) ? 50000 : me.cfg.maxatomcnt;\n   //var maxatomcnt = 100000; // asymmetric unit (buidx=0) will be returned if above this threshold\n\n   var url;\n/*\n   if(bGi !== undefined && bGi) {\n       url = \"https://www.ncbi.nlm.nih.gov/Structure/mmdb/mmdb_strview.cgi?program=w3d&seq=1&b&complexity=3&gi=\" + mmdbid + \"&ath=\" + maxatomcnt;\n   }\n   else {\n       url = \"https://www.ncbi.nlm.nih.gov/Structure/mmdb/mmdb_strview.cgi?program=w3d&seq=1&b&complexity=3&uid=\" + mmdbid + \"&ath=\" + maxatomcnt;\n   }\n*/\n\n   // b: b-factor, s: water, ft: pdbsite\n   //&ft=1\n   if(bGi !== undefined && bGi) {\n       url = \"https://www.ncbi.nlm.nih.gov/Structure/mmdb/mmdb_strview.cgi?v=2&program=icn3d&b=1&s=1&ft=1&gi=\" + mmdbid;\n   }\n   else {\n       url = \"https://www.ncbi.nlm.nih.gov/Structure/mmdb/mmdb_strview.cgi?v=2&program=icn3d&b=1&s=1&ft=1&uid=\" + mmdbid;\n   }\n\n   me.icn3d.bCid = undefined;\n\n   if(me.cfg.inpara !== undefined) {\n     url += me.cfg.inpara;\n   }\n\n   if(me.chainids2resids === undefined) me.chainids2resids = {}; // me.chainids2resids[chainid1][chainid2] = [resid, resid]\n\n   $.ajax({\n      url: url,\n      dataType: 'jsonp',\n      cache: true,\n      tryCount : 0,\n      retryLimit : 1,\n      beforeSend: function() {\n          me.showLoading();\n      },\n      complete: function() {\n          me.hideLoading();\n      },\n      success: function(data) {\n        var bCalphaOnly = me.icn3d.isCalphaPhosOnly(data.atoms); //, 'CA');\n\n        if(bCalphaOnly || data.atomCount <= me.icn3d.maxatomcnt) {\n            me.parseMmdbData(data);\n        }\n        else {\n            data = null;\n\n            $.ajax({\n              url: url + '&complexity=2', // alpha carbons\n              dataType: 'jsonp',\n              cache: true,\n              tryCount : 0,\n              retryLimit : 1,\n              beforeSend: function() {\n                  me.showLoading();\n              },\n              complete: function() {\n                  me.hideLoading();\n              },\n              success: function(data2) {\n                  me.parseMmdbData(data2);\n              },\n              error : function(xhr, textStatus, errorThrown ) {\n                this.tryCount++;\n                if (this.tryCount <= this.retryLimit) {\n                    //try again\n                    $.ajax(this);\n                    return;\n                }\n\n                if(bGi) {\n                  alert(\"This gi \" + mmdbid + \" has no corresponding 3D structure...\");\n                }\n                else {\n                  alert(\"This mmdbid \" + mmdbid + \" with the parameters \" + me.cfg.inpara\n                    + \" may not have 3D structure data. Please visit the summary page for details: https://www.ncbi.nlm.nih.gov/Structure/pdb/\" + mmdbid);\n                }\n\n                return;\n              } // success\n            }); // ajax\n        }\n      },\n      error : function(xhr, textStatus, errorThrown ) {\n        this.tryCount++;\n        if (this.tryCount <= this.retryLimit) {\n            //try again\n            $.ajax(this);\n            return;\n        }\n\n        if(bGi) {\n          alert(\"This gi \" + mmdbid + \" has no corresponding 3D structure...\");\n        }\n        else {\n          alert(\"This mmdbid \" + mmdbid + \" with the parameters \" + me.cfg.inpara\n            + \" may not have 3D structure data. Please visit the summary page for details: https://www.ncbi.nlm.nih.gov/Structure/pdb/\" + mmdbid);\n        }\n\n        return;\n      } // success\n    }); // ajax\n};\n\niCn3DUI.prototype.downloadMmdbPart2 = function () { var me = this;\n    if(me.bAssemblyUseAsu) { // set up symmetric matrices\n        $(\"#\" + me.pre + \"assemblyWrapper\").show();\n        me.icn3d.bAssembly = true;\n    }\n    else {\n        $(\"#\" + me.pre + \"assemblyWrapper\").hide();\n        me.icn3d.bAssembly = false;\n    }\n\n    if(me.icn3d.emd !== undefined) {\n      $(\"#\" + me.pre + \"mapWrapper1\").hide();\n      $(\"#\" + me.pre + \"mapWrapper2\").hide();\n      $(\"#\" + me.pre + \"mapWrapper3\").hide();\n    }\n    else {\n      $(\"#\" + me.pre + \"emmapWrapper1\").hide();\n      $(\"#\" + me.pre + \"emmapWrapper2\").hide();\n      $(\"#\" + me.pre + \"emmapWrapper3\").hide();\n    }\n\n    me.icn3d.setAtomStyleByOptions(me.opts);\n    // use the original color from cgi output\n    if(me.cfg.blast_rep_id !== undefined) {\n      me.icn3d.setColorByOptions(me.opts, me.icn3d.atoms);\n    }\n    else {\n      me.icn3d.setColorByOptions(me.opts, me.icn3d.atoms, true);\n    }\n\n    me.renderStructure();\n    if(me.cfg.rotate !== undefined) me.rotStruc(me.cfg.rotate, true);\n\n    me.html2ddgm = '';\n    if(me.cfg.show2d !== undefined && me.cfg.show2d) {\n        me.openDialog(me.pre + 'dl_2ddgm', 'Interactions');\n        if(me.bFullUi) me.download2Ddgm(me.inputid.toUpperCase());\n        //me.download2Ddgm(Object.keys(me.icn3d.structures)[0].toUpperCase());\n    }\n\n    if(me.cfg.align === undefined && Object.keys(me.icn3d.structures).length == 1) {\n        if($(\"#\" + me.pre + \"alternateWrapper\") !== null) $(\"#\" + me.pre + \"alternateWrapper\").hide();\n    }\n\n    if(me.deferred !== undefined) me.deferred.resolve(); if(me.deferred2 !== undefined) me.deferred2.resolve();\n};\n\niCn3DUI.prototype.downloadGi = function (gi) { var me = this;\n    me.icn3d.bCid = undefined;\n    var bGi = true;\n    me.downloadMmdb(gi, bGi);\n};\n\niCn3DUI.prototype.downloadBlast_rep_id = function (sequence_structure_ids) { var me = this;\n    me.icn3d.bCid = undefined;\n\n    var idArray = sequence_structure_ids.split(',');\n    me.cfg.query_id = idArray[0];\n    me.cfg.blast_rep_id = idArray[1];\n\n    var mmdbid = me.cfg.blast_rep_id.split('_')[0];\n\n    me.downloadMmdb(mmdbid);\n};\n\niCn3DUI.prototype.getMissingResidues = function (seqArray, type, chainid) { var me = this;\n    var prevResi = -9999;\n    var missingResBegin = 0;\n    var bCount = true;\n\n    for(var i = 0, il = seqArray.length; i < il; ++i) {\n        var seqName, resiPos;\n        // mmdbid: [\"0\",\"R\",\"ARG\"],[\"502\",\"V\",\"VAL\"]; mmcifid: [1, \"ARG\"]; align: [1, \"0\",\"R\",\"ARG\"]\n        if(type === 'mmdbid') {\n            seqName = seqArray[i][1];\n            resiPos = 0;\n        }\n        else if(type === 'mmcifid') {\n            seqName = seqArray[i][1];\n            seqName = me.icn3d.residueName2Abbr(seqName);\n            resiPos = 0;\n        }\n        else if(type === 'align') {\n            seqName = seqArray[i][2];\n            resiPos = 1;\n        }\n\n        // fixe some missing residue names such as residue 6 in 5C1M_A\n        if(seqName === '') {\n            seqName = 'x';\n        }\n\n        var resObject = {};\n        resObject.resi = i + 1;\n        var resi = parseInt(seqArray[i][resiPos]);\n        var nextResi = (i == il - 1) ? 9999 : parseInt(seqArray[i+1][resiPos]);\n\n        if(resi !== 0 ||\n          (resi === 0 && (prevResi === -1 || nextResi == 1) )\n          ) {\n            resObject.name = seqName.toLowerCase();\n\n            if(bCount && missingResBegin > 0) {\n                if(me.countNextresiArray[chainid] === undefined) me.countNextresiArray[chainid] = [];\n\n                var count_nextresi = [missingResBegin, parseInt(seqArray[i][0])];\n\n                me.countNextresiArray[chainid].push(count_nextresi);\n\n                missingResBegin = 0;\n            }\n\n            bCount = false;\n        }\n        //else if(resi === 0 && prevResi !== -1) { // sometimes resi could be -4, -3, -2, -1, 0 e.g., PDBID 4YPS\n        else { // sometimes resi could be -4, -3, -2, -1, 0 e.g., PDBID 4YPS\n            resObject.name = seqName.toLowerCase();\n            ++missingResBegin;\n\n            //if(me.chainMissingResidueArray[chainid] === undefined) me.chainMissingResidueArray[chainid] = [];\n            //me.chainMissingResidueArray[chainid].push(resObject);\n\n            bCount = true;\n        }\n\n        if(me.icn3d.chainsSeq[chainid] === undefined) me.icn3d.chainsSeq[chainid] = [];\n\n        var numberStr = '';\n        if(resObject.resi % 10 === 0) numberStr = resObject.resi.toString();\n\n        me.icn3d.chainsSeq[chainid].push(resObject);\n\n        prevResi = resi;\n    }\n};\n\niCn3DUI.prototype.loadAtomDataIn = function (data, id, type, seqalign) { var me = this;\n    //me.icn3d.init();\n\n    var pmin = new THREE.Vector3( 9999, 9999, 9999);\n    var pmax = new THREE.Vector3(-9999,-9999,-9999);\n    var psum = new THREE.Vector3();\n\n    var atoms = data.atoms;\n\n    var serial = 0;\n    var prevResi = 0;\n\n    var serial2structure = {}; // for \"align\" only\n    var mmdbid2pdbid = {}; // for \"align\" only\n\n    me.pmid = data.pubmedId;\n\n    var chainid2seq = {}, chainid2kind = {}, chainid2color = {};\n    me.chainid2title = {};\n    me.chainid2sid = {};\n\n    if(type === 'align') {\n      //serial2structure\n      me.pmid = \"\";\n      var refinedStr = (me.cfg.inpara.indexOf('atype=1') !== -1) ? 'Invariant Core ' : '';\n      me.icn3d.molTitle = refinedStr + 'Structure Alignment of ';\n\n      for (var i = 0, il = data.alignedStructures[0].length; i < il; ++i) {\n          var structure = data.alignedStructures[0][i];\n\n          if(i === 1) {\n              me.icn3d.secondId = structure.pdbId; // set the second pdbid to add indent in the structure and chain mns\n          }\n\n          var pdbidTmp = structure.pdbId;\n          var mmdbidTmp = structure.mmdbId;\n\n          for(var j = structure.serialInterval[0], jl = structure.serialInterval[1]; j <= jl; ++j) {\n              serial2structure[j] = pdbidTmp.toString();\n              mmdbid2pdbid[mmdbidTmp] = pdbidTmp;\n          }\n\n          for(var j = 0, jl = structure.molecules.length; j < jl; ++j) {\n              var chain = structure.molecules[j].chain;\n              var kind = structure.molecules[j].kind;\n              var title = structure.molecules[j].name;\n              var seq = structure.molecules[j].sequence;\n              var sid = structure.molecules[j].sid;\n\n              var chainid = pdbidTmp + '_' + chain;\n\n              if(me.bFullUi) chainid2seq[chainid] = seq;\n              chainid2kind[chainid] = kind;\n\n              me.chainid2title[chainid] = title;\n              if(sid !== undefined) me.chainid2sid[chainid] = sid;\n          }\n\n          me.icn3d.molTitle +=  \"<a href=\\\"https://www.ncbi.nlm.nih.gov/Structure/mmdb/mmdbsrv.cgi?uid=\" + structure.pdbId.toUpperCase() + \"\\\" target=\\\"_blank\\\" style=\\\"color: \" + me.GREYD + \";\\\">\" + structure.pdbId.toUpperCase() + \"</a>\";\n\n          if(structure.descr !== undefined) me.pmid += structure.descr.pubmedid;\n          if(i === 0) {\n              me.icn3d.molTitle += \" and \";\n              if(structure.descr !== undefined) me.pmid += \"_\";\n          }\n      }\n\n      me.icn3d.molTitle += ' from VAST+';\n\n    }\n    else { // mmdbid or mmcifid\n        if(data.descr !== undefined) me.icn3d.molTitle += data.descr.name;\n\n        if(type === 'mmdbid') {\n          var pdbidTmp = data.pdbId;\n          var chainHash = {};\n          for(var molid in data.moleculeInfor) {\n              var chain = data.moleculeInfor[molid].chain.trim();\n              var chainid = pdbidTmp + '_' + chain;\n              if(chainHash.hasOwnProperty(chain)) {\n                  ++chainHash[chain];\n                  chainid += chainHash[chain];\n              }\n              else {\n                  chainHash[chain] = 1;\n              }\n\n              var kind = data.moleculeInfor[molid].kind;\n              var color = data.moleculeInfor[molid].color;\n              var sid = data.moleculeInfor[molid].sid;\n\n              chainid2kind[chainid] = kind;\n              chainid2color[chainid] = color;\n\n              if(sid !== undefined) me.chainid2sid[chainid] = sid;\n          }\n        }\n    }\n\n    me.countNextresiArray = {};\n    //me.chainMissingResidueArray = {};\n    if(me.bFullUi) {\n        if(type === 'mmdbid' || type === 'mmcifid') {\n            for(var chain in data.sequences) {\n                var seqArray = data.sequences[chain];\n                var chainid = id + '_' + chain;\n                //if(type === 'mmcifid') chainid = '1_' + chain;\n\n                me.getMissingResidues(seqArray, type, chainid); // assign me.icn3d.chainsSeq\n            }\n        }\n        else if(type === 'align') {\n            for(var chainid in chainid2seq) {\n                var seqArray = chainid2seq[chainid];\n\n                me.getMissingResidues(seqArray, type, chainid);\n            }\n        }\n    }\n\n    var atomid2serial = {};\n    var prevStructureNum = '', prevChainNum = '', prevResidueNum = '';\n    var structureNum = '', chainNum = '', residueNum = '';\n    var currContinueSeq = '';\n    var oldResi, prevOldResi = -999;\n    var prevResi = 0; // continuous from 1 for each chain\n    var missingResIndex = 0;\n    var bChainSeqSet = true;\n    var bAddedNewSeq = false;\n\n    // In align, chemicals do not have assigned chains. Assembly will have the same residue id so that two different residues will be combined in one residue. To avoid this, build an array to check for molid\n    var resiArray = [];\n    var molid, prevMolid = '', prevmmdbId = '';\n\n    // set mmdbMolidResid2mmdbChainResi\n    me.mmdbMolidResid2mmdbChainResi = {};\n\n    var bPhosphorusOnly = me.icn3d.isCalphaPhosOnly(atoms); //, \"O3'\", \"O3*\") || me.icn3d.isCalphaPhosOnly(atoms, \"P\");\n    var miscCnt = 0;\n\n    biopolymerChainsHash = {};\n\n    for (var i in atoms) {\n        ++serial;\n\n        atomid2serial[i] = serial;\n\n        var atm = atoms[i];\n        atm.serial = serial;\n\n        var mmdbId;\n\n        if(type === 'mmdbid' || type === 'mmcifid') {\n          mmdbId = id; // here mmdbId is pdbid or mmcif id\n        }\n        else if(type === 'align') {\n          mmdbId = serial2structure[serial]; // here mmdbId is pdbid\n        }\n\n        var resiCorrection = 0;\n        if(type === 'mmdbid' || type === 'align') {\n            atm.resi_ori = parseInt(atm.resi); // original PDB residue number, has to be integer\n            atm.resi = atm.ids.r; // corrected for residue insertion code\n\n            resiCorrection = atm.resi - atm.resi_ori;\n        }\n        else {\n            atm.resi = parseInt(atm.resi);\n        }\n\n        //if(mmdbId !== prevmmdbId) resiArray = [];\n        if(atm.chain === undefined && (type === 'mmdbid' || type === 'align')) {\n            if(type === 'mmdbid') {\n              molid = atm.ids.m;\n\n              if(me.icn3d.molid2chain[molid] !== undefined) {\n                  var pos = me.icn3d.molid2chain[molid].indexOf('_');\n                  atm.chain = me.icn3d.molid2chain[molid].substr(pos + 1);\n              }\n              else {\n/*\n                  if(molid !== prevMolid) {\n                      resiArray.push(atm.resi);\n                  }\n\n                  var miscName;\n                  if($.inArray(atm.resi, resiArray) === resiArray.length - 1) {\n                      miscName = 'Misc';\n                  }\n                  else {\n                      miscName = 'Misc2';\n                  }\n*/\n                  var miscName = 'Misc';\n\n                  ++miscCnt;\n                  if(chainid2kind[chainNum] === 'solvent' || atm.resn === 'HOH') {\n                      atm.resi = miscCnt;\n                  }\n\n                  //if all are defined in the chain section, no \"Misc\" should appear\n                  atm.chain = miscName;\n              }\n            }\n            else if(type === 'align') {\n              molid = atm.ids.m;\n\n              if(me.icn3d.pdbid_molid2chain[mmdbId + '_' + molid] !== undefined) {\n                  atm.chain = me.icn3d.pdbid_molid2chain[mmdbId + '_' + molid];\n              }\n              else {\n/*\n                  if(molid !== prevMolid) {\n                      resiArray.push(atm.resi);\n                  }\n\n                  var miscName;\n                  if($.inArray(atm.resi, resiArray) === resiArray.length - 1) {\n                      miscName = 'Misc';\n                  }\n                  else {\n                      miscName = 'Misc2';\n                  }\n*/\n                  var miscName = 'Misc';\n                  ++miscCnt;\n                  if(chainid2kind[chainNum] === 'solvent' || atm.resn === 'HOH') {\n                      atm.resi = miscCnt;\n                  }\n\n                  // chemicals do not have assigned chains.\n                  atm.chain = miscName;\n              }\n            }\n        }\n        else {\n          atm.chain = (atm.chain === '') ? 'Misc' : atm.chain;\n        }\n\n        atm.chain = atm.chain.trim();\n\n        // mmcif has pre-assigned structure in mmcifparser.cgi output\n        if(type === 'mmdbid' || type === 'align') {\n            atm.structure = mmdbId;\n        }\n\n        structureNum = atm.structure;\n        chainNum = structureNum + '_' + atm.chain;\n\n        if(chainNum !== prevChainNum) {\n            missingResIndex = 0;\n            prevResi = 0;\n        }\n\n        if(type === 'mmdbid') {\n            atm.coord = new THREE.Vector3(atm.coord[0], atm.coord[1], atm.coord[2]);\n        }\n        else {\n            atm.coord = new THREE.Vector3(atm.coord.x, atm.coord.y, atm.coord.z);\n        }\n\n        var oneLetterRes = me.icn3d.residueName2Abbr(atm.resn.substr(0, 3));\n\n/*\n        // modify resi since MMDB used the same resi as in PDB where resi is not continuous\n        // No need to modify mmcif resi\n        //if(type === 'mmdbid' || type === 'align') {\n        if(type === 'mmdbid') {\n            // bfactor\n            //if(type === 'mmdbid') atm.b = (atm.b !== undefined) ? atm.b : 1;\n\n            oldResi = atm.resi;\n\n//          if(atm.resi !== prevOldResi && atm.resi !== prevOldResi + 1) {\n            if(me.countNextresiArray[chainNum] !== undefined\n              && me.countNextresiArray[chainNum][missingResIndex] !== undefined\n              && atm.resi === me.countNextresiArray[chainNum][missingResIndex][1] + resiCorrection) {\n                // add missed residues\n                var count = me.countNextresiArray[chainNum][missingResIndex][0];\n                prevResi += count;\n\n                ++missingResIndex;\n            }\n//          }\n\n            if(molid !== prevMolid) {\n                atm.resi = atm.resi; // don't change the assigned resi\n            }\n            else if(atm.resi !== prevOldResi) {\n                atm.resi = prevResi + 1;\n            }\n\n            else {\n                atm.resi = prevResi;\n            }\n\n            prevOldResi = oldResi;\n        }\n*/\n\n        if( (type === 'mmdbid' || type === 'align') && me.bFullUi ) {\n            // set me.mmdbMolidResid2mmdbChainResi\n            me.mmdbMolidResid2mmdbChainResi[mmdbId + '_' + atm.ids.m + '_' + atm.ids.r] = mmdbId + '_' + atm.chain + '_' + atm.resi;\n        }\n\n        pmin.min(atm.coord);\n        pmax.max(atm.coord);\n        psum.add(atm.coord);\n\n        var bProtein = (me.cfg.mmcifid === undefined) ? chainid2kind[chainNum] === 'protein' : atm.mt === 'p';\n        var bNucleotide = (me.cfg.mmcifid === undefined) ? chainid2kind[chainNum] === 'nucleotide' : atm.mt === 'n';\n        var bSolvent = (me.cfg.mmcifid === undefined) ? chainid2kind[chainNum] === 'solvent' : atm.mt === 's';\n        // in vastplus.cgi, ions arenotlisted in alignedStructures...molecules, thus chainid2kind[chainNum] === undefined is used.\n        // ions will be separated from chemicals later.\n        // here \"ligand\" is used in the cgi output\n        //var bChemicalIons = (me.cfg.mmcifid === undefined) ? (chainid2kind[chainNum] === 'ligand' || chainid2kind[chainNum] === 'otherPolymer' || chainid2kind[chainNum] === undefined) : atm.mt === 'l';\n        // kind: other, otherPolymer, etc\n        var bChemicalIons = (me.cfg.mmcifid === undefined) ? (chainid2kind[chainNum] === 'ligand' || (chainid2kind[chainNum] !== undefined && chainid2kind[chainNum].indexOf('other') !== -1) || chainid2kind[chainNum] === undefined) : atm.mt === 'l';\n\n        if((atm.chain === 'Misc' || chainid2kind[chainNum] === 'other') && biopolymerChainsHash[chainNum] !== 'protein' && biopolymerChainsHash[chainNum] !== 'nucleotide') { // biopolymer, could be protein or nucleotide\n            if(atm.name === 'CA') {\n                biopolymerChainsHash[chainNum] = 'protein';\n            }\n            else if(atm.name === 'P') {\n                biopolymerChainsHash[chainNum] = 'nucleotide';\n            }\n            else {\n                biopolymerChainsHash[chainNum] = 'chemical';\n            }\n        }\n\n/*\n        // sometimes proteins or nucleotide may input as chemicals\n        // use the hash residueColors for protein residues\n        var nucleotideRes = {'G': 1, 'A': 1, 'T': 1, 'C': 1, 'U': 1, 'DG': 1, 'DA': 1, 'DT': 1, 'DC': 1, 'DU': 1};\n        if(me.icn3d.residueColors.hasOwnProperty(atm.resn)) {\n            bProtein = true;\n        }\n        else if(nucleotideRes.hasOwnProperty(atm.resn)) {\n            bNucleotide = true;\n        }\n*/\n\n        if (bProtein || bNucleotide)\n        {\n            if (bProtein) {\n              me.icn3d.proteins[serial] = 1;\n\n              if (atm.name === 'CA') me.icn3d.calphas[serial] = 1;\n              if (atm.name !== 'N' && atm.name !== 'CA' && atm.name !== 'C' && atm.name !== 'O') me.icn3d.sidec[serial] = 1;\n            }\n            else if (bNucleotide) {\n              me.icn3d.nucleotides[serial] = 1;\n\n              //if (atm.name == 'P') me.icn3d.nucleotidesO3[serial] = 1;\n              if (atm.name == \"O3'\" || atm.name == \"O3*\" || (bPhosphorusOnly && atm.name == 'P') ) {\n                  me.icn3d.nucleotidesO3[serial] = 1;\n              }\n            }\n\n            atm.het = false;\n        }\n        else if (bSolvent) { // solvent\n          me.icn3d.water[serial] = 1;\n\n          atm.het = true;\n        }\n        else if (bChemicalIons) { // chemicals and ions\n          //if (atm.bonds.length === 0) me.icn3d.ions[serial] = 1;\n          if (atm.resn === 'HOH' || atm.resn === 'O') {\n              me.icn3d.water[serial] = 1;\n          }\n          else if (atm.elem === atm.resn) {\n              me.icn3d.ions[serial] = 1;\n          }\n          else {\n              me.icn3d.chemicals[serial] = 1;\n          }\n\n          atm.het = true;\n        }\n\n        if(type === 'mmdbid') {\n            //atm.color = (!atm.het) ? new THREE.Color(chainid2color[chainNum]) : me.icn3d.atomColors[atm.elem] || me.icn3d.defaultAtomColor;\n            if(!atm.het) {\n                atm.color = (chainid2color[chainNum] !== undefined) ? new THREE.Color(chainid2color[chainNum]) : me.icn3d.chargeColors[atm.resn];\n            }\n            else {\n                atm.color = me.icn3d.atomColors[atm.elem] || me.icn3d.defaultAtomColor;\n            }\n        }\n        else {\n            if(atm.color !== undefined) atm.color = new THREE.Color(atm.color);\n        }\n\n        if(atm.resn.charAt(0) !== ' ' && atm.resn.charAt(1) === ' ') {\n          atm.resn = atm.resn.charAt(0);\n        }\n\n        // double check\n        if (atm.resn == 'HOH') me.icn3d.water[serial] = 1\n\n        me.icn3d.atoms[serial] = atm;\n        me.icn3d.dAtoms[serial] = 1;\n        me.icn3d.hAtoms[serial] = 1;\n\n        // chain level\n        var chainid = atm.structure + '_' + atm.chain;\n        if (me.icn3d.chains[chainid] === undefined) me.icn3d.chains[chainid] = {};\n        me.icn3d.chains[chainid][serial] = 1;\n\n        // residue level\n        var residueid = atm.structure + '_' + atm.chain + '_' + atm.resi;\n        if (me.icn3d.residues[residueid] === undefined) me.icn3d.residues[residueid] = {};\n        me.icn3d.residues[residueid][serial] = 1;\n\n        residueNum = chainNum + '_' + atm.resi;\n\n        // different residue\n        if(residueNum !== prevResidueNum) {\n            // different chain\n            if(chainNum !== prevChainNum) {\n                bChainSeqSet = true;\n\n                if(serial !== 1) {\n                    if(me.icn3d.structures[prevStructureNum] === undefined) me.icn3d.structures[prevStructureNum] = [];\n                    me.icn3d.structures[prevStructureNum].push(prevChainNum);\n                }\n            }\n        }\n\n        me.icn3d.residueId2Name[residueid] = oneLetterRes;\n\n        var secondaries = '-';\n        if(atm.ss === 'helix') {\n            secondaries = 'H';\n        }\n        else if(atm.ss === 'sheet') {\n            secondaries = 'E';\n        }\n        else if(atm.het || bNucleotide ) {\n            secondaries = 'o';\n        }\n        else if(!atm.het && me.icn3d.residueColors.hasOwnProperty(atm.resn.toUpperCase()) ) {\n            secondaries = 'c';\n        }\n        else if(atm.ss === 'coil') {\n            secondaries = 'c';\n        }\n\n        me.icn3d.secondaries[atm.structure + '_' + atm.chain + '_' + atm.resi] = secondaries;\n\n        if( (atm.resi != prevResi || molid != prevMolid) && me.bFullUi) { // mmdbid 1tup has different molid, same resi\n          if(me.icn3d.chainsSeq[chainid] === undefined) {\n              me.icn3d.chainsSeq[chainid] = [];\n              bChainSeqSet = false;\n          }\n\n          // me.icn3d.chainsSeq[chainid][atm.resi - 1] should have been defined for major chains\n          if( bChainSeqSet && !bAddedNewSeq && me.icn3d.chainsSeq[chainid][atm.resi - 1] !== undefined) {\n              me.icn3d.chainsSeq[chainid][atm.resi - 1].name = oneLetterRes;\n          }\n          else if(!bChainSeqSet || !me.icn3d.chainsSeq[chainid].hasOwnProperty(atm.resi - 1)) {\n              var resObject = {};\n              resObject.resi = atm.resi;\n              resObject.name = oneLetterRes;\n              var numberStr = '';\n              if(atm.resi % 10 === 0) numberStr = atm.resi.toString();\n\n              me.icn3d.chainsSeq[chainid].push(resObject);\n\n              bAddedNewSeq = true;\n          }\n        }\n\n        prevResi = atm.resi;\n\n        prevStructureNum = structureNum;\n        prevChainNum = chainNum;\n        prevResidueNum = residueNum;\n\n        prevMolid = molid;\n        prevmmdbId = mmdbId;\n    }\n\n    // adjust biopolymer type\n    for(var chainid in biopolymerChainsHash) {\n        if(Object.keys(me.icn3d.chains[chainid]).length < 10) continue;\n\n        if(biopolymerChainsHash[chainid] === 'chemical') continue;\n\n        for(var serial in me.icn3d.chains[chainid]) {\n            var atm = me.icn3d.atoms[serial];\n\n            delete me.icn3d.chemicals[serial];\n            atm.het = false;\n\n            if(biopolymerChainsHash[chainid] === 'protein') {\n              me.icn3d.proteins[serial] = 1;\n              //atm.style = (me.cfg.align !== undefined) ? 'c alpha trace' : 'ribbon';\n\n              if (atm.name === 'CA') me.icn3d.calphas[serial] = 1;\n              if (atm.name !== 'N' && atm.name !== 'CA' && atm.name !== 'C' && atm.name !== 'O') me.icn3d.sidec[serial] = 1;\n            }\n            else if(biopolymerChainsHash[chainid] === 'nucleotide') {\n              me.icn3d.nucleotides[serial] = 1;\n              //atm.style = 'nucleotide cartoon';\n\n              if (atm.name == \"O3'\" || atm.name == \"O3*\" || (bPhosphorusOnly && atm.name == 'P') ) {\n                  me.icn3d.nucleotidesO3[serial] = 1;\n              }\n            }\n        }\n    }\n\n    // me.icn3d.adjustSeq(me.chainMissingResidueArray);\n\n    // remove the reference\n    data.atoms = {};\n\n    // add the last residue set\n    if(me.icn3d.structures[structureNum] === undefined) me.icn3d.structures[structureNum] = [];\n    me.icn3d.structures[structureNum].push(chainNum);\n\n    // update bonds info\n    if(type !== 'mmcifid') {\n    for (var i in me.icn3d.atoms) {\n        var bondLength = (me.icn3d.atoms[i].bonds === undefined) ? 0 : me.icn3d.atoms[i].bonds.length;\n\n        for(var j = 0; j < bondLength; ++j) {\n            me.icn3d.atoms[i].bonds[j] = atomid2serial[me.icn3d.atoms[i].bonds[j]];\n        }\n    }\n    }\n\n    me.icn3d.cnt = serial;\n\n    if(me.icn3d.cnt > me.icn3d.maxatomcnt || (me.icn3d.biomtMatrices !== undefined && me.icn3d.biomtMatrices.length * me.icn3d.cnt > 10 * me.icn3d.maxatomcnt) ) {\n        me.opts['proteins'] = 'c alpha trace'; //ribbon, strand, cylinder and plate, schematic, c alpha trace, b factor tube, lines, stick, ball and stick, sphere, nothing\n        me.opts['nucleotides'] = 'o3 trace'; //nucleotide cartoon, o3 trace, schematic, lines, stick,\n    }\n\n    me.icn3d.pmin = pmin;\n    me.icn3d.pmax = pmax;\n    me.icn3d.maxD = pmax.distanceTo(pmin);\n    me.icn3d.center = psum.multiplyScalar(1.0 / me.icn3d.cnt);\n\n    if (me.icn3d.maxD < 5) me.icn3d.maxD = 5;\n    me.icn3d.oriMaxD = me.icn3d.maxD;\n    me.icn3d.oriCenter = me.icn3d.center.clone();\n\n    // set up disulfide bonds\n    if(type === 'mmdbid') {\n        var disulfideArray = data.disulfides;\n\n        if(disulfideArray !== undefined) {\n            for(var i = 0, il = disulfideArray.length; i < il; ++i) {\n                var serial1 = disulfideArray[i][0].ca;\n                var serial2 = disulfideArray[i][1].ca;\n\n                var atom1 = me.icn3d.atoms[serial1];\n                var atom2 = me.icn3d.atoms[serial2];\n\n                var resid1 = atom1.structure + '_' + atom1.chain + '_' + atom1.resi;\n                var resid2 = atom2.structure + '_' + atom2.chain + '_' + atom2.resi;\n\n                if(me.icn3d.ssbondpnts[atom1.structure] === undefined) me.icn3d.ssbondpnts[atom1.structure] = [];\n\n                me.icn3d.ssbondpnts[atom1.structure].push(resid1);\n                me.icn3d.ssbondpnts[atom1.structure].push(resid2);\n            }\n        }\n    }\n    else if(type === 'mmcifid') {\n        var disulfideArray = data.disulfides;\n\n        if(disulfideArray !== undefined) {\n            if(me.icn3d.ssbondpnts[id] === undefined) me.icn3d.ssbondpnts[id] = [];\n\n            for(var i = 0, il = disulfideArray.length; i < il; ++i) {\n                var resid1 = disulfideArray[i][0];\n                var resid2 = disulfideArray[i][1];\n\n                me.icn3d.ssbondpnts[id].push(resid1);\n                me.icn3d.ssbondpnts[id].push(resid2);\n            }\n\n            // copy disulfide bonds\n            var structureArray = Object.keys(me.icn3d.structures);\n            for(var s = 0, sl = structureArray.length; s < sl; ++s) {\n                var structure = structureArray[s];\n\n                if(structure == id) continue;\n\n                if(me.icn3d.ssbondpnts[structure] === undefined) me.icn3d.ssbondpnts[structure] = [];\n\n                for(var j = 0, jl = me.icn3d.ssbondpnts[id].length; j < jl; ++j) {\n                    var ori_resid = me.icn3d.ssbondpnts[id][j];\n                    var pos = ori_resid.indexOf('_');\n                    var resid = structure + ori_resid.substr(pos);\n\n                    me.icn3d.ssbondpnts[structure].push(resid);\n                }\n            }\n        }\n    }\n    else if(type === 'align') { // calculate disulfide bonds\n        // get all Cys residues\n        var structure2cys_resid = {};\n        for(var chainid in chainid2seq) {\n            if(chainid2kind[chainid] == 'protein') {\n                var seq = chainid2seq[chainid];\n                var structure = chainid.substr(0, chainid.indexOf('_'));\n\n                for(var i = 0, il = seq.length; i < il; ++i) {\n                    // each seq[i] = [1,\"1\",\"V\",\"VAL NH3+\"],\n                    if(seq[i][2] == 'C') {\n                        if(structure2cys_resid[structure] == undefined) structure2cys_resid[structure] = [];\n                        structure2cys_resid[structure].push(chainid + '_' + seq[i][0]);\n                    }\n                }\n            }\n        }\n\n        // determine whether there are disulfide bonds\n        // disulfide bond is about 2.05 angstrom\n        var distMax = 4; //3; // https://icn3d.page.link/5KRXx6XYfig1fkye7\n        var distSqrMax = distMax * distMax;\n        for(var structure in structure2cys_resid) {\n            var cysArray = structure2cys_resid[structure];\n\n            for(var i = 0, il = cysArray.length; i < il; ++i) {\n                for(var j = i + 1, jl = cysArray.length; j < jl; ++j) {\n                    var resid1 = cysArray[i];\n                    var resid2 = cysArray[j];\n\n                    var coord1 = undefined, coord2 = undefined;\n                    for(var serial in me.icn3d.residues[resid1]) {\n                        if(me.icn3d.atoms[serial].elem == 'S') {\n                            coord1 = me.icn3d.atoms[serial].coord;\n                            break;\n                        }\n                    }\n                    for(var serial in me.icn3d.residues[resid2]) {\n                        if(me.icn3d.atoms[serial].elem == 'S') {\n                            coord2 = me.icn3d.atoms[serial].coord;\n                            break;\n                        }\n                    }\n\n                    if(coord1 === undefined || coord2 === undefined) continue;\n\n                    if(Math.abs(coord1.x - coord2.x) > distMax) continue;\n                    if(Math.abs(coord1.y - coord2.y) > distMax) continue;\n                    if(Math.abs(coord1.z - coord2.z) > distMax) continue;\n                    distSqr = (coord1.x - coord2.x)*(coord1.x - coord2.x) + (coord1.y - coord2.y)*(coord1.y - coord2.y) + (coord1.z - coord2.z)*(coord1.z - coord2.z);\n\n                    if(distSqr < distSqrMax) { // disulfide bond\n                        if(me.icn3d.ssbondpnts[structure] === undefined) me.icn3d.ssbondpnts[structure] = [];\n                        me.icn3d.ssbondpnts[structure].push(resid1);\n                        me.icn3d.ssbondpnts[structure].push(resid2);\n                    }\n                }\n            }\n        }\n    }\n\n    // set up sequence alignment\n    // display the structure right away. load the mns and sequences later\n//        setTimeout(function(){\n    if(type === 'align' && seqalign !== undefined && me.bFullUi) {\n        me.setSeqAlign(seqalign, data.alignedStructures);\n    } // if(align\n\n    me.showTitle();\n\n    data = {};\n};\n\n/**\n * @author Jiyao Wang <wangjiy@ncbi.nlm.nih.gov> / https://github.com/ncbi/icn3d\n */\n\n// from the 2016 NCBI hackathon in Orlando: https://github.com/NCBI-Hackathons/iCN3D-MMTF\n// Contributors: Jiyao Wang, Alexander Rose, Peter Rose\n// requires the library mmtf.js\niCn3DUI.prototype.downloadMmtf = function (mmtfid) { var me = this;\n    MMTF.fetchReduced(\n        mmtfid,\n        // onLoad callback\n        function( mmtfData ){\n            if(mmtfData.numAtoms * 10 > me.icn3d.maxatomcnt) {\n                var bFull = false;\n                me.parseMmtfData(mmtfData, bFull);\n            }\n            else {\n                mmtfData = null;\n\n                MMTF.fetch(\n                    mmtfid,\n                    // onLoad callback\n                    function( mmtfData2 ){\n                        var bFull = true;\n                        me.parseMmtfData(mmtfData2, bFull);\n                    },\n                    // onError callback\n                    function( error ){\n                        console.error( error )\n                    }\n                );\n            }\n        },\n        // onError callback\n        function( error ){\n            console.error( error )\n        }\n    );\n};\n\niCn3DUI.prototype.parseMmtfData = function (mmtfData, bFull) { var me = this;\n    var cnt = mmtfData.numAtoms;\n\n    me.icn3d.init();\n\n    var pmin = new THREE.Vector3( 9999, 9999, 9999);\n    var pmax = new THREE.Vector3(-9999,-9999,-9999);\n    var psum = new THREE.Vector3();\n\n    var id = mmtfData.structureId;\n\n    me.icn3d.molTitle = mmtfData.title;\n\n    // bioAsembly\n    if(mmtfData.bioAssemblyList !== undefined && mmtfData.bioAssemblyList[0]!== undefined && mmtfData.bioAssemblyList[0].transformList.length > 1) {\n        me.icn3d.biomtMatrices = [];\n\n        for(var i = 0, il = mmtfData.bioAssemblyList[0].transformList.length; i < il; ++i) {\n            //var biomt = new THREE.Matrix4().identity();\n\n            //for(var j = 0, jl = mmtfData.bioAssemblyList[0].transformList[i].matrix.length; j < jl; ++j) {\n                //biomt.elements[j] = mmtfData.bioAssemblyList[0].transformList[i].matrix[j];\n            //}\n\n            var biomt = new THREE.Matrix4().fromArray(mmtfData.bioAssemblyList[0].transformList[i].matrix).transpose();\n\n            me.icn3d.biomtMatrices.push(biomt);\n        }\n    }\n\n    if(me.icn3d.biomtMatrices !== undefined && me.icn3d.biomtMatrices.length > 1) {\n        $(\"#\" + me.pre + \"assemblyWrapper\").show();\n\n        me.icn3d.asuCnt = me.icn3d.biomtMatrices.length;\n    }\n    else {\n        $(\"#\" + me.pre + \"assemblyWrapper\").hide();\n    }\n\n    var oriindex2serial = {};\n\n    // save SG atoms in CYS residues\n    var SGAtomSerialArray = [];\n\n    var prevSS = 'coil';\n    var prevChain = '';\n    var prevResi = 0;\n\n    var serial = 0;\n\n    var structure, chain, resn, resi, ss, ssbegin, ssend;\n    var het, bProtein, bNucleotide;\n    var elem, atomName, coord, b, alt;\n\n    var bModifyResi = false;\n\n    var callbackDict = {\n        onModel: function( modelData ){\n            structure = (modelData.modelIndex === 0) ? id : id + (modelData.modelIndex + 1).toString();\n        },\n        onChain: function( chainData ){\n            bModifyResi = false;\n\n            chain = chainData.chainName; // or chainData.chainId\n            var chainid = structure + '_' + chain;\n\n            if(me.icn3d.structures[structure] === undefined) me.icn3d.structures[structure] = [];\n            me.icn3d.structures[structure].push(chainid);\n\n/*\n            if(me.icn3d.chainsAnTitle[chainid] === undefined ) me.icn3d.chainsAnTitle[chainid] = [];\n            if(me.icn3d.chainsAnTitle[chainid][0] === undefined ) me.icn3d.chainsAnTitle[chainid][0] = [];\n            if(me.icn3d.chainsAnTitle[chainid][1] === undefined ) me.icn3d.chainsAnTitle[chainid][1] = [];\n            me.icn3d.chainsAnTitle[chainid][0].push('');\n            me.icn3d.chainsAnTitle[chainid][1].push('SS');\n*/\n        },\n        onGroup: function( groupData ){\n            resn = groupData.groupName;\n            resi = groupData.groupId;\n\n            //if(resi == prevResi || bModifyResi) {\n            //    bModifyResi = true;\n            //    resi = prevResi + 1; // for residue insertion code\n            //}\n\n            var resid = structure + '_' + chain + '_' + resi;\n\n            if(groupData.secStruct === 0 || groupData.secStruct === 2 || groupData.secStruct === 4) {\n                ss = 'helix';\n            }\n            else if(groupData.secStruct === 3) {\n                ss = 'sheet';\n            }\n            else if(groupData.secStruct === -1) {\n                ss = 'other';\n            }\n            else {\n                ss = 'coil';\n            }\n\n            // no residue can be both ssbegin and ssend in DSSP calculated secondary structures\n            var bSetPrevSsend = false;\n\n            if(chain !== prevChain) {\n                // new chain\n                if(ss !== 'coil' && ss !== 'other') {\n                    ssbegin = true;\n                    ssend = false;\n                }\n                else {\n                    ssbegin = false;\n                    ssend = false;\n                }\n\n                // set up the end of previous chain\n                if(prevSS !== 'coil' && prevSS !== 'other') {\n                    var prevResid = structure + '_' + prevChain + '_' + prevResi.toString();\n\n                    for(var i in me.icn3d.residues[prevResid]) {\n                        me.icn3d.atoms[i].ssbegin = false;\n                        me.icn3d.atoms[i].ssend = true;\n                    }\n                }\n            }\n            else if(ss !== prevSS) {\n                if(prevSS === 'coil' || prevSS === 'other') {\n                    ssbegin = true;\n                    ssend = false;\n                }\n                else if(ss === 'coil' || ss === 'other') {\n                    bSetPrevSsend = true;\n                    ssbegin = false;\n                    ssend = false;\n                }\n                else if( (prevSS === 'sheet' && ss === 'helix') || (prevSS === 'helix' && ss === 'sheet')) {\n                    bSetPrevSsend = true;\n                    ssbegin = true;\n                    ssend = false;\n                }\n            }\n            else {\n                    ssbegin = false;\n                    ssend = false;\n            }\n\n            if(bSetPrevSsend) {\n                var prevResid = structure + '_' + chain + '_' + (resi - 1).toString();\n                for(var i in me.icn3d.residues[prevResid]) {\n                    me.icn3d.atoms[i].ssbegin = false;\n                    me.icn3d.atoms[i].ssend = true;\n                }\n            }\n\n            prevSS = ss;\n            prevChain = chain;\n            prevResi = resi;\n\n            het = false;\n            bProtein = false;\n            bNucleotide = false;\n            if(groupData.chemCompType.toLowerCase() === 'non-polymer' || groupData.chemCompType.toLowerCase() === 'other' || groupData.chemCompType.toLowerCase().indexOf('saccharide') !== -1) {\n                het = true;\n            }\n            else if(groupData.chemCompType.toLowerCase().indexOf('peptide') !== -1) {\n                bProtein = true;\n            }\n            else if(groupData.chemCompType.toLowerCase().indexOf('dna') !== -1 || groupData.chemCompType.toLowerCase().indexOf('rna') !== -1) {\n                bNucleotide = true;\n            }\n            else {\n                bProtein = true;\n            }\n\n              // add sequence information\n              var chainid = structure + '_' + chain;\n\n              var resObject = {};\n              resObject.resi = resi;\n              resObject.name = me.icn3d.residueName2Abbr(resn);\n\n              me.icn3d.residueId2Name[resid] = resObject.name;\n\n              var numberStr = '';\n              if(resObject.resi % 10 === 0) numberStr = resObject.resi.toString();\n\n              var secondaries = '-';\n              if(ss === 'helix') {\n                  secondaries = 'H';\n              }\n              else if(ss === 'sheet') {\n                  secondaries = 'E';\n              }\n              else if(ss === 'coil') {\n                  secondaries = 'c';\n              }\n              else if(ss === 'other') {\n                  secondaries = 'o';\n              }\n\n              if(me.icn3d.chainsSeq[chainid] === undefined) me.icn3d.chainsSeq[chainid] = [];\n              if(me.bFullUi) me.icn3d.chainsSeq[chainid].push(resObject);\n\n              me.icn3d.secondaries[resid] = secondaries;\n        },\n        onAtom: function( atomData ){\n            elem = atomData.element;\n            atomName = atomData.atomName;\n            coord = new THREE.Vector3(atomData.xCoord, atomData.yCoord, atomData.zCoord);\n            b = atomData.bFactor;\n\n            alt = atomData.altLoc;\n            if(atomData.altLoc === '\\u0000') { // a temp value, should be ''\n                alt = '';\n            }\n\n            // skip the atoms where alt is not '' or 'A'\n            if(alt === '' || alt === 'A') {\n                ++serial;\n\n                if(atomName === 'SG') SGAtomSerialArray.push(serial);\n\n                oriindex2serial[atomData.atomIndex] = serial;\n\n                var atomDetails = {\n                    het: het, // optional, used to determine chemicals, water, ions, etc\n                    serial: serial,         // required, unique atom id\n                    name: atomName,             // required, atom name\n                    alt: alt,               // optional, some alternative coordinates\n                    resn: resn,             // optional, used to determine protein or nucleotide\n                    structure: structure,   // optional, used to identify structure\n                    chain: chain,           // optional, used to identify chain\n                    resi: resi,             // optional, used to identify residue ID\n                    //insc: line.substr(26, 1),\n                    coord: coord,           // required, used to draw 3D shape\n                    b: b,         // optional, used to draw B-factor tube\n                    elem: elem,             // optional, used to determine hydrogen bond\n                    bonds: [],              // required, used to connect atoms\n                    bondOrder: [],\n                    ss: ss,             // optional, used to show secondary structures\n                    ssbegin: ssbegin,         // optional, used to show the beginning of secondary structures\n                    ssend: ssend            // optional, used to show the end of secondary structures\n                };\n\n                me.icn3d.atoms[serial] = atomDetails;\n\n                pmin.min(coord);\n                pmax.max(coord);\n                psum.add(coord);\n\n                var chainid = structure + '_' + chain;\n                var resid = chainid + '_' + resi;\n\n                if(me.icn3d.chains[chainid] === undefined) me.icn3d.chains[chainid] = {};\n                me.icn3d.chains[chainid][serial] = 1;\n\n                if(me.icn3d.residues[resid] === undefined) me.icn3d.residues[resid] = {};\n                me.icn3d.residues[resid][serial] = 1;\n\n                if (bProtein) {\n                  me.icn3d.proteins[serial] = 1;\n\n                  if (atomName === 'CA') me.icn3d.calphas[serial] = 1;\n                  if (atomName !== 'N' && atomName !== 'CA' && atomName !== 'C' && atomName !== 'O') me.icn3d.sidec[serial] = 1;\n                }\n                else if (bNucleotide) {\n                  me.icn3d.nucleotides[serial] = 1;\n\n                  if (bFull && (atomName == \"O3'\" || atomName == \"O3*\")) {\n                      me.icn3d.nucleotidesO3[serial] = 1;\n                  }\n                  else if (!bFull && atomName == 'P') {\n                      me.icn3d.nucleotidesO3[serial] = 1;\n                  }\n                }\n                else {\n                  if (elem.toLowerCase() === resn.toLowerCase()) {\n                      me.icn3d.ions[serial] = 1;\n                  }\n                  else if(resn === 'HOH' || resn === 'WAT' || resn === 'SQL' || resn === 'H2O' || resn === 'W' || resn === 'DOD' || resn === 'D3O') {\n                      me.icn3d.water[serial] = 1;\n                  }\n                  else {\n                      me.icn3d.chemicals[serial] = 1;\n                  }\n                }\n\n                me.icn3d.dAtoms[serial] = 1;\n                me.icn3d.hAtoms[serial] = 1;\n            }\n        },\n        onBond: function( bondData ){\n            var from = oriindex2serial[bondData.atomIndex1];\n            var to = oriindex2serial[bondData.atomIndex2];\n\n            if(oriindex2serial.hasOwnProperty(bondData.atomIndex1) && oriindex2serial.hasOwnProperty(bondData.atomIndex2)) { // some alt atoms were skipped\n                me.icn3d.atoms[from].bonds.push(to);\n                me.icn3d.atoms[to].bonds.push(from);\n\n                if(het) {\n                    var order = bondData.bondOrder;\n\n                    me.icn3d.atoms[from].bondOrder.push(order);\n                    me.icn3d.atoms[to].bondOrder.push(order);\n\n                    if(order === 2) {\n                        me.icn3d.doublebonds[from + '_' + to] = 1;\n                        me.icn3d.doublebonds[to + '_' + from] = 1;\n                    }\n                    else if(order === 3) {\n                        me.icn3d.triplebonds[from + '_' + to] = 1;\n                        me.icn3d.triplebonds[to + '_' + from] = 1;\n                    }\n                }\n            }\n        }\n    };\n\n    // traverse\n    MMTF.traverse( mmtfData, callbackDict );\n\n    // set up disulfide bonds\n    var sgLength = SGAtomSerialArray.length;\n    for(var i = 0, il = sgLength; i < il; ++i) {\n        for(var j = i+1, jl = sgLength; j < il; ++j) {\n\n            var serial1 = SGAtomSerialArray[i];\n            var serial2 = SGAtomSerialArray[j];\n\n            var atom1 = me.icn3d.atoms[serial1];\n            var atom2 = me.icn3d.atoms[serial2];\n\n            if($.inArray(serial2, atom1.bonds) !== -1) {\n                var resid1 = atom1.structure + '_' + atom1.chain + '_' + atom1.resi;\n                var resid2 = atom2.structure + '_' + atom2.chain + '_' + atom2.resi;\n\n                if(me.icn3d.ssbondpnts[atom1.structure] === undefined) me.icn3d.ssbondpnts[atom1.structure] = [];\n\n                me.icn3d.ssbondpnts[atom1.structure].push(resid1);\n                me.icn3d.ssbondpnts[atom1.structure].push(resid2);\n            }\n        }\n    }\n\n    me.icn3d.cnt = serial;\n\n    if(me.icn3d.cnt > me.icn3d.maxatomcnt || (me.icn3d.biomtMatrices !== undefined && me.icn3d.biomtMatrices.length * me.icn3d.cnt > 10 * me.icn3d.maxatomcnt) ) {\n        me.opts['proteins'] = 'c alpha trace'; //ribbon, strand, cylinder and plate, schematic, c alpha trace, b factor tube, lines, stick, ball and stick, sphere, nothing\n        me.opts['nucleotides'] = 'o3 trace'; //nucleotide cartoon, o3 trace, schematic, lines, stick,\n    }\n\n    me.icn3d.pmin = pmin;\n    me.icn3d.pmax = pmax;\n    me.icn3d.maxD = pmax.distanceTo(pmin);\n    me.icn3d.center = psum.multiplyScalar(1.0 / me.icn3d.cnt);\n\n    if (me.icn3d.maxD < 5) me.icn3d.maxD = 5;\n    me.icn3d.oriMaxD = me.icn3d.maxD;\n    me.icn3d.oriCenter = me.icn3d.center.clone();\n\n    if(me.cfg.align === undefined && Object.keys(me.icn3d.structures).length == 1) {\n        $(\"#\" + me.pre + \"alternateWrapper\").hide();\n    }\n\n    me.icn3d.setAtomStyleByOptions(me.opts);\n    me.icn3d.setColorByOptions(me.opts, me.icn3d.atoms);\n\n    me.renderStructure();\n\n    me.showTitle();\n\n    if(me.cfg.rotate !== undefined) me.rotStruc(me.cfg.rotate, true);\n\n    //if(me.cfg.showseq !== undefined && me.cfg.showseq) me.openDialog(me.pre + 'dl_selectresidues', 'Select residues in sequences');\n\n    if(me.deferred !== undefined) me.deferred.resolve(); if(me.deferred2 !== undefined) me.deferred2.resolve();\n};\n\n\n\n/**\n * @author Jiyao Wang <wangjiy@ncbi.nlm.nih.gov> / https://github.com/ncbi/icn3d\n */\n\niCn3DUI.prototype.downloadPdb = function (pdbid) { var me = this;\n   var url, dataType;\n\n   url = \"https://files.rcsb.org/view/\" + pdbid + \".pdb\";\n\n   dataType = \"text\";\n\n   me.icn3d.bCid = undefined;\n\n   $.ajax({\n      url: url,\n      dataType: dataType,\n      cache: true,\n      tryCount : 0,\n      retryLimit : 1,\n      beforeSend: function() {\n          me.showLoading();\n      },\n      complete: function() {\n          me.hideLoading();\n      },\n      success: function(data) {\n          me.loadPdbData(data);\n      },\n      error : function(xhr, textStatus, errorThrown ) {\n        this.tryCount++;\n        if (this.tryCount <= this.retryLimit) {\n            //try again\n            $.ajax(this);\n            return;\n        }\n        return;\n      }\n   });\n};\n\niCn3DUI.prototype.downloadUrl = function (url, type) { var me = this;\n   var dataType = \"text\";\n\n   me.icn3d.bCid = undefined;\n\n   //var url = '//www.ncbi.nlm.nih.gov/Structure/mmcifparser/mmcifparser.cgi?dataurl=' + encodeURIComponent(url);\n\n   $.ajax({\n      url: url,\n      dataType: dataType,\n      cache: true,\n      tryCount : 0,\n      retryLimit : 1,\n      beforeSend: function() {\n          if($(\"#\" + me.pre + \"wait\")) $(\"#\" + me.pre + \"wait\").show();\n          if($(\"#\" + me.pre + \"canvas\")) $(\"#\" + me.pre + \"canvas\").hide();\n          if($(\"#\" + me.pre + \"cmdlog\")) $(\"#\" + me.pre + \"cmdlog\").hide();\n      },\n      complete: function() {\n          if($(\"#\" + me.pre + \"wait\")) $(\"#\" + me.pre + \"wait\").hide();\n          if($(\"#\" + me.pre + \"canvas\")) $(\"#\" + me.pre + \"canvas\").show();\n          if($(\"#\" + me.pre + \"cmdlog\")) $(\"#\" + me.pre + \"cmdlog\").show();\n      },\n      success: function(data) {\n        me.InputfileData = data;\n        me.InputfileType = type;\n\n        if(type === 'pdb') {\n            me.loadPdbData(data);\n        }\n        else if(type === 'mol2') {\n            me.loadMol2Data(data);\n        }\n        else if(type === 'sdf') {\n            me.loadSdfData(data);\n        }\n        else if(type === 'xyz') {\n            me.loadXyzData(data);\n        }\n        else if(type === 'mmcif') {\n            me.loadMmcifData(data);\n        }\n      },\n      error : function(xhr, textStatus, errorThrown ) {\n        this.tryCount++;\n        if (this.tryCount <= this.retryLimit) {\n            //try again\n            $.ajax(this);\n            return;\n        }\n        return;\n      }\n   });\n};\n\niCn3DUI.prototype.loadPdbData = function(data) { var me = this;\n      me.icn3d.loadPDB(data); // defined in the core library\n\n      if(me.icn3d.biomtMatrices !== undefined && me.icn3d.biomtMatrices.length > 1) {\n        $(\"#\" + me.pre + \"assemblyWrapper\").show();\n\n        me.icn3d.asuCnt = me.icn3d.biomtMatrices.length;\n      }\n      else {\n        $(\"#\" + me.pre + \"assemblyWrapper\").hide();\n      }\n\n      if(me.icn3d.emd !== undefined) {\n          $(\"#\" + me.pre + \"mapWrapper1\").hide();\n          $(\"#\" + me.pre + \"mapWrapper2\").hide();\n          $(\"#\" + me.pre + \"mapWrapper3\").hide();\n      }\n      else {\n          $(\"#\" + me.pre + \"emmapWrapper1\").hide();\n          $(\"#\" + me.pre + \"emmapWrapper2\").hide();\n          $(\"#\" + me.pre + \"emmapWrapper3\").hide();\n      }\n\n    // calculate secondary structures if not available\n    // DSSP only works for structures with all atoms. The Calpha only strucutres didn't work\n    //if(!me.icn3d.bSecondaryStructure && !bCalphaOnly) {\n    if(!me.icn3d.bSecondaryStructure) {\n      me.deferredSecondary = $.Deferred(function() {\n          var bCalphaOnly = me.icn3d.isCalphaPhosOnly(me.icn3d.hash2Atoms(me.icn3d.proteins));//, 'CA');\n          var calphaonly = (bCalphaOnly) ? '1' : '0';\n\n          me.loadPdbDataBase(data, calphaonly);\n      }); // end of me.deferred = $.Deferred(function() {\n\n      return me.deferredSecondary.promise();\n    }\n    else {\n        me.loadPdbDataRender();\n    }\n};\n\niCn3DUI.prototype.loadPdbDataBase = function(data, calphaonly) { var me = this;\n   var url = \"https://www.ncbi.nlm.nih.gov/Structure/mmcifparser/mmcifparser.cgi\";\n\n   $.ajax({\n      url: url,\n      type: 'POST',\n      data: {'dssp':'t', 'calphaonly': calphaonly, 'pdbfile': data},\n      dataType: 'jsonp',\n      cache: true,\n      tryCount : 0,\n      retryLimit : 1,\n      success: function(ssdata) {\n        var ssHash = ssdata;\n\n        if(JSON.stringify(ssdata).indexOf('Oops there was a problem') === -1) {\n          for(var chainNum in me.icn3d.chainsSeq) {\n              var pos = chainNum.indexOf('_');\n              var chain = chainNum.substr(pos + 1);\n\n              var residueObjectArray = me.icn3d.chainsSeq[chainNum];\n              var prevSS = 'coil';\n\n              for(var i = 0, il = residueObjectArray.length; i < il; ++i) {\n                var resi = residueObjectArray[i].resi;\n                var chain_resi = chain + '_' + resi;\n\n                var ssOneLetter = 'c';\n                if(ssHash.hasOwnProperty(chain_resi)) {\n                    ssOneLetter = ssHash[chain_resi];\n                }\n\n                var ss;\n                if(ssOneLetter === 'H') {\n                    ss = 'helix';\n                }\n                else if(ssOneLetter === 'E') {\n                    ss = 'sheet';\n                }\n                else {\n                    ss = 'coil';\n                }\n\n                // update ss in sequence window\n                //me.icn3d.chainsAn[chainNum][1][i] = ssOneLetter;\n\n                // assign atom ss, ssbegin, and ssend\n                var resid = chainNum + '_' + resi;\n\n                me.icn3d.secondaries[resid] = ssOneLetter;\n\n                // no residue can be both ssbegin and ssend in DSSP calculated secondary structures\n                var bSetPrevResidue = 0; // 0: no need to reset, 1: reset previous residue to \"ssbegin = true\", 2: reset previous residue to \"ssend = true\"\n\n                if(ss !== prevSS) {\n                    if(prevSS === 'coil') {\n                        ssbegin = true;\n                        ssend = false;\n                    }\n                    else if(ss === 'coil') {\n                        bSetPrevResidue = 2;\n                        ssbegin = false;\n                        ssend = false;\n                    }\n                    else if( (prevSS === 'sheet' && ss === 'helix') || (prevSS === 'helix' && ss === 'sheet')) {\n                        bSetPrevResidue = 1;\n                        ssbegin = true;\n                        ssend = false;\n                    }\n                }\n                else {\n                        ssbegin = false;\n                        ssend = false;\n                }\n\n                if(bSetPrevResidue == 1) { //1: reset previous residue to \"ssbegin = true\"\n                    var prevResid = chainNum + '_' + (resi - 1).toString();\n                    for(var j in me.icn3d.residues[prevResid]) {\n                        me.icn3d.atoms[j].ssbegin = true;\n                        me.icn3d.atoms[j].ssend = false;\n                    }\n                }\n                else if(bSetPrevResidue == 2) { //2: reset previous residue to \"ssend = true\"\n                    var prevResid = chainNum + '_' + (resi - 1).toString();\n                    for(var j in me.icn3d.residues[prevResid]) {\n                        me.icn3d.atoms[j].ssbegin = false;\n                        me.icn3d.atoms[j].ssend = true;\n                    }\n                }\n\n                // set the current residue\n                for(var j in me.icn3d.residues[resid]) {\n                    me.icn3d.atoms[j].ss = ss;\n                    me.icn3d.atoms[j].ssbegin = ssbegin;\n                    me.icn3d.atoms[j].ssend = ssend;\n                }\n\n                prevSS = ss;\n              } // for each residue\n          } // for each chain\n        } // if no error\n\n        me.loadPdbDataRender();\n\n        if(me.deferredSecondary !== undefined) me.deferredSecondary.resolve();\n      },\n      error : function(xhr, textStatus, errorThrown ) {\n        this.tryCount++;\n        if (this.tryCount <= this.retryLimit) {\n            //try again\n            $.ajax(this);\n            return;\n        }\n\n        me.loadPdbDataRender();\n        if(me.deferredSecondary !== undefined) me.deferredSecondary.resolve();\n        return;\n      }\n    });\n};\n\niCn3DUI.prototype.loadPdbDataRender = function() {\n    var me = this;\n\n    me.pmid = me.icn3d.pmid;\n\n    if(me.cfg.align === undefined && Object.keys(me.icn3d.structures).length == 1) {\n        $(\"#\" + me.pre + \"alternateWrapper\").hide();\n    }\n\n    me.icn3d.setAtomStyleByOptions(me.opts);\n    me.icn3d.setColorByOptions(me.opts, me.icn3d.atoms);\n\n    me.renderStructure();\n\n    me.showTitle();\n\n    if(me.cfg.rotate !== undefined) me.rotStruc(me.cfg.rotate, true);\n\n    if(me.deferred !== undefined) me.deferred.resolve(); if(me.deferred2 !== undefined) me.deferred2.resolve();\n};\n\n/**\n * @author Jiyao Wang <wangjiy@ncbi.nlm.nih.gov> / https://github.com/ncbi/icn3d\n */\n\niCn3DUI.prototype.downloadCid = function (cid) { var me = this;\n    var uri = \"https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/\" + cid + \"/record/SDF/?record_type=3d&response_type=display\";\n\n    me.opts['pk'] = 'atom';\n    me.opts['chemicals'] = 'ball and stick';\n\n    me.icn3d.opts['pk'] = 'atom';\n    me.icn3d.opts['chemicals'] = 'ball and stick';\n\n    me.icn3d.bCid = true;\n\n    $.ajax({\n      url: uri,\n      dataType: 'text',\n      cache: true,\n      tryCount : 0,\n      retryLimit : 1,\n      beforeSend: function() {\n          me.showLoading();\n      },\n      complete: function() {\n          me.hideLoading();\n      },\n      success: function(data) {\n        var bResult = me.loadSdfAtomData(data, cid);\n\n        if(me.cfg.align === undefined && Object.keys(me.icn3d.structures).length == 1) {\n            $(\"#\" + me.pre + \"alternateWrapper\").hide();\n        }\n\n        if(!bResult) {\n          alert('The SDF of CID ' + cid + ' has the wrong format...');\n        }\n        else {\n\n          me.icn3d.setAtomStyleByOptions(me.opts);\n          me.icn3d.setColorByOptions(me.opts, me.icn3d.atoms);\n\n          me.renderStructure();\n\n          if(me.cfg.rotate !== undefined) me.rotStruc(me.cfg.rotate, true);\n\n          if(me.deferred !== undefined) me.deferred.resolve(); if(me.deferred2 !== undefined) me.deferred2.resolve();\n        }\n      },\n      error : function(xhr, textStatus, errorThrown ) {\n        this.tryCount++;\n        if (this.tryCount <= this.retryLimit) {\n            //try again\n            $.ajax(this);\n            return;\n        }\n        return;\n      }\n    })\n    .fail(function() {\n        alert( \"This CID may not have 3D structure...\" );\n    });\n};\n\niCn3DUI.prototype.loadSdfData = function(data) {\n    var me = this;\n\n    var bResult = me.loadSdfAtomData(data);\n\n    if(me.cfg.align === undefined && Object.keys(me.icn3d.structures).length == 1) {\n        $(\"#\" + me.pre + \"alternateWrapper\").hide();\n    }\n\n    if(!bResult) {\n      alert('The SDF file has the wrong format...');\n    }\n    else {\n      me.icn3d.setAtomStyleByOptions(me.opts);\n      me.icn3d.setColorByOptions(me.opts, me.icn3d.atoms);\n\n      me.renderStructure();\n\n      if(me.cfg.rotate !== undefined) me.rotStruc(me.cfg.rotate, true);\n\n      if(me.deferred !== undefined) me.deferred.resolve(); if(me.deferred2 !== undefined) me.deferred2.resolve();\n    }\n};\n\niCn3DUI.prototype.loadSdfAtomData = function (data, cid) { var me = this;\n    var lines = data.split(/\\r?\\n|\\r/);\n    if (lines.length < 4) return false;\n\n    me.icn3d.init();\n\n    var structure = cid ? cid : 1;\n    var chain = 'A';\n    var resi = 1;\n    var resn = 'LIG';\n\n    var moleculeNum = structure;\n    var chainNum = structure + '_' + chain;\n    var residueNum = chainNum + '_' + resi;\n\n    var atomCount = parseInt(lines[3].substr(0, 3));\n    if (isNaN(atomCount) || atomCount <= 0) return false;\n\n    var bondCount = parseInt(lines[3].substr(3, 3));\n    var offset = 4;\n    if (lines.length < offset + atomCount + bondCount) return false;\n\n    var start = 0;\n    var end = atomCount;\n    var i, line;\n\n    var atomid2serial = {};\n    var skipAtomids = {}; // skip hydrgen atom\n\n    var AtomHash = {};\n    var serial = 1;\n    for (i = start; i < end; i++) {\n        line = lines[offset];\n        offset++;\n\n        var name = line.substr(31, 3).replace(/ /g, \"\");\n\n        if(name !== 'H') {\n            var x = parseFloat(line.substr(0, 10));\n            var y = parseFloat(line.substr(10, 10));\n            var z = parseFloat(line.substr(20, 10));\n            var coord = new THREE.Vector3(x, y, z);\n\n            var atomDetails = {\n                het: true,              // optional, used to determine chemicals, water, ions, etc\n                serial: serial,         // required, unique atom id\n                name: name,             // required, atom name\n                resn: resn,             // optional, used to determine protein or nucleotide\n                structure: structure,   // optional, used to identify structure\n                chain: chain,           // optional, used to identify chain\n                resi: resi,             // optional, used to identify residue ID\n                coord: coord,           // required, used to draw 3D shape\n                b: 0,                   // optional, used to draw B-factor tube\n                elem: name,             // optional, used to determine hydrogen bond\n                bonds: [],              // required, used to connect atoms\n                ss: 'coil',             // optional, used to show secondary structures\n                ssbegin: false,         // optional, used to show the beginning of secondary structures\n                ssend: false,           // optional, used to show the end of secondary structures\n\n                bondOrder: []           // optional, specific for chemicals\n            };\n\n            me.icn3d.atoms[serial] = atomDetails;\n            AtomHash[serial] = 1;\n\n            atomid2serial[i] = serial;\n\n            ++serial;\n        }\n        else {\n            skipAtomids[i] = 1;\n        }\n    }\n\n    me.icn3d.dAtoms = AtomHash;\n    me.icn3d.hAtoms= AtomHash;\n    me.icn3d.structures[moleculeNum] = [chainNum]; //AtomHash;\n    me.icn3d.chains[chainNum] = AtomHash;\n    me.icn3d.residues[residueNum] = AtomHash;\n\n    me.icn3d.residueId2Name[residueNum] = resn;\n\n    if(me.icn3d.chainsSeq[chainNum] === undefined) me.icn3d.chainsSeq[chainNum] = [];\n/*\n    if(me.icn3d.chainsAn[chainNum] === undefined ) me.icn3d.chainsAn[chainNum] = [];\n    if(me.icn3d.chainsAn[chainNum][0] === undefined ) me.icn3d.chainsAn[chainNum][0] = [];\n    if(me.icn3d.chainsAnTitle[chainNum] === undefined ) me.icn3d.chainsAnTitle[chainNum] = [];\n    if(me.icn3d.chainsAnTitle[chainNum][0] === undefined ) me.icn3d.chainsAnTitle[chainNum][0] = [];\n*/\n      var resObject = {};\n      resObject.resi = resi;\n      resObject.name = resn;\n\n    me.icn3d.chainsSeq[chainNum].push(resObject);\n//        me.icn3d.chainsAn[chainNum][0].push(resi);\n//        me.icn3d.chainsAnTitle[chainNum][0].push('');\n\n    for (i = 0; i < bondCount; i++) {\n        line = lines[offset];\n        offset++;\n        var fromAtomid = parseInt(line.substr(0, 3)) - 1 + start;\n        var toAtomid = parseInt(line.substr(3, 3)) - 1 + start;\n        //var order = parseInt(line.substr(6, 3));\n        var order = line.substr(6, 3).trim();\n\n        if(!skipAtomids.hasOwnProperty(fromAtomid) && !skipAtomids.hasOwnProperty(toAtomid)) {\n            var from = atomid2serial[fromAtomid];\n            var to = atomid2serial[toAtomid];\n\n            me.icn3d.atoms[from].bonds.push(to);\n            me.icn3d.atoms[from].bondOrder.push(order);\n            me.icn3d.atoms[to].bonds.push(from);\n            me.icn3d.atoms[to].bondOrder.push(order);\n            if(order == '2') {\n                me.icn3d.doublebonds[from + '_' + to] = 1;\n                me.icn3d.doublebonds[to + '_' + from] = 1;\n            }\n            else if(order == '3') {\n                me.icn3d.triplebonds[from + '_' + to] = 1;\n                me.icn3d.triplebonds[to + '_' + from] = 1;\n            }\n        }\n    }\n\n    me.setMaxD();\n\n    me.showTitle();\n\n    return true;\n};\n\niCn3DUI.prototype.setMaxD = function () { var me = this;\n    var pmin = new THREE.Vector3( 9999, 9999, 9999);\n    var pmax = new THREE.Vector3(-9999,-9999,-9999);\n    var psum = new THREE.Vector3();\n    var cnt = 0;\n    // assign atoms\n    for (var i in me.icn3d.atoms) {\n        var atom = me.icn3d.atoms[i];\n        var coord = atom.coord;\n        psum.add(coord);\n        pmin.min(coord);\n        pmax.max(coord);\n        ++cnt;\n\n        if(atom.het) {\n          if($.inArray(atom.elem, me.icn3d.ionsArray) !== -1) {\n            me.icn3d.ions[atom.serial] = 1;\n          }\n          else {\n            me.icn3d.chemicals[atom.serial] = 1;\n          }\n        }\n    } // end of for\n\n\n    me.icn3d.pmin = pmin;\n    me.icn3d.pmax = pmax;\n\n    me.icn3d.cnt = cnt;\n\n    me.icn3d.maxD = me.icn3d.pmax.distanceTo(me.icn3d.pmin);\n    me.icn3d.center = psum.multiplyScalar(1.0 / me.icn3d.cnt);\n\n    if (me.icn3d.maxD < 5) me.icn3d.maxD = 5;\n    me.icn3d.oriMaxD = me.icn3d.maxD;\n    me.icn3d.oriCenter = me.icn3d.center.clone();\n};\n\n/**\n * @author Jiyao Wang <wangjiy@ncbi.nlm.nih.gov> / https://github.com/ncbi/icn3d\n */\n\n// generate a binary STL file for 3D printing\n// https://en.wikipedia.org/wiki/STL_(file_format)#Binary_STL\n/*\nUINT8[80] � Header\nUINT32 � Number of triangles\n\nforeach triangle\nREAL32[3] � Normal vector\nREAL32[3] � Vertex 1\nREAL32[3] � Vertex 2\nREAL32[3] � Vertex 3\nUINT16 � Attribute byte count\nend\n*/\niCn3DUI.prototype.saveStlFile = function( mat ){ \n    var me = this;\n    if(Object.keys(me.icn3d.dAtoms).length > 70000) {\n        alert('Please display a subset of the structure to export 3D files. Then merge the files for 3D printing...');\n        return [''];\n    }\n\n    me.prepareFor3Dprint();\n\n    var cntFaces = 0;\n    for(var i = 0, il = me.icn3d.mdl.children.length; i < il; ++i) {\n         var mesh = me.icn3d.mdl.children[i];\n         if(mesh.type === 'Sprite') continue;\n\n         var geometry = mesh.geometry;\n\n         var faces = geometry.faces;\n         if(faces !== undefined) {\n             for(var j = 0, jl = faces.length; j < jl; ++j) {\n                 ++cntFaces;\n             }\n         }\n    }\n\n    for(var i = 0, il = me.icn3d.mdl_ghost.children.length; i < il; ++i) {\n         var mesh = me.icn3d.mdl_ghost.children[i];\n         if(mesh.type === 'Sprite') continue;\n\n         var geometry = mesh.geometry;\n\n         var faces = geometry.faces;\n         if(faces !== undefined) {\n             for(var j = 0, jl = faces.length; j < jl; ++j) {\n                 ++cntFaces;\n             }\n         }\n    }\n\n    var blobArray = []; // hold blobs\n\n    var stlArray = new Uint8Array(84);\n\n    // UINT8[80] � Header\n    var title = 'STL file for the structure(s) ';\n    var structureArray = Object.keys(me.icn3d.structures);\n    for(var i = 0, il = structureArray.length; i < il; ++i) {\n        title += structureArray[i];\n        if(i < il - 1) title += ', ';\n    }\n\n    if(title.length > 80) title = title.substr(0, 80);\n\n    for(var i = 0; i < 80; ++i) {\n        if(i < title.length) {\n            stlArray[i] = me.passInt8([title.charCodeAt(i)])[0];\n        }\n        else {\n            stlArray[i] = me.passInt8([' '.charCodeAt(0)])[0];\n        }\n    }\n\n    // UINT32 � Number of triangles\n    if(me.icn3d.biomtMatrices !== undefined && me.icn3d.biomtMatrices.length > 1 && me.icn3d.bAssembly\n      && Object.keys(me.icn3d.dAtoms).length * me.icn3d.biomtMatrices.length <= me.icn3d.maxAtoms3DMultiFile ) {\n        stlArray = me.updateArray( stlArray, me.passInt32([cntFaces * me.icn3d.biomtMatrices.length]), 80 );\n    }\n    else {\n        stlArray = me.updateArray( stlArray, me.passInt32([cntFaces]), 80 );\n    }\n\n    blobArray.push(new Blob([stlArray],{ type: \"application/octet-stream\"}));\n\n    blobArray = me.processStlMeshGroup( me.icn3d.mdl, blobArray, mat );\n\n    blobArray = me.processStlMeshGroup( me.icn3d.mdl_ghost, blobArray, mat );\n\n   // assemblies\n   if(me.icn3d.biomtMatrices !== undefined && me.icn3d.biomtMatrices.length > 1 && me.icn3d.bAssembly\n     && Object.keys(me.icn3d.dAtoms).length * me.icn3d.biomtMatrices.length <= me.icn3d.maxAtoms3DMultiFile ) {\n        var identity = new THREE.Matrix4();\n        identity.identity();\n\n        for (var i = 0; i < me.icn3d.biomtMatrices.length; i++) {  // skip itself\n          var mat1 = me.icn3d.biomtMatrices[i];\n          if (mat1 === undefined) continue;\n\n          // skip itself\n          if(mat1.equals(identity)) continue;\n\n          blobArray = me.processStlMeshGroup( me.icn3d.mdl, blobArray, mat1 );\n\n          blobArray = me.processStlMeshGroup( me.icn3d.mdl_ghost, blobArray, mat1 );\n        }\n    }\n\n    //me.resetAfter3Dprint();\n\n    return blobArray;\n};\n\niCn3DUI.prototype.updateArray = function( array, inArray, indexBase ){ var me = this;\n    for( var i = 0, il = inArray.length; i < il; ++i ){\n        array[indexBase + i] = inArray[i];\n    };\n    return array;\n};\n\niCn3DUI.prototype.processStlMeshGroup = function( mdl, blobArray, mat ){ var me = this;\n    for(var i = 0, il = mdl.children.length; i < il; ++i) {\n         var mesh = mdl.children[i];\n         if(mesh.type === 'Sprite') continue;\n\n         var geometry = mesh.geometry;\n\n         var vertices = geometry.vertices;\n         var faces = geometry.faces;\n\n         if(faces === undefined) continue;\n\n         var position = mesh.position;\n         var scale = mesh.scale;\n\n         var matrix = mesh.matrix;\n\n         var stlArray = new Uint8Array(faces.length * 50);\n\n         var index = 0;\n\n         for(var j = 0, jl = faces.length; j < jl; ++j) {\n             var a = faces[j].a;\n             var b = faces[j].b;\n             var c = faces[j].c;\n             var normal = faces[j].normal;\n\n             var v1, v2, v3;\n\n             if(geometry.type == 'SphereGeometry' || geometry.type == 'BoxGeometry') {\n                 v1 = vertices[a].clone().multiply(scale).add(position);\n                 v2 = vertices[b].clone().multiply(scale).add(position);\n                 v3 = vertices[c].clone().multiply(scale).add(position);\n             }\n              else if(geometry.type == 'CylinderGeometry') {\n                 v1 = vertices[a].clone().applyMatrix4(matrix);\n                 v2 = vertices[b].clone().applyMatrix4(matrix);\n                 v3 = vertices[c].clone().applyMatrix4(matrix);\n             }\n             else {\n                 v1 = vertices[a].clone();\n                 v2 = vertices[b].clone();\n                 v3 = vertices[c].clone();\n             }\n\n             //REAL32[3] � Normal vector\n             //REAL32[3] � Vertex 1\n             //REAL32[3] � Vertex 2\n             //REAL32[3] � Vertex 3\n             //UINT16 � Attribute byte count\n\n             if(normal !== undefined) {\n                 if(mat !== undefined) normal.applyMatrix4(mat);\n\n                 stlArray = me.updateArray( stlArray, me.passFloat32([normal.x, normal.y, normal.z]), index );\n                 index += 12;\n             }\n             else {\n                 stlArray = me.updateArray( stlArray, me.passFloat32([0.0, 0.0, 0.0]), index );\n                 index += 12;\n             }\n\n             if(mat !== undefined) {\n                 v1.applyMatrix4(mat);\n                 v2.applyMatrix4(mat);\n                 v3.applyMatrix4(mat);\n             }\n\n             stlArray = me.updateArray( stlArray, me.passFloat32([v1.x, v1.y, v1.z]), index );\n             index += 12;\n             stlArray = me.updateArray( stlArray, me.passFloat32([v2.x, v2.y, v2.z]), index );\n             index += 12;\n             stlArray = me.updateArray( stlArray, me.passFloat32([v3.x, v3.y, v3.z]), index );\n             index += 12;\n\n             v1 = v2 = v3 = undefined;\n\n             stlArray = me.updateArray( stlArray, me.passInt16([0]), index );\n             index += 2;\n         }\n\n         blobArray.push(new Blob([stlArray],{ type: \"application/octet-stream\"}));\n         stlArray = null;\n    }\n\n    return blobArray;\n};\n\n/**\n * @author Jiyao Wang <wangjiy@ncbi.nlm.nih.gov> / https://github.com/ncbi/icn3d\n */\n\n//http://gun.teipir.gr/VRML-amgem/spec/part1/examples.html\niCn3DUI.prototype.saveVrmlFile = function( mat ){ var me = this;\n    if(Object.keys(me.icn3d.dAtoms).length > 50000) {\n        alert('Please display a subset of the structure to export 3D files. Then merge the files for 3D printing...');\n        return [''];\n    }\n\n    me.prepareFor3Dprint();\n\n    var vrmlStrArray = [];\n    vrmlStrArray.push('#VRML V2.0 utf8\\n');\n\n//    vrmlStrArray += 'Transform {\\n';\n//    vrmlStrArray += '        translation ' + (-1 * me.icn3d.center.x.toPrecision(4)).toString() + ' ' + (-1 * me.icn3d.center.y.toPrecision(4)).toString() + ' ' + (-1 * me.icn3d.center.z.toPrecision(4)).toString() + '\\n';\n//    vrmlStrArray += '        children [\\n';\n\n    var vertexCnt = 0;\n    var result = me.processVrmlMeshGroup( me.icn3d.mdl, vrmlStrArray, vertexCnt, mat );\n    vrmlStrArray = result.vrmlStrArray;\n    vertexCnt = result.vertexCnt;\n\n    result = me.processVrmlMeshGroup( me.icn3d.mdl_ghost, vrmlStrArray, vertexCnt, mat );\n    vrmlStrArray = result.vrmlStrArray;\n    vertexCnt = result.vertexCnt;\n\n   // assemblies\n   if(me.icn3d.biomtMatrices !== undefined && me.icn3d.biomtMatrices.length > 1 && me.icn3d.bAssembly\n     && Object.keys(me.icn3d.dAtoms).length * me.icn3d.biomtMatrices.length <= me.icn3d.maxAtoms3DMultiFile ) {\n        var identity = new THREE.Matrix4();\n        identity.identity();\n\n        for (var i = 0; i < me.icn3d.biomtMatrices.length; i++) {  // skip itself\n          var mat1 = me.icn3d.biomtMatrices[i];\n          if (mat1 === undefined) continue;\n\n          // skip itself\n          if(mat1.equals(identity)) continue;\n\n            result = me.processVrmlMeshGroup( me.icn3d.mdl, vrmlStrArray, vertexCnt, mat1 );\n            vrmlStrArray = result.vrmlStrArray;\n            vertexCnt = result.vertexCnt;\n\n            result = me.processVrmlMeshGroup( me.icn3d.mdl_ghost, vrmlStrArray, vertexCnt, mat1 );\n            vrmlStrArray = result.vrmlStrArray;\n            vertexCnt = result.vertexCnt;\n        }\n    }\n\n    // remove the last ',\\n';\n//    var vrmlStrArray = vrmlStrArray.substr(0, vrmlStrArray.lastIndexOf(',')) + '\\n';\n\n//    vrmlStrArray += '        ]\\n';\n//    vrmlStrArray += '}\\n';\n\n    //me.resetAfter3Dprint();\n\n    //return vrmlStrArray.join('');\n    return vrmlStrArray;\n};\n\n// The file lost face color after being repaired by https://service.netfabb.com/. It only works with vertex color\n// convert face color to vertex color\niCn3DUI.prototype.processVrmlMeshGroup = function( mdl, vrmlStrArray, vertexCnt, mat ){ var me = this;\n    for(var i = 0, il = mdl.children.length; i < il; ++i) {\n         var mesh = mdl.children[i];\n         if(mesh.type === 'Sprite') continue;\n\n         var geometry = mesh.geometry;\n\n         var materialType = mesh.material.type;\n         var bSurfaceVertex = (geometry.type == 'Surface') ? true : false;\n\n         var vertices = geometry.vertices;\n\n         if(vertices === undefined) continue;\n         vertexCnt += vertices.length;\n\n         var faces = geometry.faces;\n\n         var position = mesh.position;\n         var scale = mesh.scale;\n\n         var matrix = mesh.matrix;\n\n         var meshColor = new THREE.Color(1, 1, 1);\n         if(geometry.type == 'SphereGeometry' || geometry.type == 'BoxGeometry' || geometry.type == 'CylinderGeometry') {\n             if(mesh.material !== undefined) meshColor = mesh.material.color;\n         }\n\n         vrmlStrArray.push('Shape {\\n');\n         vrmlStrArray.push('geometry IndexedFaceSet {\\n');\n\n         vrmlStrArray.push('coord Coordinate { point [ ');\n\n         var vertexColorStrArray = [];\n         for(var j = 0, jl = vertices.length; j < jl; ++j) {\n             var vertex;\n             if(geometry.type == 'SphereGeometry' || geometry.type == 'BoxGeometry') {\n                 vertex = vertices[j].clone().multiply(scale).add(position);\n             }\n              else if(geometry.type == 'CylinderGeometry') {\n                 vertex = vertices[j].clone().applyMatrix4(matrix);\n             }\n             else {\n                 vertex = vertices[j].clone()\n             }\n\n             if(mat !== undefined) vertex.applyMatrix4(mat);\n\n             vrmlStrArray.push(vertex.x.toPrecision(5) + ' ' + vertex.y.toPrecision(5) + ' ' + vertex.z.toPrecision(5));\n             vertex = undefined;\n\n             if(j < jl - 1) vrmlStrArray.push(', ');\n\n             vertexColorStrArray.push(new THREE.Color(1, 1, 1));\n         }\n         vrmlStrArray.push(' ] }\\n');\n\n         var coordIndexStr = '', colorStr = '', colorIndexStr = '';\n         if(bSurfaceVertex) {\n             for(var j = 0, jl = faces.length; j < jl; ++j) {\n                 var a = faces[j].a;\n                 var b = faces[j].b;\n                 var c = faces[j].c;\n\n                 coordIndexStr += a + ' ' + b + ' ' + c;\n                 // http://www.lighthouse3d.com/vrml/tutorial/index.shtml?indfs\n                 // use -1 to separate polygons\n                 if(j < jl - 1) coordIndexStr += ', -1, ';\n\n                 // update vertexColorStrArray\n                 vertexColorStrArray[a] = faces[j].vertexColors[0];\n                 vertexColorStrArray[b] = faces[j].vertexColors[1];\n                 vertexColorStrArray[c] = faces[j].vertexColors[2];\n             }\n\n             for(var j = 0, jl = vertexColorStrArray.length; j < jl; ++j) {\n                 var color = vertexColorStrArray[j];\n                 colorStr += color.r.toPrecision(3) + ' ' + color.g.toPrecision(3) + ' ' + color.b.toPrecision(3);\n                 if(j < jl - 1) colorStr += ', ';\n             }\n\n             vrmlStrArray.push('coordIndex [ ' + coordIndexStr + ' ]\\n');\n             vrmlStrArray.push('color Color { color [ ' + colorStr + ' ] } colorPerVertex TRUE\\n');\n         }\n         else {\n             for(var j = 0, jl = faces.length; j < jl; ++j) {\n                 var a = faces[j].a;\n                 var b = faces[j].b;\n                 var c = faces[j].c;\n                 var color;\n                 if(geometry.type == 'SphereGeometry' || geometry.type == 'BoxGeometry' || geometry.type == 'CylinderGeometry') {\n                     color = meshColor;\n                 }\n                 else {\n                     color = faces[j].color;\n                 }\n\n                 coordIndexStr += a + ' ' + b + ' ' + c;\n                 // http://www.lighthouse3d.com/vrml/tutorial/index.shtml?indfs\n                 // use -1 to separate polygons\n                 if(j < jl - 1) coordIndexStr += ', -1, ';\n\n                 // update vertexColorStrArray\n                 vertexColorStrArray[a] = color;\n                 vertexColorStrArray[b] = color;\n                 vertexColorStrArray[c] = color;\n             }\n\n             for(var j = 0, jl = vertexColorStrArray.length; j < jl; ++j) {\n                 var color = vertexColorStrArray[j];\n                 colorStr += color.r.toPrecision(3) + ' ' + color.g.toPrecision(3) + ' ' + color.b.toPrecision(3);\n                 if(j < jl - 1) colorStr += ', ';\n             }\n\n             vrmlStrArray.push('coordIndex [ ' + coordIndexStr + ' ]\\n');\n             vrmlStrArray.push('color Color { color [ ' + colorStr + ' ] } colorPerVertex TRUE\\n');\n         }\n\n         vrmlStrArray.push('  }\\n');\n         vrmlStrArray.push('}\\n');\n    }\n\n    return {'vrmlStrArray': vrmlStrArray,'vertexCnt': vertexCnt};\n};\n\n/**\n * @author Jiyao Wang <wangjiy@ncbi.nlm.nih.gov> / https://github.com/ncbi/icn3d\n */\n\niCn3DUI.prototype.setThichknessFor3Dprint = function(  ){ var me = this;\n    me.icn3d.lineRadius = 1; //0.1; // hbonds, distance lines\n    me.icn3d.coilWidth = 1.2; //0.3; // style cartoon-coil\n    me.icn3d.cylinderRadius = 0.8; //0.4; // style stick\n    me.icn3d.traceRadius = 1; //0.4; // style c alpha trace, nucleotide stick\n    me.icn3d.dotSphereScale = 0.6; //0.3; // style ball and stick, dot\n\n    me.icn3d.sphereRadius = 1.5; // style sphere\n    //me.icn3d.cylinderHelixRadius = 1.6; // style sylinder and plate\n\n    me.icn3d.ribbonthickness = 1.0; //0.2; // style ribbon, nucleotide cartoon, stand thickness\n    me.icn3d.helixSheetWidth = 2.0; //1.3; // style ribbon, stand thickness\n    me.icn3d.nucleicAcidWidth = 1.4; //0.8; // nucleotide cartoon\n};\n\niCn3DUI.prototype.prepareFor3Dprint = function(  ){ var me = this;\n    // turn off hilight\n    me.icn3d.bShowHighlight = false;\n    me.icn3d.removeHlObjects();\n\n    me.bDashedLines = false;\n\n    if(!me.bSetThickness && me.cfg.cid === undefined) {\n        me.setThichknessFor3Dprint();\n    }\n\n    // change hbond and distance lines from dashed to solid for 3d printing\n    if(me.icn3d.lines['hbond'] !== undefined) {\n        for(var i = 0, il = me.icn3d.lines['hbond'].length; i < il; ++i) {\n            var line = me.icn3d.lines['hbond'][i];\n            line.dashed = false;\n\n            me.bDashedLines = true;\n        }\n    }\n\n/*\n    // hbonds within selection\n    if(me.icn3d.lines['stabilizer'] !== undefined) {\n        for(var i = 0, il = me.icn3d.lines['stabilizer'].length; i < il; ++i) {\n            var line = me.icn3d.lines['stabilizer'][i];\n            line.dashed = false;\n\n            me.bDashedLines = true;\n        }\n    }\n*/\n\n    if(me.icn3d.lines['distance'] !== undefined) {\n        for(var i = 0, il = me.icn3d.lines['distance'].length; i < il; ++i) {\n            var line = me.icn3d.lines['distance'][i];\n            line.dashed = false;\n\n            me.bDashedLines = true;\n        }\n    }\n\n    me.icn3d.draw();\n};\n\niCn3DUI.prototype.resetAfter3Dprint = function(  ){ var me = this;\n    // change hbond and distance lines from dashed to solid for 3d printing\n    //if(me.bDashedLines) {\n      if(me.icn3d.lines['hbond'] !== undefined) {\n        for(var i = 0, il = me.icn3d.lines['hbond'].length; i < il; ++i) {\n            var line = me.icn3d.lines['hbond'][i];\n            line.dashed = true;\n        }\n      }\n\n      if(me.icn3d.lines['distance'] !== undefined) {\n        for(var i = 0, il = me.icn3d.lines['distance'].length; i < il; ++i) {\n            var line = me.icn3d.lines['distance'][i];\n            line.dashed = true;\n        }\n      }\n\n      me.icn3d.lineRadius = 0.1; // hbonds, distance lines\n      me.icn3d.coilWidth = 0.3; // style cartoon-coil\n      me.icn3d.cylinderRadius = 0.4; // style stick\n      me.icn3d.traceRadius = 0.4; //0.2; // style c alpha trace, nucleotide stick\n      me.icn3d.dotSphereScale = 0.3; // style ball and stick, dot\n      me.icn3d.sphereRadius = 1.5; // style sphere\n      me.icn3d.cylinderHelixRadius = 1.6; // style sylinder and plate\n\n      me.icn3d.ribbonthickness = 0.2; // style ribbon, nucleotide cartoon, stand thickness\n      me.icn3d.helixSheetWidth = 1.3; // style ribbon, nucleotide cartoon, stand thickness\n      me.icn3d.nucleicAcidWidth = 0.8; // nucleotide cartoon\n\n      //me.icn3d.draw();\n    //}\n};\n\niCn3DUI.prototype.removeOneStabilizer = function(rmLineArray) { var me = this;\n    var index;\n    for(var i = 0, il = me.icn3d.pairArray.length; i < il; i += 2) {\n        var atom1 = me.getResidueRepAtom(me.icn3d.pairArray[i]);\n        var atom2 = me.getResidueRepAtom(me.icn3d.pairArray[i+1]);\n\n        if(rmLineArray != undefined) {\n            for(var j = 0, jl = rmLineArray.length; j < jl; j += 2) {\n                var atomb1 = me.getResidueRepAtom(rmLineArray[j]);\n                var atomb2 = me.getResidueRepAtom(rmLineArray[j+1]);\n                if( (atom1.serial == atomb1.serial && atom2.serial == atomb2.serial)\n                  || (atom1.serial == atomb2.serial && atom2.serial == atomb1.serial)\n                  ) {\n                    index = i;\n                    break;\n                }\n            }\n        }\n\n        if(index !== undefined) break;\n    }\n\n    if(index !== undefined) {\n        me.icn3d.pairArray.splice(index, 2); // removetwoelements at index i\n    }\n};\n\niCn3DUI.prototype.outputSelection = function() { var me = this;\n    var residues = {};\n    for(var i in me.icn3d.hAtoms) {\n        var residueId = me.icn3d.atoms[i].structure + '_' + me.icn3d.atoms[i].chain + '_' + me.icn3d.atoms[i].resi;\n        residues[residueId] = 1;\n    }\n\n    var residueArray = Object.keys(residues).sort(function(a, b) {\n                if(a !== '' && !isNaN(a)) {\n                    return parseInt(a) - parseInt(b);\n                }\n                else {\n                    var lastPosA = a.lastIndexOf('_');\n                    var lastPosB = b.lastIndexOf('_');\n                    if(a.substr(0, lastPosA) < b.substr(0, lastPosA)) return -1;\n                    else if(a.substr(0, lastPosA) > b.substr(0, lastPosA)) return 1;\n                    else if(a.substr(0, lastPosA) == b.substr(0, lastPosA)) {\n                        if(parseInt(a.substr(lastPosA + 1)) < parseInt(b.substr(lastPosB + 1)) ) return -1;\n                        else if(parseInt(a.substr(lastPosA + 1)) > parseInt(b.substr(lastPosB + 1)) ) return 1;\n                        else if(parseInt(a.substr(lastPosA + 1)) == parseInt(b.substr(lastPosB + 1)) ) return 0;\n                    }\n                }\n            });\n\n    var output = \"<table><tr><th>Structure</th><th>Chain</th><th>Residue Number</th></tr>\";\n    for(var i = 0, il = residueArray.length; i < il; ++i) {\n        //if(typeof(residueArray[i]) === 'function') continue;\n\n        var firstPos = residueArray[i].indexOf('_');\n        var lastPos = residueArray[i].lastIndexOf('_');\n        var structure = residueArray[i].substr(0, firstPos);\n        var chain = residueArray[i].substr(firstPos + 1, lastPos - firstPos - 1);\n        var resi = residueArray[i].substr(lastPos + 1);\n\n        output += \"<tr><td>\" + structure + \"</td><td>\" + chain + \"</td><td>\" + resi + \"</td></tr>\";\n    }\n\n    var file_pref = (me.inputid) ? me.inputid : \"custom\";\n    me.saveFile(file_pref + '_residues.txt', 'html', output);\n\n};\n\n// within the display atoms, show the bonds between C alpha or nucleotide N3\n// 1. add hbonds in protein and nucleotide\n// 2. add stabilizer between chemicals/ions and proteins\niCn3DUI.prototype.addStabilizer = function () { var me = this;\n    var threshold = 3.5; //between 3.2 and 4.0\n\n    var minHbondLen = 3.2;\n\n    //me.icn3d.opts[\"stabilizer\"] = \"yes\";\n    me.icn3d.opts[\"water\"] = \"dot\";\n\n    if(Object.keys(me.icn3d.dAtoms).length > 0) {\n\n        // 1. add hbonds in nucleotide\n        var atomHbond = {};\n        var chain_resi_atom;\n\n        var maxlengthSq = threshold * threshold;\n        var minlengthSq = minHbondLen * minHbondLen;\n\n        for (var i in me.icn3d.dAtoms) {\n          var atom = me.icn3d.atoms[i];\n\n          // protein: N, O\n          // DNA: C: O2, N3, N4; G: N1, N2, O6; A: N1, N6; T: N1, N6\n          if(me.icn3d.nucleotides.hasOwnProperty(atom.serial) && (atom.name === \"N1\" || atom.name === \"N2\"\n              || atom.name === \"N3\" || atom.name === \"N4\" || atom.name === \"N6\" || atom.name === \"O2\" || atom.name === \"O6\")\n              ) { // calculate hydrogen bond in residue backbone\n            chain_resi_atom = atom.structure + \"_\" + atom.chain + \"_\" + atom.resi + \"_\" + atom.name;\n\n            atomHbond[chain_resi_atom] = atom;\n          }\n        } // end of for (var i in molecule) {\n\n        var atomArray = Object.keys(atomHbond);\n        var len = atomArray.length;\n\n        if(me.icn3d.pairArray === undefined) me.icn3d.pairArray = [];\n        for (var i = 0; i < len; ++i) {\n            for (var j = i + 1; j < len; ++j) {\n              var atomid1 = atomArray[i];\n              var atomid2 = atomArray[j];\n\n              var xdiff = Math.abs(atomHbond[atomid1].coord.x - atomHbond[atomid2].coord.x);\n              if(xdiff > threshold) continue;\n\n              var ydiff = Math.abs(atomHbond[atomid1].coord.y - atomHbond[atomid2].coord.y);\n              if(ydiff > threshold) continue;\n\n              var zdiff = Math.abs(atomHbond[atomid1].coord.z - atomHbond[atomid2].coord.z);\n              if(zdiff > threshold) continue;\n\n              var dist = xdiff * xdiff + ydiff * ydiff + zdiff * zdiff;\n              if(dist > maxlengthSq || dist < minlengthSq) continue;\n\n              // output hydrogen bonds\n              me.icn3d.pairArray.push(atomHbond[atomid1].serial);\n              me.icn3d.pairArray.push(atomHbond[atomid2].serial);\n            } // end of for (var j\n        } // end of for (var i\n\n        // 2. add stabilizer for chemicals/ions and proteins\n        var maxDistance = 6; // connect within 6 angstrom, use 6 since some proteins such as 1FFK_A has large distance between residues\n\n        //displayed residues\n        var displayResidueHash = {};\n        for(var i in me.icn3d.dAtoms) {\n            var atom = me.icn3d.atoms[i];\n\n            var residueid = atom.structure + \"_\" + atom.chain + \"_\" + atom.resi;\n            displayResidueHash[residueid] = 1;\n        }\n\n        // connect chemicals, ions, and every third protein residues to neighbors (within 4 angstrom)\n        var residueHash = {};\n        //chemicals\n        for(var i in me.icn3d.chemicals) {\n            var atom = me.icn3d.atoms[i];\n\n            var residueid = atom.structure + \"_\" + atom.chain + \"_\" + atom.resi;\n            if(displayResidueHash.hasOwnProperty(residueid)) residueHash[residueid] = 1;\n        }\n        //ions\n        for(var i in me.icn3d.ions) {\n            var atom = me.icn3d.atoms[i];\n\n            var residueid = atom.structure + \"_\" + atom.chain + \"_\" + atom.resi;\n            if(displayResidueHash.hasOwnProperty(residueid)) residueHash[residueid] = 1;\n        }\n\n        //every third protein residues\n        var chainArray = Object.keys(me.icn3d.chains);\n        for(var i = 0, il = chainArray.length; i < il; ++i) {\n            var chainid = chainArray[i];\n            var coilCnt = 0;\n            var residueid;\n            var prevResi = 0;\n            for(var j = 0, jl = me.icn3d.chainsSeq[chainid].length; j < jl; ++j) {\n                residueid = chainid + '_' + me.icn3d.chainsSeq[chainid][j].resi;\n                if(me.icn3d.secondaries[residueid] == 'c' || me.icn3d.secondaries[residueid] == 'E' || me.icn3d.secondaries[residueid] == 'H') {\n                    // add every third residue\n                    if(coilCnt % 3 == 0 || me.icn3d.chainsSeq[chainid][j].resi != prevResi + 1) {\n                        if(displayResidueHash.hasOwnProperty(residueid)) residueHash[residueid] = 1;\n                    }\n\n                    ++coilCnt;\n\n                    prevResi = me.icn3d.chainsSeq[chainid][j].resi;\n                }\n            }\n\n            // last residue\n            if(me.icn3d.secondaries[residueid] == 'c' || me.icn3d.secondaries[residueid] == 'E' || me.icn3d.secondaries[residueid] == 'H') {\n                if(displayResidueHash.hasOwnProperty(residueid)) residueHash[residueid] = 1;\n            }\n        }\n\n        var residueArray = Object.keys(residueHash);\n\n        if(me.icn3d.pairArray === undefined) me.icn3d.pairArray = [];\n        // displayed atoms except water\n        var dAtomsNotWater = me.icn3d.exclHash(me.icn3d.dAtoms, me.icn3d.water);\n\n        for(var i = 0, il = residueArray.length; i < il; ++i) {\n            var residueid = residueArray[i];\n            var ss = me.icn3d.secondaries[residueid];\n\n            //var sphere = me.icn3d.getNeighboringAtoms(me.icn3d.dAtoms, me.icn3d.hash2Atoms(me.icn3d.residues[residueid]), maxDistance);\n            var sphere = me.icn3d.getNeighboringAtoms(dAtomsNotWater, me.icn3d.hash2Atoms(me.icn3d.residues[residueid]), maxDistance);\n\n            // original atoms\n            var sphereArray = Object.keys(sphere).sort();\n            var atomArray = Object.keys(me.icn3d.residues[residueid]).sort();\n\n            var bProtein = false;\n            if(me.icn3d.proteins.hasOwnProperty(atomArray[0])) { // protein\n                atomArray = [atomArray[0]]; // one atom from the residue\n\n                bProtein = true;\n\n                // remove the previous, current and the next residues, chemicals, and ions from \"sphere\"\n                var resi = parseInt(residueid.substr(residueid.lastIndexOf('_') + 1));\n\n                var simSphere = {};\n                for(var serial in sphere) {\n                    if(me.icn3d.chemicals.hasOwnProperty(serial) || me.icn3d.ions.hasOwnProperty(serial)) continue;\n\n                    var atom = me.icn3d.atoms[serial];\n                    if( (ss == 'c' && (atom.resi > resi + 1 || atom.resi < resi - 1) )\n                      || (ss == 'E' && (atom.resi > resi + 2 || atom.resi < resi - 2) )\n                      || (ss == 'H' && (atom.resi > resi + 4 || atom.resi < resi - 4) )\n                      ) {\n                        simSphere[serial] = 1;\n                    }\n                }\n\n                sphereArray = Object.keys(simSphere).sort();\n            }\n\n            // one line per each protein residue\n            if(sphereArray.length > 0 && atomArray.length > 0) {\n                if(bProtein) {\n                        var inter2 = parseInt((sphereArray.length + 0.5) / 2.0);\n                        me.icn3d.pairArray.push(atomArray[0]);\n                        me.icn3d.pairArray.push(sphereArray[inter2]);\n                }\n                else { // chemicals or ions\n                    var n = 10;\n                    var step = parseInt(sphereArray.length / (n+1));\n\n                    for(var j = 0, jl = atomArray.length; j < jl; ++j) {\n                        if(j % n == 0) { // make one line for every other 10 atoms\n                            var sphereIndex = parseInt(j/n) * step;\n                            var inter2 = (sphereIndex < sphereArray.length) ?  sphereIndex : sphereArray.length - 1;\n                            me.icn3d.pairArray.push(atomArray[j]);\n                            me.icn3d.pairArray.push(sphereArray[inter2]);\n\n                            if(atomArray.length < n + 1) {\n                                me.icn3d.pairArray.push(atomArray[j]);\n                                me.icn3d.pairArray.push(sphereArray[sphereArray.length - 1]);\n                            }\n                        }\n                    }\n                } // else\n            } // if(sphereArray.length > 0) {\n        } // for\n\n        //me.updateStabilizer();\n\n        //me.prepareFor3Dprint();\n    }\n};\n\niCn3DUI.prototype.hideStabilizer = function () { var me = this;\n    //me.icn3d.opts[\"stabilizer\"] = \"no\";\n    me.icn3d.pairArray = [];\n\n    me.icn3d.lines['stabilizer'] = [];\n    me.icn3d.stabilizerpnts = [];\n\n    for(var i in me.icn3d.water) {\n        me.icn3d.atoms[i].style = me.icn3d.opts[\"water\"];\n    }\n\n    //me.icn3d.draw();\n};\n\niCn3DUI.prototype.getResidueRepPos = function (serial) { var me = this;\n    var atomIn = me.icn3d.atoms[serial];\n    var residueid = atomIn.structure + \"_\" + atomIn.chain + \"_\" + atomIn.resi;\n\n    var pos;\n    if(!me.icn3d.proteins.hasOwnProperty(serial) && !me.icn3d.nucleotides.hasOwnProperty(serial)) { // chemicals or ions\n        pos = atomIn.coord;\n    }\n    else {\n        for(var i in me.icn3d.residues[residueid]) {\n            var atom = me.icn3d.atoms[i];\n            if(atom.name === 'N3') { // nucleotide: N3\n                pos = me.icn3d.atoms[i].coord;\n                break;\n            }\n            else if(atom.name === 'CA' && atom.ss == 'coil') { // protein coil: CA\n                pos = me.icn3d.atoms[i].coord;\n                break;\n            }\n            else if(atom.name === 'CA' && (atom.ss == 'helix' || atom.ss == 'sheet')) { // protein secondary: CA\n                pos = (me.icn3d.atoms[i].coord2 !== undefined) ? me.icn3d.atoms[i].coord2 : me.icn3d.atoms[i].coord;\n                break;\n            }\n        }\n    }\n\n    if(pos === undefined) pos = atomIn.coord;\n\n    return pos;\n};\n\niCn3DUI.prototype.getResidueRepAtom = function (serial) { var me = this;\n    var atomIn = me.icn3d.atoms[serial];\n    var residueid = atomIn.structure + \"_\" + atomIn.chain + \"_\" + atomIn.resi;\n\n    var foundAtom;\n    if(!me.icn3d.proteins.hasOwnProperty(serial) && !me.icn3d.nucleotides.hasOwnProperty(serial)) { // chemicals or ions\n        foundAtom = atomIn;\n    }\n    else {\n        for(var i in me.icn3d.residues[residueid]) {\n            var atom = me.icn3d.atoms[i];\n            if(atom.name === 'CA' || atom.name === 'N3') { // protein: CA, nucleotide: N3\n                foundAtom = me.icn3d.atoms[i];\n                break;\n            }\n        }\n    }\n\n    if(foundAtom === undefined) foundAtom = atomIn;\n\n    return foundAtom;\n};\n\n\n/**\n * @author Jiyao Wang <wangjiy@ncbi.nlm.nih.gov> / https://github.com/ncbi/icn3d\n */\n\niCn3DUI.prototype.downloadAlignment = function (align) { var me = this;\n    me.opts['proteins'] = 'c alpha trace';\n    me.icn3d.opts['proteins'] = 'c alpha trace';\n\n    if(me.bFullUi && me.isMac() && me.isMobile) {\n        me.MENU_WIDTH = 950; // have enough space to show image in iphone\n\n        me.setViewerWidthHeight();\n\n        var width = me.WIDTH - me.LESSWIDTH;\n        var height = me.HEIGHT - me.LESSHEIGHT;\n\n        me.resizeCanvas(width, height, true, false);\n    }\n\n    var alignArray = align.split(',');\n    //var ids_str = (alignArray.length === 2? 'uids=' : 'ids=') + align;\n    var ids_str = 'ids=' + align;\n    //var url = 'https://www.ncbi.nlm.nih.gov/Structure/vastplus/vastplus.cgi?cmd=c&w3d&' + ids_str;\n    //var url2 = 'https://www.ncbi.nlm.nih.gov/Structure/vastplus/vastplus.cgi?cmd=c1&d&' + ids_str;\n\n    var url = 'https://www.ncbi.nlm.nih.gov/Structure/vastplus/vastplus.cgi?v=2&cmd=c&b=1&s=1&w3d&' + ids_str;\n    var url2 = 'https://www.ncbi.nlm.nih.gov/Structure/vastplus/vastplus.cgi?v=2&cmd=c1&b=1&s=1&d=1&' + ids_str;\n\n    if(me.cfg.inpara !== undefined) {\n      url += me.cfg.inpara;\n      url2 += me.cfg.inpara;\n    }\n\n    me.icn3d.bCid = undefined;\n\n    // define for 'align' only\n    me.icn3d.pdbid_chain2title = {};\n\n    if(me.chainids2resids === undefined) me.chainids2resids = {}; // me.chainids2resids[chainid1][chainid2] = [resid, resid]\n\n    var request = $.ajax({\n       url: url2,\n       dataType: 'jsonp',\n       cache: true\n    });\n\n    var seqalign = {};\n\n    var chained = request.then(function( data ) {\n        seqalign = data.seqalign;\n        if(seqalign === undefined) {\n            alert(\"These two MMDB IDs \" + alignArray + \" do not have 3D alignment data.\");\n            return false;\n        }\n\n        // set me.icn3d.pdbid_molid2chain and me.icn3d.chainsColor\n        me.icn3d.pdbid_molid2chain = {};\n        me.icn3d.chainsColor = {};\n        //me.mmdbidArray = [];\n        //for(var i in data) {\n\n        for(var i = 0, il = 2; i < il; ++i) {\n            //if(i === 'seqalign') continue;\n            var mmdbTmp = data['alignedStructures'][0][i];\n\n            //var pdbid = (data[i].pdbid !== undefined) ? data[i].pdbid : i;\n            var pdbid = (mmdbTmp.pdbId !== undefined) ? mmdbTmp.pdbId : mmdbTmp.mmdbId;\n            //me.mmdbidArray.push(pdbid); // here two molecules are in alphabatic order, themaster molecule could not be the first one\n\n            var chainNameHash = {}; // chain name may be the same in assembly\n            for(var molid in mmdbTmp.molecules) {\n              var chainName = mmdbTmp.molecules[molid].chain.trim();\n              if(chainNameHash[chainName] === undefined) {\n                  chainNameHash[chainName] = 1;\n              }\n              else {\n                  ++chainNameHash[chainName];\n              }\n\n              var finalChain = (chainNameHash[chainName] === 1) ? chainName : chainName + chainNameHash[chainName].toString();\n\n              me.icn3d.pdbid_molid2chain[pdbid + '_' + molid] = finalChain;\n\n              if(mmdbTmp.molecules[molid].kind === 'p' || mmdbTmp.molecules[molid].kind === 'n') {\n                  me.icn3d.chainsColor[pdbid + '_' + finalChain] = new THREE.Color(me.GREY8);\n              }\n            }\n        }\n\n        //var index = 0;\n        //for(var mmdbid in data) {\n        for(var i = 0, il = 2; i < il; ++i) {\n            //if(index < 2) {\n                var mmdbTmp = data['alignedStructures'][0][i];\n\n                var pdbid = mmdbTmp.pdbId;\n\n                var molecule = mmdbTmp.molecules;\n                for(var molname in molecule) {\n                    var chain = molecule[molname].chain;\n                    me.icn3d.pdbid_chain2title[pdbid + '_' + chain] = molecule[molname].name;\n                }\n            //}\n\n            //++index;\n        }\n\n        // get the color for each aligned chain pair\n        me.alignmolid2color = [];\n        me.alignmolid2color[0] = {};\n        me.alignmolid2color[1] = {};\n        var colorLength = me.icn3d.stdChainColors.length;\n\n        for(var i = 0, il = seqalign.length; i < il; ++i) {\n            var molid1 = seqalign[i][0].moleculeId;\n            var molid2 = seqalign[i][1].moleculeId;\n\n            me.alignmolid2color[0][molid1] = (i+1).toString();\n            me.alignmolid2color[1][molid2] = (i+1).toString();\n        }\n\n        return $.ajax({\n          url: url,\n          dataType: 'jsonp',\n          //jsonp: 'jpf',\n          cache: true,\n          beforeSend: function() {\n              me.showLoading();\n          },\n          complete: function() {\n              me.hideLoading();\n          }\n        });\n    });\n\n    chained.done(function( data ) { // url\n        if (data.atoms !== undefined) {\n            me.icn3d.init();\n\n            me.loadAtomDataIn(data, undefined, 'align', seqalign);\n\n            if(me.cfg.align === undefined && Object.keys(me.icn3d.structures).length == 1) {\n                $(\"#\" + me.pre + \"alternateWrapper\").hide();\n            }\n\n            // show all\n            var allAtoms = {};\n            for(var i in me.icn3d.atoms) {\n                allAtoms[i] = 1;\n            }\n            me.icn3d.dAtoms = allAtoms;\n            me.icn3d.hAtoms = allAtoms;\n\n            me.icn3d.setAtomStyleByOptions(me.opts);\n            // change the default color to \"Identity\"\n            me.icn3d.setColorByOptions(me.opts, me.icn3d.atoms);\n\n            //var mmdbidArray = me.inputid.split('_');\n            me.mmdbidArray = [];\n            for(var i = 0, il = data.alignedStructures[0].length; i < il; ++i) {\n                me.mmdbidArray.push(data.alignedStructures[0][i].pdbId);\n            }\n\n            me.renderStructure();\n\n            if(me.cfg.rotate !== undefined) me.rotStruc(me.cfg.rotate, true);\n\n            me.html2ddgm = '';\n\n            //setTimeout(function(){\n            //    me.set2DDiagramsForAlign(me.mmdbidArray[0].toUpperCase(), me.mmdbidArray[1].toUpperCase());\n            //}, 0);\n\n            // by default, open the seq alignment window\n            //if(me.cfg.show2d !== undefined && me.cfg.show2d) me.openDialog(me.pre + 'dl_2ddgm', 'Interactions');\n            if(me.cfg.showalignseq !== undefined && me.cfg.showalignseq) {\n                me.openDialog(me.pre + 'dl_alignment', 'Select residues in aligned sequences');\n            }\n\n            if(me.cfg.show2d !== undefined && me.cfg.show2d && me.bFullUi) {\n                me.set2DDiagramsForAlign(me.mmdbidArray[0].toUpperCase(), me.mmdbidArray[1].toUpperCase());\n            }\n\n            //if(me.cfg.showseq !== undefined && me.cfg.showseq) me.openDialog(me.pre + 'dl_selectresidues', 'Select residues in sequences');\n\n            if(me.deferred !== undefined) me.deferred.resolve(); if(me.deferred2 !== undefined) me.deferred2.resolve();\n        }\n        else {\n            alert('invalid atoms data.');\n            return false;\n        }\n    });\n};\n\niCn3DUI.prototype.set2DDiagramsForAlign = function (mmdbid1, mmdbid2) { var me = this;\n   me.openDialog(me.pre + 'dl_2ddgm', 'Interactions');\n\n   var url1=\"https://www.ncbi.nlm.nih.gov/Structure/mmdb/mmdb_strview.cgi?v=2&program=icn3d&uid=\"+mmdbid1+\"&intrac=1\";\n   var url2=\"https://www.ncbi.nlm.nih.gov/Structure/mmdb/mmdb_strview.cgi?v=2&program=icn3d&uid=\"+mmdbid2+\"&intrac=1\";\n\n   if(me.cfg.inpara !== undefined) {\n      url1 += me.cfg.inpara;\n      url2 += me.cfg.inpara;\n   }\n\n   var request1 = $.ajax({\n        url: url1,\n        dataType: 'jsonp',\n        cache: true\n   });\n\n   var request2 = request1.then(function( data ) {\n        me.interactionData1 = data;\n\n        me.html2ddgm = '';\n\n        me.draw2Ddgm(data, mmdbid1, 0);\n        if(me.cfg.show2d !== undefined && me.cfg.show2d) me.openDialog(me.pre + 'dl_2ddgm', 'Interactions');\n\n        return $.ajax({\n          url: url2,\n          dataType: 'jsonp',\n          cache: true\n        });\n   });\n\n   request2.done(function( data ) {\n        me.interactionData2 = data;\n\n        me.draw2Ddgm(data, mmdbid2, 1);\n\n        me.html2ddgm += \"<br>\" + me.set2DdgmNote(true);\n        $(\"#\" + me.pre + \"dl_2ddgm\").html(me.html2ddgm);\n\n        me.b2DShown = true;\n        //if(me.cfg.show2d !== undefined && me.cfg.show2d) me.openDialog(me.pre + 'dl_2ddgm', 'Interactions');\n\n        if(me.deferredViewinteraction !== undefined) me.deferredViewinteraction.resolve();\n   });\n};\n\niCn3DUI.prototype.download2Ddgm = function(mmdbid, structureIndex) {var me = this;\n/*\n  me.deferred3 = $.Deferred(function() {\n    var url=\"https://www.ncbi.nlm.nih.gov/Structure/mmdb/mmdb_strview.cgi?uid=\"+mmdbid+\"&format=json&intrac=3\";\n\n   if(me.cfg.inpara !== undefined) {\n      url += me.cfg.inpara;\n   }\n\n    $.ajax({\n        url: url,\n        dataType: 'jsonp',\n        tryCount : 0,\n        retryLimit : 1,\n        success: function( data ) {\n            me.draw2Ddgm(data, mmdbid, structureIndex);\n\n            if(me.cfg.show2d !== undefined && me.cfg.show2d) me.openDialog(me.pre + 'dl_2ddgm', 'Interactions');\n            if(me.deferred3 !== undefined) me.deferred3.resolve();\n        },\n        error : function(xhr, textStatus, errorThrown ) {\n            this.tryCount++;\n            if (this.tryCount <= this.retryLimit) {\n                //try again\n                $.ajax(this);\n                return;\n            }\n            return;\n        }\n    });\n  });\n\n  return me.deferred3.promise();\n*/\n\n    me.set2DDiagrams(mmdbid);\n};\n\niCn3DUI.prototype.set2DDiagrams = function (mmdbid) { var me = this;\n    me.openDialog(me.pre + 'dl_2ddgm', 'Interactions');\n\n    if(me.b2DShown === undefined || !me.b2DShown) {\n        me.html2ddgm = '';\n\n        me.draw2Ddgm(me.interactionData, mmdbid);\n\n        me.html2ddgm += \"<br>\" + me.set2DdgmNote();\n        $(\"#\" + me.pre + \"dl_2ddgm\").html(me.html2ddgm);\n    }\n\n    me.b2DShown = true;\n};\n\niCn3DUI.prototype.setSeqAlign = function (seqalign, alignedStructures) { var me = this;\n      //loadSeqAlignment\n      var alignedAtoms = {};\n      var mmdbid1 = alignedStructures[0][0].pdbId;\n      var mmdbid2 = alignedStructures[0][1].pdbId;\n\n      me.conservedName1 = mmdbid1 + '_cons';\n      me.nonConservedName1 = mmdbid1 + '_ncons';\n      me.notAlignedName1 = mmdbid1 + '_nalign';\n\n      me.conservedName2 = mmdbid2 + '_cons';\n      me.nonConservedName2 = mmdbid2 + '_ncons';\n      me.notAlignedName2 = mmdbid2 + '_nalign';\n\n      me.consHash1 = {};\n      me.nconsHash1 = {};\n      me.nalignHash1 = {};\n\n      me.consHash2 = {};\n      me.nconsHash2 = {};\n      me.nalignHash2 = {};\n\n      for (var i = 0, il = seqalign.length; i < il; ++i) {\n          // first sequence\n          var alignData = seqalign[i][0];\n          var molid1 = alignData.moleculeId;\n\n          var chain1 = me.icn3d.pdbid_molid2chain[mmdbid1 + '_' + molid1];\n          var chainid1 = mmdbid1 + '_' + chain1;\n\n          var id2aligninfo = {};\n          var start = alignData.sequence.length, end = -1;\n          var bStart = false;\n          for(var j = 0, jl = alignData.sequence.length; j < jl; ++j) {\n              // 0: internal resi id, 1: pdb resi id, 2: resn, 3: aligned or not\n              //var resi = alignData.sequence[j][1];\n              var resi = alignData.sequence[j][0];\n              var resn = (alignData.sequence[j][2] === '~') ? '-' : alignData.sequence[j][2];\n              //resn = resn.toUpperCase();\n\n              var aligned = (alignData.sequence[j][3]) ? 1 : 0; // alignData.sequence[j][3]: 0, false, 1, true\n\n              if(aligned == 1) {\n                  if(j < start && !bStart) {\n                      start = j;\n                      bStart = true; // set start just once\n                  }\n                  if(j > end) end = j;\n              }\n\n              id2aligninfo[j] = {\"resi\": resi, \"resn\": resn, \"aligned\": aligned};\n          }\n\n          // second sequence\n          alignData = seqalign[i][1];\n          var molid2 = alignData.moleculeId;\n\n          var chain2 = me.icn3d.pdbid_molid2chain[mmdbid2 + '_' + molid2];\n          var chainid2 = mmdbid2 + '_' + chain2;\n\n          // annoation title for the master seq only\n          if(me.icn3d.alnChainsAnTtl[chainid1] === undefined ) me.icn3d.alnChainsAnTtl[chainid1] = [];\n          if(me.icn3d.alnChainsAnTtl[chainid1][0] === undefined ) me.icn3d.alnChainsAnTtl[chainid1][0] = [];\n          if(me.icn3d.alnChainsAnTtl[chainid1][1] === undefined ) me.icn3d.alnChainsAnTtl[chainid1][1] = [];\n          if(me.icn3d.alnChainsAnTtl[chainid1][2] === undefined ) me.icn3d.alnChainsAnTtl[chainid1][2] = [];\n          if(me.icn3d.alnChainsAnTtl[chainid1][3] === undefined ) me.icn3d.alnChainsAnTtl[chainid1][3] = [];\n          if(me.icn3d.alnChainsAnTtl[chainid1][4] === undefined ) me.icn3d.alnChainsAnTtl[chainid1][4] = [];\n          if(me.icn3d.alnChainsAnTtl[chainid1][5] === undefined ) me.icn3d.alnChainsAnTtl[chainid1][5] = [];\n          if(me.icn3d.alnChainsAnTtl[chainid1][6] === undefined ) me.icn3d.alnChainsAnTtl[chainid1][6] = [];\n\n          // two annotations without titles\n          me.icn3d.alnChainsAnTtl[chainid1][0].push(chainid2);\n          me.icn3d.alnChainsAnTtl[chainid1][1].push(chainid1);\n          me.icn3d.alnChainsAnTtl[chainid1][2].push(\"\");\n          me.icn3d.alnChainsAnTtl[chainid1][3].push(\"\");\n\n          // 2nd chain title\n          me.icn3d.alnChainsAnTtl[chainid1][4].push(chainid2);\n          // master chain title\n          me.icn3d.alnChainsAnTtl[chainid1][5].push(chainid1);\n          // empty line\n          me.icn3d.alnChainsAnTtl[chainid1][6].push(\"\");\n\n          var alignIndex = 1;\n          //for(var j = 0, jl = alignData.sseq.length; j < jl; ++j) {\n          for(var j = start; j <= end; ++j) {\n              // 0: internal resi id, 1: pdb resi id, 2: resn, 3: aligned or not\n              //var resi = alignData.sequence[j][1];\n              var resi = alignData.sequence[j][0];\n              var resn = (alignData.sequence[j][2] === '~') ? '-' : alignData.sequence[j][2];\n              //resn = resn.toUpperCase();\n\n              var alignedTmp = (alignData.sequence[j][3]) ? 1 : 0; // alignData.sequence[j][3]: 0, false, 1, true\n\n              var aligned = id2aligninfo[j].aligned + alignedTmp; // 0 or 2\n\n              var color, color2, classname;\n              if(aligned === 2) { // aligned\n                  if(id2aligninfo[j].resn === resn) {\n                      color = '#FF0000';\n                      classname = 'icn3d-cons';\n\n                      me.consHash1[chainid1 + '_' + id2aligninfo[j].resi] = 1;\n                      me.consHash2[chainid2 + '_' + resi] = 1;\n                  }\n                  else {\n                      color = '#0000FF';\n                      classname = 'icn3d-ncons';\n\n                      me.nconsHash1[chainid1 + '_' + id2aligninfo[j].resi] = 1;\n                      me.nconsHash2[chainid2 + '_' + resi] = 1;\n                  }\n\n                  color2 = '#' + me.getColorhexFromBlosum62(id2aligninfo[j].resn, resn);\n\n                  // expensive and thus remove\n                  //alignedAtoms = me.icn3d.unionHash(alignedAtoms, me.icn3d.residues[chainid1 + '_' + id2aligninfo[j].resi]);\n                  //alignedAtoms = me.icn3d.unionHash(alignedAtoms, me.icn3d.residues[chainid2 + '_' + resi]);\n              }\n              else {\n                  color = me.GREY8;\n                  classname = 'icn3d-nalign';\n\n                  me.nalignHash1[chainid1 + '_' + id2aligninfo[j].resi] = 1;\n                  me.nalignHash2[chainid2 + '_' + resi] = 1;\n              }\n\n              // chain1\n              if(me.icn3d.alnChainsSeq[chainid1] === undefined) me.icn3d.alnChainsSeq[chainid1] = [];\n\n              var resObject = {};\n              resObject.mmdbid = mmdbid1;\n              resObject.chain = chain1;\n              resObject.resi = id2aligninfo[j].resi;\n              // resi will be empty if there is no coordinates\n              resObject.resn = (resObject.resi === '' || classname === 'icn3d-nalign') ? id2aligninfo[j].resn.toLowerCase() : id2aligninfo[j].resn;\n              resObject.aligned = aligned;\n              // resi will be empty if there is no coordinates\n              resObject.color = (resObject.resi === '') ? me.GREYC : color; // color by identity\n              resObject.color2 = (resObject.resi === '') ? me.GREYC : color2; // color by conservation\n              resObject.class = classname;\n\n              me.icn3d.alnChainsSeq[chainid1].push(resObject);\n\n              if(id2aligninfo[j].resi !== '') {\n                  if(me.icn3d.alnChains[chainid1] === undefined) me.icn3d.alnChains[chainid1] = {};\n                  $.extend(me.icn3d.alnChains[chainid1], me.icn3d.residues[chainid1 + '_' + id2aligninfo[j].resi] );\n              }\n\n              // chain2\n              if(me.icn3d.alnChainsSeq[chainid2] === undefined) me.icn3d.alnChainsSeq[chainid2] = [];\n\n              resObject = {};\n              resObject.mmdbid = mmdbid2;\n              resObject.chain = chain2;\n              resObject.resi = resi;\n              // resi will be empty if there is no coordinates\n              resObject.resn = (resObject.resi === '' || classname === 'icn3d-nalign') ? resn.toLowerCase() : resn;\n              resObject.aligned = aligned;\n              // resi will be empty if there is no coordinates\n              resObject.color = (resObject.resi === '') ? me.GREYC : color; // color by identity\n              resObject.color2 = (resObject.resi === '') ? me.GREYC : color2; // color by conservation\n              resObject.class = classname;\n\n              me.icn3d.alnChainsSeq[chainid2].push(resObject);\n\n              if(resObject.resi !== '') {\n                  if(me.icn3d.alnChains[chainid2] === undefined) me.icn3d.alnChains[chainid2] = {};\n                  $.extend(me.icn3d.alnChains[chainid2], me.icn3d.residues[chainid2 + '_' + resi] );\n              }\n\n              // annotation is for the master seq only\n              if(me.icn3d.alnChainsAnno[chainid1] === undefined ) me.icn3d.alnChainsAnno[chainid1] = [];\n              if(me.icn3d.alnChainsAnno[chainid1][0] === undefined ) me.icn3d.alnChainsAnno[chainid1][0] = [];\n              if(me.icn3d.alnChainsAnno[chainid1][1] === undefined ) me.icn3d.alnChainsAnno[chainid1][1] = [];\n              if(me.icn3d.alnChainsAnno[chainid1][2] === undefined ) me.icn3d.alnChainsAnno[chainid1][2] = [];\n              if(me.icn3d.alnChainsAnno[chainid1][3] === undefined ) me.icn3d.alnChainsAnno[chainid1][3] = [];\n              if(j === start) {\n                  // empty line\n                  // 2nd chain title\n                  if(me.icn3d.alnChainsAnno[chainid1][4] === undefined ) me.icn3d.alnChainsAnno[chainid1][4] = [];\n                  // master chain title\n                  if(me.icn3d.alnChainsAnno[chainid1][5] === undefined ) me.icn3d.alnChainsAnno[chainid1][5] = [];\n                  // empty line\n                  if(me.icn3d.alnChainsAnno[chainid1][6] === undefined ) me.icn3d.alnChainsAnno[chainid1][6] = [];\n\n                  me.icn3d.alnChainsAnno[chainid1][4].push(me.icn3d.pdbid_chain2title[chainid2]);\n                  me.icn3d.alnChainsAnno[chainid1][5].push(me.icn3d.pdbid_chain2title[chainid1]);\n                  me.icn3d.alnChainsAnno[chainid1][6].push('');\n              }\n\n              var residueid1 = chainid1 + '_' + id2aligninfo[j].resi;\n              var residueid2 = chainid2 + '_' + resi;\n              var ss1 = me.icn3d.secondaries[residueid1];\n              var ss2 = me.icn3d.secondaries[residueid2];\n              if(ss2 !== undefined) {\n                  me.icn3d.alnChainsAnno[chainid1][0].push(ss2);\n              }\n              else {\n                  me.icn3d.alnChainsAnno[chainid1][0].push('-');\n              }\n\n              if(ss1 !== undefined) {\n                  me.icn3d.alnChainsAnno[chainid1][1].push(ss1);\n              }\n              else {\n                  me.icn3d.alnChainsAnno[chainid1][1].push('-');\n              }\n\n              var symbol = '.';\n              if(alignIndex % 5 === 0) symbol = '*';\n              if(alignIndex % 10 === 0) symbol = '|';\n              me.icn3d.alnChainsAnno[chainid1][2].push(symbol); // symbol: | for 10th, * for 5th, . for rest\n\n              var numberStr = '';\n              if(alignIndex % 10 === 0) numberStr = alignIndex.toString();\n              me.icn3d.alnChainsAnno[chainid1][3].push(numberStr); // symbol: 10, 20, etc, empty for rest\n\n              ++alignIndex;\n          } // end for(var j\n      } // end for(var i\n\n      seqalign = {};\n};\n\n/**\n * @author Jiyao Wang <wangjiy@ncbi.nlm.nih.gov> / https://github.com/ncbi/icn3d\n */\n\niCn3DUI.prototype.loadMol2Data = function(data) {\n    var me = this;\n\n    var bResult = me.loadMol2AtomData(data);\n\n    if(me.cfg.align === undefined && Object.keys(me.icn3d.structures).length == 1) {\n        $(\"#\" + me.pre + \"alternateWrapper\").hide();\n    }\n\n    if(!bResult) {\n      alert('The Mol2 file has the wrong format...');\n    }\n    else {\n      me.icn3d.setAtomStyleByOptions(me.opts);\n      me.icn3d.setColorByOptions(me.opts, me.icn3d.atoms);\n\n      me.renderStructure();\n\n      if(me.cfg.rotate !== undefined) me.rotStruc(me.cfg.rotate, true);\n\n      if(me.deferred !== undefined) me.deferred.resolve(); if(me.deferred2 !== undefined) me.deferred2.resolve();\n    }\n};\n\niCn3DUI.prototype.loadMol2AtomData = function (data) { var me = this;\n    var lines = data.split(/\\r?\\n|\\r/);\n    if (lines.length < 4) return false;\n\n    me.icn3d.init();\n\n    var structure = 1;\n    var chain = 'A';\n    var resn = 'LIG';\n    var resi = 1;\n\n    var AtomHash = {};\n    var moleculeNum = 1, chainNum = '1_A', residueNum = '1_A_1';\n    var atomCount, bondCount, atomIndex = 0, bondIndex = 0;\n    var serial=1;\n\n    var bAtomSection = false, bBondSection = false;\n\n    var atomid2serial = {};\n    var skipAtomids = {};\n\n    var prevBondType = '', contiArrBondCnt = 0;\n\n    for (var i = 0, il = lines.length; i < il; ++i) {\n        var line = lines[i].trim();\n        if(line === '') continue;\n        if(line.substr(0, 1) === '#') continue;\n\n        if(line == '@<TRIPOS>MOLECULE') {\n            me.icn3d.molTitle = lines[i + 1].trim();\n            var atomCnt_bondCnt = lines[i + 2].trim().replace(/\\s+/g, \" \").split(\" \");\n            atomCount = atomCnt_bondCnt[0];\n            bondCount = atomCnt_bondCnt[1];\n            i = i + 4;\n        }\n        else if(line == '@<TRIPOS>ATOM') { // 1    C1    1.207    2.091    0.000    C.ar    1    BENZENE    0.000\n            serial = 1;\n\n            bAtomSection = true;\n\n            ++i;\n        }\n        else if(line == '@<TRIPOS>BOND') { // 1    1    2    ar\n            bBondSection = true;\n            bAtomSection = false;\n\n            ++i;\n        }\n        else if(line == '@<TRIPOS>SUBSTRUCTURE') { // 1    1    2    ar\n            bBondSection = false;\n\n            ++i;\n        }\n\n        line = lines[i].trim();\n        if(line === '') continue;\n        if(line.substr(0, 1) === '#') continue;\n\n        if(bAtomSection && atomIndex < atomCount) {\n            // 1    C1    1.207    2.091    0.000    C.ar    1    BENZENE    0.000\n            var atomArray = line.replace(/\\s+/g, \" \").split(\" \");\n\n            var atomid = parseInt(atomArray[0]);\n            atomid2serial[atomid] = serial;\n\n            var name = atomArray[1];\n            var x = parseFloat(atomArray[2]);\n            var y = parseFloat(atomArray[3]);\n            var z = parseFloat(atomArray[4]);\n            var coord = new THREE.Vector3(x, y, z);\n\n            var elemFull = atomArray[5];\n            var pos = elemFull.indexOf('.');\n\n            var elem;\n            if(pos === -1) {\n                elem = elemFull;\n            }\n            else {\n                elem = elemFull.substr(0, pos);\n            }\n\n            // skip H, but keep H.spc, H.t3p, etc\n            if(elem === 'H' && elem === elemFull) {\n                skipAtomids[atomid] = 1;\n            }\n            else {\n                var atomDetails = {\n                    het: true,              // optional, used to determine chemicals, water, ions, etc\n                    serial: serial,         // required, unique atom id\n                    name: name,             // required, atom name\n                    resn: resn,             // optional, used to determine protein or nucleotide\n                    structure: structure,   // optional, used to identify structure\n                    chain: chain,           // optional, used to identify chain\n                    resi: resi,             // optional, used to identify residue ID\n                    coord: coord,           // required, used to draw 3D shape\n                    b: 0,                   // optional, used to draw B-factor tube\n                    elem: elem,             // optional, used to determine hydrogen bond\n                    bonds: [],              // required, used to connect atoms\n                    ss: 'coil',             // optional, used to show secondary structures\n                    ssbegin: false,         // optional, used to show the beginning of secondary structures\n                    ssend: false,           // optional, used to show the end of secondary structures\n\n                    bondOrder: []           // optional, specific for chemicals\n                };\n\n                me.icn3d.atoms[serial] = atomDetails;\n                AtomHash[serial] = 1;\n\n                ++serial;\n            }\n\n            ++atomIndex;\n        }\n\n        if(bBondSection && bondIndex < bondCount) {\n            // 1    1    2    ar\n            var bondArray = line.replace(/\\s+/g, \" \").split(\" \");\n            var fromAtomid = parseInt(bondArray[1]);\n            var toAtomid = parseInt(bondArray[2]);\n            var bondType = bondArray[3];\n            var finalBondType = bondType;\n\n            //� 1 = single � 2 = double � 3 = triple � am = amide � ar = aromatic � du = dummy � un = unknown (cannot be determined from the parameter tables) � nc = not connected\n            if(bondType === 'am') {\n                finalBondType = '1';\n            }\n\n            if(bondType === 'ar') {\n                finalBondType = '1.5';\n            }\n\n            if(!skipAtomids.hasOwnProperty(fromAtomid) && !skipAtomids.hasOwnProperty(toAtomid) && (finalBondType === '1' || finalBondType === '2' || finalBondType === '3' || finalBondType === '1.5') ) {\n                var order = finalBondType;\n                var from = atomid2serial[fromAtomid];\n                var to = atomid2serial[toAtomid];\n\n                // skip all bonds between H and C\n                //if( !(me.icn3d.atoms[from].elem === 'H' && me.icn3d.atoms[to].elem === 'C') && !(me.icn3d.atoms[from].elem === 'C' && me.icn3d.atoms[to].elem === 'H') ) {\n                    me.icn3d.atoms[from].bonds.push(to);\n                    me.icn3d.atoms[from].bondOrder.push(order);\n                    me.icn3d.atoms[to].bonds.push(from);\n                    me.icn3d.atoms[to].bondOrder.push(order);\n\n                    if(order == '2') {\n                        me.icn3d.doublebonds[from + '_' + to] = 1;\n                        me.icn3d.doublebonds[to + '_' + from] = 1;\n                    }\n                    else if(order == '3') {\n                        me.icn3d.triplebonds[from + '_' + to] = 1;\n                        me.icn3d.triplebonds[to + '_' + from] = 1;\n                    }\n                    else if(order == '1.5') {\n                        me.icn3d.aromaticbonds[from + '_' + to] = 1;\n                        me.icn3d.aromaticbonds[to + '_' + from] = 1;\n                    }\n                //}\n            }\n\n            ++bondIndex;\n            prevBondType = bondType;\n        }\n    }\n\n    me.icn3d.dAtoms = AtomHash;\n    me.icn3d.hAtoms= AtomHash;\n    me.icn3d.structures[moleculeNum] = [chainNum]; //AtomHash;\n    me.icn3d.chains[chainNum] = AtomHash;\n    me.icn3d.residues[residueNum] = AtomHash;\n\n    me.icn3d.residueId2Name[residueNum] = resn;\n\n    if(me.icn3d.chainsSeq[chainNum] === undefined) me.icn3d.chainsSeq[chainNum] = [];\n/*\n    if(me.icn3d.chainsAn[chainNum] === undefined ) me.icn3d.chainsAn[chainNum] = [];\n    if(me.icn3d.chainsAn[chainNum][0] === undefined ) me.icn3d.chainsAn[chainNum][0] = [];\n    if(me.icn3d.chainsAnTitle[chainNum] === undefined ) me.icn3d.chainsAnTitle[chainNum] = [];\n    if(me.icn3d.chainsAnTitle[chainNum][0] === undefined ) me.icn3d.chainsAnTitle[chainNum][0] = [];\n*/\n      var resObject = {};\n      resObject.resi = resi;\n      resObject.name = resn;\n\n    me.icn3d.chainsSeq[chainNum].push(resObject);\n//        me.icn3d.chainsAn[chainNum][0].push(resi);\n//        me.icn3d.chainsAnTitle[chainNum][0].push('');\n\n    me.setMaxD();\n\n    me.showTitle();\n\n    return true;\n};\n\n\n/**\n * @author Jiyao Wang <wangjiy@ncbi.nlm.nih.gov> / https://github.com/ncbi/icn3d\n */\n\niCn3DUI.prototype.loadXyzData = function(data) {\n    var me = this;\n\n    var bResult = me.loadXyzAtomData(data);\n\n    if(me.cfg.align === undefined && Object.keys(me.icn3d.structures).length == 1) {\n        $(\"#\" + me.pre + \"alternateWrapper\").hide();\n    }\n\n    if(!bResult) {\n      alert('The XYZ file has the wrong format...');\n    }\n    else {\n      me.icn3d.setAtomStyleByOptions(me.opts);\n      me.icn3d.setColorByOptions(me.opts, me.icn3d.atoms);\n\n      me.renderStructure();\n\n      if(me.cfg.rotate !== undefined) me.rotStruc(me.cfg.rotate, true);\n\n      if(me.deferred !== undefined) me.deferred.resolve(); if(me.deferred2 !== undefined) me.deferred2.resolve();\n    }\n};\n\niCn3DUI.prototype.setXyzAtomSeq = function (AtomHash, moleculeNum, chainNum, residueNum) { var me = this;\n    me.icn3d.dAtoms = me.icn3d.unionHash(me.icn3d.dAtoms, AtomHash);\n    me.icn3d.hAtoms= me.icn3d.unionHash(me.icn3d.hAtoms, AtomHash);\n\n    me.icn3d.structures[moleculeNum] = [chainNum]; //AtomHash;\n    me.icn3d.chains[chainNum] = AtomHash;\n    me.icn3d.residues[residueNum] = AtomHash;\n\n    me.icn3d.residueId2Name[residueNum] = 'LIG';\n\n    if(me.icn3d.chainsSeq[chainNum] === undefined) me.icn3d.chainsSeq[chainNum] = [];\n/*\n    if(me.icn3d.chainsAn[chainNum] === undefined ) me.icn3d.chainsAn[chainNum] = [];\n    if(me.icn3d.chainsAn[chainNum][0] === undefined ) me.icn3d.chainsAn[chainNum][0] = [];\n    if(me.icn3d.chainsAnTitle[chainNum] === undefined ) me.icn3d.chainsAnTitle[chainNum] = [];\n    if(me.icn3d.chainsAnTitle[chainNum][0] === undefined ) me.icn3d.chainsAnTitle[chainNum][0] = [];\n*/\n      var resObject = {};\n      resObject.resi = 1;\n      resObject.name = 'LIG';\n\n    me.icn3d.chainsSeq[chainNum].push(resObject);\n//        me.icn3d.chainsAn[chainNum][0].push(1);\n//        me.icn3d.chainsAnTitle[chainNum][0].push('');\n\n    // determine bonds\n    var serialArray = Object.keys(AtomHash);\n    for(var j = 0, jl = serialArray.length; j < jl; ++j) {\n        var atom0 = me.icn3d.atoms[serialArray[j]];\n\n        for(var k = j + 1, kl = serialArray.length; k < kl; ++k) {\n            var atom1 = me.icn3d.atoms[serialArray[k]];\n            var maxR = 1.2 * (me.icn3d.covalentRadii[atom0.elem] + me.icn3d.covalentRadii[atom1.elem]);\n            if(Math.abs(atom0.coord.x - atom1.coord.x) > maxR) continue;\n            if(Math.abs(atom0.coord.y - atom1.coord.y) > maxR) continue;\n            if(Math.abs(atom0.coord.z - atom1.coord.z) > maxR) continue;\n\n            if(me.icn3d.hasCovalentBond(atom0, atom1)) {\n                me.icn3d.atoms[serialArray[j]].bonds.push(serialArray[k]);\n                me.icn3d.atoms[serialArray[k]].bonds.push(serialArray[j]);\n            }\n        }\n    }\n},\n\niCn3DUI.prototype.loadXyzAtomData = function (data) { var me = this;\n    var lines = data.split(/\\r?\\n|\\r/);\n    if (lines.length < 3) return false;\n\n    me.icn3d.init();\n\n    var chain = 'A';\n    var resn = 'LIG';\n    var resi = 1;\n\n    var AtomHash = {};\n    var moleculeNum = 0, chainNum, residueNum;\n    var structure, atomCount, serial=1, offset = 2;\n\n    me.icn3d.molTitle = \"\";\n\n    for (var i = 0, il = lines.length; i < il; ++i) {\n        var line = lines[i].trim();\n        if(line === '') continue;\n\n        if(line !== '' && !isNaN(line)) { // start a new molecule\n            if(i !== 0) {\n                me.setXyzAtomSeq(AtomHash, moleculeNum, chainNum, residueNum);\n            }\n\n            ++moleculeNum;\n            AtomHash = {};\n\n            structure = moleculeNum;\n            chainNum = structure + '_' + chain;\n            residueNum = chainNum + '_' + resi;\n\n//12\n//glucose from 2gbp\n//C  35.884  30.895  49.120\n\n            atomCount = parseInt(line);\n            if(moleculeNum > 1) {\n                me.icn3d.molTitle += \"; \";\n            }\n            me.icn3d.molTitle += lines[i+1].trim();\n\n            i = i + offset;\n        }\n\n        line = lines[i].trim();\n        if(line === '') continue;\n\n        var name_x_y_z = line.replace(/,/, \" \").replace(/\\s+/g, \" \").split(\" \");\n\n        var name = name_x_y_z[0];\n        var x = parseFloat(name_x_y_z[1]);\n        var y = parseFloat(name_x_y_z[2]);\n        var z = parseFloat(name_x_y_z[3]);\n        var coord = new THREE.Vector3(x, y, z);\n\n        var atomDetails = {\n            het: true,              // optional, used to determine chemicals, water, ions, etc\n            serial: serial,         // required, unique atom id\n            name: name,             // required, atom name\n            resn: resn,             // optional, used to determine protein or nucleotide\n            structure: structure,   // optional, used to identify structure\n            chain: chain,           // optional, used to identify chain\n            resi: resi,             // optional, used to identify residue ID\n            coord: coord,           // required, used to draw 3D shape\n            b: 0,                   // optional, used to draw B-factor tube\n            elem: name,             // optional, used to determine hydrogen bond\n            bonds: [],              // required, used to connect atoms\n            ss: 'coil',             // optional, used to show secondary structures\n            ssbegin: false,         // optional, used to show the beginning of secondary structures\n            ssend: false,           // optional, used to show the end of secondary structures\n\n            bondOrder: []           // optional, specific for chemicals\n        };\n\n        me.icn3d.atoms[serial] = atomDetails;\n        AtomHash[serial] = 1;\n\n        ++serial;\n    }\n\n    me.setXyzAtomSeq(AtomHash, moleculeNum, chainNum, residueNum);\n\n    me.setMaxD();\n\n    me.showTitle();\n\n    return true;\n};\n\n/**\n * @file Dsn6 Parser\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @private\n * Modified by Jiyao Wang / https://github.com/ncbi/icn3d\n */\n\n\niCn3DUI.prototype.Dsn6Parser = function(pdbid, type, sigma) { var me = this;\n   var url, dataType;\n   // https://edmaps.rcsb.org/maps/1kq2_2fofc.dsn6\n   // https://edmaps.rcsb.org/maps/1kq2_fofc.dsn6\n\n   url = \"https://edmaps.rcsb.org/maps/\" + pdbid.toLowerCase() + \"_\" + type + \".dsn6\";\n\n   bCid = undefined;\n\n/*\n   dataType = \"text\";\n\n   $.ajax({\n      url: url,\n      dataType: dataType,\n      cache: true,\n      tryCount : 0,\n      retryLimit : 1,\n      beforeSend: function() {\n          me.showLoading();\n      },\n      complete: function() {\n          me.hideLoading();\n      },\n      success: function(dsn6data) {\n          me.loadDsn6Data(dsn6data, type);\n      },\n      error : function(xhr, textStatus, errorThrown ) {\n        this.tryCount++;\n        if (this.tryCount <= this.retryLimit) {\n            //try again\n            $.ajax(this);\n            return;\n        }\n\n        alert(\"RCSB server has no corresponding eletron density map for this structure.\");\n\n        return;\n      }\n   });\n*/\n\n    //https://stackoverflow.com/questions/33902299/using-jquery-ajax-to-download-a-binary-file\n    if(type == '2fofc' && me.bAjax2fofc) {\n        me.icn3d.mapData.sigma2 = sigma;\n        me.setOption('map', type);\n    }\n    else if(type == 'fofc' && me.bAjaxfofc) {\n        me.icn3d.mapData.sigma = sigma;\n        me.setOption('map', type);\n    }\n    else {\n        var oReq = new XMLHttpRequest();\n        oReq.open(\"GET\", url, true);\n        oReq.responseType = \"arraybuffer\";\n\n        oReq.onreadystatechange = function() {\n            if (this.readyState == 4) {\n               me.hideLoading();\n\n               if(this.status == 200) {\n                   var arrayBuffer = oReq.response;\n                   me.loadDsn6Data(arrayBuffer, type, sigma);\n\n                   if(type == '2fofc') {\n                       me.bAjax2fofc = true;\n                   }\n                   else if(type == 'fofc') {\n                       me.bAjaxfofc = true;\n                   }\n\n                   me.setOption('map', type);\n                }\n                else {\n                    alert(\"RCSB server has no corresponding eletron density map for this structure.\");\n                }\n\n                if(me.deferredMap !== undefined) me.deferredMap.resolve();\n            }\n            else {\n                me.showLoading();\n            }\n        };\n\n        oReq.send();\n    }\n};\n\niCn3DUI.prototype.loadDsn6Data = function(dsn6data, type, sigma) { var me = this;\n    // DSN6 http://www.uoxray.uoregon.edu/tnt/manual/node104.html\n    // BRIX http://svn.cgl.ucsf.edu/svn/chimera/trunk/libs/VolumeData/dsn6/brix-1.html\n\n    var voxelSize = 1;\n\n    var header = {};\n    var divisor, summand;\n\n    var bin = (dsn6data.buffer && dsn6data.buffer instanceof ArrayBuffer) ? dsn6data.buffer : dsn6data;\n    var intView = new Int16Array(bin);\n    var byteView = new Uint8Array(bin);\n    var brixStr = String.fromCharCode.apply(null, byteView.subarray(0, 512));\n\n    if (brixStr.indexOf(':-)') == 0) {\n      header.xStart = parseInt(brixStr.substr(10, 5)); // NXSTART\n      header.yStart = parseInt(brixStr.substr(15, 5));\n      header.zStart = parseInt(brixStr.substr(20, 5));\n\n      header.xExtent = parseInt(brixStr.substr(32, 5)); // NX\n      header.yExtent = parseInt(brixStr.substr(38, 5));\n      header.zExtent = parseInt(brixStr.substr(42, 5));\n\n      header.xRate = parseInt(brixStr.substr(52, 5)); // MX\n      header.yRate = parseInt(brixStr.substr(58, 5));\n      header.zRate = parseInt(brixStr.substr(62, 5));\n\n      header.xlen = parseFloat(brixStr.substr(73, 10)) * voxelSize;\n      header.ylen = parseFloat(brixStr.substr(83, 10)) * voxelSize;\n      header.zlen = parseFloat(brixStr.substr(93, 10)) * voxelSize;\n\n      header.alpha = parseFloat(brixStr.substr(103, 10));\n      header.beta = parseFloat(brixStr.substr(113, 10));\n      header.gamma = parseFloat(brixStr.substr(123, 10));\n\n      divisor = parseFloat(brixStr.substr(138, 12)) / 100;\n      summand = parseInt(brixStr.substr(155, 8));\n\n      header.sigma = parseFloat(brixStr.substr(170, 12)) * 100;\n    } else {\n      // swap byte order when big endian\n      if(intView[ 18 ] !== 100) { // true\n        for (var i = 0, n = intView.length; i < n; ++i) {\n          var val = intView[ i ];\n\n          intView[ i ] = ((val & 0xff) << 8) | ((val >> 8) & 0xff);\n        }\n      }\n\n      header.zStart = intView[ 2 ];\n      header.xStart = intView[ 0 ]; // NXSTART\n      header.yStart = intView[ 1 ];\n\n      header.xExtent = intView[ 3 ]; // NX\n      header.yExtent = intView[ 4 ];\n      header.zExtent = intView[ 5 ];\n\n      header.xRate = intView[ 6 ]; // MX\n      header.yRate = intView[ 7 ];\n      header.zRate = intView[ 8 ];\n\n      var factor = 1 / intView[ 17 ];\n      var scalingFactor = factor * voxelSize;\n\n      header.xlen = intView[ 9 ] * scalingFactor;\n      header.ylen = intView[ 10 ] * scalingFactor;\n      header.zlen = intView[ 11 ] * scalingFactor;\n\n      header.alpha = intView[ 12 ] * factor;\n      header.beta = intView[ 13 ] * factor;\n      header.gamma = intView[ 14 ] * factor;\n\n      divisor = intView[ 15 ] / 100;\n      summand = intView[ 16 ];\n    }\n\n    var data = new Float32Array(\n      header.xExtent * header.yExtent * header.zExtent\n    );\n\n    var offset = 512;\n    var xBlocks = Math.ceil(header.xExtent / 8);\n    var yBlocks = Math.ceil(header.yExtent / 8);\n    var zBlocks = Math.ceil(header.zExtent / 8);\n\n    // loop over blocks\n    for (var zz = 0; zz < zBlocks; ++zz) {\n      for (var yy = 0; yy < yBlocks; ++yy) {\n        for (var xx = 0; xx < xBlocks; ++xx) {\n          // loop inside block\n          for (var k = 0; k < 8; ++k) {\n            var z = 8 * zz + k;\n            for (var j = 0; j < 8; ++j) {\n              var y = 8 * yy + j;\n              for (var i = 0; i < 8; ++i) {\n                var x = 8 * xx + i;\n\n                // check if remaining slice-part contains data\n                if (x < header.xExtent && y < header.yExtent && z < header.zExtent) {\n                  var idx = ((((x * header.yExtent) + y) * header.zExtent) + z);\n                  data[ idx ] = (byteView[ offset ] - summand) / divisor;\n                  ++offset;\n                } else {\n                  offset += 8 - i;\n                  break;\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n\n    //var v = this.volume\n    //v.header = header;\n    //v.setData(data, header.zExtent, header.yExtent, header.xExtent);\n    //v.setMatrix(me.getMatrix(header));\n\n    if(type == '2fofc') {\n        me.icn3d.mapData.header2 = header;\n        me.icn3d.mapData.data2 = data;\n        me.icn3d.mapData.matrix2 = me.getMatrix(header);\n        me.icn3d.mapData.type2 = type;\n        me.icn3d.mapData.sigma2 = sigma;\n    }\n    else {\n        me.icn3d.mapData.header = header;\n        me.icn3d.mapData.data = data;\n        me.icn3d.mapData.matrix = me.getMatrix(header);\n        me.icn3d.mapData.type = type;\n        me.icn3d.mapData.sigma = sigma;\n    }\n\n//console.log(\"header: \" + JSON.stringify(header));\n//console.log(\"data: \" + data);\n\n    // for 1KQ2\n    // header: {\"zStart\":11,\"xStart\":0,\"yStart\":2,\"xExtent\":63,\"yExtent\":70,\"zExtent\":54,\"xRate\":88,\"yRate\":128,\"zRate\":112,\"xlen\":80.86250000000001,\"ylen\":115.5875,\"zlen\":101.8375,\"alpha\":90,\"beta\":90,\"gamma\":90}\n    // data: [-1.724900484085083,-1.4153029918670654,-0.5749668478965759,-0.17691287398338318,-0.6634232401847839,-1.2826182842254639,-1.1941618919372559,-0.30959752202033997,...\n\n    // for 1TOP\n    //header: {\"zStart\":-35,\"xStart\":-11,\"yStart\":18,\"xExtent\":83,\"yExtent\":118,\"zExtent\":88,\"xRate\":114,\"yRate\":114,\"zRate\":102,\"xlen\":66.6875,\"ylen\":66.6875,\"zlen\":60.7875,\"alpha\":90,\"beta\":90,\"gamma\":120}\n    //data: -0.7147111296653748,-1.0720666646957397,-0.9529482126235962,-0.05955926328897476,0.7147111296653748,0.5360333323478699,-0.1786777824163437\n\n    //if (header.sigma) {\n    //  v.setStats(undefined, undefined, undefined, header.sigma);\n    //}\n\n    //return true;\n};\n\niCn3DUI.prototype.getMatrix = function(header) { var me = this;\n    var h = header;\n\n    var basisX = [\n      h.xlen,\n      0,\n      0\n    ];\n\n    var basisY = [\n      h.ylen * Math.cos(Math.PI / 180.0 * h.gamma),\n      h.ylen * Math.sin(Math.PI / 180.0 * h.gamma),\n      0\n    ];\n\n    var basisZ = [\n      h.zlen * Math.cos(Math.PI / 180.0 * h.beta),\n      h.zlen * (\n        Math.cos(Math.PI / 180.0 * h.alpha) -\n        Math.cos(Math.PI / 180.0 * h.gamma) *\n        Math.cos(Math.PI / 180.0 * h.beta)\n      ) / Math.sin(Math.PI / 180.0 * h.gamma),\n      0\n    ];\n    basisZ[ 2 ] = Math.sqrt(\n      h.zlen * h.zlen * Math.sin(Math.PI / 180.0 * h.beta) *\n      Math.sin(Math.PI / 180.0 * h.beta) - basisZ[ 1 ] * basisZ[ 1 ]\n    );\n\n    var basis = [ [], basisX, basisY, basisZ ];\n    var nxyz = [ 0, h.xRate, h.yRate, h.zRate ];\n    var mapcrs = [ 0, 1, 2, 3 ];\n\n    var matrix = new THREE.Matrix4();\n\n    matrix.set(\n      basis[ mapcrs[1] ][0] / nxyz[ mapcrs[1] ],\n      basis[ mapcrs[2] ][0] / nxyz[ mapcrs[2] ],\n      basis[ mapcrs[3] ][0] / nxyz[ mapcrs[3] ],\n      0,\n      basis[ mapcrs[1] ][1] / nxyz[ mapcrs[1] ],\n      basis[ mapcrs[2] ][1] / nxyz[ mapcrs[2] ],\n      basis[ mapcrs[3] ][1] / nxyz[ mapcrs[3] ],\n      0,\n      basis[ mapcrs[1] ][2] / nxyz[ mapcrs[1] ],\n      basis[ mapcrs[2] ][2] / nxyz[ mapcrs[2] ],\n      basis[ mapcrs[3] ][2] / nxyz[ mapcrs[3] ],\n      0,\n      0, 0, 0, 1\n    );\n\n/*\n    matrix.multiply(\n      new THREE.Matrix4().makeRotationY(Math.PI * 0.5)\n    );\n\n    matrix.multiply(new THREE.Matrix4().makeTranslation(\n      -h.zStart, h.yStart, h.xStart\n    ));\n\n    matrix.multiply(new THREE.Matrix4().makeScale(\n      -1, 1, 1\n    ));\n*/\n\n    matrix.multiply(new THREE.Matrix4().makeTranslation(\n      h.xStart, h.yStart, h.zStart\n    ));\n\n    return matrix;\n};\n\n/**\n * @file Density Cif Parser\n * @author David Sehnal dsehnal <alexander.rose@weirdbyte.de>\n * Modified by Jiyao Wang / https://github.com/ncbi/icn3d\n */\n\n\niCn3DUI.prototype.DensityCifParser = function(pdbid, type, sigma, emd) { var me = this;\n   var url;\n   var detail = (me.isMobile()) ? 0 : 4; //4;\n\n   //https://www.ebi.ac.uk/pdbe/densities/doc.html\n   if(type == '2fofc' || type == 'fofc') {\n       url = \"https://www.ebi.ac.uk/pdbe/densities/x-ray/\" + pdbid.toLowerCase() + \"/cell?detail=\" + detail;\n   }\n   else if(type == 'em') {\n       url = \"https://www.ebi.ac.uk/pdbe/densities/emd/\" + emd.toLowerCase() + \"/cell?detail=\" + detail;\n   }\n\n   bCid = undefined;\n\n    //https://stackoverflow.com/questions/33902299/using-jquery-ajax-to-download-a-binary-file\n    if(type == '2fofc' && me.bAjax2fofc) {\n        me.icn3d.mapData.sigma2 = sigma;\n        me.setOption('map', type);\n    }\n    else if(type == 'fofc' && me.bAjaxfofc) {\n        me.icn3d.mapData.sigma = sigma;\n        me.setOption('map', type);\n    }\n    else if(type == 'em' && me.bAjaxEm) {\n        me.icn3d.mapData.sigmaEm = sigma;\n        me.setOption('emmap', type);\n    }\n    else {\n        var oReq = new XMLHttpRequest();\n        oReq.open(\"GET\", url, true);\n        oReq.responseType = \"arraybuffer\";\n\n        oReq.onreadystatechange = function() {\n            if (this.readyState == 4) {\n               me.hideLoading();\n\n               if(this.status == 200) {\n                   var arrayBuffer = oReq.response;\n\n                   me.parseChannels(arrayBuffer, type, sigma);\n\n                   if(type == '2fofc' || type == 'fofc') {\n                       me.bAjax2fofc = true;\n                       me.bAjaxfofc = true;\n\n                       me.setOption('map', type);\n                   }\n                   else if(type == 'em') {\n                       me.bAjaxEm = true;\n\n                       me.setOption('emmap', type);\n                   }\n                }\n                else {\n                   if(type == '2fofc' || type == 'fofc') {\n                       alert(\"Density server at EBI has no corresponding electron density map for this structure.\");\n                   }\n                   else if(type == 'em') {\n                       alert(\"Density server at EBI has no corresponding EM density map for this structure.\");\n                   }\n                }\n\n                if(me.deferredEmmap !== undefined) me.deferredEmmap.resolve();\n            }\n            else {\n                me.showLoading();\n            }\n        };\n\n        oReq.send();\n    }\n};\n\niCn3DUI.prototype.parseChannels = function(densitydata, type, sigma) { var me = this;\n    var cif = me.BinaryParse(densitydata);\n\n    if(type == '2fofc' || type == 'fofc') {\n        var twoDensity = me.getChannel(cif, '2FO-FC');\n        var oneDensity = me.getChannel(cif, 'FO-FC');\n\n        // '2fofc'\n        var density = twoDensity;\n        var sampleCount = density.box.sampleCount;\n        var header = {xExtent: sampleCount[0], yExtent: sampleCount[1], zExtent: sampleCount[2], mean: density.valuesInfo.mean, sigma: density.valuesInfo.sigma};\n        me.icn3d.mapData.header2 = header;\n\n        me.icn3d.mapData.data2 = density.data;\n\n        var origin = density.box.origin;\n        var dimensions = density.box.dimensions;\n        var basis = density.spacegroup.basis;\n        var scale = new THREE.Matrix4().makeScale(\n            dimensions[0] / (sampleCount[0] ),\n            dimensions[1] / (sampleCount[1] ),\n            dimensions[2] / (sampleCount[2] ));\n        var translate = new THREE.Matrix4().makeTranslation(origin[0], origin[1], origin[2]);\n        var fromFrac = new THREE.Matrix4().set(\n            basis.x[0], basis.y[0], basis.z[0], 0.0,\n            0.0, basis.y[1], basis.z[1], 0.0,\n            0.0, 0.0, basis.z[2], 0.0,\n            0.0, 0.0, 0.0, 1.0);\n\n        //var toFrac = new LiteMol.Visualization.THREE.Matrix4().getInverse(fromFrac);\n        var matrix = fromFrac.multiply(translate).multiply(scale);\n\n        me.icn3d.mapData.matrix2 = matrix;\n\n        me.icn3d.mapData.type2 = type;\n        me.icn3d.mapData.sigma2 = sigma;\n\n        // 'fofc'\n        var density = oneDensity;\n        var sampleCount = density.box.sampleCount;\n        var header = {xExtent: sampleCount[0], yExtent: sampleCount[1], zExtent: sampleCount[2], mean: density.valuesInfo.mean, sigma: density.valuesInfo.sigma};\n        me.icn3d.mapData.header = header;\n\n        me.icn3d.mapData.data = density.data;\n\n        var origin = density.box.origin;\n        var dimensions = density.box.dimensions;\n        var basis = density.spacegroup.basis;\n        var scale = new THREE.Matrix4().makeScale(\n            dimensions[0] / (sampleCount[0] ),\n            dimensions[1] / (sampleCount[1] ),\n            dimensions[2] / (sampleCount[2] ));\n        var translate = new THREE.Matrix4().makeTranslation(origin[0], origin[1], origin[2]);\n        var fromFrac = new THREE.Matrix4().set(\n            basis.x[0], basis.y[0], basis.z[0], 0.0,\n            0.0, basis.y[1], basis.z[1], 0.0,\n            0.0, 0.0, basis.z[2], 0.0,\n            0.0, 0.0, 0.0, 1.0);\n        //var toFrac = new LiteMol.Visualization.THREE.Matrix4().getInverse(fromFrac);\n        var matrix = fromFrac.multiply(translate).multiply(scale);\n        me.icn3d.mapData.matrix = matrix;\n\n        me.icn3d.mapData.type = type;\n        me.icn3d.mapData.sigma = sigma;\n    }\n    else if(type == 'em') {\n        var density = me.getChannel(cif, 'EM');\n\n        var sampleCount = density.box.sampleCount;\n        var header = {xExtent: sampleCount[0], yExtent: sampleCount[1], zExtent: sampleCount[2], max: density.valuesInfo.max, min: density.valuesInfo.min};\n        me.icn3d.mapData.headerEm = header;\n\n        me.icn3d.mapData.dataEm = density.data;\n\n        var origin = density.box.origin;\n        var dimensions = density.box.dimensions;\n        var basis = density.spacegroup.basis;\n        var scale = new THREE.Matrix4().makeScale(\n            dimensions[0] / (sampleCount[0] ),\n            dimensions[1] / (sampleCount[1] ),\n            dimensions[2] / (sampleCount[2] ));\n        var translate = new THREE.Matrix4().makeTranslation(origin[0], origin[1], origin[2]);\n        var fromFrac = new THREE.Matrix4().set(\n            basis.x[0], basis.y[0], basis.z[0], 0.0,\n            0.0, basis.y[1], basis.z[1], 0.0,\n            0.0, 0.0, basis.z[2], 0.0,\n            0.0, 0.0, 0.0, 1.0);\n        //var toFrac = new LiteMol.Visualization.THREE.Matrix4().getInverse(fromFrac);\n        var matrix = fromFrac.multiply(translate).multiply(scale);\n        me.icn3d.mapData.matrixEm = matrix;\n\n        me.icn3d.mapData.typeEm = type;\n        //me.icn3d.mapData.sigmaEm = sigma;\n        me.icn3d.mapData.sigmaEm = sigma;\n    }\n};\n\niCn3DUI.prototype.getChannel = function(data, name) { var me = this;\n    //var block = data.dataBlocks.filter(b => b.header === name)[0];\n    //var block = data.dataBlocks.filter(b => b.id === name)[0];\n\n    var jsonData = data.toJSON();\n\n    var block;\n    for(var i = 0, il = jsonData.length; i < il; ++i) {\n        if(jsonData[i].id == name) block = data.dataBlocks[i];\n    }\n\n    var density = me.CIFParse(block);\n\n    return density;\n};\n\niCn3DUI.prototype.CIFParse = function(block) { var me = this;\n    var info = block.getCategory('_volume_data_3d_info');\n\n    if (!info) {\n        conole.log('_volume_data_3d_info category is missing.');\n        return undefined;\n    }\n    if (!block.getCategory('_volume_data_3d')) {\n        conole.log('_volume_data_3d category is missing.');\n        return undefined;\n    }\n\n    function getVector3(name) {\n        var ret = [0, 0, 0];\n        for (var i = 0; i < 3; i++) {\n            ret[i] = info.getColumn(name + '[' + i + ']').getFloat(0);\n        }\n        return ret;\n    }\n\n    function getNum(name) { return info.getColumn(name).getFloat(0); }\n\n    var header = {\n        name: info.getColumn('name').getString(0),\n        axisOrder: getVector3('axis_order'),\n\n        origin: getVector3('origin'),\n        dimensions: getVector3('dimensions'),\n\n        sampleCount: getVector3('sample_count'),\n\n        spacegroupNumber: getNum('spacegroup_number') | 0,\n        cellSize: getVector3('spacegroup_cell_size'),\n        cellAngles: getVector3('spacegroup_cell_angles'),\n\n        mean: getNum('mean_sampled'),\n        sigma: getNum('sigma_sampled')\n    };\n\n    var indices = [0, 0, 0];\n    indices[header.axisOrder[0]] = 0;\n    indices[header.axisOrder[1]] = 1;\n    indices[header.axisOrder[2]] = 2;\n\n    function normalizeOrder(xs) {\n        return [xs[indices[0]], xs[indices[1]], xs[indices[2]]];\n    }\n\n    function readValues(col, xyzSampleCount, sampleCount, axisIndices) {\n        var data = new Float32Array(xyzSampleCount[0] * xyzSampleCount[1] * xyzSampleCount[2]);\n        var coord = [0, 0, 0];\n        var iX = axisIndices[0], iY = axisIndices[1], iZ = axisIndices[2];\n        var mX = sampleCount[0], mY = sampleCount[1], mZ = sampleCount[2];\n\n\n        var xSize = xyzSampleCount[0];\n        var xySize = xyzSampleCount[0] * xyzSampleCount[1];\n\n        var zSize = xyzSampleCount[2];\n        var yzSize = xyzSampleCount[1] * xyzSampleCount[2];\n\n        var offset = 0;\n        var min = col.getFloat(0), max = min;\n\n        for (var cZ = 0; cZ < mZ; cZ++) {\n            coord[2] = cZ;\n            for (var cY = 0; cY < mY; cY++) {\n                coord[1] = cY;\n                for (var cX = 0; cX < mX; cX++) {\n                    coord[0] = cX;\n                    var v = col.getFloat(offset);\n                    offset += 1;\n                    //data[coord[iX] + coord[iY] * xSize + coord[iZ] * xySize] = v;\n                    data[coord[iZ] + coord[iY] * zSize + coord[iX] * yzSize] = v;\n                    if (v < min) min = v;\n                    else if (v > max) max = v;\n                }\n            }\n        }\n\n        return { data: data, min: min, max: max };\n    }\n\n    function createSpacegroup(number, size, angles) {\n        var alpha = (Math.PI / 180.0) * angles[0], beta = (Math.PI / 180.0) * angles[1], gamma = (Math.PI / 180.0) * angles[2];\n        var xScale = size[0], yScale = size[1], zScale = size[2];\n\n        var z1 = Math.cos(beta),\n              z2 = (Math.cos(alpha) - Math.cos(beta) * Math.cos(gamma)) / Math.sin(gamma),\n              z3 = Math.sqrt(1.0 - z1 * z1 - z2 * z2);\n\n        var x = [xScale, 0.0, 0.0];\n        var y = [Math.cos(gamma) * yScale, Math.sin(gamma) * yScale, 0.0];\n        var z = [z1 * zScale, z2 * zScale, z3 * zScale];\n\n        return {\n            number: number,\n            size: size,\n            angles: angles,\n            basis: { x: x, y: y, z: z }\n        };\n    }\n\n    var sampleCount = normalizeOrder(header.sampleCount);\n\n    var rawData = readValues(block.getCategory('_volume_data_3d').getColumn('values'), sampleCount, header.sampleCount, indices);\n    //var field = new Field3DZYX(rawData.data, sampleCount);\n\n    var data = {\n        name: header.name,\n        spacegroup: createSpacegroup(header.spacegroupNumber, header.cellSize, header.cellAngles),\n        box: {\n            origin: normalizeOrder(header.origin),\n            dimensions: normalizeOrder(header.dimensions),\n            sampleCount: sampleCount\n        },\n        //data: field,\n        data: rawData.data,\n        valuesInfo: { min: rawData.min, max: rawData.max, mean: header.mean, sigma: header.sigma }\n    };\n\n    return data;\n};\n\niCn3DUI.prototype.BinaryParse = function(data) { var me = this;\n//    var minVersion = [0, 3];\n//    try {\n        var array = new Uint8Array(data);\n\n        var unpacked = me.MessagePackParse({\n                    buffer: array,\n                    offset: 0,\n                    dataView: new DataView(array.buffer)\n        });\n\n        var DataBlock = (function () {\n            function DataBlock(data) {\n                this.additionalData = {};\n                this.header = data.header;\n                this.categoryList = data.categories.map(function (c) { return new Category(c); });\n                this.categoryMap = new Map();\n                for (var _i = 0, _a = this.categoryList; _i < _a.length; _i++) {\n                    var c = _a[_i];\n                    this.categoryMap.set(c.name, c);\n                }\n            }\n            Object.defineProperty(DataBlock.prototype, \"categories\", {\n                get: function () { return this.categoryList; },\n                enumerable: true,\n                configurable: true\n            });\n            DataBlock.prototype.getCategory = function (name) { return this.categoryMap.get(name); };\n            DataBlock.prototype.toJSON = function () {\n                return {\n                    id: this.header,\n                    categories: this.categoryList.map(function (c) { return c.toJSON(); }),\n                    additionalData: this.additionalData\n                };\n            };\n            return DataBlock;\n        }());\n\n        var Category = (function () {\n            function Category(data) {\n                this.name = data.name;\n                this.columnCount = data.columns.length;\n                this.rowCount = data.rowCount;\n                this.columnNameList = [];\n                this.encodedColumns = new Map();\n                for (var _i = 0, _a = data.columns; _i < _a.length; _i++) {\n                    var c = _a[_i];\n                    this.encodedColumns.set(c.name, c);\n                    this.columnNameList.push(c.name);\n                }\n            }\n            Object.defineProperty(Category.prototype, \"columnNames\", {\n                get: function () { return this.columnNameList; },\n                enumerable: true,\n                configurable: true\n            });\n\n            var _UndefinedColumn = (function () {\n                function _UndefinedColumn() {\n                    this.isDefined = false;\n                }\n                _UndefinedColumn.prototype.getString = function (row) { return null; };\n                ;\n                _UndefinedColumn.prototype.getInteger = function (row) { return 0; };\n                _UndefinedColumn.prototype.getFloat = function (row) { return 0.0; };\n                _UndefinedColumn.prototype.getValuePresence = function (row) { return 1 /* NotSpecified */; };\n                _UndefinedColumn.prototype.areValuesEqual = function (rowA, rowB) { return true; };\n                _UndefinedColumn.prototype.stringEquals = function (row, value) { return value === null; };\n                return _UndefinedColumn;\n            }());\n\n            Category.prototype.getColumn = function (name) {\n                var w = this.encodedColumns.get(name);\n                if (w)\n                    return wrapColumn(w);\n                return _UndefinedColumn;\n            };\n            Category.prototype.toJSON = function () {\n                var _this = this;\n                var rows = [];\n                var columns = this.columnNameList.map(function (name) { return ({ name: name, column: _this.getColumn(name) }); });\n                for (var i = 0; i < this.rowCount; i++) {\n                    var item = {};\n                    for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n                        var c = columns_1[_i];\n                        var d = c.column.getValuePresence(i);\n                        if (d === 0 /* Present */)\n                            item[c.name] = c.column.getString(i);\n                        else if (d === 1 /* NotSpecified */)\n                            item[c.name] = '.';\n                        else\n                            item[c.name] = '?';\n                    }\n                    rows[i] = item;\n                }\n                return { name: this.name, columns: this.columnNames, rows: rows };\n            };\n            return Category;\n        }());\n\n        function getIntArray(type, size) {\n            switch (type) {\n                case 1 /* Int8 */: return new Int8Array(size);\n                case 2 /* Int16 */: return new Int16Array(size);\n                case 3 /* Int32 */: return new Int32Array(size);\n                case 4 /* Uint8 */: return new Uint8Array(size);\n                case 5 /* Uint16 */: return new Uint16Array(size);\n                case 6 /* Uint32 */: return new Uint32Array(size);\n                default: throw new Error('Unsupported integer data type.');\n            }\n        }\n        function getFloatArray(type, size) {\n            switch (type) {\n                case 32 /* Float32 */: return new Float32Array(size);\n                case 33 /* Float64 */: return new Float64Array(size);\n                default: throw new Error('Unsupported floating data type.');\n            }\n        }\n        // http://stackoverflow.com/questions/7869752/javascript-typed-arrays-and-endianness\n        var isLittleEndian = (function () {\n            var arrayBuffer = new ArrayBuffer(2);\n            var uint8Array = new Uint8Array(arrayBuffer);\n            var uint16array = new Uint16Array(arrayBuffer);\n            uint8Array[0] = 0xAA;\n            uint8Array[1] = 0xBB;\n            if (uint16array[0] === 0xBBAA)\n                return true;\n            return false;\n        })();\n        function int8(data) { return new Int8Array(data.buffer, data.byteOffset); }\n        function flipByteOrder(data, bytes) {\n            var buffer = new ArrayBuffer(data.length);\n            var ret = new Uint8Array(buffer);\n            for (var i = 0, n = data.length; i < n; i += bytes) {\n                for (var j = 0; j < bytes; j++) {\n                    ret[i + bytes - j - 1] = data[i + j];\n                }\n            }\n            return buffer;\n        }\n        function view(data, byteSize, c) {\n            if (isLittleEndian)\n                return new c(data.buffer);\n            return new c(flipByteOrder(data, byteSize));\n        }\n        function int16(data) { return view(data, 2, Int16Array); }\n        function uint16(data) { return view(data, 2, Uint16Array); }\n        function int32(data) { return view(data, 4, Int32Array); }\n        function uint32(data) { return view(data, 4, Uint32Array); }\n        function float32(data) { return view(data, 4, Float32Array); }\n        function float64(data) { return view(data, 8, Float64Array); }\n        function fixedPoint(data, encoding) {\n            var n = data.length;\n            var output = getFloatArray(encoding.srcType, n);\n            var f = 1 / encoding.factor;\n            for (var i = 0; i < n; i++) {\n                output[i] = f * data[i];\n            }\n            return output;\n        }\n        function intervalQuantization(data, encoding) {\n            var n = data.length;\n            var output = getFloatArray(encoding.srcType, n);\n            var delta = (encoding.max - encoding.min) / (encoding.numSteps - 1);\n            var min = encoding.min;\n            for (var i = 0; i < n; i++) {\n                output[i] = min + delta * data[i];\n            }\n            return output;\n        }\n        function runLength(data, encoding) {\n            var output = getIntArray(encoding.srcType, encoding.srcSize);\n            var dataOffset = 0;\n            for (var i = 0, il = data.length; i < il; i += 2) {\n                var value = data[i]; // value to be repeated\n                var length_7 = data[i + 1]; // number of repeats\n                for (var j = 0; j < length_7; ++j) {\n                    output[dataOffset++] = value;\n                }\n            }\n            return output;\n        }\n        function delta(data, encoding) {\n            var n = data.length;\n            var output = getIntArray(encoding.srcType, n);\n            if (!n)\n                return output;\n            output[0] = data[0] + (encoding.origin | 0);\n            for (var i = 1; i < n; ++i) {\n                output[i] = data[i] + output[i - 1];\n            }\n            return output;\n        }\n        function integerPackingSigned(data, encoding) {\n            var upperLimit = encoding.byteCount === 1 ? 0x7F : 0x7FFF;\n            var lowerLimit = -upperLimit - 1;\n            var n = data.length;\n            var output = new Int32Array(encoding.srcSize);\n            var i = 0;\n            var j = 0;\n            while (i < n) {\n                var value = 0, t = data[i];\n                while (t === upperLimit || t === lowerLimit) {\n                    value += t;\n                    i++;\n                    t = data[i];\n                }\n                value += t;\n                output[j] = value;\n                i++;\n                j++;\n            }\n            return output;\n        }\n        function integerPackingUnsigned(data, encoding) {\n            var upperLimit = encoding.byteCount === 1 ? 0xFF : 0xFFFF;\n            var n = data.length;\n            var output = new Int32Array(encoding.srcSize);\n            var i = 0;\n            var j = 0;\n            while (i < n) {\n                var value = 0, t = data[i];\n                while (t === upperLimit) {\n                    value += t;\n                    i++;\n                    t = data[i];\n                }\n                value += t;\n                output[j] = value;\n                i++;\n                j++;\n            }\n            return output;\n        }\n        function integerPacking(data, encoding) {\n            return encoding.isUnsigned ? integerPackingUnsigned(data, encoding) : integerPackingSigned(data, encoding);\n        }\n        function stringArray(data, encoding) {\n            var str = encoding.stringData;\n            var offsets = decode({ encoding: encoding.offsetEncoding, data: encoding.offsets });\n            var indices = decode({ encoding: encoding.dataEncoding, data: data });\n            var cache = Object.create(null);\n            var result = new Array(indices.length);\n            var offset = 0;\n            for (var _i = 0, indices_1 = indices; _i < indices_1.length; _i++) {\n                var i = indices_1[_i];\n                if (i < 0) {\n                    result[offset++] = null;\n                    continue;\n                }\n                var v = cache[i];\n                if (v === void 0) {\n                    v = str.substring(offsets[i], offsets[i + 1]);\n                    cache[i] = v;\n                }\n                result[offset++] = v;\n            }\n            return result;\n        }\n\n        function decodeStep(data, encoding) {\n            switch (encoding.kind) {\n                case 'ByteArray': {\n                    switch (encoding.type) {\n                        case 4 /* Uint8 */: return data;\n                        case 1 /* Int8 */: return int8(data);\n                        case 2 /* Int16 */: return int16(data);\n                        case 5 /* Uint16 */: return uint16(data);\n                        case 3 /* Int32 */: return int32(data);\n                        case 6 /* Uint32 */: return uint32(data);\n                        case 32 /* Float32 */: return float32(data);\n                        case 33 /* Float64 */: return float64(data);\n                        default: throw new Error('Unsupported ByteArray type.');\n                    }\n                }\n                case 'FixedPoint': return fixedPoint(data, encoding);\n                case 'IntervalQuantization': return intervalQuantization(data, encoding);\n                case 'RunLength': return runLength(data, encoding);\n                case 'Delta': return delta(data, encoding);\n                case 'IntegerPacking': return integerPacking(data, encoding);\n                case 'StringArray': return stringArray(data, encoding);\n            }\n        }\n\n        function decode(data) {\n            var current = data.data;\n            for (var i = data.encoding.length - 1; i >= 0; i--) {\n                current = decodeStep(current, data.encoding[i]);\n            }\n            return current;\n        }\n\n        function wrapColumn(column) {\n            if (!column.data.data)\n                return _UndefinedColumn;\n            var data = decode(column.data);\n            var mask = void 0;\n            if (column.mask)\n                mask = decode(column.mask);\n            if (data.buffer && data.byteLength && data.BYTES_PER_ELEMENT) {\n                return mask ? new MaskedNumericColumn(data, mask) : new NumericColumn(data);\n            }\n            return mask ? new MaskedStringColumn(data, mask) : new StringColumn(data);\n        }\n        //var fastParseInt = CIFTools.Utils.FastNumberParsers.parseInt;\n        function fastParseInt(str, start, end) {\n            var ret = 0, neg = 1;\n            if (str.charCodeAt(start) === 45 /* - */) {\n                neg = -1;\n                start++;\n            }\n            for (; start < end; start++) {\n                var c = str.charCodeAt(start) - 48;\n                if (c > 9 || c < 0)\n                    return (neg * ret) | 0;\n                else\n                    ret = (10 * ret + c) | 0;\n            }\n            return neg * ret;\n        }\n        //var fastParseFloat = CIFTools.Utils.FastNumberParsers.parseFloat;\n        function fastParseFloat(str, start, end) {\n            var neg = 1.0, ret = 0.0, point = 0.0, div = 1.0;\n            if (str.charCodeAt(start) === 45) {\n                neg = -1.0;\n                ++start;\n            }\n            while (start < end) {\n                var c = str.charCodeAt(start) - 48;\n                if (c >= 0 && c < 10) {\n                    ret = ret * 10 + c;\n                    ++start;\n                }\n                else if (c === -2) {\n                    ++start;\n                    while (start < end) {\n                        c = str.charCodeAt(start) - 48;\n                        if (c >= 0 && c < 10) {\n                            point = 10.0 * point + c;\n                            div = 10.0 * div;\n                            ++start;\n                        }\n                        else if (c === 53 || c === 21) {\n                            return parseScientific(neg * (ret + point / div), str, start + 1, end);\n                        }\n                        else {\n                            return neg * (ret + point / div);\n                        }\n                    }\n                    return neg * (ret + point / div);\n                }\n                else if (c === 53 || c === 21) {\n                    return parseScientific(neg * ret, str, start + 1, end);\n                }\n                else\n                    break;\n            }\n            return neg * ret;\n        }\n\n        var NumericColumn = (function () {\n            function NumericColumn(data) {\n                this.data = data;\n                this.isDefined = true;\n            }\n            NumericColumn.prototype.getString = function (row) { return \"\" + this.data[row]; };\n            NumericColumn.prototype.getInteger = function (row) { return this.data[row] | 0; };\n            NumericColumn.prototype.getFloat = function (row) { return 1.0 * this.data[row]; };\n            NumericColumn.prototype.stringEquals = function (row, value) { return this.data[row] === fastParseFloat(value, 0, value.length); };\n            NumericColumn.prototype.areValuesEqual = function (rowA, rowB) { return this.data[rowA] === this.data[rowB]; };\n            NumericColumn.prototype.getValuePresence = function (row) { return 0 /* Present */; };\n            return NumericColumn;\n        }());\n        var MaskedNumericColumn = (function () {\n            function MaskedNumericColumn(data, mask) {\n                this.data = data;\n                this.mask = mask;\n                this.isDefined = true;\n            }\n            MaskedNumericColumn.prototype.getString = function (row) { return this.mask[row] === 0 /* Present */ ? \"\" + this.data[row] : null; };\n            MaskedNumericColumn.prototype.getInteger = function (row) { return this.mask[row] === 0 /* Present */ ? this.data[row] : 0; };\n            MaskedNumericColumn.prototype.getFloat = function (row) { return this.mask[row] === 0 /* Present */ ? this.data[row] : 0; };\n            MaskedNumericColumn.prototype.stringEquals = function (row, value) { return this.mask[row] === 0 /* Present */ ? this.data[row] === fastParseFloat(value, 0, value.length) : value === null || value === void 0; };\n            MaskedNumericColumn.prototype.areValuesEqual = function (rowA, rowB) { return this.data[rowA] === this.data[rowB]; };\n            MaskedNumericColumn.prototype.getValuePresence = function (row) { return this.mask[row]; };\n            return MaskedNumericColumn;\n        }());\n        var StringColumn = (function () {\n            function StringColumn(data) {\n                this.data = data;\n                this.isDefined = true;\n            }\n            StringColumn.prototype.getString = function (row) { return this.data[row]; };\n            StringColumn.prototype.getInteger = function (row) { var v = this.data[row]; return fastParseInt(v, 0, v.length); };\n            StringColumn.prototype.getFloat = function (row) { var v = this.data[row]; return fastParseFloat(v, 0, v.length); };\n            StringColumn.prototype.stringEquals = function (row, value) { return this.data[row] === value; };\n            StringColumn.prototype.areValuesEqual = function (rowA, rowB) { return this.data[rowA] === this.data[rowB]; };\n            StringColumn.prototype.getValuePresence = function (row) { return 0 /* Present */; };\n            return StringColumn;\n        }());\n        var MaskedStringColumn = (function () {\n            function MaskedStringColumn(data, mask) {\n                this.data = data;\n                this.mask = mask;\n                this.isDefined = true;\n            }\n            MaskedStringColumn.prototype.getString = function (row) { return this.mask[row] === 0 /* Present */ ? this.data[row] : null; };\n            MaskedStringColumn.prototype.getInteger = function (row) { if (this.mask[row] !== 0 /* Present */)\n                return 0; var v = this.data[row]; return fastParseInt(v || '', 0, (v || '').length); };\n            MaskedStringColumn.prototype.getFloat = function (row) { if (this.mask[row] !== 0 /* Present */)\n                return 0; var v = this.data[row]; return fastParseFloat(v || '', 0, (v || '').length); };\n            MaskedStringColumn.prototype.stringEquals = function (row, value) { return this.data[row] === value; };\n            MaskedStringColumn.prototype.areValuesEqual = function (rowA, rowB) { return this.data[rowA] === this.data[rowB]; };\n            MaskedStringColumn.prototype.getValuePresence = function (row) { return this.mask[row]; };\n            return MaskedStringColumn;\n        }());\n\n        var File = (function () {\n                    function File(data) {\n                        this.dataBlocks = data.dataBlocks.map(function (b) { return new DataBlock(b); });\n                    }\n                    File.prototype.toJSON = function () {\n                        return this.dataBlocks.map(function (b) { return b.toJSON(); });\n                    };\n                    return File;\n        }());\n\n        var file = new File(unpacked);\n        return file;\n\n//    }\n//    catch (e) {\n//        return CIFTools.ParserResult.error('' + e);\n//    }\n};\n\niCn3DUI.prototype.MessagePackParse = function(state) { var me = this;\n    /*\n     * Adapted from https://github.com/rcsb/mmtf-javascript\n     * by Alexander Rose <alexander.rose@weirdbyte.de>, MIT License, Copyright (c) 2016\n     */\n    /**\n     * decode all key-value pairs of a map into an object\n     * @param  {Integer} length - number of key-value pairs\n     * @return {Object} decoded map\n     */\n    function map(state, length) {\n        var value = {};\n        for (var i = 0; i < length; i++) {\n            var key = me.MessagePackParse(state);\n            value[key] = me.MessagePackParse(state);\n        }\n        return value;\n    }\n    /**\n     * decode binary array\n     * @param  {Integer} length - number of elements in the array\n     * @return {Uint8Array} decoded array\n     */\n    function bin(state, length) {\n        // This approach to binary parsing wastes a bit of memory to trade for speed compared to:\n        //\n        //   var value = buffer.subarray(offset, offset + length); //new Uint8Array(buffer.buffer, offset, length);\n        //\n        // It turns out that using the view created by subarray probably uses DataView\n        // in the background, which causes the element access to be several times slower\n        // than creating the new byte array.\n        var value = new Uint8Array(length);\n        var o = state.offset;\n        for (var i = 0; i < length; i++)\n            value[i] = state.buffer[i + o];\n        state.offset += length;\n        return value;\n    }\n    /**\n         * decode array\n         * @param  {Integer} length - number of array elements\n         * @return {Array} decoded array\n         */\n    function array(state, length) {\n        var value = new Array(length);\n        for (var i = 0; i < length; i++) {\n            value[i] = me.MessagePackParse(state);\n        }\n        return value;\n    }\n\n    /**\n     * decode string\n     * @param  {Integer} length - number string characters\n     * @return {String} decoded string\n     */\n    function str(state, length) {\n        var value = utf8Read(state.buffer, state.offset, length);\n        state.offset += length;\n        return value;\n    }\n\n    var __chars = function () {\n        var data = [];\n        for (var i = 0; i < 1024; i++)\n            data[i] = String.fromCharCode(i);\n        return data;\n    }();\n\n    function utf8Read(data, offset, length) {\n        var chars = __chars;\n        var str = void 0, chunk = [], chunkSize = 512, chunkOffset = 0;\n        for (var i = offset, end = offset + length; i < end; i++) {\n            var byte = data[i];\n            // One byte character\n            if ((byte & 0x80) === 0x00) {\n                chunk[chunkOffset++] = chars[byte];\n            }\n            else if ((byte & 0xe0) === 0xc0) {\n                chunk[chunkOffset++] = chars[((byte & 0x0f) << 6) | (data[++i] & 0x3f)];\n            }\n            else if ((byte & 0xf0) === 0xe0) {\n                chunk[chunkOffset++] = String.fromCharCode(((byte & 0x0f) << 12) |\n                    ((data[++i] & 0x3f) << 6) |\n                    ((data[++i] & 0x3f) << 0));\n            }\n            else if ((byte & 0xf8) === 0xf0) {\n                chunk[chunkOffset++] = String.fromCharCode(((byte & 0x07) << 18) |\n                    ((data[++i] & 0x3f) << 12) |\n                    ((data[++i] & 0x3f) << 6) |\n                    ((data[++i] & 0x3f) << 0));\n            }\n            else\n                throwError(\"Invalid byte \" + byte.toString(16));\n            if (chunkOffset === chunkSize) {\n                str = str || [];\n                str[str.length] = chunk.join('');\n                chunkOffset = 0;\n            }\n        }\n        if (!str)\n            return chunk.slice(0, chunkOffset).join('');\n        if (chunkOffset > 0) {\n            str[str.length] = chunk.slice(0, chunkOffset).join('');\n        }\n        return str.join('');\n    }\n\n    var type = state.buffer[state.offset];\n\n    var value, length;\n    // Positive FixInt\n    if ((type & 0x80) === 0x00) {\n        state.offset++;\n        return type;\n    }\n    // FixMap\n    if ((type & 0xf0) === 0x80) {\n        length = type & 0x0f;\n        state.offset++;\n        return map(state, length);\n    }\n    // FixArray\n    if ((type & 0xf0) === 0x90) {\n        length = type & 0x0f;\n        state.offset++;\n        return array(state, length);\n    }\n    // FixStr\n    if ((type & 0xe0) === 0xa0) {\n        length = type & 0x1f;\n        state.offset++;\n        return str(state, length);\n    }\n    // Negative FixInt\n    if ((type & 0xe0) === 0xe0) {\n        value = state.dataView.getInt8(state.offset);\n        state.offset++;\n        return value;\n    }\n    switch (type) {\n        // nil\n        case 0xc0:\n            state.offset++;\n            return null;\n        // false\n        case 0xc2:\n            state.offset++;\n            return false;\n        // true\n        case 0xc3:\n            state.offset++;\n            return true;\n        // bin 8\n        case 0xc4:\n            length = state.dataView.getUint8(state.offset + 1);\n            state.offset += 2;\n            return bin(state, length);\n        // bin 16\n        case 0xc5:\n            length = state.dataView.getUint16(state.offset + 1);\n            state.offset += 3;\n            return bin(state, length);\n        // bin 32\n        case 0xc6:\n            length = state.dataView.getUint32(state.offset + 1);\n            state.offset += 5;\n            return bin(state, length);\n        // float 32\n        case 0xca:\n            value = state.dataView.getFloat32(state.offset + 1);\n            state.offset += 5;\n            return value;\n        // float 64\n        case 0xcb:\n            value = state.dataView.getFloat64(state.offset + 1);\n            state.offset += 9;\n            return value;\n        // uint8\n        case 0xcc:\n            value = state.buffer[state.offset + 1];\n            state.offset += 2;\n            return value;\n        // uint 16\n        case 0xcd:\n            value = state.dataView.getUint16(state.offset + 1);\n            state.offset += 3;\n            return value;\n        // uint 32\n        case 0xce:\n            value = state.dataView.getUint32(state.offset + 1);\n            state.offset += 5;\n            return value;\n        // int 8\n        case 0xd0:\n            value = state.dataView.getInt8(state.offset + 1);\n            state.offset += 2;\n            return value;\n        // int 16\n        case 0xd1:\n            value = state.dataView.getInt16(state.offset + 1);\n            state.offset += 3;\n            return value;\n        // int 32\n        case 0xd2:\n            value = state.dataView.getInt32(state.offset + 1);\n            state.offset += 5;\n            return value;\n        // str 8\n        case 0xd9:\n            length = state.dataView.getUint8(state.offset + 1);\n            state.offset += 2;\n            return str(state, length);\n        // str 16\n        case 0xda:\n            length = state.dataView.getUint16(state.offset + 1);\n            state.offset += 3;\n            return str(state, length);\n        // str 32\n        case 0xdb:\n            length = state.dataView.getUint32(state.offset + 1);\n            state.offset += 5;\n            return str(state, length);\n        // array 16\n        case 0xdc:\n            length = state.dataView.getUint16(state.offset + 1);\n            state.offset += 3;\n            return array(state, length);\n        // array 32\n        case 0xdd:\n            length = state.dataView.getUint32(state.offset + 1);\n            state.offset += 5;\n            return array(state, length);\n        // map 16:\n        case 0xde:\n            length = state.dataView.getUint16(state.offset + 1);\n            state.offset += 3;\n            return map(state, length);\n        // map 32\n        case 0xdf:\n            length = state.dataView.getUint32(state.offset + 1);\n            state.offset += 5;\n            return map(state, length);\n    }\n};\n\n/**\n * @author Jiyao Wang <wangjiy@ncbi.nlm.nih.gov> / https://github.com/ncbi/icn3d\n */\n\niCn3DUI.prototype.showAnnotations = function() { var me = this;\n    me.openDialog(me.pre + 'dl_selectannotations', 'Sequences and Annotations');\n\n    // add note about assembly\n    if( (me.bAssemblyNote === undefined || !me.bAssemblyNote) && me.icn3d.asuCnt !== undefined ) {\n        var html = \"     <br><div id='\" + me.pre + \"assembly_note' style='margin-left:5px;'><span class='icn3d-annoLargeTitle'>Assembly Tips:</span> Only the asymmetric unit is shown in the sequence window.<br>Click \\\"Assembly\\\" in the menu \\\"View\\\" to switch between asymmetric unit and biological assembly (<b>\" + me.icn3d.asuCnt + \"</b> asymmetric unit).</div>\";\n\n        $(\"#\" + me.pre + \"dl_annotations_tabs\").append(html);\n\n        me.bAssemblyNote = true;\n    }\n\n    if(me.bAnnoShown === undefined || !me.bAnnoShown) {\n        //me.setLogCmd(\"view annotations\", true);\n\n    //if(me.giSeq !== undefined) { // clear the previous data\n    //    $(\"#\" + me.pre + \"dl_annotations\").html('');\n    //}\n\n        var chainArray = Object.keys(me.icn3d.chains);\n        if(me.giSeq === undefined) me.giSeq = {};\n        if(me.currClin === undefined) me.currClin = {};\n        if(me.resi2disease_nonempty === undefined) me.resi2disease_nonempty = {};\n        if(me.baseResi === undefined) me.baseResi = {};\n        if(me.matchedPos === undefined) me.matchedPos = {};\n\n        //me.customTracks = {};\n\n        var dialogWidth = $(\"#\" + me.pre + \"dl_selectannotations\").dialog( \"option\", \"width\" );\n        me.seqAnnWidth = dialogWidth - 120 - 30*2 - 50; // title: 120px, start and end resi: 30px, extra space on the left and right: 50px\n\n        me.maxAnnoLength = 1;\n        for(var chainid in me.icn3d.chainsSeq) {\n            if(me.icn3d.chainsSeq[chainid].length > me.maxAnnoLength) {\n                me.maxAnnoLength = me.icn3d.chainsSeq[chainid].length;\n            }\n        }\n\n        var nucleotide_chainid = {}, chemical_chainid = {}, chemical_set = {};\n        me.protein_chainid = {};\n\n        for(var i = 0, il = chainArray.length; i < il; ++i) {\n            var pos = Math.round(chainArray[i].indexOf('_'));\n            //if(pos > 4) continue; // NMR structures with structure id such as 2K042,2K043, ...\n\n            var atom = me.icn3d.getFirstCalphaAtomObj(me.icn3d.chains[chainArray[i]]);\n            // only single letter chain has accession such as 1P9M_A\n            var chainLetter = chainArray[i].substr(chainArray[i].indexOf('_') + 1);\n\n            var chainidBase;\n            if(chainLetter.indexOf('_') !== -1) { // NCBI modified chainid, e.g., A_1\n                chainLetter = chainLetter.substr(0, chainLetter.indexOf('_'));\n\n                chainidBase = chainArray[i].substr(0, chainArray[i].indexOf('_')) + '_' + chainLetter;\n            }\n            else {\n                chainidBase = chainArray[i];\n            }\n\n            //if(me.cfg.mmdbid !== undefined) { // protein and chemicals/ions are in different chains\n            if(me.icn3d.proteins.hasOwnProperty(atom.serial)) {\n                me.protein_chainid[chainArray[i]] = chainidBase;\n            }\n            else if(me.icn3d.nucleotides.hasOwnProperty(atom.serial)) {\n                nucleotide_chainid[chainArray[i]] = chainidBase;\n            }\n            else {\n                if(me.icn3d.chainsSeq[chainArray[i]].length > 1) {\n                    chemical_chainid[chainArray[i]] = chainidBase;\n                }\n                else {\n                    var name = me.icn3d.chainsSeq[chainArray[i]][0].name;\n                    var resid = chainArray[i] + '_' + me.icn3d.chainsSeq[chainArray[i]][0].resi;\n\n                    if(chemical_set[name] === undefined) chemical_set[name] = [];\n                    chemical_set[name].push(resid);\n                }\n            }\n            //}\n\n            // protein and nucleotide chain may have chemicals/ions attached at the end\n            if( (me.cfg.pdbid !== undefined || me.cfg.mmcifid !== undefined || me.cfg.mmtfid !== undefined)\n              && (me.icn3d.proteins.hasOwnProperty(atom.serial) || me.icn3d.nucleotides.hasOwnProperty(atom.serial)) ) {\n                for(var r = 0, rl = me.icn3d.chainsSeq[chainArray[i]].length; r < rl; ++r) {\n                    var resObj = me.icn3d.chainsSeq[chainArray[i]][r];\n                    if(resObj.name !== '' && resObj.name !== '-' && resObj.name == resObj.name.toUpperCase()) {\n                        var resid = chainArray[i] + '_' + resObj.resi;\n                        var atom = me.icn3d.getFirstCalphaAtomObj(me.icn3d.residues[resid]);\n\n                        if(me.icn3d.proteins.hasOwnProperty(atom.serial) || me.icn3d.nucleotides.hasOwnProperty(atom.serial)) {\n                            continue;\n                        }\n                        else {\n                            var name = resObj.name.trim();\n\n                            if(chemical_set[name] === undefined) chemical_set[name] = [];\n                            chemical_set[name].push(resid);\n                        }\n                    } // if(resObj.name !== ''\n                } // for(var r = 0\n            } // if(me.cfg.mmdbid\n        } // for(var i = 0\n\n/*\n        var i = 0;\n        for(var chain in me.protein_chainid) {\n            me.getAnnotationData(chain, me.protein_chainid[chain], i);\n            ++i;\n        }\n*/\n\n        if(me.cfg.blast_rep_id === undefined) {\n           if(me.bFullUi) {\n               if(me.cfg.mmtfid !== undefined) { // mmtf data do NOT have the missing residues\n                   var id = chainArray[0].substr(0, chainArray[0].indexOf('_'));\n\n                   $.when(me.downloadMmcifSymmetry(id, 'mmtfid')).then(function() {\n                       me.showAnnoSeqData(nucleotide_chainid, chemical_chainid, chemical_set);\n                   });\n               }\n               else {\n                   me.showAnnoSeqData(nucleotide_chainid, chemical_chainid, chemical_set);\n               }\n           }\n        }\n        else if(me.cfg.blast_rep_id !== undefined) { // align sequence to structure\n           var url = 'https://www.ncbi.nlm.nih.gov/Structure/pwaln/pwaln.fcgi?from=querytarget';\n           var dataObj = {'targets': me.cfg.blast_rep_id, 'queries': me.cfg.query_id};\n\n           if(me.cfg.query_from_to !== undefined ) {\n               // convert from 1-based to 0-based\n               var query_from_to_array = me.cfg.query_from_to.split(':');\n               for(var i = 0, il = query_from_to_array.length; i < il; ++i) {\n                   query_from_to_array[i] = parseInt(query_from_to_array[i]) - 1;\n               }\n\n               dataObj['queries'] = me.cfg.query_id + ':' + query_from_to_array.join(':');\n           }\n\n           if(me.cfg.target_from_to !== undefined) {\n               // convert from 1-based to 0-based\n               var target_from_to_array = me.cfg.target_from_to.split(':');\n               for(var i = 0, il = target_from_to_array.length; i < il; ++i) {\n                   target_from_to_array[i] = parseInt(target_from_to_array[i]) - 1;\n               }\n\n               dataObj['targets'] = me.cfg.blast_rep_id + ':' + target_from_to_array.join(':');\n           }\n\n           $.ajax({\n              url: url,\n              type: 'POST',\n              data : dataObj,\n              dataType: 'jsonp',\n              //dataType: 'json',\n              tryCount : 0,\n              retryLimit : 1,\n              success: function(data) {\n                me.seqStructAlignData = data;\n\n                me.showAnnoSeqData(nucleotide_chainid, chemical_chainid, chemical_set);\n              },\n              error : function(xhr, textStatus, errorThrown ) {\n                this.tryCount++;\n                if (this.tryCount <= this.retryLimit) {\n                    //try again\n                    $.ajax(this);\n                    return;\n                }\n                return;\n              }\n            });\n        } // align seq to structure\n    }\n\n    me.bAnnoShown = true;\n};\n\niCn3DUI.prototype.showAnnoSeqData = function(nucleotide_chainid, chemical_chainid, chemical_set) { var me = this;\n    me.getAnnotationData();\n\n    var i = 0;\n    for(var chain in nucleotide_chainid) {\n        me.getSequenceData(chain, nucleotide_chainid[chain], 'nucleotide', i);\n        ++i;\n    }\n\n    me.interactChainChainbase = me.icn3d.unionHash(me.protein_chainid, nucleotide_chainid);\n\n    i = 0;\n    for(var chain in chemical_chainid) {\n        me.getSequenceData(chain, chemical_chainid[chain], 'chemical', i);\n        ++i;\n    }\n\n    me.interactChainChainbase = me.icn3d.unionHash(me.interactChainChainbase, chemical_chainid);\n    me.ssbondChainChainbase = me.icn3d.unionHash(me.protein_chainid, chemical_chainid);\n\n    for(var name in chemical_set) {\n        me.getCombinedSequenceData(name, chemical_set[name], i);\n        ++i;\n    }\n\n    me.enableHlSeq();\n\n    setTimeout(function(){\n      //me.setAnnoViewAndDisplay('overview');\n      me.hideAllAnno();\n      me.clickCdd();\n    }, 0);\n};\n\niCn3DUI.prototype.enableHlSeq = function() { var me = this;\n    if(! me.isMobile()) {\n        me.selectSequenceNonMobile();\n    }\n    else {\n        me.selectSequenceMobile();\n        me.selectChainMobile();\n    }\n\n    // highlight seq after the ajax calls\n    if(Object.keys(me.icn3d.hAtoms).length < Object.keys(me.icn3d.dAtoms).length) {\n        me.updateHlSeq();\n    }\n};\n\n// by default, showSeq and showCddSite are called at showAnnotations\n// the following will be called only when the annotation is selected: showSnpClinvar, showDomain, showInteraction\n// showSnpClinvar and showDomain will loop through me.protein_chainid\n// showInteraction will loop through me.interactChainChainbase\niCn3DUI.prototype.updateSnpClinvar = function() { var me = this;\n    if(me.bSnpClinvarShown === undefined || !me.bSnpClinvarShown) {\n        for(var chainid in me.protein_chainid) {\n            var chainidBase = me.protein_chainid[chainid];\n            me.showSnpClinvar(chainid, chainidBase);\n        }\n    }\n\n    me.bSnpClinvarShown = true;\n};\n\niCn3DUI.prototype.updateDomain = function() { var me = this;\n    if(me.bDomainShown === undefined || !me.bDomainShown) {\n/*\n        for(var chainid in me.protein_chainid) {\n            var chainidBase = me.protein_chainid[chainid];\n            me.showDomain(chainid, chainidBase);\n        }\n*/\n        me.showDomainAll();\n    }\n\n    me.bDomainShown = true;\n};\n\niCn3DUI.prototype.updateInteraction = function() { var me = this;\n    if(me.bInteractionShown === undefined || !me.bInteractionShown) {\n        for(var chainid in me.interactChainChainbase) {\n            var chainidBase = me.interactChainChainbase[chainid];\n            me.showInteraction(chainid, chainidBase);\n        }\n    }\n\n    me.bInteractionShown = true;\n};\n\niCn3DUI.prototype.updateSsbond = function() { var me = this;\n    if(me.bSSbondShown === undefined || !me.bSSbondShown) {\n        for(var chainid in me.ssbondChainChainbase) {\n            var chainidBase = me.interactChainChainbase[chainid];\n            me.showSsbond(chainid, chainidBase);\n        }\n    }\n\n    me.bSSbondShown = true;\n};\n\niCn3DUI.prototype.getAnDiv = function(chnid, anno) { var me = this;\n    var message = 'Loading ' + anno + '...';\n    if(anno == 'custom') {\n        message = ''\n    }\n    else if(anno == 'domain') {\n        message = 'Loading 3D ' + anno + '...';\n    }\n\n    return \"<div id='\" + me.pre + anno + \"_\" + chnid + \"'><div id='\" + me.pre + \"tt_\" + anno + \"_\" + chnid + \"' class='icn3d-fixed-pos' style='display:none!important'></div><div id='\" + me.pre + \"dt_\" + anno + \"_\" + chnid + \"' style='display:none'>\" + message + \"</div><div id='\" + me.pre + \"ov_\" + anno + \"_\" + chnid + \"'>\" + message + \"</div></div>\";\n};\n\niCn3DUI.prototype.addButton = function(chnid, classvalue, name, desc, width, buttonStyle) { var me = this;\n    return \"<div class='\" + classvalue + \"' chainid='\" + chnid + \"' style='display:inline-block; font-size:11px; font-weight:bold; width:\" + width + \"px!important;'><button style='-webkit-appearance:\" + buttonStyle + \"; height:18px; width:\" + width + \"px;'><span style='white-space:nowrap; margin-left:-3px;' title='\" + desc + \"'>\" + name + \"</span></button></div>\";\n};\n\niCn3DUI.prototype.conservativeReplacement = function(resA, resB) { var me = this;\n    var iA = (me.b62ResArray.indexOf(resA) !== -1) ? me.b62ResArray.indexOf(resA) : me.b62ResArray.length - 1; // or the last one \"*\"\n    var iB = (me.b62ResArray.indexOf(resB) !== -1) ? me.b62ResArray.indexOf(resB) : me.b62ResArray.length - 1; // or the last one \"*\"\n\n    var matrixValue = me.b62Matrix[iA][iB];\n\n    if(matrixValue > 0) {\n        return true;\n    }\n    else {\n        return false;\n    }\n};\n\niCn3DUI.prototype.getColorhexFromBlosum62 = function(resA, resB) { var me = this;\n    var iA = (me.b62ResArray.indexOf(resA) !== -1) ? me.b62ResArray.indexOf(resA) : me.b62ResArray.length - 1; // or the last one \"*\"\n    var iB = (me.b62ResArray.indexOf(resB) !== -1) ? me.b62ResArray.indexOf(resB) : me.b62ResArray.length - 1; // or the last one \"*\"\n\n    var matrixValue = me.b62Matrix[iA][iB];\n\n    if(matrixValue === undefined) return '333333';\n\n    // range and color: blue for -4 ~ 0, red for 0 ~ 11\n    // max value 221 to avoid white\n    var color = '333333';\n    if(matrixValue > 0) {\n        var c = 221 - parseInt(matrixValue / 11.0 * 221);\n        var cStr = (c < 10) ? '0' + c.toString(16) : c.toString(16);\n        color = 'DD' + cStr + cStr;\n    }\n    else {\n        var c = 221 - parseInt(-1.0 * matrixValue / 4.0 * 221);\n        var cStr = (c < 10) ? '0' + c.toString(16) : c.toString(16);\n        color = cStr + cStr + 'DD';\n    }\n\n    return color;\n};\n\niCn3DUI.prototype.getAnnotationData = function() { var me = this;\n    var chnidBaseArray = $.map(me.protein_chainid, function(v) { return v; });\n\n    var index = 0;\n    for(var chnid in me.protein_chainid) {\n        var buttonStyle = me.isMobile() ? 'none' : 'button';\n\n        var fullProteinName = me.getProteinName(chnid);\n        var proteinName = fullProteinName;\n        //if(proteinName.length > 40) proteinName = proteinName.substr(0, 40) + \"...\";\n\n        var categoryStr = (index == 0) ? \"<span class='icn3d-annoLargeTitle'><b>Proteins</b>: </span><br><br>\" : \"\";\n\n        var geneLink = (me.icn3d.chainsGene[chnid] && me.icn3d.chainsGene[chnid].geneId) ? \" (Gene: <a href='https://www.ncbi.nlm.nih.gov/gene/\" + me.icn3d.chainsGene[chnid].geneId + \"' target='_blank' title='\" + me.icn3d.chainsGene[chnid].geneDesc + \"'>\" + me.icn3d.chainsGene[chnid].geneSymbol + \"</a>)\" : '';\n\n        var chainHtml = \"<div id='\" + me.pre + \"anno_\" + chnid + \"' class='icn3d-annotation'>\" + categoryStr + \"<span style='font-weight:bold;'>Annotations of \" + chnid + \"</span>: <a class='icn3d-blue' href='https://www.ncbi.nlm.nih.gov/protein?term=\" + chnid + \"' target='_blank' title='\" + fullProteinName + \"'>\" + proteinName + \"</a>\" + geneLink + \"&nbsp;&nbsp;&nbsp;\"\n        + me.addButton(chnid, \"icn3d-addtrack\", \"Add Track\", \"Add a custom track\", 60, buttonStyle) + \"&nbsp;&nbsp;&nbsp;\"\n        + me.addButton(chnid, \"icn3d-helixsets\", \"Helix Sets\", \"Define sets for each helix in this chain and add them to the menu of \\\"Defined Sets\\\"\", 60, buttonStyle) + \"&nbsp;\"\n        + me.addButton(chnid, \"icn3d-sheetsets\", \"Sheet Sets\", \"Define sets for each sheet in this chain and add them to the menu of \\\"Defined Sets\\\"\", 60, buttonStyle) + \"&nbsp;\"\n        + me.addButton(chnid, \"icn3d-coilsets\", \"Coil Sets\", \"Define sets for each coil in this chain and add them to the menu of \\\"Defined Sets\\\"\", 60, buttonStyle);\n\n        $(\"#\" + me.pre + \"dl_annotations\").append(chainHtml);\n\n        // dt: detailed view, hide by default; ov: overview, show by default\n        $(\"#\" + me.pre + \"anno_\" + chnid).append(me.getAnDiv(chnid, 'giseq'));\n        $(\"#\" + me.pre + \"anno_\" + chnid).append(me.getAnDiv(chnid, 'cdd'));\n        $(\"#\" + me.pre + \"anno_\" + chnid).append(me.getAnDiv(chnid, 'clinvar'));\n        $(\"#\" + me.pre + \"anno_\" + chnid).append(me.getAnDiv(chnid, 'snp'));\n        $(\"#\" + me.pre + \"anno_\" + chnid).append(me.getAnDiv(chnid, 'domain'));\n        $(\"#\" + me.pre + \"anno_\" + chnid).append(me.getAnDiv(chnid, 'site'));\n        $(\"#\" + me.pre + \"anno_\" + chnid).append(me.getAnDiv(chnid, 'interaction'));\n        $(\"#\" + me.pre + \"anno_\" + chnid).append(me.getAnDiv(chnid, 'custom'));\n        $(\"#\" + me.pre + \"anno_\" + chnid).append(me.getAnDiv(chnid, 'ssbond'));\n\n        $(\"#\" + me.pre + \"anno_\" + chnid).append(\"<br><hr><br>\");\n\n        ++index;\n    }\n\n    me.setToolTip();\n\n    // set me.chain2gi\n    me.chain2gi = {};\n\n    // get gi from acc\n    var url2 = \"https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esummary.fcgi?db=protein&retmode=json&id=\" + chnidBaseArray;\n\n    $.ajax({\n      url: url2,\n      dataType: 'json',\n      cache: true,\n      tryCount : 0,\n      retryLimit : 1,\n      success: function(data2) {\n        for(var id in data2.result) {\n          if(id !== 'uids') {\n            me.chain2gi[data2.result[id].caption] = id;\n          }\n        }\n      },\n      error : function(xhr, textStatus, errorThrown ) {\n        this.tryCount++;\n        if (this.tryCount <= this.retryLimit) {\n            //try again\n            $.ajax(this);\n            //return;\n        }\n\n        //return;\n      }\n    });\n\n    // show the sequence and 3D structure\n    var url = \"https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=protein&retmode=json&rettype=fasta&id=\" + chnidBaseArray;\n    $.ajax({\n      url: url,\n      dataType: 'text',\n      cache: true,\n      tryCount : 0,\n      retryLimit : 1,\n      success: function(data) {\n        var chainArray = data.split('\\n\\n');\n\n        var chainid_seq = {};\n        for(var i = 0, il = chainArray.length; i < il; ++i) {\n            var strArray = chainArray[i].split('\\n');\n\n            if(strArray.length > 0) {\n                var title = strArray[0]; // >pdb|1HHO|B Chain B, Hemoglobin A (oxy) (beta Chain)\n                var fieldArray = title.split(' ');\n                var idArray = fieldArray[0].split('|');\n                var chainid = idArray[1] + '_' + idArray[2];\n\n                strArray.shift();\n                var allSeq = strArray.join('');\n                chainid_seq[chainid] = allSeq;\n            }\n        }\n\n        for(var chnid in me.protein_chainid) {\n            var chnidBase = me.protein_chainid[chnid];\n\n            if(chainid_seq.hasOwnProperty(chnid)) {\n                var allSeq = chainid_seq[chnid];\n                me.giSeq[chnid] = allSeq;\n\n                // the first 10 residues from sequences with structure\n                var startResStr = '';\n                for(var i = 0; i < 10 && i < me.icn3d.chainsSeq[chnid].length; ++i) {\n                    startResStr += me.icn3d.chainsSeq[chnid][i].name.substr(0, 1);\n                }\n\n                var pos = allSeq.toLowerCase().indexOf(startResStr.toLowerCase());\n                if(pos == -1) {\n                    console.log(\"The gi sequence didn't match the protein sequence. The start of 3D protein sequence: \" + startResStr + \". The gi sequence: \" + allSeq.substr(0, 10) + \".\");\n\n                    me.setAlternativeSeq(chnid, chnidBase);\n                }\n                else {\n                    me.matchedPos[chnid] = pos;\n                    me.baseResi[chnid] = me.icn3d.chainsSeq[chnid][0].resi - me.matchedPos[chnid] - 1;\n                }\n            }\n            else {\n                console.log( \"No data were found for the protein \" + chnid + \"...\" );\n\n                me.setAlternativeSeq(chnid, chnidBase);\n            }\n\n            if(me.cfg.blast_rep_id != chnid) {\n                me.showSeq(chnid, chnidBase);\n            }\n            else if(me.cfg.blast_rep_id == chnid && me.seqStructAlignData.data === undefined) {\n              var title;\n              if(me.cfg.query_id.length > 14) {\n                  title = 'Query: ' + me.cfg.query_id.substr(0, 6);\n              }\n              else {\n                  title = (isNaN(me.cfg.query_id)) ? 'Query: ' + me.cfg.query_id : 'Query: gi ' + me.cfg.query_id;\n              }\n\n              compTitle = undefined;\n              compText = undefined;\n\n              var text = \"cannot be aligned\";\n\n              me.queryStart = '';\n              me.queryEnd = '';\n\n              alert('The sequence can NOT be aligned to the structure');\n\n              me.showSeq(chnid, chnidBase, undefined, title, compTitle, text, compText);\n            }\n            else if(me.cfg.blast_rep_id == chnid && me.seqStructAlignData.data !== undefined) { // align sequence to structure\n              //var title = 'Query: ' + me.cfg.query_id.substr(0, 6);\n              var title;\n              if(me.cfg.query_id.length > 14) {\n                  title = 'Query: ' + me.cfg.query_id.substr(0, 6);\n              }\n              else {\n                  title = (isNaN(me.cfg.query_id)) ? 'Query: ' + me.cfg.query_id : 'Query: gi ' + me.cfg.query_id;\n              }\n\n              var data = me.seqStructAlignData;\n\n              var query, target;\n\n              if(data.data !== undefined) {\n                  query = data.data[0].query;\n                  target = data.data[0].targets[chnid.replace(/_/g, '')];\n\n                  target = (target.hsps.length > 0) ? target.hsps[0] : undefined;\n              }\n\n              var text = '', compText = '';\n\n              me.queryStart = '';\n              me.queryEnd = '';\n\n              if(query !== undefined && target !== undefined) {\n                  var evalue = target.scores.e_value.toPrecision(2);\n                  if(evalue > 1e-200) evalue = parseFloat(evalue).toExponential();\n\n                  var bitscore = target.scores.bit_score;\n\n                  var targetSeq = data.targets[chnid.replace(/_/g, '')].seqdata;\n                  var querySeq = query.seqdata;\n\n                  var segArray = target.segs;\n                  var target2queryHash = {};\n                  me.targetGapHash = {};\n                  me.fullpos2ConsTargetpos = {};\n                  me.consrvResPosArray = [];\n\n                  var prevTargetTo = 0, prevQueryTo = 0;\n                  me.nTotalGap = 0;\n                  me.queryStart = segArray[0].from + 1;\n                  me.queryEnd = segArray[segArray.length - 1].to + 1;\n\n                  for(var i = 0, il = segArray.length; i < il; ++i) {\n                      var seg = segArray[i];\n                      if(i > 0) { // determine gap\n                        if(seg.orifrom - prevTargetTo < seg.from - prevQueryTo) { // gap in target\n                            me.targetGapHash[seg.orifrom] = {'from': prevQueryTo + 1, 'to': seg.from - 1};\n                            me.nTotalGap += me.targetGapHash[seg.orifrom].to - me.targetGapHash[seg.orifrom].from + 1;\n                        }\n                        else if(seg.orifrom - prevTargetTo > seg.from - prevQueryTo) { // gap in query\n                            for(var j = prevTargetTo + 1; j < seg.orifrom; ++j) {\n                              target2queryHash[j] = -1; // means gap in query\n                            }\n                        }\n                      }\n\n                      for(var j = 0; j <= seg.orito - seg.orifrom; ++j) {\n                          target2queryHash[j + seg.orifrom] = j + seg.from;\n                      }\n                      prevTargetTo = seg.orito;\n                      prevQueryTo = seg.to;\n                  }\n\n                  // the missing residuesatthe end ofthe seq will be filled up in the API showNewTrack()\n                  var nGap = 0;\n                  me.icn3d.alnChainsSeq[chnid] = [];\n\n                  for(var i = 0, il = targetSeq.length; i < il; ++i) {\n                      //text += me.insertGap(chnid, i, '-', true);\n                      if(me.targetGapHash.hasOwnProperty(i)) {\n                          for(var j = me.targetGapHash[i].from; j <= me.targetGapHash[i].to; ++j) {\n                              text += querySeq[j];\n                          }\n                      }\n\n                      compText += me.insertGap(chnid, i, '-', true);\n                      if(me.targetGapHash.hasOwnProperty(i)) nGap += me.targetGapHash[i].to - me.targetGapHash[i].from + 1;\n\n                      if(target2queryHash.hasOwnProperty(i) && target2queryHash[i] !== -1) {\n                          text += querySeq[target2queryHash[i]];\n                          var colorHexStr = me.getColorhexFromBlosum62(targetSeq[i], querySeq[target2queryHash[i]]);\n\n                          if(targetSeq[i] == querySeq[target2queryHash[i]]) {\n                              compText += targetSeq[i];\n                              me.fullpos2ConsTargetpos[i + nGap] = {'same': 1, 'pos': i+1, 'res': targetSeq[i], 'color': colorHexStr};\n                              me.consrvResPosArray.push(i+1);\n\n                              me.icn3d.alnChainsSeq[chnid].push({'resi': i+1, 'color': '#FF0000', 'color2': '#' + colorHexStr});\n                          }\n                          else if(me.conservativeReplacement(targetSeq[i], querySeq[target2queryHash[i]])) {\n                              compText += '+';\n                              me.fullpos2ConsTargetpos[i + nGap] = {'same': 0, 'pos': i+1, 'res': targetSeq[i], 'color': colorHexStr};\n                              me.consrvResPosArray.push(i+1);\n\n                              me.icn3d.alnChainsSeq[chnid].push({'resi': i+1, 'color': '#0000FF', 'color2': '#' + colorHexStr});\n                          }\n                          else {\n                              compText += ' ';\n                              me.fullpos2ConsTargetpos[i + nGap] = {'same': -1, 'pos': i+1, 'res': targetSeq[i], 'color': colorHexStr};\n\n                              me.icn3d.alnChainsSeq[chnid].push({'resi': i+1, 'color': me.GREYC, 'color2': '#' + colorHexStr});\n                          }\n                      }\n                      else {\n                          text += '-';\n                          compText += ' ';\n                      }\n                  }\n\n                  //title += ', E: ' + evalue;\n              }\n              else {\n                  text += \"cannot be aligned\";\n\n                  alert('The sequence can NOT be aligned to the structure');\n              }\n\n              var compTitle = 'BLAST, E: ' + evalue;\n              me.showSeq(chnid, chnidBase, undefined, title, compTitle, text, compText);\n\n              var residueidHash = {};\n              var residueid;\n              if(me.consrvResPosArray !== undefined) {\n                for(var i = 0, il = me.consrvResPosArray.length; i < il; ++i) {\n                    residueid = chnidBase + '_' + me.consrvResPosArray[i];\n\n                    residueidHash[residueid] = 1;\n                    //atomHash = me.icn3d.unionHash(atomHash, me.icn3d.residues[residueid]);\n                }\n              }\n\n              //me.selectResidueList(residueidHash, chnidBase + '_blast', compTitle, false);\n              me.selectResidueList(residueidHash, 'aligned_protein', compTitle, false);\n            } // align seq to structure\n        } // for loop\n\n        me.enableHlSeq();\n\n        // get CDD/Binding sites\n        me.showCddSiteAll();\n      },\n      error : function(xhr, textStatus, errorThrown ) {\n        this.tryCount++;\n        if (this.tryCount <= this.retryLimit) {\n            //try again\n            $.ajax(this);\n            return;\n        }\n\n        me.enableHlSeq();\n\n        console.log( \"No data were found for the protein \" + chnidBaseArray + \"...\" );\n\n        for(var chnid in me.protein_chainid) {\n            var chnidBase = me.protein_chainid[chnid];\n            me.setAlternativeSeq(chnid, chnidBase);\n            me.showSeq(chnid, chnidBase);\n        }\n\n        // get CDD/Binding sites\n        me.showCddSiteAll();\n\n        return;\n      }\n    });\n};\n\niCn3DUI.prototype.setAlternativeSeq = function(chnid, chnidBase) { var me = this;\n    //if(me.icn3d.chainsSeq[chnid] !== undefined) {\n    var resArray = me.icn3d.chainsSeq[chnid];\n\n    me.giSeq[chnid] = [];\n\n    for(var i = 0, il = resArray.length; i < il; ++i) {\n        var res = resArray[i].name;\n        me.giSeq[chnid][i] = res;\n    }\n\n    me.matchedPos[chnid] = 0;\n    me.baseResi[chnid] = me.icn3d.chainsSeq[chnid][0].resi - me.matchedPos[chnid] - 1;\n};\n\niCn3DUI.prototype.getProteinName= function(chnid) { var me = this;\n    var fullProteinName = '';\n    if( (me.cfg.mmdbid !== undefined || me.cfg.gi !== undefined || me.cfg.blast_rep_id !== undefined) && me.mmdb_data !== undefined) {\n        var moleculeInfor = me.mmdb_data.moleculeInfor;\n        var chain = chnid.substr(chnid.indexOf('_') + 1);\n        for(var i in moleculeInfor) {\n            if(moleculeInfor[i].chain == chain) {\n                fullProteinName = moleculeInfor[i].name.replace(/\\'/g, '&prime;');\n                proteinName = fullProteinName;\n                //if(proteinName.length > 40) proteinName = proteinName.substr(0, 40) + \"...\";\n                break;\n            }\n        }\n    }\n    else if(me.cfg.align !== undefined && me.chainid2title !== undefined) {\n        if(me.chainid2title[chnid] !== undefined) {\n            fullProteinName = me.chainid2title[chnid];\n        }\n    }\n\n    return fullProteinName;\n};\n\niCn3DUI.prototype.getSequenceData = function(chnid, chnidBase, type, index) { var me = this;\n    var fullProteinName = me.getProteinName(chnid);\n    var proteinName = fullProteinName;\n    if(proteinName.length > 40) proteinName = proteinName.substr(0, 40) + \"...\";\n\n    var categoryStr = \"\";\n\n    if(index == 0) {\n        if(type == 'protein') {\n            categoryStr = \"<span class='icn3d-annoLargeTitle'><b>Proteins</b>: </span><br><br>\";\n        }\n        else if(type == 'nucleotide') {\n            categoryStr = \"<span class='icn3d-annoLargeTitle'><b>Nucleotides</b>: </span><br><br>\";\n        }\n        else if(type == 'chemical') {\n            categoryStr = \"<span class='icn3d-annoLargeTitle'><b>Chemicals/Ions/Water</b>: </span><br><br>\";\n        }\n    }\n\n//    $(\"#\" + me.pre + \"dl_annotations\").append(\"<div id='\" + me.pre + \"anno_\" + chnid + \"' class='icn3d-annotation'><span style='font-weight:bold;' title='Sequences of \" + chnid + \"'>Sequences of \" + chnid + proteinName + \"</span> <div class='addtrack' chainid='\" + chnid + \"' style='display:inline-block; font-size:11px; font-weight:bold; width:60px!important;'><button class='link' style='-webkit-appearance:\" + buttonStyle + \"; height:18px; width:60px;'><span style='white-space:nowrap; margin-left:-3px;' title='Add a custom track'>Add Track</span></button></div></div>\");\n    $(\"#\" + me.pre + \"dl_annotations\").append(\"<div id='\" + me.pre + \"anno_\" + chnid + \"' class='icn3d-annotation'>\" + categoryStr + \"<b>\" + chnid + \"</b>: \" + \"<span title='\" + fullProteinName + \"'>\" + proteinName + \"</span> </div>\");\n\n    // dt: detailed view, hide by default; ov: overview, show by default\n    $(\"#\" + me.pre + \"anno_\" + chnid).append(me.getAnDiv(chnid, 'giseq'));\n    //$(\"#\" + me.pre + \"anno_\" + chnid).append(me.getAnDiv(chnid, 'custom'));\n    $(\"#\" + me.pre + \"anno_\" + chnid).append(me.getAnDiv(chnid, 'interaction'));\n\n    $(\"#\" + me.pre + \"anno_\" + chnid).append(\"<br><hr><br>\");\n\n    // show the sequence and 3D structure\n    me.giSeq[chnid] = [];\n    for(var i = 0; i < me.icn3d.chainsSeq[chnid].length; ++i) {\n        var res = me.icn3d.chainsSeq[chnid][i].name;\n        //me.giSeq[chnid][i] = (res.length > 1) ? res.substr(0, 1) : res;\n        me.giSeq[chnid][i] = res;\n    }\n\n    me.matchedPos[chnid] = 0;\n    me.baseResi[chnid] = me.icn3d.chainsSeq[chnid][0].resi - me.matchedPos[chnid] - 1;\n\n    me.showSeq(chnid, chnidBase, type);\n\n    //me.showInteraction(chnid, chnidBase);\n};\n\niCn3DUI.prototype.getCombinedSequenceData = function(name, residArray, index) { var me = this;\n\n    var categoryStr = (index == 0) ? \"<span class='icn3d-annoLargeTitle'><b>Chemicals/Ions/Water</b>: </span><br><br>\" : \"\";\n\n    var chemName;\n    var pos = residArray[0].lastIndexOf('_');\n    var firstChainid = residArray[0].substr(0, pos);\n\n    var sid = (me.cfg.mmdbid !== undefined) ? me.chainid2sid[firstChainid] : undefined;\n    if(sid !== undefined) {\n        chemName = \"<b><a class='icn3d-blue' href='https://pubchem.ncbi.nlm.nih.gov/substance/\" + sid + \"#section=2D-Structure' target='_blank'>\" + name + \" <img src='https://pubchem.ncbi.nlm.nih.gov/image/imgsrv.fcgi?sid=\" + sid + \"'></a></b>\";\n    }\n    else {\n        chemName = \"<b>\" + name + \"</b>\";\n    }\n\n    $(\"#\" + me.pre + \"dl_annotations\").append(\"<div id='\" + me.pre + \"anno_\" + name + \"' class='icn3d-annotation'>\" + categoryStr + chemName + \"</div>\");\n\n    // dt: detailed view, hide by default; ov: overview, show by default\n    $(\"#\" + me.pre + \"anno_\" + name).append(\"<div id='\" + me.pre + \"giseq_\" + name + \"'><div id='\" + me.pre + \"dt_giseq_\" + name + \"' style='display:none'></div><div id='\" + me.pre + \"ov_giseq_\" + name + \"'></div></div>\");\n\n    $(\"#\" + me.pre + \"anno_\" + name).append(\"<br><hr><br>\");\n\n\n    // sequence, detailed view\n    var htmlTmp = '<div id=\"' + me.pre + 'giseq_sequence\" class=\"icn3d-dl_sequence\">';\n\n    var chainType = 'Chem.', chainTypeFull = 'Chemical';\n\n    htmlTmp += '<div class=\"icn3d-seqTitle\" anno=\"sequence\"><span style=\"white-space:nowrap;\" title=\"' + chainTypeFull + ' ' + name + '\">' + chainType + ' ' + name + '</span></div>';\n\n    htmlTmp += '<span class=\"icn3d-residueNum\" style=\"width:60px!important;\" title=\"starting protein sequence number\">Count: ' + residArray.length + '</span>';\n    htmlTmp += '<span class=\"icn3d-seqLine\">';\n\n    // sequence, overview\n    var html = htmlTmp;\n    var html2 = htmlTmp;\n\n    for(var i = 0, il = residArray.length; i < il; ++i) {\n      var cFull = name;\n\n      var c = cFull;\n      if(cFull.length > 3) {\n          c = cFull.substr(0,3);\n      }\n\n      if(i < residArray.length - 1) c = c + ',';\n\n      var resid = residArray[i];\n      var resi = resid.substr(resid.lastIndexOf('_') + 1);\n\n      html += '<span id=\"giseq_' + me.pre + resid + '\" title=\"' + cFull + resi + '\" class=\"icn3d-residue icn3d-chemical\">' + c + '</span>';\n    }\n\n    var color = me.GREY8;\n\n    //html2 += '<div class=\"icn3d-seqTitle\" style=\"display:inline-block; color:white; font-weight:bold; background-color:' + color + '; width:' + Math.round(me.seqAnnWidth * residArray.length / me.maxAnnoLength) + 'px;\">' + name + '</div>';\n    var width = Math.round(me.seqAnnWidth * residArray.length / me.maxAnnoLength);\n    if(width < 1) width = 1;\n    html2 += '<div class=\"icn3d-seqTitle\" style=\"display:inline-block; color:white; font-weight:bold; background-color:' + color + '; width:' + width + 'px;\">&nbsp;</div>';\n\n    //htmlTmp = '<span class=\"icn3d-residueNum\" title=\"ending protein sequence number\">' + residArray.length + '</span>';\n    //htmlTmp += '</span>';\n    htmlTmp = '</span>';\n    htmlTmp += '<br>';\n\n    htmlTmp += '</div>';\n\n    html += htmlTmp;\n    html2 += htmlTmp;\n\n    $(\"#\" + me.pre + 'dt_giseq_' + name).html(html);\n    $(\"#\" + me.pre + 'ov_giseq_' + name).html(html2);\n};\n\niCn3DUI.prototype.insertGap = function(chnid, seqIndex, text, bNohtml) {  var me = this;\n  var html = '';\n\n  if(me.cfg.blast_rep_id == chnid && me.targetGapHash!== undefined && me.targetGapHash.hasOwnProperty(seqIndex)) {\n      for(var j = 0; j < (me.targetGapHash[seqIndex].to - me.targetGapHash[seqIndex].from + 1); ++j) {\n          if(bNohtml !== undefined && bNohtml) {\n             html += text;\n          }\n          else {\n             html += '<span>' + text + '</span>';\n          }\n      }\n  }\n\n  return html;\n};\n\niCn3DUI.prototype.insertGapOverview = function(chnid, seqIndex) {  var me = this;\n  var html2 = '';\n\n  if(me.cfg.blast_rep_id == chnid && me.targetGapHash!== undefined && me.targetGapHash.hasOwnProperty(seqIndex)) {\n      var width = me.seqAnnWidth * (me.targetGapHash[seqIndex].to - me.targetGapHash[seqIndex].from + 1) / (me.maxAnnoLength + me.nTotalGap);\n\n      html2 += '<div style=\"display:inline-block; background-color:#333; width:' + width + 'px; height:3px;\">&nbsp;</div>';\n  }\n\n  return html2;\n};\n\niCn3DUI.prototype.showSeq = function(chnid, chnidBase, type, queryTitle, compTitle, queryText, compText) {  var me = this;\n    var bNonMmdb = false;\n\n    var giSeq;\n    if(me.cfg.mmdbid === undefined && me.cfg.gi === undefined && me.cfg.blast_rep_id === undefined && me.cfg.align === undefined) {\n        bNonMmdb = true;\n\n        giSeq = [];\n        for(var i = 0; i < me.giSeq[chnid].length; ++i) {\n            giSeq.push(me.icn3d.chainsSeq[chnid][i]);\n        }\n    }\n    else {\n        giSeq = me.giSeq[chnid];\n    }\n\n    var divLength = me.RESIDUE_WIDTH * me.giSeq[chnid].length + 200;\n    var seqLength = me.giSeq[chnid].length\n\n    if(seqLength > me.maxAnnoLength) {\n        me.maxAnnoLength = seqLength;\n    }\n\n    $(\"#\" + me.pre + \"giseq_\" + chnid).width(divLength);\n    $(\"#\" + me.pre + \"interaction_\" + chnid).width(divLength);\n    $(\"#\" + me.pre + \"ssbond_\" + chnid).width(divLength);\n    if($(\"#\" + me.pre + \"custom_\" + chnid).length) $(\"#\" + me.pre + \"custom_\" + chnid).width(divLength);\n    if($(\"#\" + me.pre + \"clinvar_\" + chnid).length) $(\"#\" + me.pre + \"clinvar_\" + chnid).width(divLength);\n    if($(\"#\" + me.pre + \"snp_\" + chnid).length) $(\"#\" + me.pre + \"snp_\" + chnid).width(divLength);\n    if($(\"#\" + me.pre + \"cddsite_\" + chnid).length) $(\"#\" + me.pre + \"cddsite_\" + chnid).width(divLength);\n    if($(\"#\" + me.pre + \"domain_\" + chnid).length) $(\"#\" + me.pre + \"domain_\" + chnid).width(divLength);\n\n    // gi html\n    var html = '', html2 = '', html3 = '', htmlTmp;\n\n    html += '<div class=\"icn3d-dl_sequence\">';\n    html3 += '<div class=\"icn3d-dl_sequence\">';\n\n    // html to display protein positions (10, 20, etc)\n    //if(Object.keys(me.icn3d.chains[chnid]).length > 10) {\n    if(me.giSeq[chnid].length > 10) {\n        htmlTmp = '<div class=\"icn3d-residueLine\" style=\"white-space:nowrap;\">';\n        var atom = me.icn3d.getFirstCalphaAtomObj(me.icn3d.chains[chnid]);\n\n        //if(me.baseResi[chnid] != 0 && (me.cfg.mmdbid !== undefined || me.cfg.gi !== undefined || me.cfg.align !== undefined)) {\n        if((me.cfg.mmdbid !== undefined || me.cfg.gi !== undefined || me.cfg.blast_rep_id !== undefined || me.cfg.align !== undefined) && atom.resi_ori !== undefined && atom.resi_ori != atom.resi && chnid.indexOf('Misc') == -1 ) {\n            htmlTmp += '<div class=\"icn3d-annoTitle\" anno=\"0\" title=\"NCBI Residue Numbers\">NCBI Residue Numbers</div>';\n        }\n        else {\n            htmlTmp += '<div class=\"icn3d-annoTitle\" anno=\"0\"></div>';\n        }\n\n        htmlTmp += '<span class=\"icn3d-residueNum\"></span>';\n\n        html3 += htmlTmp + '<br>';\n\n        html += htmlTmp + '<span class=\"icn3d-seqLine\">';\n\n        var helixCnt = 0, sheetCnt = 0;\n\n        for(var i = 0, il = giSeq.length; i < il; ++i) {\n          html += me.insertGap(chnid, i, '-');\n\n          var currResi;\n          if(bNonMmdb) {\n            currResi = giSeq[i].resi;\n          }\n          else {\n            currResi = (i >= me.matchedPos[chnid] && i - me.matchedPos[chnid] < me.icn3d.chainsSeq[chnid].length) ? me.icn3d.chainsSeq[chnid][i - me.matchedPos[chnid]].resi : me.baseResi[chnid] + 1 + i;\n          }\n\n          html += '<span>'\n\n          if( currResi % 10 === 0) {\n            html += currResi + ' ';\n          }\n\n          // name of secondary structures\n          var residueid = chnid + '_' + currResi;\n\n          if( me.icn3d.residues.hasOwnProperty(residueid) ) {\n            var atom = me.icn3d.getFirstCalphaAtomObj(me.icn3d.residues[residueid]);\n\n            if(me.icn3d.secondaries[residueid] == 'H' && atom.ssbegin) {\n                ++helixCnt;\n                html += '<span class=\"icn3d-helix-color\">H' + helixCnt + '</span>';\n            }\n            else if(me.icn3d.secondaries[residueid] == 'E' && atom.ssbegin) {\n                ++sheetCnt;\n                if(me.icn3d.sheetcolor == 'green') {\n                    html += '<span class=\"icn3d-sheet-color\">S' + sheetCnt + '</span>';\n                }\n                else if(me.icn3d.sheetcolor == 'yellow') {\n                    html += '<span class=\"icn3d-sheet-colory\">S' + sheetCnt + '</span>';\n                }\n            }\n          }\n\n          html += '</span>'\n        }\n        html += '<span class=\"icn3d-residueNum\"></span>';\n        html += '</span>';\n        html += '<br>';\n        html += '</div>';\n\n        html3 += '</div>';\n    }\n\n    // html to display secondary structures\n    htmlTmp = '<div class=\"icn3d-residueLine\" style=\"white-space:nowrap;\">';\n    htmlTmp += '<div class=\"icn3d-annoTitle\" anno=\"0\"></div>';\n    htmlTmp += '<span class=\"icn3d-residueNum\"></span>';\n\n    html3 += htmlTmp + '<br>';\n    html += htmlTmp + '<span class=\"icn3d-seqLine\">';\n\n    for(var i = 0, il = giSeq.length; i < il; ++i) {\n      html += me.insertGap(chnid, i, '-');\n//      var resi = (me.baseResi[chnid] + i+1).toString();\n//      var resi = me.icn3d.chainsSeq[chnid][i - me.matchedPos[chnid] ].resi;\n      var resi = (i >= me.matchedPos[chnid] && i - me.matchedPos[chnid] < me.icn3d.chainsSeq[chnid].length) ? me.icn3d.chainsSeq[chnid][i - me.matchedPos[chnid]].resi : me.baseResi[chnid] + 1 + i;\n\n      var residueid = chnid + '_' + resi;\n\n      if( me.icn3d.residues.hasOwnProperty(residueid) ) {\n        if(me.icn3d.secondaries[residueid] == 'H') {\n            if(i % 2 == 0) {\n                html += '<span class=\"icn3d-helix\">';\n            }\n            else {\n                html += '<span class=\"icn3d-helix2\">';\n            }\n\n            html += '&nbsp;</span>';\n        }\n        else if(me.icn3d.secondaries[residueid] == 'E') {\n            var atom = me.icn3d.getFirstCalphaAtomObj(me.icn3d.residues[residueid]);\n\n            if(atom.ssend) {\n                if(me.icn3d.sheetcolor == 'green') {\n                    html += '<span class=\"icn3d-sheet2\">';\n                }\n                else if(me.icn3d.sheetcolor == 'yellow') {\n                    html += '<span class=\"icn3d-sheet2y\">';\n                }\n            }\n            else {\n                if(me.icn3d.sheetcolor == 'green') {\n                    html += '<span class=\"icn3d-sheet\">';\n                }\n                else if(me.icn3d.sheetcolor == 'yellow') {\n                    html += '<span class=\"icn3d-sheety\">';\n                }\n            }\n\n            html += '&nbsp;</span>';\n        }\n        else if(me.icn3d.secondaries[residueid] == 'c') {\n            html += '<span class=\"icn3d-coil\">&nbsp;</span>';\n        }\n        else if(me.icn3d.secondaries[residueid] == 'o') {\n            html += '<span class=\"icn3d-other\">&nbsp;</span>';\n        }\n      }\n      else {\n        html += '<span>-</span>'; //'<span>-</span>';\n      }\n    }\n    html += '<span class=\"icn3d-residueNum\"></span>';\n    html += '</span>';\n    html += '<br>';\n    html += '</div>';\n\n    html += '</div>'; // corresponds to above: html += '<div class=\"icn3d-dl_sequence\">';\n\n    html3 += '</div></div>';\n\n    if(me.cfg.blast_rep_id === chnid) {\n        htmlTmp = '<div id=\"' + me.pre + 'giseq_sequence\" class=\"icn3d-dl_sequence\" style=\"border: solid 1px #000;\">';\n    }\n    else {\n        htmlTmp = '<div id=\"' + me.pre + 'giseq_sequence\" class=\"icn3d-dl_sequence\">';\n    }\n\n    var chainType = 'Protein', chainTypeFull = 'Protein';\n    if(type !== undefined) {\n        if(type == 'nucleotide') {\n            chainType = 'Nucl.';\n            chainTypeFull = 'Nucleotide';\n        }\n        else if(type == 'chemical') {\n            chainType = 'Chem.';\n            chainTypeFull = 'Chemical';\n        }\n    }\n\n    // sequence, detailed view\n    htmlTmp += '<div class=\"icn3d-seqTitle icn3d-link icn3d-blue\" gi=\"' + chnid + '\" anno=\"sequence\" chain=\"' + chnid + '\"><span style=\"white-space:nowrap;\" title=\"' + chainTypeFull + ' ' + chnid + '\">' + chainType + ' ' + chnid + '</span></div>';\n\n    htmlTmp += '<span class=\"icn3d-residueNum\" title=\"starting protein sequence number\">' + (me.baseResi[chnid]+1).toString() + '</span>';\n\n    html3 += htmlTmp + '<br>';\n\n    var htmlTmp2 = '<span class=\"icn3d-seqLine\">';\n\n    html += htmlTmp + htmlTmp2;\n    html2 += htmlTmp + htmlTmp2;\n\n    var nGap = 0;\n    for(var i = 0, il = giSeq.length; i < il; ++i) {\n      html += me.insertGap(chnid, i, '-');\n\n      if(me.targetGapHash !== undefined && me.targetGapHash.hasOwnProperty(i)) nGap += me.targetGapHash[i].to - me.targetGapHash[i].from + 1;\n\n      var cFull = (bNonMmdb) ? giSeq[i].name : giSeq[i];\n\n      var c = cFull;\n      if(cFull.length > 1) {\n          c = cFull[0] + '..';\n      }\n\n//      var pos = (me.baseResi[chnid] + i+1).toString();\n//      var pos = me.icn3d.chainsSeq[chnid][i - me.matchedPos[chnid] ].resi;\n      var pos = (i >= me.matchedPos[chnid] && i - me.matchedPos[chnid] < me.icn3d.chainsSeq[chnid].length) ? me.icn3d.chainsSeq[chnid][i - me.matchedPos[chnid]].resi : me.baseResi[chnid] + 1 + i;\n\n      if( !me.icn3d.residues.hasOwnProperty(chnid + '_' + pos) ) {\n          c = c.toLowerCase();\n          html += '<span title=\"' + cFull + pos + '\" class=\"icn3d-residue\">' + c + '</span>';\n      }\n      else {\n          //var atom = me.icn3d.getFirstCalphaAtomObj(me.icn3d.residues[chnid + '_' + pos]);\n          //var color = (atom.color) ? atom.color.getHexString() : me.icn3d.defaultAtomColor;\n\n          var color = '333333';\n          if(me.cfg.blast_rep_id == chnid && me.fullpos2ConsTargetpos !== undefined && me.fullpos2ConsTargetpos[i + nGap] !== undefined) {\n              color = me.fullpos2ConsTargetpos[i + nGap].color;\n          }\n          else {\n              var atom = me.icn3d.getFirstCalphaAtomObj(me.icn3d.residues[chnid + '_' + pos]);\n              color = (atom.color) ? atom.color.getHexString() : me.icn3d.defaultAtomColor;\n          }\n\n          html += '<span id=\"giseq_' + me.pre + chnid + '_' + pos + '\" title=\"' + cFull + pos + '\" class=\"icn3d-residue\" style=\"color:#' + color + '\">' + c + '</span>';\n      }\n    }\n\n    if(me.cfg.blast_rep_id == chnid) {\n      // change color in 3D\n      me.opts['color'] = 'conservation';\n      me.icn3d.setColorByOptions(me.opts, me.icn3d.atoms);\n\n      // remove highlight\n      //me.removeHlSeq();\n    }\n\n    // sequence, overview\n    var atom = me.icn3d.getFirstCalphaAtomObj(me.icn3d.chains[chnid]);\n    var color = (atom.color) ? atom.color.getHexString() : me.icn3d.defaultAtomColor;\n\n    var width = Math.round(me.seqAnnWidth * giSeq.length / me.maxAnnoLength);\n    if(width < 1) width = 1;\n\n    if(me.cfg.blast_rep_id != chnid) { // regular\n        html2 += '<div id=\"giseq_summary_' + me.pre + chnid + '\" class=\"icn3d-seqTitle icn3d-link\" gi chain=\"' + chnid + '\" style=\"display:inline-block; color:white; font-weight:bold; background-color:#' + color + '; width:' + width + 'px;\">' + chnid + '</div>';\n    }\n    else { // with potential gaps\n        var fromArray2 = [], toArray2 = [];\n        fromArray2.push(0);\n\n        for(var i = 0, il = giSeq.length; i < il; ++i) {\n            if(me.targetGapHash !== undefined && me.targetGapHash.hasOwnProperty(i)) {\n                toArray2.push(i - 1);\n                fromArray2.push(i);\n            }\n        }\n\n        toArray2.push(giSeq.length - 1);\n\n        html2 += '<div id=\"giseq_summary_' + me.pre + chnid + '\" class=\"icn3d-seqTitle icn3d-link\" gi chain=\"' + chnid + '\" style=\"width:' + width + 'px;\">';\n        for(var i = 0, il = fromArray2.length; i < il; ++i) {\n            html2 += me.insertGapOverview(chnid, fromArray2[i]);\n\n            //var emptyWidth = (i == 0) ? Math.round(me.seqAnnWidth * fromArray2[i] / (me.maxAnnoLength + me.nTotalGap)) : Math.round(me.seqAnnWidth * (fromArray2[i] - toArray2[i-1] - 1) / (me.maxAnnoLength + me.nTotalGap));\n            //html2 += '<div style=\"display:inline-block; width:' + emptyWidth + 'px;\">&nbsp;</div>';\n\n            html2 += '<div style=\"display:inline-block; color:white!important; font-weight:bold; background-color:#' + color + '; width:' + Math.round(me.seqAnnWidth * (toArray2[i] - fromArray2[i] + 1) / (me.maxAnnoLength + me.nTotalGap)) + 'px;\" class=\"icn3d-seqTitle icn3d-link icn3d-blue\" anno=\"sequence\" gi chain=\"' + chnid + '\" title=\"' + chnid + '\">' + chnid + '</div>';\n        }\n        html2 += '</div>';\n    }\n\n    htmlTmp = '<span class=\"icn3d-residueNum\" title=\"ending protein sequence number\">' + pos + '</span>';\n    htmlTmp += '</span>';\n    htmlTmp += '<br>';\n\n    html += htmlTmp;\n    html2 += htmlTmp;\n\n    if(me.cfg.blast_rep_id == chnid) {\n        // 1. residue conservation\n        if(compText !== undefined && compText !== '') {\n        // conservation, detailed view\n        htmlTmp = '<div class=\"icn3d-seqTitle icn3d-link icn3d-blue\" blast=\"\" posarray=\"' + me.consrvResPosArray.toString() + '\" title=\"' + compTitle + '\" setname=\"' + chnid + '_blast\" anno=\"sequence\" chain=\"' + chnid + '\"><span style=\"white-space:nowrap;\" title=\"' + compTitle + '\">' + compTitle + '</span></div>';\n\n        htmlTmp += '<span class=\"icn3d-residueNum\"></span>';\n\n        html3 += htmlTmp + '<br>';\n\n        var htmlTmp2 = '<span class=\"icn3d-seqLine\">';\n\n        html += htmlTmp + htmlTmp2;\n        html2 += htmlTmp + htmlTmp2;\n\n        var prevEmptyWidth = 0;\n        var prevLineWidth = 0;\n        var widthPerRes = 1;\n\n        var queryPos = me.queryStart;\n        for(var i = 0, il = compText.length; i < il; ++i) {\n          var c = compText[i];\n\n          if(c == '-') {\n              html += '<span>-</span>';\n          }\n          else if(c == ' ') {\n              html += '<span> </span>';\n          }\n          else {\n              var pos = me.fullpos2ConsTargetpos[i].pos;\n              if( !me.icn3d.residues.hasOwnProperty(chnid + '_' + pos) ) {\n                  c = c.toLowerCase();\n                  html += '<span class=\"icn3d-residue\">' + c + '</span>';\n              }\n              else {\n                  /*\n                  var color = \"333\";\n                  if(me.fullpos2ConsTargetpos[i].same == 1) {\n                      color = \"F00\";\n                  }\n                  else if(me.fullpos2ConsTargetpos[i].same == 0) {\n                      color = \"00F\";\n                  }\n                  */\n\n                  var color = me.fullpos2ConsTargetpos[i].color;\n\n                  //html += '<span id=\"blast_' + me.pre + chnid + '_' + pos + '\" title=\"' + me.fullpos2ConsTargetpos[i].res + pos + '\" class=\"icn3d-residue\" style=\"color:#' + color + '\">' + c + '</span>';\n                  html += '<span id=\"giseq_' + me.pre + chnid + '_' + pos + '\" title=\"' + me.fullpos2ConsTargetpos[i].res + pos + '\" class=\"icn3d-residue\" style=\"color:#' + color + '\">' + c + '</span>';\n              }\n\n              html2 += me.insertGapOverview(chnid, i);\n\n              var emptyWidth = Math.round(me.seqAnnWidth * i / (me.maxAnnoLength + me.nTotalGap) - prevEmptyWidth - prevLineWidth);\n\n              if(emptyWidth < 0) emptyWidth = 0;\n\n              html2 += '<div style=\"display:inline-block; width:' + emptyWidth + 'px;\">&nbsp;</div>';\n              html2 += '<div style=\"display:inline-block; background-color:#F00; width:' + widthPerRes + 'px;\" title=\"' + c + pos + '\">&nbsp;</div>';\n\n              prevEmptyWidth += emptyWidth;\n              prevLineWidth += widthPerRes;\n\n              ++queryPos;\n          }\n        }\n\n        htmlTmp = '<span class=\"icn3d-residueNum\"></span>';\n        htmlTmp += '</span>';\n        htmlTmp += '<br>';\n\n        html += htmlTmp;\n        html2 += htmlTmp;\n        }\n\n\n        // 2. Query text\n        // query protein, detailed view\n        htmlTmp = '<div class=\"icn3d-annoTitle\" anno=\"sequence\" chain=\"' + chnid + '\"><span style=\"white-space:nowrap;\" title=\"' + queryTitle + '\">' + queryTitle + '</span></div>';\n\n        htmlTmp += '<span class=\"icn3d-residueNum\" title=\"starting protein sequence number\">' + me.queryStart + '</span>';\n\n        html3 += htmlTmp + '<br>';\n\n        //var htmlTmp2 = '<span class=\"icn3d-seqLine\">';\n        var htmlTmp2 = '<span class=\"icn3d-seqLine\" style=\"font-weight: bold;\">';\n\n        html += htmlTmp + htmlTmp2;\n        html2 += htmlTmp + htmlTmp2;\n\n        var queryPos = me.queryStart;\n        for(var i = 0, il = queryText.length; i < il; ++i) {\n          var c = queryText[i];\n\n          if(c == ' ' || c == '-') {\n              html += '<span>-</span>';\n          }\n          else {\n              //var pos = (i >= me.matchedPos[chnid] && i - me.matchedPos[chnid] < me.icn3d.chainsSeq[chnid].length) ? me.icn3d.chainsSeq[chnid][i - me.matchedPos[chnid]].resi : me.baseResi[chnid] + 1 + i;\n              if( me.fullpos2ConsTargetpos !== undefined && me.fullpos2ConsTargetpos[i] !== undefined && !me.icn3d.residues.hasOwnProperty(chnid + '_' + me.fullpos2ConsTargetpos[i].pos) ) {\n                  c = c.toLowerCase();\n                  html += '<span title=\"' + c + queryPos + '\" class=\"icn3d-residue\">' + c + '</span>';\n              }\n              else {\n                  //var color = (me.fullpos2ConsTargetpos !== undefined && me.fullpos2ConsTargetpos[i] !== undefined) ? me.fullpos2ConsTargetpos[i].color : '333333';\n                  //html += '<span title=\"' + c + queryPos + '\" class=\"icn3d-residue\" style=\"color:#' + color + '\">' + c + '</span>';\n\n                  html += '<span title=\"' + c + queryPos + '\" class=\"icn3d-residue\">' + c + '</span>';\n              }\n\n              ++queryPos;\n          }\n        }\n\n        // query protein, overview\n        var atom = me.icn3d.getFirstCalphaAtomObj(me.icn3d.chains[chnid]);\n        var color = (atom.color) ? atom.color.getHexString() : me.icn3d.defaultAtomColor;\n\n        var fromArray2 = [], toArray2 = [];\n\n        var prevChar = '-';\n        for(var i = 0, il = queryText.length; i < il; ++i) {\n            var c = queryText[i];\n\n            if(c != '-' && prevChar == '-') {\n                fromArray2.push(i);\n            }\n            else if(c == '-' && prevChar != '-' ) {\n                toArray2.push(i-1);\n            }\n\n            prevChar = c;\n        }\n\n        if(prevChar != '-') {\n            toArray2.push(queryText.length - 1);\n        }\n\n        for(var i = 0, il = fromArray2.length; i < il; ++i) {\n            var emptyWidth = (i == 0) ? Math.round(me.seqAnnWidth * fromArray2[i] / (me.maxAnnoLength + me.nTotalGap)) : Math.round(me.seqAnnWidth * (fromArray2[i] - toArray2[i-1] - 1) / (me.maxAnnoLength + me.nTotalGap));\n            html2 += '<div style=\"display:inline-block; width:' + emptyWidth + 'px;\">&nbsp;</div>';\n\n            html2 += '<div style=\"display:inline-block; color:white!important; font-weight:bold; background-color:#' + color + '; width:' + Math.round(me.seqAnnWidth * (toArray2[i] - fromArray2[i] + 1) / (me.maxAnnoLength + me.nTotalGap)) + 'px;\" anno=\"sequence\" chain=\"' + chnid + '\" title=\"' + queryTitle + '\">' + queryTitle + '</div>';\n        }\n\n        htmlTmp = '<span class=\"icn3d-residueNum\" title=\"ending protein sequence number\">' + me.queryEnd + '</span>';\n        htmlTmp += '</span>';\n        htmlTmp += '<br>';\n\n        html += htmlTmp;\n        html2 += htmlTmp;\n    }\n\n    html += '</div>';\n    html2 += '</div>';\n    html3 += '</div>';\n\n    //if(Object.keys(me.icn3d.chains[chnid]).length > 10) {\n    if(me.giSeq[chnid].length > 10) {\n        var atom = me.icn3d.getFirstCalphaAtomObj(me.icn3d.chains[chnid]);\n        //if(me.baseResi[chnid] != 0 && (me.cfg.mmdbid !== undefined || me.cfg.gi !== undefined || me.cfg.align !== undefined)) {\n        if((me.cfg.mmdbid !== undefined || me.cfg.gi !== undefined || me.cfg.blast_rep_id !== undefined || me.cfg.align !== undefined) && atom.resi_ori !== undefined && atom.resi_ori != atom.resi && chnid.indexOf('Misc') == -1 ) {\n            htmlTmp = '<div class=\"icn3d-dl_sequence\">';\n            htmlTmp += '<div class=\"icn3d-residueLine\" style=\"white-space:nowrap;\">';\n            htmlTmp += '<div class=\"icn3d-annoTitle\" anno=\"0\" title=\"PDB Residue Numbers\">PDB Residue Numbers</div>';\n            htmlTmp += '<span class=\"icn3d-residueNum\"></span>';\n\n            html3 += htmlTmp + '<br>';\n\n            html += htmlTmp + '<span class=\"icn3d-seqLine\">';\n\n            for(var i = 0, il = giSeq.length; i < il; ++i) {\n                html += me.insertGap(chnid, i, '-');\n\n                if(i >= me.matchedPos[chnid] && i - me.matchedPos[chnid] < me.icn3d.chainsSeq[chnid].length) {\n                  var currResi = me.icn3d.chainsSeq[chnid][i - me.matchedPos[chnid]].resi;\n\n                  var residueid = chnid + '_' + currResi;\n\n                  if(!me.icn3d.residues.hasOwnProperty(residueid)) {\n                      html += '<span></span>';\n                  }\n                  else {\n                      var atom = me.icn3d.getFirstCalphaAtomObj(me.icn3d.residues[residueid]);\n\n                      var resi_ori = atom.resi_ori;\n\n                      html += '<span>';\n\n                      if( resi_ori % 10 === 0) {\n                        html += resi_ori + ' ';\n                      }\n\n                      html += '</span>';\n                  }\n                }\n                else {\n                  html += '<span></span>';\n                }\n            }\n            html += '<span class=\"icn3d-residueNum\"></span>';\n            html += '</span>';\n            html += '<br>';\n            html += '</div>';\n\n            html += '</div>';\n\n            html3 += '</div></div>';\n        }\n    }\n\n    $(\"#\" + me.pre + 'dt_giseq_' + chnid).html(html);\n    $(\"#\" + me.pre + 'ov_giseq_' + chnid).html(html2);\n    $(\"#\" + me.pre + 'tt_giseq_' + chnid).html(html3); // fixed title for scrolling\n};\n\niCn3DUI.prototype.navClinVar = function(chnid) { var me = this;\n    me.currClin[chnid] = - 1;\n\n    $(document).on('click', \"#\" + me.pre + chnid + \"_prevclin\", function(e) {\n      e.stopImmediatePropagation();\n      //e.preventDefault();\n      var maxLen = (me.resi2disease_nonempty[chnid] !== undefined) ? Object.keys(me.resi2disease_nonempty[chnid]).length : 0;\n\n      --me.currClin[chnid];\n      if(me.currClin[chnid] < 0) me.currClin[chnid] = maxLen - 1; // 0;\n\n      me.showClinVarLabelOn3D(chnid);\n    });\n\n    $(document).on('click', \"#\" + me.pre + chnid + \"_nextclin\", function(e) {\n      e.stopImmediatePropagation();\n      //e.preventDefault();\n      var maxLen = (me.resi2disease_nonempty[chnid] !== undefined) ? Object.keys(me.resi2disease_nonempty[chnid]).length : 0;\n\n      ++me.currClin[chnid];\n      if(me.currClin[chnid] > maxLen - 1) me.currClin[chnid] = 0; // me.resi2disease_nonempty[chnid].length - 1;\n\n      me.showClinVarLabelOn3D(chnid);\n    });\n};\n\niCn3DUI.prototype.showClinVarLabelOn3D = function(chnid) { var me = this;\n      var resiArray = Object.keys(me.resi2disease_nonempty[chnid]);\n\n      var chainid, residueid;\n\n      chainid = chnid;\n\n      residueid = chainid + '_' + resiArray[me.currClin[chnid]];\n\n      var label = '';\n\n      var diseaseArray = me.resi2disease_nonempty[chnid][resiArray[me.currClin[chnid]]];\n\n      for(var k = 0, kl = diseaseArray.length; k < kl; ++k) {\n          if(diseaseArray[k] != '' && diseaseArray[k] != 'not specified' && diseaseArray[k] != 'not provided') {\n            label = diseaseArray[k];\n            break;\n          }\n      }\n\n      var position = me.icn3d.centerAtoms(me.icn3d.hash2Atoms(me.icn3d.residues[residueid]));\n      //position.center.add(new THREE.Vector3(3.0, 3.0, 3.0)); // shift a little bit\n\n      var maxlen = 30;\n      if(label.length > maxlen) label = label.substr(0, maxlen) + '...';\n\n      me.removeSelection();\n\n      if(me.icn3d.labels == undefined) me.icn3d.labels = {};\n      me.icn3d.labels['clinvar'] = [];\n\n      //var size = Math.round(me.icn3d.LABELSIZE * 10 / label.length);\n      var size = me.icn3d.LABELSIZE;\n      var color = \"#FFFF00\";\n      me.addLabel(label, position.center.x + 1, position.center.y + 1, position.center.z + 1, size, color, undefined, 'clinvar');\n\n      me.icn3d.hAtoms = {};\n\n      for(var j in me.icn3d.residues[residueid]) {\n          me.icn3d.hAtoms[j] = 1;\n      }\n\n      //me.icn3d.addResiudeLabels(me.icn3d.hAtoms);\n\n      $(\"#clinvar_\" + me.pre + residueid).addClass('icn3d-highlightSeq');\n\n      if(!$(\"#\" + me.pre + \"modeswitch\")[0].checked) {\n          me.setMode('selection');\n      }\n\n      me.icn3d.draw();\n};\n\niCn3DUI.prototype.getSnpLine = function(line, totalLineNum, resi2snp, resi2rsnum, resi2clinAllele, resi2disease, resi2index, resi2sig, posarray, posClinArray, bStartEndRes, chnid, bOverview, bClinvar, bTitleOnly, bSnpOnly) {\n    var me = this;\n\n    var html = '';\n\n    var altName = bClinvar ? 'clinvar' : 'snp';\n\n    if(bStartEndRes) {\n        var title1 = 'ClinVar', title2 = 'SNP';\n\n        if(bClinvar) {\n            html += '<div class=\"icn3d-seqTitle icn3d-link icn3d-blue icn3d-clinvar-path\" clinvar=\"clinvar\" posarray=\"' + posClinArray + '\" shorttitle=\"' + title1 + '\" setname=\"' + chnid + '_' + title1 + '\" anno=\"sequence\" chain=\"' + chnid + '\" title=\"' + title1 + '\">' + title1 + '</div>';\n        }\n        else {\n            html += '<div class=\"icn3d-seqTitle icn3d-link icn3d-blue\" clinvar=\"clinvar\" posarray=\"' + posarray + '\" shorttitle=\"' + title2 + '\" setname=\"' + chnid + '_' + title2 + '\" anno=\"sequence\" chain=\"' + chnid + '\" title=\"' + title2 + '\">' + title2 + '</div>';\n        }\n    }\n    else if(line == 2 && bClinvar) {\n        var buttonStyle = me.isMobile() ? 'none' : 'button';\n        html += '<div id=\"' + me.pre + chnid + '_prevclin\" style=\"display:inline-block; font-size:11px; font-weight:bold; width:60px!important;\"><button class=\"link\" style=\"-webkit-appearance:' + buttonStyle + '; height:18px; width:55px;\"><span style=\"white-space:nowrap; margin-left:-40px;\" title=\"Show the previous ClinVar on structure\">&lt; ClinVar</span></button></div>';\n        html += '<div id=\"' + me.pre + chnid + '_nextclin\" style=\"display:inline-block; font-size:11px; font-weight:bold; width:60px!important;\"><button class=\"link\" style=\"-webkit-appearance:' + buttonStyle + '; height:18px; width:55px;\"><span style=\"white-space:nowrap; margin-left:-40px;\" title=\"Show the next ClinVar on structure\">ClinVar &gt;</span></button></div>';\n    }\n    else {\n        html += '<div class=\"icn3d-seqTitle\"></div>';\n    }\n\n    var pre = altName;\n\n    var snpCnt = 0, clinvarCnt = 0;\n\n    var snpTypeHash = {}, currSnpTypeHash = {};\n\n    for(var i = 1, il = me.giSeq[chnid].length; i <= il; ++i) {\n        if(resi2index[i] !== undefined) {\n            ++snpCnt;\n\n            var snpType = '', allDiseaseTitle = '';\n            for(var j = 0, jl = resi2snp[i].length; j < jl && !bSnpOnly; ++j) {\n                var diseaseArray = resi2disease[i][j].split('; ');\n                var sigArray = resi2sig[i][j].split('; ');\n\n                var diseaseTitle = '';\n                for(var k = 0, kl = diseaseArray.length; k < kl; ++k) {\n                    if(diseaseArray[k] != '' && diseaseArray[k] != 'not specified' && diseaseArray[k] != 'not provided') {\n                        diseaseTitle += diseaseArray[k] + ' (' + sigArray[k] + '); ';\n                    }\n                }\n\n                if(diseaseTitle != '') {\n                    snpTypeHash[i] = 'icn3d-clinvar';\n\n                    if(j == line - 2) { // just check the current line, \"line = 2\" means the first SNP\n                        currSnpTypeHash[i] = 'icn3d-clinvar';\n\n                        if(diseaseTitle.indexOf('Pathogenic') != -1) {\n                            currSnpTypeHash[i] = 'icn3d-clinvar-path';\n                        }\n                    }\n                }\n\n                allDiseaseTitle += diseaseTitle + ' | ';\n            }\n\n            if(allDiseaseTitle.indexOf('Pathogenic') != -1) {\n                snpTypeHash[i] = 'icn3d-clinvar-path';\n            }\n\n            if(snpTypeHash[i] == 'icn3d-clinvar' || snpTypeHash[i] == 'icn3d-clinvar-path') {\n                ++clinvarCnt;\n            }\n        }\n    }\n\n    if(snpCnt == 0) {\n        $(\"#\" + me.pre + 'dt_clinvar_' + chnid).html('');\n        $(\"#\" + me.pre + 'ov_clinvar_' + chnid).html('');\n        $(\"#\" + me.pre + 'tt_clinvar_' + chnid).html('');\n\n        $(\"#\" + me.pre + 'dt_snp_' + chnid).html('');\n        $(\"#\" + me.pre + 'ov_snp_' + chnid).html('');\n        $(\"#\" + me.pre + 'tt_snp_' + chnid).html('');\n\n        return '';\n    }\n\n    if(clinvarCnt == 0 && bClinvar) {\n        $(\"#\" + me.pre + 'dt_clinvar_' + chnid).html('');\n        $(\"#\" + me.pre + 'ov_clinvar_' + chnid).html('');\n        $(\"#\" + me.pre + 'tt_clinvar_' + chnid).html('');\n\n        return '';\n    }\n\n    var cnt = bClinvar ? clinvarCnt : snpCnt;\n\n    if(clinvarCnt == 0) {\n        me.bClinvarCnt = false;\n    }\n    else {\n        me.bClinvarCnt = true;\n    }\n\n    //var start = bStartEndRes ? me.baseResi[chnid] + 1 : '';\n    if(line == 1) {\n        html += '<span class=\"icn3d-residueNum\" title=\"residue count\">' + cnt + ' Res</span>';\n    }\n    else {\n        html += '<span class=\"icn3d-residueNum\"></span>';\n    }\n\n    if(bTitleOnly !== undefined && bTitleOnly) {\n        return html + '<br>';\n    }\n\n    html += '<span class=\"icn3d-seqLine\">';\n    var diseaseStr = '';\n\n    var prevEmptyWidth = 0;\n    var prevLineWidth = 0;\n    var widthPerRes = 1;\n\n\n    for(var i = 1, il = me.giSeq[chnid].length; i <= il; ++i) {\n        if(bOverview) {\n            if(resi2index[i] !== undefined) {\n                // get the mouse over text\n                var cFull = me.giSeq[chnid][i-1];\n\n                var c = cFull;\n                if(cFull.length > 1) {\n                    c = cFull[0] + '..';\n                }\n\n                var pos = (i >= me.matchedPos[chnid] && i-1 - me.matchedPos[chnid] < me.icn3d.chainsSeq[chnid].length) ? me.icn3d.chainsSeq[chnid][i-1 - me.matchedPos[chnid]].resi : me.baseResi[chnid] + 1 + i-1;\n\n                var snpTitle = pos + c + '>';\n                var allDiseaseTitle = '';\n                for(var j = 0, jl = resi2snp[i].length; j < jl; ++j) {\n                    snpTitle += resi2snp[i][j];\n\n                    if(!bSnpOnly) {\n                        var diseaseArray = resi2disease[i][j].split('; ');\n                        var sigArray = resi2sig[i][j].split('; ');\n\n                        var diseaseTitle = '';\n                        for(var k = 0, kl = diseaseArray.length; k < kl; ++k) {\n                            if(diseaseArray[k] != '' && diseaseArray[k] != 'not specified' && diseaseArray[k] != 'not provided') {\n                                diseaseTitle += diseaseArray[k] + ' (' + sigArray[k] + '); ';\n                            }\n                        }\n\n                        allDiseaseTitle += diseaseTitle + ' | ';\n                    }\n                }\n\n                html += me.insertGapOverview(chnid, i-1);\n\n                var emptyWidth = (me.cfg.blast_rep_id == chnid) ? Math.round(me.seqAnnWidth * (i-1) / (me.maxAnnoLength + me.nTotalGap) - prevEmptyWidth - prevLineWidth) : Math.round(me.seqAnnWidth * (i-1) / me.maxAnnoLength - prevEmptyWidth - prevLineWidth);\n\n                if(emptyWidth < 0) emptyWidth = 0;\n\n                if(bClinvar) {\n                    if(snpTypeHash[i] == 'icn3d-clinvar' || snpTypeHash[i] == 'icn3d-clinvar-path') {\n                        if(emptyWidth > 0) html += '<div style=\"display:inline-block; width:' + emptyWidth + 'px;\">&nbsp;</div>';\n\n                        html += '<div style=\"display:inline-block; background-color:#000; width:' + widthPerRes + 'px;\" title=\"' + snpTitle + '\">&nbsp;</div>';\n\n                        prevEmptyWidth += emptyWidth;\n                        prevLineWidth += widthPerRes;\n                    }\n                }\n                else {\n                    if(emptyWidth > 0) html += '<div style=\"display:inline-block; width:' + emptyWidth + 'px;\">&nbsp;</div>';\n\n                    html += '<div style=\"display:inline-block; background-color:#000; width:' + widthPerRes + 'px;\" title=\"' + snpTitle + '\">&nbsp;</div>';\n\n                    prevEmptyWidth += emptyWidth;\n                    prevLineWidth += widthPerRes;\n                }\n            }\n        }\n        else { // detailed view\n          html += me.insertGap(chnid, i-1, '-');\n\n          if(resi2index[i] !== undefined) {\n              if(!bClinvar && line == 1) {\n                  html += '<span>&dArr;</span>'; // or down triangle &#9660;\n              }\n              else {\n                var cFull = me.giSeq[chnid][i-1];\n\n                var c = cFull;\n                if(cFull.length > 1) {\n                  c = cFull[0] + '..';\n                }\n\n                var pos = (i >= me.matchedPos[chnid] && i-1 - me.matchedPos[chnid] < me.icn3d.chainsSeq[chnid].length) ? me.icn3d.chainsSeq[chnid][i-1 - me.matchedPos[chnid]].resi : me.baseResi[chnid] + 1 + i-1;\n\n                var snpStr = \"\", snpTitle = \"<div class='snptip'>\"\n\n                //var snpType = '';\n\n                var jl = resi2snp[i].length;\n\n                var start = 0, end = 0;\n\n                var shownResCnt;\n\n                if(line == 2) {\n                    start = 0;\n                    end = 1;\n                }\n                else if(line == 3) {\n                    start = 1;\n                    end = jl;\n                }\n\n                if(!bClinvar) {\n                    shownResCnt = 2;\n\n                    for(var j = start; j < jl && j < end; ++j) {\n                        if(j < shownResCnt) snpStr += resi2snp[i][j];\n\n                        snpTitle += pos + c + '>' + resi2snp[i][j];\n\n                        if(!bSnpOnly) {\n                            // disease and significace\n                            var diseaseArray = resi2disease[i][j].split('; ');\n                            var sigArray = resi2sig[i][j].split('; ');\n\n                            var diseaseTitle = '';\n                            var index = 0;\n                            for(var k = 0, kl = diseaseArray.length; k < kl; ++k) {\n                                if(diseaseArray[k] != '' && diseaseArray[k] != 'not specified' && diseaseArray[k] != 'not provided') {\n                                    if(index > 0) {\n                                        diseaseTitle += '; ';\n                                    }\n                                    else {\n                                        if( j === 0 || j === 1) diseaseStr = 'disease=\"' + diseaseArray[k] + '\"';\n                                    }\n\n                                    diseaseTitle += diseaseArray[k] + ' (' + sigArray[k] + ')';\n                                    ++index;\n                                }\n                            }\n\n                            //resi2rsnum, resi2clinAllele,\n\n                            if(diseaseTitle != '') {\n                                //snpType = 'icn3d-clinvar';\n\n                                snpTitle += ': ' + diseaseTitle;\n                                snpTitle += \"<br>Links: <a href='https://www.ncbi.nlm.nih.gov/clinvar/?term=\" + resi2clinAllele[i][j] + \"[AlleleID]' target='_blank'>ClinVar</a>, <a href='https://www.ncbi.nlm.nih.gov/snp/?term=\" + resi2rsnum[i][j] + \"' target='_blank'>dbSNP (rs\" + resi2rsnum[i][j] + \")</a>\";\n                            }\n                            else {\n                                snpTitle += \"<br>Link: <a href='https://www.ncbi.nlm.nih.gov/snp/?term=\" + resi2rsnum[i][j] + \"' target='_blank'>dbSNP (rs\" + resi2rsnum[i][j] + \")</a>\"\n                            }\n\n                            if(j < jl - 1) {\n                                //if(j < 1) snpStr += ';';\n                                snpTitle += '<br><br>';\n                            }\n                        }\n                        else { //if(bSnpOnly) {\n                            if(j < jl - 1) {\n                                snpTitle += '<br>';\n                            }\n                        }\n                    }\n\n                    if(jl > shownResCnt && line == 3) snpStr += '..';\n                }\n                else { // if(bClinvar)\n                    shownResCnt = 1;\n\n                    var diseaseCnt = 0;\n                    for(var j = start; j < jl && j < end; ++j) {\n                        // disease and significace\n                        var diseaseArray = resi2disease[i][j].split('; ');\n                        var sigArray = resi2sig[i][j].split('; ');\n\n                        var diseaseTitle = '';\n                        var index = 0;\n                        for(var k = 0, kl = diseaseArray.length; k < kl; ++k) {\n                            if(diseaseArray[k] != '' && diseaseArray[k] != 'not specified' && diseaseArray[k] != 'not provided') {\n                                if(index > 0) {\n                                    diseaseTitle += '; ';\n                                }\n                                else {\n                                    if( j === 0 || j === 1) diseaseStr = 'disease=\"' + diseaseArray[k] + '\"';\n                                }\n\n                                diseaseTitle += diseaseArray[k] + ' (' + sigArray[k] + ')';\n                                ++index;\n                            }\n                        }\n\n                        if(diseaseTitle != '') {\n                            if(diseaseCnt < shownResCnt) snpStr += resi2snp[i][j];\n\n                            snpTitle += pos + c + '>' + resi2snp[i][j];\n\n                            //snpType = 'icn3d-clinvar';\n\n                            snpTitle += ': ' + diseaseTitle;\n                            snpTitle += \"<br>Links: <a href='https://www.ncbi.nlm.nih.gov/clinvar/?term=\" + resi2clinAllele[i][j] + \"[AlleleID]' target='_blank'>ClinVar</a>, <a href='https://www.ncbi.nlm.nih.gov/snp/?term=\" + resi2rsnum[i][j] + \"' target='_blank'>dbSNP (rs\" + resi2rsnum[i][j] + \")</a>\";\n\n                            if(j < jl - 1) {\n                                snpTitle += '<br><br>';\n                            }\n\n                            ++diseaseCnt;\n                        } // if(diseaseTitle != '') {\n                    } // for(var j = start; j < jl && j < end; ++j) {\n\n                    if(diseaseCnt > shownResCnt && line == 3) snpStr += '..';\n                } // else { // if(bClinvar)\n\n                snpTitle += '</div>';\n\n                if(bClinvar) {\n                    if(snpTypeHash[i] == 'icn3d-clinvar' || snpTypeHash[i] == 'icn3d-clinvar-path') {\n                        if(line == 1) {\n                            html += '<span>&dArr;</span>'; // or down triangle &#9660;\n                        }\n                        else {\n                            if(snpStr == '' || snpStr == ' ') {\n                                html += '<span>-</span>';\n                            }\n                            else {\n                                html += '<span id=\"' + pre + '_' + me.pre + chnid + '_' + pos + '\" label title=\"' + snpTitle + '\" ' + diseaseStr + ' class=\"icn3d-tooltip icn3d-residue ' + currSnpTypeHash[i] + '\">' + snpStr + '</span>';\n                            }\n                        }\n                    }\n                    else {\n                        html += '<span>-</span>';\n                    }\n                }\n                else {\n                    if(snpStr == '' || snpStr == ' ') {\n                        html += '<span>-</span>';\n                    }\n                    else {\n                        if(!bSnpOnly) {\n                            html += '<span id=\"' + pre + '_' + me.pre + chnid + '_' + pos + '\" label title=\"' + snpTitle + '\" ' + diseaseStr + ' class=\"icn3d-tooltip icn3d-residue ' + currSnpTypeHash[i] + '\">' + snpStr + '</span>';\n                        }\n                        else {\n                            html += '<span id=\"' + pre + '_' + me.pre + chnid + '_' + pos + '\" label title=\"' + snpTitle + '\" class=\"icn3d-residue ' + currSnpTypeHash[i] + '\">' + snpStr + '</span>';\n                        }\n                    }\n                }\n              } // if(!bClinvar && line == 1) {\n          }\n          else {\n            html += '<span>-</span>'; //'<span>-</span>';\n          }\n        } // if(bOverview) {\n    } // for\n\n    //var end = bStartEndRes ? me.icn3d.chainsSeq[chnid][me.giSeq[chnid].length - 1 - me.matchedPos[chnid] ].resi : '';\n    if(line == 1) {\n        html += '<span class=\"icn3d-residueNum\" title=\"residue count\">&nbsp;' + cnt + ' Residues</span>';\n    }\n    else {\n        html += '<span class=\"icn3d-residueNum\"></span>';\n    }\n\n    html += '</span>';\n    html += '<br>';\n\n    return html;\n};\n\niCn3DUI.prototype.processSnpClinvar = function(data, chnid, chnidBase, bSnpOnly) {\n    var me = this;\n\n    var html = '<div id=\"' + me.pre + chnid + '_snpseq_sequence\" class=\"icn3d-dl_sequence\">';\n    var html2 = html;\n    var html3 = html;\n\n    var htmlClinvar = '<div id=\"' + me.pre + chnid + '_clinvarseq_sequence\" class=\"icn3d-dl_sequence\">';\n    var htmlClinvar2 = htmlClinvar;\n    var htmlClinvar3 = htmlClinvar;\n\n    var lineArray = data.split('\\n');\n\n    var resi2snp = {};\n    var resi2index = {};\n    var resi2disease = {};\n    me.resi2disease_nonempty[chnid] = {};\n    var resi2sig = {};\n\n    var resi2rsnum = {};\n    var resi2clinAllele = {};\n\n    var posHash = {}, posClinHash = {};\n\n    var prevSnpStr = '';\n    for(var i = 0, il = lineArray.length; i < il; ++i) {\n     //bSnpOnly: false\n     //1310770    13    14    14Y>H    368771578    150500    Hereditary cancer-predisposing syndrome; Li-Fraumeni syndrome; not specified; Li-Fraumeni syndrome 1    Likely benign; Uncertain significance; Uncertain significance; Uncertain significance    1TSR_A    120407068    NP_000537.3\n     //Pdb_gi, Pos from, Pos to, Pos & Amino acid change, rs#, ClinVar Allele ID, Disease name, Clinical significance, master_gi, master_accession.version\n\n     //bSnpOnly: true\n     //1310770    13    14    14Y>H\n\n     if(lineArray[i] != '') {\n      var fieldArray = lineArray[i].split('\\t');\n\n      var snpStr = fieldArray[3];\n\n      if(snpStr == prevSnpStr) continue;\n      prevSnpStr = snpStr;\n\n      var resiStr = snpStr.substr(0, snpStr.length - 3);\n\n      var resi = Math.round(resiStr);\n\n      var currRes = snpStr.substr(snpStr.length - 3, 1);\n      var snpRes = snpStr.substr(snpStr.length - 1, 1);\n\n      var rsnum = bSnpOnly ? '' : fieldArray[4];\n      var clinAllele = bSnpOnly ? '' : fieldArray[5];\n      var disease = bSnpOnly ? '' : fieldArray[6];  // When more than 2+ diseases, they are separated by \"; \"\n                                    // Some are \"not specified\", \"not provided\"\n      var clinSig = bSnpOnly ? '' : fieldArray[7];     // Clinical significance, When more than 2+ diseases, they are separated by \"; \"\n\n      // \"*\" means terminating codon, \"-\" means deleted codon\n      //if(currRes !== '-' && currRes !== '*' && snpRes !== '-' && snpRes !== '*') {\n            posHash[resi + me.baseResi[chnid]] = 1;\n            if(disease != '') posClinHash[resi + me.baseResi[chnid]] = 1;\n            resi2index[resi] = i + 1;\n\n            if(resi2snp[resi] === undefined) {\n                resi2snp[resi] = [];\n            }\n            resi2snp[resi].push(snpRes);\n\n            if(resi2rsnum[resi] === undefined) {\n                resi2rsnum[resi] = [];\n            }\n            resi2rsnum[resi].push(rsnum);\n\n            if(resi2clinAllele[resi] === undefined) {\n                resi2clinAllele[resi] = [];\n            }\n            resi2clinAllele[resi].push(clinAllele);\n\n            if(resi2disease[resi] === undefined) {\n                resi2disease[resi] = [];\n            }\n            resi2disease[resi].push(disease);\n\n            if(disease != '') {\n                if(me.resi2disease_nonempty[chnid][resi] === undefined) {\n                    me.resi2disease_nonempty[chnid][resi] = [];\n                }\n                me.resi2disease_nonempty[chnid][resi].push(disease);\n            }\n\n            if(resi2sig[resi] === undefined) {\n                resi2sig[resi] = [];\n            }\n            resi2sig[resi].push(clinSig);\n\n      //}\n     }\n    }\n\n    var posarray = Object.keys(posHash);\n    var posClinArray = Object.keys(posClinHash);\n\n    var bClinvar = false;\n\n    html += me.getSnpLine(1, 3, resi2snp, resi2rsnum, resi2clinAllele, resi2disease, resi2index, resi2sig, posarray, posClinArray, 1, chnid, false, bClinvar, undefined, bSnpOnly);\n    html += me.getSnpLine(2, 3, resi2snp, resi2rsnum, resi2clinAllele, resi2disease, resi2index, resi2sig, posarray, posClinArray, 0, chnid, false, bClinvar, undefined, bSnpOnly);\n    html += me.getSnpLine(3, 3, resi2snp, resi2rsnum, resi2clinAllele, resi2disease, resi2index, resi2sig, posarray, posClinArray, 0, chnid, false, bClinvar, undefined, bSnpOnly);\n\n    html3 += me.getSnpLine(1, 3, resi2snp, resi2rsnum, resi2clinAllele, resi2disease, resi2index, resi2sig, posarray, posClinArray, 1, chnid, false, bClinvar, true, bSnpOnly);\n    html3 += me.getSnpLine(2, 3, resi2snp, resi2rsnum, resi2clinAllele, resi2disease, resi2index, resi2sig, posarray, posClinArray, 0, chnid, false, bClinvar, true, bSnpOnly);\n    html3 += me.getSnpLine(3, 3, resi2snp, resi2rsnum, resi2clinAllele, resi2disease, resi2index, resi2sig, posarray, posClinArray, 0, chnid, false, bClinvar, true, bSnpOnly);\n\n    html2 += me.getSnpLine(1, 3, resi2snp, resi2rsnum, resi2clinAllele, resi2disease, resi2index, resi2sig, posarray, posClinArray, 1, chnid, true, bClinvar, undefined, bSnpOnly);\n\n    html += '</div>';\n    html2 += '</div>';\n    html3 += '</div>';\n\n    $(\"#\" + me.pre + 'dt_snp_' + chnid).html(html);\n    $(\"#\" + me.pre + 'ov_snp_' + chnid).html(html2);\n    $(\"#\" + me.pre + 'tt_snp_' + chnid).html(html3);\n\n    if(!bSnpOnly && me.bClinvarCnt) {\n        bClinvar = true;\n\n        htmlClinvar += me.getSnpLine(1, 3, resi2snp, resi2rsnum, resi2clinAllele, resi2disease, resi2index, resi2sig, posarray, posClinArray, 1, chnid, false, bClinvar, undefined, bSnpOnly);\n        htmlClinvar += me.getSnpLine(2, 3, resi2snp, resi2rsnum, resi2clinAllele, resi2disease, resi2index, resi2sig, posarray, posClinArray, 0, chnid, false, bClinvar, undefined, bSnpOnly);\n        htmlClinvar += me.getSnpLine(3, 3, resi2snp, resi2rsnum, resi2clinAllele, resi2disease, resi2index, resi2sig, posarray, posClinArray, 0, chnid, false, bClinvar, undefined, bSnpOnly);\n\n        htmlClinvar3 += me.getSnpLine(1, 3, resi2snp, resi2rsnum, resi2clinAllele, resi2disease, resi2index, resi2sig, posarray, posClinArray, 1, chnid, false, bClinvar, true, bSnpOnly);\n        htmlClinvar3 += me.getSnpLine(2, 3, resi2snp, resi2rsnum, resi2clinAllele, resi2disease, resi2index, resi2sig, posarray, posClinArray, 0, chnid, false, bClinvar, true, bSnpOnly);\n        htmlClinvar3 += me.getSnpLine(3, 3, resi2snp, resi2rsnum, resi2clinAllele, resi2disease, resi2index, resi2sig, posarray, posClinArray, 0, chnid, false, bClinvar, true, bSnpOnly);\n\n        htmlClinvar2 += me.getSnpLine(1, 3, resi2snp, resi2rsnum, resi2clinAllele, resi2disease, resi2index, resi2sig, posarray, posClinArray, 1, chnid, true, bClinvar, undefined, bSnpOnly);\n\n        htmlClinvar += '</div>';\n        htmlClinvar2 += '</div>';\n        htmlClinvar3 += '</div>';\n\n        $(\"#\" + me.pre + 'dt_clinvar_' + chnid).html(htmlClinvar);\n        $(\"#\" + me.pre + 'ov_clinvar_' + chnid).html(htmlClinvar2);\n        $(\"#\" + me.pre + 'tt_clinvar_' + chnid).html(htmlClinvar3);\n\n        me.navClinVar(chnid, chnidBase);\n    }\n    else {\n        $(\"#\" + me.pre + 'dt_clinvar_' + chnid).html('');\n        $(\"#\" + me.pre + 'ov_clinvar_' + chnid).html('');\n        $(\"#\" + me.pre + 'tt_clinvar_' + chnid).html('');\n    }\n\n    // add here after the ajax call\n    me.enableHlSeq();\n\n    me.bAjaxSnpClinvar = true;\n    if(me.deferredSnpClinvar !== undefined) me.deferredSnpClinvar.resolve();\n};\n\niCn3DUI.prototype.showSnpClinvar = function(chnid, chnidBase) {\n    var me = this;\n\n    var url = \"https://www.ncbi.nlm.nih.gov/projects/SNP/beVarSearch_mt.cgi?appname=iCn3D&format=bed&report=pdb2bed&acc=\" + chnidBase;\n\n    $.ajax({\n      url: url,\n      dataType: 'text',\n      cache: true,\n      tryCount : 0,\n      retryLimit : 1,\n      success: function(data) {\n        if(data != \"\") {\n            var bSnpOnly = false;\n            me.processSnpClinvar(data, chnid, chnidBase, bSnpOnly);\n        } //if(data != \"\") {\n        else {\n            if(me.chain2gi !== undefined && Object.keys(me.chain2gi).length > 0) {\n               var gi = me.chain2gi[chnidBase];\n\n               me.showSnpClinvarAlt(chnid, chnidBase, gi);\n            }\n            else {\n               // get gi from acc\n               var url2 = \"https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esummary.fcgi?db=protein&retmode=json&id=\" + chnidBase;\n\n               $.ajax({\n                  url: url2,\n                  dataType: 'json',\n                  cache: true,\n                  tryCount : 0,\n                  retryLimit : 1,\n                  success: function(data2) {\n                    var gi;\n                    for(var id in data2.result) {\n                      if(id !== 'uids') {\n                        gi = id;\n                      }\n                    }\n\n                    me.showSnpClinvarAlt(chnid, chnidBase, gi);\n\n                  },\n                  error : function(xhr, textStatus, errorThrown ) {\n                    this.tryCount++;\n                    if (this.tryCount <= this.retryLimit) {\n                        //try again\n                        $.ajax(this);\n                        return;\n                    }\n\n                    me.processNoSnpClinvar(chnid);\n                    return;\n                  }\n               });\n           }\n        }\n      },\n      error : function(xhr, textStatus, errorThrown ) {\n        this.tryCount++;\n        if (this.tryCount <= this.retryLimit) {\n            //try again\n            $.ajax(this);\n            return;\n        }\n\n        me.processNoSnpClinvar(chnid);\n\n        return;\n      }\n    });\n};\n\niCn3DUI.prototype.showSnpClinvarAlt = function(chnid, chnidBase, gi) { var me = this;\n    if(gi !== undefined) {\n        var url3 = \"https://www.ncbi.nlm.nih.gov/projects/SNP/beVarSearch.cgi?appname=iCn3D&format=bed&report=pdb2bed&gi=\" + gi;\n\n        $.ajax({\n          url: url3,\n          dataType: 'text',\n          cache: true,\n          tryCount : 0,\n          retryLimit : 1,\n          success: function(data3) {\n            if(data3 != \"\") {\n                var bSnpOnly = true;\n                me.processSnpClinvar(data3, chnid, chnidBase, bSnpOnly);\n            } //if(data3 != \"\") {\n            else {\n                me.processNoSnpClinvar(chnid);\n            }\n          },\n          error : function(xhr, textStatus, errorThrown ) {\n            this.tryCount++;\n            if (this.tryCount <= this.retryLimit) {\n                //try again\n                $.ajax(this);\n                return;\n            }\n\n            me.processNoSnpClinvar(chnid);\n            return;\n          }\n        });\n    }\n    else {\n        console.log( \"No gi was found for the chain \" + chnidBase + \"...\" );\n    }\n};\n\niCn3DUI.prototype.processNoSnpClinvar = function(chnid) { var me = this;\n        console.log( \"No SNP data were found for the protein \" + chnid + \"...\" );\n\n        $(\"#\" + me.pre + 'dt_clinvar_' + chnid).html('');\n        $(\"#\" + me.pre + 'ov_clinvar_' + chnid).html('');\n\n        $(\"#\" + me.pre + 'dt_snp_' + chnid).html('');\n        $(\"#\" + me.pre + 'ov_snp_' + chnid).html('');\n\n        me.enableHlSeq();\n\n        me.bAjaxSnpClinvar = true;\n\n        if(me.deferredSnpClinvar !== undefined) me.deferredSnpClinvar.resolve();\n};\n\niCn3DUI.prototype.showCddSiteAll = function() { var me = this;\n    var chnidBaseArray = $.map(me.protein_chainid, function(v) { return v; });\n    var chnidArray = Object.keys(me.protein_chainid);\n\n    // show conserved domains and binding sites\n    var url = \"https://www.ncbi.nlm.nih.gov/Structure/cdannots/cdannots.fcgi?fmt&queries=\" + chnidBaseArray;\n    $.ajax({\n      url: url,\n      dataType: 'jsonp',\n      cache: true,\n      tryCount : 0,\n      retryLimit : 1,\n      success: function(data) {\n          var chainWithData = {};\n\n          for(var chainI = 0, chainLen = data.data.length; chainI < chainLen; ++chainI) {\n            var cddData = data.data[chainI];\n            var chnidBase = cddData._id;\n            //var pos = chnidBaseArray.indexOf(chnidBase);\n            //var chnid = chnidArray[pos];\n            var chnid = chnidArray[chainI];\n\n            chainWithData[chnid] = 1;\n\n            var html = '<div id=\"' + me.pre + chnid + '_cddseq_sequence\" class=\"icn3d-cdd icn3d-dl_sequence\">';\n            var html2 = html;\n            var html3 = html;\n\n            var domainArray = cddData.doms;\n\n            var indexl = (domainArray !== undefined) ? domainArray.length : 0;\n\n            for(var index = 0; index < indexl; ++index) {\n                var acc = domainArray[index].acc;\n\n                var type = domainArray[index].type;\n                type = 'domain';\n\n                var domain = domainArray[index].title.split(':')[0];\n                var defline = domainArray[index].defline;\n                var title = type + ': ' + domain;\n                if(title.length > 14) title = title.substr(0, 14) + '...';\n\n                //var fulltitle = type + \": \" + domainArray[index].title + \" (accession: \" + acc + \")\";\n                //var fulltitle = type + \": \" + domainArray[index].title;\n                var fulltitle = type + \": \" + domain;\n\n                // each domain may have several repeat. Treat each repeat as a domain\n                var domainRepeatArray = domainArray[index].locs;\n\n                for(var r = 0, rl = domainRepeatArray.length; r < rl; ++r) {\n                    // each domain repeat or domain may have several segments, i.e., a domain may not be continous\n                    var fromArray = [], toArray = [];\n\n                    //var domainFrom = Math.round(domainArray[index].locs[r].segs[0].from);\n                    //var domainTo = Math.round(domainArray[index].locs[r].segs[0].to);\n                    //var range = domainTo - domainFrom + 1;\n\n                    var resiHash = {};\n                    var resCnt = 0;\n\n                    for(var s = 0, sl = domainRepeatArray[r].segs.length; s < sl; ++s) {\n                        var domainFrom = Math.round(domainRepeatArray[r].segs[s].from);\n                        var domainTo = Math.round(domainRepeatArray[r].segs[s].to);\n\n                        fromArray.push(domainFrom + me.baseResi[chnid]);\n                        toArray.push(domainTo + me.baseResi[chnid]);\n\n                        for(var i = domainFrom; i <= domainTo; ++i) {\n                            resiHash[i] = 1;\n                        }\n\n                        resCnt += domainTo - domainFrom + 1;\n                    }\n\n                    //html += '<div class=\"icn3d-seqTitle icn3d-link icn3d-blue\" domain=\"' + acc + '\" from=\"' + fromArray + '\" to=\"' + toArray + '\" shorttitle=\"' + title + '\" setname=\"' + chnid + '_' + type + '_' + index + '_' + r + '\" anno=\"sequence\" chain=\"' + chnid + '\" title=\"' + fulltitle + '\">' + title + ' </div>';\n\n                    //var htmlTmp = '<span class=\"icn3d-residueNum\" title=\"residue count\">' + resCnt.toString() + ' Res</span>';\n\n                    //htmlTmp += '<span class=\"icn3d-seqLine\">';\n                    //html += htmlTmp;\n\n                    var htmlTmp2 = '<div class=\"icn3d-seqTitle icn3d-link icn3d-blue\" domain=\"' + acc + '\" from=\"' + fromArray + '\" to=\"' + toArray + '\" shorttitle=\"' + title + '\" setname=\"' + chnid + '_' + type + '_' + index + '_' + r + '\" anno=\"sequence\" chain=\"' + chnid + '\" title=\"' + fulltitle + '\">' + title + ' </div>';\n\n                    var htmlTmp3 = '<span class=\"icn3d-residueNum\" title=\"residue count\">' + resCnt.toString() + ' Res</span>';\n\n                    html3 += htmlTmp2 + htmlTmp3 + '<br>';\n\n                    var htmlTmp = '<span class=\"icn3d-seqLine\">';\n\n                    html += htmlTmp2 + htmlTmp3 + htmlTmp;\n\n                    html2 += '<div style=\"width:20px; display:inline-block;\"><span id=\"' + me.pre + chnid + '_' + acc + '_' + r + '_cddseq_expand\" class=\"ui-icon ui-icon-plus icn3d-expand icn3d-link\" style=\"width:15px;\" title=\"Expand\"></span><span id=\"' + me.pre + chnid + '_' + acc + '_' + r + '_cddseq_shrink\" class=\"ui-icon ui-icon-minus icn3d-shrink icn3d-link\" style=\"display:none; width:15px;\" title=\"Shrink\"></span></div>';\n                    html2 += '<div style=\"width:100px!important;\" class=\"icn3d-seqTitle icn3d-link icn3d-blue\" domain=\"' + acc + '\" from=\"' + fromArray + '\" to=\"' + toArray + '\" shorttitle=\"' + title + '\" index=\"' + index + '\" setname=\"' + chnid + '_' + type + '_' + index + '_' + r + '\" anno=\"sequence\" chain=\"' + chnid + '\" title=\"' + fulltitle + '\">' + title + ' </div>';\n                    html2 += htmlTmp3 + htmlTmp;\n\n                    var pre = type + index.toString();\n                    for(var i = 0, il = me.giSeq[chnid].length; i < il; ++i) {\n                      html += me.insertGap(chnid, i, '-');\n\n                      if(resiHash.hasOwnProperty(i)) {\n                        var cFull = me.giSeq[chnid][i];\n\n                          var c = cFull;\n                          if(cFull.length > 1) {\n                              c = cFull[0] + '..';\n                          }\n\n        //                var pos = (me.baseResi[chnid] + i+1).toString();\n        //                var pos = me.icn3d.chainsSeq[chnid][i - me.matchedPos[chnid] ].resi\n                          var pos = (i >= me.matchedPos[chnid] && i - me.matchedPos[chnid] < me.icn3d.chainsSeq[chnid].length) ? me.icn3d.chainsSeq[chnid][i - me.matchedPos[chnid]].resi : me.baseResi[chnid] + 1 + i;\n\n                        html += '<span id=\"' + pre + '_' + me.pre + chnid + '_' + pos + '\" title=\"' + c + pos + '\" class=\"icn3d-residue\">' + cFull + '</span>';\n                      }\n                      else {\n                        html += '<span>-</span>'; //'<span>-</span>';\n                      }\n                    }\n\n\n                    var atom = me.icn3d.getFirstCalphaAtomObj(me.icn3d.chains[chnid]);\n                    var color = (atom.color) ? atom.color.getHexString() : me.icn3d.defaultAtomColor;\n\n                    //html2 += '<div style=\"display:inline-block; width:' + Math.round(me.seqAnnWidth * domainFrom / me.maxAnnoLength) + 'px;\"></div>';\n                    //html2 += '<div style=\"display:inline-block; color:white!important; font-weight:bold; background-color:#' + color + '; width:' + Math.round(me.seqAnnWidth * (domainTo - domainFrom + 1) / me.maxAnnoLength) + 'px;\" class=\"icn3d-seqTitle icn3d-link icn3d-blue\" domain=\"' + acc + '\" from=\"' + domainFrom.toString() + '\" to=\"' + domainTo.toString() + '\" shorttitle=\"' + title + '\" setname=\"' + chnid + '_' + type + '_' + index + '\" anno=\"sequence\" chain=\"' + chnid + '\" title=\"' + fulltitle + '\">' + domain + ' </div>';\n\n                    if(me.cfg.blast_rep_id != chnid) { // regular\n                        for(var i = 0, il = fromArray.length; i < il; ++i) {\n                            var emptyWidth = (i == 0) ? Math.round(me.seqAnnWidth * fromArray[i] / me.maxAnnoLength) : Math.round(me.seqAnnWidth * (fromArray[i] - toArray[i-1] - 1) / me.maxAnnoLength);\n                            html2 += '<div style=\"display:inline-block; width:' + emptyWidth + 'px;\">&nbsp;</div>';\n\n                            html2 += '<div style=\"display:inline-block; color:white!important; font-weight:bold; background-color:#' + color + '; width:' + Math.round(me.seqAnnWidth * (toArray[i] - fromArray[i] + 1) / me.maxAnnoLength) + 'px;\" class=\"icn3d-seqTitle icn3d-link icn3d-blue\" domain=\"' + (index+1).toString() + '\" from=\"' + fromArray + '\" to=\"' + toArray + '\" shorttitle=\"' + title + '\" index=\"' + index + '\" setname=\"' + chnid + '_domain_' + index + '_' + r + '\" id=\"' + chnid + '_domain_' + index + '_' + r + '\" anno=\"sequence\" chain=\"' + chnid + '\" title=\"' + fulltitle + '\">' + domain + ' </div>';\n                        }\n                    }\n                    else { // with potential gaps\n                        var fromArray2 = [], toArray2 = [];\n                        for(var i = 0, il = fromArray.length; i < il; ++i) {\n                            fromArray2.push(fromArray[i]);\n\n                            for(var j = fromArray[i]; j <= toArray[i]; ++j) {\n                                if(me.targetGapHash !== undefined && me.targetGapHash.hasOwnProperty(j)) {\n                                    toArray2.push(j - 1);\n                                    fromArray2.push(j);\n                                }\n                            }\n\n                            toArray2.push(toArray[i]);\n                        }\n\n                        for(var i = 0, il = fromArray2.length; i < il; ++i) {\n                            html2 += me.insertGapOverview(chnid, fromArray2[i]);\n\n                            var emptyWidth = (i == 0) ? Math.round(me.seqAnnWidth * fromArray2[i] / (me.maxAnnoLength + me.nTotalGap)) : Math.round(me.seqAnnWidth * (fromArray2[i] - toArray2[i-1] - 1) / (me.maxAnnoLength + me.nTotalGap));\n                            html2 += '<div style=\"display:inline-block; width:' + emptyWidth + 'px;\">&nbsp;</div>';\n\n                            html2 += '<div style=\"display:inline-block; color:white!important; font-weight:bold; background-color:#' + color + '; width:' + Math.round(me.seqAnnWidth * (toArray2[i] - fromArray2[i] + 1) / (me.maxAnnoLength + me.nTotalGap)) + 'px;\" class=\"icn3d-seqTitle icn3d-link icn3d-blue\" domain=\"' + (index+1).toString() + '\" from=\"' + fromArray2 + '\" to=\"' + toArray2 + '\" shorttitle=\"' + title + '\" index=\"' + index + '\" setname=\"' + chnid + '_domain_' + index + '_' + r + '\" id=\"' + chnid + '_domain_' + index + '_' + r + '\" anno=\"sequence\" chain=\"' + chnid + '\" title=\"' + fulltitle + '\">' + domain + ' </div>';\n                        }\n                    }\n\n                    htmlTmp = '<span class=\"icn3d-residueNum\" title=\"residue count\">&nbsp;' + resCnt.toString() + ' Residues</span>';\n\n                    htmlTmp += '</span>';\n                    htmlTmp += '<br>';\n\n                    html += htmlTmp;\n                    html2 += htmlTmp;\n\n                    html2 += '<div id=\"' + me.pre + chnid + '_' + acc + '_' + r + '_cddseq\" style=\"display:none; white-space:normal;\" class=\"icn3d-box\">' + defline + ' (<a href=\"https://www.ncbi.nlm.nih.gov/Structure/cdd/cddsrv.cgi?uid=' + acc + '\" target=\"_blank\" class=\"icn3d-blue\">open details view...</a>)</div>';\n                } // for(var r = 0,\n            }\n\n            html += '</div>';\n            html2 += '</div>';\n            html3 += '</div>';\n\n            $(\"#\" + me.pre + \"dt_cdd_\" + chnid).html(html);\n            $(\"#\" + me.pre + \"ov_cdd_\" + chnid).html(html2);\n            $(\"#\" + me.pre + \"tt_cdd_\" + chnid).html(html3);\n\n            html = '<div id=\"' + me.pre + chnid + '_siteseq_sequence\" class=\"icn3d-dl_sequence\">';\n            html2 = html;\n            html3 = html;\n\n            var siteArray = data.data[chainI].sites;\n            var indexl = (siteArray !== undefined) ? siteArray.length : 0;\n\n            for(var index = 0; index < indexl; ++index) {\n                var domain = siteArray[index].srcdom;\n                var type = siteArray[index].type;\n                var resCnt = siteArray[index].sz;\n\n                var title = 'site: ' + siteArray[index].title;\n                if(title.length > 17) title = title.substr(0, 17) + '...';\n\n                //var fulltitle = \"site: \" + siteArray[index].title + \" (domain: \" + domain + \")\";\n                var fulltitle = siteArray[index].title;\n\n                var resPosArray = siteArray[index].locs[0].coords;\n                var adjustedResPosArray = [];\n                for(var i = 0, il = resPosArray.length; i < il; ++i) {\n                    adjustedResPosArray.push(Math.round(resPosArray[i]) + me.baseResi[chnid]);\n                }\n\n                var htmlTmp2 = '<div class=\"icn3d-seqTitle icn3d-link icn3d-blue\" site=\"site\" posarray=\"' + adjustedResPosArray.toString() + '\" shorttitle=\"' + title + '\" setname=\"' + chnid + '_site_' + index + '\" anno=\"sequence\" chain=\"' + chnid + '\" title=\"' + fulltitle + '\">' + title + ' </div>';\n                var htmlTmp3 = '<span class=\"icn3d-residueNum\" title=\"residue count\">' + resCnt.toString() + ' Res</span>';\n                var htmlTmp = '<span class=\"icn3d-seqLine\">';\n\n                html3 += htmlTmp2 + htmlTmp3 + '<br>';\n\n                html += htmlTmp2 + htmlTmp3 + htmlTmp;\n                html2 += htmlTmp2 + htmlTmp3 + htmlTmp;\n\n                var pre = 'site' + index.toString();\n                var widthPerRes = me.seqAnnWidth / me.maxAnnoLength;\n\n                var prevEmptyWidth = 0;\n                var prevLineWidth = 0;\n                var widthPerRes = 1;\n                for(var i = 0, il = me.giSeq[chnid].length; i < il; ++i) {\n                  html += me.insertGap(chnid, i, '-');\n\n                  if(resPosArray.indexOf(i) != -1) {\n                    var cFull = me.giSeq[chnid][i];\n\n                      var c = cFull;\n                      if(cFull.length > 1) {\n                          c = cFull[0] + '..';\n                      }\n\n    //                var pos = (me.baseResi[chnid] + i+1).toString();\n    //                var pos = me.icn3d.chainsSeq[chnid][i - me.matchedPos[chnid] ].resi;\n                      var pos = (i >= me.matchedPos[chnid] && i - me.matchedPos[chnid] < me.icn3d.chainsSeq[chnid].length) ? me.icn3d.chainsSeq[chnid][i - me.matchedPos[chnid]].resi : me.baseResi[chnid] + 1 + i;\n\n                    html += '<span id=\"' + pre + '_' + me.pre + chnid + '_' + pos + '\" title=\"' + c + pos + '\" class=\"icn3d-residue\">' + cFull + '</span>';\n\n                    html2 += me.insertGapOverview(chnid, i);\n\n                    var emptyWidth = (me.cfg.blast_rep_id == chnid) ? Math.round(me.seqAnnWidth * i / (me.maxAnnoLength + me.nTotalGap) - prevEmptyWidth - prevLineWidth) : Math.round(me.seqAnnWidth * i / me.maxAnnoLength - prevEmptyWidth - prevLineWidth);\n\n                    if(emptyWidth < 0) emptyWidth = 0;\n\n                    html2 += '<div style=\"display:inline-block; width:' + emptyWidth + 'px;\">&nbsp;</div>';\n                    html2 += '<div style=\"display:inline-block; background-color:#000; width:' + widthPerRes + 'px;\" title=\"' + c + pos + '\">&nbsp;</div>';\n\n                    prevEmptyWidth += emptyWidth;\n                    prevLineWidth += widthPerRes;\n                  }\n                  else {\n                    html += '<span>-</span>'; //'<span>-</span>';\n                  }\n                }\n\n                htmlTmp = '<span class=\"icn3d-residueNum\" title=\"residue count\">&nbsp;' + resCnt.toString() + ' Residues</span>';\n                htmlTmp += '</span>';\n                htmlTmp += '<br>';\n\n                html += htmlTmp;\n                html2 += htmlTmp;\n            }\n\n            html += '</div>';\n            html2 += '</div>';\n            html3 += '</div>';\n\n            $(\"#\" + me.pre + \"dt_site_\" + chnid).html(html);\n            $(\"#\" + me.pre + \"ov_site_\" + chnid).html(html2);\n            $(\"#\" + me.pre + \"tt_site_\" + chnid).html(html3);\n        } // outer for loop\n\n        // missing CDD data\n        for(var chnid in me.protein_chainid) {\n            if(!chainWithData.hasOwnProperty(chnid)) {\n                $(\"#\" + me.pre + \"dt_cdd_\" + chnid).html('');\n                $(\"#\" + me.pre + \"ov_cdd_\" + chnid).html('');\n                $(\"#\" + me.pre + \"tt_cdd_\" + chnid).html('');\n\n                $(\"#\" + me.pre + \"dt_site_\" + chnid).html('');\n                $(\"#\" + me.pre + \"ov_site_\" + chnid).html('');\n                $(\"#\" + me.pre + \"tt_site_\" + chnid).html('');\n            }\n        }\n\n        // add here after the ajax call\n        me.enableHlSeq();\n\n        me.bAjaxCddSite = true;\n\n        if(me.deferredAnnoCddSite !== undefined) me.deferredAnnoCddSite.resolve();\n      },\n      error : function(xhr, textStatus, errorThrown ) {\n        this.tryCount++;\n        if (this.tryCount <= this.retryLimit) {\n            //try again\n            $.ajax(this);\n            return;\n        }\n\n        console.log( \"No CDD data were found for the protein \" + chnidBaseArray + \"...\" );\n\n        for(var chnid in me.protein_chainid) {\n            $(\"#\" + me.pre + \"dt_cdd_\" + chnid).html('');\n            $(\"#\" + me.pre + \"ov_cdd_\" + chnid).html('');\n            $(\"#\" + me.pre + \"tt_cdd_\" + chnid).html('');\n\n            $(\"#\" + me.pre + \"dt_site_\" + chnid).html('');\n            $(\"#\" + me.pre + \"ov_site_\" + chnid).html('');\n            $(\"#\" + me.pre + \"tt_site_\" + chnid).html('');\n        }\n\n        // add here after the ajax call\n        me.enableHlSeq();\n\n        me.bAjaxCddSite = true;\n\n        if(me.deferredAnnoCddSite !== undefined) me.deferredAnnoCddSite.resolve();\n        return;\n      }\n    });\n};\n\niCn3DUI.prototype.showDomainPerStructure = function(index) { var me = this;\n    //var chnid = Object.keys(me.protein_chainid)[0];\n    //var pdbid = chnid.substr(0, chnid.indexOf('_'));\n    var pdbArray = Object.keys(me.icn3d.structures);\n\n    // show 3D domains\n    var pdbid = pdbArray[index];\n    var url = \"https://www.ncbi.nlm.nih.gov/Structure/mmdb/mmdb_strview.cgi?v=2&program=icn3d&domain&molinfor&uid=\" + pdbid;\n\n    if(index == 0 && me.mmdb_data !== undefined) {\n        for(var chnid in me.protein_chainid) {\n            if(chnid.indexOf(pdbid) !== -1) {\n                me.showDomainWithData(chnid, me.mmdb_data);\n            }\n        }\n    }\n    else if(me.mmdb_dataArray[index] !== undefined) {\n        for(var chnid in me.protein_chainid) {\n            if(chnid.indexOf(pdbid) !== -1) {\n                me.showDomainWithData(chnid, me.mmdb_dataArray[index]);\n            }\n        }\n    }\n    else {\n        $.ajax({\n          url: url,\n          dataType: 'json',\n          cache: true,\n          tryCount : 0,\n          retryLimit : 1,\n          success: function(data) {\n            me.mmdb_dataArray[index] = data;\n\n            for(var chnid in me.protein_chainid) {\n                if(chnid.indexOf(pdbid) !== -1) {\n                    me.showDomainWithData(chnid, me.mmdb_dataArray[index]);\n                }\n            }\n\n            // add here after the ajax call\n            me.enableHlSeq();\n\n            me.bAjax3ddomain = true;\n            me.bAjaxDoneArray[index] = true;\n\n            if(me.deferred3ddomain !== undefined) {\n                if(me.cfg.align === undefined) {\n                    me.deferred3ddomain.resolve();\n                }\n                else {\n                    var bAjaxDoneAll = true;\n                    for(var i = 0, il = pdbArray.length; i < il; ++i) {\n                        bAjaxDoneAll = bAjaxDoneAll && me.bAjaxDoneArray[i];\n                    }\n\n                    if(bAjaxDoneAll) me.deferred3ddomain.resolve();\n                }\n            }\n          },\n          error : function(xhr, textStatus, errorThrown ) {\n            this.tryCount++;\n            if (this.tryCount <= this.retryLimit) {\n                //try again\n                $.ajax(this);\n                return;\n            }\n\n            console.log( \"No 3D domain data were found for the protein \" + pdbid + \"...\" );\n\n            for(var chnid in me.protein_chainid) {\n                if(chnid.indexOf(pdbid) !== -1) {\n                    $(\"#\" + me.pre + \"dt_domain_\" + chnid).html('');\n                    $(\"#\" + me.pre + \"ov_domain_\" + chnid).html('');\n                    $(\"#\" + me.pre + \"tt_domain_\" + chnid).html('');\n                }\n            }\n\n            me.enableHlSeq();\n\n            me.bAjax3ddomain = true;\n            bAjaxDone1 = true;\n\n            if(me.deferred3ddomain !== undefined) {\n                if(me.cfg.align === undefined) {\n                    me.deferred3ddomain.resolve();\n                }\n                else {\n                    var bAjaxDoneAll = true;\n                    for(var i = 0, il = pdbArray.length; i < il; ++i) {\n                        bAjaxDoneAll = bAjaxDoneAll && me.bAjaxDoneArray[i];\n                    }\n\n                    if(bAjaxDoneAll) me.deferred3ddomain.resolve();\n                }\n            }\n            return;\n          }\n        });\n    }\n};\n\niCn3DUI.prototype.showDomainAll = function() { var me = this;\n    //var chnid = Object.keys(me.protein_chainid)[0];\n    //var pdbid = chnid.substr(0, chnid.indexOf('_'));\n    var pdbArray = Object.keys(me.icn3d.structures);\n\n    // show 3D domains\n    me.mmdb_dataArray = [];\n\n    me.bAjaxDoneArray = [];\n    for(var i = 0, il = pdbArray.length; i < il; ++i) {\n        me.bAjaxDoneArray[i] = false;\n    }\n\n    for(var i = 0, il = pdbArray.length; i < il; ++i) {\n        me.showDomainPerStructure(i);\n    }\n};\n\niCn3DUI.prototype.showDomainWithData = function(chnid, data) { var me = this;\n        var html = '<div id=\"' + me.pre + chnid + '_domainseq_sequence\" class=\"icn3d-dl_sequence\">';\n        var html2 = html;\n        var html3 = html;\n\n        var domainArray, proteinname;\n\n        var pos = chnid.indexOf('_');\n        var chain = chnid.substr(pos + 1);\n\n        var molinfo = data.moleculeInfor;\n        var currMolid;\n        for(var molid in molinfo) {\n        if(molinfo[molid].chain === chain) {\n          currMolid = molid;\n          proteinname = molinfo[molid].name;\n          break;\n        }\n        }\n\n        if(currMolid !== undefined && data.domains[currMolid] !== undefined) {\n          domainArray = data.domains[currMolid].domains;\n        }\n\n        if(domainArray === undefined) {\n          domainArray = [];\n        }\n\n        for(var index = 0, indexl = domainArray.length; index < indexl; ++index) {\n            //var fulltitle = '3D domain ' + (index+1).toString() + ' of ' + proteinname + ' (PDB ID: ' + data.pdbId + ')';\n            var fulltitle = '3D domain ' + (index+1).toString() + ' of ' + proteinname;\n            var title = (fulltitle.length > 17) ? fulltitle.substr(0,17) + '...' : fulltitle;\n\n            var subdomainArray = domainArray[index].intervals;\n\n            // remove duplicate, e.g., at https://www.ncbi.nlm.nih.gov/Structure/mmdb/mmdb_strview.cgi?v=2&program=icn3d&domain&molinfor&uid=1itw\n            var domainHash = {};\n\n            var fromArray = [], toArray = [];\n            var resiHash = {};\n            var resCnt = 0\n            for(var i = 0, il = subdomainArray.length; i < il; ++i) {\n                var domainFrom = Math.round(subdomainArray[i][0]) - 1; // 1-based\n                var domainTo = Math.round(subdomainArray[i][1]) - 1;\n\n                domainStr = domainFrom + \",\" + domainTo;\n\n                if(domainHash.hasOwnProperty(domainStr)) {\n                    continue; // do nothing for duplicates, e.g, PDBID 1ITW\n                }\n                else {\n                    domainHash[domainStr] = 1;\n                }\n\n                fromArray.push(domainFrom + me.baseResi[chnid]);\n                toArray.push(domainTo + me.baseResi[chnid]);\n                resCnt += domainTo - domainFrom + 1;\n\n                for(var j = domainFrom; j <= domainTo; ++j) {\n                    resiHash[j+1] = 1;\n                }\n            }\n\n            var htmlTmp2 = '<div class=\"icn3d-seqTitle icn3d-link icn3d-blue\" 3ddomain=\"' + (index+1).toString() + '\" from=\"' + fromArray + '\" to=\"' + toArray + '\" shorttitle=\"' + title + '\" index=\"' + index + '\" setname=\"' + chnid + '_3d_domain_' + index + '\" anno=\"sequence\" chain=\"' + chnid + '\" title=\"' + fulltitle + '\">' + title + ' </div>';\n\n            var htmlTmp3 = '<span class=\"icn3d-residueNum\" title=\"residue count\">' + resCnt.toString() + ' Res</span>';\n\n            html3 += htmlTmp2 + htmlTmp3 + '<br>';\n\n            var htmlTmp = '<span class=\"icn3d-seqLine\">';\n\n            html += htmlTmp2 + htmlTmp3 + htmlTmp;\n            html2 += htmlTmp2 + htmlTmp3 + htmlTmp;\n\n            var pre = 'domain3d' + index.toString();\n            for(var i = 0, il = me.giSeq[chnid].length; i < il; ++i) {\n              html += me.insertGap(chnid, i, '-');\n\n              //if(i >= domainFrom && i <= domainTo) {\n              if(resiHash.hasOwnProperty(i+1)) {\n                var cFull = me.giSeq[chnid][i];\n\n                  var c = cFull;\n                  if(cFull.length > 1) {\n                      c = cFull[0] + '..';\n                  }\n\n//                var pos = (me.baseResi[chnid] + i+1).toString();\n//                var pos = me.icn3d.chainsSeq[chnid][i - me.matchedPos[chnid] ].resi;\n                  var pos = (i >= me.matchedPos[chnid] && i - me.matchedPos[chnid] < me.icn3d.chainsSeq[chnid].length) ? me.icn3d.chainsSeq[chnid][i - me.matchedPos[chnid]].resi : me.baseResi[chnid] + 1 + i;\n\n                html += '<span id=\"' + pre + '_' + me.pre + chnid + '_' + pos + '\" title=\"' + c + pos + '\" class=\"icn3d-residue\">' + cFull + '</span>';\n              }\n              else {\n                html += '<span>-</span>'; //'<span>-</span>';\n              }\n            }\n\n            var atom = me.icn3d.getFirstCalphaAtomObj(me.icn3d.chains[chnid]);\n            var color = (atom.color) ? atom.color.getHexString() : me.icn3d.defaultAtomColor;\n\n            if(me.cfg.blast_rep_id != chnid) { // regular\n                for(var i = 0, il = fromArray.length; i < il; ++i) {\n                    var emptyWidth = (i == 0) ? Math.round(me.seqAnnWidth * fromArray[i] / me.maxAnnoLength) : Math.round(me.seqAnnWidth * (fromArray[i] - toArray[i-1] - 1) / me.maxAnnoLength);\n                    html2 += '<div style=\"display:inline-block; width:' + emptyWidth + 'px;\">&nbsp;</div>';\n\n                    html2 += '<div style=\"display:inline-block; color:white!important; font-weight:bold; background-color:#' + color + '; width:' + Math.round(me.seqAnnWidth * (toArray[i] - fromArray[i] + 1) / me.maxAnnoLength) + 'px;\" class=\"icn3d-seqTitle icn3d-link icn3d-blue\" 3ddomain=\"' + (index+1).toString() + '\" from=\"' + fromArray + '\" to=\"' + toArray + '\" shorttitle=\"' + title + '\" index=\"' + index + '\" setname=\"' + chnid + '_3d_domain_' + index + '\" id=\"' + chnid + '_3d_domain_' + index + '\" anno=\"sequence\" chain=\"' + chnid + '\" title=\"' + fulltitle + '\">3D domain ' + (index+1).toString() + '</div>';\n                }\n            }\n            else { // with potential gaps\n                var fromArray2 = [], toArray2 = [];\n                for(var i = 0, il = fromArray.length; i < il; ++i) {\n                    fromArray2.push(fromArray[i]);\n\n                    for(var j = fromArray[i]; j <= toArray[i]; ++j) {\n                        if(me.targetGapHash !== undefined && me.targetGapHash.hasOwnProperty(j)) {\n                            toArray2.push(j - 1);\n                            fromArray2.push(j);\n                        }\n                    }\n\n                    toArray2.push(toArray[i]);\n                }\n\n                for(var i = 0, il = fromArray2.length; i < il; ++i) {\n                    html2 += me.insertGapOverview(chnid, fromArray2[i]);\n\n                    var emptyWidth = (i == 0) ? Math.round(me.seqAnnWidth * fromArray2[i] / (me.maxAnnoLength + me.nTotalGap)) : Math.round(me.seqAnnWidth * (fromArray2[i] - toArray2[i-1] - 1) / (me.maxAnnoLength + me.nTotalGap));\n                    html2 += '<div style=\"display:inline-block; width:' + emptyWidth + 'px;\">&nbsp;</div>';\n\n                    html2 += '<div style=\"display:inline-block; color:white!important; font-weight:bold; background-color:#' + color + '; width:' + Math.round(me.seqAnnWidth * (toArray2[i] - fromArray2[i] + 1) / (me.maxAnnoLength + me.nTotalGap)) + 'px;\" class=\"icn3d-seqTitle icn3d-link icn3d-blue\" 3ddomain=\"' + (index+1).toString() + '\" from=\"' + fromArray2 + '\" to=\"' + toArray2 + '\" shorttitle=\"' + title + '\" index=\"' + index + '\" setname=\"' + chnid + '_3d_domain_' + index + '\" id=\"' + chnid + '_3d_domain_' + index + '\" anno=\"sequence\" chain=\"' + chnid + '\" title=\"' + fulltitle + '\">3D domain ' + (index+1).toString() + '</div>';\n                }\n            }\n\n            //var lastToArray = toArray[toArray.length - 1];\n            //var end = (lastToArray - me.matchedPos[chnid] < me.icn3d.chainsSeq[chnid].length) ? me.icn3d.chainsSeq[chnid][lastToArray - me.matchedPos[chnid] ].resi : me.baseResi[chnid] + 1 + lastToArray;\n            //htmlTmp = '<span class=\"icn3d-residueNum\" title=\"ending protein sequence number\">&nbsp;' + end + '</span>';\n\n            htmlTmp = '<span class=\"icn3d-residueNum\" title=\"residue count\">&nbsp;' + resCnt.toString() + ' Residues</span>';\n\n            htmlTmp += '</span>';\n            htmlTmp += '<br>';\n\n            html += htmlTmp;\n            html2 += htmlTmp;\n        }\n\n        html += '</div>';\n        html2 += '</div>';\n        html3 += '</div>';\n\n        $(\"#\" + me.pre + \"dt_domain_\" + chnid).html(html);\n        $(\"#\" + me.pre + \"ov_domain_\" + chnid).html(html2);\n        $(\"#\" + me.pre + \"tt_domain_\" + chnid).html(html3);\n};\n\niCn3DUI.prototype.showInteraction = function(chnid, chnidBase) {\n    var me = this;\n\n    if(me.chainname2residues === undefined && (me.cfg.mmdbid !== undefined || me.cfg.gi !== undefined || me.cfg.blast_rep_id !== undefined || me.cfg.align !== undefined) ) {\n        // 2d interaction didn't finish loading data yet\n        setTimeout(function(){\n          me.showInteraction_base(chnid, chnidBase);\n        }, 1000);\n    }\n    else {\n        me.showInteraction_base(chnid, chnidBase);\n    }\n};\n\niCn3DUI.prototype.showInteraction_base = function(chnid, chnidBase) {\n    var me = this;\n\n    // set interaction\n    if(me.chainname2residues === undefined) me.chainname2residues = {};\n\n    var radius = 4;\n    var chainArray = Object.keys(me.icn3d.chains);\n\n    var chainid = chnid;\n\n    var pos = Math.round(chainid.indexOf('_'));\n    if(pos > 4) return; // NMR structures with structure id such as 2K042,2K043, ...\n\n    var atom = me.icn3d.getFirstCalphaAtomObj(me.icn3d.chains[chainid]);\n\n    if(me.chainname2residues[chainid] === undefined) {\n        me.chainname2residues[chainid] = {};\n\n        var jl = chainArray.length;\n        if(jl > 100 && me.cfg.mmdbid === undefined && me.cfg.gi === undefined && me.cfg.blast_rep_id === undefined && me.cfg.align === undefined) {\n        //if(jl > 100) {\n            //console.log(\"Do not show interactions if there are more than 100 chains\");\n            $(\"#\" + me.pre + \"dt_interaction_\" + chnid).html(\"\");\n            $(\"#\" + me.pre + \"ov_interaction_\" + chnid).html(\"\");\n\n            return; // skip interactions if there are more than 100 chains\n        }\n\n        for(var j = 0; j < jl; ++j) {\n            var chainid2 = chainArray[j];\n            if(chainid2 === chainid) continue;\n            // interactions should be on the same structure\n            if(chainid2.substr(0, chainid2.indexOf('_')) !== chainid.substr(0, chainid.indexOf('_'))) continue;\n\n            pos = Math.round(chainid.indexOf('_'));\n            if(pos > 4) continue; // NMR structures with structure id such as 2K042,2K043, ...\n\n            var atom2 = me.icn3d.getFirstCalphaAtomObj(me.icn3d.chains[chainid2]);\n            //if(me.chainname2residues[chainid2] === undefined) me.chainname2residues[chainid2] = {};\n\n            var type2;\n            if(me.icn3d.chemicals.hasOwnProperty(atom2.serial)) { // 1. chemical interacting with proteins\n                type2 = 'chemical';\n            }\n            else if(me.icn3d.nucleotides.hasOwnProperty(atom2.serial)) { // 2. DNA interacting with proteins\n                type2 = 'nucleotide';\n            }\n            else if(me.icn3d.ions.hasOwnProperty(atom2.serial)) { // 3. ions interacting with proteins\n                type2 = 'ion';\n            }\n            else if(me.icn3d.proteins.hasOwnProperty(atom2.serial)) { // 4. protein interacting with proteins\n                type2 = 'protein';\n            }\n            else if(me.icn3d.water.hasOwnProperty(atom2.serial)) { // 5. water interacting with proteins\n                type2 = 'water';\n            }\n\n            // find atoms in chainid1, which interact with chainid2\n            var atomsChainid1 = me.icn3d.getAtomsWithinAtom(me.icn3d.hash2Atoms(me.icn3d.chains[chainid]), me.icn3d.hash2Atoms(me.icn3d.chains[chainid2]), radius);\n\n            if(Object.keys(atomsChainid1).length == 0) continue;\n\n            var residues = {};\n\n            for (var k in atomsChainid1) {\n                var atom = me.icn3d.atoms[k];\n                var residueid = atom.structure + '_' + atom.chain + '_' + atom.resi;\n                residues[residueid] = 1;\n            }\n\n            var name = chainid2.substr(chainid2.indexOf('_') + 1) + \" (\" + type2 + \")\";\n\n            me.chainname2residues[chainid][name] = Object.keys(residues);\n        } // for\n    }\n\n    var html = '<div id=\"' + me.pre + chnid + '_interseq_sequence\" class=\"icn3d-dl_sequence\">';\n    var html2 = html;\n    var html3 = html;\n\n    var index = 0;\n    for(var chainname in me.chainname2residues[chnid]) {\n        var residueArray = me.chainname2residues[chnid][chainname];\n\n        var title = \"Interact .\" + chainname;\n        if(title.length > 17) title = title.substr(0, 17) + '...';\n\n        var fulltitle = \"Interact .\" + chainname;\n\n        var resPosArray = [];\n        for(var i = 0, il = residueArray.length; i < il; ++i) {\n            var resid = residueArray[i];\n            var resi = Math.round(resid.substr(residueArray[i].lastIndexOf('_') + 1) );\n            // exclude chemical, water and ions\n            var serial = Object.keys(me.icn3d.residues[resid])[0];\n            if(me.icn3d.proteins.hasOwnProperty(serial) || me.icn3d.nucleotides.hasOwnProperty(serial)) {\n                resPosArray.push( resi );\n            }\n        }\n\n        var resCnt = resPosArray.length;\n\n        if(resCnt == 0) continue;\n\n        var chainnameNospace = chainname.replace(/\\s/g, '');\n\n        var htmlTmp2 = '<div class=\"icn3d-seqTitle icn3d-link icn3d-blue\" interaction=\"' + (index+1).toString() + '\" posarray=\"' + resPosArray.toString() + '\" shorttitle=\"' + title + '\" setname=\"' + chnid + '_' + chainnameNospace + '\" anno=\"sequence\" chain=\"' + chnid + '\" title=\"' + fulltitle + '\">' + title + ' </div>';\n        var htmlTmp3 = '<span class=\"icn3d-residueNum\" title=\"residue count\">' + resCnt.toString() + ' Res</span>';\n\n        html3 += htmlTmp2 + htmlTmp3 + '<br>';\n\n        var htmlTmp = '<span class=\"icn3d-seqLine\">';\n\n        html += htmlTmp2 + htmlTmp3 + htmlTmp;\n        html2 += htmlTmp2 + htmlTmp3 + htmlTmp;\n\n        var pre = 'inter' + index.toString();\n\n        var prevEmptyWidth = 0;\n        var prevLineWidth = 0;\n        var widthPerRes = 1;\n\n        for(var i = 0, il = me.giSeq[chnid].length; i < il; ++i) {\n          html += me.insertGap(chnid, i, '-');\n\n          if(resPosArray.indexOf(i+1 + me.baseResi[chnid]) != -1) {\n              var cFull = me.giSeq[chnid][i];\n\n              var c = cFull;\n              if(cFull.length > 1) {\n                  c = cFull[0] + '..';\n              }\n\n//            var pos = (me.baseResi[chnid] + i+1).toString();\n//            var pos = me.icn3d.chainsSeq[chnid][i - me.matchedPos[chnid] ].resi;\n              var pos = (i >= me.matchedPos[chnid] && i - me.matchedPos[chnid] < me.icn3d.chainsSeq[chnid].length) ? me.icn3d.chainsSeq[chnid][i - me.matchedPos[chnid]].resi : me.baseResi[chnid] + 1 + i;\n\n              html += '<span id=\"' + pre + '_' + me.pre + chnid + '_' + pos + '\" title=\"' + cFull + pos + '\" class=\"icn3d-residue\">' + c + '</span>';\n\n              html2 += me.insertGapOverview(chnid, i);\n\n              var emptyWidth = (me.cfg.blast_rep_id == chnid) ? Math.round(me.seqAnnWidth * i / (me.maxAnnoLength + me.nTotalGap) - prevEmptyWidth - prevLineWidth) : Math.round(me.seqAnnWidth * i / me.maxAnnoLength - prevEmptyWidth - prevLineWidth);\n\n                if(emptyWidth < 0) emptyWidth = 0;\n\n                html2 += '<div style=\"display:inline-block; width:' + emptyWidth + 'px;\">&nbsp;</div>';\n                html2 += '<div style=\"display:inline-block; background-color:#000; width:' + widthPerRes + 'px;\" title=\"' + c + pos + '\">&nbsp;</div>';\n\n                prevEmptyWidth += emptyWidth;\n                prevLineWidth += widthPerRes;\n          }\n          else {\n            html += '<span>-</span>'; //'<span>-</span>';\n          }\n        }\n\n        htmlTmp = '<span class=\"icn3d-residueNum\" title=\"residue count\">&nbsp;' + resCnt.toString() + ' Residues</span>';\n        htmlTmp += '</span>';\n        htmlTmp += '<br>';\n\n        html += htmlTmp;\n        html2 += htmlTmp;\n\n        ++index;\n    }\n\n    html += '</div>';\n    html2 += '</div>';\n    html3 += '</div>';\n\n    $(\"#\" + me.pre + \"dt_interaction_\" + chnid).html(html);\n    $(\"#\" + me.pre + \"ov_interaction_\" + chnid).html(html2);\n    $(\"#\" + me.pre + \"tt_interaction_\" + chnid).html(html3);\n\n    // add here after the ajax call\n    if(! me.isMobile()) {\n        me.selectSequenceNonMobile();\n    }\n    else {\n        me.selectSequenceMobile();\n        me.selectChainMobile();\n    }\n};\n\niCn3DUI.prototype.showSsbond = function(chnid, chnidBase) {\n    var me = this;\n\n    if(me.icn3d.ssbondpnts === undefined) {\n        // didn't finish loading atom data yet\n        setTimeout(function(){\n          me.showSsbond_base(chnid, chnidBase);\n        }, 1000);\n    }\n    else {\n        me.showSsbond_base(chnid, chnidBase);\n    }\n};\n\niCn3DUI.prototype.showSsbond_base = function(chnid, chnidBase) {\n    var me = this;\n\n    var chainArray = Object.keys(me.icn3d.chains);\n\n    //var chainid = chnid;\n    var chainid = chnidBase;\n\n    //var pos = Math.round(chainid.indexOf('_'));\n    //if(pos > 4) return; // NMR structures with structure id such as 2K042,2K043, ...\n\n    var atom = me.icn3d.getFirstCalphaAtomObj(me.icn3d.chains[chainid]);\n\n    var html = '<div id=\"' + me.pre + chnid + '_ssbondseq_sequence\" class=\"icn3d-dl_sequence\">';\n    var html2 = html;\n    var html3 = html;\n\n    //me.icn3d.ssbondpnts[atom1.structure].push(resid1);\n    var resid2resids = {};\n\n    var structure = chainid.substr(0, chainid.indexOf('_'));\n    var ssbondArray = me.icn3d.ssbondpnts[structure];\n    if(ssbondArray === undefined) {\n        $(\"#\" + me.pre + \"dt_ssbond_\" + chnid).html('');\n        $(\"#\" + me.pre + \"ov_ssbond_\" + chnid).html('');\n        $(\"#\" + me.pre + \"tt_ssbond_\" + chnid).html('');\n\n        return;\n    }\n\n    for(var i = 0, il = ssbondArray.length; i < il; i = i + 2) {\n        var resid1 = ssbondArray[i];\n        var resid2 = ssbondArray[i+1];\n\n        var chainid1 = resid1.substr(0, resid1.lastIndexOf('_'));\n        var chainid2 = resid2.substr(0, resid2.lastIndexOf('_'));\n\n        if(chainid === chainid1) {\n            if(resid2resids[resid1] === undefined) resid2resids[resid1] = [];\n            resid2resids[resid1].push(resid2);\n        }\n\n        if(chainid === chainid2) {\n            if(resid2resids[resid2] === undefined) resid2resids[resid2] = [];\n            resid2resids[resid2].push(resid1);\n        }\n    }\n\n    var residueArray = Object.keys(resid2resids);\n\n    var title = \"Disulfide Bonds\";\n    if(title.length > 17) title = title.substr(0, 17) + '...';\n\n    var fulltitle = title;\n\n    var resPosArray = [];\n    for(var i = 0, il = residueArray.length; i < il; ++i) {\n        var resid = residueArray[i];\n        var resi = Math.round(resid.substr(residueArray[i].lastIndexOf('_') + 1) );\n        // exclude chemical, water and ions\n        //var serial = Object.keys(me.icn3d.residues[resid])[0];\n        //if(me.icn3d.proteins.hasOwnProperty(serial) || me.icn3d.nucleotides.hasOwnProperty(serial)) {\n        //    resPosArray.push( resi );\n        //}\n        resPosArray.push( resi );\n    }\n\n    if(resPosArray.length === 0) {\n        $(\"#\" + me.pre + \"dt_ssbond_\" + chnid).html('');\n        $(\"#\" + me.pre + \"ov_ssbond_\" + chnid).html('');\n        $(\"#\" + me.pre + \"tt_ssbond_\" + chnid).html('');\n\n        return;\n    }\n\n    var resCnt = resPosArray.length;\n\n    var chainnameNospace = 'ssbond'; //chainname.replace(/\\s/g, '');\n\n    var htmlTmp2 = '<div class=\"icn3d-seqTitle icn3d-link icn3d-blue\" ssbond=\"\" posarray=\"' + resPosArray.toString() + '\" shorttitle=\"' + title + '\" setname=\"' + chnid + '_' + chainnameNospace + '\" anno=\"sequence\" chain=\"' + chnid + '\" title=\"' + fulltitle + '\">' + title + ' </div>';\n    var htmlTmp3 = '<span class=\"icn3d-residueNum\" title=\"residue count\">' + resCnt.toString() + ' Res</span>';\n\n    html3 += htmlTmp2 + htmlTmp3 + '<br>';\n\n    var htmlTmp = '<span class=\"icn3d-seqLine\">';\n\n    html += htmlTmp2 + htmlTmp3 + htmlTmp;\n    html2 += htmlTmp2 + htmlTmp3 + htmlTmp;\n\n    var pre = 'ssbond';\n\n    var prevEmptyWidth = 0;\n    var prevLineWidth = 0;\n    var widthPerRes = 1;\n\n    for(var i = 0, il = me.giSeq[chnid].length; i < il; ++i) {\n      html += me.insertGap(chnid, i, '-');\n\n      if(resPosArray.indexOf(i+1 + me.baseResi[chnid]) != -1) {\n          var cFull = me.giSeq[chnid][i];\n\n          var c = cFull;\n          if(cFull.length > 1) {\n              c = cFull[0] + '..';\n          }\n\n          var pos = (i >= me.matchedPos[chnid] && i - me.matchedPos[chnid] < me.icn3d.chainsSeq[chnid].length) ? me.icn3d.chainsSeq[chnid][i - me.matchedPos[chnid]].resi : me.baseResi[chnid] + 1 + i;\n\n          var resid = chnid + '_' + (i+1 + me.baseResi[chnid]).toString();\n          var title = 'Residue ' + resid + ' has disulfide bond with';\n          if(resid2resids[resid] !== undefined) {\n              for(var j = 0, jl = resid2resids[resid].length; j < jl; ++j) {\n                  title += ' residue ' + resid2resids[resid][j];\n              }\n          }\n\n          html += '<span id=\"' + pre + '_' + me.pre + chnid + '_' + pos + '\" title=\"' + title + '\" class=\"icn3d-residue\">' + c + '</span>';\n\n          html2 += me.insertGapOverview(chnid, i);\n\n          var emptyWidth = (me.cfg.blast_rep_id == chnid) ? Math.round(me.seqAnnWidth * i / (me.maxAnnoLength + me.nTotalGap) - prevEmptyWidth - prevLineWidth) : Math.round(me.seqAnnWidth * i / me.maxAnnoLength - prevEmptyWidth - prevLineWidth);\n\n            if(emptyWidth < 0) emptyWidth = 0;\n\n            html2 += '<div style=\"display:inline-block; width:' + emptyWidth + 'px;\">&nbsp;</div>';\n            html2 += '<div style=\"display:inline-block; background-color:#000; width:' + widthPerRes + 'px;\" title=\"' + title + '\">&nbsp;</div>';\n\n            prevEmptyWidth += emptyWidth;\n            prevLineWidth += widthPerRes;\n      }\n      else {\n        html += '<span>-</span>'; //'<span>-</span>';\n      }\n    }\n\n    htmlTmp = '<span class=\"icn3d-residueNum\" title=\"residue count\">&nbsp;' + resCnt.toString() + ' Residues</span>';\n    htmlTmp += '</span>';\n    htmlTmp += '<br>';\n\n    html += htmlTmp;\n    html2 += htmlTmp;\n\n\n    html += '</div>';\n    html2 += '</div>';\n    html3 += '</div>';\n\n    $(\"#\" + me.pre + \"dt_ssbond_\" + chnid).html(html);\n    $(\"#\" + me.pre + \"ov_ssbond_\" + chnid).html(html2);\n    $(\"#\" + me.pre + \"tt_ssbond_\" + chnid).html(html3);\n\n/*\n    // add here after the ajax call\n    if(! me.isMobile()) {\n        me.selectSequenceNonMobile();\n    }\n    else {\n        me.selectSequenceMobile();\n        me.selectChainMobile();\n    }\n*/\n};\n\niCn3DUI.prototype.hideAllAnno = function() { var me = this;\n        $(\"[id^=\" + me.pre + \"site]\").hide();\n        $(\"[id^=\" + me.pre + \"snp]\").hide();\n        $(\"[id^=\" + me.pre + \"clinvar]\").hide();\n        $(\"[id^=\" + me.pre + \"cdd]\").hide();\n        $(\"[id^=\" + me.pre + \"domain]\").hide();\n        $(\"[id^=\" + me.pre + \"interaction]\").hide();\n        $(\"[id^=\" + me.pre + \"custom]\").hide();\n        $(\"[id^=\" + me.pre + \"ssbond]\").hide();\n};\n\niCn3DUI.prototype.setAnnoTabAll = function () {  var me = this;\n    if($(\"#\" + me.pre + \"anno_all\").length) $(\"#\" + me.pre + \"anno_all\")[0].checked = true;\n\n    if($(\"#\" + me.pre + \"anno_binding\").length) $(\"#\" + me.pre + \"anno_binding\")[0].checked = true;\n    if($(\"#\" + me.pre + \"anno_snp\").length) $(\"#\" + me.pre + \"anno_snp\")[0].checked = true;\n    if($(\"#\" + me.pre + \"anno_clinvar\").length) $(\"#\" + me.pre + \"anno_clinvar\")[0].checked = true;\n    if($(\"#\" + me.pre + \"anno_cdd\").length) $(\"#\" + me.pre + \"anno_cdd\")[0].checked = true;\n    if($(\"#\" + me.pre + \"anno_3dd\").length) $(\"#\" + me.pre + \"anno_3dd\")[0].checked = true;\n    if($(\"#\" + me.pre + \"anno_interact\").length) $(\"#\" + me.pre + \"anno_interact\")[0].checked = true;\n    if($(\"#\" + me.pre + \"anno_custom\").length) $(\"#\" + me.pre + \"anno_custom\")[0].checked = true;\n    if($(\"#\" + me.pre + \"anno_ssbond\").length) $(\"#\" + me.pre + \"anno_ssbond\")[0].checked = true;\n\n    //$(\"[id^=\" + me.pre + \"custom]\").show();\n    $(\"[id^=\" + me.pre + \"site]\").show();\n    $(\"[id^=\" + me.pre + \"snp]\").show();\n    $(\"[id^=\" + me.pre + \"clinvar]\").show();\n    $(\"[id^=\" + me.pre + \"cdd]\").show();\n    $(\"[id^=\" + me.pre + \"domain]\").show();\n    $(\"[id^=\" + me.pre + \"interaction]\").show();\n    $(\"[id^=\" + me.pre + \"custom]\").show();\n    $(\"[id^=\" + me.pre + \"ssbond]\").show();\n\n    me.updateSnpClinvar();\n    me.updateDomain();\n    me.updateInteraction();\n    me.updateSsbond();\n};\n\niCn3DUI.prototype.hideAnnoTabAll = function () {  var me = this;\n    if($(\"#\" + me.pre + \"anno_all\").length) $(\"#\" + me.pre + \"anno_all\")[0].checked = false;\n\n    if($(\"#\" + me.pre + \"anno_binding\").length) $(\"#\" + me.pre + \"anno_binding\")[0].checked = false;\n    if($(\"#\" + me.pre + \"anno_snp\").length) $(\"#\" + me.pre + \"anno_snp\")[0].checked = false;\n    if($(\"#\" + me.pre + \"anno_clinvar\").length) $(\"#\" + me.pre + \"anno_clinvar\")[0].checked = false;\n    if($(\"#\" + me.pre + \"anno_cdd\").length) $(\"#\" + me.pre + \"anno_cdd\")[0].checked = false;\n    if($(\"#\" + me.pre + \"anno_3dd\").length) $(\"#\" + me.pre + \"anno_3dd\")[0].checked = false;\n    if($(\"#\" + me.pre + \"anno_interact\").length) $(\"#\" + me.pre + \"anno_interact\")[0].checked = false;\n    if($(\"#\" + me.pre + \"anno_custom\").length) $(\"#\" + me.pre + \"anno_custom\")[0].checked = false;\n    if($(\"#\" + me.pre + \"anno_ssbond\").length) $(\"#\" + me.pre + \"anno_ssbond\")[0].checked = false;\n\n    me.hideAllAnno();\n};\n\niCn3DUI.prototype.setAnnoTabCustom = function () {  var me = this;\n    $(\"[id^=\" + me.pre + \"custom]\").show();\n    if($(\"#\" + me.pre + \"anno_custom\").length) $(\"#\" + me.pre + \"anno_custom\")[0].checked = true;\n};\n\niCn3DUI.prototype.hideAnnoTabCustom = function () {  var me = this;\n    $(\"[id^=\" + me.pre + \"custom]\").hide();\n    if($(\"#\" + me.pre + \"anno_custom\").length) $(\"#\" + me.pre + \"anno_custom\")[0].checked = false;\n};\n\niCn3DUI.prototype.setAnnoTabClinvar = function () {  var me = this;\n    $(\"[id^=\" + me.pre + \"clinvar]\").show();\n    if($(\"#\" + me.pre + \"anno_clinvar\").length) $(\"#\" + me.pre + \"anno_clinvar\")[0].checked = true;\n\n    me.updateSnpClinvar();\n};\n\niCn3DUI.prototype.hideAnnoTabClinvar = function () {  var me = this;\n    $(\"[id^=\" + me.pre + \"clinvar]\").hide();\n    if($(\"#\" + me.pre + \"anno_clinvar\").length) $(\"#\" + me.pre + \"anno_clinvar\")[0].checked = false;\n};\n\niCn3DUI.prototype.setAnnoTabSnp = function () {  var me = this;\n    $(\"[id^=\" + me.pre + \"snp]\").show();\n    if($(\"#\" + me.pre + \"anno_snp\").length) $(\"#\" + me.pre + \"anno_snp\")[0].checked = true;\n\n    me.updateSnpClinvar();\n};\n\niCn3DUI.prototype.hideAnnoTabSnp = function () {  var me = this;\n    $(\"[id^=\" + me.pre + \"snp]\").hide();\n    if($(\"#\" + me.pre + \"anno_snp\").length) $(\"#\" + me.pre + \"anno_snp\")[0].checked = false;\n};\n\niCn3DUI.prototype.setAnnoTabCdd = function () {  var me = this;\n    $(\"[id^=\" + me.pre + \"cdd]\").show();\n    if($(\"#\" + me.pre + \"anno_cdd\").length) $(\"#\" + me.pre + \"anno_cdd\")[0].checked = true;\n};\n\niCn3DUI.prototype.hideAnnoTabCdd = function () {  var me = this;\n    $(\"[id^=\" + me.pre + \"cdd]\").hide();\n    if($(\"#\" + me.pre + \"anno_cdd\").length) $(\"#\" + me.pre + \"anno_cdd\")[0].checked = false;\n};\n\niCn3DUI.prototype.setAnnoTab3ddomain = function () {  var me = this;\n    $(\"[id^=\" + me.pre + \"domain]\").show();\n    if($(\"#\" + me.pre + \"anno_3dd\").length) $(\"#\" + me.pre + \"anno_3dd\")[0].checked = true;\n\n    me.updateDomain();\n};\n\niCn3DUI.prototype.hideAnnoTab3ddomain = function () {  var me = this;\n    $(\"[id^=\" + me.pre + \"domain]\").hide();\n    if($(\"#\" + me.pre + \"anno_3dd\").length) $(\"#\" + me.pre + \"anno_3dd\")[0].checked = false;\n};\n\niCn3DUI.prototype.setAnnoTabSite = function () {  var me = this;\n    $(\"[id^=\" + me.pre + \"site]\").show();\n    if($(\"#\" + me.pre + \"anno_binding\").length) $(\"#\" + me.pre + \"anno_binding\")[0].checked = true;\n};\n\niCn3DUI.prototype.hideAnnoTabSite = function () {  var me = this;\n    $(\"[id^=\" + me.pre + \"site]\").hide();\n    if($(\"#\" + me.pre + \"anno_binding\").length) $(\"#\" + me.pre + \"anno_binding\")[0].checked = false;\n};\n\niCn3DUI.prototype.setAnnoTabInteraction = function () {  var me = this;\n    $(\"[id^=\" + me.pre + \"interaction]\").show();\n    if($(\"#\" + me.pre + \"anno_interact\").length) $(\"#\" + me.pre + \"anno_interact\")[0].checked = true;\n\n    me.updateInteraction();\n};\n\niCn3DUI.prototype.hideAnnoTabInteraction = function () {  var me = this;\n    $(\"[id^=\" + me.pre + \"interaction]\").hide();\n    if($(\"#\" + me.pre + \"anno_interact\").length) $(\"#\" + me.pre + \"anno_interact\")[0].checked = false;\n};\n\niCn3DUI.prototype.setAnnoTabSsbond = function () {  var me = this;\n    $(\"[id^=\" + me.pre + \"ssbond]\").show();\n    if($(\"#\" + me.pre + \"anno_ssbond\").length) $(\"#\" + me.pre + \"anno_ssbond\")[0].checked = true;\n\n    me.updateSsbond();\n};\n\niCn3DUI.prototype.hideAnnoTabSsbond = function () {  var me = this;\n    $(\"[id^=\" + me.pre + \"ssbond]\").hide();\n    if($(\"#\" + me.pre + \"anno_ssbond\").length) $(\"#\" + me.pre + \"anno_ssbond\")[0].checked = false;\n};\n\niCn3DUI.prototype.setTabs = function () {  var me = this;\n//        $(\"#\" + me.pre + \"dl_annotations_tabs\").tabs();\n    $(\"#\" + me.pre + \"dl_addtrack_tabs\").tabs();\n    $(\"#\" + me.pre + \"dl_anno_view_tabs\").tabs();\n\n    $(\"#\" + me.pre + \"anno_all\").click(function (e) {\n    if($(\"#\" + me.pre + \"anno_all\")[0].checked) {\n        me.setAnnoTabAll();\n        me.setLogCmd(\"set annotation all\", true);\n    }\n    else{\n        me.hideAnnoTabAll();\n        me.setLogCmd(\"hide annotation all\", true);\n    }\n    });\n\n    $(\"#\" + me.pre + \"anno_binding\").click(function (e) {\n    if($(\"#\" + me.pre + \"anno_binding\")[0].checked) {\n        me.setAnnoTabSite();\n        me.setLogCmd(\"set annotation site\", true);\n    }\n    else{\n        me.hideAnnoTabSite();\n        me.setLogCmd(\"hide annotation site\", true);\n    }\n    });\n\n    $(\"#\" + me.pre + \"anno_snp\").click(function (e) {\n    if($(\"#\" + me.pre + \"anno_snp\")[0].checked) {\n        me.setAnnoTabSnp();\n        me.setLogCmd(\"set annotation snp\", true);\n    }\n    else{\n        me.hideAnnoTabSnp();\n        me.setLogCmd(\"hide annotation snp\", true);\n    }\n    });\n\n    $(\"#\" + me.pre + \"anno_clinvar\").click(function (e) {\n    if($(\"#\" + me.pre + \"anno_clinvar\")[0].checked) {\n        me.setAnnoTabClinvar();\n        me.setLogCmd(\"set annotation clinvar\", true);\n    }\n    else{\n        me.hideAnnoTabClinvar();\n        me.setLogCmd(\"hide annotation clinvar\", true);\n    }\n    });\n\n    $(\"#\" + me.pre + \"anno_cdd\").click(function (e) {\n        me.clickCdd();\n    });\n\n    $(\"#\" + me.pre + \"anno_3dd\").click(function (e) {\n    if($(\"#\" + me.pre + \"anno_3dd\")[0].checked) {\n        me.setAnnoTab3ddomain();\n        me.setLogCmd(\"set annotation 3ddomain\", true);\n    }\n    else{\n        me.hideAnnoTab3ddomain();\n        me.setLogCmd(\"hide annotation 3ddomain\", true);\n    }\n    });\n\n    $(\"#\" + me.pre + \"anno_interact\").click(function (e) {\n    if($(\"#\" + me.pre + \"anno_interact\")[0].checked) {\n        me.setAnnoTabInteraction();\n        me.setLogCmd(\"set annotation interaction\", true);\n    }\n    else{\n        me.hideAnnoTabInteraction();\n        me.setLogCmd(\"hide annotation interaction\", true);\n    }\n    });\n\n\n    $(\"#\" + me.pre + \"anno_custom\").click(function (e) {\n    if($(\"#\" + me.pre + \"anno_custom\")[0].checked) {\n        me.setAnnoTabCustom();\n        me.setLogCmd(\"set annotation custom\", true);\n    }\n    else{\n        me.hideAnnoTabCustom();\n        me.setLogCmd(\"hide annotation custom\", true);\n    }\n    });\n\n    $(\"#\" + me.pre + \"anno_ssbond\").click(function (e) {\n    if($(\"#\" + me.pre + \"anno_ssbond\")[0].checked) {\n        me.setAnnoTabSsbond();\n        me.setLogCmd(\"set annotation ssbond\", true);\n    }\n    else{\n        me.hideAnnoTabSsbond();\n        me.setLogCmd(\"hide annotation ssbond\", true);\n    }\n    });\n};\n\niCn3DUI.prototype.clickCdd = function() { var me = this;\n  if($(\"[id^=\" + me.pre + \"cdd]\").length > 0) {\n    if($(\"#\" + me.pre + \"anno_cdd\")[0].checked) {\n        me.setAnnoTabCdd();\n        me.setLogCmd(\"set annotation cdd\", true);\n    }\n    else{\n        me.hideAnnoTabCdd();\n        me.setLogCmd(\"hide annotation cdd\", true);\n    }\n  }\n};\n\n// jquery tooltip\n//https://stackoverflow.com/questions/18231315/jquery-ui-tooltip-html-with-links\niCn3DUI.prototype.setToolTip = function () {  var me = this;\n  $(\"[id^=\" + me.pre + \"snp]\").add(\"[id^=\" + me.pre + \"clinvar]\").add(\"[id^=\" + me.pre + \"ssbond]\").tooltip({\n    content: function () {\n        return $(this).prop('title');\n    },\n    show: null,\n    close: function (event, ui) {\n        ui.tooltip.hover(\n\n        function () {\n            $(this).stop(true).fadeTo(400, 1);\n        },\n\n        function () {\n            $(this).fadeOut(\"200\", function () {\n                $(this).remove();\n            })\n        });\n    }\n  });\n};\n\niCn3DUI.prototype.showAnnoSelectedChains = function () {   var me = this;\n    // show selected chains in annotation window\n    var chainHash = {};\n    for(var i in me.icn3d.hAtoms) {\n        var atom = me.icn3d.atoms[i];\n        var chainid = atom.structure + '_' + atom.chain;\n        chainHash[chainid] = 1;\n    }\n\n    $(\"#\" + me.pre + \"dl_annotations > .icn3d-annotation\").hide();\n    for(var chainid in chainHash) {\n        if($(\"#\" + me.pre + \"anno_\" + chainid).length) {\n            $(\"#\" + me.pre + \"anno_\" + chainid).show();\n        }\n\n        var atom = me.icn3d.getFirstCalphaAtomObj(me.icn3d.chains[chainid]);\n        var oneLetterRes = me.icn3d.residueName2Abbr(atom.resn.substr(0, 3));\n\n        $(\"#\" + me.pre + \"anno_\" + oneLetterRes).show();\n    }\n};\n\niCn3DUI.prototype.showAnnoAllChains = function () {   var me = this;\n    $(\"#\" + me.pre + \"dl_annotations > .icn3d-annotation\").show();\n};\n\niCn3DUI.prototype.setAnnoView = function(view) { var me = this;\n    if(view === 'detailed view') {\n        me.view = 'detailed view';\n\n        // set text\n//        $(\"#\" + me.pre + \"viewdetail\").show();\n//        $(\"#\" + me.pre + \"overview\").hide();\n\n        //$(\"#\" + me.pre + \"viewswitch\")[0].checked = false;\n\n        $( \"#\" + me.pre + \"dl_anno_view_tabs\" ).tabs( \"option\", \"active\", 1 );\n    }\n    else { // overview\n        me.view = 'overview';\n\n        // set text\n//        $(\"#\" + me.pre + \"viewdetail\").hide();\n//        $(\"#\" + me.pre + \"overview\").show();\n\n        //$(\"#\" + me.pre + \"viewswitch\")[0].checked = true;\n\n        $( \"#\" + me.pre + \"dl_anno_view_tabs\" ).tabs( \"option\", \"active\", 0 );\n    }\n};\n\niCn3DUI.prototype.showFixedTitle = function() { var me = this;\n        var style = 'display:block;'\n        $(\"[id^=\" + me.pre + \"tt_giseq]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"tt_custom]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"tt_site]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"tt_snp]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"tt_clinvar]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"tt_cdd]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"tt_domain]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"tt_interaction]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"tt_ssbond]\").attr('style', style);\n};\n\niCn3DUI.prototype.hideFixedTitle = function() { var me = this;\n        var style = 'display:none!important;'\n        $(\"[id^=\" + me.pre + \"tt_giseq]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"tt_custom]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"tt_site]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"tt_snp]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"tt_clinvar]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"tt_cdd]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"tt_domain]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"tt_interaction]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"tt_ssbond]\").attr('style', style);\n};\n\niCn3DUI.prototype.setAnnoViewAndDisplay = function(view) { var me = this;\n    if(view === 'detailed view') {\n        me.setAnnoView('detailed view');\n\n        var style = 'display:block;'\n        $(\"[id^=\" + me.pre + \"dt_giseq]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"dt_custom]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"dt_site]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"dt_snp]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"dt_clinvar]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"dt_cdd]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"dt_domain]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"dt_interaction]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"dt_ssbond]\").attr('style', style);\n\n        $(\"#\" + me.pre + \"seqguide_wrapper\").attr('style', style);\n\n        style = 'display:none;'\n        $(\"[id^=\" + me.pre + \"ov_giseq]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"ov_custom]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"ov_site]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"ov_snp]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"ov_clinvar]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"ov_cdd]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"ov_domain]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"ov_interaction]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"ov_ssbond]\").attr('style', style);\n    }\n    else { // overview\n        me.setAnnoView('overview');\n\n        me.hideFixedTitle();\n\n        var style = 'display:none;'\n        $(\"[id^=\" + me.pre + \"dt_giseq]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"dt_custom]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"dt_site]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"dt_snp]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"dt_clinvar]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"dt_cdd]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"dt_domain]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"dt_interaction]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"dt_ssbond]\").attr('style', style);\n\n        $(\"#\" + me.pre + \"seqguide_wrapper\").attr('style', style);\n\n        style = 'display:block;'\n        $(\"[id^=\" + me.pre + \"ov_giseq]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"ov_custom]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"ov_site]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"ov_snp]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"ov_clinvar]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"ov_cdd]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"ov_domain]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"ov_interaction]\").attr('style', style);\n        $(\"[id^=\" + me.pre + \"ov_ssbond]\").attr('style', style);\n    }\n};\n\n\n/**\n * @author Jiyao Wang <wangjiy@ncbi.nlm.nih.gov> / https://github.com/ncbi/icn3d\n */\n\niCn3DUI.prototype.clickAddTrack = function() { var me = this;\n    $(document).on('click', \".icn3d-addtrack\", function(e) {\n      e.stopImmediatePropagation();\n\n      $(\"#\" + me.pre + \"anno_custom\")[0].checked = true;\n      $(\"[id^=\" + me.pre + \"custom]\").show();\n\n      //e.preventDefault();\n      var chainid = $(this).attr('chainid');\n      $(\"#\" + me.pre + \"track_chainid\").val(chainid);\n      me.openDialog(me.pre + 'dl_addtrack', 'Add track for Chain: ' + chainid);\n      $( \"#\" + me.pre + \"track_gi\" ).focus();\n    });\n};\n\niCn3DUI.prototype.clickDefineHelix = function() { var me = this;\n    $(document).on('click', \".icn3d-helixsets\", function(e) {\n      e.stopImmediatePropagation();\n\n      //e.preventDefault();\n      var chainid = $(this).attr('chainid');\n\n      me.defineSecondary(chainid, 'helix');\n\n      me.setLogCmd('define helix sets | chain ' + chainid, true);\n    });\n};\n\niCn3DUI.prototype.clickDefineSheet = function() { var me = this;\n    $(document).on('click', \".icn3d-sheetsets\", function(e) {\n      e.stopImmediatePropagation();\n\n      //e.preventDefault();\n      var chainid = $(this).attr('chainid');\n\n      me.defineSecondary(chainid, 'sheet');\n\n      me.setLogCmd('define sheet sets | chain ' + chainid, true);\n    });\n};\n\niCn3DUI.prototype.clickDefineCoil = function() { var me = this;\n    $(document).on('click', \".icn3d-coilsets\", function(e) {\n      e.stopImmediatePropagation();\n\n      //e.preventDefault();\n      var chainid = $(this).attr('chainid');\n\n      me.defineSecondary(chainid, 'coil');\n\n      me.setLogCmd('define coil sets | chain ' + chainid, true);\n    });\n};\n\niCn3DUI.prototype.clickDeleteSets = function() { var me = this;\n    $(\"#\" + me.pre + \"deletesets\").click(function(e) {\n         me.deleteSelectedSets();\n         me.setLogCmd(\"delete selected sets\", true);\n    });\n};\n\niCn3DUI.prototype.defineSecondary = function(chainid, type) { var me = this;\n    if(!$('#' + me.pre + 'dl_definedsets').hasClass('ui-dialog-content') || !$('#' + me.pre + 'dl_definedsets').dialog( 'isOpen' )) {\n        me.openDialog(me.pre + 'dl_definedsets', 'Select sets');\n    }\n\n    var selectedResidues = {};\n    var bUnion = false, bUpdateHighlight = true;\n\n    // order of secondary structures\n    var index = 1;\n\n    var helixCnt = 0, sheetCnt = 0, bFirstSS = true;\n    var zero = '0';\n    //var prevName = chainid + zero + index + '_L(N', currName, setName;\n    var prevName = chainid + '_C(Nterm', currName, setName;\n\n    // clear selection\n    me.icn3d.hAtoms = {};\n\n    //for(var i = 0, il = me.giSeq[chainid].length; i < il; ++i) {\n      //var currResi = (i >= me.matchedPos[chainid] && i - me.matchedPos[chainid] < me.icn3d.chainsSeq[chainid].length) ? me.icn3d.chainsSeq[chainid][i - me.matchedPos[chainid]].resi : me.baseResi[chainid] + 1 + i;\n    for(var i = 0, il = me.icn3d.chainsSeq[chainid].length; i < il; ++i) {\n      var currResi = me.icn3d.chainsSeq[chainid][i].resi;\n\n      // name of secondary structures\n      var residueid = chainid + '_' + currResi;\n\n      if( me.icn3d.residues.hasOwnProperty(residueid) ) {\n        var atom = me.icn3d.getFirstCalphaAtomObj(me.icn3d.residues[residueid]);\n        currSS = me.icn3d.secondaries[residueid];\n\n        if(currSS == 'H') {\n            if(atom.ssbegin) {\n                ++helixCnt;\n\n                if(Object.keys(selectedResidues).length > 0) {\n                    setName = currName + 'H' + helixCnt + ')';\n                    if(type == 'coil') {\n                        me.selectResidueList(selectedResidues, setName, setName, bUnion, bUpdateHighlight);\n                        if(!bUnion) bUnion = true;\n                    }\n                    selectedResidues = {};\n                    ++index;\n                }\n            }\n\n            //zero = (index < 10) ? '0' : '';\n            //currName = chainid + zero + index + '_H' + helixCnt;\n            currName = chainid + '_H' + helixCnt;\n            selectedResidues[residueid] = 1;\n\n            if(atom.ssend) {\n                //zero = (index < 9) ? '0' : '';\n                //prevName = chainid + zero + (index+1) + '_L(H' + helixCnt;\n                prevName = chainid + '_C(H' + helixCnt;\n                if(type == 'helix') {\n                    me.selectResidueList(selectedResidues, currName, currName, bUnion, bUpdateHighlight);\n                    if(!bUnion) bUnion = true;\n                }\n                selectedResidues = {};\n                ++index;\n            }\n        }\n        else if(currSS == 'E') {\n            if(atom.ssbegin) {\n                ++sheetCnt;\n\n                if(Object.keys(selectedResidues).length > 0) {\n                    setName = currName + 'S' + sheetCnt + ')';\n                    if(type == 'coil') {\n                        me.selectResidueList(selectedResidues, setName, setName, bUnion, bUpdateHighlight);\n                        if(!bUnion) bUnion = true;\n                    }\n                    selectedResidues = {};\n                    ++index;\n                }\n            }\n\n            //zero = (index < 10) ? '0' : '';\n            //currName = chainid + zero + index + '_S' + sheetCnt;\n            currName = chainid + '_S' + sheetCnt;\n            selectedResidues[residueid] = 1;\n\n            if(atom.ssend) {\n                //zero = (index < 9) ? '0' : '';\n                //prevName = chainid + zero + (index+1) + '_L(S' + sheetCnt;\n                prevName = chainid + '_C(S' + sheetCnt;\n                if(type == 'sheet') {\n                    me.selectResidueList(selectedResidues, currName, currName, bUnion, bUpdateHighlight);\n                    if(!bUnion) bUnion = true;\n                }\n                selectedResidues = {};\n                ++index;\n            }\n        }\n        else {\n            currName = prevName + '-';\n            selectedResidues[residueid] = 1;\n        }\n      } // end if( me.icn3d.residues.hasOwnProperty(residueid) ) {\n    } // for loop\n\n    if(Object.keys(selectedResidues).length > 0) {\n        setName = currName + 'Cterm)';\n        if(type == 'coil') {\n            me.selectResidueList(selectedResidues, setName, setName, bUnion, bUpdateHighlight);\n        }\n    }\n};\n\niCn3DUI.prototype.simplifyText = function(text) { var me = this;\n    var out = ''; // 1-based text positions\n    var bFoundText = false;\n\n    var i, prevEmptyPos = -1;\n    for(i = 0, il = text.length; i < il; ++i) {\n        if(text[i] == '-' || text[i] == ' ') {\n            if(bFoundText && i !== prevEmptyPos) {\n                if(prevEmptyPos+1 == i-1) {\n                    out += (prevEmptyPos+1 + 1).toString() + ' ' + text.substr(prevEmptyPos+1, i - 1 - prevEmptyPos) + ', ';\n               }\n                else {\n                    out += (prevEmptyPos+1 + 1).toString() + '-' + (i-1 + 1).toString() + ' ' + text.substr(prevEmptyPos+1, i - 1 - prevEmptyPos) + ', ';\n                }\n                bFoundText = false;\n            }\n\n            prevEmptyPos = i;\n        }\n        else {\n            bFoundText = true;\n        }\n    }\n\n    if(bFoundText && i == il) {\n        if(prevEmptyPos+1 == i-1) {\n            out += (prevEmptyPos+1 + 1).toString() + ' ' + text.substr(prevEmptyPos+1, i - 1 - prevEmptyPos) + ', ';\n        }\n        else {\n            out += (prevEmptyPos+1 + 1).toString() + '-' + (i-1 + 1).toString() + ' ' + text.substr(prevEmptyPos+1, i - 1 - prevEmptyPos) + ', ';\n        }\n    }\n\n    return out;\n};\n\niCn3DUI.prototype.alignSequenceToStructure = function(chainid, data, title) { var me = this;\n  var query, target;\n\n  if(data.data !== undefined) {\n      query = data.data[0].query;\n      target = data.data[0].targets[chainid.replace(/_/g, '')];\n\n      target = target.hsps[0];\n  }\n\n  var text = '';\n\n  if(query !== undefined && target !== undefined) {\n      var evalue = target.scores.e_value.toPrecision(2);\n      if(evalue > 1e-200) evalue = parseFloat(evalue).toExponential();\n\n      var bitscore = target.scores.bit_score;\n\n      var targetSeq = data.targets[chainid.replace(/_/g, '')].seqdata;\n      var querySeq = query.seqdata;\n\n      var segArray = target.segs;\n      var target2queryHash = {};\n      for(var i = 0, il = segArray.length; i < il; ++i) {\n          var seg = segArray[i];\n          for(var j = 0; j <= seg.orito - seg.orifrom; ++j) {\n              target2queryHash[j + seg.orifrom] = j + seg.from;\n          }\n      }\n\n      // the missing residuesatthe end ofthe seq will be filled up in the API showNewTrack()\n      for(var i = 0, il = targetSeq.length; i < il; ++i) {\n          if(target2queryHash.hasOwnProperty(i)) {\n              text += querySeq[target2queryHash[i]];\n          }\n          else {\n              text += '-';\n          }\n      }\n\n      title += ', E: ' + evalue;\n  }\n  else {\n      text += \"cannot be aligned\";\n  }\n\n  me.showNewTrack(chainid, title, text, undefined, target2queryHash);\n\n  me.setLogCmd(\"add track | chainid \" + chainid + \" | title \" + title + \" | text \" + me.simplifyText(text), true);\n};\n\niCn3DUI.prototype.clickAddTrackButton = function() { var me = this;\n    // ncbi gi/accession\n    $(document).on('click', \"#\" + me.pre + \"addtrack_button1\", function(e) {\n       e.stopImmediatePropagation();\n\n       //e.preventDefault();\n       dialog.dialog( \"close\" );\n\n       var chainid = $(\"#\" + me.pre + \"track_chainid\").val();\n\n       //var gi = $(\"#\" + me.pre + \"track_gi\").val().toUpperCase();\n       var gi = $(\"#\" + me.pre + \"track_gi\").val();\n       var title = (isNaN(gi)) ? 'Acc ' + gi : 'gi ' + gi;\n\n       //var text = $(\"#\" + me.pre + \"track_text\").val();\n       var url = 'https://www.ncbi.nlm.nih.gov/Structure/pwaln/pwaln.fcgi?from=track';\n\n       $.ajax({\n          url: url,\n          type: 'POST',\n          data : {'targets': chainid, 'queries': gi},\n          dataType: 'jsonp',\n          //dataType: 'json',\n          tryCount : 0,\n          retryLimit : 1,\n          success: function(data) {\n              me.alignSequenceToStructure(chainid, data, title);\n          },\n          error : function(xhr, textStatus, errorThrown ) {\n            this.tryCount++;\n            if (this.tryCount <= this.retryLimit) {\n                //try again\n                $.ajax(this);\n                return;\n            }\n            return;\n          }\n        });\n    });\n\n    // FASTA\n    $(document).on('click', \"#\" + me.pre + \"addtrack_button2\", function(e) {\n       e.stopImmediatePropagation();\n       //e.preventDefault();\n       dialog.dialog( \"close\" );\n\n       var chainid = $(\"#\" + me.pre + \"track_chainid\").val();\n\n       var fasta = $(\"#\" + me.pre + \"track_fasta\").val();\n       var title = 'fasta ' + fasta.substr(0, 5);\n\n       //var text = $(\"#\" + me.pre + \"track_text\").val();\n       var url = 'https://www.ncbi.nlm.nih.gov/Structure/pwaln/pwaln.fcgi?from=track';\n       $.ajax({\n          url: url,\n          type: 'POST',\n          data : {'targets': chainid, 'queries': fasta},\n          dataType: 'jsonp',\n          //dataType: 'json',\n          tryCount : 0,\n          retryLimit : 1,\n          success: function(data) {\n              me.alignSequenceToStructure(chainid, data, title);\n          },\n          error : function(xhr, textStatus, errorThrown ) {\n            this.tryCount++;\n            if (this.tryCount <= this.retryLimit) {\n                //try again\n                $.ajax(this);\n                return;\n            }\n            return;\n          }\n        });\n    });\n\n    // BED file\n    $(document).on('click', \"#\" + me.pre + \"addtrack_button3\", function(e) {\n       e.stopImmediatePropagation();\n       //e.preventDefault();\n       dialog.dialog( \"close\" );\n\n       var chainid = $(\"#\" + me.pre + \"track_chainid\").val();\n\n\n       var file = $(\"#\" + me.pre + \"track_bed\")[0].files[0];\n\n       if(!file) {\n         alert(\"Please select a file...\");\n       }\n       else {\n         if (!window.File || !window.FileReader || !window.FileList || !window.Blob) {\n            alert('The File APIs are not fully supported in this browser.');\n         }\n\n         var reader = new FileReader();\n         reader.onload = function (e) {\n           var dataStr = e.target.result; // or = reader.result;\n\n           var lineArray = dataStr.split('\\n');\n\n           var bItemRgb = false, bColorByStrand = false;\n           var strandRgbArray;\n           for(var i = 0, il = lineArray.length; i < il; ++i) {\n               if(lineArray[i].substr(0, 7) == 'browser') continue;\n\n               if(lineArray[i].substr(0, 5) == 'track') {\n                   if(lineArray[i].toLowerCase().indexOf('itemrgb') != -1) bItemRgb = true;\n                   if(lineArray[i].toLowerCase().indexOf('colorbystrand=') != -1) {\n                       bColorByStrand = true;\n\n                       //e.g., colorByStrand=\"255,0,0 0,0,255\"\n                       var pos = lineArray[i].toLowerCase().indexOf('colorbystrand=');\n                       var restStr = lineArray[i].substr(pos);\n                       var quotePos = restStr.indexOf('\"');\n                       if(quotePos != -1) {\n                         var quoteStr = restStr.substr(quotePos + 1);\n                         var quotePos2 = quoteStr.indexOf('\"');\n                         if(quotePos != -1) {\n                           var colorList = quoteStr.substr(0, quotePos2);\n                           strandRgbArray = colorList.split(' ');\n                         }\n                       }\n\n                   }\n               }\n               else { // tracks\n                      if(lineArray[i] == '') continue;\n                      var fieldArray = lineArray[i].replace(/\\s+/g, ' ').split(' ');\n\n                      if(fieldArray.length > 8 || fieldArray.length < 6) bColorByStrand = false;\n                      if(fieldArray.length < 9) bItemRgb = false;\n\n                      //https://genome.ucsc.edu/FAQ/FAQformat.html#format1\n                      var chromName = fieldArray[0];\n                      var chromStart = fieldArray[1];\n                      var chromEnd = fieldArray[2];\n                      var trackName = fieldArray[3];\n\n                      if(fieldArray.length > 4) var score = fieldArray[4];\n                      if(fieldArray.length > 5) var strand = fieldArray[5]; // ., +, or -\n                      if(fieldArray.length > 6) var thickStart = fieldArray[6];\n                      if(fieldArray.length > 7) var thickEnd = fieldArray[7];\n                      if(fieldArray.length > 8) var itemRgb = fieldArray[8];\n                      if(fieldArray.length > 9) var blockCount = fieldArray[9];\n                      if(fieldArray.length > 10) var blockSizes = fieldArray[10];\n                      if(fieldArray.length > 11) var blockStarts = fieldArray[11];\n\n                   var title = trackName;\n\n                   var rgbColor = '51,51,51';\n                   if(bItemRgb) {\n                       rgbColor = itemRgb;\n                   }\n                   else if(bColorByStrand) {\n                       if(strand == '+' && strandRgbArray.length > 0) {\n                           rgbColor = strandRgbArray[0];\n                       }\n                       else if(strand == '-' && strandRgbArray.length > 1) {\n                           rgbColor = strandRgbArray[1];\n                       }\n                       else if(strand == '.' && strandRgbArray.length > 2) {\n                           rgbColor = strandRgbArray[2];\n                       }\n                   }\n\n                   var text = '';\n                   var cssColorArray = [];\n                   for(var j = 0, jl = chromEnd; j < jl; ++j) {\n                       if(j < chromStart) {\n                           text += '-';\n                           cssColorArray.push('');\n                       }\n                       else {\n                           text += me.giSeq[chainid][j];\n                           cssColorArray.push('rgb(' + rgbColor + ')');\n                       }\n                   }\n\n                   me.showNewTrack(chainid, title, text, cssColorArray);\n\n                   me.setLogCmd(\"add track | chainid \" + chainid + \" | title \" + title + \" | text \" + me.simplifyText(text), true);\n               }\n           }\n         };\n\n         reader.readAsText(file);\n       }\n    });\n\n    // custom\n    $(document).on('click', \"#\" + me.pre + \"addtrack_button4\", function(e) {\n       e.stopImmediatePropagation();\n       //e.preventDefault();\n       dialog.dialog( \"close\" );\n\n       var chainid = $(\"#\" + me.pre + \"track_chainid\").val();\n       var title = $(\"#\" + me.pre + \"track_title\").val();\n       var text = $(\"#\" + me.pre + \"track_text\").val(); // input simplifyText\n\n       //me.showNewTrack(chainid, title, text);\n       //me.setLogCmd(\"add track | chainid \" + chainid + \" | title \" + title + \" | text \" + me.simplifyText(text), true);\n\n       me.showNewTrack(chainid, title,  me.getFullText(text));\n       me.setLogCmd(\"add track | chainid \" + chainid + \" | title \" + title + \" | text \" + text, true);\n    });\n\n    // current selection\n    $(document).on('click', \"#\" + me.pre + \"addtrack_button5\", function(e) {\n       e.stopImmediatePropagation();\n       //e.preventDefault();\n       dialog.dialog( \"close\" );\n\n       var chainid = $(\"#\" + me.pre + \"track_chainid\").val();\n       var title = $(\"#\" + me.pre + \"track_selection\").val();\n       var text = '';\n\n       var selectedAtoms = me.icn3d.intHash(me.icn3d.hAtoms, me.icn3d.chains[chainid]);\n\n       var residueHash = me.icn3d.getResiduesFromCalphaAtoms(selectedAtoms);\n\n       var cssColorArray = [];\n       for(var i = 0, il = me.giSeq[chainid].length; i < il; ++i) {\n          var cFull = me.giSeq[chainid][i];\n\n          var c = cFull;\n          if(cFull.length > 1) {\n              //c = cFull[0] + '..';\n              c = cFull[0]; // one letter for each residue\n          }\n\n          var pos = (i >= me.matchedPos[chainid] && i - me.matchedPos[chainid] < me.icn3d.chainsSeq[chainid].length) ? me.icn3d.chainsSeq[chainid][i - me.matchedPos[chainid]].resi : me.baseResi[chainid] + 1 + i;\n\n          if( residueHash.hasOwnProperty(chainid + '_' + pos) ) {\n              var atom = me.icn3d.getFirstCalphaAtomObj(me.icn3d.residues[chainid + '_' + pos]);\n              var color = atom.color.getHexString();\n\n              text += c;\n              cssColorArray.push('#' + color);\n          }\n          else {\n              text += '-';\n              cssColorArray.push('');\n          }\n       }\n\n       me.showNewTrack(chainid, title, text, cssColorArray);\n\n       me.setLogCmd(\"add track | chainid \" + chainid + \" | title \" + title + \" | text \" + me.simplifyText(text), true);\n    });\n\n};\n\niCn3DUI.prototype.showNewTrack = function(chnid, title, text, cssColorArray, target2queryHash) {  var me = this;\n    //if(me.customTracks[chnid] === undefined) {\n    //    me.customTracks[chnid] = {};\n    //}\n\n    var bErrorMess = false;\n    if(text == 'cannot be aligned') {\n        bErrorMess = true;\n    }\n\n    var textForCnt = text.replace(/-/g, '');\n    var resCnt = textForCnt.length;\n    if(resCnt > me.giSeq[chnid].length) {\n        resCnt = me.giSeq[chnid].length;\n    }\n\n    if(text.length > me.giSeq[chnid].length) {\n        text = text.substr(0, me.giSeq[chnid].length);\n    }\n    else if(text.length < me.giSeq[chnid].length && !bErrorMess) {\n        // .fill is not supported in IE\n        //var extra = Array(me.giSeq[chnid].length - text.length).fill(' ').join('');\n        var extra = '';\n        for(var i = 0, il = me.giSeq[chnid].length - text.length; i < il; ++i) {\n            extra += '-';\n        }\n\n        text += extra;\n    }\n\n    var simpTitle = title.replace(/\\s/g, '_').replace(/\\./g, 'dot').replace(/\\W/g, '');\n    if(simpTitle.length > 20) simpTitle = simpTitle.substr(0, 20);\n\n    //me.customTracks[chnid][simpTitle] = text;\n\n    var divLength = me.RESIDUE_WIDTH * text.length + 200;\n\n    $(\"#\" + me.pre + \"dt_custom_\" + chnid).append(\"<div id='\" + me.pre + \"dt_custom_\" + chnid + \"_\" + simpTitle + \"'></div>\");\n    $(\"#\" + me.pre + \"dt_custom_\" + chnid + \"_\" + simpTitle).width(divLength);\n\n    $(\"#\" + me.pre + \"ov_custom_\" + chnid).append(\"<div id='\" + me.pre + \"ov_custom_\" + chnid + \"_\" + simpTitle + \"'></div>\");\n    $(\"#\" + me.pre + \"ov_custom_\" + chnid + \"_\" + simpTitle).width(divLength);\n\n    $(\"#\" + me.pre + \"tt_custom_\" + chnid).append(\"<div id='\" + me.pre + \"tt_custom_\" + chnid + \"_\" + simpTitle + \"'></div>\");\n    $(\"#\" + me.pre + \"tt_custom_\" + chnid + \"_\" + simpTitle).width(divLength);\n\n    var html = '<div id=\"' + me.pre + 'giseq_sequence\" class=\"icn3d-dl_sequence\">';\n    var html2 = html;\n    var html3 = html;\n\n    //var htmlTmp2 = '<div class=\"icn3d-seqTitle icn3d-link icn3d-blue\" gi=\"' + chnid + '\" anno=\"sequence\" chain=\"' + chnid + '\"><span style=\"white-space:nowrap;\">' + title + '</span></div>';\n    var htmlTmp2 = '<div class=\"icn3d-seqTitle\" gi=\"' + chnid + '\" anno=\"sequence\" chain=\"' + chnid + '\"><span style=\"white-space:nowrap;\">' + title + '</span></div>';\n    var htmlTmp3 = '<span class=\"icn3d-residueNum\" title=\"residue count\">' + resCnt.toString() + ' Pos</span>';\n\n    html3 += htmlTmp2 + htmlTmp3 + '<br>';\n\n    var htmlTmp = '<span class=\"icn3d-seqLine\">';\n\n    html += htmlTmp2 + htmlTmp3 + htmlTmp;\n    html2 += htmlTmp2 + htmlTmp3 + htmlTmp;\n\n    //var pre ='cst' + me.customTracks[chnid].length;\n    var posTmp = chnid.indexOf('_');\n    var pre ='cst' + chnid.substr(posTmp);\n\n    var prevEmptyWidth = 0;\n    var prevLineWidth = 0;\n    var widthPerRes = 1;\n\n    for(var i = 0, il = text.length; i < il; ++i) {\n      html += me.insertGap(chnid, i, '-');\n\n      var c = text.charAt(i);\n\n      if(c != ' ' && c != '-') {\n          //var pos = me.icn3d.chainsSeq[chnid][i - me.matchedPos[chnid] ].resi;\n          var pos = me.icn3d.chainsSeq[chnid][i].resi - me.matchedPos[chnid];\n\n          if(target2queryHash !== undefined) pos = target2queryHash[i] + 1; // 0-based\n\n          if(cssColorArray !== undefined && cssColorArray[i] != '') {\n              html += '<span id=\"' + pre + '_' + me.pre + chnid + '_' + pos + '\" title=\"' + c + pos + '\" class=\"icn3d-residue\" style=\"color:' + cssColorArray[i] + '\">' + c + '</span>';\n          }\n          else {\n              html += '<span id=\"' + pre + '_' + me.pre + chnid + '_' + pos + '\" title=\"' + c + pos + '\" class=\"icn3d-residue\">' + c + '</span>';\n          }\n\n          html2 += me.insertGapOverview(chnid, i);\n\n          var emptyWidth = (me.cfg.blast_rep_id == chnid) ? Math.round(me.seqAnnWidth * i / (me.maxAnnoLength + me.nTotalGap) - prevEmptyWidth - prevLineWidth) : Math.round(me.seqAnnWidth * i / me.maxAnnoLength - prevEmptyWidth - prevLineWidth);\n          if(emptyWidth < 0) emptyWidth = 0;\n\n          html2 += '<div style=\"display:inline-block; width:' + emptyWidth + 'px;\">&nbsp;</div>';\n          if(cssColorArray !== undefined && cssColorArray[i] != '') {\n              html2 += '<div style=\"display:inline-block; background-color:' + cssColorArray[i] + '; width:' + widthPerRes + 'px;\" title=\"' + c + (i+1).toString() + '\">&nbsp;</div>';\n          }\n          else {\n              html2 += '<div style=\"display:inline-block; background-color:#333; width:' + widthPerRes + 'px;\" title=\"' + c + (i+1).toString() + '\">&nbsp;</div>';\n          }\n\n          prevEmptyWidth += emptyWidth;\n          prevLineWidth += widthPerRes;\n      }\n      else {\n          if(bErrorMess) {\n              html += '<span>' + c + '</span>';\n          }\n          else {\n            html += '<span>-</span>';\n          }\n      }\n    }\n    var htmlTmp = '<span class=\"icn3d-residueNum\" title=\"residue count\">' + resCnt.toString() + ' Pos</span>';\n    htmlTmp += '</span>';\n    htmlTmp += '<br>';\n\n    htmlTmp += '</div>';\n\n    html += htmlTmp;\n    html2 += htmlTmp;\n\n    html3 += '</div>';\n\n    $(\"#\" + me.pre + \"dt_custom_\" + chnid + \"_\" + simpTitle).html(html);\n    $(\"#\" + me.pre + \"ov_custom_\" + chnid + \"_\" + simpTitle).html(html2);\n    $(\"#\" + me.pre + \"tt_custom_\" + chnid + \"_\" + simpTitle).html(html3);\n};\n\niCn3DUI.prototype.checkGiSeq = function (chainid, title, text, index) { var me = this;\n    if(index > 20) return false;\n\n    if(me.giSeq !== undefined && me.giSeq[chainid] !== undefined) {\n        text = me.getFullText(text);\n        me.showNewTrack(chainid, title, text);\n        return false;\n    }\n\n    // wait for me.giSeq to be available\n    setTimeout(function(){ me.checkGiSeq(chainid, title, text, index + 1); }, 100);\n};\n\niCn3DUI.prototype.getFullText = function (text) { var me = this;\n    var out = '';\n\n    var textArray = text.split(',');\n    var lastTextPos = -1;\n    for(var i = 0, il = textArray.length; i < il; ++i) {\n        var eachText = textArray[i].trim();\n        if(eachText.length == 0) continue;\n\n        var range_text = eachText.split(' ');\n        if(range_text.length !== 2) continue;\n\n        var rangeText = range_text[1];\n        var start_end = range_text[0].split('-');\n\n        var start, end;\n        if(start_end.length == 2) {\n            start = start_end[0] - 1; // 1-based\n            end = start_end[1] - 1;\n        }\n        else if(start_end.length == 1) {\n            start = start_end[0] - 1;\n            end = start;\n        }\n        else {\n            continue;\n        }\n\n        // previous empty text\n        for(var j = 0; j < start - lastTextPos - 1; ++j) {\n            out += '-';\n        }\n\n        var range = end - start + 1;\n\n        if(rangeText.length > range) {\n             out += rangeText.substr(0, range);\n        }\n        else {\n             out += rangeText;\n        }\n\n        // fill up rangeText\n        for(var j = 0; j < range - rangeText.length; ++j) {\n            out += '-';\n        }\n\n        lastTextPos = end;\n    }\n\n    return out;\n};\n\n/**\n * @author Jiyao Wang <wangjiy@ncbi.nlm.nih.gov> / https://github.com/ncbi/icn3d\n */\n\niCn3DUI.prototype.clickShow_selected = function() { var me = this;\n    $(\"#\" + me.pre + \"show_selected\").add(\"#\" + me.pre + \"mn2_show_selected\").click(function(e) {\n       //me.setLogCmd(\"show selection\", true);\n\n       me.showSelection();\n       me.setLogCmd(\"show selection\", true);\n    });\n};\n\niCn3DUI.prototype.showSelection = function (id) { var me = this;\n    me.icn3d.dAtoms = {};\n\n    me.icn3d.dAtoms = me.icn3d.cloneHash(me.icn3d.hAtoms);\n\n    var centerAtomsResults = me.icn3d.centerAtoms(me.icn3d.hash2Atoms(me.icn3d.dAtoms));\n    me.icn3d.maxD = centerAtomsResults.maxD;\n    if (me.icn3d.maxD < 5) me.icn3d.maxD = 5;\n\n    //show selected rotationcenter\n    me.icn3d.opts['rotationcenter'] = 'display center';\n\n    // clear hbonds and ssbonds?\n    //me.icn3d.opts['hbonds'] = 'no';\n    //me.icn3d.opts['ssbonds'] = 'no';\n\n    //me.icn3d.lines['hbond'] = [];\n    //me.icn3d.lines['ssbond'] = [];\n\n    me.saveSelectionIfSelected();\n\n    me.icn3d.draw();\n\n    me.update2DdgmContent();\n    me.updateHl2D();\n\n    // show selected chains in annotation window\n    me.showAnnoSelectedChains();\n};\n\niCn3DUI.prototype.clickModeswitch = function() { var me = this;\n    $(\"#\" + me.pre + \"modeswitch\").click(function (e) {\n        if($(\"#\" + me.pre + \"modeswitch\")[0].checked) { // mode: selection\n            me.setModeAndDisplay('selection');\n        }\n        else { // mode: all\n            me.setModeAndDisplay('all');\n        }\n    });\n\n    $(\"#\" + me.pre + \"mn6_modeall\").click(function (e) {\n        me.setModeAndDisplay('all');\n    });\n\n    $(\"#\" + me.pre + \"mn6_modeselection\").click(function (e) {\n        me.setModeAndDisplay('selection');\n    });\n};\n\niCn3DUI.prototype.selectAll = function() { var me = this;\n    me.icn3d.hAtoms = {};\n\n    for(var i in me.icn3d.chains) {\n       me.icn3d.hAtoms = me.icn3d.unionHash(me.icn3d.hAtoms, me.icn3d.chains[i]);\n       me.icn3d.dAtoms = me.icn3d.unionHash(me.icn3d.dAtoms, me.icn3d.chains[i]);\n    }\n\n    me.icn3d.removeHlObjects();\n    me.removeHl2D();\n    me.removeHlMenus();\n\n    me.bSelectResidue = false;\n    me.bSelectAlignResidue = false;\n\n    me.removeSeqResidueBkgd();\n    me.update2DdgmContent();\n\n    // show annotations for all protein chains\n    $(\"#\" + me.pre + \"dl_annotations > .icn3d-annotation\").show();\n\n    me.setMode('all');\n};\n\niCn3DUI.prototype.setModeAndDisplay = function(mode) { var me = this;\n    if(mode === 'all') { // mode all\n        me.setMode('all');\n\n        // remember previous selection\n        me.icn3d.prevHighlightAtoms = me.icn3d.cloneHash(me.icn3d.hAtoms);\n\n       // select all\n       me.setLogCmd(\"set mode all\", true);\n\n       me.selectAll();\n\n       me.icn3d.draw();\n    }\n    else { // mode selection\n        me.setMode('selection');\n\n        // get the previous hAtoms\n        if(me.icn3d.prevHighlightAtoms !== undefined) {\n            me.icn3d.hAtoms = me.icn3d.cloneHash(me.icn3d.prevHighlightAtoms);\n        }\n        else {\n            me.selectAll();\n        }\n\n        me.setLogCmd(\"set mode selection\", true);\n\n        me.updateHlAll();\n    }\n};\n\niCn3DUI.prototype.setMode = function(mode) { var me = this;\n    if(mode === 'all') { // mode all\n        // set text\n        $(\"#\" + me.pre + \"modeall\").show();\n        $(\"#\" + me.pre + \"modeselection\").hide();\n\n        $(\"#\" + me.pre + \"modeswitch\")[0].checked = false;\n\n        if($(\"#\" + me.pre + \"style\").hasClass('icn3d-modeselection')) $(\"#\" + me.pre + \"style\").removeClass('icn3d-modeselection');\n        if($(\"#\" + me.pre + \"color\").hasClass('icn3d-modeselection')) $(\"#\" + me.pre + \"color\").removeClass('icn3d-modeselection');\n        //if($(\"#\" + me.pre + \"surface\").hasClass('icn3d-modeselection')) $(\"#\" + me.pre + \"surface\").removeClass('icn3d-modeselection');\n    }\n    else { // mode selection\n        //if(Object.keys(me.icn3d.hAtoms).length < Object.keys(me.icn3d.atoms).length) {\n            // set text\n            $(\"#\" + me.pre + \"modeall\").hide();\n            $(\"#\" + me.pre + \"modeselection\").show();\n\n            $(\"#\" + me.pre + \"modeswitch\")[0].checked = true;\n\n            if(!$(\"#\" + me.pre + \"style\").hasClass('icn3d-modeselection')) $(\"#\" + me.pre + \"style\").addClass('icn3d-modeselection');\n            if(!$(\"#\" + me.pre + \"color\").hasClass('icn3d-modeselection')) $(\"#\" + me.pre + \"color\").addClass('icn3d-modeselection');\n            //if(!$(\"#\" + me.pre + \"surface\").hasClass('icn3d-modeselection')) $(\"#\" + me.pre + \"surface\").addClass('icn3d-modeselection');\n\n            // show selected chains in annotation window\n            //me.showAnnoSelectedChains();\n        //}\n    }\n};\n\niCn3DUI.prototype.saveSelection = function(name, description) { var me = this;\n    me.selectedResidues = {};\n\n    //for(var i in me.icn3d.hAtoms) {\n    //  if(me.icn3d.hAtoms[i] !== undefined) {\n    //    var residueid = me.icn3d.atoms[i].structure + '_' + me.icn3d.atoms[i].chain + '_' + me.icn3d.atoms[i].resi;\n    //    me.selectedResidues[residueid] = 1;\n    //  }\n    //}\n\n    me.selectedResidues = me.icn3d.getResiduesFromCalphaAtoms(me.icn3d.hAtoms);\n\n    if(Object.keys(me.selectedResidues).length > 0) {\n        me.selectResidueList(me.selectedResidues, name, description);\n        //me.updateHlAll();\n\n        me.updateSelectionNameDesc();\n\n        //me.setLogCmd('select ' + me.residueids2spec(Object.keys(me.selectedResidues)) + ' | name ' + name + ' | description ' + description, true);\n        me.setLogCmd('select ' + me.residueids2spec(Object.keys(me.selectedResidues)) + ' | name ' + name, true);\n    }\n};\n\niCn3DUI.prototype.removeSelection = function() { var me = this;\n    if(!me.bAnnotations) {\n        me.removeSeqChainBkgd();\n    }\n    //else {\n    //    me.removeSeqChainBkgd();\n    //}\n\n    if(!me.icn3d.bCtrl && !me.icn3d.bShift) {\n        me.removeSeqResidueBkgd();\n\n        me.removeSeqChainBkgd();\n    }\n\n//      me.removeSeqChainBkgd();\n//      me.removeSeqResidueBkgd();\n\n      me.selectedResidues = {};\n      me.bSelectResidue = false;\n\n      me.icn3d.hAtoms = {};\n\n      me.icn3d.removeHlObjects();\n\n      me.removeHl2D();\n};\n\niCn3DUI.prototype.updateSelectionNameDesc = function() { var me = this;\n    var numDef = Object.keys(me.icn3d.defNames2Residues).length + Object.keys(me.icn3d.defNames2Atoms).length;\n\n    $(\"#\" + me.pre + \"seq_command_name\").val(\"seq_\" + numDef);\n    //$(\"#\" + me.pre + \"seq_command_desc\").val(\"seq_desc_\" + numDef);\n\n    $(\"#\" + me.pre + \"seq_command_name2\").val(\"seq_\" + numDef);\n    //$(\"#\" + me.pre + \"seq_command_desc2\").val(\"seq_desc_\" + numDef);\n\n    $(\"#\" + me.pre + \"alignseq_command_name\").val(\"alseq_\" + numDef);\n    //$(\"#\" + me.pre + \"alignseq_command_desc\").val(\"alseq_desc_\" + numDef);\n};\n\niCn3DUI.prototype.selectAChain = function (chainid, commandname, bAlign, bUnion) { var me = this;\n    var commandname = commandname.replace(/\\s/g, '');\n    var command = (bAlign !== undefined || bAlign) ? 'select alignChain ' + chainid : 'select chain ' + chainid;\n\n    //var residueHash = {}, chainHash = {};\n\n    if(bUnion === undefined || !bUnion) {\n        me.icn3d.hAtoms = {};\n        me.menuHlHash = {};\n    }\n    else {\n        me.icn3d.hAtoms = me.icn3d.unionHash(me.icn3d.hAtoms, me.icn3d.chains[chainid]);\n\n        if(me.menuHlHash === undefined) me.menuHlHash = {};\n    }\n\n    me.menuHlHash[chainid] = 1;\n\n    //chainHash[chainid] = 1;\n\n    var chnsSeq = (bAlign) ? me.icn3d.alnChainsSeq[chainid] : me.icn3d.chainsSeq[chainid];\n\n    var oriResidueHash = {};\n    for(var i = 0, il = chnsSeq.length; i < il; ++i) { // get residue number\n        var resObj = chnsSeq[i];\n        var residueid = chainid + \"_\" + resObj.resi;\n\n        var value = resObj.name;\n\n        if(value !== '' && value !== '-') {\n          oriResidueHash[residueid] = 1;\n          for(var j in me.icn3d.residues[residueid]) {\n            me.icn3d.hAtoms[j] = 1;\n          }\n        }\n    }\n\n    if((me.icn3d.defNames2Atoms === undefined || !me.icn3d.defNames2Atoms.hasOwnProperty(chainid)) && (me.icn3d.defNames2Residues === undefined || !me.icn3d.defNames2Residues.hasOwnProperty(chainid)) ) {\n        me.addCustomSelection(Object.keys(oriResidueHash), commandname, commandname, command, true);\n    }\n\n    var bForceHighlight = true;\n\n    if(bAlign) {\n        me.updateHlAll(undefined, undefined, bUnion, bForceHighlight);\n    }\n    else {\n        me.updateHlAll(Object.keys(me.menuHlHash), undefined, bUnion, bForceHighlight);\n    }\n\n//        me.icn3d.addHlObjects();\n//        me.updateHl2D(Object.keys(chainHash));\n};\n\niCn3DUI.prototype.selectResidueList = function (residueHash, commandname, commanddescr, bUnion, bUpdateHighlight) { var me = this;\n  if(Object.keys(residueHash).length > 0) {\n    var chainHash = {};\n    if(bUnion === undefined || !bUnion) {\n        me.icn3d.hAtoms = {};\n        me.menuHlHash = {};\n    }\n    else {\n        if(me.menuHlHash === undefined) me.menuHlHash = {};\n    }\n\n    for(var i in residueHash) {\n        for(var j in me.icn3d.residues[i]) {\n          me.icn3d.hAtoms[j] = 1;\n        }\n    }\n\n    var commandname = commandname.replace(/\\s/g, '');\n\n    me.menuHlHash[commandname] = 1;\n\n    var select = \"select \" + me.residueids2spec(Object.keys(residueHash));\n\n    var oriResidueArray = Object.keys(residueHash);\n\n    //if( (me.icn3d.defNames2Atoms === undefined || !me.icn3d.defNames2Atoms.hasOwnProperty(commandname)) && (me.icn3d.defNames2Residues === undefined || !me.icn3d.defNames2Residues.hasOwnProperty(commandname)) ) {\n        me.addCustomSelection(oriResidueArray, commandname, commanddescr, select, true);\n    //}\n\n    if(bUpdateHighlight === undefined || bUpdateHighlight) me.updateHlAll(Object.keys(me.menuHlHash), undefined, bUnion);\n  }\n};\n\niCn3DUI.prototype.addCustomSelection = function (residueAtomArray, commandname, commanddesc, select, bSelectResidues) { var me = this;\n    if(bSelectResidues) {\n        me.icn3d.defNames2Residues[commandname] = residueAtomArray;\n    }\n    else {\n        me.icn3d.defNames2Atoms[commandname] = residueAtomArray;\n    }\n\n    me.icn3d.defNames2Command[commandname] = select;\n    me.icn3d.defNames2Descr[commandname] = commanddesc;\n\n    me.updateHlMenus([commandname]);\n};\n\niCn3DUI.prototype.selectSideChains = function () { var me = this;\n    var currHAtoms = me.icn3d.cloneHash(me.icn3d.hAtoms);\n\n    me.icn3d.hAtoms = {};\n    for(var i in currHAtoms) {\n        if(me.icn3d.proteins.hasOwnProperty(i) && me.icn3d.atoms[i].name !== 'CA') {\n            me.icn3d.hAtoms[i] = 1;\n        }\n    }\n\n    me.showHighlight();\n};\n\n/**\n * @author Jiyao Wang <wangjiy@ncbi.nlm.nih.gov> / https://github.com/ncbi/icn3d\n */\n\niCn3DUI.prototype.clickCommand_apply = function() { var me = this;\n    $(\"#\" + me.pre + \"command_apply\").click(function(e) {\n       e.preventDefault();\n\n       var select = $(\"#\" + me.pre + \"command\").val();\n\n       var commandname = $(\"#\" + me.pre + \"command_name\").val().replace(/;/g, '_').replace(/\\s+/g, '_');\n       //var commanddesc = $(\"#\" + me.pre + \"command_desc\").val().replace(/;/g, '_').replace(/\\s+/g, '_');\n\n       me.selectByCommand(select, commandname, commandname);\n       //me.setLogCmd('select ' + select + ' | name ' + commandname + ' | description ' + commanddesc, true);\n       me.setLogCmd('select ' + select + ' | name ' + commandname, true);\n    });\n\n    $(\"#\" + me.pre + \"command_apply2\").click(function(e) {\n       e.preventDefault();\n\n       var select = $(\"#\" + me.pre + \"command2\").val();\n\n       var commandname = $(\"#\" + me.pre + \"command_name2\").val().replace(/;/g, '_').replace(/\\s+/g, '_');\n       //var commanddesc = $(\"#\" + me.pre + \"command_desc\").val().replace(/;/g, '_').replace(/\\s+/g, '_');\n\n       me.selectByCommand(select, commandname, commandname);\n       //me.setLogCmd('select ' + select + ' | name ' + commandname + ' | description ' + commanddesc, true);\n       me.setLogCmd('select ' + select + ' | name ' + commandname, true);\n    });\n\n};\n\niCn3DUI.prototype.selectCombinedSets = function(strSets, commandname) { var me = this;\n    var idArray = strSets.split(' ');\n\n    var orArray = [], andArray = [], notArray = [];\n    var prevLabel = 'or';\n\n    for(var i = 0, il = idArray.length; i < il; ++i) {\n        if(idArray[i] === 'or' || idArray[i] === 'and' || idArray[i] === 'not') {\n            prevLabel = idArray[i];\n            continue;\n        }\n        else {\n            if(prevLabel === 'or') {\n                orArray.push(idArray[i]);\n            }\n            else if(prevLabel === 'and') {\n                andArray.push(idArray[i]);\n            }\n            else if(prevLabel === 'not') {\n                notArray.push(idArray[i]);\n            }\n        }\n    }\n\n    if(idArray !== null) me.combineSets(orArray, andArray, notArray, commandname);\n};\n\niCn3DUI.prototype.selectByCommand = function (select, commandname, commanddesc) { var me = this;\n       if(select.indexOf('saved atoms') === 0) {\n            var pos = 12; // 'saved atoms '\n            var strSets = select.substr(pos);\n\n            me.selectCombinedSets(strSets, commandname);\n       }\n       else {\n           var selectTmp = select.replace(/ AND /g, ' and ').replace(/ OR /g, ' or ').replace(/ or and /g, ' and ').replace(/ and /g, ' or and ').replace(/ or not /g, ' not ').replace(/ not /g, ' or not ');\n\n           var commandStr = (selectTmp.trim().substr(0, 6) === 'select') ? selectTmp.trim().substr(7) : selectTmp.trim();\n\n           // each select command may have several commands separated by ' or '\n           var commandArray = commandStr.split(' or ');\n           var allHighlightAtoms = {};\n\n           for(var i = 0, il = commandArray.length; i < il; ++i) {\n               var command = commandArray[i].trim().replace(/\\s+/g, ' ');\n               var pos = command.indexOf(' ');\n\n               me.icn3d.hAtoms = {};\n\n               if(command.substr(0, pos).toLowerCase() === 'and') { // intersection\n                       me.applyCommand('select ' + command.substr(pos + 1));\n\n                       allHighlightAtoms = me.icn3d.intHash(allHighlightAtoms, me.icn3d.hAtoms);\n               }\n               else if(command.substr(0, pos).toLowerCase() === 'not') { // negation\n                       me.applyCommand('select ' + command.substr(pos + 1));\n\n                       allHighlightAtoms = me.icn3d.exclHash(allHighlightAtoms, me.icn3d.hAtoms);\n               }\n               else { // union\n                       me.applyCommand('select ' + command);\n\n                       allHighlightAtoms = me.icn3d.unionHash(allHighlightAtoms, me.icn3d.hAtoms);\n               }\n           }\n\n           me.icn3d.hAtoms = me.icn3d.cloneHash(allHighlightAtoms);\n\n           var atomArray = Object.keys(me.icn3d.hAtoms);\n           var residueArray = undefined;\n\n           if(commandname !== \"\") {\n               me.addCustomSelection(atomArray, commandname, commanddesc, select, false);\n\n               var nameArray = [commandname];\n               //me.changeCustomResidues(nameArray);\n\n               me.changeCustomAtoms(nameArray);\n           }\n       }\n};\n\niCn3DUI.prototype.selectBySpec = function (select, commandname, commanddesc, bDisplay) { var me = this;\n   select = (select.trim().substr(0, 6) === 'select') ? select.trim().substr(7) : select.trim();\n\n   me.icn3d.hAtoms = {};\n\n   // selection definition is similar to Chimera: https://www.cgl.ucsf.edu/chimera/docs/UsersGuide/midas/frameatom_spec.html\n   // There will be no ' or ' in the spec. It's already separated in selectByCommand()\n   // There could be ' and ' in the spec.\n   var commandArray = select.replace(/\\s+/g, ' ').replace(/ AND /g, ' and ').split(' and ');\n\n   var residueHash = {};\n   var atomHash = {};\n\n   var bSelectResidues = true;\n   for(var i = 0, il=commandArray.length; i < il; ++i) {\n       //$1,2,3.A,B,C:5-10,LYS,chemicals@CA,C\n       // $1,2,3: Structure\n       // .A,B,C: chain\n       // :5-10,LYS,chemicals: residues, could be 'proteins', 'nucleotides', 'chemicals', 'ions', and 'water'\n       // @CA,C: atoms\n       // wild card * can be used to select all\n       //var currHighlightAtoms = {};\n\n       var dollarPos = commandArray[i].indexOf('$');\n       var periodPos = commandArray[i].indexOf('.');\n       var colonPos = commandArray[i].indexOf(':');\n       var atPos = commandArray[i].indexOf('@');\n\n       var moleculeStr, chainStr, residueStr, atomStr;\n       var testStr = commandArray[i];\n\n       if(atPos === -1) {\n         atomStr = \"*\";\n       }\n       else {\n         atomStr = testStr.substr(atPos + 1);\n         testStr = testStr.substr(0, atPos);\n       }\n\n       if(colonPos === -1) {\n         residueStr = \"*\";\n       }\n       else {\n         residueStr = testStr.substr(colonPos + 1);\n         testStr = testStr.substr(0, colonPos);\n       }\n\n       if(periodPos === -1) {\n         chainStr = \"*\";\n       }\n       else {\n         chainStr = testStr.substr(periodPos + 1);\n         testStr = testStr.substr(0, periodPos);\n       }\n\n       if(dollarPos === -1) {\n         moleculeStr = \"*\";\n       }\n       else {\n         moleculeStr = testStr.substr(dollarPos + 1);\n         testStr = testStr.substr(0, dollarPos);\n       }\n\n       if(atomStr !== '*') {\n         bSelectResidues = false; // selected atoms\n       }\n\n       var molecule, chain, molecule_chain, moleculeArray=[], Molecule_ChainArray=[], start, end;\n\n       if(moleculeStr === '*') {\n         moleculeArray = Object.keys(me.icn3d.structures);\n       }\n       else {\n         moleculeArray = moleculeStr.split(\",\")\n       }\n\n       if(chainStr === '*') {\n         var tmpArray = Object.keys(me.icn3d.chains);  // 1_A (molecule_chain)\n\n         for(var j = 0, jl = tmpArray.length; j < jl; ++j) {\n           molecule_chain = tmpArray[j];\n\n           molecule = molecule_chain.substr(0, molecule_chain.indexOf('_'));\n           if(moleculeArray.toString().toLowerCase().indexOf(molecule.toLowerCase()) !== -1) {\n             Molecule_ChainArray.push(molecule_chain);\n           }\n         }\n       }\n       else {\n         for(var j = 0, jl = moleculeArray.length; j < jl; ++j) {\n           molecule = moleculeArray[j];\n\n           var chainArray = chainStr.split(\",\");\n           for(var k in chainArray) {\n             Molecule_ChainArray.push(molecule + '_' + chainArray[k]);\n           }\n         }\n       }\n\n       var residueStrArray = residueStr.split(',');\n       for(var j = 0, jl = residueStrArray.length; j < jl; ++j) {\n           var bResidueId = false;\n\n           var hyphenPos = residueStrArray[j].indexOf('-');\n\n           var oneLetterResidueStr;\n           var bAllResidues = false;\n           var bResidueArray = false;\n\n           if(hyphenPos !== -1) {\n             start = residueStrArray[j].substr(0, hyphenPos);\n             end = residueStrArray[j].substr(hyphenPos+1);\n             bResidueId = true;\n           }\n           else {\n             if(residueStrArray[j] !== '' && !isNaN(residueStrArray[j])) { // residue id\n               start = residueStrArray[j];\n               end = start;\n               bResidueId = true;\n             }\n             else if(residueStrArray[j] === '*') { // all resiues\n               bAllResidues = true;\n             }\n             else if(residueStrArray[j] !== 'proteins' && residueStrArray[j] !== 'nucleotides' && residueStrArray[j] !== 'chemicals' && residueStrArray[j] !== 'ions' && residueStrArray[j] !== 'water') { // residue name\n               var tmpStr = residueStrArray[j].toUpperCase();\n               //oneLetterResidue = (residueStrArray[j].length === 1) ? tmpStr : me.icn3d.residueName2Abbr(tmpStr);\n               oneLetterResidueStr = tmpStr;\n               bResidueArray = true;\n             }\n           }\n\n           for(var mc = 0, mcl = Molecule_ChainArray.length; mc < mcl; ++mc) {\n             molecule_chain = Molecule_ChainArray[mc];\n\n             if(bResidueId) {\n               for(var k = parseInt(start); k <= parseInt(end); ++k) {\n                 var residueId = molecule_chain + '_' + k;\n                 if(i === 0) {\n                      residueHash[residueId] = 1;\n                 }\n                 else {\n                     // if not exit previously, \"and\" operation will remove this one\n                     //if(!residueHash.hasOwnProperty(residueId)) residueHash[residueId] = undefined;\n                     if(!residueHash.hasOwnProperty(residueId)) delete residueHash[residueId];\n                 }\n\n                 for(var m in me.icn3d.residues[residueId]) {\n                   if(atomStr === '*' || atomStr === me.icn3d.atoms[m].name) {\n                     if(i === 0) {\n                         //currHighlightAtoms[m] = 1;\n                         atomHash[m] = 1;\n                     }\n                     else {\n                         //if(!currHighlightAtoms.hasOwnProperty(m)) currHighlightAtoms[m] = undefined;\n                         //if(!atomHash.hasOwnProperty(m)) atomHash[m] = undefined;\n                         if(!atomHash.hasOwnProperty(m)) delete atomHash[m];\n                     }\n                   }\n                 }\n               }\n             }\n             else {\n               if(molecule_chain in me.icn3d.chains) {\n                 var chainAtomHash = me.icn3d.chains[molecule_chain];\n                 for(var m in chainAtomHash) {\n                   // residue could also be 'proteins', 'nucleotides', 'chemicals', 'ions', and 'water'\n                   var tmpStr = me.icn3d.atoms[m].resn.substr(0,3).toUpperCase();\n                   if(bAllResidues\n                       //|| me.icn3d.residueName2Abbr(tmpStr) === oneLetterResidue\n                       || (residueStrArray[j] === 'proteins' && m in me.icn3d.proteins)\n                       || (residueStrArray[j] === 'nucleotides' && m in me.icn3d.nucleotides)\n                       || (residueStrArray[j] === 'chemicals' && m in me.icn3d.chemicals)\n                       || (residueStrArray[j] === 'ions' && m in me.icn3d.ions)\n                       || (residueStrArray[j] === 'water' && m in me.icn3d.water)\n                       ) {\n                     // many duplicates\n                     if(i === 0) {\n                         residueHash[molecule_chain + '_' + me.icn3d.atoms[m].resi] = 1;\n                     }\n                     else {\n                         var residTmp = molecule_chain + '_' + me.icn3d.atoms[m].resi;\n                         //if(!residueHash.hasOwnProperty(residTmp)) residueHash[residTmp] = undefined;\n                         if(!residueHash.hasOwnProperty(residTmp)) delete residueHash[residTmp];\n                     }\n\n                     if(atomStr === '*' || atomStr === me.icn3d.atoms[m].name) {\n                         if(i === 0) {\n                             //currHighlightAtoms[m] = 1;\n                             atomHash[m] = 1;\n                         }\n                         else {\n                             //if(!currHighlightAtoms.hasOwnProperty(m)) currHighlightAtoms[m] = undefined;\n                             //if(!atomHash.hasOwnProperty(m)) atomHash[m] = undefined;\n                             if(!atomHash.hasOwnProperty(m)) delete atomHash[m];\n                         }\n                     }\n\n                   }\n                 } // end for(var m in atomHash) {\n\n                 if(bResidueArray) {\n                   //oneLetterResidueStr.length;\n                   var chainSeq = '', resiArray = [];\n                   for(var s = 0, sl = me.icn3d.chainsSeq[molecule_chain].length; s < sl;  ++s) {\n                       chainSeq += (me.icn3d.chainsSeq[molecule_chain][s].name.length == 1) ? me.icn3d.chainsSeq[molecule_chain][s].name : me.icn3d.chainsSeq[molecule_chain][s].name.substr(0, 1);\n                       resiArray.push(me.icn3d.chainsSeq[molecule_chain][s].resi);\n                   }\n\n                   chainSeq = chainSeq.toUpperCase();\n\n                   var seqReg = oneLetterResidueStr.replace(/x/gi, \".\");\n                   var posArray = [];\n\n                   var searchReg = new RegExp(seqReg, 'i');\n\n                   var targetStr = chainSeq;\n                   var pos = targetStr.search(searchReg);\n                   var sumPos = pos;\n                   while(pos !== -1) {\n                       posArray.push(sumPos);\n                       targetStr = targetStr.substr(pos + 1);\n                       pos = targetStr.search(searchReg);\n                       sumPos += pos + 1;\n                   }\n\n                   for(var s = 0, sl = posArray.length; s < sl; ++s) {\n                       var pos = posArray[s];\n\n                       for(var t = 0, tl = oneLetterResidueStr.length; t < tl;  ++t) {\n                         var residueId = molecule_chain + '_' + resiArray[t + pos];\n                         if(i === 0) {\n                             residueHash[residueId] = 1;\n                         }\n                         else {\n                             //if(!residueHash.hasOwnProperty(residueId)) residueHash[residueId] = undefined;\n                             if(!residueHash.hasOwnProperty(residueId)) delete residueHash[residueId];\n                         }\n\n                         for(var m in me.icn3d.residues[residueId]) {\n                           if(atomStr === '*' || atomStr === me.icn3d.atoms[m].name) {\n                             if(i === 0) {\n                                 //currHighlightAtoms[m] = 1;\n                                 atomHash[m] = 1;\n                             }\n                             else {\n                                 //if(!currHighlightAtoms.hasOwnProperty(m)) currHighlightAtoms[m] = undefined;\n                                 //if(!atomHash.hasOwnProperty(m)) atomHash[m] = undefined;\n                                 if(!atomHash.hasOwnProperty(m)) delete atomHash[m];\n                             }\n                           }\n                         }\n                       } // for\n                   } // end for(s = 0\n                 }\n               } // end if(molecule_chain\n             } // end else\n           } // end for(var mc = 0\n       } // for (j\n/*\n       if(i === 0) {\n           me.icn3d.hAtoms = me.icn3d.cloneHash(currHighlightAtoms);\n       }\n       else {\n           me.icn3d.hAtoms = me.icn3d.intHash(me.icn3d.hAtoms, currHighlightAtoms);\n       }\n*/\n   }  // for (i\n\n   me.icn3d.hAtoms = me.icn3d.cloneHash(atomHash);\n\n   if(bDisplay === undefined || bDisplay) me.updateHlAll();\n\n   var residueAtomArray;\n   if(bSelectResidues) {\n       residueAtomArray = Object.keys(residueHash);\n   }\n   else {\n       residueAtomArray = Object.keys(atomHash);\n   }\n\n//   if(commandname == \"\") commandname = \"tmp_\" + select;\n\n   if(commandname != \"\") {\n       me.addCustomSelection(residueAtomArray, commandname, commanddesc, select, bSelectResidues);\n\n       var nameArray = [commandname];\n       me.changeCustomAtoms(nameArray);\n   }\n};\n\n/**\n * @author Jiyao Wang <wangjiy@ncbi.nlm.nih.gov> / https://github.com/ncbi/icn3d\n */\n\niCn3DUI.prototype.showSets = function() { var me = this;\n    me.openDialog(me.pre + 'dl_definedsets', 'Select sets');\n    $(\"#\" + me.pre + \"dl_setsmenu\").show();\n    $(\"#\" + me.pre + \"dl_setoperations\").show();\n    $(\"#\" + me.pre + \"dl_command\").hide();\n\n    $(\"#\" + me.pre + \"atomsCustom\").resizable();\n\n    if(me.bSetChainsAdvancedMenu === undefined || !me.bSetChainsAdvancedMenu) {\n       me.setPredefinedInMenu();\n\n       me.bSetChainsAdvancedMenu = true;\n    }\n\n    me.updateHlMenus();\n};\n\niCn3DUI.prototype.clickCustomAtoms = function() { var me = this;\n    $(\"#\" + me.pre + \"atomsCustom\").change(function(e) {\n       var nameArray = $(this).val();\n\n       if(nameArray !== null) {\n         // log the selection\n         //me.setLogCmd('select saved atoms ' + nameArray.toString(), true);\n\n         var bUpdateHlMenus = false;\n         me.changeCustomAtoms(nameArray, bUpdateHlMenus);\n         me.setLogCmd('select saved atoms ' + nameArray.join(' ' + me.setOperation + ' '), true);\n\n         me.bSelectResidue = false;\n       }\n    });\n\n    $(\"#\" + me.pre + \"atomsCustom\").focus(function(e) {\n       if(me.isMobile()) $(\"#\" + me.pre + \"atomsCustom\").val(\"\");\n    });\n};\n\niCn3DUI.prototype.deleteSelectedSets = function() { var me = this;\n   var nameArray = $(\"#\" + me.pre + \"atomsCustom\").val();\n\n   for(var i = 0; i < nameArray.length; ++i) {\n     var selectedSet = nameArray[i];\n\n     if((me.icn3d.defNames2Atoms === undefined || !me.icn3d.defNames2Atoms.hasOwnProperty(selectedSet)) && (me.icn3d.defNames2Residues === undefined || !me.icn3d.defNames2Residues.hasOwnProperty(selectedSet)) ) continue;\n\n     if(me.icn3d.defNames2Atoms !== undefined && me.icn3d.defNames2Atoms.hasOwnProperty(selectedSet)) {\n         delete me.icn3d.defNames2Atoms[selectedSet];\n     }\n\n     if(me.icn3d.defNames2Residues !== undefined && me.icn3d.defNames2Residues.hasOwnProperty(selectedSet)) {\n         delete me.icn3d.defNames2Residues[selectedSet];\n     }\n   } // outer for\n\n   me.updateHlMenus();\n};\n\niCn3DUI.prototype.changeCustomAtoms = function (nameArray, bUpdateHlMenus) { var me = this;\n   me.icn3d.hAtoms = {};\n\n   for(var i = 0; i < nameArray.length; ++i) {\n     var selectedSet = nameArray[i];\n\n     if((me.icn3d.defNames2Atoms === undefined || !me.icn3d.defNames2Atoms.hasOwnProperty(selectedSet)) && (me.icn3d.defNames2Residues === undefined || !me.icn3d.defNames2Residues.hasOwnProperty(selectedSet)) ) continue;\n\n     if(me.icn3d.defNames2Atoms !== undefined && me.icn3d.defNames2Atoms.hasOwnProperty(selectedSet)) {\n         var atomArray = me.icn3d.defNames2Atoms[selectedSet];\n\n         for(var j = 0, jl = atomArray.length; j < jl; ++j) {\n             me.icn3d.hAtoms[atomArray[j]] = 1;\n         }\n     }\n\n     if(me.icn3d.defNames2Residues !== undefined && me.icn3d.defNames2Residues.hasOwnProperty(selectedSet)) {\n         var residueArrayTmp = me.icn3d.defNames2Residues[selectedSet];\n\n         var atomHash = {};\n         for(var j = 0, jl = residueArrayTmp.length; j < jl; ++j) {\n             atomHash = me.icn3d.unionHash(atomHash, me.icn3d.residues[residueArrayTmp[j]]);\n         }\n\n         me.icn3d.hAtoms = me.icn3d.unionHash(me.icn3d.hAtoms, atomHash);\n     }\n   } // outer for\n\n   me.updateHlAll(nameArray, bUpdateHlMenus);\n\n   // show selected chains in annotation window\n   me.showAnnoSelectedChains();\n\n   // clear commmand\n   $(\"#\" + me.pre + \"command\").val(\"\");\n   $(\"#\" + me.pre + \"command_name\").val(\"\");\n   //$(\"#\" + me.pre + \"command_desc\").val(\"\");\n\n   // update the commands in the dialog\n   for(var i = 0, il = nameArray.length; i < il; ++i) {\n       var atomArray = me.icn3d.defNames2Atoms[nameArray[i]];\n       var residueArray = me.icn3d.defNames2Residues[nameArray[i]];\n       var atomTitle = me.icn3d.defNames2Descr[nameArray[i]];\n\n       if(i === 0) {\n         //$(\"#\" + me.pre + \"command\").val(atomCommand);\n         $(\"#\" + me.pre + \"command\").val('saved atoms ' + nameArray[i]);\n         $(\"#\" + me.pre + \"command_name\").val(nameArray[i]);\n       }\n       else {\n         var prevValue = $(\"#\" + me.pre + \"command\").val();\n         $(\"#\" + me.pre + \"command\").val(prevValue + ' ' + me.setOperation + ' ' + nameArray[i]);\n\n         var prevValue = $(\"#\" + me.pre + \"command_name\").val();\n         $(\"#\" + me.pre + \"command_name\").val(prevValue + ' ' + me.setOperation + ' ' + nameArray[i]);\n       }\n   } // outer for\n};\n\niCn3DUI.prototype.setHAtomsFromSets = function (nameArray, type) { var me = this;\n   for(var i = 0; i < nameArray.length; ++i) {\n     var selectedSet = nameArray[i];\n\n     if((me.icn3d.defNames2Atoms === undefined || !me.icn3d.defNames2Atoms.hasOwnProperty(selectedSet)) && (me.icn3d.defNames2Residues === undefined || !me.icn3d.defNames2Residues.hasOwnProperty(selectedSet)) ) continue;\n\n     if(me.icn3d.defNames2Atoms !== undefined && me.icn3d.defNames2Atoms.hasOwnProperty(selectedSet)) {\n         var atomArray = me.icn3d.defNames2Atoms[selectedSet];\n\n         if(type === 'or') {\n             for(var j = 0, jl = atomArray.length; j < jl; ++j) {\n                 me.icn3d.hAtoms[atomArray[j]] = 1;\n             }\n         }\n         else if(type === 'and') {\n             var atomHash = {};\n             for(var j = 0, jl = atomArray.length; j < jl; ++j) {\n                 atomHash[atomArray[j]] = 1;\n             }\n\n             me.icn3d.hAtoms = me.icn3d.intHash(me.icn3d.hAtoms, atomHash);\n         }\n         else if(type === 'not') {\n             for(var j = 0, jl = atomArray.length; j < jl; ++j) {\n                 me.icn3d.hAtoms[atomArray[j]] = undefined;\n             }\n         }\n     }\n\n     if(me.icn3d.defNames2Residues !== undefined && me.icn3d.defNames2Residues.hasOwnProperty(selectedSet)) {\n         var residueArrayTmp = me.icn3d.defNames2Residues[selectedSet];\n\n         var atomHash = {};\n         for(var j = 0, jl = residueArrayTmp.length; j < jl; ++j) {\n             atomHash = me.icn3d.unionHash(atomHash, me.icn3d.residues[residueArrayTmp[j]]);\n         }\n\n         if(type === 'or') {\n             me.icn3d.hAtoms = me.icn3d.unionHash(me.icn3d.hAtoms, atomHash);\n         }\n         else if(type === 'and') {\n             me.icn3d.hAtoms = me.icn3d.intHash(me.icn3d.hAtoms, atomHash);\n         }\n         else if(type === 'not') {\n             me.icn3d.hAtoms = me.icn3d.exclHash(me.icn3d.hAtoms, atomHash);\n         }\n     }\n   } // outer for\n};\n\niCn3DUI.prototype.updateAdvancedCommands = function (nameArray, type) { var me = this;\n   // update the commands in the dialog\n   var separator = ' ' + type + ' ';\n   for(var i = 0, il = nameArray.length; i < il; ++i) {\n       if(i === 0 && type == 'or') {\n         $(\"#\" + me.pre + \"command\").val('saved atoms ' + nameArray[i]);\n         $(\"#\" + me.pre + \"command_name\").val(nameArray[i]);\n       }\n       else {\n         var prevValue = $(\"#\" + me.pre + \"command\").val();\n         $(\"#\" + me.pre + \"command\").val(prevValue + separator + nameArray[i]);\n\n         var prevValue = $(\"#\" + me.pre + \"command_name\").val();\n         $(\"#\" + me.pre + \"command_name\").val(prevValue + separator + nameArray[i]);\n       }\n   } // outer for\n};\n\niCn3DUI.prototype.combineSets = function (orArray, andArray, notArray, commandname) { var me = this;\n   me.icn3d.hAtoms = {};\n   me.setHAtomsFromSets(orArray, 'or');\n\n   if(Object.keys(me.icn3d.hAtoms).length == 0) me.icn3d.hAtoms = me.icn3d.cloneHash(me.icn3d.atoms);\n   me.setHAtomsFromSets(andArray, 'and');\n\n   me.setHAtomsFromSets(notArray, 'not');\n\n   me.updateHlAll();\n\n   // show selected chains in annotation window\n   me.showAnnoSelectedChains();\n\n   // clear commmand\n   $(\"#\" + me.pre + \"command\").val(\"\");\n   $(\"#\" + me.pre + \"command_name\").val(\"\");\n\n   me.updateAdvancedCommands(orArray, 'or');\n   me.updateAdvancedCommands(andArray, 'and');\n   me.updateAdvancedCommands(notArray, 'not');\n\n   if(commandname !== undefined) {\n       var select = \"select \" + $(\"#\" + me.pre + \"command\").val();\n\n       $(\"#\" + me.pre + \"command_name\").val(commandname);\n       me.addCustomSelection(Object.keys(me.icn3d.hAtoms), commandname, commandname, select, false);\n   }\n};\n\niCn3DUI.prototype.setProtNuclLigInMenu = function () { var me = this;\n    for(var chain in me.icn3d.chains) {\n          // Initially, add proteins, nucleotides, chemicals, ions, water into the menu \"custom selections\"\n          if(Object.keys(me.icn3d.proteins).length > 0) {\n              //me.icn3d.defNames2Atoms['proteins'] = Object.keys(me.icn3d.proteins);\n              me.icn3d.defNames2Residues['proteins'] = Object.keys(me.icn3d.getResiduesFromAtoms(me.icn3d.proteins));\n              me.icn3d.defNames2Descr['proteins'] = 'proteins';\n              me.icn3d.defNames2Command['proteins'] = 'select :proteins';\n          }\n\n          if(Object.keys(me.icn3d.nucleotides).length > 0) {\n              //me.icn3d.defNames2Atoms['nucleotides'] = Object.keys(me.icn3d.nucleotides);\n              me.icn3d.defNames2Residues['nucleotides'] = Object.keys(me.icn3d.getResiduesFromAtoms(me.icn3d.nucleotides));\n              me.icn3d.defNames2Descr['nucleotides'] = 'nucleotides';\n              me.icn3d.defNames2Command['nucleotides'] = 'select :nucleotides';\n          }\n\n          if(Object.keys(me.icn3d.chemicals).length > 0) {\n              //me.icn3d.defNames2Atoms['chemicals'] = Object.keys(me.icn3d.chemicals);\n              me.icn3d.defNames2Residues['chemicals'] = Object.keys(me.icn3d.getResiduesFromAtoms(me.icn3d.chemicals));\n              me.icn3d.defNames2Descr['chemicals'] = 'chemicals';\n              me.icn3d.defNames2Command['chemicals'] = 'select :chemicals';\n          }\n\n          if(Object.keys(me.icn3d.ions).length > 0) {\n              //me.icn3d.defNames2Atoms['ions'] = Object.keys(me.icn3d.ions);\n              me.icn3d.defNames2Residues['ions'] = Object.keys(me.icn3d.getResiduesFromAtoms(me.icn3d.ions));\n              me.icn3d.defNames2Descr['ions'] = 'ions';\n              me.icn3d.defNames2Command['ions'] = 'select :ions';\n          }\n\n          if(Object.keys(me.icn3d.water).length > 0) {\n              //me.icn3d.defNames2Atoms['water'] = Object.keys(me.icn3d.water);\n              me.icn3d.defNames2Residues['water'] = Object.keys(me.icn3d.getResiduesFromAtoms(me.icn3d.water));\n              me.icn3d.defNames2Descr['water'] = 'water';\n              me.icn3d.defNames2Command['water'] = 'select :water';\n          }\n    }\n};\n\niCn3DUI.prototype.setChainsInMenu = function () { var me = this;\n    for(var chainid in me.icn3d.chains) {\n        // skip chains with one residue/chemical\n        if(me.icn3d.chainsSeq[chainid].length > 1) {\n          //me.icn3d.defNames2Atoms[chainid] = Object.keys(me.icn3d.chains[chainid]);\n          me.icn3d.defNames2Residues[chainid] = Object.keys(me.icn3d.getResiduesFromAtoms(me.icn3d.chains[chainid]));\n          me.icn3d.defNames2Descr[chainid] = chainid;\n\n          var pos = chainid.indexOf('_');\n          var structure = chainid.substr(0, pos);\n          var chain = chainid.substr(pos + 1);\n\n          me.icn3d.defNames2Command[chainid] = 'select $' + structure + '.' + chain;\n        }\n    }\n};\n\n/**\n * @author Jiyao Wang <wangjiy@ncbi.nlm.nih.gov> / https://github.com/ncbi/icn3d\n */\n\niCn3DUI.prototype.loadScript = function (dataStr, bStatefile) { var me = this;\n  // allow the \"loading structure...\" message to be shown while loading script\n  me.bCommandLoad = true;\n\n  me.icn3d.bRender = false;\n  me.icn3d.bStopRotate = true;\n\n  // firebase dynamic links replace \" \" with \"+\". So convert it back\n  dataStr = dataStr.replace(/\\+/g, ' ').replace(/;/g, '\\n');\n\n  var preCommands = [];\n  if(me.icn3d.commands.length > 0) preCommands[0] = me.icn3d.commands[0];\n\n  me.icn3d.commands = dataStr.trim().split('\\n');\n  me.STATENUMBER = me.icn3d.commands.length;\n\n  me.icn3d.commands = preCommands.concat(me.icn3d.commands);\n  me.STATENUMBER = me.icn3d.commands.length;\n\n  if(bStatefile !== undefined && bStatefile) {\n      me.execCommands(0, me.STATENUMBER-1, me.STATENUMBER);\n  }\n  else {\n      // skip the first loading step\n      me.execCommands(1, me.STATENUMBER-1, me.STATENUMBER);\n  }\n};\n\niCn3DUI.prototype.loadSelection = function (dataStr) { var me = this;\n  var nameCommandArray = dataStr.trim().split('\\n');\n\n  for(var i = 0, il = nameCommandArray.length; i < il; ++i) {\n      var nameCommand = nameCommandArray[i].split('\\t');\n      var name = nameCommand[0];\n      var command = nameCommand[1];\n\n      var pos = command.indexOf(' '); // select ...\n\n      me.selectByCommand(command.substr(pos + 1), name, name, false);\n  }\n};\n\niCn3DUI.prototype.execCommands = function (start, end, steps) { var me = this;\n    me.icn3d.bRender = false;\n\n    // initialize icn3dui\n//    me.init();\n//    me.icn3d.init();\n\n    // fresh start\n    me.icn3d.reinitAfterLoad();\n\n    me.icn3d.opts = me.icn3d.cloneHash(me.opts);\n\n    //me.execCommandsBase(0, steps-1, steps);\n    me.execCommandsBase(start, end, steps);\n};\n\niCn3DUI.prototype.execCommandsBase = function (start, end, steps) { var me = this;\n  for(var i=start; i <= end; ++i) {\n      var bFinalStep = (i === steps - 1) ? true : false;\n\n      if(me.icn3d.commands[i].indexOf('load') !== -1) {\n          if(end === 0 && start === end) {\n              if(me.bNotLoadStructure) {\n                    me.icn3d.hAtoms = me.icn3d.cloneHash(me.icn3d.atoms);\n                    //me.icn3d.bRender = true;\n\n                    // end of all commands\n                    if(1 === me.icn3d.commands.length) me.bAddCommands = true;\n                    if(bFinalStep) me.renderFinalStep(steps);                  }\n              else {\n                  $.when(me.applyCommandLoad(me.icn3d.commands[i])).then(function() {\n                   // me.icn3d.bRender = true;\n\n                    // end of all commands\n                    if(1 === me.icn3d.commands.length) me.bAddCommands = true;\n                    if(bFinalStep) me.renderFinalStep(steps);\n                  });\n              }\n              return;\n          }\n          else {\n              if(me.bNotLoadStructure) {\n                  me.icn3d.hAtoms = me.icn3d.cloneHash(me.icn3d.atoms);\n\n                  // undo/redo requires render the first step\n                  if(me.backForward !== undefined && me.backForward) me.renderFinalStep(1);\n\n                  me.execCommandsBase(i + 1, end, steps);\n              }\n              else {\n                  $.when(me.applyCommandLoad(me.icn3d.commands[i])).then(function() {\n                      // undo/redo requires render the first step\n                      if(me.backForward !== undefined && me.backForward) me.renderFinalStep(1);\n\n                      me.execCommandsBase(i + 1, end, steps);\n                  });\n              }\n\n              return;\n          }\n      }\n      else if(me.icn3d.commands[i].trim().indexOf('set map') == 0 && me.icn3d.commands[i].trim().indexOf('set map wireframe') == -1) {\n          //set map 2fofc sigma 1.5\n          var str = me.icn3d.commands[i].trim().substr(8);\n          var paraArray = str.split(\" \");\n\n          if(paraArray.length == 3 && paraArray[1] == 'sigma') {\n            var sigma = paraArray[2];\n            var type = paraArray[0];\n\n            if( (type == '2fofc' && (me.bAjax2fofc === undefined || !me.bAjax2fofc))\n              || (type == 'fofc' && (me.bAjaxfofc === undefined || !me.bAjaxfofc)) ) {\n                $.when(me.applyCommandMap(me.icn3d.commands[i].trim())).then(function() {\n                    me.execCommandsBase(i + 1, end, steps);\n                });\n            }\n            else {\n                me.applyCommandMap(me.icn3d.commands[i].trim());\n                me.execCommandsBase(i + 1, end, steps);\n            }\n\n            return;\n          }\n      }\n      else if(me.icn3d.commands[i].trim().indexOf('set emmap') == 0 && me.icn3d.commands[i].trim().indexOf('set emmap wireframe') == -1) {\n          //set emmap percentage 70\n          var str = me.icn3d.commands[i].trim().substr(10);\n          var paraArray = str.split(\" \");\n\n          if(paraArray.length == 2 && paraArray[0] == 'percentage') {\n            var percentage = paraArray[1];\n\n            if(me.bAjaxEm === undefined || !me.bAjaxEm) {\n                $.when(me.applyCommandEmmap(me.icn3d.commands[i].trim())).then(function() {\n                    me.execCommandsBase(i + 1, end, steps);\n                });\n            }\n            else {\n                me.applyCommandEmmap(me.icn3d.commands[i].trim());\n                me.execCommandsBase(i + 1, end, steps);\n            }\n\n            return;\n          }\n      }\n      else if(me.icn3d.commands[i].trim().indexOf('view annotations') == 0\n        //|| me.icn3d.commands[i].trim().indexOf('set annotation cdd') == 0\n        //|| me.icn3d.commands[i].trim().indexOf('set annotation site') == 0\n        ) { // the command may have \"|||{\"factor\"...\n          var strArray = me.icn3d.commands[i].split(\"|||\");\n          if(Object.keys(me.icn3d.proteins).length > 0 && (me.bAjaxCddSite === undefined || !me.bAjaxCddSite) ) {\n              $.when(me.applyCommandAnnotationsAndCddSite(strArray[0].trim())).then(function() {\n                  me.execCommandsBase(i + 1, end, steps);\n              });\n          }\n          else {\n              if(Object.keys(me.icn3d.proteins).length > 0) {\n                  me.applyCommandAnnotationsAndCddSiteBase(strArray[0].trim());\n              }\n\n              me.execCommandsBase(i + 1, end, steps);\n          }\n\n          return;\n      }\n      else if(me.icn3d.commands[i].trim().indexOf('set annotation clinvar') == 0\n        || me.icn3d.commands[i].trim().indexOf('set annotation snp') == 0) { // the command may have \"|||{\"factor\"...\n          var strArray = me.icn3d.commands[i].split(\"|||\");\n\n          if(Object.keys(me.icn3d.proteins).length > 0 && (me.bAjaxSnpClinvar === undefined || !me.bAjaxSnpClinvar) ) {\n              $.when(me.applyCommandSnpClinvar(strArray[0].trim())).then(function() {\n                  me.execCommandsBase(i + 1, end, steps);\n              });\n          }\n          else {\n              if(Object.keys(me.icn3d.proteins).length > 0) {\n                  me.applyCommandSnpClinvar(strArray[0].trim());\n              }\n\n              me.execCommandsBase(i + 1, end, steps);\n          }\n\n          return;\n      }\n      else if(me.icn3d.commands[i].trim().indexOf('set annotation 3ddomain') == 0) { // the command may have \"|||{\"factor\"...\n          var strArray = me.icn3d.commands[i].split(\"|||\");\n\n          if(Object.keys(me.icn3d.proteins).length > 0 && me.mmdb_data === undefined && (me.bAjax3ddomain === undefined || !me.bAjax3ddomain)) {\n              $.when(me.applyCommand3ddomain(strArray[0].trim())).then(function() {\n                  me.execCommandsBase(i + 1, end, steps);\n              });\n          }\n          else {\n              if(Object.keys(me.icn3d.proteins).length > 0) {\n                  me.applyCommand3ddomain(strArray[0].trim());\n              }\n\n              me.execCommandsBase(i + 1, end, steps);\n          }\n\n          return;\n      }\n      else if(me.icn3d.commands[i].trim().indexOf('set annotation all') == 0) { // the command may have \"|||{\"factor\"...\n          var strArray = me.icn3d.commands[i].split(\"|||\");\n          //$.when(me.applyCommandAnnotationsAndCddSite(strArray[0].trim()))\n          //  .then(me.applyCommandSnpClinvar(strArray[0].trim()))\n\n          if( Object.keys(me.icn3d.proteins).length > 0 && (me.bAjaxSnpClinvar === undefined || !me.bAjaxSnpClinvar)\n            && (me.bAjax3ddomain === undefined || !me.bAjax3ddomain || me.mmdb_data === undefined) ) {\n              $.when(me.applyCommandSnpClinvar(strArray[0].trim()))\n                .then(me.applyCommand3ddomain(strArray[0].trim()))\n                .then(function() {\n                  me.setAnnoTabAll();\n\n                  me.execCommandsBase(i + 1, end, steps);\n              });\n          }\n          else if(Object.keys(me.icn3d.proteins).length > 0 && (me.bAjaxSnpClinvar === undefined || !me.bAjaxSnpClinvar) ) {\n              $.when(me.applyCommandSnpClinvar(strArray[0].trim()))\n                .then(function() {\n                  me.setAnnoTabAll();\n\n                  me.execCommandsBase(i + 1, end, steps);\n              });\n          }\n          else if(Object.keys(me.icn3d.proteins).length > 0 && (me.bAjax3ddomain === undefined || !me.bAjax3ddomain || me.mmdb_data === undefined) ) {\n              $.when(me.applyCommand3ddomain(strArray[0].trim()))\n                .then(function() {\n                  me.setAnnoTabAll();\n\n                  me.execCommandsBase(i + 1, end, steps);\n              });\n          }\n          else {\n              if(Object.keys(me.icn3d.proteins).length > 0) {\n                  if((me.bAjaxSnpClinvar === undefined || !me.bAjaxSnpClinvar)\n                    && (me.bAjax3ddomain === undefined || !me.bAjax3ddomain || me.mmdb_data === undefined)) {\n                      me.applyCommandSnpClinvarBase(strArray[0].trim());\n                      me.applyCommand3ddomainBase(strArray[0].trim());\n                  }\n                  else if(me.bAjaxSnpClinvar === undefined || !me.bAjaxSnpClinvar) {\n                      me.applyCommandSnpClinvarBase(strArray[0].trim());\n                  }\n                  else if(me.bAjax3ddomain === undefined || !me.bAjax3ddomain || me.mmdb_data === undefined) {\n                      me.applyCommand3ddomainBase(strArray[0].trim());\n                  }\n              }\n\n              me.setAnnoTabAll();\n\n              me.execCommandsBase(i + 1, end, steps);\n          }\n\n          return;\n      }\n      else if(me.icn3d.commands[i].trim().indexOf('view interactions') == 0 && me.cfg.align !== undefined) { // the command may have \"|||{\"factor\"...\n          var strArray = me.icn3d.commands[i].split(\"|||\");\n\n          if(me.b2DShown === undefined || !me.b2DShown) {\n              $.when(me.applyCommandViewinteraction(strArray[0].trim())).then(function() {\n                  me.execCommandsBase(i + 1, end, steps);\n              });\n          }\n          else {\n              me.execCommandsBase(i + 1, end, steps);\n          }\n\n          return;\n      }\n      else {\n          me.applyCommand(me.icn3d.commands[i]);\n      }\n  }\n\n  //if(i === steps - 1) {\n  if(i === steps) {\n      // enable me.hideLoading\n      me.bCommandLoad = false;\n\n      // hide \"loading ...\"\n      me.hideLoading();\n\n      //me.icn3d.bRender = true;\n\n      // end of all commands\n      if(i + 1 === me.icn3d.commands.length) me.bAddCommands = true;\n\n      me.renderFinalStep(steps);\n  }\n};\n\niCn3DUI.prototype.renderFinalStep = function(steps) { var me = this;\n    me.icn3d.bRender = true;\n\n    var commandTransformation = me.icn3d.commands[steps-1].split('|||');\n\n    if(commandTransformation.length == 2) {\n        var transformation = JSON.parse(commandTransformation[1]);\n\n        me.icn3d._zoomFactor = transformation.factor;\n\n        me.icn3d.mouseChange.x = transformation.mouseChange.x;\n        me.icn3d.mouseChange.y = transformation.mouseChange.y;\n\n        me.icn3d.quaternion._x = transformation.quaternion._x;\n        me.icn3d.quaternion._y = transformation.quaternion._y;\n        me.icn3d.quaternion._z = transformation.quaternion._z;\n        me.icn3d.quaternion._w = transformation.quaternion._w;\n    }\n\n    // simple if all atoms are modified\n    //if( me.cfg.command === undefined && (steps === 1 || (Object.keys(me.icn3d.hAtoms).length === Object.keys(me.icn3d.atoms).length) || (me.icn3d.optsHistory[steps - 1] !== undefined && me.icn3d.optsHistory[steps - 1].hasOwnProperty('hlatomcount') && me.icn3d.optsHistory[steps - 1].hlatomcount === Object.keys(me.icn3d.atoms).length) ) ) {\n    if(steps === 1\n      || (Object.keys(me.icn3d.hAtoms).length === Object.keys(me.icn3d.atoms).length)\n      || (me.icn3d.optsHistory[steps - 1] !== undefined && me.icn3d.optsHistory[steps - 1].hasOwnProperty('hlatomcount') && me.icn3d.optsHistory[steps - 1].hlatomcount === Object.keys(me.icn3d.atoms).length) ) {\n        if(steps === 1) {\n            // assign styles and color using the options at that stage\n            me.icn3d.setAtomStyleByOptions(me.icn3d.optsHistory[steps - 1]);\n            me.icn3d.setColorByOptions(me.icn3d.optsHistory[steps - 1], me.icn3d.hAtoms);\n        }\n\n        if(me.icn3d.optsHistory.length >= steps) {\n            var pkOption = me.icn3d.optsHistory[steps - 1].pk;\n            if(pkOption === 'no') {\n                me.icn3d.pk = 0;\n            }\n            else if(pkOption === 'atom') {\n                me.icn3d.pk = 1;\n            }\n            else if(pkOption === 'residue') {\n                me.icn3d.pk = 2;\n            }\n            else if(pkOption === 'strand') {\n                me.icn3d.pk = 3;\n            }\n\n            if(steps === 1) {\n                me.icn3d.applyOriginalColor();\n            }\n\n            me.updateHlAll();\n\n            jQuery.extend(me.icn3d.opts, me.icn3d.optsHistory[steps - 1]);\n            me.icn3d.draw();\n        }\n        else {\n            me.updateHlAll();\n\n            me.icn3d.draw();\n        }\n    }\n    else { // more complicated if partial atoms are modified\n        me.icn3d.draw();\n    }\n};\n\niCn3DUI.prototype.applyCommandLoad = function (commandStr) { var me = this;\n  //me.bCommandLoad = true;\n\n  // chain functions together\n  me.deferred2 = $.Deferred(function() {\n  me.bAddCommands = false;\n  var commandTransformation = commandStr.split('|||');\n\n  var commandOri = commandTransformation[0].replace(/\\s\\s/g, ' ').trim();\n  var command = commandOri.toLowerCase();\n\n  if(command.indexOf('load') !== -1) { // 'load pdb [pdbid]'\n    var load_parameters = command.split(' | ');\n\n    var loadStr = load_parameters[0];\n    if(load_parameters.length > 1) {\n        var firstSpacePos = load_parameters[load_parameters.length - 1].indexOf(' ');\n        me.cfg.inpara = load_parameters[load_parameters.length - 1].substr(firstSpacePos + 1);\n        if(me.cfg.inpara === 'undefined') {\n            me.cfg.inpara = '';\n        }\n    }\n\n    // load pdb, mmcif, mmdb, cid\n    var id = loadStr.substr(loadStr.lastIndexOf(' ') + 1);\n    me.inputid = id;\n    if(command.indexOf('load mmtf') !== -1) {\n      me.cfg.mmtfid = id;\n      me.downloadMmtf(id);\n    }\n    else if(command.indexOf('load pdb') !== -1) {\n      me.cfg.pdbid = id;\n      me.downloadPdb(id);\n    }\n    else if(command.indexOf('load mmcif') !== -1) {\n      me.cfg.mmcifid = id;\n      me.downloadMmcif(id);\n    }\n    else if(command.indexOf('load mmdb') !== -1) {\n      me.cfg.mmdbid = id;\n      me.downloadMmdb(id);\n    }\n    else if(command.indexOf('load gi') !== -1) {\n      me.cfg.gi = id;\n      me.downloadGi(id);\n    }\n    else if(command.indexOf('load seq_struc_ids') !== -1) {\n      me.downloadBlast_rep_id(id);\n    }\n    else if(command.indexOf('load cid') !== -1) {\n      me.cfg.cid = id;\n      me.downloadCid(id);\n    }\n    else if(command.indexOf('load align') !== -1) {\n      me.cfg.align = id;\n      me.downloadAlignment(id);\n    }\n    else if(command.indexOf('load url') !== -1) {\n        var typeStr = load_parameters[1]; // type pdb\n        var pos = (typeStr !== undefined) ? typeStr.indexOf('type ') : -1;\n        var type = 'pdb';\n\n        if(pos !== -1) {\n            type = typeStr.substr(pos + 5);\n        }\n\n        me.cfg.url = id;\n        me.downloadUrl(id, type);\n    }\n  }\n\n  me.bAddCommands = true;\n  }); // end of me.deferred = $.Deferred(function() {\n\n  return me.deferred2.promise();\n};\n\niCn3DUI.prototype.applyCommandMap = function (command) { var me = this;\n  // chain functions together\n  me.deferredMap = $.Deferred(function() {\n      var str = command.substr(8);\n      var paraArray = str.split(\" \");\n\n      if(paraArray.length == 3 && paraArray[1] == 'sigma') {\n          var sigma = paraArray[2];\n          var type = paraArray[0];\n\n          me.Dsn6Parser(me.inputid, type, sigma);\n      }\n  }); // end of me.deferred = $.Deferred(function() {\n\n  return me.deferredMap.promise();\n};\n\niCn3DUI.prototype.applyCommandEmmap = function (command) { var me = this;\n  // chain functions together\n  me.deferredEmmap = $.Deferred(function() {\n      var str = command.substr(10);\n      var paraArray = str.split(\" \");\n\n      if(paraArray.length == 2 && paraArray[0] == 'percentage') {\n          var percentage = paraArray[1];\n          var type = 'em';\n\n          me.DensityCifParser(me.inputid, type, percentage, me.icn3d.emd);\n      }\n  }); // end of me.deferred = $.Deferred(function() {\n\n  return me.deferredEmmap.promise();\n};\n\niCn3DUI.prototype.applyCommandAnnotationsAndCddSiteBase = function (command) { var me = this;\n  // chain functions together\n      if(command == \"view annotations\") {\n          if(me.cfg.showanno === undefined || !me.cfg.showanno) {\n              me.showAnnotations();\n          }\n      }\n};\n\niCn3DUI.prototype.applyCommandAnnotationsAndCddSite = function (command) { var me = this;\n  // chain functions together\n  me.deferredAnnoCddSite = $.Deferred(function() {\n      me.applyCommandAnnotationsAndCddSiteBase(command);\n  }); // end of me.deferred = $.Deferred(function() {\n\n  return me.deferredAnnoCddSite.promise();\n};\n\niCn3DUI.prototype.applyCommandSnpClinvarBase = function (command) { var me = this;\n  // chain functions together\n      var pos = command.lastIndexOf(' '); // set annotation clinvar\n      var type = command.substr(pos + 1);\n\n      if(type == 'clinvar') {\n          me.setAnnoTabClinvar();\n      }\n      else if(type == 'snp') {\n          me.setAnnoTabSnp();\n      }\n      else if(type == 'all') {\n          me.setAnnoTabClinvar();\n          me.setAnnoTabSnp();\n      }\n};\n\niCn3DUI.prototype.applyCommandSnpClinvar = function (command) { var me = this;\n  // chain functions together\n  me.deferredSnpClinvar = $.Deferred(function() {\n      me.applyCommandSnpClinvarBase(command);\n  }); // end of me.deferred = $.Deferred(function() {\n\n  return me.deferredSnpClinvar.promise();\n};\n\niCn3DUI.prototype.applyCommand3ddomainBase = function (command) { var me = this;\n  // chain functions together\n      var pos = command.lastIndexOf(' ');\n      var type = command.substr(pos + 1);\n\n      if(type == '3ddomain' || type == 'all') {\n          me.setAnnoTab3ddomain();\n      }\n};\n\niCn3DUI.prototype.applyCommand3ddomain = function (command) { var me = this;\n  // chain functions together\n  me.deferred3ddomain = $.Deferred(function() {\n      me.applyCommand3ddomainBase(command);\n  }); // end of me.deferred = $.Deferred(function() {\n\n  return me.deferred3ddomain.promise();\n};\n\niCn3DUI.prototype.applyCommandViewinteractionBase = function (command) { var me = this;\n  // chain functions together\n     if(me.cfg.align !== undefined) {\n         var structureArray = Object.keys(me.icn3d.structures);\n         me.set2DDiagramsForAlign(structureArray[0].toUpperCase(), structureArray[1].toUpperCase());\n     }\n};\n\niCn3DUI.prototype.applyCommandViewinteraction = function (command) { var me = this;\n  // chain functions together\n  me.deferredViewinteraction = $.Deferred(function() {\n     me.applyCommandViewinteractionBase(command);\n  }); // end of me.deferred = $.Deferred(function() {\n\n  return me.deferredViewinteraction.promise();\n};\n\niCn3DUI.prototype.applyCommand = function (commandStr) { var me = this;\n  me.bAddCommands = false;\n\n  var commandTransformation = commandStr.split('|||');\n\n  var commandOri = commandTransformation[0].replace(/\\s+/g, ' ').trim();\n  var command = commandOri.toLowerCase();\n\n  var bShowLog = true;\n\n// exact match =============\n\n  var file_pref = (me.inputid) ? me.inputid : \"custom\";\n\n  if(command == 'export state file') { // last step to update transformation\n    // the last transformation will be applied\n  }\n  else if(command == 'export canvas') {\n    setTimeout(function(){\n           me.saveFile(file_pref + '_icn3d_loadable.png', 'png');\n        }, 500);\n  }\n  else if(command == 'export interactions') {\n    me.exportInteractions();\n  }\n  else if(command == 'export stl file') {\n    setTimeout(function(){\n           //me.hideStabilizer();\n\n           var text = me.saveStlFile();\n           me.saveFile(file_pref + '.stl', 'binary', text);\n           text = '';\n        }, 500);\n  }\n  else if(command == 'export vrml file') {\n    setTimeout(function(){\n           //me.hideStabilizer();\n\n           var text = me.saveVrmlFile();\n           me.saveFile(file_pref + '.wrl', 'text', text);\n           text = '';\n        }, 500);\n  }\n  else if(command == 'export stl stabilizer file') {\n    setTimeout(function(){\n           //me.icn3d.bRender = false;\n\n           me.hideStabilizer();\n           me.resetAfter3Dprint();\n           me.addStabilizer();\n\n           var text = me.saveStlFile();\n\n           //me.hideStabilizer();\n           //me.icn3d.bRender = true;\n           //me.icn3d.draw();\n\n           me.saveFile(file_pref + '_stab.stl', 'binary', text);\n           text = '';\n        }, 500);\n  }\n  else if(command == 'export vrml stabilizer file') {\n    setTimeout(function(){\n           //me.icn3d.bRender = false;\n\n           me.hideStabilizer();\n           me.resetAfter3Dprint();\n           me.addStabilizer();\n\n           var text = me.saveVrmlFile();\n\n           //me.hideStabilizer();\n           //me.icn3d.bRender = true;\n           //me.icn3d.draw();\n\n           me.saveFile(file_pref + '_stab.wrl', 'text', text);\n           text = '';\n        }, 500);\n  }\n  else if(command == 'select all') {\n     me.selectAll();\n     //me.icn3d.addHlObjects();\n  }\n  else if(command == 'select complement') {\n     me.selectComplement();\n  }\n  else if(command == 'set pk atom') {\n    me.icn3d.pk = 1;\n    me.icn3d.opts['pk'] = 'atom';\n  }\n  else if(command == 'set pk off') {\n    me.icn3d.pk = 0;\n    me.icn3d.opts['pk'] = 'no';\n    me.icn3d.draw();\n    me.icn3d.removeHlObjects();\n  }\n  else if(command == 'set pk residue') {\n    me.icn3d.pk = 2;\n    me.icn3d.opts['pk'] = 'residue';\n  }\n  else if(command == 'set pk strand') {\n    me.icn3d.pk = 3;\n    me.icn3d.opts['pk'] = 'strand';\n  }\n  else if(command == 'set pk chain') {\n    me.icn3d.pk = 4;\n    me.icn3d.opts['pk'] = 'chain';\n  }\n  else if(command == 'set surface wireframe on') {\n    me.icn3d.opts['wireframe'] = 'yes';\n    me.icn3d.applySurfaceOptions();\n  }\n  else if(command == 'set surface wireframe off') {\n    me.icn3d.opts['wireframe'] = 'no';\n    me.icn3d.applySurfaceOptions();\n  }\n  else if(command == 'set map wireframe on') {\n    me.icn3d.opts['mapwireframe'] = 'yes';\n    me.icn3d.applyMapOptions();\n  }\n  else if(command == 'set map wireframe off') {\n    me.icn3d.opts['mapwireframe'] = 'no';\n    me.icn3d.applyMapOptions();\n  }\n  else if(command == 'set emmap wireframe on') {\n    me.icn3d.opts['emmapwireframe'] = 'yes';\n    me.icn3d.applyMapOptions();\n  }\n  else if(command == 'set emmap wireframe off') {\n    me.icn3d.opts['emmapwireframe'] = 'no';\n    me.icn3d.applyMapOptions();\n  }\n  else if(command == 'set surface neighbors on') {\n    me.icn3d.bConsiderNeighbors = true;\n    me.icn3d.applySurfaceOptions();\n  }\n  else if(command == 'set surface neighbors off') {\n    me.icn3d.bConsiderNeighbors = false;\n    me.icn3d.applySurfaceOptions();\n  }\n  else if(command == 'set axis on') {\n    me.icn3d.opts['axis'] = 'yes';\n  }\n  else if(command == 'set axis off') {\n    me.icn3d.opts['axis'] = 'no';\n  }\n  else if(command == 'set fog on') {\n    me.icn3d.opts['fog'] = 'yes';\n  }\n  else if(command == 'set fog off') {\n    me.icn3d.opts['fog'] = 'no';\n  }\n  else if(command == 'set slab on') {\n    me.icn3d.opts['slab'] = 'yes';\n  }\n  else if(command == 'set slab off') {\n    me.icn3d.opts['slab'] = 'no';\n  }\n  else if(command == 'set assembly on') {\n    me.icn3d.bAssembly = true;\n  }\n  else if(command == 'set assembly off') {\n    me.icn3d.bAssembly = false;\n  }\n  else if(command == 'set chemicalbinding show') {\n    me.setOption('chemicalbinding', 'show');\n  }\n  else if(command == 'set chemicalbinding hide') {\n    me.setOption('chemicalbinding', 'hide');\n  }\n  else if(command == 'set hbonds off') {\n    me.icn3d.hideHbonds();\n    me.icn3d.draw();\n  }\n  else if(command == 'set stabilizer off') {\n    me.hideStabilizer();\n    me.icn3d.draw();\n  }\n  else if(command == 'set disulfide bonds off') {\n    me.icn3d.opts[\"ssbonds\"] = \"no\";\n    me.icn3d.draw();\n  }\n  else if(command == 'set cross linkage off') {\n    me.icn3d.bShowCrossResidueBond = false;\n    //me.opts['proteins'] = 'ribbon';\n    //me.icn3d.draw();\n    me.setStyle('proteins', 'ribbon')\n  }\n  else if(command == 'set lines off') {\n    me.icn3d.labels['distance'] = [];\n    me.icn3d.lines['distance'] = [];\n\n    me.icn3d.draw();\n  }\n  else if(command == 'set labels off') {\n    //me.icn3d.labels['residue'] = [];\n    //me.icn3d.labels['custom'] = [];\n\n    for(var name in me.icn3d.labels) {\n       //if(name === 'residue' || name === 'custom') {\n           me.icn3d.labels[name] = [];\n       //}\n    }\n\n    me.icn3d.draw();\n  }\n  else if(command == 'set mode all') {\n     me.setModeAndDisplay('all');\n  }\n  else if(command == 'set mode selection') {\n     me.setModeAndDisplay('selection');\n  }\n  else if(command == 'set view detailed view') {\n     me.setAnnoViewAndDisplay('detailed view');\n  }\n  else if(command == 'set view overview') {\n     me.setAnnoViewAndDisplay('overview');\n  }\n/*\n  else if(command.indexOf('set annotation') == 0) {\n      var pos = command.lastIndexOf(' ');\n      var type = command.substr(pos + 1);\n\n      if(type == 'all') {\n          me.setAnnoTabAll();\n      }\n      else if(type == 'custom') {\n          me.setAnnoTabCustom();\n      }\n      else if(type == 'clinvar') {\n          me.setAnnoTabClinvar();\n      }\n      else if(type == 'snp') {\n          me.setAnnoTabSnp();\n      }\n      else if(type == 'cdd') {\n          me.setAnnoTabCdd();\n      }\n      else if(type == '3ddomain') {\n          me.setAnnoTab3ddomain();\n      }\n      else if(type == 'site') {\n          me.setAnnoTabSite();\n      }\n      else if(type == 'interaction') {\n          me.setAnnoTabInteraction();\n      }\n  }\n*/\n  else if(command == 'set annotation custom') {\n      me.setAnnoTabCustom();\n  }\n  else if(command == 'set annotation interaction') {\n      me.setAnnoTabInteraction();\n  }\n  else if(command == 'set annotation cdd') {\n      me.setAnnoTabCdd();\n  }\n  else if(command == 'set annotation site') {\n      me.setAnnoTabSite();\n  }\n  else if(command == 'set annotation ssbond') {\n      me.setAnnoTabSsbond();\n  }\n  else if(command == 'highlight level up') {\n      me.switchHighlightLevelUp();\n  }\n  else if(command == 'highlight level down') {\n      me.switchHighlightLevelDown();\n  }\n  else if(command.indexOf('hide annotation') == 0) {\n      var pos = command.lastIndexOf(' ');\n      var type = command.substr(pos + 1);\n\n      if(type == 'all') {\n          me.hideAnnoTabAll();\n      }\n      else if(type == 'custom') {\n          me.hideAnnoTabCustom();\n      }\n      else if(type == 'clinvar') {\n          me.hideAnnoTabClinvar();\n      }\n      else if(type == 'snp') {\n          me.hideAnnoTabSnp();\n      }\n      else if(type == 'cdd') {\n          me.hideAnnoTabCdd();\n      }\n      else if(type == '3ddomain') {\n          me.hideAnnoTab3ddomain();\n      }\n      else if(type == 'site') {\n          me.hideAnnoTabSite();\n      }\n      else if(type == 'interaction') {\n          me.hideAnnoTabInteraction();\n      }\n      else if(type == 'ssbond') {\n          me.hideAnnoTabSsbond();\n      }\n  }\n  else if(command == 'add residue labels') {\n    me.icn3d.addResiudeLabels(me.icn3d.hAtoms);\n\n    me.icn3d.draw();\n  }\n  else if(command == 'add chain labels') {\n    me.addChainLabels(me.icn3d.hAtoms);\n\n    me.icn3d.draw();\n  }\n  else if(command == 'add terminal labels') {\n    me.addTerminiLabels(me.icn3d.hAtoms);\n\n    me.icn3d.draw();\n  }\n  else if(command == 'rotate left') {\n     me.icn3d.bStopRotate = false;\n     me.ROT_DIR = 'left';\n\n     me.rotStruc('left');\n  }\n  else if(command == 'rotate right') {\n     me.icn3d.bStopRotate = false;\n     me.ROT_DIR = 'right';\n\n     me.rotStruc('right');\n  }\n  else if(command == 'rotate up') {\n     me.icn3d.bStopRotate = false;\n     me.ROT_DIR = 'up';\n\n     me.rotStruc('up');\n  }\n  else if(command == 'rotate down') {\n     me.icn3d.bStopRotate = false;\n     me.ROT_DIR = 'down';\n\n     me.rotStruc('down');\n  }\n  else if(command === 'reset') {\n    //location.reload();\n    me.icn3d.reinitAfterLoad();\n    me.renderFinalStep(1);\n\n    // need to render\n    me.icn3d.render();\n  }\n  else if(command === 'reset orientation') {\n    me.icn3d.resetOrientation();\n    me.icn3d.draw();\n  }\n  else if(command == 'reset thickness') {\n    me.resetAfter3Dprint();\n    me.icn3d.draw();\n  }\n  else if(command == 'clear selection') {\n    //if(me.icn3d.prevHighlightObjects.length > 0) { // remove\n        me.icn3d.removeHlObjects();\n        me.removeHl2D();\n        me.icn3d.bShowHighlight = false;\n\n        me.bSelectResidue = false;\n    //}\n  }\n  else if(command == 'zoom selection') {\n    me.icn3d.zoominSelection();\n    me.icn3d.draw();\n  }\n  else if(command == 'center selection') {\n    me.icn3d.centerSelection();\n    me.icn3d.draw();\n  }\n  else if(command == 'show selection') {\n    me.showSelection();\n  }\n  else if(command == 'output selection') {\n      me.outputSelection();\n  }\n  else if(command == 'toggle selection') {\n     me.toggleSelection();\n  }\n  else if(command == 'toggle highlight') {\n    if(me.icn3d.prevHighlightObjects.length > 0) { // remove\n        me.icn3d.removeHlObjects();\n        me.icn3d.bShowHighlight = false;\n    }\n    else { // add\n        me.icn3d.addHlObjects();\n        me.icn3d.bShowHighlight = true;\n    }\n  }\n  else if(command == 'stabilizer') {\n    me.addStabilizer();\n\n    me.prepareFor3Dprint();\n    //me.icn3d.draw();\n  }\n  else if(command == 'disulfide bonds') {\n    me.showSsbonds();\n  }\n  else if(command == 'cross linkage') {\n    me.icn3d.bShowCrossResidueBond = true;\n\n    me.setStyle('proteins', 'lines')\n  }\n  else if(command == 'back') {\n     me.back();\n  }\n  else if(command == 'forward') {\n     me.forward();\n  }\n  else if(command == 'clear all') {\n     me.selectAll();\n  }\n  else if(command == 'defined sets') {\n     me.showSets();\n  }\n  else if(command == 'delete selected sets') {\n     me.deleteSelectedSets();\n  }\n  else if(command == 'view interactions') {\n     if(me.cfg.mmdbid !== undefined || me.cfg.gi !== undefined) {\n         me.set2DDiagrams(me.inputid);\n     }\n     //else if(me.cfg.align !== undefined) {\n     //    var structureArray = Object.keys(me.icn3d.structures);\n     //    me.set2DDiagramsForAlign(structureArray[0].toUpperCase(), structureArray[1].toUpperCase());\n     //}\n  }\n//      else if(command == 'view annotations') {\n//          if(me.cfg.showanno === undefined || !me.cfg.showanno) { // previously done the following call\n//              me.showAnnotations();\n//          }\n//      }\n  else if(command == 'show annotations all chains') {\n     me.showAnnoAllChains();\n  }\n\n  else if(command == 'save color') {\n     me.saveColor();\n  }\n  else if(command == 'apply saved color') {\n     me.applySavedColor();\n  }\n  else if(command == 'save style') {\n     me.saveStyle();\n  }\n  else if(command == 'apply saved style') {\n     me.applySavedStyle();\n  }\n  else if(command == 'select side chains') {\n     me.selectSideChains();\n  }\n\n// start with =================\n  else if(commandOri.indexOf('define helix sets') == 0) {\n     var chainStr = commandOri.split(' | ')[1];\n     var chainid = chainStr.split(' ')[1];\n\n     me.defineSecondary(chainid, 'helix');\n  }\n  else if(commandOri.indexOf('define sheet sets') == 0) {\n     var chainStr = commandOri.split(' | ')[1];\n     var chainid = chainStr.split(' ')[1];\n\n     me.defineSecondary(chainid, 'sheet');\n  }\n  else if(commandOri.indexOf('define coil sets') == 0) {\n     var chainStr = commandOri.split(' | ')[1];\n     var chainid = chainStr.split(' ')[1];\n\n     me.defineSecondary(chainid, 'coil');\n  }\n  else if(commandOri.indexOf('select interaction') == 0) {\n    var idArray = commandOri.substr(commandOri.lastIndexOf(' ') + 1).split(',');\n    if(idArray !== null) {\n        var mmdbid = idArray[0].split('_')[0];\n        if(!me.b2DShown) me.download2Ddgm(mmdbid.toUpperCase());\n\n        me.selectInteraction(idArray[0], idArray[1]);\n    }\n  }\n\n  else if(commandOri.indexOf('select saved atoms') == 0) {\n    var paraArray = commandOri.split(' | '); // atom names might be case-sensitive\n\n    var select = paraArray[0].replace(/,/g, ' or ');\n\n//    var commandname;\n//    if(paraArray.length == 2) commandname = paraArray[1].substr(5); // 'name ...'\n\n    var pos = 19; // 'select saved atoms '\n    var strSets = select.substr(pos);\n\n    var commandname = strSets;\n\n    me.selectCombinedSets(strSets, commandname);\n  }\n  else if(commandOri.indexOf('select chain') !== -1) {\n    var idArray = commandOri.substr(commandOri.lastIndexOf(' ') + 1).split(',');\n\n    //if(idArray !== null) me.changeChainid(idArray);\n    for(var i = 0, il = idArray.length; i < il; ++i) {\n        me.selectAChain(idArray[i], idArray[i], false);\n    }\n  }\n  else if(commandOri.indexOf('select alignChain') !== -1) {\n    var idArray = commandOri.substr(commandOri.lastIndexOf(' ') + 1).split(',');\n\n    //if(idArray !== null) me.changeChainid(idArray);\n    for(var i = 0, il = idArray.length; i < il; ++i) {\n        me.selectAChain(idArray[i], 'align_' + idArray[i], true);\n    }\n  }\n  else if(command.indexOf('select zone cutoff') == 0) {\n    var radius = parseFloat(command.substr(command.lastIndexOf(' ') + 1));\n\n    me.pickCustomSphere(radius);\n  }\n  else if(command.indexOf('set surface opacity') == 0) {\n    var value = command.substr(command.lastIndexOf(' ') + 1);\n    me.icn3d.opts['opacity'] = value;\n    me.icn3d.applySurfaceOptions();\n  }\n  else if(command.indexOf('set surface') == 0) {\n    var value = command.substr(12);\n\n    me.icn3d.opts['surface'] = value;\n    me.icn3d.applySurfaceOptions();\n  }\n//  else if(command.indexOf('set map') == 0) {\n//    var value = command.substr(8);\n\n//    me.icn3d.opts['map'] = value;\n//    me.icn3d.applyMapOptions();\n//  }\n  else if(command.indexOf('set camera') == 0) {\n    var value = command.substr(command.lastIndexOf(' ') + 1);\n    me.icn3d.opts['camera'] = value;\n  }\n  else if(command.indexOf('set background') == 0) {\n    var value = command.substr(command.lastIndexOf(' ') + 1);\n    me.icn3d.opts['background'] = value;\n  }\n  else if(commandOri.indexOf('set thickness') == 0) {\n    var paraArray = command.split(' | ');\n\n    me.bSetThickness = true;\n\n    for(var i = 1, il = paraArray.length; i < il; ++i) {\n        var p1Array = paraArray[i].split(' ');\n\n        var para = p1Array[0];\n        var value = parseFloat(p1Array[1]);\n\n        if(para == 'linerad') me.icn3d.lineRadius = value;\n        if(para == 'coilrad') me.icn3d.coilWidth = value;\n        if(para == 'stickrad') me.icn3d.cylinderRadius = value;\n        if(para == 'tracerad') me.icn3d.traceRadius = value;\n        if(para == 'ballscale') me.icn3d.dotSphereScale = value;\n\n        if(para == 'ribbonthick') me.icn3d.ribbonthickness = value;\n        if(para == 'proteinwidth') me.icn3d.helixSheetWidth = value;\n        if(para == 'nucleotidewidth') me.icn3d.nucleicAcidWidth = value;\n\n        me.icn3d.draw();\n    }\n  }\n  else if(command.indexOf('set highlight color') == 0) {\n       var color = command.substr(20);\n       if(color === 'yellow') {\n           me.icn3d.hColor = new THREE.Color(0xFFFF00);\n           me.icn3d.matShader = me.icn3d.setOutlineColor('yellow');\n       }\n       else if(color === 'green') {\n           me.icn3d.hColor = new THREE.Color(0x00FF00);\n           me.icn3d.matShader = me.icn3d.setOutlineColor('green');\n       }\n       else if(color === 'red') {\n           me.icn3d.hColor = new THREE.Color(0xFF0000);\n           me.icn3d.matShader = me.icn3d.setOutlineColor('red');\n       }\n       me.icn3d.draw(); // required to make it work properly\n  }\n  else if(command.indexOf('set highlight style') == 0) {\n        var style = command.substr(20);\n\n       if(style === 'outline') {\n           me.icn3d.bHighlight = 1;\n       }\n       else if(style === '3d') {\n           me.icn3d.bHighlight = 2;\n       }\n\n       me.icn3d.draw();\n  }\n  else if(command.indexOf('add line') == 0) {\n    var paraArray = command.split(' | ');\n    var p1Array = paraArray[1].split(' ');\n    var p2Array = paraArray[2].split(' ');\n    var color = paraArray[3].substr(paraArray[3].lastIndexOf(' ') + 1);\n    var dashed = paraArray[4].substr(paraArray[4].lastIndexOf(' ') + 1) === 'true' ? true : false;\n    var type = paraArray[5].substr(paraArray[5].lastIndexOf(' ') + 1);\n\n    me.addLine(parseFloat(p1Array[1]), parseFloat(p1Array[3]), parseFloat(p1Array[5]), parseFloat(p2Array[1]), parseFloat(p2Array[3]), parseFloat(p2Array[5]), color, dashed, type);\n    me.icn3d.draw();\n  }\n  else if(commandOri.indexOf('add label') == 0) {\n    var paraArray = commandOri.split(' | ');\n    var text = paraArray[0].substr(('add label').length + 1);\n\n    // add label Text | x 40.45 y 24.465000000000003 z 53.48 | size 40 | color #ffff00 | background #cccccc | type custom\n    var x,y,z, size, color, background, type;\n    var bPosition = false;\n    for(var i = 1, il = paraArray.length; i < il; ++i) {\n        var wordArray = paraArray[i].split(' ');\n\n        if(wordArray[0] == 'x') {\n            bPosition = true;\n            x = wordArray[1];\n            y = wordArray[3];\n            z = wordArray[5];\n        }\n        else if(wordArray[0] == 'size') {\n            size = paraArray[i].substr(paraArray[i].lastIndexOf(' ') + 1);\n        }\n        else if(wordArray[0] == 'color') {\n            color = paraArray[i].substr(paraArray[i].lastIndexOf(' ') + 1);\n        }\n        else if(wordArray[0] == 'background') {\n            background = paraArray[i].substr(paraArray[i].lastIndexOf(' ') + 1);\n        }\n        else if(wordArray[0] == 'type') {\n            type = paraArray[i].substr(paraArray[i].lastIndexOf(' ') + 1);\n        }\n    }\n\n    if(!bPosition) {\n      var position = me.icn3d.centerAtoms(me.icn3d.hash2Atoms(me.icn3d.hAtoms));\n      x = position.center.x;\n      y = position.center.y;\n      z = position.center.z;\n    }\n\n    me.addLabel(text, x,y,z, size, color, background, type);\n    me.icn3d.draw();\n  }\n  else if(commandOri.indexOf('add track') == 0) {\n      //\"add track | chainid \" + chainid + \" | title \" + title + \" | text \" + text\n      var paraArray = commandOri.split(' | ');\n\n      //var chainid = paraArray[1].substr(8).toUpperCase();\n      var chainid = paraArray[1].substr(8);\n      var title = paraArray[2].substr(6);\n      var text = paraArray[3].substr(5);\n\n      $(\"#\" + me.pre + \"anno_custom\")[0].checked = true;\n      $(\"[id^=\" + me.pre + \"custom]\").show();\n\n      me.checkGiSeq(chainid, title, text, 0);\n  }\n  else if(command.indexOf('remove one stabilizer') == 0) {\n    var paraArray = command.split(' | ');\n    var p1Array = paraArray[1].split(' ');\n\n    var rmLineArray = [];\n    rmLineArray.push(parseInt(p1Array[0]));\n    rmLineArray.push(parseInt(p1Array[1]));\n\n    me.removeOneStabilizer(rmLineArray);\n\n    //me.updateStabilizer();\n\n    me.icn3d.draw();\n  }\n  else if(command.indexOf('add one stabilizer') == 0) {\n    var paraArray = command.split(' | ');\n    var p1Array = paraArray[1].split(' ');\n\n     if(me.icn3d.pairArray === undefined) me.icn3d.pairArray = [];\n     me.icn3d.pairArray.push(parseInt(p1Array[0]));\n     me.icn3d.pairArray.push(parseInt(p1Array[1]));\n\n     //me.updateStabilizer();\n\n     me.icn3d.draw();\n  }\n\n// start with, single word =============\n  else if(command.indexOf('pickatom') == 0) {\n    var atomid = parseInt(command.substr(command.lastIndexOf(' ') + 1));\n\n    me.icn3d.pAtom = me.icn3d.atoms[atomid];\n\n    me.icn3d.showPicking(me.icn3d.pAtom);\n  }\n  else if(command.indexOf('hbonds') == 0) {\n    var threshold = parseFloat(command.substr(command.indexOf(' ') + 1));\n\n    if(!isNaN(threshold)) me.showHbonds(threshold);\n  }\n  else if(command.indexOf('color') == 0) {\n    var color = command.substr(command.indexOf(' ') + 1);\n    me.icn3d.opts['color'] = color;\n\n    me.icn3d.setColorByOptions(me.icn3d.opts, me.icn3d.hAtoms);\n\n    me.updateHlAll();\n  }\n  else if(command.indexOf('style') == 0) {\n    var secondPart = command.substr(command.indexOf(' ') + 1);\n\n    var selectionType = secondPart.substr(0, secondPart.indexOf(' '));\n    var style = secondPart.substr(secondPart.indexOf(' ') + 1);\n\n    me.setStyle(selectionType, style);\n  }\n\n// special, select ==========\n\n  else if(command.indexOf('select') == 0 && command.indexOf('name') !== -1) {\n    var paraArray = commandOri.split(' | '); // atom names might be case-sensitive\n\n    var select = '', commandname = '', commanddesc = '';\n    for (var i = 0, il = paraArray.length; i < il; ++i) {\n        var para = paraArray[i];\n\n        if(para.indexOf('select') !== -1) {\n            select = para.substr(para.indexOf(' ') + 1);\n        }\n        else if(para.indexOf('name') !== -1) {\n            commandname = para.substr(para.indexOf(' ') + 1);\n        }\n//        else if(para.indexOf('description') !== -1) {\n//            commanddesc = para.substr(para.indexOf(' ') + 1);\n//        }\n    }\n\n//    if(paraArray.length < 3) commanddesc = commandname;\n    commanddesc = commandname;\n\n    me.selectByCommand(select, commandname, commanddesc);\n  }\n  else if(command.indexOf('select $') !== -1 || command.indexOf('select .') !== -1 || command.indexOf('select :') !== -1 || command.indexOf('select @') !== -1) {\n    var paraArray = commandOri.split(' | '); // atom names might be case-sensitive\n\n    var select = paraArray[0].substr(paraArray[0].indexOf(' ') + 1);\n    var commandname = '', commanddesc = '';\n\n    if(paraArray.length > 1) {\n        commandname = paraArray[1].substr(paraArray[1].indexOf(' ') + 1);\n    }\n\n    if(paraArray.length > 2) {\n        commanddesc = paraArray[2].substr(paraArray[2].indexOf(' ') + 1);\n    }\n\n    if(select.indexOf(' or ') !== -1) { // \"select \" command without \" | name\"\n        me.selectByCommand(select, commandname, commanddesc);\n    }\n    else { // only single query from selectByCommand()\n        me.selectBySpec(select, commandname, commanddesc);\n    }\n  }\n\n  if(bShowLog) {\n      me.setLogCmd(commandOri, false);\n  }\n\n  me.bAddCommands = true;\n};\n\n/**\n * @author Jiyao Wang <wangjiy@ncbi.nlm.nih.gov> / https://github.com/ncbi/icn3d\n */\n\niCn3DUI.prototype.selectResidues = function(id, that) { var me = this;\n  if(id !== undefined && id !== '') {\n    // add \"align_\" in front of id so that full sequence and aligned sequence will not conflict\n    //if(id.substr(0, 5) === 'align') id = id.substr(5);\n\n    // seq_div0_1TSR_A_1, align_div0..., giseq_div0..., snp_div0..., interaction_div0..., cddsite_div0..., domain_div0...\n    id = id.substr(id.indexOf('_') + 1);\n\n    me.bSelectResidue = true;\n\n    $(that).toggleClass('icn3d-highlightSeq');\n\n    var residueid = id.substr(id.indexOf('_') + 1);\n\n    if(me.icn3d.residues.hasOwnProperty(residueid)) {\n        if($(that).hasClass('icn3d-highlightSeq')) {\n          for(var j in me.icn3d.residues[residueid]) {\n            me.icn3d.hAtoms[j] = 1;\n          }\n          me.selectedResidues[residueid] = 1;\n\n          if(me.bAnnotations && $(that).attr('disease') !== undefined) {\n              var label = $(that).attr('disease');\n\n              var position = me.icn3d.centerAtoms(me.icn3d.hash2Atoms(me.icn3d.residues[residueid]));\n              //position.center.add(new THREE.Vector3(3.0, 3.0, 3.0)); // shift a little bit\n\n              var maxlen = 15;\n              if(label.length > maxlen) label = label.substr(0, maxlen) + '...';\n\n              //var size = parseInt(me.icn3d.LABELSIZE * 10 / label.length);\n              var size = me.icn3d.LABELSIZE;\n              var color = me.GREYD;\n              me.addLabel(label, position.center.x, position.center.y, position.center.z, size, color, undefined, 'custom');\n          }\n        }\n        else {\n            for (var i in me.icn3d.residues[residueid]) {\n              //me.icn3d.hAtoms[i] = undefined;\n              delete me.icn3d.hAtoms[i];\n            }\n            //me.selectedResidues[residueid] = undefined;\n            delete me.selectedResidues[residueid];\n\n            me.icn3d.removeHlObjects();\n        }\n    }\n  }\n};\n\niCn3DUI.prototype.selectTitle = function(that) { var me = this;\n  if($(that).hasClass('icn3d-seqTitle')) {\n    var chainid = $(that).attr('chain');\n\n    if(me.bAlignSeq) {\n        me.bSelectAlignResidue = false;\n    }\n    else {\n        me.bSelectResidue = false;\n    }\n\n    if(!me.bAnnotations) {\n        me.removeSeqChainBkgd(chainid);\n    }\n    //else {\n    //    me.removeSeqChainBkgd();\n    //}\n\n    if(!me.icn3d.bCtrl && !me.icn3d.bShift) {\n        me.removeSeqResidueBkgd();\n\n        me.removeSeqChainBkgd();\n    }\n\n    $(that).toggleClass('icn3d-highlightSeq');\n\n    var commandname, commanddescr, position;\n    if(!me.bAnnotations) {\n        if(me.bAlignSeq) {\n            commandname = \"align_\" + chainid;\n        }\n        else {\n            commandname = chainid;\n        }\n    }\n    else {\n        commandname = $(that).attr('setname');\n        commanddescr = $(that).attr('title');\n    }\n\n    if($(that).hasClass('icn3d-highlightSeq')) {\n        if(!me.bAnnotations) {\n            if(me.bAlignSeq) {\n                if(me.icn3d.bCtrl || me.icn3d.bShift) {\n                    me.selectAChain(chainid, commandname, true, true);\n                }\n                else {\n                    me.selectAChain(chainid, commandname, true);\n                }\n\n                me.setLogCmd('select alignChain ' + chainid, true);\n            }\n            else {\n                if(me.icn3d.bCtrl || me.icn3d.bShift) {\n                    me.selectAChain(chainid, commandname, false, true);\n                }\n                else {\n                    me.selectAChain(chainid, commandname, false);\n                }\n\n                me.setLogCmd('select chain ' + chainid, true);\n            }\n        }\n        else {\n            if($(that).hasClass('icn3d-highlightSeq')) {\n                me.removeHl2D();\n\n                if($(that).attr('gi') !== undefined) {\n                    if(me.icn3d.bCtrl || me.icn3d.bShift) {\n                        me.selectAChain(chainid, chainid, false, true);\n                    }\n                    else {\n                        me.selectAChain(chainid, chainid, false);\n                    }\n\n                    me.setLogCmd('select chain ' + chainid, true);\n                }\n                else {\n                    var residueidHash = {};\n                    if($(that).attr('domain') !== undefined || $(that).attr('3ddomain') !== undefined) {\n                        me.hlSummaryDomain3ddomain(that);\n\n                        var fromArray = $(that).attr('from').split(',');\n                        var toArray = $(that).attr('to').split(',');\n\n                        //me.icn3d.hAtoms = {};\n\n                        //removeAllLabels();\n\n                        // protein chains\n                        //var atomHash = {}, residueidHash = {};\n                        var residueid;\n                        for(var i = 0, il = fromArray.length; i < il; ++i) {\n                            var from = parseInt(fromArray[i]);\n                            var to = parseInt(toArray[i]);\n\n                            for(var j = from; j <= to; ++j) {\n                                residueid = chainid + '_' + (j+1).toString();\n                                residueidHash[residueid] = 1;\n\n                                //atomHash = me.icn3d.unionHash(atomHash, me.icn3d.residues[residueid]);\n                            }\n                        }\n\n                        if(me.icn3d.bCtrl || me.icn3d.bShift) {\n                            me.selectResidueList(residueidHash, commandname, commanddescr, true);\n                        }\n                        else {\n                            me.selectResidueList(residueidHash, commandname, commanddescr, false);\n                        }\n\n                        //me.updateHlAll();\n\n                        residueid = chainid + '_' + parseInt((from + to)/2).toString();\n                        //residueid = chainid + '_' + from.toString();\n                        position = me.icn3d.centerAtoms(me.icn3d.hash2Atoms(me.icn3d.residues[residueid]));\n                    }\n                    //else if($(that).attr('site') !== undefined || $(that).attr('clinvar') !== undefined) {\n                    else {\n                        var posArray = $(that).attr('posarray').split(',');\n\n                        //me.icn3d.hAtoms = {};\n\n                        //removeAllLabels();\n\n                        //var  atomHash = {}, residueidHash = {};\n                        var residueid;\n                        for(var i = 0, il = posArray.length; i < il; ++i) {\n                            if($(that).attr('site') !== undefined) {\n                                residueid = chainid + '_' + (parseInt(posArray[i])+1).toString();\n                            }\n                            //else if($(that).attr('clinvar') !== undefined) {\n                            else {\n                                residueid = chainid + '_' + posArray[i];\n                            }\n\n                            residueidHash[residueid] = 1;\n                            //atomHash = me.icn3d.unionHash(atomHash, me.icn3d.residues[residueid]);\n                        }\n\n                        if(me.icn3d.bCtrl || me.icn3d.bShift) {\n                            me.selectResidueList(residueidHash, commandname, commanddescr, true);\n                        }\n                        else {\n                            me.selectResidueList(residueidHash, commandname, commanddescr, false);\n                        }\n\n                        //me.updateHlAll();\n\n                        residueid = chainid + '_' + posArray[parseInt((0 + posArray.length)/2)].toString();\n                        //residueid = chainid + '_' + posArray[0].toString();\n                        position = me.icn3d.centerAtoms(me.icn3d.hash2Atoms(me.icn3d.residues[residueid]));\n                    }\n\n                    //removeAllLabels\n                    for(var name in me.icn3d.labels) {\n                        //if(name === 'residue' || name === 'custom' || name === 'clinvar') {\n                        if(name !== 'schematic' && name !== 'distance') {\n                           me.icn3d.labels[name] = [];\n                        }\n                    }\n\n                    //var size = parseInt(me.icn3d.LABELSIZE * 10 / commandname.length);\n                    var size = me.icn3d.LABELSIZE;\n                    var color = \"FFFF00\";\n                    me.addLabel(commanddescr, position.center.x, position.center.y, position.center.z, size, color, undefined, 'custom');\n\n//                        me.icn3d.addHlObjects();\n//                        me.updateHl2D([chainid]);\n\n                    me.icn3d.draw();\n\n                    //me.setLogCmd('select ' + commandname, true);\n                    //me.setLogCmd('select ' + me.residueids2spec(Object.keys(residueidHash)) + ' | name ' + commandname + ' | description ' + commanddescr, true);\n                    me.setLogCmd('select ' + me.residueids2spec(Object.keys(residueidHash)) + ' | name ' + commandname, true);\n                } // if($(that).attr('gi') !== undefined) {\n            } // if($(that).hasClass('icn3d-highlightSeq')) {\n        } // if(!me.bAnnotations) {\n    } // if($(that).hasClass('icn3d-highlightSeq')) {\n    else {\n        me.icn3d.removeHlObjects();\n        me.removeHl2D();\n\n        //me.icn3d.hAtoms = {};\n\n       $(\"#\" + me.pre + \"atomsCustom\").val(\"\");\n    }\n\n  }\n};\n\niCn3DUI.prototype.selectSequenceNonMobile = function() { var me = this;\n  //$(\"#\" + me.pre + \"dl_sequence\").add(\"#\" + me.pre + \"dl_sequence2\").add(\"#\" + me.pre + \"dl_annotations\").selectable({\n  $(\"#\" + me.pre + \"dl_sequence2\").add(\"[id^=\" + me.pre + \"dt_giseq]\").add(\"[id^=\" + me.pre + \"dt_site]\").add(\"[id^=\" + me.pre + \"dt_snp]\").add(\"[id^=\" + me.pre + \"dt_clinvar]\").add(\"[id^=\" + me.pre + \"dt_cdd]\").add(\"[id^=\" + me.pre + \"dt_domain]\").add(\"[id^=\" + me.pre + \"dt_interaction]\").add(\"[id^=\" + me.pre + \"dt_ssbond]\")\n  .add(\"[id^=\" + me.pre + \"tt_giseq]\").add(\"[id^=\" + me.pre + \"tt_site]\").add(\"[id^=\" + me.pre + \"tt_snp]\").add(\"[id^=\" + me.pre + \"tt_clinvar]\").add(\"[id^=\" + me.pre + \"tt_cdd]\").add(\"[id^=\" + me.pre + \"tt_domain]\").add(\"[id^=\" + me.pre + \"tt_interaction]\").add(\"[id^=\" + me.pre + \"tt_ssbond]\")\n  .selectable({\n  //$(\".icn3d-dl_sequence\").selectable({\n      stop: function() {\n          if($(this).attr('id') === me.pre + \"dl_sequence2\") {\n              me.bAlignSeq = true;\n              me.bAnnotations = false;\n          }\n          //else if($(this).attr('id') === me.pre + \"dl_annotations\") {\n          else {\n              me.bAlignSeq = false;\n              me.bAnnotations = true;\n          }\n\n          if(me.bSelectResidue === false && !me.icn3d.bShift && !me.icn3d.bCtrl) {\n              me.removeSelection();\n          }\n\n          // select residues\n          $(\"span.ui-selected\", this).each(function() {\n              var id = $(this).attr('id');\n\n              if(id !== undefined) {\n                 me.selectResidues(id, this);\n             }\n          });\n\n/*\n          if(me.bAnnotations) {\n              me.icn3d.addResiudeLabels(me.icn3d.hAtoms);\n\n              me.icn3d.draw();\n          }\n          else {\n              me.icn3d.addHlObjects();  // render() is called\n          }\n*/\n\n          //me.icn3d.addResiudeLabels(me.icn3d.hAtoms, false, 0.5);\n          me.icn3d.addHlObjects();  // render() is called\n\n          // get all chainid in the selected residues\n          var chainHash = {};\n          for(var residueid in me.selectedResidues) {\n              var pos = residueid.lastIndexOf('_');\n              var chainid = residueid.substr(0, pos);\n\n              chainHash[chainid] = 1;\n          }\n\n          // highlight the nodes\n          var chainArray2d = Object.keys(chainHash);\n          me.updateHl2D(chainArray2d);\n\n          // select annotation title\n          $(\"div.ui-selected\", this).each(function() {\n              if($(this).attr('chain') !== undefined) {\n\n                  me.selectTitle(this);\n              }\n          });\n      }\n  });\n\n  $(\"[id^=\" + me.pre + \"ov_giseq]\").add(\"[id^=\" + me.pre + \"ov_site]\").add(\"[id^=\" + me.pre + \"ov_snp]\").add(\"[id^=\" + me.pre + \"ov_clinvar]\").add(\"[id^=\" + me.pre + \"ov_cdd]\").add(\"[id^=\" + me.pre + \"ov_domain]\").add(\"[id^=\" + me.pre + \"ov_interaction]\").add(\"[id^=\" + me.pre + \"ov_ssbond]\")\n  .add(\"[id^=\" + me.pre + \"tt_giseq]\").add(\"[id^=\" + me.pre + \"tt_site]\").add(\"[id^=\" + me.pre + \"tt_snp]\").add(\"[id^=\" + me.pre + \"tt_clinvar]\").add(\"[id^=\" + me.pre + \"tt_cdd]\").add(\"[id^=\" + me.pre + \"tt_domain]\").add(\"[id^=\" + me.pre + \"tt_interaction]\").add(\"[id^=\" + me.pre + \"tt_ssbond]\")\n  .on('click', '.icn3d-seqTitle', function(e) {\n      e.stopImmediatePropagation();\n\n      me.bAlignSeq = false;\n      me.bAnnotations = true;\n\n      // select annotation title\n      //$(\"div .ui-selected\", this).each(function() {\n          me.selectTitle(this);\n\n          me.hlSummaryDomain3ddomain(this);\n       //});\n  });\n};\n\niCn3DUI.prototype.hlSummaryDomain3ddomain = function(that) { var me = this;\n  if($(that).attr('domain') !== undefined) { // domain\n    var index = $(that).attr('index');\n    var chainid = $(that).attr('chain');\n\n    if($(\"[id^=\" + chainid + \"_domain_\" + index + \"]\").length !== 0) {\n        $(\"[id^=\" + chainid + \"_domain_\" + index + \"]\").addClass('icn3d-highlightSeqBox');\n    }\n  }\n\n  if($(that).attr('3ddomain') !== undefined) { // 3d domain\n    var index = $(that).attr('index');\n    var chainid = $(that).attr('chain');\n\n    if($(\"[id^=\" + chainid + \"_3d_domain_\" + index + \"]\").length !== 0) {\n        $(\"[id^=\" + chainid + \"_3d_domain_\" + index + \"]\").addClass('icn3d-highlightSeqBox');\n    }\n  }\n};\n\niCn3DUI.prototype.selectSequenceMobile = function() { var me = this;\n  $(\"#\" + me.pre + \"dl_sequence2\").add(\"[id^=\" + me.pre + \"giseq]\").add(\"[id^=\" + me.pre + \"site]\").add(\"[id^=\" + me.pre + \"clinvar]\").add(\"[id^=\" + me.pre + \"snp]\").add(\"[id^=\" + me.pre + \"cdd]\").add(\"[id^=\" + me.pre + \"domain]\").add(\"[id^=\" + me.pre + \"interaction]\").add(\"[id^=\" + me.pre + \"ssbond]\").on('click', '.icn3d-residue', function(e) {\n  //$(\".icn3d-dl_sequence\").on('click', '.icn3d-residue', function(e) {\n      e.stopImmediatePropagation();\n\n      if($(this).attr('id') === me.pre + \"dl_sequence2\") {\n          me.bAlignSeq = true;\n          me.bAnnotations = false;\n      }\n      //else if($(this).attr('id') === me.pre + \"dl_annotations\") {\n      else {\n          me.bAlignSeq = false;\n          me.bAnnotations = true;\n      }\n\n      // select residues\n      //$(\"span.ui-selected\", this).each(function() {\n          var id = $(this).attr('id');\n\n          if(id !== undefined) {\n               me.selectResidues(id, this);\n         }\n      //});\n\n/*\n      if(me.bAnnotations) {\n          me.icn3d.addResiudeLabels(me.icn3d.hAtoms);\n\n          me.icn3d.draw();\n      }\n      else {\n          me.icn3d.addHlObjects();  // render() is called\n      }\n*/\n\n      //me.icn3d.addResiudeLabels(me.icn3d.hAtoms, false, 0.5);\n       me.icn3d.addHlObjects();  // render() is called\n\n      // get all chainid in the selected residues\n      var chainHash = {};\n      for(var residueid in me.selectedResidues) {\n          var pos = residueid.lastIndexOf('_');\n          var chainid = residueid.substr(0, pos);\n\n          chainHash[chainid] = 1;\n      }\n\n      // clear nodes in 2d dgm\n      me.removeHl2D();\n\n      // highlight the nodes\n      var chainArray2d = Object.keys(chainHash);\n      me.updateHl2D(chainArray2d);\n  });\n};\n\niCn3DUI.prototype.selectChainMobile = function() { var me = this;\n  $(\"#\" + me.pre + \"dl_sequence2\").add(\"[id^=\" + me.pre + \"giseq]\").add(\"[id^=\" + me.pre + \"site]\").add(\"[id^=\" + me.pre + \"clinvar]\").add(\"[id^=\" + me.pre + \"snp]\").add(\"[id^=\" + me.pre + \"cdd]\").add(\"[id^=\" + me.pre + \"domain]\").add(\"[id^=\" + me.pre + \"interaction]\").add(\"[id^=\" + me.pre + \"ssbond]\").on('click', '.icn3d-seqTitle', function(e) {\n  //$(\".icn3d-dl_sequence\").on('click', '.icn3d-seqTitle', function(e) {\n      e.stopImmediatePropagation();\n\n      if($(this).attr('id') === me.pre + \"dl_sequence2\") {\n          me.bAlignSeq = true;\n          me.bAnnotations = false;\n      }\n      //else if($(this).attr('id') === me.pre + \"dl_annotations\") {\n      else {\n          me.bAlignSeq = false;\n          me.bAnnotations = true;\n      }\n\n      // select annotation title\n      //$(\"div.ui-selected\", this).each(function() {\n          me.selectTitle(this);\n\n          me.hlSummaryDomain3ddomain(this);\n      //});\n  });\n};\n\n// remove highlight of chains\niCn3DUI.prototype.removeSeqChainBkgd = function(currChain) {\n  if(currChain === undefined) {\n    $( \".icn3d-seqTitle\" ).each(function( index ) {\n      $( this ).removeClass('icn3d-highlightSeq');\n      $( this ).removeClass('icn3d-highlightSeqBox');\n    });\n  }\n  else {\n    $( \".icn3d-seqTitle\" ).each(function( index ) {\n      if($(this).attr('chain') !== currChain) {\n          $( this ).removeClass('icn3d-highlightSeq');\n          $( this ).removeClass('icn3d-highlightSeqBox');\n      }\n    });\n  }\n};\n\n// remove all highlighted residue color\niCn3DUI.prototype.removeSeqResidueBkgd = function() {\n    $( \".icn3d-residue\" ).each(function( index ) {\n      $( this ).removeClass('icn3d-highlightSeq');\n    });\n};\n\n\n/**\n * @author Jiyao Wang <wangjiy@ncbi.nlm.nih.gov> / https://github.com/ncbi/icn3d\n */\n\niCn3DUI.prototype.update2DdgmContent = function () { var me = this;\n   // update 2D diagram to show just the displayed parts\n   var html2ddgm = '';\n   if(me.cfg.mmdbid !== undefined || me.cfg.gi !== undefined) {\n      html2ddgm += me.draw2Ddgm(me.interactionData, me.inputid, undefined, true);\n      html2ddgm += me.set2DdgmNote();\n\n      $(\"#\" + me.pre + \"dl_2ddgm\").html(html2ddgm);\n   }\n   else if(me.cfg.align !== undefined) {\n      html2ddgm += me.draw2Ddgm(me.interactionData1, me.mmdbidArray[0].toUpperCase(), 0, true);\n      html2ddgm += me.draw2Ddgm(me.interactionData2, me.mmdbidArray[1].toUpperCase(), 1, true);\n      html2ddgm += me.set2DdgmNote(true);\n\n      $(\"#\" + me.pre + \"dl_2ddgm\").html(html2ddgm);\n   }\n};\n\niCn3DUI.prototype.changeSeqColor = function(residueArray) { var me = this;\n   for(var i = 0, il = residueArray.length; i < il; ++i) {\n       var pickedResidue = residueArray[i];\n       if($(\"[id$=\" + me.pre + pickedResidue + \"]\").length !== 0) {\n         var atom = me.icn3d.getFirstCalphaAtomObj(me.icn3d.residues[pickedResidue]);\n         var color = (atom.color !== undefined) ? \"#\" + atom.color.getHexString() : me.icn3d.defaultAtomColor;\n         //$(\"[id$=\" + me.pre + pickedResidue + \"]\").attr('style', 'color:' + color);\n         // annotations will have their own color, only the chain will have the changed color\n         $(\"[id=giseq_\" + me.pre + pickedResidue + \"]\").attr('style', 'color:' + color);\n         if(me.cfg.align !== undefined) $(\"[id=align_\" + me.pre + pickedResidue + \"]\").attr('style', 'color:' + color);\n       }\n   }\n};\n\niCn3DUI.prototype.removeHlAll = function() { var me = this;\n       me.removeHlObjects();\n       me.removeHlSeq();\n       me.removeHl2D();\n       me.removeHlMenus();\n};\n\niCn3DUI.prototype.removeHlObjects = function() { var me = this;\n       me.icn3d.removeHlObjects();\n};\n\n// remove highlight in sequence\niCn3DUI.prototype.removeHlSeq = function() { var me = this;\n//       me.removeSeqChainBkgd();\n       me.removeSeqResidueBkgd();\n};\n\n// remove highlight in 2D window\niCn3DUI.prototype.removeHl2D = function() { var me = this;\n      // clear nodes in 2d dgm\n      $(\"#\" + me.pre + \"dl_2ddgm rect\").attr('stroke', '#000000');\n      $(\"#\" + me.pre + \"dl_2ddgm circle\").attr('stroke', '#000000');\n      $(\"#\" + me.pre + \"dl_2ddgm polygon\").attr('stroke', '#000000');\n\n      $(\"#\" + me.pre + \"dl_2ddgm svg line\").attr('stroke', '#000000');\n\n      $(\"#\" + me.pre + \"dl_2ddgm rect\").attr('stroke-width', 1);\n      $(\"#\" + me.pre + \"dl_2ddgm circle\").attr('stroke-width', 1);\n      $(\"#\" + me.pre + \"dl_2ddgm polygon\").attr('stroke-width', 1);\n\n      $(\"#\" + me.pre + \"dl_2ddgm line\").attr('stroke-width', 1);\n};\n\n// remove highlight in the menu of defined sets\niCn3DUI.prototype.removeHlMenus = function() { var me = this;\n    $(\"#\" + me.pre + \"atomsCustom\").val(\"\");\n};\n\niCn3DUI.prototype.updateHlAll = function(commandnameArray, bSetMenu, bUnion, bForceHighlight) { var me = this;\n       me.updateHlObjects(bForceHighlight);\n\n       if(commandnameArray !== undefined) {\n           me.updateHlSeqInChain(commandnameArray, bUnion);\n       }\n       else {\n           me.updateHlSeq(undefined, undefined, bUnion);\n       }\n\n       me.updateHl2D();\n       if(bSetMenu === undefined || bSetMenu) me.updateHlMenus(commandnameArray);\n\n       //me.showAnnoSelectedChains();\n};\n\niCn3DUI.prototype.updateHlObjects = function(bForceHighlight) { var me = this;\n       me.icn3d.removeHlObjects();\n\n       if(Object.keys(me.icn3d.hAtoms).length < Object.keys(me.icn3d.atoms).length || bForceHighlight) {\n           me.icn3d.addHlObjects();\n       }\n};\n\n// update highlight in sequence, slow if sequence is long\niCn3DUI.prototype.updateHlSeq = function(bShowHighlight, residueHash, bUnion) { var me = this;\n       if(bUnion === undefined || !bUnion) {\n           me.removeHlSeq();\n       }\n\n       if(residueHash === undefined) residueHash = me.icn3d.getResiduesFromCalphaAtoms(me.icn3d.hAtoms);\n\n       if(Object.keys(me.icn3d.hAtoms).length < Object.keys(me.icn3d.atoms).length) me.hlSeq(Object.keys(residueHash));\n       me.changeSeqColor(Object.keys(residueHash));\n};\n\niCn3DUI.prototype.updateHlSeqInChain = function(commandnameArray, bUnion) { var me = this;\n       if(bUnion === undefined || !bUnion) {\n           me.removeHlSeq();\n       }\n       //if(residueHash === undefined) residueHash = me.icn3d.getResiduesFromCalphaAtoms(me.icn3d.hAtoms);\n\n       if(Object.keys(me.icn3d.hAtoms).length == Object.keys(me.icn3d.atoms).length) return;\n\n       //me.hlSeq(Object.keys(residueHash));\n       // speed up with chain highlight\n       for(var i = 0, il = commandnameArray.length; i < il; ++i) {\n           var commandname = commandnameArray[i];\n           if(Object.keys(me.icn3d.chains).indexOf(commandname) !== -1) {\n               me.hlSeqInChain(commandname);\n           }\n           else {\n               var residueArray = [];\n\n               if(me.icn3d.defNames2Residues[commandname] !== undefined && me.icn3d.defNames2Residues[commandname].length > 0) {\n                   residueArray = me.icn3d.defNames2Residues[commandname];\n               }\n\n               var residueHash = {};\n               if(me.icn3d.defNames2Atoms[commandname] !== undefined && me.icn3d.defNames2Atoms[commandname].length > 0) {\n                   for(var j = 0, jl = me.icn3d.defNames2Atoms[commandname].length; j < jl; ++j) {\n                       var serial = me.icn3d.defNames2Atoms[commandname][j];\n                       var atom = me.icn3d.atoms[serial];\n                       var resid = atom.structure + '_' + atom.chain + '_' + atom.resi;\n\n                       residueHash[resid] = 1;\n                   }\n\n                   residueArray = residueArray.concat(Object.keys(residueHash));\n               }\n\n               me.hlSeq(residueArray);\n           }\n       }\n\n       //me.changeSeqColor(Object.keys(residueHash));\n};\n\n// update highlight in 2D window\niCn3DUI.prototype.updateHl2D = function(chainArray2d) { var me = this;\n  me.removeHl2D();\n\n  if(Object.keys(me.icn3d.hAtoms).length == Object.keys(me.icn3d.atoms).length) return;\n\n  if(chainArray2d === undefined) {\n      var chainHash = me.icn3d.getChainsFromAtoms(me.icn3d.hAtoms);\n      chainArray2d = Object.keys(chainHash);\n  }\n\n  if(chainArray2d !== undefined) {\n      for(var i = 0, il = chainArray2d.length; i < il; ++i) {\n          var hlatoms = me.icn3d.intHash(me.icn3d.chains[chainArray2d[i]], me.icn3d.hAtoms);\n          var ratio = 1.0 * Object.keys(hlatoms).length / Object.keys(me.icn3d.chains[chainArray2d[i]]).length;\n\n          var firstAtom = me.icn3d.getFirstCalphaAtomObj(hlatoms);\n          if(me.icn3d.alnChains[chainArray2d[i]] !== undefined) {\n                var alignedAtoms = me.icn3d.intHash(me.icn3d.alnChains[chainArray2d[i]], hlatoms);\n                if(Object.keys(alignedAtoms).length > 0) firstAtom = me.icn3d.getFirstCalphaAtomObj(alignedAtoms);\n            }\n          var color = (firstAtom !== undefined && firstAtom.color !== undefined) ? '#' + firstAtom.color.getHexString() : '#FFFFFF';\n\n          var target = $(\"#\" + me.pre + \"dl_2ddgm g[chainid=\" + chainArray2d[i] + \"] rect[class='icn3d-hlnode']\");\n          var base = $(\"#\" + me.pre + \"dl_2ddgm g[chainid=\" + chainArray2d[i] + \"] rect[class='icn3d-basenode']\");\n          if(target !== undefined) {\n              me.highlightNode('rect', target, base, ratio);\n              $(target).attr('fill', color);\n          }\n\n          target = $(\"#\" + me.pre + \"dl_2ddgm g[chainid=\" + chainArray2d[i] + \"] circle[class='icn3d-hlnode']\");\n          base = $(\"#\" + me.pre + \"dl_2ddgm g[chainid=\" + chainArray2d[i] + \"] circle[class='icn3d-basenode']\");\n          if(target !== undefined) {\n                me.highlightNode('circle', target, base, ratio);\n                $(target).attr('fill', color);\n          }\n\n          target = $(\"#\" + me.pre + \"dl_2ddgm g[chainid=\" + chainArray2d[i] + \"] polygon[class='icn3d-hlnode']\");\n          base = $(\"#\" + me.pre + \"dl_2ddgm g[chainid=\" + chainArray2d[i] + \"] polygon[class='icn3d-basenode']\");\n\n          if(target !== undefined) {\n              me.highlightNode('polygon', target, base, ratio);\n              $(target).attr('fill', color);\n          }\n      }\n  }\n\n  if(me.lineArray2d !== undefined) {\n      for(var i = 0, il = me.lineArray2d.length; i < il; i += 2) {\n          $(\"#\" + me.pre + \"dl_2ddgm g[chainid1=\" + me.lineArray2d[i] + \"][chainid2=\" + me.lineArray2d[i + 1] + \"] line\").attr('stroke', me.ORANGE);\n      }\n  }\n\n  // update the previously highlisghted atoms for switching between all and selection\n  me.icn3d.prevHighlightAtoms = me.icn3d.cloneHash(me.icn3d.hAtoms);\n\n  me.setMode('selection');\n};\n\n// update highlight in the menu of defined sets\niCn3DUI.prototype.updateHlMenus = function(commandnameArray) { var me = this;\n    if(commandnameArray === undefined) commandnameArray = [];\n\n    var definedAtomsHtml = me.setAtomMenu(commandnameArray);\n\n    if($(\"#\" + me.pre + \"atomsCustom\").length) {\n        $(\"#\" + me.pre + \"atomsCustom\").html(definedAtomsHtml);\n    }\n};\n\niCn3DUI.prototype.setAtomMenu = function (commandnameArray) { var me = this;\n  var html = \"\";\n\n  var nameArray1 = (me.icn3d.defNames2Residues !== undefined) ? Object.keys(me.icn3d.defNames2Residues) : [];\n  var nameArray2 = (me.icn3d.defNames2Atoms !== undefined) ? Object.keys(me.icn3d.defNames2Atoms) : [];\n\n  var nameArray = nameArray1.concat(nameArray2).sort();\n\n  //for(var i in me.icn3d.defNames2Atoms) {\n  for(var i = 0, il = nameArray.length; i < il; ++i) {\n      var name = nameArray[i];\n\n      var atom, atomHash;\n      if(me.icn3d.defNames2Atoms !== undefined && me.icn3d.defNames2Atoms.hasOwnProperty(name)) {\n          var atomArray = me.icn3d.defNames2Atoms[name];\n\n          if(atomArray.length > 0) atom = me.icn3d.atoms[atomArray[0]];\n      }\n      else if(me.icn3d.defNames2Residues !== undefined && me.icn3d.defNames2Residues.hasOwnProperty(name)) {\n          var residueArray = me.icn3d.defNames2Residues[name];\n          if(residueArray.length > 0) {\n              atomHash = me.icn3d.residues[residueArray[0]]\n              if(atomHash) {\n                  atom = me.icn3d.atoms[Object.keys(atomHash)[0]];\n              }\n          }\n      }\n\n      var color = (atom !== undefined) ? atom.color.getHexString() : '000000';\n\n      if(commandnameArray.indexOf(name) != -1) {\n        html += \"<option value='\" + name + \"' style='color:#\" + color + \"' selected='selected'>\" + name + \"</option>\";\n      }\n      else {\n        html += \"<option value='\" + name + \"' style='color:#\" + color + \"'>\" + name + \"</option>\";\n      }\n  }\n\n  return html;\n};\n\niCn3DUI.prototype.setPredefinedInMenu = function() { var me = this;\n      // predefined sets: all chains\n      me.setChainsInMenu();\n\n      // predefined sets: proteins,nucleotides, chemicals\n      me.setProtNuclLigInMenu();\n\n      if(me.cfg.align !== undefined && me.bFullUi) {\n        me.selectResidueList(me.consHash1, me.conservedName1, me.conservedName1, false, false);\n        me.selectResidueList(me.consHash2, me.conservedName2, me.conservedName2, false, false);\n\n        me.selectResidueList(me.nconsHash1, me.nonConservedName1, me.nonConservedName1, false, false);\n        me.selectResidueList(me.nconsHash2, me.nonConservedName2, me.nonConservedName2, false, false);\n\n        me.selectResidueList(me.nalignHash1, me.notAlignedName1, me.notAlignedName1, false, false);\n        me.selectResidueList(me.nalignHash2, me.notAlignedName2, me.notAlignedName2, false, false);\n\n        // for alignment, show aligned residues, chemicals, and ions\n        var dAtoms = {};\n        for(var alignChain in me.icn3d.alnChains) {\n            dAtoms = me.icn3d.unionHash(dAtoms, me.icn3d.alnChains[alignChain]);\n        }\n\n        var residuesHash = {}, chains = {};\n        for(var i in dAtoms) {\n            var atom = me.icn3d.atoms[i];\n\n            var chainid = atom.structure + '_' + atom.chain;\n            var resid = chainid + '_' + atom.resi;\n            residuesHash[resid] = 1;\n            chains[chainid] = 1;\n        }\n\n        var commandname = 'aligned_protein';\n        var commanddescr = 'aligned protein and nucleotides';\n        var select = \"select \" + me.residueids2spec(Object.keys(residuesHash));\n\n        //me.addCustomSelection(Object.keys(residuesHash), Object.keys(dAtoms), commandname, commanddescr, select, true);\n        me.addCustomSelection(Object.keys(residuesHash), commandname, commanddescr, select, true);\n      }\n};\n\niCn3DUI.prototype.hlSeq = function(residueArray) { var me = this;\n   // update annotation windows and alignment sequences\n   var chainHash = {};\n   for(var i = 0, il = residueArray.length; i < il; ++i) {\n       var pickedResidue = residueArray[i];\n       if($(\"[id$=\" + me.pre + pickedResidue + \"]\").length !== 0) {\n         $(\"[id$=\" + me.pre + pickedResidue + \"]\").addClass('icn3d-highlightSeq');\n       }\n\n       var pos = pickedResidue.lastIndexOf('_');\n       var chainid = pickedResidue.substr(0, pos);\n\n       chainHash[chainid] = 1;\n   }\n\n   for(var chainid in chainHash) {\n       if($(\"#giseq_summary_\" + me.pre + chainid).length !== 0) {\n         $(\"#giseq_summary_\" + me.pre + chainid).addClass('icn3d-highlightSeqBox');\n       }\n   }\n};\n\niCn3DUI.prototype.hlSeqInChain = function(chainid) { var me = this;\n   // update annotation windows and alignment sequences\n   for(var i = 0, il = me.icn3d.chainsSeq[chainid].length; i < il; ++i) {\n       var resi = me.icn3d.chainsSeq[chainid][i].resi;\n       var pickedResidue = chainid + '_' + resi;\n\n       //if($(\"[id$=\" + me.pre + pickedResidue + \"]\").length !== 0) {\n       //  $(\"[id$=\" + me.pre + pickedResidue + \"]\").addClass('icn3d-highlightSeq');\n       //}\n       // too expensive to highlight all annotations\n       if($(\"#giseq_\" + me.pre + pickedResidue).length !== 0) {\n         $(\"#giseq_\" + me.pre + pickedResidue).addClass('icn3d-highlightSeq');\n       }\n   }\n\n   if($(\"#giseq_summary_\" + me.pre + chainid).length !== 0) {\n     $(\"#giseq_summary_\" + me.pre + chainid).addClass('icn3d-highlightSeqBox');\n   }\n};\n\niCn3DUI.prototype.toggleHighlight = function() { var me = this;\n    //me.setLogCmd(\"toggle highlight\", true);\n\n    if(me.icn3d.prevHighlightObjects.length > 0 || me.icn3d.prevHighlightObjects_ghost.length > 0) { // remove\n        me.clearHighlight();\n    }\n    else { // add\n        me.showHighlight();\n    }\n\n    me.setLogCmd(\"toggle highlight\", true);\n};\n\niCn3DUI.prototype.clearHighlight = function() { var me = this;\n    me.icn3d.labels['picking']=[];\n    me.icn3d.draw();\n\n    me.icn3d.removeHlObjects();\n    me.removeHl2D();\n    me.icn3d.render();\n\n    me.removeSeqChainBkgd();\n    me.removeSeqResidueBkgd();\n\n    me.bSelectResidue = false;\n};\n\niCn3DUI.prototype.showHighlight = function() { var me = this;\n    me.icn3d.addHlObjects();\n    me.updateHlAll();\n    //me.bSelectResidue = true;\n};\n\niCn3DUI.prototype.highlightChains = function(chainArray) { var me = this;\n    me.icn3d.removeHlObjects();\n    me.removeHl2D();\n\n    me.icn3d.addHlObjects();\n    me.updateHl2D(chainArray);\n\n    var residueHash = {};\n    for(var c = 0, cl = chainArray.length; c < cl; ++c) {\n        var chainid = chainArray[c];\n        for(var i in me.icn3d.chainsSeq[chainid]) { // get residue number\n            var resObj = me.icn3d.chainsSeq[chainid][i];\n            var residueid = chainid + \"_\" + resObj.resi;\n\n            if(resObj.name !== '' && resObj.name !== '-') {\n              residueHash[residueid] = 1;\n            }\n        }\n    }\n\n    me.hlSeq(Object.keys(residueHash));\n};\n\n\n/**\n * @author Jiyao Wang <wangjiy@ncbi.nlm.nih.gov> / https://github.com/ncbi/icn3d\n */\n\niCn3DUI.prototype.setTools = function() { var me = this;\n    var html = \"\";\n\n    html += \"  <div id='\" + me.pre + \"selection' style='display:none;'><div style='position:absolute; z-index:555; float:left; display:table-row; margin: 32px 0px 0px 3px;'>\";\n    html += \"    <table style='margin-top: 3px; width:100px;'><tr valign='center'>\";\n\n    html += me.setTools_base();\n\n    // add custom buttons here\n    // ...\n\n    html += \"    </tr></table>\";\n    html += \"  </div></div>\";\n\n    return html;\n};\n\niCn3DUI.prototype.setButton = function(buttonStyle, id, title, text) { var me = this;\n    var bkgdColor = me.isMobile() ? ' background-color:#DDDDDD;' : '';\n    return \"<div style='margin:3px 0px 0px 10px;'><button style='-webkit-appearance:\" + buttonStyle + \"; height:36px;\" + bkgdColor + \"' id='\" + me.pre + id + \"'><span style='white-space:nowrap' class='icn3d-commandTitle' title='\" + title + \"'>\" + text + \"</span></button></div>\";\n};\n\niCn3DUI.prototype.setTools_base = function() { var me = this;\n    // second row\n    var html = \"\";\n\n    var buttonStyle = me.isMobile() ? 'none' : 'button';\n\n    html += \"      <td valign='top'>\" + me.setButton(buttonStyle, 'saveimage', 'Save iCn3D PNG Image', 'Save iCn3D<br/>PNG Image') + \"</td>\";\n\n    if(me.cfg.cid === undefined) {\n        //html += \"      <td valign='top'>\" + me.setButton(buttonStyle, 'definedSets', 'Select defined structure, chain, and custom sets', 'Defined <br/>Sets') + \"</td>\";\n        html += \"      <td valign='top'>\" + me.setButton(buttonStyle, 'definedsets', 'Defined Sets', 'Defined<br/>Sets') + \"</td>\";\n\n        html += \"      <td valign='top'>\" + me.setButton(buttonStyle, 'show_annotations', 'View sequences and annotations for each chain', 'View Sequences<br/>& Annotations') + \"</td>\";\n\n        if(me.cfg.align !== undefined) {\n            html += \"      <td valign='top'>\" + me.setButton(buttonStyle, 'show_alignsequences', 'View the sequences of the aligned structures', 'Aligned<br/>Sequences') + \"</td>\";\n        }\n\n        if(me.cfg.mmdbid !== undefined || me.cfg.gi !== undefined || me.cfg.blast_rep_id !== undefined || me.cfg.align !== undefined) {\n            html += \"      <td valign='top'>\" + me.setButton(buttonStyle, 'show_2ddgm', 'View the interactions of the structure', 'View<br/>Interactions') + \"</td>\";\n        }\n\n        html += \"      <td valign='top'>\" + me.setButton(buttonStyle, 'chemicalbindingshow', 'View Chemical Binding', 'View Chemical<br/>Binding') + \"</td>\";\n\n        html += \"      <td valign='top'>\" + me.setButton(buttonStyle, 'alternate', 'Alternate the structures', 'Alternate<br/>(Key \\\"a\\\")') + \"</td>\";\n    }\n\n    html += \"      <td valign='top'>\" + me.setButton(buttonStyle, 'show_selected', 'View ONLY the selected atoms', 'View Only<br/>Selection') + \"</td>\";\n\n    html += \"      <td valign='top'>\" + me.setButton(buttonStyle, 'toggleHighlight', 'Turn on and off the 3D highlight in the viewer', 'Toggle<br/>Highlight') + \"</td>\";\n\n    if(me.cfg.cid === undefined) {\n        html += \"      <td valign='top'>\" + me.setButton(buttonStyle, 'removeLabels', 'Remove Labels', 'Remove<br/>Labels') + \"</td>\";\n    }\n\n    return html;\n};\n\niCn3DUI.prototype.setTopMenusHtml = function (id) { var me = this;\n    var html = \"\";\n\n    html += \"<div style='position:relative;'>\";\n\n    html += \"<div id='\" + me.pre + \"popup' class='icn3d-text icn3d-popup'></div>\";\n\n    html += \"  <!--https://forum.jquery.com/topic/looking-for-a-jquery-horizontal-menu-bar-->\";\n    html += \"  <div id='\" + me.pre + \"mnlist' style='position:absolute; z-index:999; float:left; display:table-row; margin-top: -2px;'>\";\n    html += \"    <table border='0' cellpadding='0' cellspacing='0' width='100'><tr>\";\n\n    html += \"    <td valign='top'>\" + me.setMenu1() + \"</td>\";\n    html += \"    <td valign='top'>\" + me.setMenu2() + \"</td>\";\n    html += \"    <td valign='top'>\" + me.setMenu2b() + \"</td>\";\n    html += \"    <td valign='top'>\" + me.setMenu3() + \"</td>\";\n    html += \"    <td valign='top'>\" + me.setMenu4() + \"</td>\";\n    html += \"    <td valign='top'>\" + me.setMenu5() + \"</td>\";\n    //html += \"    <td valign='top'>\" + me.setMenu5b() + \"</td>\";\n    html += \"    <td valign='top'>\" + me.setMenu6() + \"</td>\";\n\n    html += \"    <td valign='top'><div style='position:relative; margin-left:6px;'><label class='icn3d-switch'><input id='\" + me.pre + \"modeswitch' type='checkbox'><div class='icn3d-slider icn3d-round' style='width:34px; height:18px; margin: 6px 0px 0px 3px;' title='Left (\\\"All atoms\\\"): Style and color menu options will be applied to all atoms in the structure&#13;Right (\\\"Selection\\\"): Style and color menu options will be applied only to selected atoms'></div></label>\";\n    html += \"    <div class='icn3d-commandTitle' style='min-width:40px; margin-top: 3px; white-space: nowrap;'><span id='\" + me.pre + \"modeall' title='Style and color menu options will be applied to all atoms in the structure'>All atoms&nbsp;&nbsp;</span><span id='\" + me.pre + \"modeselection' class='icn3d-modeselection' style='display:none;' title='Style and color menu options will be applied only to selected atoms'>Selection&nbsp;&nbsp;</span></div></div></td>\";\n\n    //html += '    <td valign=\"top\"><div class=\"icn3d-commandTitle\" style=\"white-space:nowrap; margin-top:10px;\"><div style=\"width:20px; display:inline-block; margin-left:6px;\"><span id=\"' + me.pre +  'selection_expand\" class=\"ui-icon ui-icon-plus icn3d-link\" style=\"width:15px;\" title=\"Expand\"></span><span id=\"' + me.pre +  'selection_shrink\" class=\"ui-icon ui-icon-minus icn3d-link\" style=\"display:none; width:15px;\" title=\"Shrink\"></span></div> Tools</div></td>';\n\n    //html += '    <td valign=\"top\"><div class=\"icn3d-commandTitle\" style=\"white-space:nowrap; margin-top:10px;\"><span id=\"' + me.pre +  'selection_expand\" class=\"icn3d-expand icn3d-link\" title=\"Expand\"><span class=\"ui-icon ui-icon-plus\"></span> Show Tools</span><span id=\"' + me.pre +  'selection_shrink\" class=\"icn3d-shrink icn3d-link\" style=\"display:none;\" title=\"Shrink\"><span class=\"ui-icon ui-icon-minus\"></span> Hide Tools</span></div></td>';\n    html += '    <td valign=\"top\"><div class=\"icn3d-commandTitle\" style=\"white-space:nowrap; margin-top:10px; border-left:solid 1px #888888\"><span id=\"' + me.pre +  'selection_expand\" class=\"icn3d-expand icn3d-link\" title=\"Expand\">&nbsp;&nbsp;Show Toolbar&nbsp;&nbsp;</span><span id=\"' + me.pre +  'selection_shrink\" class=\"icn3d-shrink icn3d-link\" style=\"display:none;\" title=\"Shrink\">&nbsp;&nbsp;Hide Toolbar&nbsp;&nbsp;</span></div></td>';\n\n    html += '    <td valign=\"top\"><div class=\"icn3d-commandTitle\" style=\"white-space:nowrap; margin-top:8px; border-left:solid 1px #888888\">&nbsp;&nbsp;<input type=\"text\" id=\"' + me.pre + 'search_seq\" size=\"10\" placeholder=\"one-letter seq.\"> <button style=\"white-space:nowrap;\" id=\"' + me.pre + 'search_seq_button\">Search Seq.</button> <a href=\"https://www.ncbi.nlm.nih.gov/Structure/icn3d/icn3d.html#selectb\" target=\"_blank\" title=\"Specification tips\">?</a></div></td>';\n\n    html += \"  </tr>\";\n    html += \"  </table>\";\n    html += \"  </div>\";\n\n    html += me.setTools();\n\n    // show title at the top left corner\n    html += \"  <div id='\" + me.pre + \"title' class='icn3d-commandTitle' style='font-size:1.2em; font-weight:normal; position:absolute; z-index:1; float:left; display:table-row; margin: 85px 0px 0px 5px; color: \" + me.GREYD + \"'></div>\";\n    html += \"  <div id='\" + me.pre + \"viewer' style='position:relative; width:100%; height:100%; background-color: \" + me.GREYD + \";'>\";\n    html += \"   <div id='\" + me.pre + \"mnLogSection'>\";\n    html += \"    <div style='height: \" + me.MENU_HEIGHT + \"px;'></div>\";\n//        html += \"    <div style='height: \" + me.MENU_HEIGHT + \"px;'></div>\";\n\n    html += \"   </div>\";\n\n    //$(\"#\" + me.divid).css('background-color', me.GREYD);\n\n    if(me.cfg.mmtfid === undefined) {\n        if(me.realHeight < 300) {\n            html += \"    <div id='\" + me.pre + \"wait' style='position:absolute; top:100px; left:50px; font-size: 1.2em; color: #444444;'>Loading data...</div>\";\n        }\n        else {\n            html += \"    <div id='\" + me.pre + \"wait' style='position:absolute; top:180px; left:50px; font-size: 1.8em; color: #444444;'>Loading data...</div>\";\n        }\n    }\n    html += \"    <canvas id='\" + me.pre + \"canvas' style='width:100%; height: 100%; background-color: #000;'>Your browser does not support WebGL.</canvas>\";\n\n    // separate for the log box\n    if(me.cfg.showcommand === undefined || me.cfg.showcommand) {\n        html += me.setLogWindow();\n    }\n\n    html += \"  </div>\";\n\n    html += \"</div>\";\n\n    html += me.setDialogs();\n\n    html += me.setCustomDialogs();\n\n    $( \"#\" + id).html(html);\n\n    // mn display\n    $(\"accordion\").accordion({ collapsible: true, active: false, heightStyle: \"content\"});\n    $(\"accordion div\").removeClass(\"ui-accordion-content ui-corner-all ui-corner-bottom ui-widget-content\");\n\n    $(\".icn3d-mn\").menu({position: { my: \"left top\", at: \"right top\" }});\n    $(\".icn3d-mn\").hover(function(){},function(){$(\"accordion\").accordion( \"option\", \"active\", \"none\");});\n\n    $(\"#\" + me.pre + \"accordion1\").hover( function(){ $(\"#\" + me.pre + \"accordion1 div\").css(\"display\", \"block\"); }, function(){ $(\"#\" + me.pre + \"accordion1 div\").css(\"display\", \"none\"); } );\n\n    $(\"#\" + me.pre + \"accordion2\").hover( function(){ $(\"#\" + me.pre + \"accordion2 div\").css(\"display\", \"block\"); }, function(){ $(\"#\" + me.pre + \"accordion2 div\").css(\"display\", \"none\"); } );\n\n    $(\"#\" + me.pre + \"accordion2b\").hover( function(){ $(\"#\" + me.pre + \"accordion2b div\").css(\"display\", \"block\"); }, function(){ $(\"#\" + me.pre + \"accordion2b div\").css(\"display\", \"none\"); } );\n\n    $(\"#\" + me.pre + \"accordion3\").hover( function(){ $(\"#\" + me.pre + \"accordion3 div\").css(\"display\", \"block\"); }, function(){ $(\"#\" + me.pre + \"accordion3 div\").css(\"display\", \"none\"); } );\n\n    $(\"#\" + me.pre + \"accordion4\").hover( function(){ $(\"#\" + me.pre + \"accordion4 div\").css(\"display\", \"block\"); }, function(){ $(\"#\" + me.pre + \"accordion4 div\").css(\"display\", \"none\"); } );\n\n    $(\"#\" + me.pre + \"accordion5\").hover( function(){ $(\"#\" + me.pre + \"accordion5 div\").css(\"display\", \"block\"); }, function(){ $(\"#\" + me.pre + \"accordion5 div\").css(\"display\", \"none\"); } );\n\n    //$(\"#\" + me.pre + \"accordion5b\").hover( function(){ $(\"#\" + me.pre + \"accordion5b div\").css(\"display\", \"block\"); }, function(){ $(\"#\" + me.pre + \"accordion5b div\").css(\"display\", \"none\"); } );\n\n    $(\"#\" + me.pre + \"accordion6\").hover( function(){ $(\"#\" + me.pre + \"accordion6 div\").css(\"display\", \"block\"); }, function(){ $(\"#\" + me.pre + \"accordion6 div\").css(\"display\", \"none\"); } );\n};\n\niCn3DUI.prototype.getLink = function(id, text) { var me = this;\n    return \"<li><span id='\" + me.pre + id + \"' class='icn3d-link'>\" + text + \"</span></li>\";\n};\n\niCn3DUI.prototype.getLinkWrapper = function(id, text, wrapper) { var me = this;\n    return \"<li id='\" + me.pre + wrapper + \"'><span id='\" + me.pre + id + \"' class='icn3d-link'>\" + text + \"</span></li>\";\n};\n\niCn3DUI.prototype.getRadio = function(radioid, id, text, bChecked) { var me = this;\n    var checkedStr = (bChecked !== undefined && bChecked) ? ' checked' : '';\n    //return \"<li><input type='radio' name='\" + me.pre + radioid + \"' id='\" + me.pre + id + \"'\" + checkedStr + \"><label for='\" + me.pre + id + \"'>\" + text + \"</label></li>\";\n\n    //https://stackoverflow.com/questions/17541614/use-images-instead-of-radio-buttons/17541916\n    return \"<li><label for='\" + me.pre + id + \"' class='icn3d-rad'><input type='radio' name='\" + me.pre + radioid + \"' id='\" + me.pre + id + \"'\" + checkedStr + \"><span class='ui-icon ui-icon-blank'></span> <span class='icn3d-rad-text'>\" + text + \"</span></label></li>\";\n};\n\niCn3DUI.prototype.setMenu1 = function() { var me = this;\n    var html = \"\";\n\n    html += \"    <div class='icn3d-menu'>\";\n    html += \"          <accordion id='\" + me.pre + \"accordion1'>\";\n    html += \"<h3>File</h3>\";\n    html += \"<div>\";\n    html += \"<ul class='icn3d-mn'>\";\n    html += \"  <li><span>Retrieve by ID</span>\";\n    html += \"    <ul>\";\n    html += me.getLink('mn1_mmdbid', 'MMDB ID');\n    html += me.getLink('mn1_mmtfid', 'MMTF ID');\n    html += me.getLink('mn1_pdbid', 'PDB ID');\n    html += me.getLink('mn1_mmcifid', 'mmCIF ID');\n    html += me.getLink('mn1_gi', 'NCBI gi');\n    html += me.getLink('mn1_cid', 'PubChem CID');\n    html += \"    </ul>\";\n    html += \"  </li>\";\n    html += \"  <li><span>Open File</span>\";\n    html += \"    <ul>\";\n    html += me.getLink('mn1_pdbfile', 'PDB File');\n    html += me.getLink('mn1_mmciffile', 'mmCIF File');\n    html += me.getLink('mn1_mol2file', 'Mol2 File');\n    html += me.getLink('mn1_sdffile', 'SDF File');\n    html += me.getLink('mn1_xyzfile', 'XYZ File');\n    html += me.getLink('mn1_urlfile', 'Url (Same Host) ');\n    html += \"      <li>-</li>\";\n    html += me.getLink('mn1_pngimage', 'iCn3D PNG Image');\n    html += me.getLink('mn1_state', 'State/Script File');\n    html += me.getLink('mn1_selection', 'Selection File');\n    html += \"    </ul>\";\n    html += \"  </li>\";\n    html += \"  <li><span>Align</span>\";\n    html += \"    <ul>\";\n    html += me.getLink('mn1_blast_rep_id', 'Sequence to Structure');\n    html += me.getLink('mn1_align', 'Structure to Structure');\n    html += \"    </ul>\";\n    html += \"  </li>\";\n    html += \"  <li><span>3D Printing</span>\";\n    html += \"    <ul>\";\n    if(me.cfg.cid === undefined) {\n        html += me.getLink('mn1_exportVrmlStab', 'VRML (Color, W/  Stabilizers)');\n        html += me.getLink('mn1_exportStlStab', 'STL (W/  Stabilizers)');\n        html += \"      <li>-</li>\";\n        html += me.getLink('mn1_exportVrml', 'VRML (Color)');\n        html += me.getLink('mn1_exportStl', 'STL');\n        html += \"      <li>-</li>\";\n        html += me.getLink('mn1_stabilizerYes', 'Add All  Stabilizers');\n        html += me.getLink('mn1_stabilizerNo', 'Remove All  Stabilizers');\n        html += \"      <li>-</li>\";\n        html += me.getLink('mn1_stabilizerOne', 'Add One  Stabilizer');\n        html += me.getLink('mn1_stabilizerRmOne', 'Remove One  Stabilizer');\n        html += \"      <li>-</li>\";\n        html += me.getLink('mn1_thicknessSet', 'Set Thickness');\n        html += me.getLink('mn1_thicknessReset', 'Reset Thickness');\n    }\n    else {\n        html += me.getLink('mn1_exportVrml', 'VRML (Color)');\n        html += me.getLink('mn1_exportStl', 'STL');\n    }\n\n    html += \"    </ul>\";\n    html += \"  </li>\";\n\n    html += \"  <li><span>Save Files</span>\";\n    html += \"    <ul>\";\n    html += me.getLink('mn1_exportCanvas', 'iCn3D PNG Image');\n    html += me.getLink('mn1_exportState', 'State File');\n    html += me.getLink('mn1_exportSelections', 'Selection File');\n    html += me.getLink('mn1_exportCounts', 'Residue Counts');\n    if(me.cfg.mmdbid !== undefined) {\n     html += me.getLink('mn6_exportInteraction', 'Interaction List');\n    }\n\n    html += \"    </ul>\";\n    html += \"  </li>\";\n\n    html += me.getLink('mn1_sharelink', 'Share Link');\n\n    html += \"</ul>\";\n    html += \"</div>\";\n    html += \"          </accordion>\";\n    html += \"    </div>\";\n\n    return html;\n};\n\niCn3DUI.prototype.setMenu2 = function() { var me = this;\n    var html = \"\";\n\n    html += \"    <div class='icn3d-menu'>\";\n    html += \"          <accordion id='\" + me.pre + \"accordion2'>\";\n    html += \"<h3>Select</h3>\";\n    html += \"<div>\";\n    html += \"<ul class='icn3d-mn'>\";\n\n    html += me.getLink('mn2_definedsets', 'Defined Sets');\n    html += me.getLink('mn2_selectall', 'All');\n//        if(me.cfg.cid === undefined) {\n//            html += me.getRadio('mn2_select', 'mn2_select_chain', 'Defined Sets');\n//        }\n    html += me.getLink('mn2_aroundsphere', 'by Distance');\n    html += me.getLink('mn2_selectcomplement', 'Inverse');\n    html += me.getLink('mn2_selectsidechains', 'Side Chains');\n    html += me.getLink('mn2_command', 'Advanced');\n\n\n    //html += \"  <li><span>Selection Mode</span>\";\n    //html += \"    <ul>\";\n    //html += me.getLink('mn6_modeall', 'Apply style, color,</span><br/><span>surface to all atoms');\n    //html += me.getLink('mn6_modeselection', 'Apply style, color,</span><br/><span>surface only to selection');\n    //html += \"    </ul>\";\n    //html += \"  </li>\";\n\n\n    if(me.cfg.cid === undefined) {\n        html += \"  <li><span>Select on 3D</span>\";\n        html += \"    <ul>\";\n\n        html += \"  <li>\\\"Alt\\\"+Click: start selection</li>\";\n        html += \"  <li>\\\"Ctrl\\\"+Click: union selection</li>\";\n        html += \"  <li>\\\"Shift\\\"+Click: range Selection</li>\";\n        html += \"  <li>-</li>\";\n        html += me.getRadio('mn2_pk', 'mn2_pkChain', 'Chain');\n        html += me.getRadio('mn2_pk', 'mn2_pkStrand', 'Strand/Helix');\n        html += me.getRadio('mn2_pk', 'mn2_pkResidue', 'Residue', true);\n        html += me.getRadio('mn2_pk', 'mn2_pkYes', 'Atom');\n        html += \"    </ul>\";\n        html += \"  </li>\";\n    }\n    else {\n        if(me.isMobile()) {\n            html += \"  <li><span>Touch to pick</span>\";\n        }\n        else {\n            html += \"  <li><span>Picking with<br>\\\"Alt\\\" + Click</span>\";\n        }\n    }\n\n    html += \"  <li>-</li>\";\n\n    html += me.getLink('mn2_saveselection', 'Save Selection');\n    html += me.getLink('clearall', 'Clear Selection');\n\n    html += \"  <li>-</li>\";\n\n    html += \"      <li><span>Highlight Color</span>\";\n    html += \"        <ul>\";\n    html += me.getRadio('mn2_hl_clr', 'mn2_hl_clrYellow', 'Yellow', true);\n    html += me.getRadio('mn2_hl_clr', 'mn2_hl_clrGreen', 'Green');\n    html += me.getRadio('mn2_hl_clr', 'mn2_hl_clrRed', 'Red');\n    html += \"        </ul>\";\n    html += \"      </li>\";\n    html += \"      <li><span>Highlight Style</span>\";\n    html += \"        <ul>\";\n\n    html += me.getRadio('mn2_hl_style', 'mn2_hl_styleOutline', 'Outline', true);\n    html += me.getRadio('mn2_hl_style', 'mn2_hl_styleObject', '3D Objects');\n    html += me.getRadio('mn2_hl_style', 'mn2_hl_styleNone', 'No Highlight');\n\n    html += \"        </ul>\";\n    html += \"      </li>\";\n\n    //html += me.getLink('toggleHighlight2', 'Toggle Highlight');\n\n    html += \"  <li><br/></li>\";\n\n    html += \"</ul>\";\n    html += \"</div>\";\n    html += \"          </accordion>\";\n    html += \"    </div>\";\n\n    return html;\n};\n\niCn3DUI.prototype.setMenu2b = function() { var me = this;\n    var html = \"\";\n\n    html += \"    <div class='icn3d-menu'>\";\n    html += \"          <accordion id='\" + me.pre + \"accordion2b'>\";\n    html += \"<h3>View</h3>\";\n    html += \"<div>\";\n    html += \"<ul class='icn3d-mn'>\";\n\n    html += me.getLink('mn2_show_selected', 'View Only <br>Selection');\n    html += me.getLink('mn2_selectedcenter', 'Zoom in <br>Selection');\n    html += me.getLink('mn6_center', 'Center on <br>Selection');\n    if(me.cfg.align !== undefined) {\n        html += me.getLink('mn2_alternate', 'Alternate (Key \\\"a\\\")');\n    }\n\n    html += \"  <li>-</li>\";\n\n    if(me.cfg.cid === undefined) {\n        html += \"  <li><span>Chem. Binding</span>\";\n        html += \"    <ul>\";\n        html += me.getRadio('mn6_chemicalbinding', 'mn6_chemicalbindingshow', 'Show');\n        html += me.getRadio('mn6_chemicalbinding', 'mn6_chemicalbindinghide', 'Hide', true);\n        html += \"    </ul>\";\n        html += \"  </li>\";\n\n        html += \"  <li><span>H-Bonds to</span><br/><span>Selection</span>\";\n        html += \"    <ul>\";\n        html += me.getRadio('mn6_hbonds', 'mn6_hbondsYes', 'Show');\n        html += me.getRadio('mn6_hbonds', 'mn6_hbondsNo', 'Hide', true);\n        html += \"    </ul>\";\n        html += \"  </li>\";\n\n        html += \"  <li><span>Disulfide Bonds</span>\";\n        html += \"    <ul>\";\n        html += me.getRadio('mn6_ssbonds', 'mn6_ssbondsYes', 'Show', true);\n        html += me.getRadio('mn6_ssbonds', 'mn6_ssbondsNo', 'Hide');\n        html += \"    </ul>\";\n        html += \"  </li>\";\n\n        html += \"  <li><span>Cross-Linkages</span>\";\n        html += \"    <ul>\";\n        html += me.getRadio('mn6_clbonds', 'mn6_clbondsYes', 'Show');\n        html += me.getRadio('mn6_clbonds', 'mn6_clbondsNo', 'Hide', true);\n        html += \"    </ul>\";\n        html += \"  </li>\";\n\n        if(me.cfg.mmtfid !== undefined || me.cfg.pdbid !== undefined || me.cfg.mmcifid !== undefined || me.cfg.mmdbid !== undefined || me.cfg.gi !== undefined || me.cfg.blast_rep_id !== undefined) {\n          html += \"  <li id='\" + me.pre + \"assemblyWrapper'><span>Assembly</span>\";\n          html += \"    <ul>\";\n\n          html += me.getRadio('mn6_assembly', 'mn6_assemblyYes', 'Biological Assembly', true);\n          html += me.getRadio('mn6_assembly', 'mn6_assemblyNo', 'Asymmetric Unit');\n\n          html += \"    </ul>\";\n          html += \"  </li>\";\n        }\n    }\n\n    html += \"  <li><span>Distance</span>\";\n    html += \"    <ul>\";\n    html += me.getRadio('mn6_distance', 'mn6_distanceYes', 'Measure');\n    html += me.getRadio('mn6_distance', 'mn6_distanceNo', 'Hide', true);\n    html += \"    </ul>\";\n    html += \"  </li>\";\n\n    html += \"  <li><span>Label</span>\";\n    html += \"    <ul>\";\n    html += me.getRadio('mn6_addlabel', 'mn6_addlabelYes', 'by Picking Atoms');\n    html += me.getRadio('mn6_addlabel', 'mn6_addlabelSelection', 'per Selection');\n    if(me.cfg.cid === undefined) {\n        html += me.getRadio('mn6_addlabel', 'mn6_addlabelResidues', 'per Residue');\n        html += me.getRadio('mn6_addlabel', 'mn6_addlabelChains', 'per Chain');\n        html += me.getRadio('mn6_addlabel', 'mn6_addlabelTermini', 'N- & C-Termini');\n    }\n    html += me.getRadio('mn6_addlabel', 'mn6_addlabelNo', 'Remove', true);\n    html += \"    </ul>\";\n    html += \"  </li>\";\n\n    html += \"  <li>-</li>\";\n\n    html += \"  <li><span>Reset</span>\";\n    html += \"    <ul>\";\n    html += me.getRadio('mn6_reset', 'reset', 'All');\n    html += me.getRadio('mn6_reset', 'mn6_resetOrientation', 'Orientation');\n    html += \"    </ul>\";\n    html += \"  </li>\";\n\n    html += \"  <li><span>Transform Hints</span>\";\n    html += \"    <ul>\";\n    html += \"      <li><span>Rotate</span>\";\n    html += \"          <ul>\";\n    html += \"<li>Left Mouse</li>\";\n    html += \"<li>Key L: Left</li>\";\n    html += \"<li>Key J: Right</li>\";\n    html += \"<li>Key I: Up</li>\";\n    html += \"<li>Key M: Down</li>\";\n    html += \"          </ul>\";\n    html += \"      </li>\";\n    html += \"      <li><span>Zoom</span>\";\n    html += \"          <ul>\";\n    html += \"<li>Middle Mouse</li>\";\n    html += \"<li>Key Z: Zoom in</li>\";\n    html += \"<li>Key X: Zoom out</li>\";\n    html += \"          </ul>\";\n    html += \"      </li>\";\n    html += \"      <li><span>Translate</span>\";\n    html += \"          <ul>\";\n    html += \"<li>Right Mouse</li>\";\n    html += \"          </ul>\";\n    html += \"      </li>\";\n    html += \"    </ul>\";\n    html += \"  </li>\";\n\n    html += \"  <li><span>Auto Rotation</span>\";\n    html += \"    <ul>\";\n    html += me.getRadio('mn6_rotate', 'mn6_rotateleft', 'Rotate Left');\n    html += me.getRadio('mn6_rotate', 'mn6_rotateright', 'Rotate Right');\n    html += me.getRadio('mn6_rotate', 'mn6_rotateup', 'Rotate Up');\n    html += me.getRadio('mn6_rotate', 'mn6_rotatedown', 'Rotate Down');\n    html += \"    </ul>\";\n    html += \"  </li>\";\n    html += \"  <li><span>Camera</span>\";\n    html += \"    <ul>\";\n    html += me.getRadio('mn6_camera', 'mn6_cameraPers', 'Perspective', true);\n    html += me.getRadio('mn6_camera', 'mn6_cameraOrth', 'Orthographic');\n    html += \"    </ul>\";\n    html += \"  </li>\";\n    html += \"  <li><span>Fog</span>\";\n    html += \"    <ul>\";\n    html += me.getRadio('mn6_showfog', 'mn6_showfogYes', 'On');\n    html += me.getRadio('mn6_showfog', 'mn6_showfogNo', 'Off', true);\n    html += \"    </ul>\";\n    html += \"  </li>\";\n    html += \"  <li><span>Slab</span>\";\n    html += \"    <ul>\";\n    html += me.getRadio('mn6_showslab', 'mn6_showslabYes', 'On');\n    html += me.getRadio('mn6_showslab', 'mn6_showslabNo', 'Off', true);\n    html += \"    </ul>\";\n    html += \"  </li>\";\n    html += \"  <li><span>XYZ-axes</span>\";\n    html += \"    <ul>\";\n    html += me.getRadio('mn6_showaxis', 'mn6_showaxisYes', 'Show');\n    html += me.getRadio('mn6_showaxis', 'mn6_showaxisNo', 'Hide', true);\n    html += \"    </ul>\";\n    html += \"  </li>\";\n\n    html += me.getLink('mn6_back', 'Undo');\n    html += me.getLink('mn6_forward', 'Redo');\n\n    html += \"  <li><br/></li>\";\n\n    html += \"</ul>\";\n    html += \"</div>\";\n    html += \"          </accordion>\";\n    html += \"    </div>\";\n\n    return html;\n};\n\niCn3DUI.prototype.setMenu3 = function() { var me = this;\n    var html = \"\";\n\n    html += \"    <div class='icn3d-menu'>\";\n    html += \"          <accordion id='\" + me.pre + \"accordion3'>\";\n    html += \"<h3 id='\" + me.pre + \"style'>Style</h3>\";\n    html += \"<div>\";\n    html += \"<ul class='icn3d-mn'>\";\n\n    if(me.cfg.cid === undefined) {\n        html += \"  <li><span>Proteins</span>\";\n        html += \"    <ul>\";\n        if(me.cfg.align !== undefined) {\n            html += me.getRadio('mn3_proteins', 'mn3_proteinsRibbon', 'Ribbon');\n        }\n        else {\n            html += me.getRadio('mn3_proteins', 'mn3_proteinsRibbon', 'Ribbon', true);\n        }\n\n        html += me.getRadio('mn3_proteins', 'mn3_proteinsStrand', 'Strand');\n        html += me.getRadio('mn3_proteins', 'mn3_proteinsCylinder', 'Cylinder and Plate');\n        html += me.getRadio('mn3_proteins', 'mn3_proteinsSchematic', 'Schematic');\n\n        if(me.cfg.align !== undefined) {\n            html += me.getRadio('mn3_proteins', 'mn3_proteinsCalpha', 'C Alpha Trace', true);\n        }\n        else {\n            html += me.getRadio('mn3_proteins', 'mn3_proteinsCalpha', 'C Alpha Trace');\n        }\n\n        html += me.getRadio('mn3_proteins', 'mn3_proteinsBfactor', 'B-factor Tube');\n        html += me.getRadio('mn3_proteins', 'mn3_proteinsLines', 'Lines');\n        html += me.getRadio('mn3_proteins', 'mn3_proteinsStick', 'Stick');\n        html += me.getRadio('mn3_proteins', 'mn3_proteinsBallstick', 'Ball and Stick');\n        html += me.getRadio('mn3_proteins', 'mn3_proteinsSphere', 'Sphere');\n        html += me.getRadio('mn3_proteins', 'mn3_proteinsNo', 'Hide');\n        html += \"    </ul>\";\n        html += \"  </li>\";\n\n        html += \"  <li><span>Side Chains</span>\";\n        html += \"    <ul>\";\n\n        html += me.getRadio('mn3_sidec', 'mn3_sidecLines', 'Lines');\n        html += me.getRadio('mn3_sidec', 'mn3_sidecStick', 'Stick');\n        html += me.getRadio('mn3_sidec', 'mn3_sidecBallstick', 'Ball and Stick');\n        html += me.getRadio('mn3_sidec', 'mn3_sidecSphere', 'Sphere');\n        html += me.getRadio('mn3_sidec', 'mn3_sidecNo', 'Hide', true);\n        html += \"    </ul>\";\n        html += \"  </li>\";\n\n        html += \"  <li><span>Nucleotides</span>\";\n        html += \"    <ul>\";\n        html += me.getRadio('mn3_nucl', 'mn3_nuclCartoon', 'Cartoon', true);\n        html += me.getRadio('mn3_nucl', 'mn3_nuclPhos', \"O3' Trace\");\n        html += me.getRadio('mn3_nucl', 'mn3_nuclSchematic', 'Schematic')\n        html += me.getRadio('mn3_nucl', 'mn3_nuclLines', 'Lines');\n        html += me.getRadio('mn3_nucl', 'mn3_nuclStick', 'Stick');\n        html += me.getRadio('mn3_nucl', 'mn3_nuclBallstick', 'Ball and Stick');\n        html += me.getRadio('mn3_nucl', 'mn3_nuclSphere', 'Sphere');\n        html += me.getRadio('mn3_nucl', 'mn3_nuclNo', 'Hide');\n        html += \"    </ul>\";\n        html += \"  </li>\";\n    }\n\n    html += \"  <li><span>Chemicals</span>\";\n    html += \"    <ul>\";\n    html += me.getRadio('mn3_lig', 'mn3_ligLines', 'Lines');\n    if(me.cfg.cid === undefined) {\n        html += me.getRadio('mn3_lig', 'mn3_ligStick', 'Stick', true);\n        html += me.getRadio('mn3_lig', 'mn3_ligBallstick', 'Ball and Stick');\n    }\n    else {\n        html += me.getRadio('mn3_lig', 'mn3_ligStick', 'Stick');\n        html += me.getRadio('mn3_lig', 'mn3_ligBallstick', 'Ball and Stick', true);\n    }\n    html += me.getRadio('mn3_lig', 'mn3_ligSchematic', 'Schematic');\n    html += me.getRadio('mn3_lig', 'mn3_ligSphere', 'Sphere');\n    html += me.getRadio('mn3_lig', 'mn3_ligNo', 'Hide');\n    html += \"    </ul>\";\n    html += \"  </li>\";\n\n\n    html += \"  <li><span>Ions</span>\";\n    html += \"    <ul>\";\n    html += me.getRadio('mn3_ions', 'mn3_ionsSphere', 'Sphere', true);\n    html += me.getRadio('mn3_ions', 'mn3_ionsDot', 'Dot');\n    html += me.getRadio('mn3_ions', 'mn3_ionsNo', 'Hide');\n    html += \"    </ul>\";\n    html += \"  </li>\";\n\n    html += \"  <li><span>Water</span>\";\n    html += \"    <ul>\";\n    html += me.getRadio('mn3_water', 'mn3_waterSphere', 'Sphere');\n    html += me.getRadio('mn3_water', 'mn3_waterDot', 'Dot');\n    html += me.getRadio('mn3_water', 'mn3_waterNo', 'Hide', true);\n    html += \"    </ul>\";\n    html += \"  </li>\";\n\n    html += me.getLink('mn3_setThickness', 'Set Thickness');\n\n    html += \"  <li>-</li>\";\n\n    html += me.getLink('mn3_styleSave', 'Save Style');\n    html += me.getLink('mn3_styleApplySave', 'Apply Saved Style');\n\n    html += \"  <li>-</li>\";\n\n    html += \"  <li><span>Surface Type</span>\";\n    html += \"    <ul>\";\n    html += me.getRadio('mn5_surface', 'mn5_surfaceVDW', 'Van der Waals');\n    html += me.getRadio('mn5_surface', 'mn5_surfaceVDWContext', 'VDW with Context');\n    html += me.getRadio('mn5_surface', 'mn5_surfaceMolecular', 'Molecular Surface');\n    html += me.getRadio('mn5_surface', 'mn5_surfaceMolecularContext', 'MS with Context');\n    html += me.getRadio('mn5_surface', 'mn5_surfaceSAS', 'Solvent Accessible');\n    html += me.getRadio('mn5_surface', 'mn5_surfaceSASContext', 'SA with Context');\n    html += \"    </ul>\";\n    html += \"  </li>\";\n\n    html += me.getLink('mn5_surfaceNo', 'Remove Surface');\n\n    html += \"  <li><span>Surface Opacity</span>\";\n    html += \"    <ul>\";\n    html += me.getRadio('mn5_opacity', 'mn5_opacity10', '1.0', true);\n    html += me.getRadio('mn5_opacity', 'mn5_opacity09', '0.9');\n    html += me.getRadio('mn5_opacity', 'mn5_opacity08', '0.8');\n    html += me.getRadio('mn5_opacity', 'mn5_opacity07', '0.7');\n    html += me.getRadio('mn5_opacity', 'mn5_opacity06', '0.6');\n    html += me.getRadio('mn5_opacity', 'mn5_opacity05', '0.5');\n    html += me.getRadio('mn5_opacity', 'mn5_opacity04', '0.4');\n    html += me.getRadio('mn5_opacity', 'mn5_opacity03', '0.3');\n    html += me.getRadio('mn5_opacity', 'mn5_opacity02', '0.2');\n    html += me.getRadio('mn5_opacity', 'mn5_opacity01', '0.1');\n    html += \"    </ul>\";\n    html += \"  </li>\";\n    html += \"  <li><span>Surface <br>Wireframe</span>\";\n    html += \"    <ul>\";\n    html += me.getRadio('mn5_wireframe', 'mn5_wireframeYes', 'Yes');\n    html += me.getRadio('mn5_wireframe', 'mn5_wireframeNo', 'No', true);\n    html += \"    </ul>\";\n    html += \"  </li>\";\n\n    if(me.cfg.cid === undefined) {\n        html += \"  <li>-</li>\";\n\n        html += \"  <li id='\" + me.pre + \"mapWrapper1'><span>Electron Density</span>\";\n        html += \"    <ul>\";\n        html += me.getRadio('mn5_elecmap', 'mn5_elecmap2fofc', '2Fo-Fc Map');\n        html += me.getRadio('mn5_elecmap', 'mn5_elecmapfofc', 'Fo-Fc Map');\n        html += \"    </ul>\";\n        html += \"  </li>\";\n\n        html += me.getLinkWrapper('mn5_elecmapNo', 'Remove Map', 'mapWrapper2');\n\n        html += \"  <li id='\" + me.pre + \"mapWrapper3'><span>Map <br>Wireframe</span>\";\n        html += \"    <ul>\";\n        html += me.getRadio('mn5_mapwireframe', 'mn5_mapwireframeYes', 'Yes', true);\n        html += me.getRadio('mn5_mapwireframe', 'mn5_mapwireframeNo', 'No');\n        html += \"    </ul>\";\n        html += \"  </li>\";\n\n        if(me.cfg.mmtfid === undefined) {\n            //html += \"  <li>-</li>\";\n\n            html += me.getLinkWrapper('mn5_emmap', 'EM Density Map', 'emmapWrapper1');\n            html += me.getLinkWrapper('mn5_emmapNo', 'Remove EM Map', 'emmapWrapper2');\n\n            html += \"  <li id='\" + me.pre + \"emmapWrapper3'><span>EM Map <br>Wireframe</span>\";\n            html += \"    <ul>\";\n            html += me.getRadio('mn5_emmapwireframe', 'mn5_emmapwireframeYes', 'Yes', true);\n            html += me.getRadio('mn5_emmapwireframe', 'mn5_emmapwireframeNo', 'No');\n            html += \"    </ul>\";\n            html += \"  </li>\";\n        }\n    }\n\n    html += \"  <li>-</li>\";\n\n    html += \"  <li><span>Background</span>\";\n    html += \"    <ul>\";\n    html += me.getRadio('mn6_bkgd', 'mn6_bkgdTransparent', 'Transparent', true);\n    html += me.getRadio('mn6_bkgd', 'mn6_bkgdBlack', 'Black');\n    html += me.getRadio('mn6_bkgd', 'mn6_bkgdGrey', 'Grey');\n    html += me.getRadio('mn6_bkgd', 'mn6_bkgdWhite', 'White');\n    html += \"    </ul>\";\n    html += \"  </li>\";\n\n    html += \"  <li><br/></li>\";\n\n    html += \"</ul>\";\n    html += \"</div>\";\n    html += \"          </accordion>\";\n    html += \"    </div>\";\n\n    return html;\n};\n\niCn3DUI.prototype.setMenu4 = function() { var me = this;\n    var html = \"\";\n\n    html += \"    <div class='icn3d-menu'>\";\n    html += \"          <accordion id='\" + me.pre + \"accordion4'>\";\n    html += \"<h3 id='\" + me.pre + \"color'>Color</h3>\";\n    html += \"<div>\";\n    html += \"<ul class='icn3d-mn'>\";\n\n    if(me.cfg.cid === undefined) {\n        html += me.getRadio('mn4_clr', 'mn4_clrSpectrum', 'Spectrum');\n        html += \"  <li><span style='padding-left:2em;'>Secondary</span>\";\n        html += \"    <ul>\";\n        html += me.getRadio('mn4_clr', 'mn4_clrSSGreen', 'Sheet in Green');\n        html += me.getRadio('mn4_clr', 'mn4_clrSSYellow', 'Sheet in Yellow');\n        html += \"    </ul>\";\n\n        html += me.getRadio('mn4_clr', 'mn4_clrCharge', 'Charge');\n        html += me.getRadio('mn4_clr', 'mn4_clrHydrophobic', 'Hydrophobic');\n\n        if(me.cfg.align !== undefined || me.cfg.blast_rep_id !== undefined) {\n          html += me.getRadio('mn4_clr', 'mn4_clrChain', 'Chain');\n        }\n        else {\n          html += me.getRadio('mn4_clr', 'mn4_clrChain', 'Chain', true);\n        }\n\n        html += me.getRadio('mn4_clr', 'mn4_clrResidue', 'Residue');\n        html += me.getRadio('mn4_clr', 'mn4_clrAtom', 'Atom');\n        html += \"  <li><span style='padding-left:2em;'>B-factor</span>\";\n        html += \"    <ul>\";\n        html += me.getRadio('mn4_clr', 'mn4_clrBfactor', 'Original');\n        html += me.getRadio('mn4_clr', 'mn4_clrBfactorNorm', 'Percentile');\n        html += \"    </ul>\";\n\n        if(me.cfg.align !== undefined) {\n          html += me.getRadio('mn4_clr', 'mn4_clrIdentity', 'Identity', true);\n          html += me.getRadio('mn4_clr', 'mn4_clrConserved', 'Conservation');\n        }\n        else if(me.cfg.blast_rep_id !== undefined) {\n          html += me.getRadio('mn4_clr', 'mn4_clrIdentity', 'Identity');\n          html += me.getRadio('mn4_clr', 'mn4_clrConserved', 'Conservation', true);\n        }\n    }\n    else {\n        html += me.getRadio('mn4_clr', 'mn4_clrAtom', 'Atom', true);\n    }\n\n    html += \"  <li>-</li>\";\n    html += \"  <li><span style='padding-left:2em;'>Unicolor</span>\";\n    html += \"    <ul>\";\n    html += me.getRadio('mn4_clr', 'mn4_clrRed', 'Red');\n    html += me.getRadio('mn4_clr', 'mn4_clrGreen', 'Green');\n    html += me.getRadio('mn4_clr', 'mn4_clrBlue', 'Blue');\n    html += me.getRadio('mn4_clr', 'mn4_clrMagenta', 'Magenta');\n    html += me.getRadio('mn4_clr', 'mn4_clrYellow', 'Yellow');\n    html += me.getRadio('mn4_clr', 'mn4_clrCyan', 'Cyan');\n    html += me.getRadio('mn4_clr', 'mn4_clrWhite', 'White');\n    html += me.getRadio('mn4_clr', 'mn4_clrGrey', 'Grey');\n    html += \"    </ul>\";\n    html += me.getRadio('mn4_clr', 'mn4_clrCustom', 'Color Picker');\n    html += \"  <li>-</li>\";\n    html += me.getLink('mn4_clrSave', 'Save Color');\n    html += me.getLink('mn4_clrApplySave', 'Apply Saved Color');\n    html += \"  <li><br/></li>\";\n    html += \"</ul>\";\n    html += \"</div>\";\n    html += \"          </accordion>\";\n    html += \"    </div>\";\n\n    return html;\n};\n\niCn3DUI.prototype.setMenu5 = function() { var me = this;\n    var html = \"\";\n\n    html += \"    <div class='icn3d-menu'>\";\n    html += \"          <accordion id='\" + me.pre + \"accordion5'>\";\n    html += \"<h3 id='\" + me.pre + \"windows' style='font-size:1.2em'>&nbsp;Windows</h3>\";\n    html += \"<div>\";\n    html += \"<ul class='icn3d-mn'>\";\n\n    if(me.cfg.cid === undefined) {\n        html += me.getLink('mn6_selectannotations', 'View Sequences<br>& Annotations');\n\n        if(me.cfg.align !== undefined) {\n            html += me.getLink('mn2_alignment', 'View Aligned<br>Sequences');\n        }\n\n        //html += me.getLink('mn2_selectresidues', 'View Sequences');\n        if(me.cfg.mmdbid !== undefined || me.cfg.gi !== undefined || me.cfg.blast_rep_id !== undefined || me.cfg.align !== undefined) {\n          html += me.getLink('mn2_2ddgm', 'View Interactions');\n        }\n    }\n\n    if(me.cfg.cid !== undefined) {\n        html += \"  <li><span>Links</span>\";\n        html += \"    <ul>\";\n        html += me.getLink('mn1_link_structure', 'Compound Summary');\n        html += me.getLink('mn1_link_vast', 'Similar Compounds');\n        html += me.getLink('mn1_link_bind', 'Structures Bound');\n        html += \"    </ul>\";\n        html += \"  </li>\";\n    }\n    else {\n        html += \"  <li><span>Links</span>\";\n        html += \"    <ul>\";\n        html += me.getLink('mn1_link_structure', 'Structure Summary');\n        html += me.getLink('mn1_link_vast', 'Similar Structures');\n        html += me.getLink('mn1_link_pubmed', 'Literature');\n        html += me.getLink('mn1_link_protein', 'Protein');\n        //html += me.getLink('mn1_link_gene', 'Gene');\n        //html += me.getLink('mn1_link_chemicals', 'Chemicals');\n        html += \"    </ul>\";\n        html += \"  </li>\";\n    }\n\n    html += \"  <li><br/></li>\";\n\n    html += \"</ul>\";\n    html += \"</div>\";\n    html += \"          </accordion>\";\n    html += \"    </div>\";\n\n    return html;\n};\n\niCn3DUI.prototype.setMenu6 = function() { var me = this;\n    var html = \"\";\n\n    html += \"    <div class='icn3d-menu'>\";\n    html += \"          <accordion id='\" + me.pre + \"accordion6'>\";\n    html += \"<h3>Help</h3>\";\n    html += \"<div>\";\n    html += \"<ul class='icn3d-mn'>\";\n\n    html += \"  <li><a href='https://www.ncbi.nlm.nih.gov/Structure/icn3d/docs/icn3d_about.html' target='_blank'>About iCn3D<span style='font-size:0.9em'> \" + me.REVISION + \"</span></a></li>\";\n\n    html += \"  <li><a href='https://www.ncbi.nlm.nih.gov/Structure/icn3d/docs/icn3d_help.html' target='_blank'>Help Doc</a></li>\";\n\n    html += \"  <li><span>Web APIs</span>\";\n    html += \"    <ul>\";\n\n    html += \"<li><a href='https://www.ncbi.nlm.nih.gov/Structure/icn3d/icn3d.html#HowToUse' target='_blank'>How to Use</a></li>\";\n    html += \"<li><a href='https://www.ncbi.nlm.nih.gov/Structure/icn3d/icn3d.html#parameters' target='_blank'>URL Parameters</a></li>\";\n    html += \"<li><a href='https://www.ncbi.nlm.nih.gov/Structure/icn3d/icn3d.html#commands' target='_blank'>Commands</a></li>\";\n    html += \"    </ul>\";\n    html += \"  </li>\";\n\n    html += \"  <li><a href='https://github.com/ncbi/icn3d' target='_blank'>Source Code</a></li>\";\n\n    html += \"  <li>-</li>\";\n\n    html += \"  <li><span>Transform Hints</span>\";\n    html += \"    <ul>\";\n    html += \"      <li><span>Rotate</span>\";\n    html += \"          <ul>\";\n    html += \"<li>Left Mouse</li>\";\n    html += \"<li>Key L: Left</li>\";\n    html += \"<li>Key J: Right</li>\";\n    html += \"<li>Key I: Up</li>\";\n    html += \"<li>Key M: Down</li>\";\n    html += \"          </ul>\";\n    html += \"      </li>\";\n    html += \"      <li><span>Zoom</span>\";\n    html += \"          <ul>\";\n    html += \"<li>Middle Mouse</li>\";\n    html += \"<li>Key Z: Zoom in</li>\";\n    html += \"<li>Key X: Zoom out</li>\";\n    html += \"          </ul>\";\n    html += \"      </li>\";\n    html += \"      <li><span>Translate</span>\";\n    html += \"          <ul>\";\n    html += \"<li>Right Mouse</li>\";\n    html += \"          </ul>\";\n    html += \"      </li>\";\n    html += \"    </ul>\";\n    html += \"  </li>\";\n\n    html += \"  <li><a href='https://www.ncbi.nlm.nih.gov/Structure/icn3d/icn3d.html#HowToUseStep5' target='_blank'>Selection Hints</a></li>\";\n\n    html += \"  <li><br/></li>\";\n    html += \"</ul>\";\n    html += \"</div>\";\n    html += \"          </accordion>\";\n    html += \"    </div>\";\n\n    return html;\n};\n\niCn3DUI.prototype.setLogWindow = function() { var me = this;\n    var html = \"\";\n\n    html += \"  <div id='\" + me.pre + \"cmdlog' style='float:left; margin-top: -5px; width: 100%;'>\";\n\n    html += \"    <textarea id='\" + me.pre + \"logtext' rows='2' style='width: 100%; height: \" + me.CMD_HEIGHT + \"px; padding: 0px; border: 0px; background-color: \" + me.GREYD + \";'></textarea>\";\n    html += \"  </div>\";\n\n    return html;\n};\n\niCn3DUI.prototype.setAdvanced = function(index) { var me = this;\n    var indexStr = (index === undefined) ? '' : index;\n\n    var html = \"<div id='\" + me.pre + \"dl_advanced\" + indexStr + \"'>\";\n\n    html += \"      <table width='500'><tr><td valign='top'><table cellspacing='0'>\";\n    html += \"    <tr><td><b>Select:</b></td><td><input type='text' id='\" + me.pre + \"command\" + indexStr + \"' placeholder='$[structures].[chains]:[residues]@[atoms]' size='60'></td></tr>\";\n    html += \"    <tr><td><b>Name:</b></td><td><input type='text' id='\" + me.pre + \"command_name\" + indexStr + \"' placeholder='my_selection' size='60'></td></tr>\";\n    //html += \"<tr><td align='right'><b>Description:</b></td><td><input type='text' id='\" + me.pre + \"command_desc' placeholder='description about my selection' size='30'></td></tr>\";\n    html += \"    <tr><td colspan='2' align='left'>&nbsp;&nbsp;&nbsp;<button id='\" + me.pre + \"command_apply\" + indexStr + \"'><b>Save Selection</b></button></td></tr>\";\n    html += \"      </table></td>\";\n\n    html += \"      </tr>\";\n\n    html += \"      <tr><td>\";\n\n    html += 'Specification Tips: <div style=\"width:20px; margin-top:6px; display:inline-block;\"><span id=\"' + me.pre + 'specguide' + indexStr + '_expand\" class=\"ui-icon ui-icon-plus icn3d-expand icn3d-link\" style=\"width:15px;\" title=\"Expand\"></span><span id=\"' + me.pre + 'specguide' + indexStr + '_shrink\" class=\"ui-icon ui-icon-minus icn3d-shrink icn3d-link\" style=\"display:none; width:15px;\" title=\"Shrink\"></span></div><br>';\n\n    html += \"<div id='\" + me.pre + \"specguide\" + indexStr + \"' style='display:none; width:500px' class='icn3d-box'>\";\n\n    html += \"  <b>Specification:</b> In the selection \\\"$1HHO,4N7N.A,B,C:5-10,KRDE,chemicals@CA,C\\\":\";\n    html += \"  <ul><li>\\\"$1HHO,4N7N\\\" uses \\\"$\\\" to indicate structure selection.<br/>\";\n    html += \"  <li>\\\".A,B,C\\\" uses \\\".\\\" to indicate chain selection.<br/>\";\n    html += \"  <li>\\\":5-10,KRDE,chemicals\\\" uses \\\":\\\" to indicate residue selection. Residue selection could be residue number (5-10), one-letter sequence (KRDE), or predefined names: \\\"proteins\\\", \\\"nucleotides\\\", \\\"chemicals\\\", \\\"ions\\\", and \\\"water\\\".<br/>\";\n    html += \"  <li>\\\"@CA,C\\\" uses \\\"@\\\" to indicate atom selection.<br/>\";\n    html += \"  <li>Partial definition is allowed, e.g., \\\":1-10\\\" selects all residue IDs 1-10 in all chains.<br/>\";\n    html += \"  <li>Different selections can be unioned (with \\\"<b>or</b>\\\", default), intersected (with \\\"<b>and</b>\\\"), or negated (with \\\"<b>not</b>\\\"). For example, \\\":1-10 or :K\\\" selects all residues 1-10 and all Lys residues. \\\":1-10 and :K\\\" selects all Lys residues in the range of residue number 1-10. \\\":1-10 or not :K\\\" selects all residues 1-10, which are not Lys residues.</ul>\";\n    html += \"  <b>Set Operation:</b>\";\n    html += \"  <ul><li>Users can select multiple sets in the menu \\\"Select > Defined Sets\\\".<br/>\";\n    html += \"  <li>Different sets can be unioned (with \\\"<b>or</b>\\\", default), intersected (with \\\"<b>and</b>\\\"), or negated (with \\\"<b>not</b>\\\"). For example, if the \\\"Defined Sets\\\" menu has four sets \\\":1-10\\\", \\\":11-20\\\", \\\":5-15\\\", and \\\":7-8\\\", the command \\\"saved atoms :1-10 or :11-20 and :5-15 not :7-8\\\" unions all residues 1-10 and 11-20 to get the residues 1-20, then intersects with the residues 5-15 to get the residues 5-15, then exclude the residues 7-8 to get the final residues 5-6 and 9-15.</ul>\";\n    html += \"  <b>Full commands in url or command window:</b>\";\n    html += \"  <ul><li>Select without saving the set: select $1HHO,4N7N.A,B,C:5-10,KRDE,chemicals@CA,C<br/>\";\n    //html += \"  <li>Select and save: select $1HHO,4N7N.A,B,C:5-10,KRDE,chemicals@CA,C | name my_name | description my_description</ul>\";\n    html += \"  <li>Select and save: select $1HHO,4N7N.A,B,C:5-10,KRDE,chemicals@CA,C | name my_name</ul>\";\n\n    html += \"</div>\";\n\n    html += \"      </td></tr></table>\";\n    html += \"</div>\";\n\n    return html;\n};\n\niCn3DUI.prototype.setDialogs = function() { var me = this;\n    var html = \"\";\n\n    html += \"<!-- dialog will not be part of the form -->\";\n\n    html += \"<div id='\" + me.pre + \"alldialogs' class='icn3d-hidden icn3d-dialog'>\";\n\n    // filter for large structure\n    //html += \"<div id='\" + me.pre + \"dl_filter' style='overflow:auto; position:relative;'>\";\n    //html += \"  <div style='text-align:center; margin-bottom:10px;'><button id='\" + me.pre + \"filter'><span style='white-space:nowrap'><b>Show Structure</b></span></button>\";\n    //html += \"<button id='\" + me.pre + \"highlight_3d_dgm' style='margin-left:10px;'><span style='white-space:nowrap'><b>Highlight</b></span></button></div>\";\n    //html += \"  <div id='\" + me.pre + \"dl_filter_table' class='icn3d-box'>\";\n    //html += \"  </div>\";\n    //html += \"</div>\";\n\n    html += \"<div id='\" + me.pre + \"dl_2ddgm' class='icn3d-dl_2ddgm'>\";\n    html += \"</div>\";\n\n    if(me.cfg.align !== undefined) {\n      html += \"<div id='\" + me.pre + \"dl_alignment' style='background-color:white;'>\";\n      html += \"  <div id='\" + me.pre + \"dl_sequence2' class='icn3d-dl_sequence'>\";\n      html += \"  </div>\";\n      html += \"</div>\";\n    }\n\n    html += \"<div id='\" + me.pre + \"dl_definedsets'>\";\n    html += \"    <div id='\" + me.pre + \"dl_setsmenu'>\";\n    html += \"        <b>Defined Sets:</b> <br/>\";\n    html += \"        <select id='\" + me.pre + \"atomsCustom' multiple size='6' style='min-width:130px;'>\";\n    html += \"        </select>\";\n    html += \"        <div style='margin: 6px 0 6px 0;'><button id='\" + me.pre + \"deletesets'><b>Delete Selected Sets</b></button></div>\";\n    html += '        <b>Set Operations</b>: <div style=\"width:20px; margin-top:6px; display:inline-block;\"><span id=\"' + me.pre + 'dl_command_expand\" class=\"ui-icon ui-icon-plus icn3d-expand icn3d-link\" style=\"width:15px;\" title=\"Expand\"></span><span id=\"' + me.pre + 'dl_command_shrink\" class=\"ui-icon ui-icon-minus icn3d-shrink icn3d-link\" style=\"display:none; width:15px;\" title=\"Shrink\"></span></div><br>';\n    html += \"    </div>\";\n\n    html += \"    <div id='\" + me.pre + \"dl_command' style='display:none;'>\";\n    html += \"      <div id='\" + me.pre + \"dl_setoperations'>\";\n    html += \"        <label for='\" + me.pre + \"setOr'><input type='radio' name='\" + me.pre + \"setOperation' id='\" + me.pre + \"setOr' checked> Union (or) </label><br/>\";\n    html += \"        <label for='\" + me.pre + \"setAnd'><input type='radio' name='\" + me.pre + \"setOperation' id='\" + me.pre + \"setAnd'> Intersection (and) </label><br/>\";\n    html += \"        <label for='\" + me.pre + \"setNot'><input type='radio' name='\" + me.pre + \"setOperation' id='\" + me.pre + \"setNot'> Exclusion (not) </label>\";\n    html += \"      </div><br>\";\n\n    html += me.setAdvanced();\n\n    html += \"    </div>\";\n    html += \"</div>\";\n\n    html += me.setAdvanced(2);\n\n    html += \"<div id='\" + me.pre + \"dl_mmtfid'>\";\n    html += \"MMTF ID: <input type='text' id='\" + me.pre + \"mmtfid' value='1TUP' size=8> \";\n    html += \"<button id='\" + me.pre + \"reload_mmtf'>Load</button>\";\n    html += \"</div>\";\n\n    html += \"<div id='\" + me.pre + \"dl_pdbid'>\";\n    html += \"PDB ID: <input type='text' id='\" + me.pre + \"pdbid' value='1TUP' size=8> \";\n    html += \"<button id='\" + me.pre + \"reload_pdb'>Load</button>\";\n    html += \"</div>\";\n\n    html += \"<div id='\" + me.pre + \"dl_pdbfile'>\";\n    html += \"PDB File: <input type='file' id='\" + me.pre + \"pdbfile' size=8> \";\n    html += \"<button id='\" + me.pre + \"reload_pdbfile'>Load</button>\";\n    html += \"</div>\";\n\n    html += \"<div id='\" + me.pre + \"dl_align'>\";\n    html += \"Enter the PDB IDs or MMDB IDs of two structures that have been found to be similar by <A HREF=' https://www.ncbi.nlm.nih.gov/Structure/vastplus/vastplus.cgi'>VAST+</A> : <br/><br/>ID1: <input type='text' id='\" + me.pre + \"alignid1' value='1HHO' size=8>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ID2: <input type='text' id='\" + me.pre + \"alignid2' value='4N7N' size=8><br/><br/>\";\n    html += \"<button id='\" + me.pre + \"reload_align_ori'>All Matching Molecules Superposed</button>&nbsp;&nbsp;&nbsp;<button id='\" + me.pre + \"reload_align_refined'>Invariant Substructure Superposed</button>\";\n    html += \"</div>\";\n\n    html += \"<div id='\" + me.pre + \"dl_mol2file'>\";\n    html += \"Mol2 File: <input type='file' id='\" + me.pre + \"mol2file' size=8> \";\n    html += \"<button id='\" + me.pre + \"reload_mol2file'>Load</button>\";\n    html += \"</div>\";\n    html += \"<div id='\" + me.pre + \"dl_sdffile'>\";\n    html += \"SDF File: <input type='file' id='\" + me.pre + \"sdffile' size=8> \";\n    html += \"<button id='\" + me.pre + \"reload_sdffile'>Load</button>\";\n    html += \"</div>\";\n    html += \"<div id='\" + me.pre + \"dl_xyzfile'>\";\n    html += \"XYZ File: <input type='file' id='\" + me.pre + \"xyzfile' size=8> \";\n    html += \"<button id='\" + me.pre + \"reload_xyzfile'>Load</button>\";\n    html += \"</div>\";\n    html += \"<div id='\" + me.pre + \"dl_urlfile'>\";\n    html += \"File type: \";\n    html += \"<select id='\" + me.pre + \"filetype'>\";\n    html += \"<option value='pdb' selected>pdb</option>\";\n    html += \"<option value='mol2'>mol2</option>\";\n    html += \"<option value='sdf'>sdf</option>\";\n    html += \"<option value='xyz'>xyz</option>\";\n    html += \"</select><br/>\";\n    html += \"URL in the same host: <input type='text' id='\" + me.pre + \"urlfile' size=20><br/> \";\n    html += \"<button id='\" + me.pre + \"reload_urlfile'>Load</button>\";\n    html += \"</div>\";\n\n    html += \"<div id='\" + me.pre + \"dl_mmciffile'>\";\n    html += \"mmCIF File: <input type='file' id='\" + me.pre + \"mmciffile' value='1TUP' size=8> \";\n    html += \"<button id='\" + me.pre + \"reload_mmciffile'>Load</button>\";\n    html += \"</div>\";\n\n    html += \"<div id='\" + me.pre + \"dl_mmcifid'>\";\n    html += \"mmCIF ID: <input type='text' id='\" + me.pre + \"mmcifid' value='1TUP' size=8> \";\n    html += \"<button id='\" + me.pre + \"reload_mmcif'>Load</button>\";\n    html += \"</div>\";\n\n    html += \"<div id='\" + me.pre + \"dl_mmdbid'>\";\n    html += \"MMDB ID: <input type='text' id='\" + me.pre + \"mmdbid' value='1TUP' size=8> \";\n    html += \"<button id='\" + me.pre + \"reload_mmdb'>Load</button>\";\n    html += \"</div>\";\n\n    html += \"<div id='\" + me.pre + \"dl_blast_rep_id' style='max-width:500px;'>\";\n    html += \"Enter a Sequence ID (or FASTA sequence) and the aligned Structure ID, which can be found using the <a href='https://blast.ncbi.nlm.nih.gov/Blast.cgi?PROGRAM=blastp&PAGE_TYPE=BlastSearch&DATABASE=pdb' target='_blank'>BLAST</a> search against the pdb database with the Sequence ID or FASTA sequence as input.<br><br> \";\n    html += \"<b>Sequence ID</b> (NCBI protein accession of a sequence): <input type='text' id='\" + me.pre + \"query_id' value='NP_001108451.1' size=8><br> \";\n    html += \"or FASTA sequence: <br><textarea id='\" + me.pre + \"query_fasta' rows='5' style='width: 100%; height: \" + (me.MENU_HEIGHT) + \"px; padding: 0px; border: 0px;'></textarea><br><br>\";\n    html += \"<b>Structure ID</b> (NCBI protein accession of a chain of a 3D structure): <input type='text' id='\" + me.pre + \"blast_rep_id' value='1TSR_A' size=8><br> \";\n    html += \"<button id='\" + me.pre + \"reload_blast_rep_id'>Load</button>\";\n    html += \"</div>\";\n\n    html += \"<div id='\" + me.pre + \"dl_gi'>\";\n    html += \"Protein gi: <input type='text' id='\" + me.pre + \"gi' value='1310960' size=8> \";\n    html += \"<button id='\" + me.pre + \"reload_gi'>Load</button>\";\n    html += \"</div>\";\n\n    html += \"<div id='\" + me.pre + \"dl_cid'>\";\n    html += \"PubChem CID: <input type='text' id='\" + me.pre + \"cid' value='2244' size=8> \";\n    html += \"<button id='\" + me.pre + \"reload_cid'>Load</button>\";\n    html += \"</div>\";\n\n    html += \"<div id='\" + me.pre + \"dl_pngimage'>\";\n    html += \"iCn3D PNG image: <input type='file' id='\" + me.pre + \"pngimage'><br/>\";\n    html += \"<button id='\" + me.pre + \"reload_pngimage' style='margin-top: 6px;'>Load</button>\";\n    html += \"</div>\";\n\n    html += \"<div id='\" + me.pre + \"dl_state'>\";\n    html += \"State file: <input type='file' id='\" + me.pre + \"state'><br/>\";\n    html += \"<button id='\" + me.pre + \"reload_state' style='margin-top: 6px;'>Load</button>\";\n    html += \"</div>\";\n\n    html += \"<div id='\" + me.pre + \"dl_selection'>\";\n    html += \"Selection file: <input type='file' id='\" + me.pre + \"selectionfile'><br/>\";\n    html += \"<button id='\" + me.pre + \"reload_selectionfile' style='margin-top: 6px;'>Load</button>\";\n    html += \"</div>\";\n\n    html += \"<div id='\" + me.pre + \"dl_clr'>\";\n    html += \"Click in the input box to use the color picker:<br><br> \";\n    html += \"Custom Color: <input type='text' id='\" + me.pre + \"colorcustom' value='FF0000' size=8> \";\n    html += \"<button id='\" + me.pre + \"applycustomcolor'>Apply</button>\";\n    html += \"</div>\";\n\n    html += \"<div id='\" + me.pre + \"dl_hbonds'>\";\n    html += \"<div style='width:400px;'>To show hydrogen bonds between other residues and the current selection, please select the threshold of H-bonds.</div><br/>\";\n    html += \"  <span style='white-space:nowrap;font-weight:bold;'>Threshold: <select id='\" + me.pre + \"hbondthreshold'>\";\n    html += \"  <option value='3.2'>3.2</option>\";\n    html += \"  <option value='3.3'>3.3</option>\";\n    html += \"  <option value='3.4'>3.4</option>\";\n    html += \"  <option value='3.5' selected>3.5</option>\";\n    html += \"  <option value='3.6'>3.6</option>\";\n    html += \"  <option value='3.7'>3.7</option>\";\n    html += \"  <option value='3.8'>3.8</option>\";\n    html += \"  <option value='3.9'>3.9</option>\";\n    html += \"  <option value='4.0'>4.0</option>\";\n    html += \"  </select> &#197;</span> <span style='white-space:nowrap; margin-left:30px;'><button id='\" + me.pre + \"applyhbonds'>Display</button></span>\";\n    html += \"</div>\";\n\n    html += \"<div id='\" + me.pre + \"dl_elecmap2fofc'>\";\n    html += \"  <span style='white-space:nowrap;font-weight:bold;'>Contour at: <select id='\" + me.pre + \"sigma2fofc'>\";\n    html += \"  <option value='0'>0</option>\";\n    html += \"  <option value='0.5'>0.5</option>\";\n    html += \"  <option value='1'>1</option>\";\n    html += \"  <option value='1.5' selected>1.5</option>\";\n    html += \"  <option value='2'>2</option>\";\n    html += \"  <option value='3'>3</option>\";\n    html += \"  <option value='4'>4</option>\";\n    html += \"  <option value='5'>5</option>\";\n    html += \"  <option value='6'>6</option>\";\n    html += \"  <option value='7'>7</option>\";\n    html += \"  <option value='8'>8</option>\";\n    html += \"  <option value='9'>9</option>\";\n    html += \"  <option value='10'>10</option>\";\n    html += \"  </select> &sigma;</span> <span style='white-space:nowrap; margin-left:30px;'><button id='\" + me.pre + \"applymap2fofc'>Display</button></span> <span style='white-space:nowrap; margin-left:30px;'><button id='\" + me.pre + \"elecmapNo2'>Remove Map</button></span>\";\n    html += \"</div>\";\n\n    html += \"<div id='\" + me.pre + \"dl_elecmapfofc'>\";\n    html += \"  <span style='white-space:nowrap;font-weight:bold;'>Contour at: <select id='\" + me.pre + \"sigmafofc'>\";\n    html += \"  <option value='0'>0</option>\";\n    html += \"  <option value='0.5'>0.5</option>\";\n    html += \"  <option value='1'>1</option>\";\n    html += \"  <option value='1.5'>1.5</option>\";\n    html += \"  <option value='2'>2</option>\";\n    html += \"  <option value='3' selected>3</option>\";\n    html += \"  <option value='4'>4</option>\";\n    html += \"  <option value='5'>5</option>\";\n    html += \"  <option value='6'>6</option>\";\n    html += \"  <option value='7'>7</option>\";\n    html += \"  <option value='8'>8</option>\";\n    html += \"  <option value='9'>9</option>\";\n    html += \"  <option value='10'>10</option>\";\n    html += \"  </select> &sigma;</span> <span style='white-space:nowrap; margin-left:30px;'><button id='\" + me.pre + \"applymapfofc'>Display</button></span> <span style='white-space:nowrap; margin-left:30px;'><button id='\" + me.pre + \"elecmapNo3'>Remove Map</button></span>\";\n    html += \"</div>\";\n\n    html += \"<div id='\" + me.pre + \"dl_emmap'>\";\n    html += \"  <span style='white-space:nowrap;font-weight:bold;'>Contour at: <select id='\" + me.pre + \"empercentage'>\";\n    html += \"  <option value='0'>0</option>\";\n    html += \"  <option value='10'>10</option>\";\n    html += \"  <option value='20'>20</option>\";\n    html += \"  <option value='30' selected>30</option>\";\n    html += \"  <option value='40'>40</option>\";\n    html += \"  <option value='50'>50</option>\";\n    html += \"  <option value='60'>60</option>\";\n    html += \"  <option value='70'>70</option>\";\n    html += \"  <option value='80'>80</option>\";\n    html += \"  <option value='90'>90</option>\";\n    html += \"  <option value='100'>100</option>\";\n    html += \"  </select> % of maximum EM values</span><br><span style='white-space:nowrap; margin-left:30px;'><button id='\" + me.pre + \"applyemmap'>Display</button></span> <span style='white-space:nowrap; margin-left:30px;'><button id='\" + me.pre + \"emmapNo2'>Remove EM Map</button></span>\";\n    html += \"</div>\";\n\n    html += \"<div id='\" + me.pre + \"dl_aroundsphere'>\";\n    html += \"  <span style='white-space:nowrap'>1. Sphere with a radius: <input type='text' id='\" + me.pre + \"radius_aroundsphere' value='4' size='2'> &#197;</span><br/>\";\n    html += \"  <span style='white-space:nowrap'>2. <button id='\" + me.pre + \"applypick_aroundsphere'>Display</button> the sphere around currently selected atoms</span>\";\n    html += \"</div>\";\n\n    html += \"<div id='\" + me.pre + \"dl_addlabel'>\";\n    html += \"1. Text: <input type='text' id='\" + me.pre + \"labeltext' value='Text' size=4><br/>\";\n    html += \"2. Size: <input type='text' id='\" + me.pre + \"labelsize' value='18' size=4 maxlength=2><br/>\";\n    html += \"3. Color: <input type='text' id='\" + me.pre + \"labelcolor' value='ffff00' size=4><br/>\";\n    html += \"4. Background: <input type='text' id='\" + me.pre + \"labelbkgd' value='cccccc' size=4><br/>\";\n    if(me.isMobile()) {\n        html += \"  <span style='white-space:nowrap'>5. Touch TWO atoms</span><br/>\";\n    }\n    else {\n        html += \"  <span style='white-space:nowrap'>5. Pick TWO atoms while holding \\\"Alt\\\" key</span><br/>\";\n    }\n    html += \"<span style='white-space:nowrap'>6. <button id='\" + me.pre + \"applypick_labels'>Display</button></span>\";\n    html += \"</div>\";\n\n    html += \"<div id='\" + me.pre + \"dl_addlabelselection'>\";\n    html += \"1. Text: <input type='text' id='\" + me.pre + \"labeltext2' value='Text' size=4><br/>\";\n    html += \"2. Size: <input type='text' id='\" + me.pre + \"labelsize2' value='18' size=4 maxlength=2><br/>\";\n    html += \"3. Color: <input type='text' id='\" + me.pre + \"labelcolor2' value='ffff00' size=4><br/>\";\n    html += \"4. Background: <input type='text' id='\" + me.pre + \"labelbkgd2' value='cccccc' size=4><br/>\";\n    html += \"<span style='white-space:nowrap'>5. <button id='\" + me.pre + \"applyselection_labels'>Display</button></span>\";\n    html += \"</div>\";\n\n    html += \"<div id='\" + me.pre + \"dl_distance'>\";\n    if(me.isMobile()) {\n        html += \"  <span style='white-space:nowrap'>1. Touch TWO atoms</span><br/>\";\n    }\n    else {\n        html += \"  <span style='white-space:nowrap'>1. Pick TWO atoms while holding \\\"Alt\\\" key</span><br/>\";\n    }\n    html += \"  <span style='white-space:nowrap'>2. Color: <input type='text' id='\" + me.pre + \"distancecolor' value='ffff00' size=4><br/>\";\n    html += \"  <span style='white-space:nowrap'>3. <button id='\" + me.pre + \"applypick_measuredistance'>Display</button></span>\";\n    html += \"</div>\";\n\n    html += \"<div id='\" + me.pre + \"dl_stabilizer'>\";\n    if(me.isMobile()) {\n        html += \"  <span style='white-space:nowrap'>1. Touch TWO atoms</span><br/>\";\n    }\n    else {\n        html += \"  <span style='white-space:nowrap'>1. Pick TWO atoms while holding \\\"Alt\\\" key</span><br/>\";\n    }\n    html += \"  <span style='white-space:nowrap'>2. Color: <input type='text' id='\" + me.pre + \"stabilizercolor' value='ffffff' size=4><br/>\";\n    html += \"  <span style='white-space:nowrap'>3. <button id='\" + me.pre + \"applypick_stabilizer'>Add</button></span>\";\n    html += \"</div>\";\n\n    html += \"<div id='\" + me.pre + \"dl_stabilizer_rm'>\";\n    if(me.isMobile()) {\n        html += \"  <span style='white-space:nowrap'>1. Touch TWO atoms</span><br/>\";\n    }\n    else {\n        html += \"  <span style='white-space:nowrap'>1. Pick TWO atoms while holding \\\"Alt\\\" key</span><br/>\";\n    }\n    html += \"  <span style='white-space:nowrap'>2. <button id='\" + me.pre + \"applypick_stabilizer_rm'>Remove</button></span>\";\n    html += \"</div>\";\n\n    html += \"<div id='\" + me.pre + \"dl_thickness'>\";\n    html += me.setThicknessHtml('3dprint');\n    html += \"</div>\";\n\n    html += \"<div id='\" + me.pre + \"dl_thickness2'>\";\n    html += me.setThicknessHtml('style');\n    html += \"</div>\";\n\n    html += \"<div id='\" + me.pre + \"dl_addtrack'>\";\n    html += \"     <input type='hidden' id='\" + me.pre + \"track_chainid' value=''>\";\n\n    html += \"    <div id='\" + me.pre + \"dl_addtrack_tabs' style='border:0px;'>\";\n    html += \"      <ul>\";\n    html += \"        <li><a href='#\" + me.pre + \"tracktab1'>NCBI gi/Accession</a></li>\";\n    html += \"        <li><a href='#\" + me.pre + \"tracktab2'>FASTA</a></li>\";\n    html += \"        <li><a href='#\" + me.pre + \"tracktab3'>BED File</a></li>\";\n    html += \"        <li><a href='#\" + me.pre + \"tracktab4'>Custom</a></li>\";\n    html += \"        <li><a href='#\" + me.pre + \"tracktab5'>Current Selection</a></li>\";\n    html += \"      </ul>\";\n    html += \"      <div id='\" + me.pre + \"tracktab1'>\";\n    html += \"NCBI gi/Accession: <input type='text' id='\" + me.pre + \"track_gi' placeholder='gi' size=16> <br><br>\";\n    html += \"<button id='\" + me.pre + \"addtrack_button1'>Add Track</button>\";\n    html += \"      </div>\";\n    html += \"      <div id='\" + me.pre + \"tracktab2'>\";\n    html += \"FASTA sequence: <br><textarea id='\" + me.pre + \"track_fasta' rows='5' style='width: 100%; height: \" + (2*me.MENU_HEIGHT) + \"px; padding: 0px; border: 0px;'></textarea><br><br>\";\n    html += \"<button id='\" + me.pre + \"addtrack_button2'>Add Track</button>\";\n    html += \"      </div>\";\n    html += \"      <div id='\" + me.pre + \"tracktab3'>\";\n    html += \"BED file: <input type='file' id='\" + me.pre + \"track_bed' size=16> <br><br>\";\n    html += \"<button id='\" + me.pre + \"addtrack_button3'>Add Track</button>\";\n    html += \"      </div>\";\n    html += \"      <div id='\" + me.pre + \"tracktab4'>\";\n    html += \"Track Title: <input type='text' id='\" + me.pre + \"track_title' placeholder='track title' size=16> <br><br>\";\n    html += \"Track Text (e.g., \\\"152 G, 155-156 RR\\\" defines a character \\\"G\\\" at the position 152 and two continuous characters \\\"RR\\\" at positions from 155 to 156. The starting position is 1): <br>\";\n    html += \"<textarea id='\" + me.pre + \"track_text' rows='5' style='width: 100%; height: \" + (2*me.MENU_HEIGHT) + \"px; padding: 0px; border: 0px;'></textarea><br><br>\";\n    html += \"<button id='\" + me.pre + \"addtrack_button4'>Add Track</button>\";\n    html += \"      </div>\";\n    html += \"      <div id='\" + me.pre + \"tracktab5'>\";\n    html += \"Track Title: <input type='text' id='\" + me.pre + \"track_selection' placeholder='track title' size=16> <br><br>\";\n    html += \"<button id='\" + me.pre + \"addtrack_button5'>Add Track</button>\";\n    html += \"      </div>\";\n\n    html += \"    </div>\";\n\n    html += \"</div>\";\n\n    html += \"<div id='\" + me.pre + \"dl_saveselection'>\";\n    var index = (me.icn3d) ? Object.keys(me.icn3d.defNames2Atoms).length : 1;\n    var suffix = '';\n    html += \"Name: <input type='text' id='\" + me.pre + \"seq_command_name\" + suffix + \"' value='seq_\" + index + \"' size='5'> <br>\";\n    //html += \"Description: <input type='text' id='\" + me.pre + \"seq_command_desc\" + suffix + \"' value='seq_desc_\" + index + \"' size='10'> <br>\";\n    html += \"<button style='white-space:nowrap;' id='\" + me.pre + \"seq_saveselection\" + suffix + \"'>Save</button> <button style='white-space:nowrap; margin-left:20px;' id='\" + me.pre + \"seq_clearselection\" + suffix + \"'>Clear</button><br/><br/>\";\n    html += \"</div>\";\n\n\n    html += \"<div id='\" + me.pre + \"dl_copyurl'>\";\n    html += \"Please copy one of the URLs below. They work the same way.<br><br>\";\n    html += \"Original URL with commands: <br><textarea id='\" + me.pre + \"ori_url' rows='4' style='width:100%'></textarea><br><br>\";\n    html += \"Short URL: <br><input type='text' id='\" + me.pre + \"short_url' value='' style='width:100%'><br><br>\";\n    html += \"</div>\";\n\n    html += \"<div id='\" + me.pre + \"dl_selectannotations' class='icn3d-annotation' style='background-color:white;'>\";\n\n    html += \"    <div id='\" + me.pre + \"dl_annotations_tabs'>\";\n\n/*\n    html += \"    <table border=0><tr>\";\n    html += \"    <td valign='top' width='100'>\";\n    html += \"        <div style='margin-top:28px; white-space: nowrap;'><span id='\" + me.pre + \"viewdetail' style='display:none;' title='Expand the width of the annotation window to view the residue details'><b>Detailed View</b></span><span id='\" + me.pre + \"overview' class='icn3d-viewselection' title='Shrink the width of the annotaion window to overview'><b>Overview</b></span></div>\";\n    html += \"        <label class='icn3d-switch'><input id='\" + me.pre + \"viewswitch' type='checkbox'><div class='icn3d-slider icn3d-round' style='width:34px; height:18px; margin: 16px 0px 0px 30px;' title='Left (\\\"Detailed View\\\")&#13;Right (\\\"Overview\\\")'></div></label>\";\n    html += \"    </td>\";\n    html += \"    <td>\";\n    html += \"        <div style='border-left:1px solid #ccc; width:1px; height:40px;'></div>\";\n    html += \"    </td>\";\n    html += \"    <td>\";\n*/\n\n/*\n    html += \"        <div style='white-space: nowrap;'><span id='\" + me.pre + \"viewdetail' class='icn3d-large'><b>Sequence Details</b></span>\";\n    html += \"        <label class='icn3d-switch'><input id='\" + me.pre + \"viewswitch' type='checkbox'><div class='icn3d-slider icn3d-round' style='width:34px; height:18px; display:inline-block; margin: 6px 0px 0px 145px;' title='Left (\\\"Detailed View\\\")&#13;Right (\\\"Overview\\\")'></div></label>\";\n    html += \"        <span id='\" + me.pre + \"overview' style='margin-left:50px;' class='icn3d-viewselection icn3d-large'><b>Graphic Summary</b></span>\";\n\n    html += \"<button style='white-space:nowrap; margin-left:50px' id='\" + me.pre + \"showallchains'>Show All Chains</button></div>\";\n*/\n\n    html += \"<div id='\" + me.pre + \"dl_anno_view_tabs' style='border:0px; height:33px;'>\";\n    html += \"      <ul>\";\n    html += \"        <li><a href='#\" + me.pre + \"anno_tmp1' id='\" + me.pre + \"anno_summary'>Summary</a></li>\";\n    html += \"        <li><a href='#\" + me.pre + \"anno_tmp2' id='\" + me.pre + \"anno_details'>Details</a></li>\";\n    html += \"      </ul>\";\n    html += \"      <div id='\" + me.pre + \"anno_tmp1'>\";\n    html += \"      </div>\";\n    html += \"      <div id='\" + me.pre + \"anno_tmp2'>\";\n    html += \"      </div>\";\n    html += \"</div>\";\n\n    html += \"      <div class='icn3d-box' style='width:520px;'><b>Annotations:&nbsp;</b><br><table border=0><tr>\";\n    html += \"        <td style='min-width:60px;'><input type='checkbox' id='\" + me.pre + \"anno_all'>All&nbsp;&nbsp;</td>\";\n    html += \"        <td style='min-width:130px;'><input type='checkbox' id='\" + me.pre + \"anno_cdd' checked>Conserved Domains&nbsp;&nbsp;</td>\";\n    html += \"        <td style='min-width:60px;'><input type='checkbox' id='\" + me.pre + \"anno_clinvar'>ClinVar&nbsp;&nbsp;</td>\";\n    html += \"        <td style='min-width:110px;'><input type='checkbox' id='\" + me.pre + \"anno_binding'>Functional Sites&nbsp;&nbsp;</td>\";\n    html += \"        <td style='min-width:110px;'><input type='checkbox' id='\" + me.pre + \"anno_ssbond'>Disulfide Bonds&nbsp;&nbsp;</td>\";\n    html += \"      </tr><tr>\";\n    html += \"        <td style='min-width:60px;'><input type='checkbox' id='\" + me.pre + \"anno_custom'>Custom&nbsp;&nbsp;</td>\";\n    html += \"        <td style='min-width:130px;'><input type='checkbox' id='\" + me.pre + \"anno_3dd'>3D Domains&nbsp;&nbsp;</td>\";\n    html += \"        <td style='min-width:60px;'><input type='checkbox' id='\" + me.pre + \"anno_snp'>SNPs&nbsp;&nbsp;</td>\";\n    html += \"        <td style='min-width:110px;'><input type='checkbox' id='\" + me.pre + \"anno_interact'>Interactions&nbsp;&nbsp;</td>\";\n    html += \"        <td></td>\";\n    html += \"      </tr></table></div>\";\n\n    html += \"<button style='white-space:nowrap; margin-left:5px;' id='\" + me.pre + \"showallchains'>Show All Chains</button><br>\";\n//    html += \"    </td>\";\n//    html += \"    </tr></table>\";\n\n    html += \"    <div id='\" + me.pre + \"seqguide_wrapper' style='display:none'><br>\" + me.setSequenceGuide(\"2\") + \"</div>\";\n\n    // add note about assembly\n    //html = \"     <div id='\" + me.pre + \"assembly_note' class='icn3d-annoLargeTitle'><br>Only the asymmetric unit is shown in the sequence window.</div>\";\n\n    html += \"    </div><br/><hr><br>\";\n\n    html += \"    <div id='\" + me.pre + \"dl_annotations'>\";\n    html += \"    </div>\";\n    html += \"</div>\";\n\n    html += \"</div>\";\n    html += \"<!--/form-->\";\n\n    return html;\n};\n\niCn3DUI.prototype.setThicknessHtml = function (type) { var me = this;\n    var html = '';\n\n    // type == '3dprint' or 'style'\n    var linerad = (type == '3dprint') ? '1' : '0.1';\n    var coilrad = (type == '3dprint') ? '1.2' : '0.3';\n    var stickrad = (type == '3dprint') ? '0.8' : '0.4';\n    var tracerad = (type == '3dprint') ? '1' : '0.2';\n    var ribbonthick = (type == '3dprint') ? '1' : '0.2';\n    var prtribbonwidth = (type == '3dprint') ? '2' : '1.3';\n    var nucleotideribbonwidth = (type == '3dprint') ? '1.4' : '0.8';\n    var ballscale = (type == '3dprint') ? '0.6' : '0.3';\n\n    html += \"<b>Line Radius</b>: <input type='text' id='\" + me.pre + \"linerad_\" + type + \"' value='\" + linerad + \"' size=4>&nbsp;&nbsp;&nbsp;(for stabilizers, hydrogen bonds, distance lines, default 0.1)<br/>\";\n    html += \"<b>Coil Radius</b>: <input type='text' id='\" + me.pre + \"coilrad_\" + type + \"' value='\" + coilrad + \"' size=4>&nbsp;&nbsp;&nbsp;(for coils, default 0.3)<br/>\";\n    html += \"<b>Stick Radius</b>: <input type='text' id='\" + me.pre + \"stickrad_\" + type + \"' value='\" + stickrad + \"' size=4>&nbsp;&nbsp;&nbsp;(for sticks, default 0.4)<br/>\";\n    html += \"<b>Trace Radius</b>: <input type='text' id='\" + me.pre + \"tracerad_\" + type + \"' value='\" + tracerad + \"' size=4>&nbsp;&nbsp;&nbsp;(for C alpha trace, O3' trace, default 0.2)<br/>\";\n\n    html += \"<b>Ribbon Thickness</b>: <input type='text' id='\" + me.pre + \"ribbonthick_\" + type + \"' value='\" + ribbonthick + \"' size=4>&nbsp;&nbsp;&nbsp;(for helix and sheet ribbons, nucleotide ribbons, default 0.2)<br/>\";\n    html += \"<b>Protein Ribbon Width</b>: <input type='text' id='\" + me.pre + \"prtribbonwidth_\" + type + \"' value='\" + prtribbonwidth + \"' size=4>&nbsp;&nbsp;&nbsp;(for helix and sheet ribbons, default 1.3)<br/>\";\n    html += \"<b>Nucleotide Ribbon Width</b>: <input type='text' id='\" + me.pre + \"nucleotideribbonwidth_\" + type + \"' value='\" + nucleotideribbonwidth + \"' size=4>&nbsp;&nbsp;&nbsp;(for nucleotide ribbons, default 0.8)<br/>\";\n\n    html += \"<b>Ball Scale</b>: <input type='text' id='\" + me.pre + \"ballscale_\" + type + \"' value='\" + ballscale + \"' size=4>&nbsp;&nbsp;&nbsp;(for styles 'Ball and Stick' and 'Dot', default 0.3)<br/>\";\n\n    html += \"<span style='white-space:nowrap'><button id='\" + me.pre + \"apply_thickness_\" + type + \"'>Preview</button></span>\";\n\n    return html;\n};\n\niCn3DUI.prototype.setSequenceGuide = function (suffix, bShown) { var me = this;\n  var sequencesHtml = '';\n\n  var index = (me.icn3d) ? Object.keys(me.icn3d.defNames2Atoms).length : 1;\n\n  if(bShown) {\n     sequencesHtml += \"<div id='\" + me.pre + \"seqguide\" + suffix + \"'>\";\n }\n else {\n     sequencesHtml += '<div style=\"width:20px; margin-left:3px; display:inline-block;\"><span id=\"' + me.pre + 'seqguide' + suffix + '_expand\" class=\"ui-icon ui-icon-plus icn3d-expand icn3d-link\" style=\"width:15px;\" title=\"Expand\"></span><span id=\"' + me.pre + 'seqguide' + suffix + '_shrink\" class=\"ui-icon ui-icon-minus icn3d-shrink icn3d-link\" style=\"display:none; width:15px;\" title=\"Shrink\"></span></div> ';\n\n     //sequencesHtml += \"<div style='min-width:200px; display:inline-block;'><b>Selection:</b> Name: <input type='text' id='\" + me.pre + \"seq_command_name\" + suffix + \"' value='seq_\" + index + \"' size='5'> &nbsp;&nbsp;Description: <input type='text' id='\" + me.pre + \"seq_command_desc\" + suffix + \"' value='seq_desc_\" + index + \"' size='10'> &nbsp;&nbsp;<button style='white-space:nowrap;' id='\" + me.pre + \"seq_saveselection\" + suffix + \"'>Save</button> <button style='white-space:nowrap; margin-left:20px;' id='\" + me.pre + \"seq_clearselection\" + suffix + \"'>Clear</button></div><br/>\";\n     sequencesHtml += \"<div style='min-width:200px; display:inline-block;'><b>Selection:</b> Name: <input type='text' id='\" + me.pre + \"seq_command_name\" + suffix + \"' value='seq_\" + index + \"' size='5'> &nbsp;&nbsp;<button style='white-space:nowrap;' id='\" + me.pre + \"seq_saveselection\" + suffix + \"'>Save</button> <button style='white-space:nowrap; margin-left:20px;' id='\" + me.pre + \"seq_clearselection\" + suffix + \"'>Clear</button></div><br/>\";\n\n     sequencesHtml += \"<div id='\" + me.pre + \"seqguide\" + suffix + \"' style='display:none; white-space:normal;' class='icn3d-box'>\";\n }\n\n  if(!me.isMobile()) {\n      sequencesHtml += \"<b>Select on 1D sequences:</b> drag to select, drag again to deselect, multiple selection is allowed without Ctrl key, click \\\"Save Selection\\\" to save the current selection.<br/><br/>\";\n\n      sequencesHtml += \"<b>Select on 2D interaction diagram:</b> click on the nodes or lines. The nodes are chains and can be united with the Ctrl key. The lines are interactions and can NOT be united. Each click on the lines selects half of the lines, i.e., select the interacting residues in one of the two chains. The selected residues are saved in the \\\"Select -> Advanced\\\" menu.<br/><br/>\";\n\n      var tmpStr = me.isMobile() ? 'use finger to pick' : 'hold \"Alt\" and use mouse to pick';\n      sequencesHtml += \"<b>Select on 3D structures:</b> \" + tmpStr + \", click the second time to deselect, hold \\\"Ctrl\\\" to union selection, hold \\\"Shift\\\" to select a range, press the up/down arrow to switch among atom/residue/strand/chain/structure, click \\\"Save Selection\\\" to save the current selection.<br/><br/>\";\n\n      sequencesHtml += \"<b>Save the current selection</b> (either on 3D structure, 2D interactions, or 1D sequence): open the menu \\\"Select -> Save Selection\\\", specify the name and description for the selection, and click \\\"Save\\\".<br/><br/>\";\n  }\n  else {\n        sequencesHtml += \"<b>Select Sequences:</b> touch to select, touch again to deselect, multiple selection is allowed without Ctrl key, click \\\"Save Selection\\\" to save the current selection.<br/><br/>\";\n  }\n\n  var resCategories = \"<b>Residue labeling:</b> standard residue with coordinates: UPPER case letter; nonstandard residue with coordinates: the first UPPER case letter plus a period except that water residue uses the letter 'O'; residue missing coordinates: lower case letter.\";\n  var scroll = (me.isMac() && !me.isMobile()) ? \"<br/><br/><b>Turn on scroll bar:</b> System preferences -> General -> show scroll bars -> check Always\" : \"\";\n\n  sequencesHtml += resCategories + scroll + \"<br/></div>\";\n\n  return sequencesHtml;\n};\n\niCn3DUI.prototype.getAlignSequencesAnnotations = function (alignChainArray, bUpdateHighlightAtoms, residueArray, bShowHighlight) { var me = this;\n  var resCategories = \"<b>Residue labeling:</b> aligned residue with coordinates: UPPER case letter; non-aligned residue with coordinates: lower case letter which can be highlighted; residue missing coordinates: lower case letter which can NOT be highlighted.\";\n  var scroll = (me.isMac() && !me.isMobile()) ? \"<br/><b>Turn on scroll bar:</b> System preferences -> General -> show scroll bars -> check Always\" : \"\";\n\n  var sequencesHtml;\n\n  if(!me.isMobile()) {\n      sequencesHtml = \"<b>Select on 1D sequences:</b> drag to select, drag again to deselect, multiple selection is allowed without Ctrl key, click \\\"Save Selection\\\" to save the current selection.<br/>\";\n\n      sequencesHtml += \"<b>Select on 2D interaction diagram:</b> click on the nodes or lines. The nodes are chains and can be united with the Ctrl key. The lines are interactions and can NOT be united. Each click on the lines selects half of the lines, i.e., select the interacting residues in one of the two chains. The selected residues are saved in the \\\"Select -> Advanced\\\" menu.<br/><br/>\";\n\n      var tmpStr = me.isMobile() ? 'use finger to pick' : 'hold \"Alt\" and use mouse to pick';\n      sequencesHtml += \"<b>Select on 3D structures:</b> \" + tmpStr + \", click the second time to deselect, hold \\\"Ctrl\\\" to union selection, hold \\\"Shift\\\" to select a range, press the up/down arrow to switch among atom/residue/strand/chain/structure, click \\\"Save Selection\\\" to save the current selection.<br/>\";\n\n      sequencesHtml += \"<b>Save the current selection</b> (either on 3D structure, 2D interactions, or 1D sequence): open the menu \\\"Select -> Save Selection\\\", specify the name and description for the selection, and click \\\"Save\\\".<br/><br/>\";\n  }\n  else {\n        sequencesHtml = \"<b>Select Aligned Sequences:</b> touch to select, touch again to deselect, multiple selection is allowed without Ctrl key, click \\\"Save Selection\\\" to save the current selection.<br/>\";\n  }\n\n  //sequencesHtml += \"<div style='min-width:200px;'><b>Selection:</b> Name: <input type='text' id='\" + me.pre + \"alignseq_command_name' value='alseq_\" + Object.keys(me.icn3d.defNames2Atoms).length + \"' size='10'> &nbsp;&nbsp;Description: <input type='text' id='\" + me.pre + \"alignseq_command_desc' value='alseq_desc_\" + Object.keys(me.icn3d.defNames2Atoms).length + \"' size='20'> <button style='white-space:nowrap;' id='\" + me.pre + \"alignseq_saveselection'>Save</button> <button style='white-space:nowrap; margin-left:20px;' id='\" + me.pre + \"alignseq_clearselection'>Clear</button></div><br/>\";\n  sequencesHtml += \"<div style='min-width:200px;'><b>Selection:</b> Name: <input type='text' id='\" + me.pre + \"alignseq_command_name' value='alseq_\" + Object.keys(me.icn3d.defNames2Atoms).length + \"' size='10'> &nbsp;&nbsp;<button style='white-space:nowrap;' id='\" + me.pre + \"alignseq_saveselection'>Save</button> <button style='white-space:nowrap; margin-left:20px;' id='\" + me.pre + \"alignseq_clearselection'>Clear</button></div><br/>\";\n\n  sequencesHtml += resCategories + scroll + \"<br/>\";\n\n  var maxSeqCnt = 0;\n\n  var chainHash = {};\n  if(alignChainArray !== undefined) {\n      for(var i = 0, il = alignChainArray.length; i < il; ++i) {\n          chainHash[alignChainArray[i]] = 1;\n      }\n  }\n\n  var bModifyHAtoms = Object.keys(me.icn3d.hAtoms).length == Object.keys(me.icn3d.atoms).length && bHighlightChain && (bUpdateHighlightAtoms === undefined || bUpdateHighlightAtoms);\n\n  if(bModifyHAtoms) {\n      me.icn3d.hAtoms = {};\n  }\n\n  for(var i in me.icn3d.alnChains) {\n      var bHighlightChain = (alignChainArray !== undefined && chainHash.hasOwnProperty(i)) ? true : false;\n\n      //if( bHighlightChain && (bUpdateHighlightAtoms === undefined || bUpdateHighlightAtoms) ) {\n      // do not update isa subset is selected already\n      if( bModifyHAtoms ) {\n          me.icn3d.hAtoms = me.icn3d.unionHash(me.icn3d.hAtoms, me.icn3d.alnChains[i]);\n      }\n\n      var resiHtmlArray = [], seqHtml = \"\";\n      var seqLength = (me.icn3d.alnChainsSeq[i] !== undefined) ? me.icn3d.alnChainsSeq[i].length : 0;\n\n      if(seqLength > maxSeqCnt) maxSeqCnt = seqLength;\n\n      var dashPos = i.indexOf('_');\n      var structure = i.substr(0, dashPos);\n      var chain = i.substr(dashPos + 1);\n\n      seqHtml += \"<span class='icn3d-residueNum' title='starting residue number'>\" + me.icn3d.alnChainsSeq[i][0].resi + \"</span>\";\n      var bHighlightChain = (alignChainArray !== undefined && chainHash.hasOwnProperty(i)) ? true : false;\n\n      for(var k=0, kl=seqLength; k < kl; ++k) {\n        // resiId is empty if it's gap\n        var resiId = 'N/A', resIdFull = '', color = '#000';\n        if(me.icn3d.alnChainsSeq[i][k].resi !== '' && !isNaN(me.icn3d.alnChainsSeq[i][k].resi)) {\n            resiId = me.icn3d.alnChainsSeq[i][k].resi;\n            resIdFull = structure + \"_\" + chain + \"_\" + resiId;\n            color = me.icn3d.alnChainsSeq[i][k].color;\n        }\n\n        var classForAlign = \"class='icn3d-residue\"; // used to identify a residue when clicking a residue in sequence\n\n        //if( (bShowHighlight === undefined || bShowHighlight) && (bHighlightChain || (me.icn3d.alnChainsSeq[i][k].aligned === 2 && residueArray !== undefined && resIdFull !== '' && residueArray.indexOf(resIdFull) !== -1) ) ) {\n        if( (bShowHighlight === undefined || bShowHighlight) && (bHighlightChain || (residueArray !== undefined && resIdFull !== '' && residueArray.indexOf(resIdFull) !== -1) ) ) {\n            classForAlign = \"class='icn3d-residue icn3d-highlightSeq\";\n        }\n\n        // class for alignment: cons, ncons, nalign\n        if(resIdFull === '') {\n            classForAlign += \"'\";\n        }\n        else {\n            classForAlign += \" \" + me.icn3d.alnChainsSeq[i][k].class + \"'\";\n        }\n\n        var colorRes;\n        if(!me.icn3d.residues.hasOwnProperty(resIdFull)) {\n            colorRes = '#000000;';\n        }\n        else {\n            var firstAtom = me.icn3d.getFirstCalphaAtomObj(me.icn3d.residues[resIdFull]);\n            colorRes = (firstAtom.color !== undefined) ? '#' + firstAtom.color.getHexString() + ';' : '#000000;';\n        }\n\n        if(colorRes.toUpperCase() === '#FFFFFF;') colorRes = me.GREYD;\n\n        var bWithCoord = (resIdFull !== '') ? true : false;\n\n        if(bWithCoord) {\n            if(me.icn3d.alnChainsSeq[i][k].resi != -1) {\n                // add \"align\" in front of id so that full sequence and aligned sequence will not conflict\n                seqHtml += \"<span id='align_\" + me.pre + resIdFull + \"' \" + classForAlign + \" style='color:\" + colorRes + \"' title='\" + me.icn3d.alnChainsSeq[i][k].resn + me.icn3d.alnChainsSeq[i][k].resi + \"'>\" + me.icn3d.alnChainsSeq[i][k].resn + \"</span>\";\n            }\n            else {\n                seqHtml += \"<span>\" + me.icn3d.alnChainsSeq[i][k].resn + \"</span>\";\n            }\n        }\n        else {\n            seqHtml += \"<span title='\" + me.icn3d.alnChainsSeq[i][k].resn + me.icn3d.alnChainsSeq[i][k].resi + \"'>\" + me.icn3d.alnChainsSeq[i][k].resn + \"</span>\";\n        }\n\n      }\n      seqHtml += \"<span class='icn3d-residueNum' title='ending residue number'>\" + me.icn3d.alnChainsSeq[i][seqLength-1].resi + \"</span>\";\n\n      // the first chain stores all annotations\n      var annoLength = (me.icn3d.alnChainsAnno[i] !== undefined) ? me.icn3d.alnChainsAnno[i].length : 0;\n\n      for(var j=0, jl=annoLength; j < jl; ++j) {\n        resiHtmlArray[j] = \"\";\n\n        var chainid = (j == 0) ? me.icn3d.alnChainsAnTtl[i][4][0] : i; // bottom secondary, j == 0: chain2,  next secondary, j == 1: chain1,\n\n        resiHtmlArray[j] += \"<span class='icn3d-residueNum'></span>\"; // a spot corresponding to the starting and ending residue number\n        for(var k=0, kl=me.icn3d.alnChainsAnno[i][j].length; k < kl; ++k) {\n          var text = me.icn3d.alnChainsAnno[i][j][k];\n\n          if(text == 'H' || text == 'E' || text == 'c' || text == 'o') {\n\n            if(text == 'H') {\n                if(k % 2 == 0) {\n                    resiHtmlArray[j] += '<span class=\"icn3d-helix\">&nbsp;</span>';\n                }\n                else {\n                    resiHtmlArray[j] += '<span class=\"icn3d-helix2\">&nbsp;</span>';\n                }\n            }\n            else if(text == 'E') {\n                if(me.icn3d.alnChainsSeq[chainid][k] !== undefined) {\n                    //var resiId = me.icn3d.alnChainsSeq[i][k].resi;\n                    var resiId = me.icn3d.alnChainsSeq[chainid][k].resi;\n                    var resIdFull = chainid + \"_\" + resiId;\n\n                    if(me.icn3d.residues.hasOwnProperty(resIdFull)) {\n                        var atom = me.icn3d.getFirstCalphaAtomObj(me.icn3d.residues[resIdFull]);\n\n                        if(atom.ssend) {\n                            resiHtmlArray[j] += '<span class=\"icn3d-sheet2\">&nbsp;</span>';\n                        }\n                        else {\n                            resiHtmlArray[j] += '<span class=\"icn3d-sheet\">&nbsp;</span>';\n                        }\n                    }\n                }\n            }\n            else if(text == 'c') {\n                resiHtmlArray[j] += '<span class=\"icn3d-coil\">&nbsp;</span>';\n            }\n            else if(text == 'o') {\n                resiHtmlArray[j] += '<span class=\"icn3d-other\">&nbsp;</span>';\n            }\n            else {\n                resiHtmlArray[j] += \"<span></span>\";\n            }\n          }\n          else {\n              resiHtmlArray[j] += \"<span>\" + text + \"</span>\";\n          }\n          //resiHtmlArray[j] += \"<span>\" + me.icn3d.alnChainsAnno[i][j][k] + \"</span>\";\n        }\n        resiHtmlArray[j] += \"<span class='icn3d-residueNum'></span>\"; // a spot corresponding to the starting and ending residue number\n      }\n\n      var chainidTmp = i, title = (me.icn3d.pdbid_chain2title !== undefined) ? me.icn3d.pdbid_chain2title[i] : '';\n\n      // add markers and residue numbers\n      for(var j=annoLength-1; j >= 0; --j) {\n        var annotitle = me.icn3d.alnChainsAnTtl[i][j][0];\n        if(annotitle == 'SS') annotitle = '';\n        //sequencesHtml += \"<div class='icn3d-residueLine' style='white-space:nowrap;'><div class='icn3d-seqTitle' chain='\" + i + \"' anno='\" + j + \"'>\" + annotitle + \"</div>\" + resiHtmlArray[j] + \"<br/></div>\";\n        sequencesHtml += \"<div class='icn3d-residueLine' style='white-space:nowrap;'><div class='icn3d-seqTitle' anno='\" + j + \"'>\" + annotitle + \"</div>\" + resiHtmlArray[j] + \"<br/></div>\";\n      }\n\n      sequencesHtml += '<div class=\"icn3d-seqTitle icn3d-link icn3d-blue\" chain=\"' + i + '\" anno=\"sequence\" title=\"' + title + '\">' + chainidTmp + ' </div><span class=\"icn3d-seqLine\">' + seqHtml + '</span><br/>';\n  }\n\n  return {\"sequencesHtml\": sequencesHtml, \"maxSeqCnt\":maxSeqCnt};\n};\n\n\n/**\n * @author Jiyao Wang <wangjiy@ncbi.nlm.nih.gov> / https://github.com/ncbi/icn3d\n */\n\niCn3DUI.prototype.openDialogHalfWindow = function (id, title, dialogWidth, bForceResize) {  var me = this;\n    var twoddgmWidth = 170;\n\n    me.resizeCanvas(me.WIDTH - dialogWidth - me.LESSWIDTH, me.HEIGHT - me.LESSHEIGHT - me.EXTRAHEIGHT, bForceResize);\n\n    height = me.HEIGHT - me.LESSHEIGHT - me.EXTRAHEIGHT;\n    width = dialogWidth;\n\n    var position;\n    if(me.cfg.showmenu) {\n        //position ={ my: \"left top\", at: \"right top+80\", of: \"#\" + me.pre + \"viewer\", collision: \"none\" };\n        position ={ my: \"left top\", at: \"right top+40\", of: \"#\" + me.pre + \"viewer\", collision: \"none\" };\n    }\n    else {\n        position ={ my: \"left top\", at: \"right top\", of: \"#\" + me.pre + \"viewer\", collision: \"none\" };\n    }\n\n    // disable resize\n    me.cfg.resize = false;\n\n    window.dialog = $( \"#\" + id ).dialog({\n      autoOpen: true,\n      title: title,\n      height: height,\n      width: width,\n      modal: false,\n      position: position,\n      close: function(e) {\n            // determine whether dialogs initilaized\n            var bSelectannotationsInit = $('#' + me.pre + 'dl_selectannotations').hasClass('ui-dialog-content'); // initialized\n            var bAlignmentInit = $('#' + me.pre + 'dl_alignment').hasClass('ui-dialog-content'); // initialized\n            var bTwoddgmInit = $('#' + me.pre + 'dl_2ddgm').hasClass('ui-dialog-content'); // initialized\n            var bSetsInit = $('#' + me.pre + 'dl_definedsets').hasClass('ui-dialog-content'); // initialized\n\n            var bSelectannotationsInit2 = false, bAlignmentInit2 = false, bTwoddgmInit2 = false, bSetsInit2 = false;\n            if(bSelectannotationsInit) bSelectannotationsInit2 = $('#' + me.pre + 'dl_selectannotations').dialog( 'isOpen' );\n            if(bAlignmentInit) bAlignmentInit2 = $('#' + me.pre + 'dl_alignment').dialog( 'isOpen' );\n            if(bTwoddgmInit) bTwoddgmInit2 = $('#' + me.pre + 'dl_2ddgm').dialog( 'isOpen' );\n            if(bSetsInit) bSetsInit2 = $('#' + me.pre + 'dl_definedsets').dialog( 'isOpen' );\n\n          if((id === me.pre + 'dl_selectannotations' && (!bAlignmentInit2) )\n            || (id === me.pre + 'dl_alignment' && (!bSelectannotationsInit2) )\n            ) {\n              if(bTwoddgmInit2 || bSetsInit2) {\n                  me.resizeCanvas(me.WIDTH - me.LESSWIDTH - twoddgmWidth, me.HEIGHT - me.LESSHEIGHT - me.EXTRAHEIGHT, true);\n\n                  if(bTwoddgmInit2) me.openDialog2Ddgm(me.pre + 'dl_2ddgm', undefined, bSetsInit2);\n                  if(bSetsInit2) me.openDialog2Ddgm(me.pre + 'dl_definedsets');\n              }\n              else {\n                  me.resizeCanvas(me.WIDTH - me.LESSWIDTH, me.HEIGHT - me.LESSHEIGHT - me.EXTRAHEIGHT, true);\n              }\n          }\n      },\n      resize: function(e) {\n          if(id == me.pre + 'dl_selectannotations') {\n              me.hideFixedTitle();\n          }\n      }\n    });\n};\n\niCn3DUI.prototype.openDialog2Ddgm = function (id, inHeight, bDefinedSets) {  var me = this;\n    var twoddgmWidth = 170;\n    var at, title;\n    if(id === me.pre + 'dl_definedsets') {\n        at = \"right top\";\n        title = 'Select sets';\n    }\n    else if(id === me.pre + 'dl_2ddgm') {\n        if(bDefinedSets !== undefined && bDefinedSets) {\n            at = \"right top+240\";\n        }\n        else {\n            at = \"right top\";\n        }\n\n        title = 'Interactions';\n    }\n\n    //var position ={ my: \"left top\", at: at, of: \"#\" + me.pre + \"canvas\", collision: \"none\" };\n    var position ={ my: \"left top+\" + me.MENU_HEIGHT, at: at, of: \"#\" + me.pre + \"viewer\", collision: \"none\" };\n\n    var height = 'auto';\n\n    window.dialog = $( '#' + id ).dialog({\n      autoOpen: true,\n      title: title,\n      height: height,\n      width: twoddgmWidth,\n      modal: false,\n      position: position,\n      close: function(e) {\n            // determine whether dialogs initilaized\n            var bSelectannotationsInit = $('#' + me.pre + 'dl_selectannotations').hasClass('ui-dialog-content'); // initialized\n            var bAlignmentInit = $('#' + me.pre + 'dl_alignment').hasClass('ui-dialog-content'); // initialized\n            var bTwoddgmInit = $('#' + me.pre + 'dl_2ddgm').hasClass('ui-dialog-content'); // initialized\n            var bSetsInit = $('#' + me.pre + 'dl_definedsets').hasClass('ui-dialog-content'); // initialized\n\n            var bSelectannotationsInit2 = false, bAlignmentInit2 = false, bTwoddgmInit2 = false, bSetsInit2 = false;\n            if(bSelectannotationsInit) bSelectannotationsInit2 = $('#' + me.pre + 'dl_selectannotations').dialog( 'isOpen' );\n            if(bAlignmentInit) bAlignmentInit2 = $('#' + me.pre + 'dl_alignment').dialog( 'isOpen' );\n            if(bTwoddgmInit) bTwoddgmInit2 = $('#' + me.pre + 'dl_2ddgm').dialog( 'isOpen' );\n            if(bSetsInit) bSetsInit2 = $('#' + me.pre + 'dl_definedsets').dialog( 'isOpen' );\n\n          if( (!bSelectannotationsInit2) && (!bAlignmentInit2) ) {\n                me.resizeCanvas(me.WIDTH - me.LESSWIDTH, me.HEIGHT - me.LESSHEIGHT - me.EXTRAHEIGHT, true);\n          }\n      }\n    });\n};\n\niCn3DUI.prototype.openDialog = function (id, title) {  var me = this;\n    var width = 400, height = 150;\n    var twoddgmWidth = 170;\n\n    var bSelectannotationsInit = $('#' + me.pre + 'dl_selectannotations').hasClass('ui-dialog-content'); // initialized\n    var bAlignmentInit = $('#' + me.pre + 'dl_alignment').hasClass('ui-dialog-content'); // initialized\n    var bTwoddgmInit = $('#' + me.pre + 'dl_2ddgm').hasClass('ui-dialog-content'); // initialized\n    var bSetsInit = $('#' + me.pre + 'dl_definedsets').hasClass('ui-dialog-content'); // initialized\n\n    var bSelectannotationsInit2 = false, bAlignmentInit2 = false, bTwoddgmInit2 = false, bSetsInit2 = false;\n    if(bSelectannotationsInit) bSelectannotationsInit2 = $('#' + me.pre + 'dl_selectannotations').dialog( 'isOpen' );\n    if(bAlignmentInit) bAlignmentInit2 = $('#' + me.pre + 'dl_alignment').dialog( 'isOpen' );\n    if(bTwoddgmInit) bTwoddgmInit2 = $('#' + me.pre + 'dl_2ddgm').dialog( 'isOpen' );\n    if(bSetsInit) bSetsInit2 = $('#' + me.pre + 'dl_definedsets').dialog( 'isOpen' );\n\n    if(id === me.pre + 'dl_selectannotations' || id === me.pre + 'dl_alignment') {\n        var dialogWidth = 0.5 * (me.WIDTH - me.LESSWIDTH) - twoddgmWidth * 0.5;\n\n        if(me.WIDTH - me.LESSWIDTH >= me.HEIGHT - me.LESSHEIGHT - me.EXTRAHEIGHT) {\n            me.openDialogHalfWindow(id, title, dialogWidth, true);\n\n            if(bTwoddgmInit2 || bSetsInit2) {\n                me.resizeCanvas(me.WIDTH - me.LESSWIDTH - dialogWidth - twoddgmWidth, me.HEIGHT - me.LESSHEIGHT - me.EXTRAHEIGHT, true);\n\n                if(bTwoddgmInit2) me.openDialog2Ddgm(me.pre + 'dl_2ddgm', undefined, bSetsInit2);\n                if(bSetsInit2) me.openDialog2Ddgm(me.pre + 'dl_definedsets');\n            }\n        }\n        else {\n            me.resizeCanvas(me.WIDTH - me.LESSWIDTH, (me.HEIGHT - me.LESSHEIGHT - me.EXTRAHEIGHT) * 0.5, true);\n\n            height = (me.HEIGHT - me.LESSHEIGHT - me.EXTRAHEIGHT) * 0.5;\n\n            width = me.WIDTH - me.LESSWIDTH;\n\n            var position ={ my: \"left top\", at: \"left bottom+32\", of: \"#\" + me.pre + \"canvas\", collision: \"none\" };\n\n            window.dialog = $( \"#\" + id ).dialog({\n              autoOpen: true,\n              title: title,\n              height: height,\n              width: width,\n              modal: false,\n              position: position,\n              close: function(e) {\n/*\n                    // determine whether dialogs initilaized\n                    var bSelectannotationsInit = $('#' + me.pre + 'dl_selectannotations').hasClass('ui-dialog-content'); // initialized\n                    var bAlignmentInit = $('#' + me.pre + 'dl_alignment').hasClass('ui-dialog-content'); // initialized\n                    var bTwoddgmInit = $('#' + me.pre + 'dl_2ddgm').hasClass('ui-dialog-content'); // initialized\n                    var bSetsInit = $('#' + me.pre + 'dl_definedsets').hasClass('ui-dialog-content'); // initialized\n\n                    var bSelectannotationsInit2 = false, bAlignmentInit2 = false, bTwoddgmInit2 = false, bSetsInit2 = false;\n                    if(bSelectannotationsInit) bSelectannotationsInit2 = $('#' + me.pre + 'dl_selectannotations').dialog( 'isOpen' );\n                    if(bAlignmentInit) bAlignmentInit2 = $('#' + me.pre + 'dl_alignment').dialog( 'isOpen' );\n                    if(bTwoddgmInit) bTwoddgmInit2 = $('#' + me.pre + 'dl_2ddgm').dialog( 'isOpen' );\n                    if(bSetsInit) bSetsInit2 = $('#' + me.pre + 'dl_definedsets').dialog( 'isOpen' );\n*/\n\n                  if((id === me.pre + 'dl_selectannotations' && (!bAlignmentInit2) )\n                    || (id === me.pre + 'dl_alignment' &&(!bSelectannotationsInit2) )\n                    ) {\n                      if(bTwoddgmInit2 || bSetsInit2) {\n                          me.resizeCanvas(me.WIDTH - me.LESSWIDTH - twoddgmWidth, me.HEIGHT - me.LESSHEIGHT - me.EXTRAHEIGHT, true);\n\n                          if(bTwoddgmInit2) me.openDialog2Ddgm(me.pre + 'dl_2ddgm', undefined, bSetsInit2);\n                          if(bSetsInit2) me.openDialog2Ddgm(me.pre + 'dl_definedsets');\n                      }\n                      else {\n                          me.resizeCanvas(me.WIDTH - me.LESSWIDTH, me.HEIGHT - me.LESSHEIGHT - me.EXTRAHEIGHT, true);\n                      }\n                  }\n              },\n              resize: function(e) {\n                  if(id == me.pre + 'dl_selectannotations') {\n                      me.hideFixedTitle();\n                  }\n              }\n            });\n        }\n    }\n    else if(id === me.pre + 'dl_2ddgm') {\n        var tmpWidth = 0;\n\n        if(me.WIDTH - me.LESSWIDTH >= me.HEIGHT - me.LESSHEIGHT - me.EXTRAHEIGHT) {\n            if(bSelectannotationsInit2 || bAlignmentInit2) {\n                tmpWidth = 0.5 * (me.WIDTH - me.LESSWIDTH) - twoddgmWidth * 0.5;\n            }\n            me.resizeCanvas(me.WIDTH - me.LESSWIDTH - tmpWidth - twoddgmWidth, me.HEIGHT - me.LESSHEIGHT - me.EXTRAHEIGHT, true);\n\n            me.openDialog2Ddgm(id, undefined, bSetsInit2);\n        }\n        else {\n            me.resizeCanvas(me.WIDTH - me.LESSWIDTH - tmpWidth - twoddgmWidth, (me.HEIGHT - me.LESSHEIGHT - me.EXTRAHEIGHT)*0.5, true);\n            me.openDialog2Ddgm(id, (me.HEIGHT - me.LESSHEIGHT - me.EXTRAHEIGHT)*0.5);\n\n            me.openDialog2Ddgm(id, (me.HEIGHT - me.LESSHEIGHT - me.EXTRAHEIGHT)*0.5, bSetsInit2);\n        }\n    }\n    else {\n        height = 'auto';\n        width = 'auto';\n\n        if(id === me.pre + 'dl_addtrack') {\n            width='50%';\n        }\n\n        var position;\n\n        if(id === me.pre + 'dl_definedsets') {\n            var tmpWidth = 0;\n\n            if(me.WIDTH - me.LESSWIDTH >= me.HEIGHT - me.LESSHEIGHT - me.EXTRAHEIGHT) {\n                if(bSelectannotationsInit2 || bAlignmentInit2) {\n                    tmpWidth = 0.5 * (me.WIDTH - me.LESSWIDTH) - twoddgmWidth * 0.5;\n                }\n                me.resizeCanvas(me.WIDTH - me.LESSWIDTH - tmpWidth - twoddgmWidth, me.HEIGHT - me.LESSHEIGHT - me.EXTRAHEIGHT, true);\n                me.openDialog2Ddgm(id);\n\n                if(bTwoddgmInit2) me.openDialog2Ddgm(me.pre + 'dl_2ddgm', undefined, true);\n            }\n            else {\n                me.resizeCanvas(me.WIDTH - me.LESSWIDTH - tmpWidth - twoddgmWidth, (me.HEIGHT - me.LESSHEIGHT - me.EXTRAHEIGHT)*0.5, true);\n                me.openDialog2Ddgm(id, (me.HEIGHT - me.LESSHEIGHT - me.EXTRAHEIGHT)*0.5);\n\n                if(bTwoddgmInit2) me.openDialog2Ddgm(me.pre + 'dl_2ddgm', (me.HEIGHT - me.LESSHEIGHT - me.EXTRAHEIGHT)*0.5, true);\n            }\n        }\n        else {\n            if(me.isMobile()) {\n                position ={ my: \"left top\", at: \"left bottom-50\", of: \"#\" + me.pre + \"canvas\", collision: \"none\" };\n            }\n            else {\n                position ={ my: \"left top\", at: \"left top+50\", of: \"#\" + me.pre + \"canvas\", collision: \"none\" };\n            }\n\n            window.dialog = $( \"#\" + id ).dialog({\n              autoOpen: true,\n              title: title,\n              height: height,\n              width: width,\n              modal: false,\n              position: position\n            });\n        }\n    }\n\n    $(\".ui-dialog .ui-button span\")\n      .removeClass(\"ui-icon-closethick\")\n      .addClass(\"ui-icon-close\");\n};\n\n/**\n * @author Jiyao Wang <wangjiy@ncbi.nlm.nih.gov> / https://github.com/ncbi/icn3d\n */\n\n// draw 2D dgm for MMDB ID\n// Used as a reference the work at 2016 ISMB hackathon: https://github.com/NCBI-Hackathons/3D_2D_Rep_Structure\n// bUpdate: redraw 2Ddiagramfor the displayed structure\niCn3DUI.prototype.draw2Ddgm = function(data, mmdbid, structureIndex, bUpdate) { var me = this;\n    // only show the 2D diagrams for displayed structures\n\n    // reduce the size from 300 to 150\n    var factor = 0.5;\n\n    // set molid2chain\n    var molid2chain = {}, molid2color = {}, molid2name = {}, chainid2molid = {};\n    var chainNameHash = {};\n\n    if(data === undefined) return '';\n\n    for(var molid in data.moleculeInfor) {\n          var color = '#' + ( '000000' + data.moleculeInfor[molid].color.toString( 16 ) ).slice( - 6 );\n          var chainName = data.moleculeInfor[molid].chain.trim();\n          if(chainNameHash[chainName] === undefined) {\n              chainNameHash[chainName] = 1;\n          }\n          else {\n              ++chainNameHash[chainName];\n          }\n\n          var chainNameFinal = (chainNameHash[chainName] === 1) ? chainName : chainName + chainNameHash[chainName].toString();\n          var chainid = mmdbid + '_' + chainNameFinal;\n\n          molid2chain[molid] = chainid;\n          molid2color[molid] = color;\n          molid2name[molid] = data.moleculeInfor[molid].name;\n\n          chainid2molid[chainid] = molid;\n    }\n\n    // save the interacting residues\n    if(bUpdate === undefined || !bUpdate) {\n        for(var i = 0, il = data['intracResidues'].length; i < il; ++i) {\n            var pair = data['intracResidues'][i];\n\n            var index = 0;\n            var chainid1, chainid2;\n\n            for(var molid in pair) {\n                //molid = parseInt(molid);\n\n                var chainid;\n\n                chainid = molid2chain[molid];\n                if(index === 0) {\n                    chainid1 = chainid;\n                }\n                else {\n                    chainid2 = chainid;\n                }\n\n                ++index;\n            }\n\n            if(chainid1 === undefined || chainid2 === undefined) continue;\n\n            index = 0;\n            for(var molid in pair) {\n                var resArray = pair[molid];\n\n                var fisrtChainid, secondChainid;\n                if(index === 0) {\n                    fisrtChainid = chainid1;\n                    secondChainid = chainid2;\n                }\n                else {\n                    fisrtChainid = chainid2;\n                    secondChainid = chainid1;\n                }\n\n                if(me.chainids2resids[fisrtChainid] === undefined) {\n                    me.chainids2resids[fisrtChainid] = {};\n                }\n\n                if(me.chainids2resids[fisrtChainid][secondChainid] === undefined) {\n                    me.chainids2resids[fisrtChainid][secondChainid] = [];\n                }\n\n                for(var j = 0, jl = resArray.length; j < jl; ++j) {\n                    var res = resArray[j];\n                    var resid = me.mmdbMolidResid2mmdbChainResi[mmdbid.toUpperCase() + '_' + molid + '_' + res];\n\n                    me.chainids2resids[fisrtChainid][secondChainid].push(resid);\n                }\n\n                // update me.chainname2residues\n                if(me.chainname2residues === undefined) me.chainname2residues = {};\n\n                var chainid2 = secondChainid;\n\n                var atom2 = me.icn3d.getFirstCalphaAtomObj(me.icn3d.chains[chainid2]);\n                //if(me.chainname2residues[chainid2] === undefined) me.chainname2residues[chainid2] = {};\n\n                var type2;\n                if(me.icn3d.chemicals.hasOwnProperty(atom2.serial)) { // 1. chemical interacting with proteins\n                    type2 = 'chemical';\n                }\n                else if(me.icn3d.nucleotides.hasOwnProperty(atom2.serial)) { // 2. DNA interacting with proteins\n                    type2 = 'nucleotide';\n                }\n                else if(me.icn3d.ions.hasOwnProperty(atom2.serial)) { // 3. ions interacting with proteins\n                    type2 = 'ion';\n                }\n                else if(me.icn3d.proteins.hasOwnProperty(atom2.serial)) { // 4. protein interacting with proteins\n                    type2 = 'protein';\n                }\n                else if(me.icn3d.water.hasOwnProperty(atom2.serial)) { // 5. water interacting with proteins\n                    type2 = 'water';\n                }\n\n                var name = chainid2.substr(chainid2.indexOf('_') + 1) + \" (\" + type2 + \")\";\n\n                if(me.chainname2residues[fisrtChainid] === undefined) me.chainname2residues[fisrtChainid] = {};\n\n                me.chainname2residues[fisrtChainid][name] = me.chainids2resids[fisrtChainid][secondChainid];\n\n\n                ++index;\n            }\n        }\n    }\n\n    var html = \"<div id='#\" + me.pre + mmdbid + \"'>\";\n\n    html += \"<b>\" + mmdbid.toUpperCase() + \"</b><br/>\";\n\n    html += \"<svg viewBox='0,0,150,150'>\";\n    var strokecolor = '#000000';\n    var strokewidth = '1';\n    var linestrokewidth = '2';\n    var textcolor = '#000000';\n    var fontsize = '10';\n    var smallfontsize = '8';\n    var adjustx = 0, adjusty = 4, smalladjustx = 1, smalladjusty = 2, halfLetHigh = 6;\n\n    var posHash = {};\n    var lines = [];\n\n    var nodeHtml = \"\", chemNodeHtml = \"\";\n\n    var alignedAtomArray = [];\n\n    var displayedMolids = {};\n    if(bUpdate !== undefined && bUpdate) {\n        // get all displayed chains\n        for(var i in me.icn3d.dAtoms) {\n            var atom = me.icn3d.atoms[i];\n            var chainid = atom.structure + '_' + atom.chain;\n            var molid = chainid2molid[chainid];\n\n            displayedMolids[molid] = 1;\n        }\n    }\n\n    var allMolidArray = Object.keys(data.moleculeInfor);\n    var intracMolidArray = Object.keys(data.intrac);\n\n    var missingMolidArray = [];\n    for(var i = 0, il = allMolidArray.length; i < il; ++i) {\n        if(intracMolidArray.indexOf(allMolidArray[i]) === -1) missingMolidArray.push(allMolidArray[i]);\n    }\n\n    var missingMolid2intrac = {}; // biopolymer\n\n    if(missingMolidArray.length > 0) {\n        for(var molid in data.intrac) {\n            var dgm = data.intrac[molid];\n            for(var i = 0, il = dgm.intrac.length; i < il; ++i) {\n                var intracMolid = dgm.intrac[i].toString();\n                if(missingMolidArray.indexOf(intracMolid) !== -1) {\n                    if(missingMolid2intrac[intracMolid] === undefined) missingMolid2intrac[intracMolid] = [];\n                    missingMolid2intrac[intracMolid].push(molid);\n                    lines.push([intracMolid, molid]);\n                }\n            }\n\n            if(dgm.shape === 'rect') {\n                var x = dgm.coords[0] * factor;\n                var y = dgm.coords[1] * factor;\n                var width = dgm.coords[2] * factor - x;\n                var height = dgm.coords[3] * factor - y;\n\n                posHash[molid] = [x + width/2, y + height/2];\n            }\n            else if(dgm.shape === 'circle') {\n                var x = dgm.coords[0] * factor;\n                var y = dgm.coords[1] * factor;\n                var r = dgm.coords[2] * factor;\n\n                posHash[molid] = [x, y];\n            }\n            else if(dgm.shape === 'poly') {\n                var x0 = dgm.coords[0] * factor;\n                var y0 = dgm.coords[1] * factor;\n                var x1 = dgm.coords[2] * factor;\n                var y1 = dgm.coords[3] * factor;\n                var x2 = dgm.coords[4] * factor;\n                var y2 = dgm.coords[5] * factor;\n                var x3 = dgm.coords[6] * factor;\n                var y3 = dgm.coords[7] * factor;\n\n                var x = x0, y = y1;\n\n                posHash[molid] = [x0, y1];\n            }\n        }\n    }\n\n    var cntNointeraction = 0;\n    //for(var molid in data.intrac) {\n    for(var index = 0, indexl = allMolidArray.length; index < indexl; ++index) {\n        var molid = allMolidArray[index];\n\n        // if redraw2d diagram and the molid is not displayed, skip\n        if(bUpdate !== undefined && bUpdate && !displayedMolids.hasOwnProperty(molid)) continue;\n\n        var dgm = data.intrac[molid];\n        var color = \"#FFFFFF\";\n        var oricolor = molid2color[molid];\n        var alignNum = \"\";\n        if(structureIndex !== undefined && structureIndex === 0) {\n            if(me.alignmolid2color !== undefined && me.alignmolid2color[0].hasOwnProperty(molid)) {\n                //color = me.alignmolid2color[0][molid];\n                alignNum = me.alignmolid2color[0][molid];\n                oricolor = \"#FF0000\";\n            }\n            else {\n                oricolor = \"#FFFFFF\";\n            }\n        }\n        else if(structureIndex !== undefined && structureIndex === 1) {\n            if(me.alignmolid2color !== undefined && me.alignmolid2color[1].hasOwnProperty(molid)) {\n                //color = me.alignmolid2color[1][molid];\n                alignNum = me.alignmolid2color[1][molid];\n                oricolor = \"#FF0000\";\n            }\n            else {\n                oricolor = \"#FFFFFF\";\n            }\n        }\n\n        var chainid;\n\n        chainid = molid2chain[molid];\n\n        var chainname = molid2name[molid];\n\n        var chain = ' ', oriChain = ' ';\n        if(chainid !== undefined) {\n            var pos = chainid.indexOf('_');\n            oriChain = chainid.substr(pos + 1);\n\n            if(oriChain.length > 1) {\n                chain = oriChain.substr(0, 1) + '..';\n            }\n            else {\n                chain = oriChain;\n            }\n        }\n        else {\n            chainid = 'Misc';\n        }\n\n        if(oricolor === undefined) {\n            oricolor = '#FFFFFF';\n        }\n\n        var ratio = 1.0;\n        if(me.icn3d.alnChains[chainid] !== undefined) {\n            //ratio = 1.0 * Object.keys(me.icn3d.alnChains[chainid]).length / Object.keys(me.icn3d.chains[chainid]).length;\n            var alignedAtomCnt = 0;\n            for(var i in me.icn3d.alnChains[chainid]) {\n                var colorStr = me.icn3d.atoms[i].color.getHexString().toUpperCase();\n                if(colorStr === 'FF0000' || colorStr === '00FF00') {\n                    ++alignedAtomCnt;\n                }\n            }\n            ratio = 1.0 * alignedAtomCnt / Object.keys(me.icn3d.chains[chainid]).length;\n        }\n        if(ratio < 0.2) ratio = 0.2;\n\n        if(missingMolidArray.indexOf(molid) === -1) {\n            for(var i = 0, il = dgm.intrac.length; i < il; ++i) {\n                // show the interactin line once\n                if(parseInt(molid) < parseInt(dgm.intrac[i])) lines.push([molid, dgm.intrac[i] ]);\n            }\n\n            if(dgm.shape === 'rect') {\n                var x = dgm.coords[0] * factor;\n                var y = dgm.coords[1] * factor;\n                var width = dgm.coords[2] * factor - x;\n                var height = dgm.coords[3] * factor - y;\n\n                nodeHtml += me.draw2DNucleotide(x + 0.5 * width, y + 0.5 * height, chainid, oriChain, chain, chainname, alignNum, color, oricolor, factor, ratio);\n\n                posHash[molid] = [x + width/2, y + height/2];\n            }\n            else if(dgm.shape === 'circle') {\n                var x = dgm.coords[0] * factor;\n                var y = dgm.coords[1] * factor;\n\n                nodeHtml += me.draw2DProtein(x, y, chainid, oriChain, chain, chainname, alignNum, color, oricolor, factor, ratio);\n\n                posHash[molid] = [x, y];\n            }\n            else if(dgm.shape === 'poly') {\n              var x0 = dgm.coords[0] * factor;\n              var y0 = dgm.coords[1] * factor;\n              var x1 = dgm.coords[2] * factor;\n              var y1 = dgm.coords[3] * factor;\n              var x2 = dgm.coords[4] * factor;\n              var y2 = dgm.coords[5] * factor;\n              var x3 = dgm.coords[6] * factor;\n              var y3 = dgm.coords[7] * factor;\n\n              var x = x0, y = y1;\n\n              var atom = me.icn3d.getFirstAtomObj(me.icn3d.chains[chainid]);\n\n              //if(me.icn3d.proteins.hasOwnProperty(atom.serial)) {\n              //    chemNodeHtml += me.draw2DProtein(x, y, chainid, oriChain, chain, chainname, alignNum, color, oricolor, factor, ratio);\n              //}\n              //else if(me.icn3d.nucleotides.hasOwnProperty(atom.serial)) {\n              //    chemNodeHtml += me.draw2DNucleotide(x, y, chainid, oriChain, chain, chainname, alignNum, color, oricolor, factor, ratio);\n              //}\n              //else {\n              //    chemNodeHtml += me.draw2DChemical(x, y, chainid, oriChain, chain, chainname, alignNum, color, oricolor, factor, ratio);\n              //}\n\n              chemNodeHtml += me.draw2DChemical(x, y, chainid, oriChain, chain, chainname, alignNum, color, oricolor, factor, ratio);\n\n              posHash[molid] = [x0, y1];\n            }\n        }\n        else { // missing biopolymer\n            // max x and y value: 300\n            var maxSize = 300;\n            var step = 50;\n\n            var xCenter, yCenter;\n            if(missingMolid2intrac[molid] !== undefined && missingMolid2intrac[molid].length > 1) { // has interactions\n                // find its position\n                var xSum = 0, ySum = 0;\n\n                for(var j = 0, jl = missingMolid2intrac[molid].length; j < jl; ++j) {\n                    var intracMolid = missingMolid2intrac[molid][j];\n                    if(posHash.hasOwnProperty(intracMolid)) {\n                        var node = posHash[intracMolid];\n                        xSum += node[0];\n                        ySum += node[1];\n                    }\n                }\n\n                xCenter = xSum / missingMolid2intrac[molid].length;\n                yCenter = ySum / missingMolid2intrac[molid].length;\n            }\n            else { // has NO interactions or just one interaction\n                var nSteps = maxSize / step;\n\n                if(cntNointeraction < nSteps - 1) {\n                    xCenter = (cntNointeraction + 1) * step * factor;\n                    yCenter = 0.1 * maxSize * factor;\n                }\n                else if(cntNointeraction - (nSteps - 1) < nSteps - 1) {\n                    xCenter = 0.1 * maxSize * factor;\n                    yCenter = (cntNointeraction - (nSteps - 1) + 1) * step * factor;\n                }\n                else {\n                    xCenter = 0.25 * maxSize * factor;\n                    yCenter = xCenter;\n                }\n\n                ++cntNointeraction;\n\n            }\n\n            var x = xCenter, y = yCenter;\n\n            var atom = me.icn3d.getFirstAtomObj(me.icn3d.chains[chainid]);\n\n            //if(me.icn3d.proteins.hasOwnProperty(atom.serial)) {\n            //  chemNodeHtml += me.draw2DProtein(x, y, chainid, oriChain, chain, chainname, alignNum, color, oricolor, factor, ratio);\n            //}\n            //else if(me.icn3d.nucleotides.hasOwnProperty(atom.serial)) {\n            //  chemNodeHtml += me.draw2DNucleotide(x, y, chainid, oriChain, chain, chainname, alignNum, color, oricolor, factor, ratio);\n            //}\n            //else {\n            //  chemNodeHtml += me.draw2DChemical(x, y, chainid, oriChain, chain, chainname, alignNum, color, oricolor, factor, ratio);\n            //}\n\n            var bBiopolymer = true;\n            chemNodeHtml += me.draw2DChemical(x, y, chainid, oriChain, chain, chainname, alignNum, color, oricolor, factor, ratio, bBiopolymer);\n\n            posHash[molid] = [x, y];\n        }\n    }\n\n    for(var i = 0, il = lines.length; i < il; ++i) {\n        var pair = lines[i];\n\n        // if redraw2d diagram and the molid is not displayed, skip\n        if(bUpdate !== undefined && bUpdate && (!displayedMolids.hasOwnProperty(pair[0]) || !displayedMolids.hasOwnProperty(pair[1])) ) continue;\n\n        var node1 = posHash[parseInt(pair[0])];\n        var node2 = posHash[parseInt(pair[1])];\n\n        if(node1 === undefined || node2 === undefined) continue;\n\n        var chainid1, chainid2;\n\n        chainid1 = molid2chain[pair[0]];\n        chainid2 = molid2chain[pair[1]];\n\n        var pos1 = chainid1.indexOf('_');\n        var pos2 = chainid2.indexOf('_');\n\n        var chain1 = chainid1.substr(pos1 + 1);\n        var chain2 = chainid2.substr(pos2 + 1);\n\n        var x1 = node1[0], y1 = node1[1], x2 = node2[0], y2 = node2[1], xMiddle = (x1 + x2) * 0.5, yMiddle = (y1 + y2) * 0.5;\n\n        //if(me.icn3d.bSSOnly) { // the condensed view with only secondary structure information\n        //    html += \"<g chainid1='\" + chainid1 + \"' chainid2='\" + chainid2 + \"' >\";\n        //    html += \"<title>Interactions NOT shown in the condensed view</title>\";\n        //    html += \"<line x1='\" + x1 + \"' y1='\" + y1 + \"' x2='\" + x2 + \"' y2='\" + y2 + \"' stroke='\" + strokecolor + \"' stroke-width='\" + linestrokewidth + \"' /></g>\";\n        //}\n        //else {\n            html += \"<g class='icn3d-interaction' chainid1='\" + chainid1 + \"' chainid2='\" + chainid2 + \"' >\";\n            html += \"<title>Interaction of chain \" + chain1 + \" with chain \" + chain2 + \"</title>\";\n            html += \"<line x1='\" + x1 + \"' y1='\" + y1 + \"' x2='\" + xMiddle + \"' y2='\" + yMiddle + \"' stroke='\" + strokecolor + \"' stroke-width='\" + linestrokewidth + \"' /></g>\";\n\n            html += \"<g class='icn3d-interaction' chainid1='\" + chainid2 + \"' chainid2='\" + chainid1 + \"' >\";\n            html += \"<title>Interaction of chain \" + chain2 + \" with chain \" + chain1 + \"</title>\";\n            html += \"<line x1='\" + xMiddle + \"' y1='\" + yMiddle + \"' x2='\" + x2 + \"' y2='\" + y2 + \"' stroke='\" + strokecolor + \"' stroke-width='\" + linestrokewidth + \"' /></g>\";\n        //}\n    }\n\n    html += chemNodeHtml + nodeHtml; // draw chemicals at the bottom layer\n\n    html += \"</svg>\";\n    html += \"</div>\";\n\n    me.html2ddgm += html;\n\n    $(\"#\" + me.pre + \"dl_2ddgm\").html(me.html2ddgm);\n\n    return html;\n};\n\niCn3DUI.prototype.set2DdgmNote = function(bAlign) { var me = this;\n    var html = \"<div style='width:150px'><b>Nodes</b>:<br>\";\n    //html += \"<span style='margin-right:18px;'>&#9711;</span>Protein<br>\";\n    //html += \"<span style='margin-right:18px;'>&#9633;</span>Nucleotide<br>\";\n    //html += \"<span style='margin-right:18px;'>&#9674;</span>Chemical<br>\";\n\n\n    if(me.isMac()) {\n        html += \"<span style='margin-right:18px;'>&#9711;</span>Protein<br>\";\n        html += \"<span style='margin-right:18px;'>&#9634;</span>Nucleotide<br>\";\n        html += \"<span style='margin-right:18px;'>&#9826;</span>Chemical<br>\";\n        html += \"<span style='margin-right:18px;display: inline-block;transform: skew(-25deg);'>&#9634;</span>Biopolymer<br>\";\n    }\n    else {\n        html += \"<span style='margin-right:18px;'>O</span>Protein<br>\";\n        html += \"<span style='margin-right:18px;'>&#9634;</span>Nucleotide<br>\";\n        html += \"<span style='margin-right:18px;'>&#9671;</span>Chemical<br>\";\n        html += \"<span style='margin-right:18px;display: inline-block;transform: skew(-25deg);'>&#9634;</span>Biopolymer<br>\";\n    }\n\n    html += \"<br><b>Lines</b>:<br> Interactions at 4 &#197;<br>\"\n    if(bAlign !== undefined && bAlign) html += \"<b>Numbers in red</b>:<br> Aligned chains\"\n    html += \"</div><br/>\";\n\n    return html;\n};\n\niCn3DUI.prototype.highlightNode = function(type, highlight, base, ratio) { var me = this;\n    if(ratio < 0.2) ratio = 0.2;\n    var strokeWidth = 3; // default 1\n\n    if(type === 'rect') {\n        $(highlight).attr('stroke', me.ORANGE);\n        $(highlight).attr('stroke-width', strokeWidth);\n\n        var x = Number($(base).attr('x'));\n        var y = Number($(base).attr('y'));\n        var width = Number($(base).attr('width'));\n        var height = Number($(base).attr('height'));\n        $(highlight).attr('x', x + width / 2.0 * (1 - ratio));\n        $(highlight).attr('y', y + height / 2.0 * (1 - ratio));\n        $(highlight).attr('width', width * ratio);\n        $(highlight).attr('height', height * ratio);\n    }\n    else if(type === 'circle') {\n        $(highlight).attr('stroke', me.ORANGE);\n        $(highlight).attr('stroke-width', strokeWidth);\n\n        $(highlight).attr('r', Number($(base).attr('r')) * ratio);\n    }\n    else if(type === 'polygon') {\n        $(highlight).attr('stroke', me.ORANGE);\n        $(highlight).attr('stroke-width', strokeWidth);\n\n        var x = Number($(base).attr('x'));\n        var y = Number($(base).attr('y'));\n\n        var x0diff = Number($(base).attr('x0d'));\n        var y0diff = Number($(base).attr('y0d'));\n        var x1diff = Number($(base).attr('x1d'));\n        var y1diff = Number($(base).attr('y1d'));\n        var x2diff = Number($(base).attr('x2d'));\n        var y2diff = Number($(base).attr('y2d'));\n        var x3diff = Number($(base).attr('x3d'));\n        var y3diff = Number($(base).attr('y3d'));\n\n        $(highlight).attr('points', (x+x0diff*ratio).toString() + \", \" + (y+y0diff*ratio).toString() + \", \" + (x+x1diff*ratio).toString() + \", \" + (y+y1diff*ratio).toString() + \", \" + (x+x2diff*ratio).toString() + \", \" + (y+y2diff*ratio).toString() + \", \" + (x+x3diff*ratio).toString() + \", \" + (y+y3diff*ratio).toString());\n    }\n};\n\niCn3DUI.prototype.click2Ddgm = function() { var me = this;\n    $(\"#\" + me.pre + \"dl_2ddgm\").on(\"click\", \".icn3d-node\", function(e) {\n          e.stopImmediatePropagation();\n        if(Object.keys(me.icn3d.hAtoms).length < Object.keys(me.icn3d.atoms).length) me.setMode('selection');\n\n        me.bClickInteraction = false;\n\n        var chainid = $(this).attr('chainid');\n\n        // clear all nodes\n        if(!me.icn3d.bCtrl && !me.icn3d.bShift) {\n            me.removeSelection();\n\n            // me.lineArray2d is used to highlight lines in 2D diagram\n            me.lineArray2d = [];\n        }\n\n        //$(this).find('rect').attr('stroke', me.ORANGE);\n        //$(this).find('circle').attr('stroke', me.ORANGE);\n        //$(this).find('polygon').attr('stroke', me.ORANGE);\n\n        var ratio = 1.0;\n        if(me.icn3d.alnChains[chainid] !== undefined) ratio = 1.0 * Object.keys(me.icn3d.alnChains[chainid]).length / Object.keys(me.icn3d.chains[chainid]).length;\n\n        var target = $(this).find(\"rect[class='icn3d-hlnode']\");\n        var base = $(this).find(\"rect[class='icn3d-basenode']\");\n        me.highlightNode('rect', target, base, ratio);\n\n        target = $(this).find(\"circle[class='icn3d-hlnode']\");\n        base = $(this).find(\"circle[class='icn3d-basenode']\");\n        me.highlightNode('circle', target, base, ratio);\n\n        target = $(this).find(\"polygon[class='icn3d-hlnode']\");\n        base = $(this).find(\"polygon[class='icn3d-basenode']\");\n        me.highlightNode('polygon', target, base, ratio);\n\n        if(!me.icn3d.bCtrl && !me.icn3d.bShift) {\n            me.icn3d.hAtoms = me.icn3d.cloneHash(me.icn3d.chains[chainid]);\n        }\n        else {\n            me.icn3d.hAtoms = me.icn3d.unionHash(me.icn3d.hAtoms, me.icn3d.chains[chainid]);\n        }\n\n/*\n        // highlight on 3D structure\n        me.icn3d.removeHlObjects();\n\n        me.icn3d.addHlObjects();\n\n        // highlight on 2D diagram\n        if(!me.icn3d.bCtrl && !me.icn3d.bShift) {\n            me.chainArray2d = [chainid];\n        }\n        else {\n            if(me.chainArray2d === undefined) me.chainArray2d = [];\n            me.chainArray2d.push(chainid);\n        }\n\n        // highlight residues in annotation window and alignment window\n        var residueArray = [];\n        for(var i = 0, il = me.chainArray2d.length; i < il; ++i) {\n            var chainid = me.chainArray2d[i];\n            for(var j = 0, jl = me.icn3d.chainsSeq[chainid].length; j < jl; ++j) {\n                residueArray.push(chainid + '_' + me.icn3d.chainsSeq[chainid][j].resi);\n            }\n        }\n\n        me.hlSeq(residueArray);\n*/\n\n        // get the name array\n        if(!me.icn3d.bCtrl && !me.icn3d.bShift) {\n            me.chainArray2d = [chainid];\n        }\n        else {\n            if(me.chainArray2d === undefined) me.chainArray2d = [];\n            me.chainArray2d.push(chainid);\n        }\n\n        me.updateHlAll(me.chainArray2d);\n\n        // show selected chains in annotation window\n        me.showAnnoSelectedChains();\n\n        var select = \"select chain \" + chainid;\n        me.setLogCmd(select, true);\n\n        me.bSelectResidue = false;\n    });\n\n    $(\"#\" + me.pre + \"dl_2ddgm\").on(\"click\", \".icn3d-interaction\", function(e) {\n          e.stopImmediatePropagation();\n        if(Object.keys(me.icn3d.hAtoms).length < Object.keys(me.icn3d.atoms).length) me.setMode('selection');\n\n        // clear all nodes\n        //if(!me.icn3d.bCtrl && !me.icn3d.bShift) {\n        //    me.removeSelection();\n        //}\n\n        me.bClickInteraction = true;\n\n        var chainid1 = $(this).attr('chainid1');\n        var chainid2 = $(this).attr('chainid2');\n\n        $(this).find('line').attr('stroke', me.ORANGE);\n\n        // interaction of chain1 with chain2, only show the part of chain1 interacting with chain2\n        me.selectInteraction(chainid1, chainid2);\n\n        // show selected chains in annotation window\n        me.showAnnoSelectedChains();\n\n        var select = \"select interaction \" + chainid1 + \",\" + chainid2;\n        me.setLogCmd(select, true);\n\n        me.bClickInteraction = false;\n    });\n};\n\niCn3DUI.prototype.selectInteraction = function (chainid1, chainid2) {   var me = this;\n        me.removeHl2D();\n        me.icn3d.removeHlObjects();\n\n        if(!me.icn3d.bCtrl && !me.icn3d.bShift) {\n            // me.lineArray2d is used to highlight lines in 2D diagram\n            me.lineArray2d = [chainid1, chainid2];\n        }\n        else {\n            if(me.lineArray2d === undefined) me.lineArray2d = [];\n            me.lineArray2d.push(chainid1);\n            me.lineArray2d.push(chainid2);\n        }\n\n        me.selectInteractionAtoms(chainid1, chainid2);\n\n        me.icn3d.addHlObjects();\n\n        me.updateHlAll();\n};\n\niCn3DUI.prototype.selectInteractionAtoms = function (chainid1, chainid2) {   var me = this; // me.icn3d.pAtom is set already\n    var radius = 4;\n\n    // method 2. Retrieved from the cgi (This previously had problems in sharelink where the data from ajax is async. Now the data is from the same cgi as the atom data and there is no problem.)\n    var residueArray = me.chainids2resids[chainid1][chainid2];\n\n    if(!me.icn3d.bCtrl && !me.icn3d.bShift) me.icn3d.hAtoms = {};\n\n    for(var i = 0, il = residueArray.length; i < il; ++i) {\n        me.icn3d.hAtoms = me.icn3d.unionHash(me.icn3d.hAtoms, me.icn3d.residues[residueArray[i]]);\n    }\n\n    var commandname, commanddesc;\n    if(Object.keys(me.icn3d.structures).length > 1) {\n        commandname = \"inter_\" + chainid1 + \"_\" + chainid2;\n    }\n    else {\n        var pos1 = chainid1.indexOf('_');\n        var pos2 = chainid2.indexOf('_');\n\n        commandname = \"inter_\" + chainid1.substr(pos1 + 1) + \"_\" + chainid2.substr(pos2 + 1);\n    }\n\n    commanddesc = \"select the atoms in chain \" + chainid1 + \" interacting with chain \" + chainid2 + \" in a distance of \" + radius + \" angstrom\";\n\n    var select = \"select interaction \" + chainid1 + \",\" + chainid2;\n\n    me.addCustomSelection(residueArray, commandname, commanddesc, select, true);\n\n    var nameArray = [commandname];\n};\n\niCn3DUI.prototype.draw2DProtein = function(x, y, chainid, oriChain, chain, chainname, alignNum, color, oricolor, factor, ratio) { var me = this;\n    var strokecolor = '#000000';\n    var strokewidth = '1';\n    var linestrokewidth = '2';\n    var textcolor = '#000000';\n    var fontsize = '10';\n    var smallfontsize = '8';\n    var adjustx = 0, adjusty = 4, smalladjustx = 1, smalladjusty = 2, halfLetHigh = 6;\n\n    var r = 20 * factor;\n\n    html = \"<g class='icn3d-node' chainid='\" + chainid + \"' >\";\n    html += \"<title>Chain \" + oriChain + \": \" + chainname + \"</title>\";\n    html += \"<circle class='icn3d-basenode' cx='\" + x + \"' cy='\" + y + \"' r='\" + r + \"' fill='\" + color + \"' stroke-width='\" + strokewidth + \"' stroke='\" + strokecolor + \"' class='icn3d-node' chainid='\" + chainid + \"' />\";\n\n    html += \"<circle class='icn3d-hlnode' cx='\" + x + \"' cy='\" + y + \"' r='\" + (r * ratio).toString() + \"' fill='\" + oricolor + \"' stroke-width='\" + strokewidth + \"' stroke='\" + strokecolor + \"' />\";\n\n    html += \"<text x='\" + (x - adjustx).toString() + \"' y='\" + (y + adjusty).toString() + \"' style='fill:\" + textcolor + \"; font-size:\" + fontsize + \"; text-anchor:middle' >\" + chain + \"</text>\";\n\n    if(alignNum !== \"\") html += \"<text x='\" + (x - adjustx).toString() + \"' y='\" + (y + r + adjusty + halfLetHigh).toString() + \"' style='fill:\" + oricolor + \"; font-size:\" + smallfontsize + \"; font-weight:bold; text-anchor:middle' >\" + alignNum + \"</text>\";\n\n    html += \"</g>\";\n\n    return html;\n};\n\niCn3DUI.prototype.draw2DNucleotide = function(x, y, chainid, oriChain, chain, chainname, alignNum, color, oricolor, factor, ratio) { var me = this;\n    var strokecolor = '#000000';\n    var strokewidth = '1';\n    var linestrokewidth = '2';\n    var textcolor = '#000000';\n    var fontsize = '10';\n    var smallfontsize = '8';\n    var adjustx = 0, adjusty = 4, smalladjustx = 1, smalladjusty = 2, halfLetHigh = 6;\n\n    var width = 30 * factor;\n    var height = 30 * factor;\n\n    x -= 0.5 * width;\n    y -= 0.5 * height;\n\n    html = \"<g class='icn3d-node' chainid='\" + chainid + \"' >\";\n    html += \"<title>Chain \" + oriChain + \": \" + chainname + \"</title>\";\n    // place holder\n    html += \"<rect class='icn3d-basenode' x='\" + x + \"' y='\" + y + \"' width='\" + width + \"' height='\" + height + \"' fill='\" + color + \"' stroke-width='\" + strokewidth + \"' stroke='\" + strokecolor + \"' />\";\n    // highlight\n    html += \"<rect class='icn3d-hlnode' x='\" + (x + width / 2.0 * (1 - ratio)).toString() + \"' y='\" + (y + height / 2.0 * (1 - ratio)).toString() + \"' width='\" + (width * ratio).toString() + \"' height='\" + (height * ratio).toString() + \"' fill='\" + oricolor + \"' stroke-width='\" + strokewidth + \"' stroke='\" + strokecolor + \"' />\";\n\n    html += \"<text x='\" + (x + width / 2 - adjustx).toString() + \"' y='\" + (y + height / 2 + adjusty).toString() + \"' style='fill:\" + textcolor + \"; font-size:\" + fontsize + \"; text-anchor:middle' >\" + chain + \"</text>\";\n\n    if(alignNum !== \"\") html += \"<text x='\" + (x + width / 2 - adjustx).toString() + \"' y='\" + (y + height + adjusty + halfLetHigh).toString() + \"' style='fill:\" + oricolor + \"; font-size:\" + smallfontsize + \"; font-weight:bold; text-anchor:middle' >\" + alignNum + \"</text>\";\n\n    html += \"</g>\";\n\n    return html;\n};\n\niCn3DUI.prototype.draw2DChemical = function(x, y, chainid, oriChain, chain, chainname, alignNum, color, oricolor, factor, ratio, bBiopolymer) { var me = this;\n    var strokecolor = '#000000';\n    var strokewidth = '1';\n    var linestrokewidth = '2';\n    var textcolor = '#000000';\n    var fontsize = '10';\n    var smallfontsize = '8';\n    var adjustx = 0, adjusty = 4, smalladjustx = 1, smalladjusty = 2, halfLetHigh = 6;\n\n    var bpsize = 30 * factor;\n\n    if(bBiopolymer !== undefined && bBiopolymer) {\n        // biopolymer\n        var xOffset = 0.5 * bpsize / Math.sqrt(3);\n        var yOffset = 0.5 * bpsize;\n\n        var x0 = x - xOffset;\n        var y0 = y - yOffset;\n        var x1 = x + 3 * xOffset;\n        var y1 = y - yOffset;\n        var x2 = x + xOffset;\n        var y2 = y + yOffset;\n        var x3 = x - 3 * xOffset;\n        var y3 = y + yOffset;\n    }\n    else {\n        // diamond\n        var xOffset = 0.5 * bpsize;\n        var yOffset = 0.5 * bpsize;\n\n        var x0 = x - xOffset;\n        var y0 = y;\n        var x1 = x;\n        var y1 = y + yOffset;\n        var x2 = x + xOffset;\n        var y2 = y;\n        var x3 = x;\n        var y3 = y - yOffset;\n    }\n\n    var x0diff = x0 - x;\n    var y0diff = y0 - y;\n    var x1diff = x1 - x;\n    var y1diff = y1 - y;\n    var x2diff = x2 - x;\n    var y2diff = y2 - y;\n    var x3diff = x3 - x;\n    var y3diff = y3 - y;\n\n    var html = \"<g class='icn3d-node' chainid='\" + chainid + \"' >\";\n    html += \"<title>Chain \" + oriChain + \": \" + chainname + \"</title>\";\n    html += \"<polygon class='icn3d-basenode' points='\" + x0 + \", \" + y0 + \",\" + x1 + \", \" + y1 + \",\" + x2 + \", \" + y2 + \",\" + x3 + \", \" + y3 + \"' x='\" + x + \"' y='\" + y + \"' x0d='\" + x0diff + \"' y0d='\" + y0diff + \"' x1d='\" + x1diff + \"' y1d='\" + y1diff + \"' x2d='\" + x2diff + \"' y2d='\" + y2diff + \"' x3d='\" + x3diff + \"' y3d='\" + y3diff + \"' fill='\" + color + \"' stroke-width='\" + strokewidth + \"' stroke='\" + strokecolor + \"' />\";\n\n    html += \"<polygon class='icn3d-hlnode' points='\" + (x+x0diff*ratio).toString() + \", \" + (y+y0diff*ratio).toString() + \",\" + (x+x1diff*ratio).toString() + \", \" + (y+y1diff*ratio).toString() + \",\" + (x+x2diff*ratio).toString() + \", \" + (y+y2diff*ratio).toString() + \",\" + (x+x3diff*ratio).toString() + \", \" + (y+y3diff*ratio).toString() + \"' fill='\" + oricolor + \"' stroke-width='\" + strokewidth + \"' stroke='\" + strokecolor + \"' />\";\n\n    html += \"<text x='\" + (x + smalladjustx).toString() + \"' y='\" + (y + smalladjusty).toString() + \"' style='fill:\" + textcolor + \"; font-size:\" + smallfontsize + \"; text-anchor:middle' >\" + chain + \"</text>\";\n\n    if(alignNum !== \"\") html += \"<text x='\" + (x + smalladjustx).toString() + \"' y='\" + (y + smalladjusty + halfLetHigh).toString() + \"' style='fill:\" + oricolor + \"; font-size:\" + smallfontsize + \"; font-weight:bold; text-anchor:middle' >\" + alignNum + \"</text>\";\n\n    html += \"</g>\";\n\n    return html;\n};\n\n\n/*!\n * ==========================================================\n *  COLOR PICKER PLUGIN 1.3.9\n * ==========================================================\n * Author: Taufik Nurrohman <https://github.com/tovic>\n * License: MIT\n * ----------------------------------------------------------\n */\n\n(function(win, doc, NS) {\n\n    var instance = '__instance__',\n        first = 'firstChild',\n        delay = setTimeout;\n\n    function is_set(x) {\n        return typeof x !== \"undefined\";\n    }\n\n    function is_string(x) {\n        return typeof x === \"string\";\n    }\n\n    function is_object(x) {\n        return typeof x === \"object\";\n    }\n\n    function object_length(x) {\n        return Object.keys(x).length;\n    }\n\n    function edge(a, b, c) {\n        if (a < b) return b;\n        if (a > c) return c;\n        return a;\n    }\n\n    function num(i, j) {\n        return parseInt(i, j || 10);\n    }\n\n    function round(i) {\n        return Math.round(i);\n    }\n\n    // [h, s, v] ... 0 <= h, s, v <= 1\n    function HSV2RGB(a) {\n        var h = +a[0],\n            s = +a[1],\n            v = +a[2],\n            r, g, b, i, f, p, q, t;\n        i = Math.floor(h * 6);\n        f = h * 6 - i;\n        p = v * (1 - s);\n        q = v * (1 - f * s);\n        t = v * (1 - (1 - f) * s);\n        i = i || 0;\n        q = q || 0;\n        t = t || 0;\n        switch (i % 6) {\n            case 0:\n                r = v, g = t, b = p;\n                break;\n            case 1:\n                r = q, g = v, b = p;\n                break;\n            case 2:\n                r = p, g = v, b = t;\n                break;\n            case 3:\n                r = p, g = q, b = v;\n                break;\n            case 4:\n                r = t, g = p, b = v;\n                break;\n            case 5:\n                r = v, g = p, b = q;\n                break;\n        }\n        return [round(r * 255), round(g * 255), round(b * 255)];\n    }\n\n    function HSV2HEX(a) {\n        return RGB2HEX(HSV2RGB(a));\n    }\n\n    // [r, g, b] ... 0 <= r, g, b <= 255\n    function RGB2HSV(a) {\n        var r = +a[0],\n            g = +a[1],\n            b = +a[2],\n            max = Math.max(r, g, b),\n            min = Math.min(r, g, b),\n            d = max - min,\n            h, s = (max === 0 ? 0 : d / max),\n            v = max / 255;\n        switch (max) {\n            case min:\n                h = 0;\n                break;\n            case r:\n                h = (g - b) + d * (g < b ? 6 : 0);\n                h /= 6 * d;\n                break;\n            case g:\n                h = (b - r) + d * 2;\n                h /= 6 * d;\n                break;\n            case b:\n                h = (r - g) + d * 4;\n                h /= 6 * d;\n                break;\n        }\n        return [h, s, v];\n    }\n\n    function RGB2HEX(a) {\n        var s = +a[2] | (+a[1] << 8) | (+a[0] << 16);\n        s = '000000' + s.toString(16);\n        return s.slice(-6);\n    }\n\n    // rrggbb or rgb\n    function HEX2HSV(s) {\n        return RGB2HSV(HEX2RGB(s));\n    }\n\n    function HEX2RGB(s) {\n        if (s.length === 3) {\n            s = s.replace(/./g, '$&$&');\n        }\n        return [num(s[0] + s[1], 16), num(s[2] + s[3], 16), num(s[4] + s[5], 16)];\n    }\n\n    // convert range from `0` to `360` and `0` to `100` in color into range from `0` to `1`\n    function _2HSV_pri(a) {\n        return [+a[0] / 360, +a[1] / 100, +a[2] / 100];\n    }\n\n    // convert range from `0` to `1` into `0` to `360` and `0` to `100` in color\n    function _2HSV_pub(a) {\n        return [round(+a[0] * 360), round(+a[1] * 100), round(+a[2] * 100)];\n    }\n\n    // convert range from `0` to `255` in color into range from `0` to `1`\n    function _2RGB_pri(a) {\n        return [+a[0] / 255, +a[1] / 255, +a[2] / 255];\n    }\n\n    // *\n    function parse(x) {\n        if (is_object(x)) return x;\n        var rgb = /\\s*rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)\\s*$/i.exec(x),\n            hsv = /\\s*hsv\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)%\\s*,\\s*(\\d+)%\\s*\\)\\s*$/i.exec(x),\n            hex = x[0] === '#' && x.match(/^#([\\da-f]{3}|[\\da-f]{6})$/i);\n        if (hex) {\n            return HEX2HSV(x.slice(1));\n        } else if (hsv) {\n            return _2HSV_pri([+hsv[1], +hsv[2], +hsv[3]]);\n        } else if (rgb) {\n            return RGB2HSV([+rgb[1], +rgb[2], +rgb[3]]);\n        }\n        return [0, 1, 1]; // default is red\n    }\n\n    (function($) {\n\n        // plugin version\n        $.version = '1.3.9';\n\n        // collect all instance(s)\n        $[instance] = {};\n\n        // plug to all instance(s)\n        $.each = function(fn, t) {\n            return delay(function() {\n                var ins = $[instance], i;\n                for (i in ins) {\n                    fn(ins[i], i, ins);\n                }\n            }, t === 0 ? 0 : (t || 1)), $;\n        };\n\n        // static method(s)\n        $.parse = parse;\n        $._HSV2RGB = HSV2RGB;\n        $._HSV2HEX = HSV2HEX;\n        $._RGB2HSV = RGB2HSV;\n        $._HEX2HSV = HEX2HSV;\n        $._HEX2RGB = function(a) {\n            return _2RGB_pri(HEX2RGB(a));\n        };\n        $.HSV2RGB = function(a) {\n            return HSV2RGB(_2HSV_pri(a));\n        };\n        $.HSV2HEX = function(a) {\n            return HSV2HEX(_2HSV_pri(a));\n        };\n        $.RGB2HSV = function(a) {\n            return _2HSV_pub(RGB2HSV(a));\n        };\n        $.RGB2HEX = RGB2HEX;\n        $.HEX2HSV = function(s) {\n            return _2HSV_pub(HEX2HSV(s));\n        };\n        $.HEX2RGB = HEX2RGB;\n\n    })(win[NS] = function(target, events, parent) {\n\n        var b = doc.body,\n            h = doc.documentElement,\n            $ = this,\n            $$ = win[NS],\n            _ = false,\n            hooks = {},\n            picker = doc.createElement('div'),\n            on_down = \"touchstart mousedown\",\n            on_move = \"touchmove mousemove\",\n            on_up = \"touchend mouseup\",\n            on_resize = \"orientationchange resize\";\n\n        // return a new instance if `CP` was called without the `new` operator\n        if (!($ instanceof $$)) {\n            return new $$(target, events);\n        }\n\n        // store color picker instance to `CP.__instance__`\n        $$[instance][target.id || target.name || object_length($$[instance])] = $;\n\n        // trigger color picker panel on click by default\n        if (!is_set(events) || events === true) {\n            events = on_down;\n        }\n\n        // add event\n        function on(ev, el, fn) {\n            ev = ev.split(/\\s+/);\n            for (var i = 0, ien = ev.length; i < ien; ++i) {\n                el.addEventListener(ev[i], fn, false);\n            }\n        }\n\n        // remove event\n        function off(ev, el, fn) {\n            ev = ev.split(/\\s+/);\n            for (var i = 0, ien = ev.length; i < ien; ++i) {\n                el.removeEventListener(ev[i], fn);\n            }\n        }\n\n        // get mouse/finger coordinate\n        function point(el, e) {\n            var T = 'touches',\n                X = 'clientX',\n                Y = 'clientY',\n                x = !!e[T] ? e[T][0][X] : e[X],\n                y = !!e[T] ? e[T][0][Y] : e[Y],\n                o = offset(el);\n            return {\n                x: x - o.l,\n                y: y - o.t\n            };\n        }\n\n        // get position\n        function offset(el) {\n            var left, top, rect;\n            if (el === win) {\n                left = win.pageXOffset || h.scrollLeft;\n                top = win.pageYOffset || h.scrollTop;\n            } else {\n                rect = el.getBoundingClientRect();\n                left = rect.left;\n                top = rect.top;\n            }\n            return {\n                l: left,\n                t: top\n            };\n        }\n\n        // get closest parent\n        function closest(a, b) {\n            while ((a = a.parentElement) && a !== b);\n            return a;\n        }\n\n        // prevent default\n        function prevent(e) {\n            if (e) e.preventDefault();\n        }\n\n        // get dimension\n        function size(el) {\n            return el === win ? {\n                w: win.innerWidth,\n                h: win.innerHeight\n            } : {\n                w: el.offsetWidth,\n                h: el.offsetHeight\n            };\n        }\n\n        // get color data\n        function get_data(a) {\n            return _ || (is_set(a) ? a : false);\n        }\n\n        // set color data\n        function set_data(a) {\n            _ = a;\n        }\n\n        // add hook\n        function add(ev, fn, id) {\n            if (!is_set(ev)) return hooks;\n            if (!is_set(fn)) return hooks[ev];\n            if (!is_set(hooks[ev])) hooks[ev] = {};\n            if (!is_set(id)) id = object_length(hooks[ev]);\n            return hooks[ev][id] = fn, $;\n        }\n\n        // remove hook\n        function remove(ev, id) {\n            if (!is_set(ev)) return hooks = {}, $;\n            if (!is_set(id)) return hooks[ev] = {}, $;\n            return delete hooks[ev][id], $;\n        }\n\n        // trigger hook\n        function trigger(ev, a, id) {\n            if (!is_set(hooks[ev])) return $;\n            if (!is_set(id)) {\n                for (var i in hooks[ev]) {\n                    hooks[ev][i].apply($, a);\n                }\n            } else {\n                if (is_set(hooks[ev][id])) {\n                    hooks[ev][id].apply($, a);\n                }\n            }\n            return $;\n        }\n\n        // initialize data ...\n        set_data($$.parse(target.getAttribute('data-color') || target.value || [0, 1, 1]));\n\n        // generate color picker pane ...\n        picker.className = 'color-picker';\n        picker.innerHTML = '<div class=\"color-picker-control\"><span class=\"color-picker-h\"><i></i></span><span class=\"color-picker-sv\"><i></i></span></div>';\n        var c = picker[first].children,\n            HSV = get_data([0, 1, 1]), // default is red\n            H = c[0],\n            SV = c[1],\n            H_point = H[first],\n            SV_point = SV[first],\n            start_H = 0,\n            start_SV = 0,\n            drag_H = 0,\n            drag_SV = 0,\n            left = 0,\n            top = 0,\n            P_W = 0,\n            P_H = 0,\n            v = HSV2HEX(HSV),\n            set;\n\n        // on update ...\n        function trigger_(k, x) {\n            if (!k || k === \"h\") {\n                trigger(\"change:h\", x);\n            }\n            if (!k || k === \"sv\") {\n                trigger(\"change:sv\", x);\n            }\n            trigger(\"change\", x);\n        }\n\n        // is visible?\n        function visible() {\n            return picker.parentNode;\n        }\n\n        // create\n        function create(first, bucket) {\n            if (!first) {\n                (parent || bucket || b).appendChild(picker), $.visible = true;\n            }\n            P_W = size(picker).w;\n            P_H = size(picker).h;\n            var SV_size = size(SV),\n                SV_point_size = size(SV_point),\n                H_H = size(H).h,\n                SV_W = SV_size.w,\n                SV_H = SV_size.h,\n                H_point_H = size(H_point).h,\n                SV_point_W = SV_point_size.w,\n                SV_point_H = SV_point_size.h;\n            if (first) {\n                picker.style.left = picker.style.top = '-9999px';\n                function click(e) {\n                    var t = e.target,\n                        is_target = t === target || closest(t, target) === target;\n                    if (is_target) {\n                        create();\n                    } else {\n                        $.exit();\n                    }\n                    trigger(is_target ? \"enter\" : \"exit\", [$]);\n                }\n                if (events !== false) {\n                    on(events, target, click);\n                }\n                $.create = function() {\n                    return create(1), trigger(\"create\", [$]), $;\n                };\n                $.destroy = function() {\n                    if (events !== false) {\n                        off(events, target, click);\n                    }\n                    $.exit(), set_data(false);\n                    return trigger(\"destroy\", [$]), $;\n                };\n            } else {\n                fit();\n            }\n            set = function() {\n                HSV = get_data(HSV), color();\n                H_point.style.top = (H_H - (H_point_H / 2) - (H_H * +HSV[0])) + 'px';\n                SV_point.style.right = (SV_W - (SV_point_W / 2) - (SV_W * +HSV[1])) + 'px';\n                SV_point.style.top = (SV_H - (SV_point_H / 2) - (SV_H * +HSV[2])) + 'px';\n            };\n            $.exit = function(e) {\n                if (visible()) {\n                    visible().removeChild(picker);\n                    $.visible = false;\n                }\n                off(on_down, H, down_H);\n                off(on_down, SV, down_SV);\n                off(on_move, doc, move);\n                off(on_up, doc, stop);\n                off(on_resize, win, fit);\n                return $;\n            };\n            function color(e) {\n                var a = HSV2RGB(HSV),\n                    b = HSV2RGB([HSV[0], 1, 1]);\n                SV.style.backgroundColor = 'rgb(' + b.join(',') + ')';\n                set_data(HSV);\n                prevent(e);\n            };\n            set();\n            function do_H(e) {\n                var y = edge(point(H, e).y, 0, H_H);\n                HSV[0] = (H_H - y) / H_H;\n                H_point.style.top = (y - (H_point_H / 2)) + 'px';\n                color(e);\n            }\n            function do_SV(e) {\n                var o = point(SV, e),\n                    x = edge(o.x, 0, SV_W),\n                    y = edge(o.y, 0, SV_H);\n                HSV[1] = 1 - ((SV_W - x) / SV_W);\n                HSV[2] = (SV_H - y) / SV_H;\n                SV_point.style.right = (SV_W - x - (SV_point_W / 2)) + 'px';\n                SV_point.style.top = (y - (SV_point_H / 2)) + 'px';\n                color(e);\n            }\n            function move(e) {\n                if (drag_H) {\n                    do_H(e), v = HSV2HEX(HSV);\n                    if (!start_H) {\n                        trigger(\"drag:h\", [v, $]);\n                        trigger(\"drag\", [v, $]);\n                        trigger_(\"h\", [v, $]);\n                    }\n                }\n                if (drag_SV) {\n                    do_SV(e), v = HSV2HEX(HSV);\n                    if (!start_SV) {\n                        trigger(\"drag:sv\", [v, $]);\n                        trigger(\"drag\", [v, $]);\n                        trigger_(\"sv\", [v, $]);\n                    }\n                }\n                start_H = 0,\n                start_SV = 0;\n            }\n            function stop(e) {\n                var t = e.target,\n                    k = drag_H ? \"h\" : \"sv\",\n                    a = [HSV2HEX(HSV), $],\n                    is_target = t === target || closest(t, target) === target,\n                    is_picker = t === picker || closest(t, picker) === picker;\n                if (!is_target && !is_picker) {\n                    // click outside the target or picker element to exit\n                    if (visible() && events !== false) $.exit(), trigger(\"exit\", [$]), trigger_(0, a);\n                } else {\n                    if (is_picker) {\n                        trigger(\"stop:\" + k, a);\n                        trigger(\"stop\", a);\n                        trigger_(k, a);\n                    }\n                }\n                drag_H = 0,\n                drag_SV = 0;\n            }\n            function down_H(e) {\n                start_H = 1,\n                drag_H = 1,\n                move(e), prevent(e);\n                trigger(\"start:h\", [v, $]);\n                trigger(\"start\", [v, $]);\n                trigger_(\"h\", [v, $]);\n            }\n            function down_SV(e) {\n                start_SV = 1,\n                drag_SV = 1,\n                move(e), prevent(e);\n                trigger(\"start:sv\", [v, $]);\n                trigger(\"start\", [v, $]);\n                trigger_(\"sv\", [v, $]);\n            }\n            if (!first) {\n                on(on_down, H, down_H);\n                on(on_down, SV, down_SV);\n                on(on_move, doc, move);\n                on(on_up, doc, stop);\n                on(on_resize, win, fit);\n            }\n        } create(1);\n\n        delay(function() {\n            var a = [HSV2HEX(HSV), $];\n            trigger(\"create\", a);\n            trigger_(0, a);\n        }, 0);\n\n        // fit to window\n        $.fit = function(o) {\n            var w = size(win),\n                y = size(h),\n                screen_w = w.w - y.w, // vertical scroll bar\n                screen_h = w.h - h.clientHeight, // horizontal scroll bar\n                ww = offset(win),\n                to = offset(target);\n            left = to.l + ww.l;\n            top = to.t + ww.t + size(target).h; // drop!\n            if (is_object(o)) {\n                is_set(o[0]) && (left = o[0]);\n                is_set(o[1]) && (top = o[1]);\n            } else {\n                var min_x = ww.l,\n                    min_y = ww.t,\n                    max_x = ww.l + w.w - P_W - screen_w,\n                    max_y = ww.t + w.h - P_H - screen_h;\n                left = edge(left, min_x, max_x) >> 0;\n                top = edge(top, min_y, max_y) >> 0;\n            }\n            picker.style.left = left + 'px';\n            picker.style.top = top + 'px';\n            return trigger(\"fit\", [$]), $;\n        };\n\n        // for event listener ID\n        function fit() {\n            return $.fit();\n        }\n\n        // set hidden color picker data\n        $.set = function(a) {\n            if (!is_set(a)) return get_data();\n            if (is_string(a)) {\n                a = $$.parse(a);\n            }\n            return set_data(a), set(), $;\n        };\n\n        // alias for `$.set()`\n        $.get = function(a) {\n            return get_data(a);\n        };\n\n        // register to global ...\n        $.target = target;\n        $.picker = picker;\n        $.visible = false;\n        $.on = add;\n        $.off = remove;\n        $.fire = trigger;\n        $.hooks = hooks;\n        $.enter = function(bucket) {\n            return create(0, bucket);\n        };\n\n        // return the global object\n        return $;\n\n    });\n\n})(window, document, 'CP');\n","/*! jQuery UI - v1.12.1 - 2016-09-14\n* http://jqueryui.com\n* Includes: widget.js, position.js, data.js, disable-selection.js, effect.js, effects/effect-blind.js, effects/effect-bounce.js, effects/effect-clip.js, effects/effect-drop.js, effects/effect-explode.js, effects/effect-fade.js, effects/effect-fold.js, effects/effect-highlight.js, effects/effect-puff.js, effects/effect-pulsate.js, effects/effect-scale.js, effects/effect-shake.js, effects/effect-size.js, effects/effect-slide.js, effects/effect-transfer.js, focusable.js, form-reset-mixin.js, jquery-1-7.js, keycode.js, labels.js, scroll-parent.js, tabbable.js, unique-id.js, widgets/accordion.js, widgets/autocomplete.js, widgets/button.js, widgets/checkboxradio.js, widgets/controlgroup.js, widgets/datepicker.js, widgets/dialog.js, widgets/draggable.js, widgets/droppable.js, widgets/menu.js, widgets/mouse.js, widgets/progressbar.js, widgets/resizable.js, widgets/selectable.js, widgets/selectmenu.js, widgets/slider.js, widgets/sortable.js, widgets/spinner.js, widgets/tabs.js, widgets/tooltip.js\n* Copyright jQuery Foundation and other contributors; Licensed MIT */\n\n(function(t){\"function\"==typeof define&&define.amd?define([\"jquery\"],t):t(jQuery)})(function(t){function e(t){for(var e=t.css(\"visibility\");\"inherit\"===e;)t=t.parent(),e=t.css(\"visibility\");return\"hidden\"!==e}function i(t){for(var e,i;t.length&&t[0]!==document;){if(e=t.css(\"position\"),(\"absolute\"===e||\"relative\"===e||\"fixed\"===e)&&(i=parseInt(t.css(\"zIndex\"),10),!isNaN(i)&&0!==i))return i;t=t.parent()}return 0}function s(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId=\"ui-datepicker-div\",this._inlineClass=\"ui-datepicker-inline\",this._appendClass=\"ui-datepicker-append\",this._triggerClass=\"ui-datepicker-trigger\",this._dialogClass=\"ui-datepicker-dialog\",this._disableClass=\"ui-datepicker-disabled\",this._unselectableClass=\"ui-datepicker-unselectable\",this._currentClass=\"ui-datepicker-current-day\",this._dayOverClass=\"ui-datepicker-days-cell-over\",this.regional=[],this.regional[\"\"]={closeText:\"Done\",prevText:\"Prev\",nextText:\"Next\",currentText:\"Today\",monthNames:[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],monthNamesShort:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],dayNames:[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"],dayNamesShort:[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],dayNamesMin:[\"Su\",\"Mo\",\"Tu\",\"We\",\"Th\",\"Fr\",\"Sa\"],weekHeader:\"Wk\",dateFormat:\"mm/dd/yy\",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:\"\"},this._defaults={showOn:\"focus\",showAnim:\"fadeIn\",showOptions:{},defaultDate:null,appendText:\"\",buttonText:\"...\",buttonImage:\"\",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:\"c-10:c+10\",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:\"+10\",minDate:null,maxDate:null,duration:\"fast\",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:\"\",altFormat:\"\",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[\"\"]),this.regional.en=t.extend(!0,{},this.regional[\"\"]),this.regional[\"en-US\"]=t.extend(!0,{},this.regional.en),this.dpDiv=n(t(\"<div id='\"+this._mainDivId+\"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>\"))}function n(e){var i=\"button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a\";return e.on(\"mouseout\",i,function(){t(this).removeClass(\"ui-state-hover\"),-1!==this.className.indexOf(\"ui-datepicker-prev\")&&t(this).removeClass(\"ui-datepicker-prev-hover\"),-1!==this.className.indexOf(\"ui-datepicker-next\")&&t(this).removeClass(\"ui-datepicker-next-hover\")}).on(\"mouseover\",i,o)}function o(){t.datepicker._isDisabledDatepicker(m.inline?m.dpDiv.parent()[0]:m.input[0])||(t(this).parents(\".ui-datepicker-calendar\").find(\"a\").removeClass(\"ui-state-hover\"),t(this).addClass(\"ui-state-hover\"),-1!==this.className.indexOf(\"ui-datepicker-prev\")&&t(this).addClass(\"ui-datepicker-prev-hover\"),-1!==this.className.indexOf(\"ui-datepicker-next\")&&t(this).addClass(\"ui-datepicker-next-hover\"))}function a(e,i){t.extend(e,i);for(var s in i)null==i[s]&&(e[s]=i[s]);return e}function r(t){return function(){var e=this.element.val();t.apply(this,arguments),this._refresh(),e!==this.element.val()&&this._trigger(\"change\")}}t.ui=t.ui||{},t.ui.version=\"1.12.1\";var h=0,l=Array.prototype.slice;t.cleanData=function(e){return function(i){var s,n,o;for(o=0;null!=(n=i[o]);o++)try{s=t._data(n,\"events\"),s&&s.remove&&t(n).triggerHandler(\"remove\")}catch(a){}e(i)}}(t.cleanData),t.widget=function(e,i,s){var n,o,a,r={},h=e.split(\".\")[0];e=e.split(\".\")[1];var l=h+\"-\"+e;return s||(s=i,i=t.Widget),t.isArray(s)&&(s=t.extend.apply(null,[{}].concat(s))),t.expr[\":\"][l.toLowerCase()]=function(e){return!!t.data(e,l)},t[h]=t[h]||{},n=t[h][e],o=t[h][e]=function(t,e){return this._createWidget?(arguments.length&&this._createWidget(t,e),void 0):new o(t,e)},t.extend(o,n,{version:s.version,_proto:t.extend({},s),_childConstructors:[]}),a=new i,a.options=t.widget.extend({},a.options),t.each(s,function(e,s){return t.isFunction(s)?(r[e]=function(){function t(){return i.prototype[e].apply(this,arguments)}function n(t){return i.prototype[e].apply(this,t)}return function(){var e,i=this._super,o=this._superApply;return this._super=t,this._superApply=n,e=s.apply(this,arguments),this._super=i,this._superApply=o,e}}(),void 0):(r[e]=s,void 0)}),o.prototype=t.widget.extend(a,{widgetEventPrefix:n?a.widgetEventPrefix||e:e},r,{constructor:o,namespace:h,widgetName:e,widgetFullName:l}),n?(t.each(n._childConstructors,function(e,i){var s=i.prototype;t.widget(s.namespace+\".\"+s.widgetName,o,i._proto)}),delete n._childConstructors):i._childConstructors.push(o),t.widget.bridge(e,o),o},t.widget.extend=function(e){for(var i,s,n=l.call(arguments,1),o=0,a=n.length;a>o;o++)for(i in n[o])s=n[o][i],n[o].hasOwnProperty(i)&&void 0!==s&&(e[i]=t.isPlainObject(s)?t.isPlainObject(e[i])?t.widget.extend({},e[i],s):t.widget.extend({},s):s);return e},t.widget.bridge=function(e,i){var s=i.prototype.widgetFullName||e;t.fn[e]=function(n){var o=\"string\"==typeof n,a=l.call(arguments,1),r=this;return o?this.length||\"instance\"!==n?this.each(function(){var i,o=t.data(this,s);return\"instance\"===n?(r=o,!1):o?t.isFunction(o[n])&&\"_\"!==n.charAt(0)?(i=o[n].apply(o,a),i!==o&&void 0!==i?(r=i&&i.jquery?r.pushStack(i.get()):i,!1):void 0):t.error(\"no such method '\"+n+\"' for \"+e+\" widget instance\"):t.error(\"cannot call methods on \"+e+\" prior to initialization; \"+\"attempted to call method '\"+n+\"'\")}):r=void 0:(a.length&&(n=t.widget.extend.apply(null,[n].concat(a))),this.each(function(){var e=t.data(this,s);e?(e.option(n||{}),e._init&&e._init()):t.data(this,s,new i(n,this))})),r}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:\"widget\",widgetEventPrefix:\"\",defaultElement:\"<div>\",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=h++,this.eventNamespace=\".\"+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger(\"create\",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,function(t,i){e._removeClass(i,t)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr(\"aria-disabled\"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var s,n,o,a=e;if(0===arguments.length)return t.widget.extend({},this.options);if(\"string\"==typeof e)if(a={},s=e.split(\".\"),e=s.shift(),s.length){for(n=a[e]=t.widget.extend({},this.options[e]),o=0;s.length-1>o;o++)n[s[o]]=n[s[o]]||{},n=n[s[o]];if(e=s.pop(),1===arguments.length)return void 0===n[e]?null:n[e];n[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];a[e]=i}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return\"classes\"===t&&this._setOptionClasses(e),this.options[t]=e,\"disabled\"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var i,s,n;for(i in e)n=this.classesElementLookup[i],e[i]!==this.options.classes[i]&&n&&n.length&&(s=t(n.get()),this._removeClass(n,i),s.addClass(this._classes({element:s,keys:i,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+\"-disabled\",null,!!t),t&&(this._removeClass(this.hoverable,null,\"ui-state-hover\"),this._removeClass(this.focusable,null,\"ui-state-focus\"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){function i(i,o){var a,r;for(r=0;i.length>r;r++)a=n.classesElementLookup[i[r]]||t(),a=e.add?t(t.unique(a.get().concat(e.element.get()))):t(a.not(e.element).get()),n.classesElementLookup[i[r]]=a,s.push(i[r]),o&&e.classes[i[r]]&&s.push(e.classes[i[r]])}var s=[],n=this;return e=t.extend({element:this.element,classes:this.options.classes||{}},e),this._on(e.element,{remove:\"_untrackClassesElement\"}),e.keys&&i(e.keys.match(/\\S+/g)||[],!0),e.extra&&i(e.extra.match(/\\S+/g)||[]),s.join(\" \")},_untrackClassesElement:function(e){var i=this;t.each(i.classesElementLookup,function(s,n){-1!==t.inArray(e.target,n)&&(i.classesElementLookup[s]=t(n.not(e.target).get()))})},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,s){s=\"boolean\"==typeof s?s:i;var n=\"string\"==typeof t||null===t,o={extra:n?e:i,keys:n?t:e,element:n?this.element:t,add:s};return o.element.toggleClass(this._classes(o),s),this},_on:function(e,i,s){var n,o=this;\"boolean\"!=typeof e&&(s=i,i=e,e=!1),s?(i=n=t(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),t.each(s,function(s,a){function r(){return e||o.options.disabled!==!0&&!t(this).hasClass(\"ui-state-disabled\")?(\"string\"==typeof a?o[a]:a).apply(o,arguments):void 0}\"string\"!=typeof a&&(r.guid=a.guid=a.guid||r.guid||t.guid++);var h=s.match(/^([\\w:-]*)\\s*(.*)$/),l=h[1]+o.eventNamespace,c=h[2];c?n.on(l,c,r):i.on(l,r)})},_off:function(e,i){i=(i||\"\").split(\" \").join(this.eventNamespace+\" \")+this.eventNamespace,e.off(i).off(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function i(){return(\"string\"==typeof t?s[t]:t).apply(s,arguments)}var s=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,\"ui-state-hover\")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,\"ui-state-hover\")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,\"ui-state-focus\")},focusout:function(e){this._removeClass(t(e.currentTarget),null,\"ui-state-focus\")}})},_trigger:function(e,i,s){var n,o,a=this.options[e];if(s=s||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(n in o)n in i||(i[n]=o[n]);return this.element.trigger(i,s),!(t.isFunction(a)&&a.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},t.each({show:\"fadeIn\",hide:\"fadeOut\"},function(e,i){t.Widget.prototype[\"_\"+e]=function(s,n,o){\"string\"==typeof n&&(n={effect:n});var a,r=n?n===!0||\"number\"==typeof n?i:n.effect||i:e;n=n||{},\"number\"==typeof n&&(n={duration:n}),a=!t.isEmptyObject(n),n.complete=o,n.delay&&s.delay(n.delay),a&&t.effects&&t.effects.effect[r]?s[e](n):r!==e&&s[r]?s[r](n.duration,n.easing,o):s.queue(function(i){t(this)[e](),o&&o.call(s[0]),i()})}}),t.widget,function(){function e(t,e,i){return[parseFloat(t[0])*(u.test(t[0])?e/100:1),parseFloat(t[1])*(u.test(t[1])?i/100:1)]}function i(e,i){return parseInt(t.css(e,i),10)||0}function s(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}var n,o=Math.max,a=Math.abs,r=/left|center|right/,h=/top|center|bottom/,l=/[\\+\\-]\\d+(\\.[\\d]+)?%?/,c=/^\\w+/,u=/%$/,d=t.fn.position;t.position={scrollbarWidth:function(){if(void 0!==n)return n;var e,i,s=t(\"<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>\"),o=s.children()[0];return t(\"body\").append(s),e=o.offsetWidth,s.css(\"overflow\",\"scroll\"),i=o.offsetWidth,e===i&&(i=s[0].clientWidth),s.remove(),n=e-i},getScrollInfo:function(e){var i=e.isWindow||e.isDocument?\"\":e.element.css(\"overflow-x\"),s=e.isWindow||e.isDocument?\"\":e.element.css(\"overflow-y\"),n=\"scroll\"===i||\"auto\"===i&&e.width<e.element[0].scrollWidth,o=\"scroll\"===s||\"auto\"===s&&e.height<e.element[0].scrollHeight;return{width:o?t.position.scrollbarWidth():0,height:n?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),s=t.isWindow(i[0]),n=!!i[0]&&9===i[0].nodeType,o=!s&&!n;return{element:i,isWindow:s,isDocument:n,offset:o?t(e).offset():{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:i.outerWidth(),height:i.outerHeight()}}},t.fn.position=function(n){if(!n||!n.of)return d.apply(this,arguments);n=t.extend({},n);var u,p,f,g,m,_,v=t(n.of),b=t.position.getWithinInfo(n.within),y=t.position.getScrollInfo(b),w=(n.collision||\"flip\").split(\" \"),k={};return _=s(v),v[0].preventDefault&&(n.at=\"left top\"),p=_.width,f=_.height,g=_.offset,m=t.extend({},g),t.each([\"my\",\"at\"],function(){var t,e,i=(n[this]||\"\").split(\" \");1===i.length&&(i=r.test(i[0])?i.concat([\"center\"]):h.test(i[0])?[\"center\"].concat(i):[\"center\",\"center\"]),i[0]=r.test(i[0])?i[0]:\"center\",i[1]=h.test(i[1])?i[1]:\"center\",t=l.exec(i[0]),e=l.exec(i[1]),k[this]=[t?t[0]:0,e?e[0]:0],n[this]=[c.exec(i[0])[0],c.exec(i[1])[0]]}),1===w.length&&(w[1]=w[0]),\"right\"===n.at[0]?m.left+=p:\"center\"===n.at[0]&&(m.left+=p/2),\"bottom\"===n.at[1]?m.top+=f:\"center\"===n.at[1]&&(m.top+=f/2),u=e(k.at,p,f),m.left+=u[0],m.top+=u[1],this.each(function(){var s,r,h=t(this),l=h.outerWidth(),c=h.outerHeight(),d=i(this,\"marginLeft\"),_=i(this,\"marginTop\"),x=l+d+i(this,\"marginRight\")+y.width,C=c+_+i(this,\"marginBottom\")+y.height,D=t.extend({},m),I=e(k.my,h.outerWidth(),h.outerHeight());\"right\"===n.my[0]?D.left-=l:\"center\"===n.my[0]&&(D.left-=l/2),\"bottom\"===n.my[1]?D.top-=c:\"center\"===n.my[1]&&(D.top-=c/2),D.left+=I[0],D.top+=I[1],s={marginLeft:d,marginTop:_},t.each([\"left\",\"top\"],function(e,i){t.ui.position[w[e]]&&t.ui.position[w[e]][i](D,{targetWidth:p,targetHeight:f,elemWidth:l,elemHeight:c,collisionPosition:s,collisionWidth:x,collisionHeight:C,offset:[u[0]+I[0],u[1]+I[1]],my:n.my,at:n.at,within:b,elem:h})}),n.using&&(r=function(t){var e=g.left-D.left,i=e+p-l,s=g.top-D.top,r=s+f-c,u={target:{element:v,left:g.left,top:g.top,width:p,height:f},element:{element:h,left:D.left,top:D.top,width:l,height:c},horizontal:0>i?\"left\":e>0?\"right\":\"center\",vertical:0>r?\"top\":s>0?\"bottom\":\"middle\"};l>p&&p>a(e+i)&&(u.horizontal=\"center\"),c>f&&f>a(s+r)&&(u.vertical=\"middle\"),u.important=o(a(e),a(i))>o(a(s),a(r))?\"horizontal\":\"vertical\",n.using.call(this,t,u)}),h.offset(t.extend(D,{using:r}))})},t.ui.position={fit:{left:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollLeft:s.offset.left,a=s.width,r=t.left-e.collisionPosition.marginLeft,h=n-r,l=r+e.collisionWidth-a-n;e.collisionWidth>a?h>0&&0>=l?(i=t.left+h+e.collisionWidth-a-n,t.left+=h-i):t.left=l>0&&0>=h?n:h>l?n+a-e.collisionWidth:n:h>0?t.left+=h:l>0?t.left-=l:t.left=o(t.left-r,t.left)},top:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollTop:s.offset.top,a=e.within.height,r=t.top-e.collisionPosition.marginTop,h=n-r,l=r+e.collisionHeight-a-n;e.collisionHeight>a?h>0&&0>=l?(i=t.top+h+e.collisionHeight-a-n,t.top+=h-i):t.top=l>0&&0>=h?n:h>l?n+a-e.collisionHeight:n:h>0?t.top+=h:l>0?t.top-=l:t.top=o(t.top-r,t.top)}},flip:{left:function(t,e){var i,s,n=e.within,o=n.offset.left+n.scrollLeft,r=n.width,h=n.isWindow?n.scrollLeft:n.offset.left,l=t.left-e.collisionPosition.marginLeft,c=l-h,u=l+e.collisionWidth-r-h,d=\"left\"===e.my[0]?-e.elemWidth:\"right\"===e.my[0]?e.elemWidth:0,p=\"left\"===e.at[0]?e.targetWidth:\"right\"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0>c?(i=t.left+d+p+f+e.collisionWidth-r-o,(0>i||a(c)>i)&&(t.left+=d+p+f)):u>0&&(s=t.left-e.collisionPosition.marginLeft+d+p+f-h,(s>0||u>a(s))&&(t.left+=d+p+f))},top:function(t,e){var i,s,n=e.within,o=n.offset.top+n.scrollTop,r=n.height,h=n.isWindow?n.scrollTop:n.offset.top,l=t.top-e.collisionPosition.marginTop,c=l-h,u=l+e.collisionHeight-r-h,d=\"top\"===e.my[1],p=d?-e.elemHeight:\"bottom\"===e.my[1]?e.elemHeight:0,f=\"top\"===e.at[1]?e.targetHeight:\"bottom\"===e.at[1]?-e.targetHeight:0,g=-2*e.offset[1];0>c?(s=t.top+p+f+g+e.collisionHeight-r-o,(0>s||a(c)>s)&&(t.top+=p+f+g)):u>0&&(i=t.top-e.collisionPosition.marginTop+p+f+g-h,(i>0||u>a(i))&&(t.top+=p+f+g))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}}}(),t.ui.position,t.extend(t.expr[\":\"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,s){return!!t.data(e,s[3])}}),t.fn.extend({disableSelection:function(){var t=\"onselectstart\"in document.createElement(\"div\")?\"selectstart\":\"mousedown\";return function(){return this.on(t+\".ui-disableSelection\",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.off(\".ui-disableSelection\")}});var c=\"ui-effects-\",u=\"ui-effects-style\",d=\"ui-effects-animated\",p=t;t.effects={effect:{}},function(t,e){function i(t,e,i){var s=u[e.type]||{};return null==t?i||!e.def?null:e.def:(t=s.floor?~~t:parseFloat(t),isNaN(t)?e.def:s.mod?(t+s.mod)%s.mod:0>t?0:t>s.max?s.max:t)}function s(i){var s=l(),n=s._rgba=[];return i=i.toLowerCase(),f(h,function(t,o){var a,r=o.re.exec(i),h=r&&o.parse(r),l=o.space||\"rgba\";return h?(a=s[l](h),s[c[l].cache]=a[c[l].cache],n=s._rgba=a._rgba,!1):e}),n.length?(\"0,0,0,0\"===n.join()&&t.extend(n,o.transparent),s):o[i]}function n(t,e,i){return i=(i+1)%1,1>6*i?t+6*(e-t)*i:1>2*i?e:2>3*i?t+6*(e-t)*(2/3-i):t}var o,a=\"backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor\",r=/^([\\-+])=\\s*(\\d+\\.?\\d*)/,h=[{re:/rgba?\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*(?:,\\s*(\\d?(?:\\.\\d+)?)\\s*)?\\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\\(\\s*(\\d+(?:\\.\\d+)?)\\%\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*(?:,\\s*(\\d?(?:\\.\\d+)?)\\s*)?\\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\\(\\s*(\\d+(?:\\.\\d+)?)\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*(?:,\\s*(\\d?(?:\\.\\d+)?)\\s*)?\\)/,space:\"hsla\",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],l=t.Color=function(e,i,s,n){return new t.Color.fn.parse(e,i,s,n)},c={rgba:{props:{red:{idx:0,type:\"byte\"},green:{idx:1,type:\"byte\"},blue:{idx:2,type:\"byte\"}}},hsla:{props:{hue:{idx:0,type:\"degrees\"},saturation:{idx:1,type:\"percent\"},lightness:{idx:2,type:\"percent\"}}}},u={\"byte\":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},d=l.support={},p=t(\"<p>\")[0],f=t.each;p.style.cssText=\"background-color:rgba(1,1,1,.5)\",d.rgba=p.style.backgroundColor.indexOf(\"rgba\")>-1,f(c,function(t,e){e.cache=\"_\"+t,e.props.alpha={idx:3,type:\"percent\",def:1}}),l.fn=t.extend(l.prototype,{parse:function(n,a,r,h){if(n===e)return this._rgba=[null,null,null,null],this;(n.jquery||n.nodeType)&&(n=t(n).css(a),a=e);var u=this,d=t.type(n),p=this._rgba=[];return a!==e&&(n=[n,a,r,h],d=\"array\"),\"string\"===d?this.parse(s(n)||o._default):\"array\"===d?(f(c.rgba.props,function(t,e){p[e.idx]=i(n[e.idx],e)}),this):\"object\"===d?(n instanceof l?f(c,function(t,e){n[e.cache]&&(u[e.cache]=n[e.cache].slice())}):f(c,function(e,s){var o=s.cache;f(s.props,function(t,e){if(!u[o]&&s.to){if(\"alpha\"===t||null==n[t])return;u[o]=s.to(u._rgba)}u[o][e.idx]=i(n[t],e,!0)}),u[o]&&0>t.inArray(null,u[o].slice(0,3))&&(u[o][3]=1,s.from&&(u._rgba=s.from(u[o])))}),this):e},is:function(t){var i=l(t),s=!0,n=this;return f(c,function(t,o){var a,r=i[o.cache];return r&&(a=n[o.cache]||o.to&&o.to(n._rgba)||[],f(o.props,function(t,i){return null!=r[i.idx]?s=r[i.idx]===a[i.idx]:e})),s}),s},_space:function(){var t=[],e=this;return f(c,function(i,s){e[s.cache]&&t.push(i)}),t.pop()},transition:function(t,e){var s=l(t),n=s._space(),o=c[n],a=0===this.alpha()?l(\"transparent\"):this,r=a[o.cache]||o.to(a._rgba),h=r.slice();return s=s[o.cache],f(o.props,function(t,n){var o=n.idx,a=r[o],l=s[o],c=u[n.type]||{};null!==l&&(null===a?h[o]=l:(c.mod&&(l-a>c.mod/2?a+=c.mod:a-l>c.mod/2&&(a-=c.mod)),h[o]=i((l-a)*e+a,n)))}),this[n](h)},blend:function(e){if(1===this._rgba[3])return this;var i=this._rgba.slice(),s=i.pop(),n=l(e)._rgba;return l(t.map(i,function(t,e){return(1-s)*n[e]+s*t}))},toRgbaString:function(){var e=\"rgba(\",i=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===i[3]&&(i.pop(),e=\"rgb(\"),e+i.join()+\")\"},toHslaString:function(){var e=\"hsla(\",i=t.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&3>e&&(t=Math.round(100*t)+\"%\"),t});return 1===i[3]&&(i.pop(),e=\"hsl(\"),e+i.join()+\")\"},toHexString:function(e){var i=this._rgba.slice(),s=i.pop();return e&&i.push(~~(255*s)),\"#\"+t.map(i,function(t){return t=(t||0).toString(16),1===t.length?\"0\"+t:t}).join(\"\")},toString:function(){return 0===this._rgba[3]?\"transparent\":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,c.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i,s=t[0]/255,n=t[1]/255,o=t[2]/255,a=t[3],r=Math.max(s,n,o),h=Math.min(s,n,o),l=r-h,c=r+h,u=.5*c;return e=h===r?0:s===r?60*(n-o)/l+360:n===r?60*(o-s)/l+120:60*(s-n)/l+240,i=0===l?0:.5>=u?l/c:l/(2-c),[Math.round(e)%360,i,u,null==a?1:a]},c.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],s=t[2],o=t[3],a=.5>=s?s*(1+i):s+i-s*i,r=2*s-a;return[Math.round(255*n(r,a,e+1/3)),Math.round(255*n(r,a,e)),Math.round(255*n(r,a,e-1/3)),o]},f(c,function(s,n){var o=n.props,a=n.cache,h=n.to,c=n.from;l.fn[s]=function(s){if(h&&!this[a]&&(this[a]=h(this._rgba)),s===e)return this[a].slice();var n,r=t.type(s),u=\"array\"===r||\"object\"===r?s:arguments,d=this[a].slice();return f(o,function(t,e){var s=u[\"object\"===r?t:e.idx];null==s&&(s=d[e.idx]),d[e.idx]=i(s,e)}),c?(n=l(c(d)),n[a]=d,n):l(d)},f(o,function(e,i){l.fn[e]||(l.fn[e]=function(n){var o,a=t.type(n),h=\"alpha\"===e?this._hsla?\"hsla\":\"rgba\":s,l=this[h](),c=l[i.idx];return\"undefined\"===a?c:(\"function\"===a&&(n=n.call(this,c),a=t.type(n)),null==n&&i.empty?this:(\"string\"===a&&(o=r.exec(n),o&&(n=c+parseFloat(o[2])*(\"+\"===o[1]?1:-1))),l[i.idx]=n,this[h](l)))})})}),l.hook=function(e){var i=e.split(\" \");f(i,function(e,i){t.cssHooks[i]={set:function(e,n){var o,a,r=\"\";if(\"transparent\"!==n&&(\"string\"!==t.type(n)||(o=s(n)))){if(n=l(o||n),!d.rgba&&1!==n._rgba[3]){for(a=\"backgroundColor\"===i?e.parentNode:e;(\"\"===r||\"transparent\"===r)&&a&&a.style;)try{r=t.css(a,\"backgroundColor\"),a=a.parentNode}catch(h){}n=n.blend(r&&\"transparent\"!==r?r:\"_default\")}n=n.toRgbaString()}try{e.style[i]=n}catch(h){}}},t.fx.step[i]=function(e){e.colorInit||(e.start=l(e.elem,i),e.end=l(e.end),e.colorInit=!0),t.cssHooks[i].set(e.elem,e.start.transition(e.end,e.pos))}})},l.hook(a),t.cssHooks.borderColor={expand:function(t){var e={};return f([\"Top\",\"Right\",\"Bottom\",\"Left\"],function(i,s){e[\"border\"+s+\"Color\"]=t}),e}},o=t.Color.names={aqua:\"#00ffff\",black:\"#000000\",blue:\"#0000ff\",fuchsia:\"#ff00ff\",gray:\"#808080\",green:\"#008000\",lime:\"#00ff00\",maroon:\"#800000\",navy:\"#000080\",olive:\"#808000\",purple:\"#800080\",red:\"#ff0000\",silver:\"#c0c0c0\",teal:\"#008080\",white:\"#ffffff\",yellow:\"#ffff00\",transparent:[null,null,null,0],_default:\"#ffffff\"}}(p),function(){function e(e){var i,s,n=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,o={};if(n&&n.length&&n[0]&&n[n[0]])for(s=n.length;s--;)i=n[s],\"string\"==typeof n[i]&&(o[t.camelCase(i)]=n[i]);else for(i in n)\"string\"==typeof n[i]&&(o[i]=n[i]);return o}function i(e,i){var s,o,a={};for(s in i)o=i[s],e[s]!==o&&(n[s]||(t.fx.step[s]||!isNaN(parseFloat(o)))&&(a[s]=o));return a}var s=[\"add\",\"remove\",\"toggle\"],n={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each([\"borderLeftStyle\",\"borderRightStyle\",\"borderBottomStyle\",\"borderTopStyle\"],function(e,i){t.fx.step[i]=function(t){(\"none\"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(p.style(t.elem,i,t.end),t.setAttr=!0)}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(n,o,a,r){var h=t.speed(o,a,r);return this.queue(function(){var o,a=t(this),r=a.attr(\"class\")||\"\",l=h.children?a.find(\"*\").addBack():a;l=l.map(function(){var i=t(this);return{el:i,start:e(this)}}),o=function(){t.each(s,function(t,e){n[e]&&a[e+\"Class\"](n[e])})},o(),l=l.map(function(){return this.end=e(this.el[0]),this.diff=i(this.start,this.end),this}),a.attr(\"class\",r),l=l.map(function(){var e=this,i=t.Deferred(),s=t.extend({},h,{queue:!1,complete:function(){i.resolve(e)}});return this.el.animate(this.diff,s),i.promise()}),t.when.apply(t,l.get()).done(function(){o(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,\"\")})}),h.complete.call(a[0])})})},t.fn.extend({addClass:function(e){return function(i,s,n,o){return s?t.effects.animateClass.call(this,{add:i},s,n,o):e.apply(this,arguments)}}(t.fn.addClass),removeClass:function(e){return function(i,s,n,o){return arguments.length>1?t.effects.animateClass.call(this,{remove:i},s,n,o):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(e){return function(i,s,n,o,a){return\"boolean\"==typeof s||void 0===s?n?t.effects.animateClass.call(this,s?{add:i}:{remove:i},n,o,a):e.apply(this,arguments):t.effects.animateClass.call(this,{toggle:i},s,n,o)}}(t.fn.toggleClass),switchClass:function(e,i,s,n,o){return t.effects.animateClass.call(this,{add:i,remove:e},s,n,o)}})}(),function(){function e(e,i,s,n){return t.isPlainObject(e)&&(i=e,e=e.effect),e={effect:e},null==i&&(i={}),t.isFunction(i)&&(n=i,s=null,i={}),(\"number\"==typeof i||t.fx.speeds[i])&&(n=s,s=i,i={}),t.isFunction(s)&&(n=s,s=null),i&&t.extend(e,i),s=s||i.duration,e.duration=t.fx.off?0:\"number\"==typeof s?s:s in t.fx.speeds?t.fx.speeds[s]:t.fx.speeds._default,e.complete=n||i.complete,e}function i(e){return!e||\"number\"==typeof e||t.fx.speeds[e]?!0:\"string\"!=typeof e||t.effects.effect[e]?t.isFunction(e)?!0:\"object\"!=typeof e||e.effect?!1:!0:!0}function s(t,e){var i=e.outerWidth(),s=e.outerHeight(),n=/^rect\\((-?\\d*\\.?\\d*px|-?\\d+%|auto),?\\s*(-?\\d*\\.?\\d*px|-?\\d+%|auto),?\\s*(-?\\d*\\.?\\d*px|-?\\d+%|auto),?\\s*(-?\\d*\\.?\\d*px|-?\\d+%|auto)\\)$/,o=n.exec(t)||[\"\",0,i,s,0];return{top:parseFloat(o[1])||0,right:\"auto\"===o[2]?i:parseFloat(o[2]),bottom:\"auto\"===o[3]?s:parseFloat(o[3]),left:parseFloat(o[4])||0}}t.expr&&t.expr.filters&&t.expr.filters.animated&&(t.expr.filters.animated=function(e){return function(i){return!!t(i).data(d)||e(i)}}(t.expr.filters.animated)),t.uiBackCompat!==!1&&t.extend(t.effects,{save:function(t,e){for(var i=0,s=e.length;s>i;i++)null!==e[i]&&t.data(c+e[i],t[0].style[e[i]])},restore:function(t,e){for(var i,s=0,n=e.length;n>s;s++)null!==e[s]&&(i=t.data(c+e[s]),t.css(e[s],i))},setMode:function(t,e){return\"toggle\"===e&&(e=t.is(\":hidden\")?\"show\":\"hide\"),e},createWrapper:function(e){if(e.parent().is(\".ui-effects-wrapper\"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),\"float\":e.css(\"float\")},s=t(\"<div></div>\").addClass(\"ui-effects-wrapper\").css({fontSize:\"100%\",background:\"transparent\",border:\"none\",margin:0,padding:0}),n={width:e.width(),height:e.height()},o=document.activeElement;try{o.id}catch(a){o=document.body}return e.wrap(s),(e[0]===o||t.contains(e[0],o))&&t(o).trigger(\"focus\"),s=e.parent(),\"static\"===e.css(\"position\")?(s.css({position:\"relative\"}),e.css({position:\"relative\"})):(t.extend(i,{position:e.css(\"position\"),zIndex:e.css(\"z-index\")}),t.each([\"top\",\"left\",\"bottom\",\"right\"],function(t,s){i[s]=e.css(s),isNaN(parseInt(i[s],10))&&(i[s]=\"auto\")}),e.css({position:\"relative\",top:0,left:0,right:\"auto\",bottom:\"auto\"})),e.css(n),s.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(\".ui-effects-wrapper\")&&(e.parent().replaceWith(e),(e[0]===i||t.contains(e[0],i))&&t(i).trigger(\"focus\")),e}}),t.extend(t.effects,{version:\"1.12.1\",define:function(e,i,s){return s||(s=i,i=\"effect\"),t.effects.effect[e]=s,t.effects.effect[e].mode=i,s},scaledDimensions:function(t,e,i){if(0===e)return{height:0,width:0,outerHeight:0,outerWidth:0};var s=\"horizontal\"!==i?(e||100)/100:1,n=\"vertical\"!==i?(e||100)/100:1;return{height:t.height()*n,width:t.width()*s,outerHeight:t.outerHeight()*n,outerWidth:t.outerWidth()*s}},clipToBox:function(t){return{width:t.clip.right-t.clip.left,height:t.clip.bottom-t.clip.top,left:t.clip.left,top:t.clip.top}},unshift:function(t,e,i){var s=t.queue();e>1&&s.splice.apply(s,[1,0].concat(s.splice(e,i))),t.dequeue()},saveStyle:function(t){t.data(u,t[0].style.cssText)},restoreStyle:function(t){t[0].style.cssText=t.data(u)||\"\",t.removeData(u)},mode:function(t,e){var i=t.is(\":hidden\");return\"toggle\"===e&&(e=i?\"show\":\"hide\"),(i?\"hide\"===e:\"show\"===e)&&(e=\"none\"),e},getBaseline:function(t,e){var i,s;switch(t[0]){case\"top\":i=0;break;case\"middle\":i=.5;break;case\"bottom\":i=1;break;default:i=t[0]/e.height}switch(t[1]){case\"left\":s=0;break;case\"center\":s=.5;break;case\"right\":s=1;break;default:s=t[1]/e.width}return{x:s,y:i}},createPlaceholder:function(e){var i,s=e.css(\"position\"),n=e.position();return e.css({marginTop:e.css(\"marginTop\"),marginBottom:e.css(\"marginBottom\"),marginLeft:e.css(\"marginLeft\"),marginRight:e.css(\"marginRight\")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()),/^(static|relative)/.test(s)&&(s=\"absolute\",i=t(\"<\"+e[0].nodeName+\">\").insertAfter(e).css({display:/^(inline|ruby)/.test(e.css(\"display\"))?\"inline-block\":\"block\",visibility:\"hidden\",marginTop:e.css(\"marginTop\"),marginBottom:e.css(\"marginBottom\"),marginLeft:e.css(\"marginLeft\"),marginRight:e.css(\"marginRight\"),\"float\":e.css(\"float\")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).addClass(\"ui-effects-placeholder\"),e.data(c+\"placeholder\",i)),e.css({position:s,left:n.left,top:n.top}),i},removePlaceholder:function(t){var e=c+\"placeholder\",i=t.data(e);i&&(i.remove(),t.removeData(e))},cleanUp:function(e){t.effects.restoreStyle(e),t.effects.removePlaceholder(e)},setTransition:function(e,i,s,n){return n=n||{},t.each(i,function(t,i){var o=e.cssUnit(i);o[0]>0&&(n[i]=o[0]*s+o[1])}),n}}),t.fn.extend({effect:function(){function i(e){function i(){r.removeData(d),t.effects.cleanUp(r),\"hide\"===s.mode&&r.hide(),a()}function a(){t.isFunction(h)&&h.call(r[0]),t.isFunction(e)&&e()}var r=t(this);s.mode=c.shift(),t.uiBackCompat===!1||o?\"none\"===s.mode?(r[l](),a()):n.call(r[0],s,i):(r.is(\":hidden\")?\"hide\"===l:\"show\"===l)?(r[l](),a()):n.call(r[0],s,a)}var s=e.apply(this,arguments),n=t.effects.effect[s.effect],o=n.mode,a=s.queue,r=a||\"fx\",h=s.complete,l=s.mode,c=[],u=function(e){var i=t(this),s=t.effects.mode(i,l)||o;i.data(d,!0),c.push(s),o&&(\"show\"===s||s===o&&\"hide\"===s)&&i.show(),o&&\"none\"===s||t.effects.saveStyle(i),t.isFunction(e)&&e()};return t.fx.off||!n?l?this[l](s.duration,h):this.each(function(){h&&h.call(this)}):a===!1?this.each(u).each(i):this.queue(r,u).queue(r,i)},show:function(t){return function(s){if(i(s))return t.apply(this,arguments);var n=e.apply(this,arguments);return n.mode=\"show\",this.effect.call(this,n)\n}}(t.fn.show),hide:function(t){return function(s){if(i(s))return t.apply(this,arguments);var n=e.apply(this,arguments);return n.mode=\"hide\",this.effect.call(this,n)}}(t.fn.hide),toggle:function(t){return function(s){if(i(s)||\"boolean\"==typeof s)return t.apply(this,arguments);var n=e.apply(this,arguments);return n.mode=\"toggle\",this.effect.call(this,n)}}(t.fn.toggle),cssUnit:function(e){var i=this.css(e),s=[];return t.each([\"em\",\"px\",\"%\",\"pt\"],function(t,e){i.indexOf(e)>0&&(s=[parseFloat(i),e])}),s},cssClip:function(t){return t?this.css(\"clip\",\"rect(\"+t.top+\"px \"+t.right+\"px \"+t.bottom+\"px \"+t.left+\"px)\"):s(this.css(\"clip\"),this)},transfer:function(e,i){var s=t(this),n=t(e.to),o=\"fixed\"===n.css(\"position\"),a=t(\"body\"),r=o?a.scrollTop():0,h=o?a.scrollLeft():0,l=n.offset(),c={top:l.top-r,left:l.left-h,height:n.innerHeight(),width:n.innerWidth()},u=s.offset(),d=t(\"<div class='ui-effects-transfer'></div>\").appendTo(\"body\").addClass(e.className).css({top:u.top-r,left:u.left-h,height:s.innerHeight(),width:s.innerWidth(),position:o?\"fixed\":\"absolute\"}).animate(c,e.duration,e.easing,function(){d.remove(),t.isFunction(i)&&i()})}}),t.fx.step.clip=function(e){e.clipInit||(e.start=t(e.elem).cssClip(),\"string\"==typeof e.end&&(e.end=s(e.end,e.elem)),e.clipInit=!0),t(e.elem).cssClip({top:e.pos*(e.end.top-e.start.top)+e.start.top,right:e.pos*(e.end.right-e.start.right)+e.start.right,bottom:e.pos*(e.end.bottom-e.start.bottom)+e.start.bottom,left:e.pos*(e.end.left-e.start.left)+e.start.left})}}(),function(){var e={};t.each([\"Quad\",\"Cubic\",\"Quart\",\"Quint\",\"Expo\"],function(t,i){e[i]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;((e=Math.pow(2,--i))-1)/11>t;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,i){t.easing[\"easeIn\"+e]=i,t.easing[\"easeOut\"+e]=function(t){return 1-i(1-t)},t.easing[\"easeInOut\"+e]=function(t){return.5>t?i(2*t)/2:1-i(-2*t+2)/2}})}();var f=t.effects;t.effects.define(\"blind\",\"hide\",function(e,i){var s={up:[\"bottom\",\"top\"],vertical:[\"bottom\",\"top\"],down:[\"top\",\"bottom\"],left:[\"right\",\"left\"],horizontal:[\"right\",\"left\"],right:[\"left\",\"right\"]},n=t(this),o=e.direction||\"up\",a=n.cssClip(),r={clip:t.extend({},a)},h=t.effects.createPlaceholder(n);r.clip[s[o][0]]=r.clip[s[o][1]],\"show\"===e.mode&&(n.cssClip(r.clip),h&&h.css(t.effects.clipToBox(r)),r.clip=a),h&&h.animate(t.effects.clipToBox(r),e.duration,e.easing),n.animate(r,{queue:!1,duration:e.duration,easing:e.easing,complete:i})}),t.effects.define(\"bounce\",function(e,i){var s,n,o,a=t(this),r=e.mode,h=\"hide\"===r,l=\"show\"===r,c=e.direction||\"up\",u=e.distance,d=e.times||5,p=2*d+(l||h?1:0),f=e.duration/p,g=e.easing,m=\"up\"===c||\"down\"===c?\"top\":\"left\",_=\"up\"===c||\"left\"===c,v=0,b=a.queue().length;for(t.effects.createPlaceholder(a),o=a.css(m),u||(u=a[\"top\"===m?\"outerHeight\":\"outerWidth\"]()/3),l&&(n={opacity:1},n[m]=o,a.css(\"opacity\",0).css(m,_?2*-u:2*u).animate(n,f,g)),h&&(u/=Math.pow(2,d-1)),n={},n[m]=o;d>v;v++)s={},s[m]=(_?\"-=\":\"+=\")+u,a.animate(s,f,g).animate(n,f,g),u=h?2*u:u/2;h&&(s={opacity:0},s[m]=(_?\"-=\":\"+=\")+u,a.animate(s,f,g)),a.queue(i),t.effects.unshift(a,b,p+1)}),t.effects.define(\"clip\",\"hide\",function(e,i){var s,n={},o=t(this),a=e.direction||\"vertical\",r=\"both\"===a,h=r||\"horizontal\"===a,l=r||\"vertical\"===a;s=o.cssClip(),n.clip={top:l?(s.bottom-s.top)/2:s.top,right:h?(s.right-s.left)/2:s.right,bottom:l?(s.bottom-s.top)/2:s.bottom,left:h?(s.right-s.left)/2:s.left},t.effects.createPlaceholder(o),\"show\"===e.mode&&(o.cssClip(n.clip),n.clip=s),o.animate(n,{queue:!1,duration:e.duration,easing:e.easing,complete:i})}),t.effects.define(\"drop\",\"hide\",function(e,i){var s,n=t(this),o=e.mode,a=\"show\"===o,r=e.direction||\"left\",h=\"up\"===r||\"down\"===r?\"top\":\"left\",l=\"up\"===r||\"left\"===r?\"-=\":\"+=\",c=\"+=\"===l?\"-=\":\"+=\",u={opacity:0};t.effects.createPlaceholder(n),s=e.distance||n[\"top\"===h?\"outerHeight\":\"outerWidth\"](!0)/2,u[h]=l+s,a&&(n.css(u),u[h]=c+s,u.opacity=1),n.animate(u,{queue:!1,duration:e.duration,easing:e.easing,complete:i})}),t.effects.define(\"explode\",\"hide\",function(e,i){function s(){b.push(this),b.length===u*d&&n()}function n(){p.css({visibility:\"visible\"}),t(b).remove(),i()}var o,a,r,h,l,c,u=e.pieces?Math.round(Math.sqrt(e.pieces)):3,d=u,p=t(this),f=e.mode,g=\"show\"===f,m=p.show().css(\"visibility\",\"hidden\").offset(),_=Math.ceil(p.outerWidth()/d),v=Math.ceil(p.outerHeight()/u),b=[];for(o=0;u>o;o++)for(h=m.top+o*v,c=o-(u-1)/2,a=0;d>a;a++)r=m.left+a*_,l=a-(d-1)/2,p.clone().appendTo(\"body\").wrap(\"<div></div>\").css({position:\"absolute\",visibility:\"visible\",left:-a*_,top:-o*v}).parent().addClass(\"ui-effects-explode\").css({position:\"absolute\",overflow:\"hidden\",width:_,height:v,left:r+(g?l*_:0),top:h+(g?c*v:0),opacity:g?0:1}).animate({left:r+(g?0:l*_),top:h+(g?0:c*v),opacity:g?1:0},e.duration||500,e.easing,s)}),t.effects.define(\"fade\",\"toggle\",function(e,i){var s=\"show\"===e.mode;t(this).css(\"opacity\",s?0:1).animate({opacity:s?1:0},{queue:!1,duration:e.duration,easing:e.easing,complete:i})}),t.effects.define(\"fold\",\"hide\",function(e,i){var s=t(this),n=e.mode,o=\"show\"===n,a=\"hide\"===n,r=e.size||15,h=/([0-9]+)%/.exec(r),l=!!e.horizFirst,c=l?[\"right\",\"bottom\"]:[\"bottom\",\"right\"],u=e.duration/2,d=t.effects.createPlaceholder(s),p=s.cssClip(),f={clip:t.extend({},p)},g={clip:t.extend({},p)},m=[p[c[0]],p[c[1]]],_=s.queue().length;h&&(r=parseInt(h[1],10)/100*m[a?0:1]),f.clip[c[0]]=r,g.clip[c[0]]=r,g.clip[c[1]]=0,o&&(s.cssClip(g.clip),d&&d.css(t.effects.clipToBox(g)),g.clip=p),s.queue(function(i){d&&d.animate(t.effects.clipToBox(f),u,e.easing).animate(t.effects.clipToBox(g),u,e.easing),i()}).animate(f,u,e.easing).animate(g,u,e.easing).queue(i),t.effects.unshift(s,_,4)}),t.effects.define(\"highlight\",\"show\",function(e,i){var s=t(this),n={backgroundColor:s.css(\"backgroundColor\")};\"hide\"===e.mode&&(n.opacity=0),t.effects.saveStyle(s),s.css({backgroundImage:\"none\",backgroundColor:e.color||\"#ffff99\"}).animate(n,{queue:!1,duration:e.duration,easing:e.easing,complete:i})}),t.effects.define(\"size\",function(e,i){var s,n,o,a=t(this),r=[\"fontSize\"],h=[\"borderTopWidth\",\"borderBottomWidth\",\"paddingTop\",\"paddingBottom\"],l=[\"borderLeftWidth\",\"borderRightWidth\",\"paddingLeft\",\"paddingRight\"],c=e.mode,u=\"effect\"!==c,d=e.scale||\"both\",p=e.origin||[\"middle\",\"center\"],f=a.css(\"position\"),g=a.position(),m=t.effects.scaledDimensions(a),_=e.from||m,v=e.to||t.effects.scaledDimensions(a,0);t.effects.createPlaceholder(a),\"show\"===c&&(o=_,_=v,v=o),n={from:{y:_.height/m.height,x:_.width/m.width},to:{y:v.height/m.height,x:v.width/m.width}},(\"box\"===d||\"both\"===d)&&(n.from.y!==n.to.y&&(_=t.effects.setTransition(a,h,n.from.y,_),v=t.effects.setTransition(a,h,n.to.y,v)),n.from.x!==n.to.x&&(_=t.effects.setTransition(a,l,n.from.x,_),v=t.effects.setTransition(a,l,n.to.x,v))),(\"content\"===d||\"both\"===d)&&n.from.y!==n.to.y&&(_=t.effects.setTransition(a,r,n.from.y,_),v=t.effects.setTransition(a,r,n.to.y,v)),p&&(s=t.effects.getBaseline(p,m),_.top=(m.outerHeight-_.outerHeight)*s.y+g.top,_.left=(m.outerWidth-_.outerWidth)*s.x+g.left,v.top=(m.outerHeight-v.outerHeight)*s.y+g.top,v.left=(m.outerWidth-v.outerWidth)*s.x+g.left),a.css(_),(\"content\"===d||\"both\"===d)&&(h=h.concat([\"marginTop\",\"marginBottom\"]).concat(r),l=l.concat([\"marginLeft\",\"marginRight\"]),a.find(\"*[width]\").each(function(){var i=t(this),s=t.effects.scaledDimensions(i),o={height:s.height*n.from.y,width:s.width*n.from.x,outerHeight:s.outerHeight*n.from.y,outerWidth:s.outerWidth*n.from.x},a={height:s.height*n.to.y,width:s.width*n.to.x,outerHeight:s.height*n.to.y,outerWidth:s.width*n.to.x};n.from.y!==n.to.y&&(o=t.effects.setTransition(i,h,n.from.y,o),a=t.effects.setTransition(i,h,n.to.y,a)),n.from.x!==n.to.x&&(o=t.effects.setTransition(i,l,n.from.x,o),a=t.effects.setTransition(i,l,n.to.x,a)),u&&t.effects.saveStyle(i),i.css(o),i.animate(a,e.duration,e.easing,function(){u&&t.effects.restoreStyle(i)})})),a.animate(v,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){var e=a.offset();0===v.opacity&&a.css(\"opacity\",_.opacity),u||(a.css(\"position\",\"static\"===f?\"relative\":f).offset(e),t.effects.saveStyle(a)),i()}})}),t.effects.define(\"scale\",function(e,i){var s=t(this),n=e.mode,o=parseInt(e.percent,10)||(0===parseInt(e.percent,10)?0:\"effect\"!==n?0:100),a=t.extend(!0,{from:t.effects.scaledDimensions(s),to:t.effects.scaledDimensions(s,o,e.direction||\"both\"),origin:e.origin||[\"middle\",\"center\"]},e);e.fade&&(a.from.opacity=1,a.to.opacity=0),t.effects.effect.size.call(this,a,i)}),t.effects.define(\"puff\",\"hide\",function(e,i){var s=t.extend(!0,{},e,{fade:!0,percent:parseInt(e.percent,10)||150});t.effects.effect.scale.call(this,s,i)}),t.effects.define(\"pulsate\",\"show\",function(e,i){var s=t(this),n=e.mode,o=\"show\"===n,a=\"hide\"===n,r=o||a,h=2*(e.times||5)+(r?1:0),l=e.duration/h,c=0,u=1,d=s.queue().length;for((o||!s.is(\":visible\"))&&(s.css(\"opacity\",0).show(),c=1);h>u;u++)s.animate({opacity:c},l,e.easing),c=1-c;s.animate({opacity:c},l,e.easing),s.queue(i),t.effects.unshift(s,d,h+1)}),t.effects.define(\"shake\",function(e,i){var s=1,n=t(this),o=e.direction||\"left\",a=e.distance||20,r=e.times||3,h=2*r+1,l=Math.round(e.duration/h),c=\"up\"===o||\"down\"===o?\"top\":\"left\",u=\"up\"===o||\"left\"===o,d={},p={},f={},g=n.queue().length;for(t.effects.createPlaceholder(n),d[c]=(u?\"-=\":\"+=\")+a,p[c]=(u?\"+=\":\"-=\")+2*a,f[c]=(u?\"-=\":\"+=\")+2*a,n.animate(d,l,e.easing);r>s;s++)n.animate(p,l,e.easing).animate(f,l,e.easing);n.animate(p,l,e.easing).animate(d,l/2,e.easing).queue(i),t.effects.unshift(n,g,h+1)}),t.effects.define(\"slide\",\"show\",function(e,i){var s,n,o=t(this),a={up:[\"bottom\",\"top\"],down:[\"top\",\"bottom\"],left:[\"right\",\"left\"],right:[\"left\",\"right\"]},r=e.mode,h=e.direction||\"left\",l=\"up\"===h||\"down\"===h?\"top\":\"left\",c=\"up\"===h||\"left\"===h,u=e.distance||o[\"top\"===l?\"outerHeight\":\"outerWidth\"](!0),d={};t.effects.createPlaceholder(o),s=o.cssClip(),n=o.position()[l],d[l]=(c?-1:1)*u+n,d.clip=o.cssClip(),d.clip[a[h][1]]=d.clip[a[h][0]],\"show\"===r&&(o.cssClip(d.clip),o.css(l,d[l]),d.clip=s,d[l]=n),o.animate(d,{queue:!1,duration:e.duration,easing:e.easing,complete:i})});var f;t.uiBackCompat!==!1&&(f=t.effects.define(\"transfer\",function(e,i){t(this).transfer(e,i)})),t.ui.focusable=function(i,s){var n,o,a,r,h,l=i.nodeName.toLowerCase();return\"area\"===l?(n=i.parentNode,o=n.name,i.href&&o&&\"map\"===n.nodeName.toLowerCase()?(a=t(\"img[usemap='#\"+o+\"']\"),a.length>0&&a.is(\":visible\")):!1):(/^(input|select|textarea|button|object)$/.test(l)?(r=!i.disabled,r&&(h=t(i).closest(\"fieldset\")[0],h&&(r=!h.disabled))):r=\"a\"===l?i.href||s:s,r&&t(i).is(\":visible\")&&e(t(i)))},t.extend(t.expr[\":\"],{focusable:function(e){return t.ui.focusable(e,null!=t.attr(e,\"tabindex\"))}}),t.ui.focusable,t.fn.form=function(){return\"string\"==typeof this[0].form?this.closest(\"form\"):t(this[0].form)},t.ui.formResetMixin={_formResetHandler:function(){var e=t(this);setTimeout(function(){var i=e.data(\"ui-form-reset-instances\");t.each(i,function(){this.refresh()})})},_bindFormResetHandler:function(){if(this.form=this.element.form(),this.form.length){var t=this.form.data(\"ui-form-reset-instances\")||[];t.length||this.form.on(\"reset.ui-form-reset\",this._formResetHandler),t.push(this),this.form.data(\"ui-form-reset-instances\",t)}},_unbindFormResetHandler:function(){if(this.form.length){var e=this.form.data(\"ui-form-reset-instances\");e.splice(t.inArray(this,e),1),e.length?this.form.data(\"ui-form-reset-instances\",e):this.form.removeData(\"ui-form-reset-instances\").off(\"reset.ui-form-reset\")}}},\"1.7\"===t.fn.jquery.substring(0,3)&&(t.each([\"Width\",\"Height\"],function(e,i){function s(e,i,s,o){return t.each(n,function(){i-=parseFloat(t.css(e,\"padding\"+this))||0,s&&(i-=parseFloat(t.css(e,\"border\"+this+\"Width\"))||0),o&&(i-=parseFloat(t.css(e,\"margin\"+this))||0)}),i}var n=\"Width\"===i?[\"Left\",\"Right\"]:[\"Top\",\"Bottom\"],o=i.toLowerCase(),a={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn[\"inner\"+i]=function(e){return void 0===e?a[\"inner\"+i].call(this):this.each(function(){t(this).css(o,s(this,e)+\"px\")})},t.fn[\"outer\"+i]=function(e,n){return\"number\"!=typeof e?a[\"outer\"+i].call(this,e):this.each(function(){t(this).css(o,s(this,e,!0,n)+\"px\")})}}),t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},t.ui.escapeSelector=function(){var t=/([!\"#$%&'()*+,.\\/:;<=>?@[\\]^`{|}~])/g;return function(e){return e.replace(t,\"\\\\$1\")}}(),t.fn.labels=function(){var e,i,s,n,o;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(n=this.eq(0).parents(\"label\"),s=this.attr(\"id\"),s&&(e=this.eq(0).parents().last(),o=e.add(e.length?e.siblings():this.siblings()),i=\"label[for='\"+t.ui.escapeSelector(s)+\"']\",n=n.add(o.find(i).addBack(i))),this.pushStack(n))},t.fn.scrollParent=function(e){var i=this.css(\"position\"),s=\"absolute\"===i,n=e?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var e=t(this);return s&&\"static\"===e.css(\"position\")?!1:n.test(e.css(\"overflow\")+e.css(\"overflow-y\")+e.css(\"overflow-x\"))}).eq(0);return\"fixed\"!==i&&o.length?o:t(this[0].ownerDocument||document)},t.extend(t.expr[\":\"],{tabbable:function(e){var i=t.attr(e,\"tabindex\"),s=null!=i;return(!s||i>=0)&&t.ui.focusable(e,s)}}),t.fn.extend({uniqueId:function(){var t=0;return function(){return this.each(function(){this.id||(this.id=\"ui-id-\"+ ++t)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\\d+$/.test(this.id)&&t(this).removeAttr(\"id\")})}}),t.widget(\"ui.accordion\",{version:\"1.12.1\",options:{active:0,animate:{},classes:{\"ui-accordion-header\":\"ui-corner-top\",\"ui-accordion-header-collapsed\":\"ui-corner-all\",\"ui-accordion-content\":\"ui-corner-bottom\"},collapsible:!1,event:\"click\",header:\"> li > :first-child, > :not(li):even\",heightStyle:\"auto\",icons:{activeHeader:\"ui-icon-triangle-1-s\",header:\"ui-icon-triangle-1-e\"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:\"hide\",borderBottomWidth:\"hide\",paddingTop:\"hide\",paddingBottom:\"hide\",height:\"hide\"},showProps:{borderTopWidth:\"show\",borderBottomWidth:\"show\",paddingTop:\"show\",paddingBottom:\"show\",height:\"show\"},_create:function(){var e=this.options;this.prevShow=this.prevHide=t(),this._addClass(\"ui-accordion\",\"ui-widget ui-helper-reset\"),this.element.attr(\"role\",\"tablist\"),e.collapsible||e.active!==!1&&null!=e.active||(e.active=0),this._processPanels(),0>e.active&&(e.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():t()}},_createIcons:function(){var e,i,s=this.options.icons;s&&(e=t(\"<span>\"),this._addClass(e,\"ui-accordion-header-icon\",\"ui-icon \"+s.header),e.prependTo(this.headers),i=this.active.children(\".ui-accordion-header-icon\"),this._removeClass(i,s.header)._addClass(i,null,s.activeHeader)._addClass(this.headers,\"ui-accordion-icons\"))},_destroyIcons:function(){this._removeClass(this.headers,\"ui-accordion-icons\"),this.headers.children(\".ui-accordion-header-icon\").remove()},_destroy:function(){var t;this.element.removeAttr(\"role\"),this.headers.removeAttr(\"role aria-expanded aria-selected aria-controls tabIndex\").removeUniqueId(),this._destroyIcons(),t=this.headers.next().css(\"display\",\"\").removeAttr(\"role aria-hidden aria-labelledby\").removeUniqueId(),\"content\"!==this.options.heightStyle&&t.css(\"height\",\"\")},_setOption:function(t,e){return\"active\"===t?(this._activate(e),void 0):(\"event\"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),\"collapsible\"!==t||e||this.options.active!==!1||this._activate(0),\"icons\"===t&&(this._destroyIcons(),e&&this._createIcons()),void 0)},_setOptionDisabled:function(t){this._super(t),this.element.attr(\"aria-disabled\",t),this._toggleClass(null,\"ui-state-disabled\",!!t),this._toggleClass(this.headers.add(this.headers.next()),null,\"ui-state-disabled\",!!t)},_keydown:function(e){if(!e.altKey&&!e.ctrlKey){var i=t.ui.keyCode,s=this.headers.length,n=this.headers.index(e.target),o=!1;switch(e.keyCode){case i.RIGHT:case i.DOWN:o=this.headers[(n+1)%s];break;case i.LEFT:case i.UP:o=this.headers[(n-1+s)%s];break;case i.SPACE:case i.ENTER:this._eventHandler(e);break;case i.HOME:o=this.headers[0];break;case i.END:o=this.headers[s-1]}o&&(t(e.target).attr(\"tabIndex\",-1),t(o).attr(\"tabIndex\",0),t(o).trigger(\"focus\"),e.preventDefault())}},_panelKeyDown:function(e){e.keyCode===t.ui.keyCode.UP&&e.ctrlKey&&t(e.currentTarget).prev().trigger(\"focus\")},refresh:function(){var e=this.options;this._processPanels(),e.active===!1&&e.collapsible===!0||!this.headers.length?(e.active=!1,this.active=t()):e.active===!1?this._activate(0):this.active.length&&!t.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(\".ui-state-disabled\").length?(e.active=!1,this.active=t()):this._activate(Math.max(0,e.active-1)):e.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var t=this.headers,e=this.panels;this.headers=this.element.find(this.options.header),this._addClass(this.headers,\"ui-accordion-header ui-accordion-header-collapsed\",\"ui-state-default\"),this.panels=this.headers.next().filter(\":not(.ui-accordion-content-active)\").hide(),this._addClass(this.panels,\"ui-accordion-content\",\"ui-helper-reset ui-widget-content\"),e&&(this._off(t.not(this.headers)),this._off(e.not(this.panels)))},_refresh:function(){var e,i=this.options,s=i.heightStyle,n=this.element.parent();this.active=this._findActive(i.active),this._addClass(this.active,\"ui-accordion-header-active\",\"ui-state-active\")._removeClass(this.active,\"ui-accordion-header-collapsed\"),this._addClass(this.active.next(),\"ui-accordion-content-active\"),this.active.next().show(),this.headers.attr(\"role\",\"tab\").each(function(){var e=t(this),i=e.uniqueId().attr(\"id\"),s=e.next(),n=s.uniqueId().attr(\"id\");e.attr(\"aria-controls\",n),s.attr(\"aria-labelledby\",i)}).next().attr(\"role\",\"tabpanel\"),this.headers.not(this.active).attr({\"aria-selected\":\"false\",\"aria-expanded\":\"false\",tabIndex:-1}).next().attr({\"aria-hidden\":\"true\"}).hide(),this.active.length?this.active.attr({\"aria-selected\":\"true\",\"aria-expanded\":\"true\",tabIndex:0}).next().attr({\"aria-hidden\":\"false\"}):this.headers.eq(0).attr(\"tabIndex\",0),this._createIcons(),this._setupEvents(i.event),\"fill\"===s?(e=n.height(),this.element.siblings(\":visible\").each(function(){var i=t(this),s=i.css(\"position\");\"absolute\"!==s&&\"fixed\"!==s&&(e-=i.outerHeight(!0))}),this.headers.each(function(){e-=t(this).outerHeight(!0)}),this.headers.next().each(function(){t(this).height(Math.max(0,e-t(this).innerHeight()+t(this).height()))}).css(\"overflow\",\"auto\")):\"auto\"===s&&(e=0,this.headers.next().each(function(){var i=t(this).is(\":visible\");i||t(this).show(),e=Math.max(e,t(this).css(\"height\",\"\").height()),i||t(this).hide()}).height(e))},_activate:function(e){var i=this._findActive(e)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return\"number\"==typeof e?this.headers.eq(e):t()},_setupEvents:function(e){var i={keydown:\"_keydown\"};e&&t.each(e.split(\" \"),function(t,e){i[e]=\"_eventHandler\"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:\"_panelKeyDown\"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(e){var i,s,n=this.options,o=this.active,a=t(e.currentTarget),r=a[0]===o[0],h=r&&n.collapsible,l=h?t():a.next(),c=o.next(),u={oldHeader:o,oldPanel:c,newHeader:h?t():a,newPanel:l};e.preventDefault(),r&&!n.collapsible||this._trigger(\"beforeActivate\",e,u)===!1||(n.active=h?!1:this.headers.index(a),this.active=r?t():a,this._toggle(u),this._removeClass(o,\"ui-accordion-header-active\",\"ui-state-active\"),n.icons&&(i=o.children(\".ui-accordion-header-icon\"),this._removeClass(i,null,n.icons.activeHeader)._addClass(i,null,n.icons.header)),r||(this._removeClass(a,\"ui-accordion-header-collapsed\")._addClass(a,\"ui-accordion-header-active\",\"ui-state-active\"),n.icons&&(s=a.children(\".ui-accordion-header-icon\"),this._removeClass(s,null,n.icons.header)._addClass(s,null,n.icons.activeHeader)),this._addClass(a.next(),\"ui-accordion-content-active\")))},_toggle:function(e){var i=e.newPanel,s=this.prevShow.length?this.prevShow:e.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=s,this.options.animate?this._animate(i,s,e):(s.hide(),i.show(),this._toggleComplete(e)),s.attr({\"aria-hidden\":\"true\"}),s.prev().attr({\"aria-selected\":\"false\",\"aria-expanded\":\"false\"}),i.length&&s.length?s.prev().attr({tabIndex:-1,\"aria-expanded\":\"false\"}):i.length&&this.headers.filter(function(){return 0===parseInt(t(this).attr(\"tabIndex\"),10)}).attr(\"tabIndex\",-1),i.attr(\"aria-hidden\",\"false\").prev().attr({\"aria-selected\":\"true\",\"aria-expanded\":\"true\",tabIndex:0})},_animate:function(t,e,i){var s,n,o,a=this,r=0,h=t.css(\"box-sizing\"),l=t.length&&(!e.length||t.index()<e.index()),c=this.options.animate||{},u=l&&c.down||c,d=function(){a._toggleComplete(i)};return\"number\"==typeof u&&(o=u),\"string\"==typeof u&&(n=u),n=n||u.easing||c.easing,o=o||u.duration||c.duration,e.length?t.length?(s=t.show().outerHeight(),e.animate(this.hideProps,{duration:o,easing:n,step:function(t,e){e.now=Math.round(t)}}),t.hide().animate(this.showProps,{duration:o,easing:n,complete:d,step:function(t,i){i.now=Math.round(t),\"height\"!==i.prop?\"content-box\"===h&&(r+=i.now):\"content\"!==a.options.heightStyle&&(i.now=Math.round(s-e.outerHeight()-r),r=0)}}),void 0):e.animate(this.hideProps,o,n,d):t.animate(this.showProps,o,n,d)},_toggleComplete:function(t){var e=t.oldPanel,i=e.prev();this._removeClass(e,\"ui-accordion-content-active\"),this._removeClass(i,\"ui-accordion-header-active\")._addClass(i,\"ui-accordion-header-collapsed\"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger(\"activate\",null,t)}}),t.ui.safeActiveElement=function(t){var e;try{e=t.activeElement}catch(i){e=t.body}return e||(e=t.body),e.nodeName||(e=t.body),e},t.widget(\"ui.menu\",{version:\"1.12.1\",defaultElement:\"<ul>\",delay:300,options:{icons:{submenu:\"ui-icon-caret-1-e\"},items:\"> *\",menus:\"ul\",position:{my:\"left top\",at:\"right top\"},role:\"menu\",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass(\"ui-menu\",\"ui-widget ui-widget-content\"),this._on({\"mousedown .ui-menu-item\":function(t){t.preventDefault()},\"click .ui-menu-item\":function(e){var i=t(e.target),s=t(t.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&i.not(\".ui-state-disabled\").length&&(this.select(e),e.isPropagationStopped()||(this.mouseHandled=!0),i.has(\".ui-menu\").length?this.expand(e):!this.element.is(\":focus\")&&s.closest(\".ui-menu\").length&&(this.element.trigger(\"focus\",[!0]),this.active&&1===this.active.parents(\".ui-menu\").length&&clearTimeout(this.timer)))},\"mouseenter .ui-menu-item\":function(e){if(!this.previousFilter){var i=t(e.target).closest(\".ui-menu-item\"),s=t(e.currentTarget);i[0]===s[0]&&(this._removeClass(s.siblings().children(\".ui-state-active\"),null,\"ui-state-active\"),this.focus(e,s))}},mouseleave:\"collapseAll\",\"mouseleave .ui-menu\":\"collapseAll\",focus:function(t,e){var i=this.active||this.element.find(this.options.items).eq(0);e||this.focus(t,i)},blur:function(e){this._delay(function(){var i=!t.contains(this.element[0],t.ui.safeActiveElement(this.document[0]));i&&this.collapseAll(e)})},keydown:\"_keydown\"}),this.refresh(),this._on(this.document,{click:function(t){this._closeOnDocumentClick(t)&&this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){var e=this.element.find(\".ui-menu-item\").removeAttr(\"role aria-disabled\"),i=e.children(\".ui-menu-item-wrapper\").removeUniqueId().removeAttr(\"tabIndex role aria-haspopup\");this.element.removeAttr(\"aria-activedescendant\").find(\".ui-menu\").addBack().removeAttr(\"role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex\").removeUniqueId().show(),i.children().each(function(){var e=t(this);e.data(\"ui-menu-submenu-caret\")&&e.remove()})},_keydown:function(e){var i,s,n,o,a=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move(\"first\",\"first\",e);break;case t.ui.keyCode.END:this._move(\"last\",\"last\",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(\".ui-state-disabled\")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:a=!1,s=this.previousFilter||\"\",o=!1,n=e.keyCode>=96&&105>=e.keyCode?\"\"+(e.keyCode-96):String.fromCharCode(e.keyCode),clearTimeout(this.filterTimer),n===s?o=!0:n=s+n,i=this._filterMenuItems(n),i=o&&-1!==i.index(this.active.next())?this.active.nextAll(\".ui-menu-item\"):i,i.length||(n=String.fromCharCode(e.keyCode),i=this._filterMenuItems(n)),i.length?(this.focus(e,i),this.previousFilter=n,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}a&&e.preventDefault()},_activate:function(t){this.active&&!this.active.is(\".ui-state-disabled\")&&(this.active.children(\"[aria-haspopup='true']\").length?this.expand(t):this.select(t))},refresh:function(){var e,i,s,n,o,a=this,r=this.options.icons.submenu,h=this.element.find(this.options.menus);this._toggleClass(\"ui-menu-icons\",null,!!this.element.find(\".ui-icon\").length),s=h.filter(\":not(.ui-menu)\").hide().attr({role:this.options.role,\"aria-hidden\":\"true\",\"aria-expanded\":\"false\"}).each(function(){var e=t(this),i=e.prev(),s=t(\"<span>\").data(\"ui-menu-submenu-caret\",!0);a._addClass(s,\"ui-menu-icon\",\"ui-icon \"+r),i.attr(\"aria-haspopup\",\"true\").prepend(s),e.attr(\"aria-labelledby\",i.attr(\"id\"))}),this._addClass(s,\"ui-menu\",\"ui-widget ui-widget-content ui-front\"),e=h.add(this.element),i=e.find(this.options.items),i.not(\".ui-menu-item\").each(function(){var e=t(this);a._isDivider(e)&&a._addClass(e,\"ui-menu-divider\",\"ui-widget-content\")}),n=i.not(\".ui-menu-item, .ui-menu-divider\"),o=n.children().not(\".ui-menu\").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(n,\"ui-menu-item\")._addClass(o,\"ui-menu-item-wrapper\"),i.filter(\".ui-state-disabled\").attr(\"aria-disabled\",\"true\"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:\"menuitem\",listbox:\"option\"}[this.options.role]},_setOption:function(t,e){if(\"icons\"===t){var i=this.element.find(\".ui-menu-icon\");this._removeClass(i,null,this.options.icons.submenu)._addClass(i,null,e.submenu)}this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this.element.attr(\"aria-disabled\",t+\"\"),this._toggleClass(null,\"ui-state-disabled\",!!t)},focus:function(t,e){var i,s,n;this.blur(t,t&&\"focus\"===t.type),this._scrollIntoView(e),this.active=e.first(),s=this.active.children(\".ui-menu-item-wrapper\"),this._addClass(s,null,\"ui-state-active\"),this.options.role&&this.element.attr(\"aria-activedescendant\",s.attr(\"id\")),n=this.active.parent().closest(\".ui-menu-item\").children(\".ui-menu-item-wrapper\"),this._addClass(n,null,\"ui-state-active\"),t&&\"keydown\"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=e.children(\".ui-menu\"),i.length&&t&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger(\"focus\",t,{item:e})},_scrollIntoView:function(e){var i,s,n,o,a,r;this._hasScroll()&&(i=parseFloat(t.css(this.activeMenu[0],\"borderTopWidth\"))||0,s=parseFloat(t.css(this.activeMenu[0],\"paddingTop\"))||0,n=e.offset().top-this.activeMenu.offset().top-i-s,o=this.activeMenu.scrollTop(),a=this.activeMenu.height(),r=e.outerHeight(),0>n?this.activeMenu.scrollTop(o+n):n+r>a&&this.activeMenu.scrollTop(o+n-a+r))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(\".ui-menu-item-wrapper\"),null,\"ui-state-active\"),this._trigger(\"blur\",t,{item:this.active}),this.active=null)},_startOpening:function(t){clearTimeout(this.timer),\"true\"===t.attr(\"aria-hidden\")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var i=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(\".ui-menu\").not(e.parents(\".ui-menu\")).hide().attr(\"aria-hidden\",\"true\"),e.show().removeAttr(\"aria-hidden\").attr(\"aria-expanded\",\"true\").position(i)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay(function(){var s=i?this.element:t(e&&e.target).closest(this.element.find(\".ui-menu\"));s.length||(s=this.element),this._close(s),this.blur(e),this._removeClass(s.find(\".ui-state-active\"),null,\"ui-state-active\"),this.activeMenu=s},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(\".ui-menu\").hide().attr(\"aria-hidden\",\"true\").attr(\"aria-expanded\",\"false\")},_closeOnDocumentClick:function(e){return!t(e.target).closest(\".ui-menu\").length},_isDivider:function(t){return!/[^\\-\\u2014\\u2013\\s]/.test(t.text())},collapse:function(t){var e=this.active&&this.active.parent().closest(\".ui-menu-item\",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(\".ui-menu \").find(this.options.items).first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move(\"next\",\"first\",t)},previous:function(t){this._move(\"prev\",\"last\",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(\".ui-menu-item\").length},isLastItem:function(){return this.active&&!this.active.nextAll(\".ui-menu-item\").length},_move:function(t,e,i){var s;this.active&&(s=\"first\"===t||\"last\"===t?this.active[\"first\"===t?\"prevAll\":\"nextAll\"](\".ui-menu-item\").eq(-1):this.active[t+\"All\"](\".ui-menu-item\").eq(0)),s&&s.length&&this.active||(s=this.activeMenu.find(this.options.items)[e]()),this.focus(i,s)},nextPage:function(e){var i,s,n;return this.active?(this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.nextAll(\".ui-menu-item\").each(function(){return i=t(this),0>i.offset().top-s-n}),this.focus(e,i)):this.focus(e,this.activeMenu.find(this.options.items)[this.active?\"last\":\"first\"]())),void 0):(this.next(e),void 0)},previousPage:function(e){var i,s,n;return this.active?(this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.prevAll(\".ui-menu-item\").each(function(){return i=t(this),i.offset().top-s+n>0}),this.focus(e,i)):this.focus(e,this.activeMenu.find(this.options.items).first())),void 0):(this.next(e),void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop(\"scrollHeight\")},select:function(e){this.active=this.active||t(e.target).closest(\".ui-menu-item\");var i={item:this.active};this.active.has(\".ui-menu\").length||this.collapseAll(e,!0),this._trigger(\"select\",e,i)},_filterMenuItems:function(e){var i=e.replace(/[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g,\"\\\\$&\"),s=RegExp(\"^\"+i,\"i\");return this.activeMenu.find(this.options.items).filter(\".ui-menu-item\").filter(function(){return s.test(t.trim(t(this).children(\".ui-menu-item-wrapper\").text()))})}}),t.widget(\"ui.autocomplete\",{version:\"1.12.1\",defaultElement:\"<input>\",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:\"left top\",at:\"left bottom\",collision:\"none\"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var e,i,s,n=this.element[0].nodeName.toLowerCase(),o=\"textarea\"===n,a=\"input\"===n;\nthis.isMultiLine=o||!a&&this._isContentEditable(this.element),this.valueMethod=this.element[o||a?\"val\":\"text\"],this.isNewMenu=!0,this._addClass(\"ui-autocomplete-input\"),this.element.attr(\"autocomplete\",\"off\"),this._on(this.element,{keydown:function(n){if(this.element.prop(\"readOnly\"))return e=!0,s=!0,i=!0,void 0;e=!1,s=!1,i=!1;var o=t.ui.keyCode;switch(n.keyCode){case o.PAGE_UP:e=!0,this._move(\"previousPage\",n);break;case o.PAGE_DOWN:e=!0,this._move(\"nextPage\",n);break;case o.UP:e=!0,this._keyEvent(\"previous\",n);break;case o.DOWN:e=!0,this._keyEvent(\"next\",n);break;case o.ENTER:this.menu.active&&(e=!0,n.preventDefault(),this.menu.select(n));break;case o.TAB:this.menu.active&&this.menu.select(n);break;case o.ESCAPE:this.menu.element.is(\":visible\")&&(this.isMultiLine||this._value(this.term),this.close(n),n.preventDefault());break;default:i=!0,this._searchTimeout(n)}},keypress:function(s){if(e)return e=!1,(!this.isMultiLine||this.menu.element.is(\":visible\"))&&s.preventDefault(),void 0;if(!i){var n=t.ui.keyCode;switch(s.keyCode){case n.PAGE_UP:this._move(\"previousPage\",s);break;case n.PAGE_DOWN:this._move(\"nextPage\",s);break;case n.UP:this._keyEvent(\"previous\",s);break;case n.DOWN:this._keyEvent(\"next\",s)}}},input:function(t){return s?(s=!1,t.preventDefault(),void 0):(this._searchTimeout(t),void 0)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){return this.cancelBlur?(delete this.cancelBlur,void 0):(clearTimeout(this.searching),this.close(t),this._change(t),void 0)}}),this._initSource(),this.menu=t(\"<ul>\").appendTo(this._appendTo()).menu({role:null}).hide().menu(\"instance\"),this._addClass(this.menu.element,\"ui-autocomplete\",\"ui-front\"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,this.element[0]!==t.ui.safeActiveElement(this.document[0])&&this.element.trigger(\"focus\")})},menufocus:function(e,i){var s,n;return this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type))?(this.menu.blur(),this.document.one(\"mousemove\",function(){t(e.target).trigger(e.originalEvent)}),void 0):(n=i.item.data(\"ui-autocomplete-item\"),!1!==this._trigger(\"focus\",e,{item:n})&&e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(n.value),s=i.item.attr(\"aria-label\")||n.value,s&&t.trim(s).length&&(this.liveRegion.children().hide(),t(\"<div>\").text(s).appendTo(this.liveRegion)),void 0)},menuselect:function(e,i){var s=i.item.data(\"ui-autocomplete-item\"),n=this.previous;this.element[0]!==t.ui.safeActiveElement(this.document[0])&&(this.element.trigger(\"focus\"),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=s})),!1!==this._trigger(\"select\",e,{item:s})&&this._value(s.value),this.term=this._value(),this.close(e),this.selectedItem=s}}),this.liveRegion=t(\"<div>\",{role:\"status\",\"aria-live\":\"assertive\",\"aria-relevant\":\"additions\"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,\"ui-helper-hidden-accessible\"),this._on(this.window,{beforeunload:function(){this.element.removeAttr(\"autocomplete\")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr(\"autocomplete\"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),\"source\"===t&&this._initSource(),\"appendTo\"===t&&this.menu.element.appendTo(this._appendTo()),\"disabled\"===t&&e&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(e){var i=this.menu.element[0];return e.target===this.element[0]||e.target===i||t.contains(i,e.target)},_closeOnClickOutside:function(t){this._isEventTargetInWidget(t)||this.close()},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e&&e[0]||(e=this.element.closest(\".ui-front, dialog\")),e.length||(e=this.document[0].body),e},_initSource:function(){var e,i,s=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(i,s){s(t.ui.autocomplete.filter(e,i.term))}):\"string\"==typeof this.options.source?(i=this.options.source,this.source=function(e,n){s.xhr&&s.xhr.abort(),s.xhr=t.ajax({url:i,data:e,dataType:\"json\",success:function(t){n(t)},error:function(){n([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay(function(){var e=this.term===this._value(),i=this.menu.element.is(\":visible\"),s=t.altKey||t.ctrlKey||t.metaKey||t.shiftKey;(!e||e&&!i&&!s)&&(this.selectedItem=null,this.search(null,t))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):this._trigger(\"search\",e)!==!1?this._search(t):void 0},_search:function(t){this.pending++,this._addClass(\"ui-autocomplete-loading\"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var e=++this.requestIndex;return t.proxy(function(t){e===this.requestIndex&&this.__response(t),this.pending--,this.pending||this._removeClass(\"ui-autocomplete-loading\")},this)},__response:function(t){t&&(t=this._normalize(t)),this._trigger(\"response\",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger(\"open\")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this._off(this.document,\"mousedown\"),this.menu.element.is(\":visible\")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger(\"close\",t))},_change:function(t){this.previous!==this._value()&&this._trigger(\"change\",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,function(e){return\"string\"==typeof e?{label:e,value:e}:t.extend({},e,{label:e.label||e.value,value:e.value||e.label})})},_suggest:function(e){var i=this.menu.element.empty();this._renderMenu(i,e),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:\"_closeOnClickOutside\"})},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width(\"\").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,i){var s=this;t.each(i,function(t,i){s._renderItemData(e,i)})},_renderItemData:function(t,e){return this._renderItem(t,e).data(\"ui-autocomplete-item\",e)},_renderItem:function(e,i){return t(\"<li>\").append(t(\"<div>\").text(i.label)).appendTo(e)},_move:function(t,e){return this.menu.element.is(\":visible\")?this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this.isMultiLine||this._value(this.term),this.menu.blur(),void 0):(this.menu[t](e),void 0):(this.search(null,e),void 0)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){(!this.isMultiLine||this.menu.element.is(\":visible\"))&&(this._move(t,e),e.preventDefault())},_isContentEditable:function(t){if(!t.length)return!1;var e=t.prop(\"contentEditable\");return\"inherit\"===e?this._isContentEditable(t.parent()):\"true\"===e}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g,\"\\\\$&\")},filter:function(e,i){var s=RegExp(t.ui.autocomplete.escapeRegex(i),\"i\");return t.grep(e,function(t){return s.test(t.label||t.value||t)})}}),t.widget(\"ui.autocomplete\",t.ui.autocomplete,{options:{messages:{noResults:\"No search results.\",results:function(t){return t+(t>1?\" results are\":\" result is\")+\" available, use up and down arrow keys to navigate.\"}}},__response:function(e){var i;this._superApply(arguments),this.options.disabled||this.cancelSearch||(i=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.children().hide(),t(\"<div>\").text(i).appendTo(this.liveRegion))}}),t.ui.autocomplete;var g=/ui-corner-([a-z]){2,6}/g;t.widget(\"ui.controlgroup\",{version:\"1.12.1\",defaultElement:\"<div>\",options:{direction:\"horizontal\",disabled:null,onlyVisible:!0,items:{button:\"input[type=button], input[type=submit], input[type=reset], button, a\",controlgroupLabel:\".ui-controlgroup-label\",checkboxradio:\"input[type='checkbox'], input[type='radio']\",selectmenu:\"select\",spinner:\".ui-spinner-input\"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr(\"role\",\"toolbar\"),this.refresh()},_destroy:function(){this._callChildMethod(\"destroy\"),this.childWidgets.removeData(\"ui-controlgroup-data\"),this.element.removeAttr(\"role\"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(\".ui-controlgroup-label-contents\").contents().unwrap()},_initWidgets:function(){var e=this,i=[];t.each(this.options.items,function(s,n){var o,a={};return n?\"controlgroupLabel\"===s?(o=e.element.find(n),o.each(function(){var e=t(this);e.children(\".ui-controlgroup-label-contents\").length||e.contents().wrapAll(\"<span class='ui-controlgroup-label-contents'></span>\")}),e._addClass(o,null,\"ui-widget ui-widget-content ui-state-default\"),i=i.concat(o.get()),void 0):(t.fn[s]&&(a=e[\"_\"+s+\"Options\"]?e[\"_\"+s+\"Options\"](\"middle\"):{classes:{}},e.element.find(n).each(function(){var n=t(this),o=n[s](\"instance\"),r=t.widget.extend({},a);if(\"button\"!==s||!n.parent(\".ui-spinner\").length){o||(o=n[s]()[s](\"instance\")),o&&(r.classes=e._resolveClassesValues(r.classes,o)),n[s](r);var h=n[s](\"widget\");t.data(h[0],\"ui-controlgroup-data\",o?o:n[s](\"instance\")),i.push(h[0])}})),void 0):void 0}),this.childWidgets=t(t.unique(i)),this._addClass(this.childWidgets,\"ui-controlgroup-item\")},_callChildMethod:function(e){this.childWidgets.each(function(){var i=t(this),s=i.data(\"ui-controlgroup-data\");s&&s[e]&&s[e]()})},_updateCornerClass:function(t,e){var i=\"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all\",s=this._buildSimpleOptions(e,\"label\").classes.label;this._removeClass(t,null,i),this._addClass(t,null,s)},_buildSimpleOptions:function(t,e){var i=\"vertical\"===this.options.direction,s={classes:{}};return s.classes[e]={middle:\"\",first:\"ui-corner-\"+(i?\"top\":\"left\"),last:\"ui-corner-\"+(i?\"bottom\":\"right\"),only:\"ui-corner-all\"}[t],s},_spinnerOptions:function(t){var e=this._buildSimpleOptions(t,\"ui-spinner\");return e.classes[\"ui-spinner-up\"]=\"\",e.classes[\"ui-spinner-down\"]=\"\",e},_buttonOptions:function(t){return this._buildSimpleOptions(t,\"ui-button\")},_checkboxradioOptions:function(t){return this._buildSimpleOptions(t,\"ui-checkboxradio-label\")},_selectmenuOptions:function(t){var e=\"vertical\"===this.options.direction;return{width:e?\"auto\":!1,classes:{middle:{\"ui-selectmenu-button-open\":\"\",\"ui-selectmenu-button-closed\":\"\"},first:{\"ui-selectmenu-button-open\":\"ui-corner-\"+(e?\"top\":\"tl\"),\"ui-selectmenu-button-closed\":\"ui-corner-\"+(e?\"top\":\"left\")},last:{\"ui-selectmenu-button-open\":e?\"\":\"ui-corner-tr\",\"ui-selectmenu-button-closed\":\"ui-corner-\"+(e?\"bottom\":\"right\")},only:{\"ui-selectmenu-button-open\":\"ui-corner-top\",\"ui-selectmenu-button-closed\":\"ui-corner-all\"}}[t]}},_resolveClassesValues:function(e,i){var s={};return t.each(e,function(n){var o=i.options.classes[n]||\"\";o=t.trim(o.replace(g,\"\")),s[n]=(o+\" \"+e[n]).replace(/\\s+/g,\" \")}),s},_setOption:function(t,e){return\"direction\"===t&&this._removeClass(\"ui-controlgroup-\"+this.options.direction),this._super(t,e),\"disabled\"===t?(this._callChildMethod(e?\"disable\":\"enable\"),void 0):(this.refresh(),void 0)},refresh:function(){var e,i=this;this._addClass(\"ui-controlgroup ui-controlgroup-\"+this.options.direction),\"horizontal\"===this.options.direction&&this._addClass(null,\"ui-helper-clearfix\"),this._initWidgets(),e=this.childWidgets,this.options.onlyVisible&&(e=e.filter(\":visible\")),e.length&&(t.each([\"first\",\"last\"],function(t,s){var n=e[s]().data(\"ui-controlgroup-data\");if(n&&i[\"_\"+n.widgetName+\"Options\"]){var o=i[\"_\"+n.widgetName+\"Options\"](1===e.length?\"only\":s);o.classes=i._resolveClassesValues(o.classes,n),n.element[n.widgetName](o)}else i._updateCornerClass(e[s](),s)}),this._callChildMethod(\"refresh\"))}}),t.widget(\"ui.checkboxradio\",[t.ui.formResetMixin,{version:\"1.12.1\",options:{disabled:null,label:null,icon:!0,classes:{\"ui-checkboxradio-label\":\"ui-corner-all\",\"ui-checkboxradio-icon\":\"ui-corner-all\"}},_getCreateOptions:function(){var e,i,s=this,n=this._super()||{};return this._readType(),i=this.element.labels(),this.label=t(i[i.length-1]),this.label.length||t.error(\"No label found for checkboxradio widget\"),this.originalLabel=\"\",this.label.contents().not(this.element[0]).each(function(){s.originalLabel+=3===this.nodeType?t(this).text():this.outerHTML}),this.originalLabel&&(n.label=this.originalLabel),e=this.element[0].disabled,null!=e&&(n.disabled=e),n},_create:function(){var t=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption(\"disabled\",this.options.disabled),this._addClass(\"ui-checkboxradio\",\"ui-helper-hidden-accessible\"),this._addClass(this.label,\"ui-checkboxradio-label\",\"ui-button ui-widget\"),\"radio\"===this.type&&this._addClass(this.label,\"ui-checkboxradio-radio-label\"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),t&&(this._addClass(this.label,\"ui-checkboxradio-checked\",\"ui-state-active\"),this.icon&&this._addClass(this.icon,null,\"ui-state-hover\")),this._on({change:\"_toggleClasses\",focus:function(){this._addClass(this.label,null,\"ui-state-focus ui-visual-focus\")},blur:function(){this._removeClass(this.label,null,\"ui-state-focus ui-visual-focus\")}})},_readType:function(){var e=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,\"input\"===e&&/radio|checkbox/.test(this.type)||t.error(\"Can't create checkboxradio on element.nodeName=\"+e+\" and element.type=\"+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var e,i=this.element[0].name,s=\"input[name='\"+t.ui.escapeSelector(i)+\"']\";return i?(e=this.form.length?t(this.form[0].elements).filter(s):t(s).filter(function(){return 0===t(this).form().length}),e.not(this.element)):t([])},_toggleClasses:function(){var e=this.element[0].checked;this._toggleClass(this.label,\"ui-checkboxradio-checked\",\"ui-state-active\",e),this.options.icon&&\"checkbox\"===this.type&&this._toggleClass(this.icon,null,\"ui-icon-check ui-state-checked\",e)._toggleClass(this.icon,null,\"ui-icon-blank\",!e),\"radio\"===this.type&&this._getRadioGroup().each(function(){var e=t(this).checkboxradio(\"instance\");e&&e._removeClass(e.label,\"ui-checkboxradio-checked\",\"ui-state-active\")})},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(t,e){return\"label\"!==t||e?(this._super(t,e),\"disabled\"===t?(this._toggleClass(this.label,null,\"ui-state-disabled\",e),this.element[0].disabled=e,void 0):(this.refresh(),void 0)):void 0},_updateIcon:function(e){var i=\"ui-icon ui-icon-background \";this.options.icon?(this.icon||(this.icon=t(\"<span>\"),this.iconSpace=t(\"<span> </span>\"),this._addClass(this.iconSpace,\"ui-checkboxradio-icon-space\")),\"checkbox\"===this.type?(i+=e?\"ui-icon-check ui-state-checked\":\"ui-icon-blank\",this._removeClass(this.icon,null,e?\"ui-icon-blank\":\"ui-icon-check\")):i+=\"ui-icon-blank\",this._addClass(this.icon,\"ui-checkboxradio-icon\",i),e||this._removeClass(this.icon,null,\"ui-icon-check ui-state-checked\"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var t=this.label.contents().not(this.element[0]);this.icon&&(t=t.not(this.icon[0])),this.iconSpace&&(t=t.not(this.iconSpace[0])),t.remove(),this.label.append(this.options.label)},refresh:function(){var t=this.element[0].checked,e=this.element[0].disabled;this._updateIcon(t),this._toggleClass(this.label,\"ui-checkboxradio-checked\",\"ui-state-active\",t),null!==this.options.label&&this._updateLabel(),e!==this.options.disabled&&this._setOptions({disabled:e})}}]),t.ui.checkboxradio,t.widget(\"ui.button\",{version:\"1.12.1\",defaultElement:\"<button>\",options:{classes:{\"ui-button\":\"ui-corner-all\"},disabled:null,icon:null,iconPosition:\"beginning\",label:null,showLabel:!0},_getCreateOptions:function(){var t,e=this._super()||{};return this.isInput=this.element.is(\"input\"),t=this.element[0].disabled,null!=t&&(e.disabled=t),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(e.label=this.originalLabel),e},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr(\"title\"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass(\"ui-button\",\"ui-widget\"),this._setOption(\"disabled\",this.options.disabled),this._enhance(),this.element.is(\"a\")&&this._on({keyup:function(e){e.keyCode===t.ui.keyCode.SPACE&&(e.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger(\"click\"))}})},_enhance:function(){this.element.is(\"button\")||this.element.attr(\"role\",\"button\"),this.options.icon&&(this._updateIcon(\"icon\",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr(\"title\"),this.options.showLabel||this.title||this.element.attr(\"title\",this.options.label)},_updateIcon:function(e,i){var s=\"iconPosition\"!==e,n=s?this.options.iconPosition:i,o=\"top\"===n||\"bottom\"===n;this.icon?s&&this._removeClass(this.icon,null,this.options.icon):(this.icon=t(\"<span>\"),this._addClass(this.icon,\"ui-button-icon\",\"ui-icon\"),this.options.showLabel||this._addClass(\"ui-button-icon-only\")),s&&this._addClass(this.icon,null,i),this._attachIcon(n),o?(this._addClass(this.icon,null,\"ui-widget-icon-block\"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=t(\"<span> </span>\"),this._addClass(this.iconSpace,\"ui-button-icon-space\")),this._removeClass(this.icon,null,\"ui-wiget-icon-block\"),this._attachIconSpace(n))},_destroy:function(){this.element.removeAttr(\"role\"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr(\"title\")},_attachIconSpace:function(t){this.icon[/^(?:end|bottom)/.test(t)?\"before\":\"after\"](this.iconSpace)},_attachIcon:function(t){this.element[/^(?:end|bottom)/.test(t)?\"append\":\"prepend\"](this.icon)},_setOptions:function(t){var e=void 0===t.showLabel?this.options.showLabel:t.showLabel,i=void 0===t.icon?this.options.icon:t.icon;e||i||(t.showLabel=!0),this._super(t)},_setOption:function(t,e){\"icon\"===t&&(e?this._updateIcon(t,e):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),\"iconPosition\"===t&&this._updateIcon(t,e),\"showLabel\"===t&&(this._toggleClass(\"ui-button-icon-only\",null,!e),this._updateTooltip()),\"label\"===t&&(this.isInput?this.element.val(e):(this.element.html(e),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(t,e),\"disabled\"===t&&(this._toggleClass(null,\"ui-state-disabled\",e),this.element[0].disabled=e,e&&this.element.blur())},refresh:function(){var t=this.element.is(\"input, button\")?this.element[0].disabled:this.element.hasClass(\"ui-button-disabled\");t!==this.options.disabled&&this._setOptions({disabled:t}),this._updateTooltip()}}),t.uiBackCompat!==!1&&(t.widget(\"ui.button\",t.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition=\"end\"),this._super()},_setOption:function(t,e){return\"text\"===t?(this._super(\"showLabel\",e),void 0):(\"showLabel\"===t&&(this.options.text=e),\"icon\"===t&&(this.options.icons.primary=e),\"icons\"===t&&(e.primary?(this._super(\"icon\",e.primary),this._super(\"iconPosition\",\"beginning\")):e.secondary&&(this._super(\"icon\",e.secondary),this._super(\"iconPosition\",\"end\"))),this._superApply(arguments),void 0)}}),t.fn.button=function(e){return function(){return!this.length||this.length&&\"INPUT\"!==this[0].tagName||this.length&&\"INPUT\"===this[0].tagName&&\"checkbox\"!==this.attr(\"type\")&&\"radio\"!==this.attr(\"type\")?e.apply(this,arguments):(t.ui.checkboxradio||t.error(\"Checkboxradio widget missing\"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}}(t.fn.button),t.fn.buttonset=function(){return t.ui.controlgroup||t.error(\"Controlgroup widget missing\"),\"option\"===arguments[0]&&\"items\"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],\"items.button\",arguments[2]]):\"option\"===arguments[0]&&\"items\"===arguments[1]?this.controlgroup.apply(this,[arguments[0],\"items.button\"]):(\"object\"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),t.ui.button,t.extend(t.ui,{datepicker:{version:\"1.12.1\"}});var m;t.extend(s.prototype,{markerClassName:\"hasDatepicker\",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return a(this._defaults,t||{}),this},_attachDatepicker:function(e,i){var s,n,o;s=e.nodeName.toLowerCase(),n=\"div\"===s||\"span\"===s,e.id||(this.uuid+=1,e.id=\"dp\"+this.uuid),o=this._newInst(t(e),n),o.settings=t.extend({},i||{}),\"input\"===s?this._connectDatepicker(e,o):n&&this._inlineDatepicker(e,o)},_newInst:function(e,i){var s=e[0].id.replace(/([^A-Za-z0-9_\\-])/g,\"\\\\\\\\$1\");return{id:s,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?n(t(\"<div class='\"+this._inlineClass+\" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>\")):this.dpDiv}},_connectDatepicker:function(e,i){var s=t(e);i.append=t([]),i.trigger=t([]),s.hasClass(this.markerClassName)||(this._attachments(s,i),s.addClass(this.markerClassName).on(\"keydown\",this._doKeyDown).on(\"keypress\",this._doKeyPress).on(\"keyup\",this._doKeyUp),this._autoSize(i),t.data(e,\"datepicker\",i),i.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,i){var s,n,o,a=this._get(i,\"appendText\"),r=this._get(i,\"isRTL\");i.append&&i.append.remove(),a&&(i.append=t(\"<span class='\"+this._appendClass+\"'>\"+a+\"</span>\"),e[r?\"before\":\"after\"](i.append)),e.off(\"focus\",this._showDatepicker),i.trigger&&i.trigger.remove(),s=this._get(i,\"showOn\"),(\"focus\"===s||\"both\"===s)&&e.on(\"focus\",this._showDatepicker),(\"button\"===s||\"both\"===s)&&(n=this._get(i,\"buttonText\"),o=this._get(i,\"buttonImage\"),i.trigger=t(this._get(i,\"buttonImageOnly\")?t(\"<img/>\").addClass(this._triggerClass).attr({src:o,alt:n,title:n}):t(\"<button type='button'></button>\").addClass(this._triggerClass).html(o?t(\"<img/>\").attr({src:o,alt:n,title:n}):n)),e[r?\"before\":\"after\"](i.trigger),i.trigger.on(\"click\",function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1}))},_autoSize:function(t){if(this._get(t,\"autoSize\")&&!t.inline){var e,i,s,n,o=new Date(2009,11,20),a=this._get(t,\"dateFormat\");a.match(/[DM]/)&&(e=function(t){for(i=0,s=0,n=0;t.length>n;n++)t[n].length>i&&(i=t[n].length,s=n);return s},o.setMonth(e(this._get(t,a.match(/MM/)?\"monthNames\":\"monthNamesShort\"))),o.setDate(e(this._get(t,a.match(/DD/)?\"dayNames\":\"dayNamesShort\"))+20-o.getDay())),t.input.attr(\"size\",this._formatDate(t,o).length)}},_inlineDatepicker:function(e,i){var s=t(e);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(i.dpDiv),t.data(e,\"datepicker\",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(e),i.dpDiv.css(\"display\",\"block\"))},_dialogDatepicker:function(e,i,s,n,o){var r,h,l,c,u,d=this._dialogInst;return d||(this.uuid+=1,r=\"dp\"+this.uuid,this._dialogInput=t(\"<input type='text' id='\"+r+\"' style='position: absolute; top: -100px; width: 0px;'/>\"),this._dialogInput.on(\"keydown\",this._doKeyDown),t(\"body\").append(this._dialogInput),d=this._dialogInst=this._newInst(this._dialogInput,!1),d.settings={},t.data(this._dialogInput[0],\"datepicker\",d)),a(d.settings,n||{}),i=i&&i.constructor===Date?this._formatDate(d,i):i,this._dialogInput.val(i),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(h=document.documentElement.clientWidth,l=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[h/2-100+c,l/2-150+u]),this._dialogInput.css(\"left\",this._pos[0]+20+\"px\").css(\"top\",this._pos[1]+\"px\"),d.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],\"datepicker\",d),this},_destroyDatepicker:function(e){var i,s=t(e),n=t.data(e,\"datepicker\");s.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),t.removeData(e,\"datepicker\"),\"input\"===i?(n.append.remove(),n.trigger.remove(),s.removeClass(this.markerClassName).off(\"focus\",this._showDatepicker).off(\"keydown\",this._doKeyDown).off(\"keypress\",this._doKeyPress).off(\"keyup\",this._doKeyUp)):(\"div\"===i||\"span\"===i)&&s.removeClass(this.markerClassName).empty(),m===n&&(m=null))},_enableDatepicker:function(e){var i,s,n=t(e),o=t.data(e,\"datepicker\");n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),\"input\"===i?(e.disabled=!1,o.trigger.filter(\"button\").each(function(){this.disabled=!1}).end().filter(\"img\").css({opacity:\"1.0\",cursor:\"\"})):(\"div\"===i||\"span\"===i)&&(s=n.children(\".\"+this._inlineClass),s.children().removeClass(\"ui-state-disabled\"),s.find(\"select.ui-datepicker-month, select.ui-datepicker-year\").prop(\"disabled\",!1)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var i,s,n=t(e),o=t.data(e,\"datepicker\");n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),\"input\"===i?(e.disabled=!0,o.trigger.filter(\"button\").each(function(){this.disabled=!0}).end().filter(\"img\").css({opacity:\"0.5\",cursor:\"default\"})):(\"div\"===i||\"span\"===i)&&(s=n.children(\".\"+this._inlineClass),s.children().addClass(\"ui-state-disabled\"),s.find(\"select.ui-datepicker-month, select.ui-datepicker-year\").prop(\"disabled\",!0)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;this._disabledInputs.length>e;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,\"datepicker\")}catch(i){throw\"Missing instance data for this datepicker\"}},_optionDatepicker:function(e,i,s){var n,o,r,h,l=this._getInst(e);return 2===arguments.length&&\"string\"==typeof i?\"defaults\"===i?t.extend({},t.datepicker._defaults):l?\"all\"===i?t.extend({},l.settings):this._get(l,i):null:(n=i||{},\"string\"==typeof i&&(n={},n[i]=s),l&&(this._curInst===l&&this._hideDatepicker(),o=this._getDateDatepicker(e,!0),r=this._getMinMaxDate(l,\"min\"),h=this._getMinMaxDate(l,\"max\"),a(l.settings,n),null!==r&&void 0!==n.dateFormat&&void 0===n.minDate&&(l.settings.minDate=this._formatDate(l,r)),null!==h&&void 0!==n.dateFormat&&void 0===n.maxDate&&(l.settings.maxDate=this._formatDate(l,h)),\"disabled\"in n&&(n.disabled?this._disableDatepicker(e):this._enableDatepicker(e)),this._attachments(t(e),l),this._autoSize(l),this._setDate(l,o),this._updateAlternate(l),this._updateDatepicker(l)),void 0)},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(e){var i,s,n,o=t.datepicker._getInst(e.target),a=!0,r=o.dpDiv.is(\".ui-datepicker-rtl\");if(o._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),a=!1;break;case 13:return n=t(\"td.\"+t.datepicker._dayOverClass+\":not(.\"+t.datepicker._currentClass+\")\",o.dpDiv),n[0]&&t.datepicker._selectDay(e.target,o.selectedMonth,o.selectedYear,n[0]),i=t.datepicker._get(o,\"onSelect\"),i?(s=t.datepicker._formatDate(o),i.apply(o.input?o.input[0]:null,[s,o])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,\"stepBigMonths\"):-t.datepicker._get(o,\"stepMonths\"),\"M\");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,\"stepBigMonths\"):+t.datepicker._get(o,\"stepMonths\"),\"M\");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),a=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),a=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,r?1:-1,\"D\"),a=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,\"stepBigMonths\"):-t.datepicker._get(o,\"stepMonths\"),\"M\");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,\"D\"),a=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,r?-1:1,\"D\"),a=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,\"stepBigMonths\"):+t.datepicker._get(o,\"stepMonths\"),\"M\");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,\"D\"),a=e.ctrlKey||e.metaKey;break;default:a=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):a=!1;a&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var i,s,n=t.datepicker._getInst(e.target);return t.datepicker._get(n,\"constrainInput\")?(i=t.datepicker._possibleChars(t.datepicker._get(n,\"dateFormat\")),s=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||\" \">s||!i||i.indexOf(s)>-1):void 0},_doKeyUp:function(e){var i,s=t.datepicker._getInst(e.target);if(s.input.val()!==s.lastVal)try{i=t.datepicker.parseDate(t.datepicker._get(s,\"dateFormat\"),s.input?s.input.val():null,t.datepicker._getFormatConfig(s)),i&&(t.datepicker._setDateFromField(s),t.datepicker._updateAlternate(s),t.datepicker._updateDatepicker(s))}catch(n){}return!0},_showDatepicker:function(e){if(e=e.target||e,\"input\"!==e.nodeName.toLowerCase()&&(e=t(\"input\",e.parentNode)[0]),!t.datepicker._isDisabledDatepicker(e)&&t.datepicker._lastInput!==e){var s,n,o,r,h,l,c;s=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==s&&(t.datepicker._curInst.dpDiv.stop(!0,!0),s&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),n=t.datepicker._get(s,\"beforeShow\"),o=n?n.apply(e,[e,s]):{},o!==!1&&(a(s.settings,o),s.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(s),t.datepicker._inDialog&&(e.value=\"\"),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),r=!1,t(e).parents().each(function(){return r|=\"fixed\"===t(this).css(\"position\"),!r}),h={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,s.dpDiv.empty(),s.dpDiv.css({position:\"absolute\",display:\"block\",top:\"-1000px\"}),t.datepicker._updateDatepicker(s),h=t.datepicker._checkOffset(s,h,r),s.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?\"static\":r?\"fixed\":\"absolute\",display:\"none\",left:h.left+\"px\",top:h.top+\"px\"}),s.inline||(l=t.datepicker._get(s,\"showAnim\"),c=t.datepicker._get(s,\"duration\"),s.dpDiv.css(\"z-index\",i(t(e))+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[l]?s.dpDiv.show(l,t.datepicker._get(s,\"showOptions\"),c):s.dpDiv[l||\"show\"](l?c:null),t.datepicker._shouldFocusInput(s)&&s.input.trigger(\"focus\"),t.datepicker._curInst=s))\n}},_updateDatepicker:function(e){this.maxRows=4,m=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var i,s=this._getNumberOfMonths(e),n=s[1],a=17,r=e.dpDiv.find(\".\"+this._dayOverClass+\" a\");r.length>0&&o.apply(r.get(0)),e.dpDiv.removeClass(\"ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4\").width(\"\"),n>1&&e.dpDiv.addClass(\"ui-datepicker-multi-\"+n).css(\"width\",a*n+\"em\"),e.dpDiv[(1!==s[0]||1!==s[1]?\"add\":\"remove\")+\"Class\"](\"ui-datepicker-multi\"),e.dpDiv[(this._get(e,\"isRTL\")?\"add\":\"remove\")+\"Class\"](\"ui-datepicker-rtl\"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.trigger(\"focus\"),e.yearshtml&&(i=e.yearshtml,setTimeout(function(){i===e.yearshtml&&e.yearshtml&&e.dpDiv.find(\"select.ui-datepicker-year:first\").replaceWith(e.yearshtml),i=e.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(\":visible\")&&!t.input.is(\":disabled\")&&!t.input.is(\":focus\")},_checkOffset:function(e,i,s){var n=e.dpDiv.outerWidth(),o=e.dpDiv.outerHeight(),a=e.input?e.input.outerWidth():0,r=e.input?e.input.outerHeight():0,h=document.documentElement.clientWidth+(s?0:t(document).scrollLeft()),l=document.documentElement.clientHeight+(s?0:t(document).scrollTop());return i.left-=this._get(e,\"isRTL\")?n-a:0,i.left-=s&&i.left===e.input.offset().left?t(document).scrollLeft():0,i.top-=s&&i.top===e.input.offset().top+r?t(document).scrollTop():0,i.left-=Math.min(i.left,i.left+n>h&&h>n?Math.abs(i.left+n-h):0),i.top-=Math.min(i.top,i.top+o>l&&l>o?Math.abs(o+r):0),i},_findPos:function(e){for(var i,s=this._getInst(e),n=this._get(s,\"isRTL\");e&&(\"hidden\"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[n?\"previousSibling\":\"nextSibling\"];return i=t(e).offset(),[i.left,i.top]},_hideDatepicker:function(e){var i,s,n,o,a=this._curInst;!a||e&&a!==t.data(e,\"datepicker\")||this._datepickerShowing&&(i=this._get(a,\"showAnim\"),s=this._get(a,\"duration\"),n=function(){t.datepicker._tidyDialog(a)},t.effects&&(t.effects.effect[i]||t.effects[i])?a.dpDiv.hide(i,t.datepicker._get(a,\"showOptions\"),s,n):a.dpDiv[\"slideDown\"===i?\"slideUp\":\"fadeIn\"===i?\"fadeOut\":\"hide\"](i?s:null,n),i||n(),this._datepickerShowing=!1,o=this._get(a,\"onClose\"),o&&o.apply(a.input?a.input[0]:null,[a.input?a.input.val():\"\",a]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:\"absolute\",left:\"0\",top:\"-100px\"}),t.blockUI&&(t.unblockUI(),t(\"body\").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).off(\".ui-datepicker-calendar\")},_checkExternalClick:function(e){if(t.datepicker._curInst){var i=t(e.target),s=t.datepicker._getInst(i[0]);(i[0].id!==t.datepicker._mainDivId&&0===i.parents(\"#\"+t.datepicker._mainDivId).length&&!i.hasClass(t.datepicker.markerClassName)&&!i.closest(\".\"+t.datepicker._triggerClass).length&&t.datepicker._datepickerShowing&&(!t.datepicker._inDialog||!t.blockUI)||i.hasClass(t.datepicker.markerClassName)&&t.datepicker._curInst!==s)&&t.datepicker._hideDatepicker()}},_adjustDate:function(e,i,s){var n=t(e),o=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(o,i+(\"M\"===s?this._get(o,\"showCurrentAtPos\"):0),s),this._updateDatepicker(o))},_gotoToday:function(e){var i,s=t(e),n=this._getInst(s[0]);this._get(n,\"gotoCurrent\")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(i=new Date,n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear()),this._notifyChange(n),this._adjustDate(s)},_selectMonthYear:function(e,i,s){var n=t(e),o=this._getInst(n[0]);o[\"selected\"+(\"M\"===s?\"Month\":\"Year\")]=o[\"draw\"+(\"M\"===s?\"Month\":\"Year\")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(n)},_selectDay:function(e,i,s,n){var o,a=t(e);t(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(a[0])||(o=this._getInst(a[0]),o.selectedDay=o.currentDay=t(\"a\",n).html(),o.selectedMonth=o.currentMonth=i,o.selectedYear=o.currentYear=s,this._selectDate(e,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear)))},_clearDate:function(e){var i=t(e);this._selectDate(i,\"\")},_selectDate:function(e,i){var s,n=t(e),o=this._getInst(n[0]);i=null!=i?i:this._formatDate(o),o.input&&o.input.val(i),this._updateAlternate(o),s=this._get(o,\"onSelect\"),s?s.apply(o.input?o.input[0]:null,[i,o]):o.input&&o.input.trigger(\"change\"),o.inline?this._updateDatepicker(o):(this._hideDatepicker(),this._lastInput=o.input[0],\"object\"!=typeof o.input[0]&&o.input.trigger(\"focus\"),this._lastInput=null)},_updateAlternate:function(e){var i,s,n,o=this._get(e,\"altField\");o&&(i=this._get(e,\"altFormat\")||this._get(e,\"dateFormat\"),s=this._getDate(e),n=this.formatDate(i,s,this._getFormatConfig(e)),t(o).val(n))},noWeekends:function(t){var e=t.getDay();return[e>0&&6>e,\"\"]},iso8601Week:function(t){var e,i=new Date(t.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),e=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((e-i)/864e5)/7)+1},parseDate:function(e,i,s){if(null==e||null==i)throw\"Invalid arguments\";if(i=\"object\"==typeof i?\"\"+i:i+\"\",\"\"===i)return null;var n,o,a,r,h=0,l=(s?s.shortYearCutoff:null)||this._defaults.shortYearCutoff,c=\"string\"!=typeof l?l:(new Date).getFullYear()%100+parseInt(l,10),u=(s?s.dayNamesShort:null)||this._defaults.dayNamesShort,d=(s?s.dayNames:null)||this._defaults.dayNames,p=(s?s.monthNamesShort:null)||this._defaults.monthNamesShort,f=(s?s.monthNames:null)||this._defaults.monthNames,g=-1,m=-1,_=-1,v=-1,b=!1,y=function(t){var i=e.length>n+1&&e.charAt(n+1)===t;return i&&n++,i},w=function(t){var e=y(t),s=\"@\"===t?14:\"!\"===t?20:\"y\"===t&&e?4:\"o\"===t?3:2,n=\"y\"===t?s:1,o=RegExp(\"^\\\\d{\"+n+\",\"+s+\"}\"),a=i.substring(h).match(o);if(!a)throw\"Missing number at position \"+h;return h+=a[0].length,parseInt(a[0],10)},k=function(e,s,n){var o=-1,a=t.map(y(e)?n:s,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(t.each(a,function(t,e){var s=e[1];return i.substr(h,s.length).toLowerCase()===s.toLowerCase()?(o=e[0],h+=s.length,!1):void 0}),-1!==o)return o+1;throw\"Unknown name at position \"+h},x=function(){if(i.charAt(h)!==e.charAt(n))throw\"Unexpected literal at position \"+h;h++};for(n=0;e.length>n;n++)if(b)\"'\"!==e.charAt(n)||y(\"'\")?x():b=!1;else switch(e.charAt(n)){case\"d\":_=w(\"d\");break;case\"D\":k(\"D\",u,d);break;case\"o\":v=w(\"o\");break;case\"m\":m=w(\"m\");break;case\"M\":m=k(\"M\",p,f);break;case\"y\":g=w(\"y\");break;case\"@\":r=new Date(w(\"@\")),g=r.getFullYear(),m=r.getMonth()+1,_=r.getDate();break;case\"!\":r=new Date((w(\"!\")-this._ticksTo1970)/1e4),g=r.getFullYear(),m=r.getMonth()+1,_=r.getDate();break;case\"'\":y(\"'\")?x():b=!0;break;default:x()}if(i.length>h&&(a=i.substr(h),!/^\\s+/.test(a)))throw\"Extra/unparsed characters found in date: \"+a;if(-1===g?g=(new Date).getFullYear():100>g&&(g+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c>=g?0:-100)),v>-1)for(m=1,_=v;;){if(o=this._getDaysInMonth(g,m-1),o>=_)break;m++,_-=o}if(r=this._daylightSavingAdjust(new Date(g,m-1,_)),r.getFullYear()!==g||r.getMonth()+1!==m||r.getDate()!==_)throw\"Invalid date\";return r},ATOM:\"yy-mm-dd\",COOKIE:\"D, dd M yy\",ISO_8601:\"yy-mm-dd\",RFC_822:\"D, d M y\",RFC_850:\"DD, dd-M-y\",RFC_1036:\"D, d M y\",RFC_1123:\"D, d M yy\",RFC_2822:\"D, d M yy\",RSS:\"D, d M y\",TICKS:\"!\",TIMESTAMP:\"@\",W3C:\"yy-mm-dd\",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(t,e,i){if(!e)return\"\";var s,n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,o=(i?i.dayNames:null)||this._defaults.dayNames,a=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,h=function(e){var i=t.length>s+1&&t.charAt(s+1)===e;return i&&s++,i},l=function(t,e,i){var s=\"\"+e;if(h(t))for(;i>s.length;)s=\"0\"+s;return s},c=function(t,e,i,s){return h(t)?s[e]:i[e]},u=\"\",d=!1;if(e)for(s=0;t.length>s;s++)if(d)\"'\"!==t.charAt(s)||h(\"'\")?u+=t.charAt(s):d=!1;else switch(t.charAt(s)){case\"d\":u+=l(\"d\",e.getDate(),2);break;case\"D\":u+=c(\"D\",e.getDay(),n,o);break;case\"o\":u+=l(\"o\",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case\"m\":u+=l(\"m\",e.getMonth()+1,2);break;case\"M\":u+=c(\"M\",e.getMonth(),a,r);break;case\"y\":u+=h(\"y\")?e.getFullYear():(10>e.getFullYear()%100?\"0\":\"\")+e.getFullYear()%100;break;case\"@\":u+=e.getTime();break;case\"!\":u+=1e4*e.getTime()+this._ticksTo1970;break;case\"'\":h(\"'\")?u+=\"'\":d=!0;break;default:u+=t.charAt(s)}return u},_possibleChars:function(t){var e,i=\"\",s=!1,n=function(i){var s=t.length>e+1&&t.charAt(e+1)===i;return s&&e++,s};for(e=0;t.length>e;e++)if(s)\"'\"!==t.charAt(e)||n(\"'\")?i+=t.charAt(e):s=!1;else switch(t.charAt(e)){case\"d\":case\"m\":case\"y\":case\"@\":i+=\"0123456789\";break;case\"D\":case\"M\":return null;case\"'\":n(\"'\")?i+=\"'\":s=!0;break;default:i+=t.charAt(e)}return i},_get:function(t,e){return void 0!==t.settings[e]?t.settings[e]:this._defaults[e]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,\"dateFormat\"),s=t.lastVal=t.input?t.input.val():null,n=this._getDefaultDate(t),o=n,a=this._getFormatConfig(t);try{o=this.parseDate(i,s,a)||n}catch(r){s=e?\"\":s}t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),t.currentDay=s?o.getDate():0,t.currentMonth=s?o.getMonth():0,t.currentYear=s?o.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,\"defaultDate\"),new Date))},_determineDate:function(e,i,s){var n=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},o=function(i){try{return t.datepicker.parseDate(t.datepicker._get(e,\"dateFormat\"),i,t.datepicker._getFormatConfig(e))}catch(s){}for(var n=(i.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,o=n.getFullYear(),a=n.getMonth(),r=n.getDate(),h=/([+\\-]?[0-9]+)\\s*(d|D|w|W|m|M|y|Y)?/g,l=h.exec(i);l;){switch(l[2]||\"d\"){case\"d\":case\"D\":r+=parseInt(l[1],10);break;case\"w\":case\"W\":r+=7*parseInt(l[1],10);break;case\"m\":case\"M\":a+=parseInt(l[1],10),r=Math.min(r,t.datepicker._getDaysInMonth(o,a));break;case\"y\":case\"Y\":o+=parseInt(l[1],10),r=Math.min(r,t.datepicker._getDaysInMonth(o,a))}l=h.exec(i)}return new Date(o,a,r)},a=null==i||\"\"===i?s:\"string\"==typeof i?o(i):\"number\"==typeof i?isNaN(i)?s:n(i):new Date(i.getTime());return a=a&&\"Invalid Date\"==\"\"+a?s:a,a&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)),this._daylightSavingAdjust(a)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var s=!e,n=t.selectedMonth,o=t.selectedYear,a=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=a.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=a.getMonth(),t.drawYear=t.selectedYear=t.currentYear=a.getFullYear(),n===t.selectedMonth&&o===t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(s?\"\":this._formatDate(t))},_getDate:function(t){var e=!t.currentYear||t.input&&\"\"===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return e},_attachHandlers:function(e){var i=this._get(e,\"stepMonths\"),s=\"#\"+e.id.replace(/\\\\\\\\/g,\"\\\\\");e.dpDiv.find(\"[data-handler]\").map(function(){var e={prev:function(){t.datepicker._adjustDate(s,-i,\"M\")},next:function(){t.datepicker._adjustDate(s,+i,\"M\")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(s)},selectDay:function(){return t.datepicker._selectDay(s,+this.getAttribute(\"data-month\"),+this.getAttribute(\"data-year\"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(s,this,\"M\"),!1},selectYear:function(){return t.datepicker._selectMonthYear(s,this,\"Y\"),!1}};t(this).on(this.getAttribute(\"data-event\"),e[this.getAttribute(\"data-handler\")])})},_generateHTML:function(t){var e,i,s,n,o,a,r,h,l,c,u,d,p,f,g,m,_,v,b,y,w,k,x,C,D,I,T,P,M,S,H,z,O,A,N,W,E,F,L,R=new Date,B=this._daylightSavingAdjust(new Date(R.getFullYear(),R.getMonth(),R.getDate())),Y=this._get(t,\"isRTL\"),j=this._get(t,\"showButtonPanel\"),q=this._get(t,\"hideIfNoPrevNext\"),K=this._get(t,\"navigationAsDateFormat\"),U=this._getNumberOfMonths(t),V=this._get(t,\"showCurrentAtPos\"),$=this._get(t,\"stepMonths\"),X=1!==U[0]||1!==U[1],G=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),Q=this._getMinMaxDate(t,\"min\"),J=this._getMinMaxDate(t,\"max\"),Z=t.drawMonth-V,te=t.drawYear;if(0>Z&&(Z+=12,te--),J)for(e=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-U[0]*U[1]+1,J.getDate())),e=Q&&Q>e?Q:e;this._daylightSavingAdjust(new Date(te,Z,1))>e;)Z--,0>Z&&(Z=11,te--);for(t.drawMonth=Z,t.drawYear=te,i=this._get(t,\"prevText\"),i=K?this.formatDate(i,this._daylightSavingAdjust(new Date(te,Z-$,1)),this._getFormatConfig(t)):i,s=this._canAdjustMonth(t,-1,te,Z)?\"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='\"+i+\"'><span class='ui-icon ui-icon-circle-triangle-\"+(Y?\"e\":\"w\")+\"'>\"+i+\"</span></a>\":q?\"\":\"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='\"+i+\"'><span class='ui-icon ui-icon-circle-triangle-\"+(Y?\"e\":\"w\")+\"'>\"+i+\"</span></a>\",n=this._get(t,\"nextText\"),n=K?this.formatDate(n,this._daylightSavingAdjust(new Date(te,Z+$,1)),this._getFormatConfig(t)):n,o=this._canAdjustMonth(t,1,te,Z)?\"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='\"+n+\"'><span class='ui-icon ui-icon-circle-triangle-\"+(Y?\"w\":\"e\")+\"'>\"+n+\"</span></a>\":q?\"\":\"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='\"+n+\"'><span class='ui-icon ui-icon-circle-triangle-\"+(Y?\"w\":\"e\")+\"'>\"+n+\"</span></a>\",a=this._get(t,\"currentText\"),r=this._get(t,\"gotoCurrent\")&&t.currentDay?G:B,a=K?this.formatDate(a,r,this._getFormatConfig(t)):a,h=t.inline?\"\":\"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>\"+this._get(t,\"closeText\")+\"</button>\",l=j?\"<div class='ui-datepicker-buttonpane ui-widget-content'>\"+(Y?h:\"\")+(this._isInRange(t,r)?\"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>\"+a+\"</button>\":\"\")+(Y?\"\":h)+\"</div>\":\"\",c=parseInt(this._get(t,\"firstDay\"),10),c=isNaN(c)?0:c,u=this._get(t,\"showWeek\"),d=this._get(t,\"dayNames\"),p=this._get(t,\"dayNamesMin\"),f=this._get(t,\"monthNames\"),g=this._get(t,\"monthNamesShort\"),m=this._get(t,\"beforeShowDay\"),_=this._get(t,\"showOtherMonths\"),v=this._get(t,\"selectOtherMonths\"),b=this._getDefaultDate(t),y=\"\",k=0;U[0]>k;k++){for(x=\"\",this.maxRows=4,C=0;U[1]>C;C++){if(D=this._daylightSavingAdjust(new Date(te,Z,t.selectedDay)),I=\" ui-corner-all\",T=\"\",X){if(T+=\"<div class='ui-datepicker-group\",U[1]>1)switch(C){case 0:T+=\" ui-datepicker-group-first\",I=\" ui-corner-\"+(Y?\"right\":\"left\");break;case U[1]-1:T+=\" ui-datepicker-group-last\",I=\" ui-corner-\"+(Y?\"left\":\"right\");break;default:T+=\" ui-datepicker-group-middle\",I=\"\"}T+=\"'>\"}for(T+=\"<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix\"+I+\"'>\"+(/all|left/.test(I)&&0===k?Y?o:s:\"\")+(/all|right/.test(I)&&0===k?Y?s:o:\"\")+this._generateMonthYearHeader(t,Z,te,Q,J,k>0||C>0,f,g)+\"</div><table class='ui-datepicker-calendar'><thead>\"+\"<tr>\",P=u?\"<th class='ui-datepicker-week-col'>\"+this._get(t,\"weekHeader\")+\"</th>\":\"\",w=0;7>w;w++)M=(w+c)%7,P+=\"<th scope='col'\"+((w+c+6)%7>=5?\" class='ui-datepicker-week-end'\":\"\")+\">\"+\"<span title='\"+d[M]+\"'>\"+p[M]+\"</span></th>\";for(T+=P+\"</tr></thead><tbody>\",S=this._getDaysInMonth(te,Z),te===t.selectedYear&&Z===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,S)),H=(this._getFirstDayOfMonth(te,Z)-c+7)%7,z=Math.ceil((H+S)/7),O=X?this.maxRows>z?this.maxRows:z:z,this.maxRows=O,A=this._daylightSavingAdjust(new Date(te,Z,1-H)),N=0;O>N;N++){for(T+=\"<tr>\",W=u?\"<td class='ui-datepicker-week-col'>\"+this._get(t,\"calculateWeek\")(A)+\"</td>\":\"\",w=0;7>w;w++)E=m?m.apply(t.input?t.input[0]:null,[A]):[!0,\"\"],F=A.getMonth()!==Z,L=F&&!v||!E[0]||Q&&Q>A||J&&A>J,W+=\"<td class='\"+((w+c+6)%7>=5?\" ui-datepicker-week-end\":\"\")+(F?\" ui-datepicker-other-month\":\"\")+(A.getTime()===D.getTime()&&Z===t.selectedMonth&&t._keyEvent||b.getTime()===A.getTime()&&b.getTime()===D.getTime()?\" \"+this._dayOverClass:\"\")+(L?\" \"+this._unselectableClass+\" ui-state-disabled\":\"\")+(F&&!_?\"\":\" \"+E[1]+(A.getTime()===G.getTime()?\" \"+this._currentClass:\"\")+(A.getTime()===B.getTime()?\" ui-datepicker-today\":\"\"))+\"'\"+(F&&!_||!E[2]?\"\":\" title='\"+E[2].replace(/'/g,\"&#39;\")+\"'\")+(L?\"\":\" data-handler='selectDay' data-event='click' data-month='\"+A.getMonth()+\"' data-year='\"+A.getFullYear()+\"'\")+\">\"+(F&&!_?\"&#xa0;\":L?\"<span class='ui-state-default'>\"+A.getDate()+\"</span>\":\"<a class='ui-state-default\"+(A.getTime()===B.getTime()?\" ui-state-highlight\":\"\")+(A.getTime()===G.getTime()?\" ui-state-active\":\"\")+(F?\" ui-priority-secondary\":\"\")+\"' href='#'>\"+A.getDate()+\"</a>\")+\"</td>\",A.setDate(A.getDate()+1),A=this._daylightSavingAdjust(A);T+=W+\"</tr>\"}Z++,Z>11&&(Z=0,te++),T+=\"</tbody></table>\"+(X?\"</div>\"+(U[0]>0&&C===U[1]-1?\"<div class='ui-datepicker-row-break'></div>\":\"\"):\"\"),x+=T}y+=x}return y+=l,t._keyEvent=!1,y},_generateMonthYearHeader:function(t,e,i,s,n,o,a,r){var h,l,c,u,d,p,f,g,m=this._get(t,\"changeMonth\"),_=this._get(t,\"changeYear\"),v=this._get(t,\"showMonthAfterYear\"),b=\"<div class='ui-datepicker-title'>\",y=\"\";if(o||!m)y+=\"<span class='ui-datepicker-month'>\"+a[e]+\"</span>\";else{for(h=s&&s.getFullYear()===i,l=n&&n.getFullYear()===i,y+=\"<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>\",c=0;12>c;c++)(!h||c>=s.getMonth())&&(!l||n.getMonth()>=c)&&(y+=\"<option value='\"+c+\"'\"+(c===e?\" selected='selected'\":\"\")+\">\"+r[c]+\"</option>\");y+=\"</select>\"}if(v||(b+=y+(!o&&m&&_?\"\":\"&#xa0;\")),!t.yearshtml)if(t.yearshtml=\"\",o||!_)b+=\"<span class='ui-datepicker-year'>\"+i+\"</span>\";else{for(u=this._get(t,\"yearRange\").split(\":\"),d=(new Date).getFullYear(),p=function(t){var e=t.match(/c[+\\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\\-].*/)?d+parseInt(t,10):parseInt(t,10);return isNaN(e)?d:e},f=p(u[0]),g=Math.max(f,p(u[1]||\"\")),f=s?Math.max(f,s.getFullYear()):f,g=n?Math.min(g,n.getFullYear()):g,t.yearshtml+=\"<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>\";g>=f;f++)t.yearshtml+=\"<option value='\"+f+\"'\"+(f===i?\" selected='selected'\":\"\")+\">\"+f+\"</option>\";t.yearshtml+=\"</select>\",b+=t.yearshtml,t.yearshtml=null}return b+=this._get(t,\"yearSuffix\"),v&&(b+=(!o&&m&&_?\"\":\"&#xa0;\")+y),b+=\"</div>\"},_adjustInstDate:function(t,e,i){var s=t.selectedYear+(\"Y\"===i?e:0),n=t.selectedMonth+(\"M\"===i?e:0),o=Math.min(t.selectedDay,this._getDaysInMonth(s,n))+(\"D\"===i?e:0),a=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(s,n,o)));t.selectedDay=a.getDate(),t.drawMonth=t.selectedMonth=a.getMonth(),t.drawYear=t.selectedYear=a.getFullYear(),(\"M\"===i||\"Y\"===i)&&this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,\"min\"),s=this._getMinMaxDate(t,\"max\"),n=i&&i>e?i:e;return s&&n>s?s:n},_notifyChange:function(t){var e=this._get(t,\"onChangeMonthYear\");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,\"numberOfMonths\");return null==e?[1,1]:\"number\"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+\"Date\"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,s){var n=this._getNumberOfMonths(t),o=this._daylightSavingAdjust(new Date(i,s+(0>e?e:n[0]*n[1]),1));return 0>e&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(t,o)},_isInRange:function(t,e){var i,s,n=this._getMinMaxDate(t,\"min\"),o=this._getMinMaxDate(t,\"max\"),a=null,r=null,h=this._get(t,\"yearRange\");return h&&(i=h.split(\":\"),s=(new Date).getFullYear(),a=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\\-].*/)&&(a+=s),i[1].match(/[+\\-].*/)&&(r+=s)),(!n||e.getTime()>=n.getTime())&&(!o||e.getTime()<=o.getTime())&&(!a||e.getFullYear()>=a)&&(!r||r>=e.getFullYear())},_getFormatConfig:function(t){var e=this._get(t,\"shortYearCutoff\");return e=\"string\"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),{shortYearCutoff:e,dayNamesShort:this._get(t,\"dayNamesShort\"),dayNames:this._get(t,\"dayNames\"),monthNamesShort:this._get(t,\"monthNamesShort\"),monthNames:this._get(t,\"monthNames\")}},_formatDate:function(t,e,i,s){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var n=e?\"object\"==typeof e?e:this._daylightSavingAdjust(new Date(s,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,\"dateFormat\"),n,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).on(\"mousedown\",t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t(\"#\"+t.datepicker._mainDivId).length&&t(\"body\").append(t.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return\"string\"!=typeof e||\"isDisabled\"!==e&&\"getDate\"!==e&&\"widget\"!==e?\"option\"===e&&2===arguments.length&&\"string\"==typeof arguments[1]?t.datepicker[\"_\"+e+\"Datepicker\"].apply(t.datepicker,[this[0]].concat(i)):this.each(function(){\"string\"==typeof e?t.datepicker[\"_\"+e+\"Datepicker\"].apply(t.datepicker,[this].concat(i)):t.datepicker._attachDatepicker(this,e)}):t.datepicker[\"_\"+e+\"Datepicker\"].apply(t.datepicker,[this[0]].concat(i))},t.datepicker=new s,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version=\"1.12.1\",t.datepicker,t.ui.ie=!!/msie [\\w.]+/.exec(navigator.userAgent.toLowerCase());var _=!1;t(document).on(\"mouseup\",function(){_=!1}),t.widget(\"ui.mouse\",{version:\"1.12.1\",options:{cancel:\"input, textarea, button, select, option\",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on(\"mousedown.\"+this.widgetName,function(t){return e._mouseDown(t)}).on(\"click.\"+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+\".preventClickEvent\")?(t.removeData(i.target,e.widgetName+\".preventClickEvent\"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.off(\".\"+this.widgetName),this._mouseMoveDelegate&&this.document.off(\"mousemove.\"+this.widgetName,this._mouseMoveDelegate).off(\"mouseup.\"+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!_){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,s=1===e.which,n=\"string\"==typeof this.options.cancel&&e.target.nodeName?t(e.target).closest(this.options.cancel).length:!1;return s&&!n&&this._mouseCapture(e)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(e)!==!1,!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+\".preventClickEvent\")&&t.removeData(e.target,this.widgetName+\".preventClickEvent\"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.on(\"mousemove.\"+this.widgetName,this._mouseMoveDelegate).on(\"mouseup.\"+this.widgetName,this._mouseUpDelegate),e.preventDefault(),_=!0,!0)):!0}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||9>document.documentMode)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){this.document.off(\"mousemove.\"+this.widgetName,this._mouseMoveDelegate).off(\"mouseup.\"+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+\".preventClickEvent\",!0),this._mouseStop(e)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,_=!1,e.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),t.ui.plugin={add:function(e,i,s){var n,o=t.ui[e].prototype;for(n in s)o.plugins[n]=o.plugins[n]||[],o.plugins[n].push([i,s[n]])},call:function(t,e,i,s){var n,o=t.plugins[e];if(o&&(s||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(n=0;o.length>n;n++)t.options[o[n][0]]&&o[n][1].apply(t.element,i)}},t.ui.safeBlur=function(e){e&&\"body\"!==e.nodeName.toLowerCase()&&t(e).trigger(\"blur\")},t.widget(\"ui.draggable\",t.ui.mouse,{version:\"1.12.1\",widgetEventPrefix:\"drag\",options:{addClasses:!0,appendTo:\"parent\",axis:!1,connectToSortable:!1,containment:!1,cursor:\"auto\",cursorAt:!1,grid:!1,handle:!1,helper:\"original\",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:\"default\",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:\"both\",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){\"original\"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass(\"ui-draggable\"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),\"handle\"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(\".ui-draggable-dragging\")?(this.destroyOnClear=!0,void 0):(this._removeHandleClassName(),this._mouseDestroy(),void 0)},_mouseCapture:function(e){var i=this.options;return this.helper||i.disabled||t(e.target).closest(\".ui-resizable-handle\").length>0?!1:(this.handle=this._getHandle(e),this.handle?(this._blurActiveElement(e),this._blockFrames(i.iframeFix===!0?\"iframe\":i.iframeFix),!0):!1)},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=t(this);return t(\"<div>\").css(\"position\",\"absolute\").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var i=t.ui.safeActiveElement(this.document[0]),s=t(e.target);s.closest(i).length||t.ui.safeBlur(i)},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,\"ui-draggable-dragging\"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css(\"position\"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return\"fixed\"===t(this).css(\"position\")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger(\"start\",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo(\"absolute\"),!i){var s=this._uiHash();if(this._trigger(\"drag\",e,s)===!1)return this._mouseUp(new t.Event(\"mouseup\",e)),!1;this.position=s.position}return this.helper[0].style.left=this.position.left+\"px\",this.helper[0].style.top=this.position.top+\"px\",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,s=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(s=t.ui.ddmanager.drop(this,e)),this.dropped&&(s=this.dropped,this.dropped=!1),\"invalid\"===this.options.revert&&!s||\"valid\"===this.options.revert&&s||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger(\"stop\",e)!==!1&&i._clear()}):this._trigger(\"stop\",e)!==!1&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger(\"focus\"),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(\".ui-draggable-dragging\")?this._mouseUp(new t.Event(\"mouseup\",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,\"ui-draggable-handle\")},_removeHandleClassName:function(){this._removeClass(this.handleElement,\"ui-draggable-handle\")},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper),n=s?t(i.helper.apply(this.element[0],[e])):\"clone\"===i.helper?this.element.clone().removeAttr(\"id\"):this.element;return n.parents(\"body\").length||n.appendTo(\"parent\"===i.appendTo?this.element[0].parentNode:i.appendTo),s&&n[0]===this.element[0]&&this._setPositionRelative(),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css(\"position\"))||n.css(\"position\",\"absolute\"),n},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css(\"position\"))||(this.element[0].style.position=\"relative\")},_adjustOffsetFromHelper:function(e){\"string\"==typeof e&&(e=e.split(\" \")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),\"left\"in e&&(this.offset.click.left=e.left+this.margins.left),\"right\"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),\"top\"in e&&(this.offset.click.top=e.top+this.margins.top),\"bottom\"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),i=this.document[0];return\"absolute\"===this.cssPosition&&this.scrollParent[0]!==i&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css(\"borderTopWidth\"),10)||0),left:e.left+(parseInt(this.offsetParent.css(\"borderLeftWidth\"),10)||0)}},_getRelativeOffset:function(){if(\"relative\"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css(\"top\"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css(\"left\"),10)||0)+(e?0:this.scrollParent.scrollLeft())}\n},_cacheMargins:function(){this.margins={left:parseInt(this.element.css(\"marginLeft\"),10)||0,top:parseInt(this.element.css(\"marginTop\"),10)||0,right:parseInt(this.element.css(\"marginRight\"),10)||0,bottom:parseInt(this.element.css(\"marginBottom\"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options,o=this.document[0];return this.relativeContainer=null,n.containment?\"window\"===n.containment?(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):\"document\"===n.containment?(this.containment=[0,0,t(o).width()-this.helperProportions.width-this.margins.left,(t(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):n.containment.constructor===Array?(this.containment=n.containment,void 0):(\"parent\"===n.containment&&(n.containment=this.helper[0].parentNode),i=t(n.containment),s=i[0],s&&(e=/(scroll|auto)/.test(i.css(\"overflow\")),this.containment=[(parseInt(i.css(\"borderLeftWidth\"),10)||0)+(parseInt(i.css(\"paddingLeft\"),10)||0),(parseInt(i.css(\"borderTopWidth\"),10)||0)+(parseInt(i.css(\"paddingTop\"),10)||0),(e?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css(\"borderRightWidth\"),10)||0)-(parseInt(i.css(\"paddingRight\"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css(\"borderBottomWidth\"),10)||0)-(parseInt(i.css(\"paddingBottom\"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i),void 0):(this.containment=null,void 0)},_convertPositionTo:function(t,e){e||(e=this.position);var i=\"absolute\"===t?1:-1,s=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-(\"fixed\"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top)*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-(\"fixed\"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)*i}},_generatePosition:function(t,e){var i,s,n,o,a=this.options,r=this._isRootNode(this.scrollParent[0]),h=t.pageX,l=t.pageY;return r&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(s=this.relativeContainer.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(h=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(l=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(h=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(l=i[3]+this.offset.click.top)),a.grid&&(n=a.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,l=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-a.grid[1]:n+a.grid[1]:n,o=a.grid[0]?this.originalPageX+Math.round((h-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,h=i?o-this.offset.click.left>=i[0]||o-this.offset.click.left>i[2]?o:o-this.offset.click.left>=i[0]?o-a.grid[0]:o+a.grid[0]:o),\"y\"===a.axis&&(h=this.originalPageX),\"x\"===a.axis&&(l=this.originalPageY)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(\"fixed\"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top),left:h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(\"fixed\"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,\"ui-draggable-dragging\"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,i,s){return s=s||this._uiHash(),t.ui.plugin.call(this,e,[i,s,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo(\"absolute\"),s.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add(\"draggable\",\"connectToSortable\",{start:function(e,i,s){var n=t.extend({},i,{item:s.element});s.sortables=[],t(s.options.connectToSortable).each(function(){var i=t(this).sortable(\"instance\");i&&!i.options.disabled&&(s.sortables.push(i),i.refreshPositions(),i._trigger(\"activate\",e,n))})},stop:function(e,i,s){var n=t.extend({},i,{item:s.element});s.cancelHelperRemoval=!1,t.each(s.sortables,function(){var t=this;t.isOver?(t.isOver=0,s.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css(\"position\"),top:t.placeholder.css(\"top\"),left:t.placeholder.css(\"left\")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger(\"deactivate\",e,n))})},drag:function(e,i,s){t.each(s.sortables,function(){var n=!1,o=this;o.positionAbs=s.positionAbs,o.helperProportions=s.helperProportions,o.offset.click=s.offset.click,o._intersectsWith(o.containerCache)&&(n=!0,t.each(s.sortables,function(){return this.positionAbs=s.positionAbs,this.helperProportions=s.helperProportions,this.offset.click=s.offset.click,this!==o&&this._intersectsWith(this.containerCache)&&t.contains(o.element[0],this.element[0])&&(n=!1),n})),n?(o.isOver||(o.isOver=1,s._parent=i.helper.parent(),o.currentItem=i.helper.appendTo(o.element).data(\"ui-sortable-item\",!0),o.options._helper=o.options.helper,o.options.helper=function(){return i.helper[0]},e.target=o.currentItem[0],o._mouseCapture(e,!0),o._mouseStart(e,!0,!0),o.offset.click.top=s.offset.click.top,o.offset.click.left=s.offset.click.left,o.offset.parent.left-=s.offset.parent.left-o.offset.parent.left,o.offset.parent.top-=s.offset.parent.top-o.offset.parent.top,s._trigger(\"toSortable\",e),s.dropped=o.element,t.each(s.sortables,function(){this.refreshPositions()}),s.currentItem=s.element,o.fromOutside=s),o.currentItem&&(o._mouseDrag(e),i.position=o.position)):o.isOver&&(o.isOver=0,o.cancelHelperRemoval=!0,o.options._revert=o.options.revert,o.options.revert=!1,o._trigger(\"out\",e,o._uiHash(o)),o._mouseStop(e,!0),o.options.revert=o.options._revert,o.options.helper=o.options._helper,o.placeholder&&o.placeholder.remove(),i.helper.appendTo(s._parent),s._refreshOffsets(e),i.position=s._generatePosition(e,!0),s._trigger(\"fromSortable\",e),s.dropped=!1,t.each(s.sortables,function(){this.refreshPositions()}))})}}),t.ui.plugin.add(\"draggable\",\"cursor\",{start:function(e,i,s){var n=t(\"body\"),o=s.options;n.css(\"cursor\")&&(o._cursor=n.css(\"cursor\")),n.css(\"cursor\",o.cursor)},stop:function(e,i,s){var n=s.options;n._cursor&&t(\"body\").css(\"cursor\",n._cursor)}}),t.ui.plugin.add(\"draggable\",\"opacity\",{start:function(e,i,s){var n=t(i.helper),o=s.options;n.css(\"opacity\")&&(o._opacity=n.css(\"opacity\")),n.css(\"opacity\",o.opacity)},stop:function(e,i,s){var n=s.options;n._opacity&&t(i.helper).css(\"opacity\",n._opacity)}}),t.ui.plugin.add(\"draggable\",\"scroll\",{start:function(t,e,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&\"HTML\"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(e,i,s){var n=s.options,o=!1,a=s.scrollParentNotHidden[0],r=s.document[0];a!==r&&\"HTML\"!==a.tagName?(n.axis&&\"x\"===n.axis||(s.overflowOffset.top+a.offsetHeight-e.pageY<n.scrollSensitivity?a.scrollTop=o=a.scrollTop+n.scrollSpeed:e.pageY-s.overflowOffset.top<n.scrollSensitivity&&(a.scrollTop=o=a.scrollTop-n.scrollSpeed)),n.axis&&\"y\"===n.axis||(s.overflowOffset.left+a.offsetWidth-e.pageX<n.scrollSensitivity?a.scrollLeft=o=a.scrollLeft+n.scrollSpeed:e.pageX-s.overflowOffset.left<n.scrollSensitivity&&(a.scrollLeft=o=a.scrollLeft-n.scrollSpeed))):(n.axis&&\"x\"===n.axis||(e.pageY-t(r).scrollTop()<n.scrollSensitivity?o=t(r).scrollTop(t(r).scrollTop()-n.scrollSpeed):t(window).height()-(e.pageY-t(r).scrollTop())<n.scrollSensitivity&&(o=t(r).scrollTop(t(r).scrollTop()+n.scrollSpeed))),n.axis&&\"y\"===n.axis||(e.pageX-t(r).scrollLeft()<n.scrollSensitivity?o=t(r).scrollLeft(t(r).scrollLeft()-n.scrollSpeed):t(window).width()-(e.pageX-t(r).scrollLeft())<n.scrollSensitivity&&(o=t(r).scrollLeft(t(r).scrollLeft()+n.scrollSpeed)))),o!==!1&&t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(s,e)}}),t.ui.plugin.add(\"draggable\",\"snap\",{start:function(e,i,s){var n=s.options;s.snapElements=[],t(n.snap.constructor!==String?n.snap.items||\":data(ui-draggable)\":n.snap).each(function(){var e=t(this),i=e.offset();this!==s.element[0]&&s.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:i.top,left:i.left})})},drag:function(e,i,s){var n,o,a,r,h,l,c,u,d,p,f=s.options,g=f.snapTolerance,m=i.offset.left,_=m+s.helperProportions.width,v=i.offset.top,b=v+s.helperProportions.height;for(d=s.snapElements.length-1;d>=0;d--)h=s.snapElements[d].left-s.margins.left,l=h+s.snapElements[d].width,c=s.snapElements[d].top-s.margins.top,u=c+s.snapElements[d].height,h-g>_||m>l+g||c-g>b||v>u+g||!t.contains(s.snapElements[d].item.ownerDocument,s.snapElements[d].item)?(s.snapElements[d].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[d].item})),s.snapElements[d].snapping=!1):(\"inner\"!==f.snapMode&&(n=g>=Math.abs(c-b),o=g>=Math.abs(u-v),a=g>=Math.abs(h-_),r=g>=Math.abs(l-m),n&&(i.position.top=s._convertPositionTo(\"relative\",{top:c-s.helperProportions.height,left:0}).top),o&&(i.position.top=s._convertPositionTo(\"relative\",{top:u,left:0}).top),a&&(i.position.left=s._convertPositionTo(\"relative\",{top:0,left:h-s.helperProportions.width}).left),r&&(i.position.left=s._convertPositionTo(\"relative\",{top:0,left:l}).left)),p=n||o||a||r,\"outer\"!==f.snapMode&&(n=g>=Math.abs(c-v),o=g>=Math.abs(u-b),a=g>=Math.abs(h-m),r=g>=Math.abs(l-_),n&&(i.position.top=s._convertPositionTo(\"relative\",{top:c,left:0}).top),o&&(i.position.top=s._convertPositionTo(\"relative\",{top:u-s.helperProportions.height,left:0}).top),a&&(i.position.left=s._convertPositionTo(\"relative\",{top:0,left:h}).left),r&&(i.position.left=s._convertPositionTo(\"relative\",{top:0,left:l-s.helperProportions.width}).left)),!s.snapElements[d].snapping&&(n||o||a||r||p)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[d].item})),s.snapElements[d].snapping=n||o||a||r||p)}}),t.ui.plugin.add(\"draggable\",\"stack\",{start:function(e,i,s){var n,o=s.options,a=t.makeArray(t(o.stack)).sort(function(e,i){return(parseInt(t(e).css(\"zIndex\"),10)||0)-(parseInt(t(i).css(\"zIndex\"),10)||0)});a.length&&(n=parseInt(t(a[0]).css(\"zIndex\"),10)||0,t(a).each(function(e){t(this).css(\"zIndex\",n+e)}),this.css(\"zIndex\",n+a.length))}}),t.ui.plugin.add(\"draggable\",\"zIndex\",{start:function(e,i,s){var n=t(i.helper),o=s.options;n.css(\"zIndex\")&&(o._zIndex=n.css(\"zIndex\")),n.css(\"zIndex\",o.zIndex)},stop:function(e,i,s){var n=s.options;n._zIndex&&t(i.helper).css(\"zIndex\",n._zIndex)}}),t.ui.draggable,t.widget(\"ui.resizable\",t.ui.mouse,{version:\"1.12.1\",widgetEventPrefix:\"resize\",options:{alsoResize:!1,animate:!1,animateDuration:\"slow\",animateEasing:\"swing\",aspectRatio:!1,autoHide:!1,classes:{\"ui-resizable-se\":\"ui-icon ui-icon-gripsmall-diagonal-se\"},containment:!1,ghost:!1,grid:!1,handles:\"e,s,se\",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseFloat(t)||0},_isNumber:function(t){return!isNaN(parseFloat(t))},_hasScroll:function(e,i){if(\"hidden\"===t(e).css(\"overflow\"))return!1;var s=i&&\"left\"===i?\"scrollLeft\":\"scrollTop\",n=!1;return e[s]>0?!0:(e[s]=1,n=e[s]>0,e[s]=0,n)},_create:function(){var e,i=this.options,s=this;this._addClass(\"ui-resizable\"),t.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||\"ui-resizable-helper\":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(t(\"<div class='ui-wrapper' style='overflow: hidden;'></div>\").css({position:this.element.css(\"position\"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css(\"top\"),left:this.element.css(\"left\")})),this.element=this.element.parent().data(\"ui-resizable\",this.element.resizable(\"instance\")),this.elementIsWrapper=!0,e={marginTop:this.originalElement.css(\"marginTop\"),marginRight:this.originalElement.css(\"marginRight\"),marginBottom:this.originalElement.css(\"marginBottom\"),marginLeft:this.originalElement.css(\"marginLeft\")},this.element.css(e),this.originalElement.css(\"margin\",0),this.originalResizeStyle=this.originalElement.css(\"resize\"),this.originalElement.css(\"resize\",\"none\"),this._proportionallyResizeElements.push(this.originalElement.css({position:\"static\",zoom:1,display:\"block\"})),this.originalElement.css(e),this._proportionallyResize()),this._setupHandles(),i.autoHide&&t(this.element).on(\"mouseenter\",function(){i.disabled||(s._removeClass(\"ui-resizable-autohide\"),s._handles.show())}).on(\"mouseleave\",function(){i.disabled||s.resizing||(s._addClass(\"ui-resizable-autohide\"),s._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeData(\"resizable\").removeData(\"ui-resizable\").off(\".resizable\").find(\".ui-resizable-handle\").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css(\"position\"),width:e.outerWidth(),height:e.outerHeight(),top:e.css(\"top\"),left:e.css(\"left\")}).insertAfter(e),e.remove()),this.originalElement.css(\"resize\",this.originalResizeStyle),i(this.originalElement),this},_setOption:function(t,e){switch(this._super(t,e),t){case\"handles\":this._removeHandles(),this._setupHandles();break;default:}},_setupHandles:function(){var e,i,s,n,o,a=this.options,r=this;if(this.handles=a.handles||(t(\".ui-resizable-handle\",this.element).length?{n:\".ui-resizable-n\",e:\".ui-resizable-e\",s:\".ui-resizable-s\",w:\".ui-resizable-w\",se:\".ui-resizable-se\",sw:\".ui-resizable-sw\",ne:\".ui-resizable-ne\",nw:\".ui-resizable-nw\"}:\"e,s,se\"),this._handles=t(),this.handles.constructor===String)for(\"all\"===this.handles&&(this.handles=\"n,e,s,w,se,sw,ne,nw\"),s=this.handles.split(\",\"),this.handles={},i=0;s.length>i;i++)e=t.trim(s[i]),n=\"ui-resizable-\"+e,o=t(\"<div>\"),this._addClass(o,\"ui-resizable-handle \"+n),o.css({zIndex:a.zIndex}),this.handles[e]=\".ui-resizable-\"+e,this.element.append(o);this._renderAxis=function(e){var i,s,n,o;e=e||this.element;for(i in this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=t(this.handles[i]),this._on(this.handles[i],{mousedown:r._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(s=t(this.handles[i],this.element),o=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),n=[\"padding\",/ne|nw|n/.test(i)?\"Top\":/se|sw|s/.test(i)?\"Bottom\":/^e$/.test(i)?\"Right\":\"Left\"].join(\"\"),e.css(n,o),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(\".ui-resizable-handle\")),this._handles.disableSelection(),this._handles.on(\"mouseover\",function(){r.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),r.axis=o&&o[1]?o[1]:\"se\")}),a.autoHide&&(this._handles.hide(),this._addClass(\"ui-resizable-autohide\"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(e){var i,s,n=!1;for(i in this.handles)s=t(this.handles[i])[0],(s===e.target||t.contains(s,e.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(e){var i,s,n,o=this.options,a=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css(\"left\")),s=this._num(this.helper.css(\"top\")),o.containment&&(i+=t(o.containment).scrollLeft()||0,s+=t(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:s},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalPosition={left:i,top:s},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio=\"number\"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,n=t(\".ui-resizable-\"+this.axis).css(\"cursor\"),t(\"body\").css(\"cursor\",\"auto\"===n?this.axis+\"-resize\":n),this._addClass(\"ui-resizable-resizing\"),this._propagate(\"start\",e),!0},_mouseDrag:function(e){var i,s,n=this.originalMousePosition,o=this.axis,a=e.pageX-n.left||0,r=e.pageY-n.top||0,h=this._change[o];return this._updatePrevProperties(),h?(i=h.apply(this,[e,a,r]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate(\"resize\",e),s=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(s)||(this._updatePrevProperties(),this._trigger(\"resize\",e,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(e){this.resizing=!1;var i,s,n,o,a,r,h,l=this.options,c=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),n=s&&this._hasScroll(i[0],\"left\")?0:c.sizeDiff.height,o=s?0:c.sizeDiff.width,a={width:c.helper.width()-o,height:c.helper.height()-n},r=parseFloat(c.element.css(\"left\"))+(c.position.left-c.originalPosition.left)||null,h=parseFloat(c.element.css(\"top\"))+(c.position.top-c.originalPosition.top)||null,l.animate||this.element.css(t.extend(a,{top:h,left:r})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!l.animate&&this._proportionallyResize()),t(\"body\").css(\"cursor\",\"auto\"),this._removeClass(\"ui-resizable-resizing\"),this._propagate(\"stop\",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+\"px\"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+\"px\"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+\"px\"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+\"px\"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,i,s,n,o,a=this.options;o={minWidth:this._isNumber(a.minWidth)?a.minWidth:0,maxWidth:this._isNumber(a.maxWidth)?a.maxWidth:1/0,minHeight:this._isNumber(a.minHeight)?a.minHeight:0,maxHeight:this._isNumber(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||t)&&(e=o.minHeight*this.aspectRatio,s=o.minWidth/this.aspectRatio,i=o.maxHeight*this.aspectRatio,n=o.maxWidth/this.aspectRatio,e>o.minWidth&&(o.minWidth=e),s>o.minHeight&&(o.minHeight=s),o.maxWidth>i&&(o.maxWidth=i),o.maxHeight>n&&(o.maxHeight=n)),this._vBoundaries=o},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,s=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),\"sw\"===s&&(t.left=e.left+(i.width-t.width),t.top=null),\"nw\"===s&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,s=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,n=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,o=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,a=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,r=this.originalPosition.left+this.originalSize.width,h=this.originalPosition.top+this.originalSize.height,l=/sw|nw|w/.test(i),c=/nw|ne|n/.test(i);return o&&(t.width=e.minWidth),a&&(t.height=e.minHeight),s&&(t.width=e.maxWidth),n&&(t.height=e.maxHeight),o&&l&&(t.left=r-e.minWidth),s&&l&&(t.left=r-e.maxWidth),a&&c&&(t.top=h-e.minHeight),n&&c&&(t.top=h-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,i=[],s=[t.css(\"borderTopWidth\"),t.css(\"borderRightWidth\"),t.css(\"borderBottomWidth\"),t.css(\"borderLeftWidth\")],n=[t.css(\"paddingTop\"),t.css(\"paddingRight\"),t.css(\"paddingBottom\"),t.css(\"paddingLeft\")];4>e;e++)i[e]=parseFloat(s[e])||0,i[e]+=parseFloat(n[e])||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,i=this.helper||this.element;this._proportionallyResizeElements.length>e;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t(\"<div style='overflow:hidden;'></div>\"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:\"absolute\",left:this.elementOffset.left+\"px\",top:this.elementOffset.top+\"px\",zIndex:++i.zIndex}),this.helper.appendTo(\"body\").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize,s=this.originalPosition;return{left:s.left+e,width:i.width-e}},n:function(t,e,i){var s=this.originalSize,n=this.originalPosition;return{top:n.top+i,height:s.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},sw:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,s]))},ne:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},nw:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,s]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),\"resize\"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add(\"resizable\",\"animate\",{stop:function(e){var i=t(this).resizable(\"instance\"),s=i.options,n=i._proportionallyResizeElements,o=n.length&&/textarea/i.test(n[0].nodeName),a=o&&i._hasScroll(n[0],\"left\")?0:i.sizeDiff.height,r=o?0:i.sizeDiff.width,h={width:i.size.width-r,height:i.size.height-a},l=parseFloat(i.element.css(\"left\"))+(i.position.left-i.originalPosition.left)||null,c=parseFloat(i.element.css(\"top\"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(h,c&&l?{top:c,left:l}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseFloat(i.element.css(\"width\")),height:parseFloat(i.element.css(\"height\")),top:parseFloat(i.element.css(\"top\")),left:parseFloat(i.element.css(\"left\"))};n&&n.length&&t(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate(\"resize\",e)}})}}),t.ui.plugin.add(\"resizable\",\"containment\",{start:function(){var e,i,s,n,o,a,r,h=t(this).resizable(\"instance\"),l=h.options,c=h.element,u=l.containment,d=u instanceof t?u.get(0):/parent/.test(u)?c.parent().get(0):u;d&&(h.containerElement=t(d),/document/.test(u)||u===document?(h.containerOffset={left:0,top:0},h.containerPosition={left:0,top:0},h.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(d),i=[],t([\"Top\",\"Right\",\"Left\",\"Bottom\"]).each(function(t,s){i[t]=h._num(e.css(\"padding\"+s))}),h.containerOffset=e.offset(),h.containerPosition=e.position(),h.containerSize={height:e.innerHeight()-i[3],width:e.innerWidth()-i[1]},s=h.containerOffset,n=h.containerSize.height,o=h.containerSize.width,a=h._hasScroll(d,\"left\")?d.scrollWidth:o,r=h._hasScroll(d)?d.scrollHeight:n,h.parentData={element:d,left:s.left,top:s.top,width:a,height:r}))},resize:function(e){var i,s,n,o,a=t(this).resizable(\"instance\"),r=a.options,h=a.containerOffset,l=a.position,c=a._aspectRatio||e.shiftKey,u={top:0,left:0},d=a.containerElement,p=!0;d[0]!==document&&/static/.test(d.css(\"position\"))&&(u=h),l.left<(a._helper?h.left:0)&&(a.size.width=a.size.width+(a._helper?a.position.left-h.left:a.position.left-u.left),c&&(a.size.height=a.size.width/a.aspectRatio,p=!1),a.position.left=r.helper?h.left:0),l.top<(a._helper?h.top:0)&&(a.size.height=a.size.height+(a._helper?a.position.top-h.top:a.position.top),c&&(a.size.width=a.size.height*a.aspectRatio,p=!1),a.position.top=a._helper?h.top:0),n=a.containerElement.get(0)===a.element.parent().get(0),o=/relative|absolute/.test(a.containerElement.css(\"position\")),n&&o?(a.offset.left=a.parentData.left+a.position.left,a.offset.top=a.parentData.top+a.position.top):(a.offset.left=a.element.offset().left,a.offset.top=a.element.offset().top),i=Math.abs(a.sizeDiff.width+(a._helper?a.offset.left-u.left:a.offset.left-h.left)),s=Math.abs(a.sizeDiff.height+(a._helper?a.offset.top-u.top:a.offset.top-h.top)),i+a.size.width>=a.parentData.width&&(a.size.width=a.parentData.width-i,c&&(a.size.height=a.size.width/a.aspectRatio,p=!1)),s+a.size.height>=a.parentData.height&&(a.size.height=a.parentData.height-s,c&&(a.size.width=a.size.height*a.aspectRatio,p=!1)),p||(a.position.left=a.prevPosition.left,a.position.top=a.prevPosition.top,a.size.width=a.prevSize.width,a.size.height=a.prevSize.height)},stop:function(){var e=t(this).resizable(\"instance\"),i=e.options,s=e.containerOffset,n=e.containerPosition,o=e.containerElement,a=t(e.helper),r=a.offset(),h=a.outerWidth()-e.sizeDiff.width,l=a.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(o.css(\"position\"))&&t(this).css({left:r.left-n.left-s.left,width:h,height:l}),e._helper&&!i.animate&&/static/.test(o.css(\"position\"))&&t(this).css({left:r.left-n.left-s.left,width:h,height:l})}}),t.ui.plugin.add(\"resizable\",\"alsoResize\",{start:function(){var e=t(this).resizable(\"instance\"),i=e.options;t(i.alsoResize).each(function(){var e=t(this);e.data(\"ui-resizable-alsoresize\",{width:parseFloat(e.width()),height:parseFloat(e.height()),left:parseFloat(e.css(\"left\")),top:parseFloat(e.css(\"top\"))})})},resize:function(e,i){var s=t(this).resizable(\"instance\"),n=s.options,o=s.originalSize,a=s.originalPosition,r={height:s.size.height-o.height||0,width:s.size.width-o.width||0,top:s.position.top-a.top||0,left:s.position.left-a.left||0};t(n.alsoResize).each(function(){var e=t(this),s=t(this).data(\"ui-resizable-alsoresize\"),n={},o=e.parents(i.originalElement[0]).length?[\"width\",\"height\"]:[\"width\",\"height\",\"top\",\"left\"];t.each(o,function(t,e){var i=(s[e]||0)+(r[e]||0);i&&i>=0&&(n[e]=i||null)}),e.css(n)})},stop:function(){t(this).removeData(\"ui-resizable-alsoresize\")}}),t.ui.plugin.add(\"resizable\",\"ghost\",{start:function(){var e=t(this).resizable(\"instance\"),i=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:\"block\",position:\"relative\",height:i.height,width:i.width,margin:0,left:0,top:0}),e._addClass(e.ghost,\"ui-resizable-ghost\"),t.uiBackCompat!==!1&&\"string\"==typeof e.options.ghost&&e.ghost.addClass(this.options.ghost),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).resizable(\"instance\");e.ghost&&e.ghost.css({position:\"relative\",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).resizable(\"instance\");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add(\"resizable\",\"grid\",{resize:function(){var e,i=t(this).resizable(\"instance\"),s=i.options,n=i.size,o=i.originalSize,a=i.originalPosition,r=i.axis,h=\"number\"==typeof s.grid?[s.grid,s.grid]:s.grid,l=h[0]||1,c=h[1]||1,u=Math.round((n.width-o.width)/l)*l,d=Math.round((n.height-o.height)/c)*c,p=o.width+u,f=o.height+d,g=s.maxWidth&&p>s.maxWidth,m=s.maxHeight&&f>s.maxHeight,_=s.minWidth&&s.minWidth>p,v=s.minHeight&&s.minHeight>f;s.grid=h,_&&(p+=l),v&&(f+=c),g&&(p-=l),m&&(f-=c),/^(se|s|e)$/.test(r)?(i.size.width=p,i.size.height=f):/^(ne)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.top=a.top-d):/^(sw)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.left=a.left-u):((0>=f-c||0>=p-l)&&(e=i._getPaddingPlusBorderDimensions(this)),f-c>0?(i.size.height=f,i.position.top=a.top-d):(f=c-e.height,i.size.height=f,i.position.top=a.top+o.height-f),p-l>0?(i.size.width=p,i.position.left=a.left-u):(p=l-e.width,i.size.width=p,i.position.left=a.left+o.width-p))}}),t.ui.resizable,t.widget(\"ui.dialog\",{version:\"1.12.1\",options:{appendTo:\"body\",autoOpen:!0,buttons:[],classes:{\"ui-dialog\":\"ui-corner-all\",\"ui-dialog-titlebar\":\"ui-corner-all\"},closeOnEscape:!0,closeText:\"Close\",draggable:!0,hide:null,height:\"auto\",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:\"center\",at:\"center\",of:window,collision:\"fit\",using:function(e){var i=t(this).css(e).offset().top;0>i&&t(this).css(\"top\",e.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr(\"title\"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr(\"title\").appendTo(this.uiDialog),this._addClass(\"ui-dialog-content\",\"ui-widget-content\"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&t.fn.draggable&&this._makeDraggable(),this.options.resizable&&t.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?t(e):this.document.find(e||\"body\").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr(\"title\",this.originalTitle),t=e.parent.children().eq(e.index),t.length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog\n},disable:t.noop,enable:t.noop,close:function(e){var i=this;this._isOpen&&this._trigger(\"beforeClose\",e)!==!1&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(\":focusable\").trigger(\"focus\").length||t.ui.safeBlur(t.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,function(){i._trigger(\"close\",e)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,i){var s=!1,n=this.uiDialog.siblings(\".ui-front:visible\").map(function(){return+t(this).css(\"z-index\")}).get(),o=Math.max.apply(null,n);return o>=+this.uiDialog.css(\"z-index\")&&(this.uiDialog.css(\"z-index\",o+1),s=!0),s&&!i&&this._trigger(\"focus\",e),s},open:function(){var e=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),void 0):(this._isOpen=!0,this.opener=t(t.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css(\"z-index\",this.uiDialog.css(\"z-index\")-1),this._show(this.uiDialog,this.options.show,function(){e._focusTabbable(),e._trigger(\"focus\")}),this._makeFocusTarget(),this._trigger(\"open\"),void 0)},_focusTabbable:function(){var t=this._focusedElement;t||(t=this.element.find(\"[autofocus]\")),t.length||(t=this.element.find(\":tabbable\")),t.length||(t=this.uiDialogButtonPane.find(\":tabbable\")),t.length||(t=this.uiDialogTitlebarClose.filter(\":tabbable\")),t.length||(t=this.uiDialog),t.eq(0).trigger(\"focus\")},_keepFocus:function(e){function i(){var e=t.ui.safeActiveElement(this.document[0]),i=this.uiDialog[0]===e||t.contains(this.uiDialog[0],e);i||this._focusTabbable()}e.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=t(\"<div>\").hide().attr({tabIndex:-1,role:\"dialog\"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,\"ui-dialog\",\"ui-widget ui-widget-content ui-front\"),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE)return e.preventDefault(),this.close(e),void 0;if(e.keyCode===t.ui.keyCode.TAB&&!e.isDefaultPrevented()){var i=this.uiDialog.find(\":tabbable\"),s=i.filter(\":first\"),n=i.filter(\":last\");e.target!==n[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==s[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(this._delay(function(){n.trigger(\"focus\")}),e.preventDefault()):(this._delay(function(){s.trigger(\"focus\")}),e.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find(\"[aria-describedby]\").length||this.uiDialog.attr({\"aria-describedby\":this.element.uniqueId().attr(\"id\")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=t(\"<div>\"),this._addClass(this.uiDialogTitlebar,\"ui-dialog-titlebar\",\"ui-widget-header ui-helper-clearfix\"),this._on(this.uiDialogTitlebar,{mousedown:function(e){t(e.target).closest(\".ui-dialog-titlebar-close\")||this.uiDialog.trigger(\"focus\")}}),this.uiDialogTitlebarClose=t(\"<button type='button'></button>\").button({label:t(\"<a>\").text(this.options.closeText).html(),icon:\"ui-icon-closethick\",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,\"ui-dialog-titlebar-close\"),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),e=t(\"<span>\").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(e,\"ui-dialog-title\"),this._title(e),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({\"aria-labelledby\":e.attr(\"id\")})},_title:function(t){this.options.title?t.text(this.options.title):t.html(\"&#160;\")},_createButtonPane:function(){this.uiDialogButtonPane=t(\"<div>\"),this._addClass(this.uiDialogButtonPane,\"ui-dialog-buttonpane\",\"ui-widget-content ui-helper-clearfix\"),this.uiButtonSet=t(\"<div>\").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,\"ui-dialog-buttonset\"),this._createButtons()},_createButtons:function(){var e=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),t.isEmptyObject(i)||t.isArray(i)&&!i.length?(this._removeClass(this.uiDialog,\"ui-dialog-buttons\"),void 0):(t.each(i,function(i,s){var n,o;s=t.isFunction(s)?{click:s,text:i}:s,s=t.extend({type:\"button\"},s),n=s.click,o={icon:s.icon,iconPosition:s.iconPosition,showLabel:s.showLabel,icons:s.icons,text:s.text},delete s.click,delete s.icon,delete s.iconPosition,delete s.showLabel,delete s.icons,\"boolean\"==typeof s.text&&delete s.text,t(\"<button></button>\",s).button(o).appendTo(e.uiButtonSet).on(\"click\",function(){n.apply(e.element[0],arguments)})}),this._addClass(this.uiDialog,\"ui-dialog-buttons\"),this.uiDialogButtonPane.appendTo(this.uiDialog),void 0)},_makeDraggable:function(){function e(t){return{position:t.position,offset:t.offset}}var i=this,s=this.options;this.uiDialog.draggable({cancel:\".ui-dialog-content, .ui-dialog-titlebar-close\",handle:\".ui-dialog-titlebar\",containment:\"document\",start:function(s,n){i._addClass(t(this),\"ui-dialog-dragging\"),i._blockFrames(),i._trigger(\"dragStart\",s,e(n))},drag:function(t,s){i._trigger(\"drag\",t,e(s))},stop:function(n,o){var a=o.offset.left-i.document.scrollLeft(),r=o.offset.top-i.document.scrollTop();s.position={my:\"left top\",at:\"left\"+(a>=0?\"+\":\"\")+a+\" \"+\"top\"+(r>=0?\"+\":\"\")+r,of:i.window},i._removeClass(t(this),\"ui-dialog-dragging\"),i._unblockFrames(),i._trigger(\"dragStop\",n,e(o))}})},_makeResizable:function(){function e(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}var i=this,s=this.options,n=s.resizable,o=this.uiDialog.css(\"position\"),a=\"string\"==typeof n?n:\"n,e,s,w,se,sw,ne,nw\";this.uiDialog.resizable({cancel:\".ui-dialog-content\",containment:\"document\",alsoResize:this.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:this._minHeight(),handles:a,start:function(s,n){i._addClass(t(this),\"ui-dialog-resizing\"),i._blockFrames(),i._trigger(\"resizeStart\",s,e(n))},resize:function(t,s){i._trigger(\"resize\",t,e(s))},stop:function(n,o){var a=i.uiDialog.offset(),r=a.left-i.document.scrollLeft(),h=a.top-i.document.scrollTop();s.height=i.uiDialog.height(),s.width=i.uiDialog.width(),s.position={my:\"left top\",at:\"left\"+(r>=0?\"+\":\"\")+r+\" \"+\"top\"+(h>=0?\"+\":\"\")+h,of:i.window},i._removeClass(t(this),\"ui-dialog-resizing\"),i._unblockFrames(),i._trigger(\"resizeStop\",n,e(o))}}).css(\"position\",o)},_trackFocus:function(){this._on(this.widget(),{focusin:function(e){this._makeFocusTarget(),this._focusedElement=t(e.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var e=this._trackingInstances(),i=t.inArray(this,e);-1!==i&&e.splice(i,1)},_trackingInstances:function(){var t=this.document.data(\"ui-dialog-instances\");return t||(t=[],this.document.data(\"ui-dialog-instances\",t)),t},_minHeight:function(){var t=this.options;return\"auto\"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(\":visible\");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(e){var i=this,s=!1,n={};t.each(e,function(t,e){i._setOption(t,e),t in i.sizeRelatedOptions&&(s=!0),t in i.resizableRelatedOptions&&(n[t]=e)}),s&&(this._size(),this._position()),this.uiDialog.is(\":data(ui-resizable)\")&&this.uiDialog.resizable(\"option\",n)},_setOption:function(e,i){var s,n,o=this.uiDialog;\"disabled\"!==e&&(this._super(e,i),\"appendTo\"===e&&this.uiDialog.appendTo(this._appendTo()),\"buttons\"===e&&this._createButtons(),\"closeText\"===e&&this.uiDialogTitlebarClose.button({label:t(\"<a>\").text(\"\"+this.options.closeText).html()}),\"draggable\"===e&&(s=o.is(\":data(ui-draggable)\"),s&&!i&&o.draggable(\"destroy\"),!s&&i&&this._makeDraggable()),\"position\"===e&&this._position(),\"resizable\"===e&&(n=o.is(\":data(ui-resizable)\"),n&&!i&&o.resizable(\"destroy\"),n&&\"string\"==typeof i&&o.resizable(\"option\",\"handles\",i),n||i===!1||this._makeResizable()),\"title\"===e&&this._title(this.uiDialogTitlebar.find(\".ui-dialog-title\")))},_size:function(){var t,e,i,s=this.options;this.element.show().css({width:\"auto\",minHeight:0,maxHeight:\"none\",height:0}),s.minWidth>s.width&&(s.width=s.minWidth),t=this.uiDialog.css({height:\"auto\",width:s.width}).outerHeight(),e=Math.max(0,s.minHeight-t),i=\"number\"==typeof s.maxHeight?Math.max(0,s.maxHeight-t):\"none\",\"auto\"===s.height?this.element.css({minHeight:e,maxHeight:i,height:\"auto\"}):this.element.height(Math.max(0,s.height-t)),this.uiDialog.is(\":data(ui-resizable)\")&&this.uiDialog.resizable(\"option\",\"minHeight\",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find(\"iframe\").map(function(){var e=t(this);return t(\"<div>\").css({position:\"absolute\",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return t(e.target).closest(\".ui-dialog\").length?!0:!!t(e.target).closest(\".ui-datepicker\").length},_createOverlay:function(){if(this.options.modal){var e=!0;this._delay(function(){e=!1}),this.document.data(\"ui-dialog-overlays\")||this._on(this.document,{focusin:function(t){e||this._allowInteraction(t)||(t.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=t(\"<div>\").appendTo(this._appendTo()),this._addClass(this.overlay,null,\"ui-widget-overlay ui-front\"),this._on(this.overlay,{mousedown:\"_keepFocus\"}),this.document.data(\"ui-dialog-overlays\",(this.document.data(\"ui-dialog-overlays\")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var t=this.document.data(\"ui-dialog-overlays\")-1;t?this.document.data(\"ui-dialog-overlays\",t):(this._off(this.document,\"focusin\"),this.document.removeData(\"ui-dialog-overlays\")),this.overlay.remove(),this.overlay=null}}}),t.uiBackCompat!==!1&&t.widget(\"ui.dialog\",t.ui.dialog,{options:{dialogClass:\"\"},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(t,e){\"dialogClass\"===t&&this.uiDialog.removeClass(this.options.dialogClass).addClass(e),this._superApply(arguments)}}),t.ui.dialog,t.widget(\"ui.droppable\",{version:\"1.12.1\",widgetEventPrefix:\"drop\",options:{accept:\"*\",addClasses:!0,greedy:!1,scope:\"default\",tolerance:\"intersect\",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,i=this.options,s=i.accept;this.isover=!1,this.isout=!0,this.accept=t.isFunction(s)?s:function(t){return t.is(s)},this.proportions=function(){return arguments.length?(e=arguments[0],void 0):e?e:e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(i.scope),i.addClasses&&this._addClass(\"ui-droppable\")},_addToManager:function(e){t.ui.ddmanager.droppables[e]=t.ui.ddmanager.droppables[e]||[],t.ui.ddmanager.droppables[e].push(this)},_splice:function(t){for(var e=0;t.length>e;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var e=t.ui.ddmanager.droppables[this.options.scope];this._splice(e)},_setOption:function(e,i){if(\"accept\"===e)this.accept=t.isFunction(i)?i:function(t){return t.is(i)};else if(\"scope\"===e){var s=t.ui.ddmanager.droppables[this.options.scope];this._splice(s),this._addToManager(i)}this._super(e,i)},_activate:function(e){var i=t.ui.ddmanager.current;this._addActiveClass(),i&&this._trigger(\"activate\",e,this.ui(i))},_deactivate:function(e){var i=t.ui.ddmanager.current;this._removeActiveClass(),i&&this._trigger(\"deactivate\",e,this.ui(i))},_over:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._addHoverClass(),this._trigger(\"over\",e,this.ui(i)))},_out:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._removeHoverClass(),this._trigger(\"out\",e,this.ui(i)))},_drop:function(e,i){var s=i||t.ui.ddmanager.current,n=!1;return s&&(s.currentItem||s.element)[0]!==this.element[0]?(this.element.find(\":data(ui-droppable)\").not(\".ui-draggable-dragging\").each(function(){var i=t(this).droppable(\"instance\");return i.options.greedy&&!i.options.disabled&&i.options.scope===s.options.scope&&i.accept.call(i.element[0],s.currentItem||s.element)&&v(s,t.extend(i,{offset:i.element.offset()}),i.options.tolerance,e)?(n=!0,!1):void 0}),n?!1:this.accept.call(this.element[0],s.currentItem||s.element)?(this._removeActiveClass(),this._removeHoverClass(),this._trigger(\"drop\",e,this.ui(s)),this.element):!1):!1},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}},_addHoverClass:function(){this._addClass(\"ui-droppable-hover\")},_removeHoverClass:function(){this._removeClass(\"ui-droppable-hover\")},_addActiveClass:function(){this._addClass(\"ui-droppable-active\")},_removeActiveClass:function(){this._removeClass(\"ui-droppable-active\")}});var v=t.ui.intersect=function(){function t(t,e,i){return t>=e&&e+i>t}return function(e,i,s,n){if(!i.offset)return!1;var o=(e.positionAbs||e.position.absolute).left+e.margins.left,a=(e.positionAbs||e.position.absolute).top+e.margins.top,r=o+e.helperProportions.width,h=a+e.helperProportions.height,l=i.offset.left,c=i.offset.top,u=l+i.proportions().width,d=c+i.proportions().height;switch(s){case\"fit\":return o>=l&&u>=r&&a>=c&&d>=h;case\"intersect\":return o+e.helperProportions.width/2>l&&u>r-e.helperProportions.width/2&&a+e.helperProportions.height/2>c&&d>h-e.helperProportions.height/2;case\"pointer\":return t(n.pageY,c,i.proportions().height)&&t(n.pageX,l,i.proportions().width);case\"touch\":return(a>=c&&d>=a||h>=c&&d>=h||c>a&&h>d)&&(o>=l&&u>=o||r>=l&&u>=r||l>o&&r>u);default:return!1}}}();t.ui.ddmanager={current:null,droppables:{\"default\":[]},prepareOffsets:function(e,i){var s,n,o=t.ui.ddmanager.droppables[e.options.scope]||[],a=i?i.type:null,r=(e.currentItem||e.element).find(\":data(ui-droppable)\").addBack();t:for(s=0;o.length>s;s++)if(!(o[s].options.disabled||e&&!o[s].accept.call(o[s].element[0],e.currentItem||e.element))){for(n=0;r.length>n;n++)if(r[n]===o[s].element[0]){o[s].proportions().height=0;continue t}o[s].visible=\"none\"!==o[s].element.css(\"display\"),o[s].visible&&(\"mousedown\"===a&&o[s]._activate.call(o[s],i),o[s].offset=o[s].element.offset(),o[s].proportions({width:o[s].element[0].offsetWidth,height:o[s].element[0].offsetHeight}))}},drop:function(e,i){var s=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&v(e,this,this.options.tolerance,i)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),s},dragStart:function(e,i){e.element.parentsUntil(\"body\").on(\"scroll.droppable\",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)})},drag:function(e,i){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,i),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s,n,o,a=v(e,this,this.options.tolerance,i),r=!a&&this.isover?\"isout\":a&&!this.isover?\"isover\":null;r&&(this.options.greedy&&(n=this.options.scope,o=this.element.parents(\":data(ui-droppable)\").filter(function(){return t(this).droppable(\"instance\").options.scope===n}),o.length&&(s=t(o[0]).droppable(\"instance\"),s.greedyChild=\"isover\"===r)),s&&\"isover\"===r&&(s.isover=!1,s.isout=!0,s._out.call(s,i)),this[r]=!0,this[\"isout\"===r?\"isover\":\"isout\"]=!1,this[\"isover\"===r?\"_over\":\"_out\"].call(this,i),s&&\"isout\"===r&&(s.isout=!1,s.isover=!0,s._over.call(s,i)))}})},dragStop:function(e,i){e.element.parentsUntil(\"body\").off(\"scroll.droppable\"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)}},t.uiBackCompat!==!1&&t.widget(\"ui.droppable\",t.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),t.ui.droppable,t.widget(\"ui.progressbar\",{version:\"1.12.1\",options:{classes:{\"ui-progressbar\":\"ui-corner-all\",\"ui-progressbar-value\":\"ui-corner-left\",\"ui-progressbar-complete\":\"ui-corner-right\"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.attr({role:\"progressbar\",\"aria-valuemin\":this.min}),this._addClass(\"ui-progressbar\",\"ui-widget ui-widget-content\"),this.valueDiv=t(\"<div>\").appendTo(this.element),this._addClass(this.valueDiv,\"ui-progressbar-value\",\"ui-widget-header\"),this._refreshValue()},_destroy:function(){this.element.removeAttr(\"role aria-valuemin aria-valuemax aria-valuenow\"),this.valueDiv.remove()},value:function(t){return void 0===t?this.options.value:(this.options.value=this._constrainedValue(t),this._refreshValue(),void 0)},_constrainedValue:function(t){return void 0===t&&(t=this.options.value),this.indeterminate=t===!1,\"number\"!=typeof t&&(t=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,t))},_setOptions:function(t){var e=t.value;delete t.value,this._super(t),this.options.value=this._constrainedValue(e),this._refreshValue()},_setOption:function(t,e){\"max\"===t&&(e=Math.max(this.min,e)),this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this.element.attr(\"aria-disabled\",t),this._toggleClass(null,\"ui-state-disabled\",!!t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var e=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||e>this.min).width(i.toFixed(0)+\"%\"),this._toggleClass(this.valueDiv,\"ui-progressbar-complete\",null,e===this.options.max)._toggleClass(\"ui-progressbar-indeterminate\",null,this.indeterminate),this.indeterminate?(this.element.removeAttr(\"aria-valuenow\"),this.overlayDiv||(this.overlayDiv=t(\"<div>\").appendTo(this.valueDiv),this._addClass(this.overlayDiv,\"ui-progressbar-overlay\"))):(this.element.attr({\"aria-valuemax\":this.options.max,\"aria-valuenow\":e}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==e&&(this.oldValue=e,this._trigger(\"change\")),e===this.options.max&&this._trigger(\"complete\")}}),t.widget(\"ui.selectable\",t.ui.mouse,{version:\"1.12.1\",options:{appendTo:\"body\",autoRefresh:!0,distance:0,filter:\"*\",tolerance:\"touch\",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var e=this;this._addClass(\"ui-selectable\"),this.dragged=!1,this.refresh=function(){e.elementPos=t(e.element[0]).offset(),e.selectees=t(e.options.filter,e.element[0]),e._addClass(e.selectees,\"ui-selectee\"),e.selectees.each(function(){var i=t(this),s=i.offset(),n={left:s.left-e.elementPos.left,top:s.top-e.elementPos.top};t.data(this,\"selectable-item\",{element:this,$element:i,left:n.left,top:n.top,right:n.left+i.outerWidth(),bottom:n.top+i.outerHeight(),startselected:!1,selected:i.hasClass(\"ui-selected\"),selecting:i.hasClass(\"ui-selecting\"),unselecting:i.hasClass(\"ui-unselecting\")})})},this.refresh(),this._mouseInit(),this.helper=t(\"<div>\"),this._addClass(this.helper,\"ui-selectable-helper\")},_destroy:function(){this.selectees.removeData(\"selectable-item\"),this._mouseDestroy()},_mouseStart:function(e){var i=this,s=this.options;this.opos=[e.pageX,e.pageY],this.elementPos=t(this.element[0]).offset(),this.options.disabled||(this.selectees=t(s.filter,this.element[0]),this._trigger(\"start\",e),t(s.appendTo).append(this.helper),this.helper.css({left:e.pageX,top:e.pageY,width:0,height:0}),s.autoRefresh&&this.refresh(),this.selectees.filter(\".ui-selected\").each(function(){var s=t.data(this,\"selectable-item\");s.startselected=!0,e.metaKey||e.ctrlKey||(i._removeClass(s.$element,\"ui-selected\"),s.selected=!1,i._addClass(s.$element,\"ui-unselecting\"),s.unselecting=!0,i._trigger(\"unselecting\",e,{unselecting:s.element}))}),t(e.target).parents().addBack().each(function(){var s,n=t.data(this,\"selectable-item\");return n?(s=!e.metaKey&&!e.ctrlKey||!n.$element.hasClass(\"ui-selected\"),i._removeClass(n.$element,s?\"ui-unselecting\":\"ui-selected\")._addClass(n.$element,s?\"ui-selecting\":\"ui-unselecting\"),n.unselecting=!s,n.selecting=s,n.selected=s,s?i._trigger(\"selecting\",e,{selecting:n.element}):i._trigger(\"unselecting\",e,{unselecting:n.element}),!1):void 0}))},_mouseDrag:function(e){if(this.dragged=!0,!this.options.disabled){var i,s=this,n=this.options,o=this.opos[0],a=this.opos[1],r=e.pageX,h=e.pageY;return o>r&&(i=r,r=o,o=i),a>h&&(i=h,h=a,a=i),this.helper.css({left:o,top:a,width:r-o,height:h-a}),this.selectees.each(function(){var i=t.data(this,\"selectable-item\"),l=!1,c={};i&&i.element!==s.element[0]&&(c.left=i.left+s.elementPos.left,c.right=i.right+s.elementPos.left,c.top=i.top+s.elementPos.top,c.bottom=i.bottom+s.elementPos.top,\"touch\"===n.tolerance?l=!(c.left>r||o>c.right||c.top>h||a>c.bottom):\"fit\"===n.tolerance&&(l=c.left>o&&r>c.right&&c.top>a&&h>c.bottom),l?(i.selected&&(s._removeClass(i.$element,\"ui-selected\"),i.selected=!1),i.unselecting&&(s._removeClass(i.$element,\"ui-unselecting\"),i.unselecting=!1),i.selecting||(s._addClass(i.$element,\"ui-selecting\"),i.selecting=!0,s._trigger(\"selecting\",e,{selecting:i.element}))):(i.selecting&&((e.metaKey||e.ctrlKey)&&i.startselected?(s._removeClass(i.$element,\"ui-selecting\"),i.selecting=!1,s._addClass(i.$element,\"ui-selected\"),i.selected=!0):(s._removeClass(i.$element,\"ui-selecting\"),i.selecting=!1,i.startselected&&(s._addClass(i.$element,\"ui-unselecting\"),i.unselecting=!0),s._trigger(\"unselecting\",e,{unselecting:i.element}))),i.selected&&(e.metaKey||e.ctrlKey||i.startselected||(s._removeClass(i.$element,\"ui-selected\"),i.selected=!1,s._addClass(i.$element,\"ui-unselecting\"),i.unselecting=!0,s._trigger(\"unselecting\",e,{unselecting:i.element})))))}),!1}},_mouseStop:function(e){var i=this;return this.dragged=!1,t(\".ui-unselecting\",this.element[0]).each(function(){var s=t.data(this,\"selectable-item\");i._removeClass(s.$element,\"ui-unselecting\"),s.unselecting=!1,s.startselected=!1,i._trigger(\"unselected\",e,{unselected:s.element})}),t(\".ui-selecting\",this.element[0]).each(function(){var s=t.data(this,\"selectable-item\");i._removeClass(s.$element,\"ui-selecting\")._addClass(s.$element,\"ui-selected\"),s.selecting=!1,s.selected=!0,s.startselected=!0,i._trigger(\"selected\",e,{selected:s.element})}),this._trigger(\"stop\",e),this.helper.remove(),!1}}),t.widget(\"ui.selectmenu\",[t.ui.formResetMixin,{version:\"1.12.1\",defaultElement:\"<select>\",options:{appendTo:null,classes:{\"ui-selectmenu-button-open\":\"ui-corner-top\",\"ui-selectmenu-button-closed\":\"ui-corner-all\"},disabled:null,icons:{button:\"ui-icon-triangle-1-s\"},position:{my:\"left top\",at:\"left bottom\",collision:\"none\"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var e=this.element.uniqueId().attr(\"id\");this.ids={element:e,button:e+\"-button\",menu:e+\"-menu\"},this._drawButton(),this._drawMenu(),this._bindFormResetHandler(),this._rendered=!1,this.menuItems=t()},_drawButton:function(){var e,i=this,s=this._parseOption(this.element.find(\"option:selected\"),this.element[0].selectedIndex);this.labels=this.element.labels().attr(\"for\",this.ids.button),this._on(this.labels,{click:function(t){this.button.focus(),t.preventDefault()}}),this.element.hide(),this.button=t(\"<span>\",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:\"combobox\",\"aria-expanded\":\"false\",\"aria-autocomplete\":\"list\",\"aria-owns\":this.ids.menu,\"aria-haspopup\":\"true\",title:this.element.attr(\"title\")}).insertAfter(this.element),this._addClass(this.button,\"ui-selectmenu-button ui-selectmenu-button-closed\",\"ui-button ui-widget\"),e=t(\"<span>\").appendTo(this.button),this._addClass(e,\"ui-selectmenu-icon\",\"ui-icon \"+this.options.icons.button),this.buttonItem=this._renderButtonItem(s).appendTo(this.button),this.options.width!==!1&&this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one(\"focusin\",function(){i._rendered||i._refreshMenu()})},_drawMenu:function(){var e=this;this.menu=t(\"<ul>\",{\"aria-hidden\":\"true\",\"aria-labelledby\":this.ids.button,id:this.ids.menu}),this.menuWrap=t(\"<div>\").append(this.menu),this._addClass(this.menuWrap,\"ui-selectmenu-menu\",\"ui-front\"),this.menuWrap.appendTo(this._appendTo()),this.menuInstance=this.menu.menu({classes:{\"ui-menu\":\"ui-corner-bottom\"},role:\"listbox\",select:function(t,i){t.preventDefault(),e._setSelection(),e._select(i.item.data(\"ui-selectmenu-item\"),t)},focus:function(t,i){var s=i.item.data(\"ui-selectmenu-item\");null!=e.focusIndex&&s.index!==e.focusIndex&&(e._trigger(\"focus\",t,{item:s}),e.isOpen||e._select(s,t)),e.focusIndex=s.index,e.button.attr(\"aria-activedescendant\",e.menuItems.eq(s.index).attr(\"id\"))}}).menu(\"instance\"),this.menuInstance._off(this.menu,\"mouseleave\"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data(\"ui-selectmenu-item\")||{})),null===this.options.width&&this._resizeButton()},_refreshMenu:function(){var t,e=this.element.find(\"option\");this.menu.empty(),this._parseOptions(e),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find(\"li\").not(\".ui-selectmenu-optgroup\").find(\".ui-menu-item-wrapper\"),this._rendered=!0,e.length&&(t=this._getSelectedItem(),this.menuInstance.focus(null,t),this._setAria(t.data(\"ui-selectmenu-item\")),this._setOption(\"disabled\",this.element.prop(\"disabled\")))},open:function(t){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(\".ui-state-active\"),null,\"ui-state-active\"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger(\"open\",t)))},_position:function(){this.menuWrap.position(t.extend({of:this.button},this.options.position))},close:function(t){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger(\"close\",t))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(e){var i=t(\"<span>\");return this._setText(i,e.label),this._addClass(i,\"ui-selectmenu-text\"),i},_renderMenu:function(e,i){var s=this,n=\"\";t.each(i,function(i,o){var a;o.optgroup!==n&&(a=t(\"<li>\",{text:o.optgroup}),s._addClass(a,\"ui-selectmenu-optgroup\",\"ui-menu-divider\"+(o.element.parent(\"optgroup\").prop(\"disabled\")?\" ui-state-disabled\":\"\")),a.appendTo(e),n=o.optgroup),s._renderItemData(e,o)})},_renderItemData:function(t,e){return this._renderItem(t,e).data(\"ui-selectmenu-item\",e)},_renderItem:function(e,i){var s=t(\"<li>\"),n=t(\"<div>\",{title:i.element.attr(\"title\")});return i.disabled&&this._addClass(s,null,\"ui-state-disabled\"),this._setText(n,i.label),s.append(n).appendTo(e)},_setText:function(t,e){e?t.text(e):t.html(\"&#160;\")},_move:function(t,e){var i,s,n=\".ui-menu-item\";this.isOpen?i=this.menuItems.eq(this.focusIndex).parent(\"li\"):(i=this.menuItems.eq(this.element[0].selectedIndex).parent(\"li\"),n+=\":not(.ui-state-disabled)\"),s=\"first\"===t||\"last\"===t?i[\"first\"===t?\"prevAll\":\"nextAll\"](n).eq(-1):i[t+\"All\"](n).eq(0),s.length&&this.menuInstance.focus(e,s)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent(\"li\")},_toggle:function(t){this[this.isOpen?\"close\":\"open\"](t)},_setSelection:function(){var t;this.range&&(window.getSelection?(t=window.getSelection(),t.removeAllRanges(),t.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(e){this.isOpen&&(t(e.target).closest(\".ui-selectmenu-menu, #\"+t.ui.escapeSelector(this.ids.button)).length||this.close(e))}},_buttonEvents:{mousedown:function(){var t;window.getSelection?(t=window.getSelection(),t.rangeCount&&(this.range=t.getRangeAt(0))):this.range=document.selection.createRange()},click:function(t){this._setSelection(),this._toggle(t)},keydown:function(e){var i=!0;switch(e.keyCode){case t.ui.keyCode.TAB:case t.ui.keyCode.ESCAPE:this.close(e),i=!1;break;case t.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(e);break;case t.ui.keyCode.UP:e.altKey?this._toggle(e):this._move(\"prev\",e);break;case t.ui.keyCode.DOWN:e.altKey?this._toggle(e):this._move(\"next\",e);break;case t.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(e):this._toggle(e);break;case t.ui.keyCode.LEFT:this._move(\"prev\",e);break;case t.ui.keyCode.RIGHT:this._move(\"next\",e);break;case t.ui.keyCode.HOME:case t.ui.keyCode.PAGE_UP:this._move(\"first\",e);break;case t.ui.keyCode.END:case t.ui.keyCode.PAGE_DOWN:this._move(\"last\",e);break;default:this.menu.trigger(e),i=!1}i&&e.preventDefault()}},_selectFocusedItem:function(t){var e=this.menuItems.eq(this.focusIndex).parent(\"li\");e.hasClass(\"ui-state-disabled\")||this._select(e.data(\"ui-selectmenu-item\"),t)},_select:function(t,e){var i=this.element[0].selectedIndex;this.element[0].selectedIndex=t.index,this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(t)),this._setAria(t),this._trigger(\"select\",e,{item:t}),t.index!==i&&this._trigger(\"change\",e,{item:t}),this.close(e)},_setAria:function(t){var e=this.menuItems.eq(t.index).attr(\"id\");this.button.attr({\"aria-labelledby\":e,\"aria-activedescendant\":e}),this.menu.attr(\"aria-activedescendant\",e)},_setOption:function(t,e){if(\"icons\"===t){var i=this.button.find(\"span.ui-icon\");this._removeClass(i,null,this.options.icons.button)._addClass(i,null,e.button)}this._super(t,e),\"appendTo\"===t&&this.menuWrap.appendTo(this._appendTo()),\"width\"===t&&this._resizeButton()},_setOptionDisabled:function(t){this._super(t),this.menuInstance.option(\"disabled\",t),this.button.attr(\"aria-disabled\",t),this._toggleClass(this.button,null,\"ui-state-disabled\",t),this.element.prop(\"disabled\",t),t?(this.button.attr(\"tabindex\",-1),this.close()):this.button.attr(\"tabindex\",0)},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e&&e[0]||(e=this.element.closest(\".ui-front, dialog\")),e.length||(e=this.document[0].body),e},_toggleAttr:function(){this.button.attr(\"aria-expanded\",this.isOpen),this._removeClass(this.button,\"ui-selectmenu-button-\"+(this.isOpen?\"closed\":\"open\"))._addClass(this.button,\"ui-selectmenu-button-\"+(this.isOpen?\"open\":\"closed\"))._toggleClass(this.menuWrap,\"ui-selectmenu-open\",null,this.isOpen),this.menu.attr(\"aria-hidden\",!this.isOpen)},_resizeButton:function(){var t=this.options.width;return t===!1?(this.button.css(\"width\",\"\"),void 0):(null===t&&(t=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(t),void 0)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width(\"\").outerWidth()+1))},_getCreateOptions:function(){var t=this._super();return t.disabled=this.element.prop(\"disabled\"),t},_parseOptions:function(e){var i=this,s=[];e.each(function(e,n){s.push(i._parseOption(t(n),e))}),this.items=s},_parseOption:function(t,e){var i=t.parent(\"optgroup\");return{element:t,index:e,value:t.val(),label:t.text(),optgroup:i.attr(\"label\")||\"\",disabled:i.prop(\"disabled\")||t.prop(\"disabled\")}},_destroy:function(){this._unbindFormResetHandler(),this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.labels.attr(\"for\",this.ids.element)}}]),t.widget(\"ui.slider\",t.ui.mouse,{version:\"1.12.1\",widgetEventPrefix:\"slide\",options:{animate:!1,classes:{\"ui-slider\":\"ui-corner-all\",\"ui-slider-handle\":\"ui-corner-all\",\"ui-slider-range\":\"ui-corner-all ui-widget-header\"},distance:0,max:100,min:0,orientation:\"horizontal\",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass(\"ui-slider ui-slider-\"+this.orientation,\"ui-widget ui-widget-content\"),this._refresh(),this._animateOff=!1\n},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i,s=this.options,n=this.element.find(\".ui-slider-handle\"),o=\"<span tabindex='0'></span>\",a=[];for(i=s.values&&s.values.length||1,n.length>i&&(n.slice(i).remove(),n=n.slice(0,i)),e=n.length;i>e;e++)a.push(o);this.handles=n.add(t(a.join(\"\")).appendTo(this.element)),this._addClass(this.handles,\"ui-slider-handle\",\"ui-state-default\"),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data(\"ui-slider-handle-index\",e).attr(\"tabIndex\",0)})},_createRange:function(){var e=this.options;e.range?(e.range===!0&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,\"ui-slider-range-min ui-slider-range-max\"),this.range.css({left:\"\",bottom:\"\"})):(this.range=t(\"<div>\").appendTo(this.element),this._addClass(this.range,\"ui-slider-range\")),(\"min\"===e.range||\"max\"===e.range)&&this._addClass(this.range,\"ui-slider-range-\"+e.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(e){var i,s,n,o,a,r,h,l,c=this,u=this.options;return u.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},s=this._normValueFromMouse(i),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var i=Math.abs(s-c.values(e));(n>i||n===i&&(e===c._lastChangedValue||c.values(e)===u.min))&&(n=i,o=t(this),a=e)}),r=this._start(e,a),r===!1?!1:(this._mouseSliding=!0,this._handleIndex=a,this._addClass(o,null,\"ui-state-active\"),o.trigger(\"focus\"),h=o.offset(),l=!t(e.target).parents().addBack().is(\".ui-slider-handle\"),this._clickOffset=l?{left:0,top:0}:{left:e.pageX-h.left-o.width()/2,top:e.pageY-h.top-o.height()/2-(parseInt(o.css(\"borderTopWidth\"),10)||0)-(parseInt(o.css(\"borderBottomWidth\"),10)||0)+(parseInt(o.css(\"marginTop\"),10)||0)},this.handles.hasClass(\"ui-state-hover\")||this._slide(e,a,s),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this._removeClass(this.handles,null,\"ui-state-active\"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=\"vertical\"===this.options.orientation?\"vertical\":\"horizontal\"},_normValueFromMouse:function(t){var e,i,s,n,o;return\"horizontal\"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),s=i/e,s>1&&(s=1),0>s&&(s=0),\"vertical\"===this.orientation&&(s=1-s),n=this._valueMax()-this._valueMin(),o=this._valueMin()+s*n,this._trimAlignValue(o)},_uiHash:function(t,e,i){var s={handle:this.handles[t],handleIndex:t,value:void 0!==e?e:this.value()};return this._hasMultipleValues()&&(s.value=void 0!==e?e:this.values(t),s.values=i||this.values()),s},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(t,e){return this._trigger(\"start\",t,this._uiHash(e))},_slide:function(t,e,i){var s,n,o=this.value(),a=this.values();this._hasMultipleValues()&&(n=this.values(e?0:1),o=this.values(e),2===this.options.values.length&&this.options.range===!0&&(i=0===e?Math.min(n,i):Math.max(n,i)),a[e]=i),i!==o&&(s=this._trigger(\"slide\",t,this._uiHash(e,i,a)),s!==!1&&(this._hasMultipleValues()?this.values(e,i):this.value(i)))},_stop:function(t,e){this._trigger(\"stop\",t,this._uiHash(e))},_change:function(t,e){this._keySliding||this._mouseSliding||(this._lastChangedValue=e,this._trigger(\"change\",t,this._uiHash(e)))},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(e,i){var s,n,o;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),this._change(null,e),void 0;if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this._hasMultipleValues()?this._values(e):this.value();for(s=this.options.values,n=arguments[0],o=0;s.length>o;o+=1)s[o]=this._trimAlignValue(n[o]),this._change(null,o);this._refreshValue()},_setOption:function(e,i){var s,n=0;switch(\"range\"===e&&this.options.range===!0&&(\"min\"===i?(this.options.value=this._values(0),this.options.values=null):\"max\"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(n=this.options.values.length),this._super(e,i),e){case\"orientation\":this._detectOrientation(),this._removeClass(\"ui-slider-horizontal ui-slider-vertical\")._addClass(\"ui-slider-\"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(i),this.handles.css(\"horizontal\"===i?\"bottom\":\"left\",\"\");break;case\"value\":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case\"values\":for(this._animateOff=!0,this._refreshValue(),s=n-1;s>=0;s--)this._change(null,s);this._animateOff=!1;break;case\"step\":case\"min\":case\"max\":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case\"range\":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(t){this._super(t),this._toggleClass(null,\"ui-state-disabled\",!!t)},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,s;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this._hasMultipleValues()){for(i=this.options.values.slice(),s=0;i.length>s;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(t){if(this._valueMin()>=t)return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,s=t-i;return 2*Math.abs(i)>=e&&(s+=i>0?e:-e),parseFloat(s.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),i=this.options.step,s=Math.round((t-e)/i)*i;t=s+e,t>this.options.max&&(t-=i),this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=\"\"+t,i=e.indexOf(\".\");return-1===i?0:e.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(t){\"vertical\"===t&&this.range.css({width:\"\",left:\"\"}),\"horizontal\"===t&&this.range.css({height:\"\",bottom:\"\"})},_refreshValue:function(){var e,i,s,n,o,a=this.options.range,r=this.options,h=this,l=this._animateOff?!1:r.animate,c={};this._hasMultipleValues()?this.handles.each(function(s){i=100*((h.values(s)-h._valueMin())/(h._valueMax()-h._valueMin())),c[\"horizontal\"===h.orientation?\"left\":\"bottom\"]=i+\"%\",t(this).stop(1,1)[l?\"animate\":\"css\"](c,r.animate),h.options.range===!0&&(\"horizontal\"===h.orientation?(0===s&&h.range.stop(1,1)[l?\"animate\":\"css\"]({left:i+\"%\"},r.animate),1===s&&h.range[l?\"animate\":\"css\"]({width:i-e+\"%\"},{queue:!1,duration:r.animate})):(0===s&&h.range.stop(1,1)[l?\"animate\":\"css\"]({bottom:i+\"%\"},r.animate),1===s&&h.range[l?\"animate\":\"css\"]({height:i-e+\"%\"},{queue:!1,duration:r.animate}))),e=i}):(s=this.value(),n=this._valueMin(),o=this._valueMax(),i=o!==n?100*((s-n)/(o-n)):0,c[\"horizontal\"===this.orientation?\"left\":\"bottom\"]=i+\"%\",this.handle.stop(1,1)[l?\"animate\":\"css\"](c,r.animate),\"min\"===a&&\"horizontal\"===this.orientation&&this.range.stop(1,1)[l?\"animate\":\"css\"]({width:i+\"%\"},r.animate),\"max\"===a&&\"horizontal\"===this.orientation&&this.range.stop(1,1)[l?\"animate\":\"css\"]({width:100-i+\"%\"},r.animate),\"min\"===a&&\"vertical\"===this.orientation&&this.range.stop(1,1)[l?\"animate\":\"css\"]({height:i+\"%\"},r.animate),\"max\"===a&&\"vertical\"===this.orientation&&this.range.stop(1,1)[l?\"animate\":\"css\"]({height:100-i+\"%\"},r.animate))},_handleEvents:{keydown:function(e){var i,s,n,o,a=t(e.target).data(\"ui-slider-handle-index\");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(t(e.target),null,\"ui-state-active\"),i=this._start(e,a),i===!1))return}switch(o=this.options.step,s=n=this._hasMultipleValues()?this.values(a):this.value(),e.keyCode){case t.ui.keyCode.HOME:n=this._valueMin();break;case t.ui.keyCode.END:n=this._valueMax();break;case t.ui.keyCode.PAGE_UP:n=this._trimAlignValue(s+(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(s-(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(s===this._valueMax())return;n=this._trimAlignValue(s+o);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(s===this._valueMin())return;n=this._trimAlignValue(s-o)}this._slide(e,a,n)},keyup:function(e){var i=t(e.target).data(\"ui-slider-handle-index\");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),this._removeClass(t(e.target),null,\"ui-state-active\"))}}}),t.widget(\"ui.sortable\",t.ui.mouse,{version:\"1.12.1\",widgetEventPrefix:\"sort\",ready:!1,options:{appendTo:\"parent\",axis:!1,connectWith:!1,containment:!1,cursor:\"auto\",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:\"original\",items:\"> *\",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:\"default\",tolerance:\"intersect\",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,i){return t>=e&&e+i>t},_isFloating:function(t){return/left|right/.test(t.css(\"float\"))||/inline|table-cell/.test(t.css(\"display\"))},_create:function(){this.containerCache={},this._addClass(\"ui-sortable\"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),\"handle\"===t&&this._setHandleClassName()},_setHandleClassName:function(){var e=this;this._removeClass(this.element.find(\".ui-sortable-handle\"),\"ui-sortable-handle\"),t.each(this.items,function(){e._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,\"ui-sortable-handle\")})},_destroy:function(){this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+\"-item\");return this},_mouseCapture:function(e,i){var s=null,n=!1,o=this;return this.reverting?!1:this.options.disabled||\"static\"===this.options.type?!1:(this._refreshItems(e),t(e.target).parents().each(function(){return t.data(this,o.widgetName+\"-item\")===o?(s=t(this),!1):void 0}),t.data(e.target,o.widgetName+\"-item\")===o&&(s=t(e.target)),s?!this.options.handle||i||(t(this.options.handle,s).find(\"*\").addBack().each(function(){this===e.target&&(n=!0)}),n)?(this.currentItem=s,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(e,i,s){var n,o,a=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css(\"position\",\"absolute\"),this.cssPosition=this.helper.css(\"position\"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&\"auto\"!==a.cursor&&(o=this.document.find(\"body\"),this.storedCursor=o.css(\"cursor\"),o.css(\"cursor\",a.cursor),this.storedStylesheet=t(\"<style>*{ cursor: \"+a.cursor+\" !important; }</style>\").appendTo(o)),a.opacity&&(this.helper.css(\"opacity\")&&(this._storedOpacity=this.helper.css(\"opacity\")),this.helper.css(\"opacity\",a.opacity)),a.zIndex&&(this.helper.css(\"zIndex\")&&(this._storedZIndex=this.helper.css(\"zIndex\")),this.helper.css(\"zIndex\",a.zIndex)),this.scrollParent[0]!==this.document[0]&&\"HTML\"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger(\"start\",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger(\"activate\",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this._addClass(this.helper,\"ui-sortable-helper\"),this._mouseDrag(e),!0},_mouseDrag:function(e){var i,s,n,o,a=this.options,r=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo(\"absolute\"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&\"HTML\"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+a.scrollSpeed:e.pageY-this.overflowOffset.top<a.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-a.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+a.scrollSpeed:e.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-a.scrollSpeed)):(e.pageY-this.document.scrollTop()<a.scrollSensitivity?r=this.document.scrollTop(this.document.scrollTop()-a.scrollSpeed):this.window.height()-(e.pageY-this.document.scrollTop())<a.scrollSensitivity&&(r=this.document.scrollTop(this.document.scrollTop()+a.scrollSpeed)),e.pageX-this.document.scrollLeft()<a.scrollSensitivity?r=this.document.scrollLeft(this.document.scrollLeft()-a.scrollSpeed):this.window.width()-(e.pageX-this.document.scrollLeft())<a.scrollSensitivity&&(r=this.document.scrollLeft(this.document.scrollLeft()+a.scrollSpeed))),r!==!1&&t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo(\"absolute\"),this.options.axis&&\"y\"===this.options.axis||(this.helper[0].style.left=this.position.left+\"px\"),this.options.axis&&\"x\"===this.options.axis||(this.helper[0].style.top=this.position.top+\"px\"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],n=s.item[0],o=this._intersectsWithPointer(s),o&&s.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===o?\"next\":\"prev\"]()[0]!==n&&!t.contains(this.placeholder[0],n)&&(\"semi-dynamic\"===this.options.type?!t.contains(this.element[0],n):!0)){if(this.direction=1===o?\"down\":\"up\",\"pointer\"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(e,s),this._trigger(\"change\",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger(\"sort\",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var s=this,n=this.placeholder.offset(),o=this.options.axis,a={};o&&\"x\"!==o||(a.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),o&&\"y\"!==o||(a.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(a,parseInt(this.options.revert,10)||500,function(){s._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new t.Event(\"mouseup\",{target:null})),\"original\"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,\"ui-sortable-helper\")):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger(\"deactivate\",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger(\"out\",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),\"original\"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||\"id\")||\"\").match(e.expression||/(.+)[\\-=_](.+)/);i&&s.push((e.key||i[1]+\"[]\")+\"=\"+(e.key&&e.expression?i[1]:i[2]))}),!s.length&&e.key&&s.push(e.key+\"=\"),s.join(\"&\")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},i.each(function(){s.push(t(e.item||this).attr(e.attribute||\"id\")||\"\")}),s},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,o=t.left,a=o+t.width,r=t.top,h=r+t.height,l=this.offset.click.top,c=this.offset.click.left,u=\"x\"===this.options.axis||s+l>r&&h>s+l,d=\"y\"===this.options.axis||e+c>o&&a>e+c,p=u&&d;return\"pointer\"===this.options.tolerance||this.options.forcePointerForContainers||\"pointer\"!==this.options.tolerance&&this.helperProportions[this.floating?\"width\":\"height\"]>t[this.floating?\"width\":\"height\"]?p:e+this.helperProportions.width/2>o&&a>i-this.helperProportions.width/2&&s+this.helperProportions.height/2>r&&h>n-this.helperProportions.height/2},_intersectsWithPointer:function(t){var e,i,s=\"x\"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),n=\"y\"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),o=s&&n;return o?(e=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection(),this.floating?\"right\"===i||\"down\"===e?2:1:e&&(\"down\"===e?2:1)):!1},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),s=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return this.floating&&n?\"right\"===n&&i||\"left\"===n&&!i:s&&(\"down\"===s&&e||\"up\"===s&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?\"down\":\"up\")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?\"right\":\"left\")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){function i(){r.push(this)}var s,n,o,a,r=[],h=[],l=this._connectWith();if(l&&e)for(s=l.length-1;s>=0;s--)for(o=t(l[s],this.document[0]),n=o.length-1;n>=0;n--)a=t.data(o[n],this.widgetFullName),a&&a!==this&&!a.options.disabled&&h.push([t.isFunction(a.options.items)?a.options.items.call(a.element):t(a.options.items,a.element).not(\".ui-sortable-helper\").not(\".ui-sortable-placeholder\"),a]);for(h.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(\".ui-sortable-helper\").not(\".ui-sortable-placeholder\"),this]),s=h.length-1;s>=0;s--)h[s][0].each(i);return t(r)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(\":data(\"+this.widgetName+\"-item)\");this.items=t.grep(this.items,function(t){for(var i=0;e.length>i;i++)if(e[i]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i,s,n,o,a,r,h,l,c=this.items,u=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(i=d.length-1;i>=0;i--)for(n=t(d[i],this.document[0]),s=n.length-1;s>=0;s--)o=t.data(n[s],this.widgetFullName),o&&o!==this&&!o.options.disabled&&(u.push([t.isFunction(o.options.items)?o.options.items.call(o.element[0],e,{item:this.currentItem}):t(o.options.items,o.element),o]),this.containers.push(o));for(i=u.length-1;i>=0;i--)for(a=u[i][1],r=u[i][0],s=0,l=r.length;l>s;s++)h=t(r[s]),h.data(this.widgetName+\"-item\",a),c.push({item:h,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.floating=this.items.length?\"x\"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,n,o;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?t(this.options.toleranceElement,s.item):s.item,e||(s.width=n.outerWidth(),s.height=n.outerHeight()),o=n.offset(),s.left=o.left,s.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)o=this.containers[i].element.offset(),this.containers[i].containerCache.left=o.left,this.containers[i].containerCache.top=o.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var i,s=e.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=e.currentItem[0].nodeName.toLowerCase(),n=t(\"<\"+s+\">\",e.document[0]);return e._addClass(n,\"ui-sortable-placeholder\",i||e.currentItem[0].className)._removeClass(n,\"ui-sortable-helper\"),\"tbody\"===s?e._createTrPlaceholder(e.currentItem.find(\"tr\").eq(0),t(\"<tr>\",e.document[0]).appendTo(n)):\"tr\"===s?e._createTrPlaceholder(e.currentItem,n):\"img\"===s&&n.attr(\"src\",e.currentItem.attr(\"src\")),i||n.css(\"visibility\",\"hidden\"),n},update:function(t,n){(!i||s.forcePlaceholderSize)&&(n.height()||n.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css(\"paddingTop\")||0,10)-parseInt(e.currentItem.css(\"paddingBottom\")||0,10)),n.width()||n.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css(\"paddingLeft\")||0,10)-parseInt(e.currentItem.css(\"paddingRight\")||0,10)))}}),e.placeholder=t(s.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),s.placeholder.update(e,e.placeholder)},_createTrPlaceholder:function(e,i){var s=this;e.children().each(function(){t(\"<td>&#160;</td>\",s.document[0]).attr(\"colspan\",t(this).attr(\"colspan\")||1).appendTo(i)})},_contactContainers:function(e){var i,s,n,o,a,r,h,l,c,u,d=null,p=null;for(i=this.containers.length-1;i>=0;i--)if(!t.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(d&&t.contains(this.containers[i].element[0],d.element[0]))continue;d=this.containers[i],p=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger(\"out\",e,this._uiHash(this)),this.containers[i].containerCache.over=0);if(d)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger(\"over\",e,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(n=1e4,o=null,c=d.floating||this._isFloating(this.currentItem),a=c?\"left\":\"top\",r=c?\"width\":\"height\",u=c?\"pageX\":\"pageY\",s=this.items.length-1;s>=0;s--)t.contains(this.containers[p].element[0],this.items[s].item[0])&&this.items[s].item[0]!==this.currentItem[0]&&(h=this.items[s].item.offset()[a],l=!1,e[u]-h>this.items[s][r]/2&&(l=!0),n>Math.abs(e[u]-h)&&(n=Math.abs(e[u]-h),o=this.items[s],this.direction=l?\"up\":\"down\"));if(!o&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return this.currentContainer.containerCache.over||(this.containers[p]._trigger(\"over\",e,this._uiHash()),this.currentContainer.containerCache.over=1),void 0;o?this._rearrange(e,o,null,!0):this._rearrange(e,null,this.containers[p].element,!0),this._trigger(\"change\",e,this._uiHash()),this.containers[p]._trigger(\"change\",e,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger(\"over\",e,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):\"clone\"===i.helper?this.currentItem.clone():this.currentItem;return s.parents(\"body\").length||t(\"parent\"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css(\"position\"),top:this.currentItem.css(\"top\"),left:this.currentItem.css(\"left\")}),(!s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(e){\"string\"==typeof e&&(e=e.split(\" \")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),\"left\"in e&&(this.offset.click.left=e.left+this.margins.left),\"right\"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),\"top\"in e&&(this.offset.click.top=e.top+this.margins.top),\"bottom\"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return\"absolute\"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&\"html\"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css(\"borderTopWidth\"),10)||0),left:e.left+(parseInt(this.offsetParent.css(\"borderLeftWidth\"),10)||0)}},_getRelativeOffset:function(){if(\"relative\"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css(\"top\"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css(\"left\"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css(\"marginLeft\"),10)||0,top:parseInt(this.currentItem.css(\"marginTop\"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options;\"parent\"===n.containment&&(n.containment=this.helper[0].parentNode),(\"document\"===n.containment||\"window\"===n.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,\"document\"===n.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,(\"document\"===n.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(e=t(n.containment)[0],i=t(n.containment).offset(),s=\"hidden\"!==t(e).css(\"overflow\"),this.containment=[i.left+(parseInt(t(e).css(\"borderLeftWidth\"),10)||0)+(parseInt(t(e).css(\"paddingLeft\"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css(\"borderTopWidth\"),10)||0)+(parseInt(t(e).css(\"paddingTop\"),10)||0)-this.margins.top,i.left+(s?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css(\"borderLeftWidth\"),10)||0)-(parseInt(t(e).css(\"paddingRight\"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css(\"borderTopWidth\"),10)||0)-(parseInt(t(e).css(\"paddingBottom\"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,i){i||(i=this.position);var s=\"absolute\"===e?1:-1,n=\"absolute\"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-(\"fixed\"===this.cssPosition?-this.scrollParent.scrollTop():o?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-(\"fixed\"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:n.scrollLeft())*s}},_generatePosition:function(e){var i,s,n=this.options,o=e.pageX,a=e.pageY,r=\"absolute\"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(r[0].tagName);return\"relative\"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),n.grid&&(i=this.originalPageY+Math.round((a-this.originalPageY)/n.grid[1])*n.grid[1],a=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-n.grid[1]:i+n.grid[1]:i,s=this.originalPageX+Math.round((o-this.originalPageX)/n.grid[0])*n.grid[0],o=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-n.grid[0]:s+n.grid[0]:s)),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(\"fixed\"===this.cssPosition?-this.scrollParent.scrollTop():h?0:r.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(\"fixed\"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:r.scrollLeft())}},_rearrange:function(t,e,i,s){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],\"down\"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;\nthis._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(t,e){function i(t,e,i){return function(s){i._trigger(t,s,e._uiHash(e))}}this.reverting=!1;var s,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(s in this._storedCSS)(\"auto\"===this._storedCSS[s]||\"static\"===this._storedCSS[s])&&(this._storedCSS[s]=\"\");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,\"ui-sortable-helper\")}else this.currentItem.show();for(this.fromOutside&&!e&&n.push(function(t){this._trigger(\"receive\",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(\".ui-sortable-helper\")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||n.push(function(t){this._trigger(\"update\",t,this._uiHash())}),this!==this.currentContainer&&(e||(n.push(function(t){this._trigger(\"remove\",t,this._uiHash())}),n.push(function(t){return function(e){t._trigger(\"receive\",e,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(t){return function(e){t._trigger(\"update\",e,this._uiHash(this))}}.call(this,this.currentContainer)))),s=this.containers.length-1;s>=0;s--)e||n.push(i(\"deactivate\",this,this.containers[s])),this.containers[s].containerCache.over&&(n.push(i(\"out\",this,this.containers[s])),this.containers[s].containerCache.over=0);if(this.storedCursor&&(this.document.find(\"body\").css(\"cursor\",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css(\"opacity\",this._storedOpacity),this._storedZIndex&&this.helper.css(\"zIndex\",\"auto\"===this._storedZIndex?\"\":this._storedZIndex),this.dragging=!1,e||this._trigger(\"beforeStop\",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(s=0;n.length>s;s++)n[s].call(this,t);this._trigger(\"stop\",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}}),t.widget(\"ui.spinner\",{version:\"1.12.1\",defaultElement:\"<input>\",widgetEventPrefix:\"spin\",options:{classes:{\"ui-spinner\":\"ui-corner-all\",\"ui-spinner-down\":\"ui-corner-br\",\"ui-spinner-up\":\"ui-corner-tr\"},culture:null,icons:{down:\"ui-icon-triangle-1-s\",up:\"ui-icon-triangle-1-n\"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption(\"max\",this.options.max),this._setOption(\"min\",this.options.min),this._setOption(\"step\",this.options.step),\"\"!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr(\"autocomplete\")}})},_getCreateOptions:function(){var e=this._super(),i=this.element;return t.each([\"min\",\"max\",\"step\"],function(t,s){var n=i.attr(s);null!=n&&n.length&&(e[s]=n)}),e},_events:{keydown:function(t){this._start(t)&&this._keydown(t)&&t.preventDefault()},keyup:\"_stop\",focus:function(){this.previous=this.element.val()},blur:function(t){return this.cancelBlur?(delete this.cancelBlur,void 0):(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger(\"change\",t),void 0)},mousewheel:function(t,e){if(e){if(!this.spinning&&!this._start(t))return!1;this._spin((e>0?1:-1)*this.options.step,t),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(t)},100),t.preventDefault()}},\"mousedown .ui-spinner-button\":function(e){function i(){var e=this.element[0]===t.ui.safeActiveElement(this.document[0]);e||(this.element.trigger(\"focus\"),this.previous=s,this._delay(function(){this.previous=s}))}var s;s=this.element[0]===t.ui.safeActiveElement(this.document[0])?this.previous:this.element.val(),e.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(e)!==!1&&this._repeat(null,t(e.currentTarget).hasClass(\"ui-spinner-up\")?1:-1,e)},\"mouseup .ui-spinner-button\":\"_stop\",\"mouseenter .ui-spinner-button\":function(e){return t(e.currentTarget).hasClass(\"ui-state-active\")?this._start(e)===!1?!1:(this._repeat(null,t(e.currentTarget).hasClass(\"ui-spinner-up\")?1:-1,e),void 0):void 0},\"mouseleave .ui-spinner-button\":\"_stop\"},_enhance:function(){this.uiSpinner=this.element.attr(\"autocomplete\",\"off\").wrap(\"<span>\").parent().append(\"<a></a><a></a>\")},_draw:function(){this._enhance(),this._addClass(this.uiSpinner,\"ui-spinner\",\"ui-widget ui-widget-content\"),this._addClass(\"ui-spinner-input\"),this.element.attr(\"role\",\"spinbutton\"),this.buttons=this.uiSpinner.children(\"a\").attr(\"tabIndex\",-1).attr(\"aria-hidden\",!0).button({classes:{\"ui-button\":\"\"}}),this._removeClass(this.buttons,\"ui-corner-all\"),this._addClass(this.buttons.first(),\"ui-spinner-button ui-spinner-up\"),this._addClass(this.buttons.last(),\"ui-spinner-button ui-spinner-down\"),this.buttons.first().button({icon:this.options.icons.up,showLabel:!1}),this.buttons.last().button({icon:this.options.icons.down,showLabel:!1}),this.buttons.height()>Math.ceil(.5*this.uiSpinner.height())&&this.uiSpinner.height()>0&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(e){var i=this.options,s=t.ui.keyCode;switch(e.keyCode){case s.UP:return this._repeat(null,1,e),!0;case s.DOWN:return this._repeat(null,-1,e),!0;case s.PAGE_UP:return this._repeat(null,i.page,e),!0;case s.PAGE_DOWN:return this._repeat(null,-i.page,e),!0}return!1},_start:function(t){return this.spinning||this._trigger(\"start\",t)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(t,e,i){t=t||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,e,i)},t),this._spin(e*this.options.step,i)},_spin:function(t,e){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+t*this._increment(this.counter)),this.spinning&&this._trigger(\"spin\",e,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(e){var i=this.options.incremental;return i?t.isFunction(i)?i(e):Math.floor(e*e*e/5e4-e*e/500+17*e/200+1):1},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=\"\"+t,i=e.indexOf(\".\");return-1===i?0:e.length-i-1},_adjustValue:function(t){var e,i,s=this.options;return e=null!==s.min?s.min:0,i=t-e,i=Math.round(i/s.step)*s.step,t=e+i,t=parseFloat(t.toFixed(this._precision())),null!==s.max&&t>s.max?s.max:null!==s.min&&s.min>t?s.min:t},_stop:function(t){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger(\"stop\",t))},_setOption:function(t,e){var i,s,n;return\"culture\"===t||\"numberFormat\"===t?(i=this._parse(this.element.val()),this.options[t]=e,this.element.val(this._format(i)),void 0):((\"max\"===t||\"min\"===t||\"step\"===t)&&\"string\"==typeof e&&(e=this._parse(e)),\"icons\"===t&&(s=this.buttons.first().find(\".ui-icon\"),this._removeClass(s,null,this.options.icons.up),this._addClass(s,null,e.up),n=this.buttons.last().find(\".ui-icon\"),this._removeClass(n,null,this.options.icons.down),this._addClass(n,null,e.down)),this._super(t,e),void 0)},_setOptionDisabled:function(t){this._super(t),this._toggleClass(this.uiSpinner,null,\"ui-state-disabled\",!!t),this.element.prop(\"disabled\",!!t),this.buttons.button(t?\"disable\":\"enable\")},_setOptions:r(function(t){this._super(t)}),_parse:function(t){return\"string\"==typeof t&&\"\"!==t&&(t=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(t,10,this.options.culture):+t),\"\"===t||isNaN(t)?null:t},_format:function(t){return\"\"===t?\"\":window.Globalize&&this.options.numberFormat?Globalize.format(t,this.options.numberFormat,this.options.culture):t},_refresh:function(){this.element.attr({\"aria-valuemin\":this.options.min,\"aria-valuemax\":this.options.max,\"aria-valuenow\":this._parse(this.element.val())})},isValid:function(){var t=this.value();return null===t?!1:t===this._adjustValue(t)},_value:function(t,e){var i;\"\"!==t&&(i=this._parse(t),null!==i&&(e||(i=this._adjustValue(i)),t=this._format(i))),this.element.val(t),this._refresh()},_destroy:function(){this.element.prop(\"disabled\",!1).removeAttr(\"autocomplete role aria-valuemin aria-valuemax aria-valuenow\"),this.uiSpinner.replaceWith(this.element)},stepUp:r(function(t){this._stepUp(t)}),_stepUp:function(t){this._start()&&(this._spin((t||1)*this.options.step),this._stop())},stepDown:r(function(t){this._stepDown(t)}),_stepDown:function(t){this._start()&&(this._spin((t||1)*-this.options.step),this._stop())},pageUp:r(function(t){this._stepUp((t||1)*this.options.page)}),pageDown:r(function(t){this._stepDown((t||1)*this.options.page)}),value:function(t){return arguments.length?(r(this._value).call(this,t),void 0):this._parse(this.element.val())},widget:function(){return this.uiSpinner}}),t.uiBackCompat!==!1&&t.widget(\"ui.spinner\",t.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr(\"autocomplete\",\"off\").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return\"<span>\"},_buttonHtml:function(){return\"<a></a><a></a>\"}}),t.ui.spinner,t.widget(\"ui.tabs\",{version:\"1.12.1\",delay:300,options:{active:null,classes:{\"ui-tabs\":\"ui-corner-all\",\"ui-tabs-nav\":\"ui-corner-all\",\"ui-tabs-panel\":\"ui-corner-bottom\",\"ui-tabs-tab\":\"ui-corner-top\"},collapsible:!1,event:\"click\",heightStyle:\"content\",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var t=/#.*$/;return function(e){var i,s;i=e.href.replace(t,\"\"),s=location.href.replace(t,\"\");try{i=decodeURIComponent(i)}catch(n){}try{s=decodeURIComponent(s)}catch(n){}return e.hash.length>1&&i===s}}(),_create:function(){var e=this,i=this.options;this.running=!1,this._addClass(\"ui-tabs\",\"ui-widget ui-widget-content\"),this._toggleClass(\"ui-tabs-collapsible\",null,i.collapsible),this._processTabs(),i.active=this._initialActive(),t.isArray(i.disabled)&&(i.disabled=t.unique(i.disabled.concat(t.map(this.tabs.filter(\".ui-state-disabled\"),function(t){return e.tabs.index(t)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(i.active):t(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var e=this.options.active,i=this.options.collapsible,s=location.hash.substring(1);return null===e&&(s&&this.tabs.each(function(i,n){return t(n).attr(\"aria-controls\")===s?(e=i,!1):void 0}),null===e&&(e=this.tabs.index(this.tabs.filter(\".ui-tabs-active\"))),(null===e||-1===e)&&(e=this.tabs.length?0:!1)),e!==!1&&(e=this.tabs.index(this.tabs.eq(e)),-1===e&&(e=i?!1:0)),!i&&e===!1&&this.anchors.length&&(e=0),e},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):t()}},_tabKeydown:function(e){var i=t(t.ui.safeActiveElement(this.document[0])).closest(\"li\"),s=this.tabs.index(i),n=!0;if(!this._handlePageNav(e)){switch(e.keyCode){case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:s++;break;case t.ui.keyCode.UP:case t.ui.keyCode.LEFT:n=!1,s--;break;case t.ui.keyCode.END:s=this.anchors.length-1;break;case t.ui.keyCode.HOME:s=0;break;case t.ui.keyCode.SPACE:return e.preventDefault(),clearTimeout(this.activating),this._activate(s),void 0;case t.ui.keyCode.ENTER:return e.preventDefault(),clearTimeout(this.activating),this._activate(s===this.options.active?!1:s),void 0;default:return}e.preventDefault(),clearTimeout(this.activating),s=this._focusNextTab(s,n),e.ctrlKey||e.metaKey||(i.attr(\"aria-selected\",\"false\"),this.tabs.eq(s).attr(\"aria-selected\",\"true\"),this.activating=this._delay(function(){this.option(\"active\",s)},this.delay))}},_panelKeydown:function(e){this._handlePageNav(e)||e.ctrlKey&&e.keyCode===t.ui.keyCode.UP&&(e.preventDefault(),this.active.trigger(\"focus\"))},_handlePageNav:function(e){return e.altKey&&e.keyCode===t.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):e.altKey&&e.keyCode===t.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(e,i){function s(){return e>n&&(e=0),0>e&&(e=n),e}for(var n=this.tabs.length-1;-1!==t.inArray(s(),this.options.disabled);)e=i?e+1:e-1;return e},_focusNextTab:function(t,e){return t=this._findNextTab(t,e),this.tabs.eq(t).trigger(\"focus\"),t},_setOption:function(t,e){return\"active\"===t?(this._activate(e),void 0):(this._super(t,e),\"collapsible\"===t&&(this._toggleClass(\"ui-tabs-collapsible\",null,e),e||this.options.active!==!1||this._activate(0)),\"event\"===t&&this._setupEvents(e),\"heightStyle\"===t&&this._setupHeightStyle(e),void 0)},_sanitizeSelector:function(t){return t?t.replace(/[!\"$%&'()*+,.\\/:;<=>?@\\[\\]\\^`{|}~]/g,\"\\\\$&\"):\"\"},refresh:function(){var e=this.options,i=this.tablist.children(\":has(a[href])\");e.disabled=t.map(i.filter(\".ui-state-disabled\"),function(t){return i.index(t)}),this._processTabs(),e.active!==!1&&this.anchors.length?this.active.length&&!t.contains(this.tablist[0],this.active[0])?this.tabs.length===e.disabled.length?(e.active=!1,this.active=t()):this._activate(this._findNextTab(Math.max(0,e.active-1),!1)):e.active=this.tabs.index(this.active):(e.active=!1,this.active=t()),this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({\"aria-selected\":\"false\",\"aria-expanded\":\"false\",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({\"aria-hidden\":\"true\"}),this.active.length?(this.active.attr({\"aria-selected\":\"true\",\"aria-expanded\":\"true\",tabIndex:0}),this._addClass(this.active,\"ui-tabs-active\",\"ui-state-active\"),this._getPanelForTab(this.active).show().attr({\"aria-hidden\":\"false\"})):this.tabs.eq(0).attr(\"tabIndex\",0)},_processTabs:function(){var e=this,i=this.tabs,s=this.anchors,n=this.panels;this.tablist=this._getList().attr(\"role\",\"tablist\"),this._addClass(this.tablist,\"ui-tabs-nav\",\"ui-helper-reset ui-helper-clearfix ui-widget-header\"),this.tablist.on(\"mousedown\"+this.eventNamespace,\"> li\",function(e){t(this).is(\".ui-state-disabled\")&&e.preventDefault()}).on(\"focus\"+this.eventNamespace,\".ui-tabs-anchor\",function(){t(this).closest(\"li\").is(\".ui-state-disabled\")&&this.blur()}),this.tabs=this.tablist.find(\"> li:has(a[href])\").attr({role:\"tab\",tabIndex:-1}),this._addClass(this.tabs,\"ui-tabs-tab\",\"ui-state-default\"),this.anchors=this.tabs.map(function(){return t(\"a\",this)[0]}).attr({role:\"presentation\",tabIndex:-1}),this._addClass(this.anchors,\"ui-tabs-anchor\"),this.panels=t(),this.anchors.each(function(i,s){var n,o,a,r=t(s).uniqueId().attr(\"id\"),h=t(s).closest(\"li\"),l=h.attr(\"aria-controls\");e._isLocal(s)?(n=s.hash,a=n.substring(1),o=e.element.find(e._sanitizeSelector(n))):(a=h.attr(\"aria-controls\")||t({}).uniqueId()[0].id,n=\"#\"+a,o=e.element.find(n),o.length||(o=e._createPanel(a),o.insertAfter(e.panels[i-1]||e.tablist)),o.attr(\"aria-live\",\"polite\")),o.length&&(e.panels=e.panels.add(o)),l&&h.data(\"ui-tabs-aria-controls\",l),h.attr({\"aria-controls\":a,\"aria-labelledby\":r}),o.attr(\"aria-labelledby\",r)}),this.panels.attr(\"role\",\"tabpanel\"),this._addClass(this.panels,\"ui-tabs-panel\",\"ui-widget-content\"),i&&(this._off(i.not(this.tabs)),this._off(s.not(this.anchors)),this._off(n.not(this.panels)))},_getList:function(){return this.tablist||this.element.find(\"ol, ul\").eq(0)},_createPanel:function(e){return t(\"<div>\").attr(\"id\",e).data(\"ui-tabs-destroy\",!0)},_setOptionDisabled:function(e){var i,s,n;for(t.isArray(e)&&(e.length?e.length===this.anchors.length&&(e=!0):e=!1),n=0;s=this.tabs[n];n++)i=t(s),e===!0||-1!==t.inArray(n,e)?(i.attr(\"aria-disabled\",\"true\"),this._addClass(i,null,\"ui-state-disabled\")):(i.removeAttr(\"aria-disabled\"),this._removeClass(i,null,\"ui-state-disabled\"));this.options.disabled=e,this._toggleClass(this.widget(),this.widgetFullName+\"-disabled\",null,e===!0)},_setupEvents:function(e){var i={};e&&t.each(e.split(\" \"),function(t,e){i[e]=\"_eventHandler\"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(t){t.preventDefault()}}),this._on(this.anchors,i),this._on(this.tabs,{keydown:\"_tabKeydown\"}),this._on(this.panels,{keydown:\"_panelKeydown\"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(e){var i,s=this.element.parent();\"fill\"===e?(i=s.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(\":visible\").each(function(){var e=t(this),s=e.css(\"position\");\"absolute\"!==s&&\"fixed\"!==s&&(i-=e.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=t(this).outerHeight(!0)}),this.panels.each(function(){t(this).height(Math.max(0,i-t(this).innerHeight()+t(this).height()))}).css(\"overflow\",\"auto\")):\"auto\"===e&&(i=0,this.panels.each(function(){i=Math.max(i,t(this).height(\"\").height())}).height(i))},_eventHandler:function(e){var i=this.options,s=this.active,n=t(e.currentTarget),o=n.closest(\"li\"),a=o[0]===s[0],r=a&&i.collapsible,h=r?t():this._getPanelForTab(o),l=s.length?this._getPanelForTab(s):t(),c={oldTab:s,oldPanel:l,newTab:r?t():o,newPanel:h};e.preventDefault(),o.hasClass(\"ui-state-disabled\")||o.hasClass(\"ui-tabs-loading\")||this.running||a&&!i.collapsible||this._trigger(\"beforeActivate\",e,c)===!1||(i.active=r?!1:this.tabs.index(o),this.active=a?t():o,this.xhr&&this.xhr.abort(),l.length||h.length||t.error(\"jQuery UI Tabs: Mismatching fragment identifier.\"),h.length&&this.load(this.tabs.index(o),e),this._toggle(e,c))},_toggle:function(e,i){function s(){o.running=!1,o._trigger(\"activate\",e,i)}function n(){o._addClass(i.newTab.closest(\"li\"),\"ui-tabs-active\",\"ui-state-active\"),a.length&&o.options.show?o._show(a,o.options.show,s):(a.show(),s())}var o=this,a=i.newPanel,r=i.oldPanel;this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,function(){o._removeClass(i.oldTab.closest(\"li\"),\"ui-tabs-active\",\"ui-state-active\"),n()}):(this._removeClass(i.oldTab.closest(\"li\"),\"ui-tabs-active\",\"ui-state-active\"),r.hide(),n()),r.attr(\"aria-hidden\",\"true\"),i.oldTab.attr({\"aria-selected\":\"false\",\"aria-expanded\":\"false\"}),a.length&&r.length?i.oldTab.attr(\"tabIndex\",-1):a.length&&this.tabs.filter(function(){return 0===t(this).attr(\"tabIndex\")}).attr(\"tabIndex\",-1),a.attr(\"aria-hidden\",\"false\"),i.newTab.attr({\"aria-selected\":\"true\",\"aria-expanded\":\"true\",tabIndex:0})},_activate:function(e){var i,s=this._findActive(e);s[0]!==this.active[0]&&(s.length||(s=this.active),i=s.find(\".ui-tabs-anchor\")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return e===!1?t():this.tabs.eq(e)},_getIndex:function(e){return\"string\"==typeof e&&(e=this.anchors.index(this.anchors.filter(\"[href$='\"+t.ui.escapeSelector(e)+\"']\"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.tablist.removeAttr(\"role\").off(this.eventNamespace),this.anchors.removeAttr(\"role tabIndex\").removeUniqueId(),this.tabs.add(this.panels).each(function(){t.data(this,\"ui-tabs-destroy\")?t(this).remove():t(this).removeAttr(\"role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded\")}),this.tabs.each(function(){var e=t(this),i=e.data(\"ui-tabs-aria-controls\");i?e.attr(\"aria-controls\",i).removeData(\"ui-tabs-aria-controls\"):e.removeAttr(\"aria-controls\")}),this.panels.show(),\"content\"!==this.options.heightStyle&&this.panels.css(\"height\",\"\")},enable:function(e){var i=this.options.disabled;i!==!1&&(void 0===e?i=!1:(e=this._getIndex(e),i=t.isArray(i)?t.map(i,function(t){return t!==e?t:null}):t.map(this.tabs,function(t,i){return i!==e?i:null})),this._setOptionDisabled(i))},disable:function(e){var i=this.options.disabled;if(i!==!0){if(void 0===e)i=!0;else{if(e=this._getIndex(e),-1!==t.inArray(e,i))return;i=t.isArray(i)?t.merge([e],i).sort():[e]}this._setOptionDisabled(i)}},load:function(e,i){e=this._getIndex(e);var s=this,n=this.tabs.eq(e),o=n.find(\".ui-tabs-anchor\"),a=this._getPanelForTab(n),r={tab:n,panel:a},h=function(t,e){\"abort\"===e&&s.panels.stop(!1,!0),s._removeClass(n,\"ui-tabs-loading\"),a.removeAttr(\"aria-busy\"),t===s.xhr&&delete s.xhr};this._isLocal(o[0])||(this.xhr=t.ajax(this._ajaxSettings(o,i,r)),this.xhr&&\"canceled\"!==this.xhr.statusText&&(this._addClass(n,\"ui-tabs-loading\"),a.attr(\"aria-busy\",\"true\"),this.xhr.done(function(t,e,n){setTimeout(function(){a.html(t),s._trigger(\"load\",i,r),h(n,e)},1)}).fail(function(t,e){setTimeout(function(){h(t,e)},1)})))},_ajaxSettings:function(e,i,s){var n=this;return{url:e.attr(\"href\").replace(/#.*$/,\"\"),beforeSend:function(e,o){return n._trigger(\"beforeLoad\",i,t.extend({jqXHR:e,ajaxSettings:o},s))}}},_getPanelForTab:function(e){var i=t(e).attr(\"aria-controls\");return this.element.find(this._sanitizeSelector(\"#\"+i))}}),t.uiBackCompat!==!1&&t.widget(\"ui.tabs\",t.ui.tabs,{_processTabs:function(){this._superApply(arguments),this._addClass(this.tabs,\"ui-tab\")}}),t.ui.tabs,t.widget(\"ui.tooltip\",{version:\"1.12.1\",options:{classes:{\"ui-tooltip\":\"ui-corner-all ui-widget-shadow\"},content:function(){var e=t(this).attr(\"title\")||\"\";return t(\"<a>\").text(e).html()},hide:!0,items:\"[title]:not([disabled])\",position:{my:\"left top+15\",at:\"left bottom\",collision:\"flipfit flip\"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(e,i){var s=(e.attr(\"aria-describedby\")||\"\").split(/\\s+/);s.push(i),e.data(\"ui-tooltip-id\",i).attr(\"aria-describedby\",t.trim(s.join(\" \")))},_removeDescribedBy:function(e){var i=e.data(\"ui-tooltip-id\"),s=(e.attr(\"aria-describedby\")||\"\").split(/\\s+/),n=t.inArray(i,s);-1!==n&&s.splice(n,1),e.removeData(\"ui-tooltip-id\"),s=t.trim(s.join(\" \")),s?e.attr(\"aria-describedby\",s):e.removeAttr(\"aria-describedby\")},_create:function(){this._on({mouseover:\"open\",focusin:\"open\"}),this.tooltips={},this.parents={},this.liveRegion=t(\"<div>\").attr({role:\"log\",\"aria-live\":\"assertive\",\"aria-relevant\":\"additions\"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,\"ui-helper-hidden-accessible\"),this.disabledTitles=t([])},_setOption:function(e,i){var s=this;this._super(e,i),\"content\"===e&&t.each(this.tooltips,function(t,e){s._updateContent(e.element)})},_setOptionDisabled:function(t){this[t?\"_disable\":\"_enable\"]()},_disable:function(){var e=this;t.each(this.tooltips,function(i,s){var n=t.Event(\"blur\");n.target=n.currentTarget=s.element[0],e.close(n,!0)}),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var e=t(this);return e.is(\"[title]\")?e.data(\"ui-tooltip-title\",e.attr(\"title\")).removeAttr(\"title\"):void 0}))},_enable:function(){this.disabledTitles.each(function(){var e=t(this);e.data(\"ui-tooltip-title\")&&e.attr(\"title\",e.data(\"ui-tooltip-title\"))}),this.disabledTitles=t([])},open:function(e){var i=this,s=t(e?e.target:this.element).closest(this.options.items);s.length&&!s.data(\"ui-tooltip-id\")&&(s.attr(\"title\")&&s.data(\"ui-tooltip-title\",s.attr(\"title\")),s.data(\"ui-tooltip-open\",!0),e&&\"mouseover\"===e.type&&s.parents().each(function(){var e,s=t(this);s.data(\"ui-tooltip-open\")&&(e=t.Event(\"blur\"),e.target=e.currentTarget=this,i.close(e,!0)),s.attr(\"title\")&&(s.uniqueId(),i.parents[this.id]={element:this,title:s.attr(\"title\")},s.attr(\"title\",\"\"))}),this._registerCloseHandlers(e,s),this._updateContent(s,e))},_updateContent:function(t,e){var i,s=this.options.content,n=this,o=e?e.type:null;return\"string\"==typeof s||s.nodeType||s.jquery?this._open(e,t,s):(i=s.call(t[0],function(i){n._delay(function(){t.data(\"ui-tooltip-open\")&&(e&&(e.type=o),this._open(e,t,i))})}),i&&this._open(e,t,i),void 0)},_open:function(e,i,s){function n(t){l.of=t,a.is(\":hidden\")||a.position(l)}var o,a,r,h,l=t.extend({},this.options.position);if(s){if(o=this._find(i))return o.tooltip.find(\".ui-tooltip-content\").html(s),void 0;i.is(\"[title]\")&&(e&&\"mouseover\"===e.type?i.attr(\"title\",\"\"):i.removeAttr(\"title\")),o=this._tooltip(i),a=o.tooltip,this._addDescribedBy(i,a.attr(\"id\")),a.find(\".ui-tooltip-content\").html(s),this.liveRegion.children().hide(),h=t(\"<div>\").html(a.find(\".ui-tooltip-content\").html()),h.removeAttr(\"name\").find(\"[name]\").removeAttr(\"name\"),h.removeAttr(\"id\").find(\"[id]\").removeAttr(\"id\"),h.appendTo(this.liveRegion),this.options.track&&e&&/^mouse/.test(e.type)?(this._on(this.document,{mousemove:n}),n(e)):a.position(t.extend({of:i},this.options.position)),a.hide(),this._show(a,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(r=this.delayedShow=setInterval(function(){a.is(\":visible\")&&(n(l.of),clearInterval(r))},t.fx.interval)),this._trigger(\"open\",e,{tooltip:a})}},_registerCloseHandlers:function(e,i){var s={keyup:function(e){if(e.keyCode===t.ui.keyCode.ESCAPE){var s=t.Event(e);s.currentTarget=i[0],this.close(s,!0)}}};i[0]!==this.element[0]&&(s.remove=function(){this._removeTooltip(this._find(i).tooltip)}),e&&\"mouseover\"!==e.type||(s.mouseleave=\"close\"),e&&\"focusin\"!==e.type||(s.focusout=\"close\"),this._on(!0,i,s)},close:function(e){var i,s=this,n=t(e?e.currentTarget:this.element),o=this._find(n);return o?(i=o.tooltip,o.closing||(clearInterval(this.delayedShow),n.data(\"ui-tooltip-title\")&&!n.attr(\"title\")&&n.attr(\"title\",n.data(\"ui-tooltip-title\")),this._removeDescribedBy(n),o.hiding=!0,i.stop(!0),this._hide(i,this.options.hide,function(){s._removeTooltip(t(this))}),n.removeData(\"ui-tooltip-open\"),this._off(n,\"mouseleave focusout keyup\"),n[0]!==this.element[0]&&this._off(n,\"remove\"),this._off(this.document,\"mousemove\"),e&&\"mouseleave\"===e.type&&t.each(this.parents,function(e,i){t(i.element).attr(\"title\",i.title),delete s.parents[e]}),o.closing=!0,this._trigger(\"close\",e,{tooltip:i}),o.hiding||(o.closing=!1)),void 0):(n.removeData(\"ui-tooltip-open\"),void 0)},_tooltip:function(e){var i=t(\"<div>\").attr(\"role\",\"tooltip\"),s=t(\"<div>\").appendTo(i),n=i.uniqueId().attr(\"id\");return this._addClass(s,\"ui-tooltip-content\"),this._addClass(i,\"ui-tooltip\",\"ui-widget ui-widget-content\"),i.appendTo(this._appendTo(e)),this.tooltips[n]={element:e,tooltip:i}},_find:function(t){var e=t.data(\"ui-tooltip-id\");return e?this.tooltips[e]:null},_removeTooltip:function(t){t.remove(),delete this.tooltips[t.attr(\"id\")]},_appendTo:function(t){var e=t.closest(\".ui-front, dialog\");return e.length||(e=this.document[0].body),e},_destroy:function(){var e=this;t.each(this.tooltips,function(i,s){var n=t.Event(\"blur\"),o=s.element;n.target=n.currentTarget=o[0],e.close(n,!0),t(\"#\"+i).remove(),o.data(\"ui-tooltip-title\")&&(o.attr(\"title\")||o.attr(\"title\",o.data(\"ui-tooltip-title\")),o.removeData(\"ui-tooltip-title\"))}),this.liveRegion.remove()}}),t.uiBackCompat!==!1&&t.widget(\"ui.tooltip\",t.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var t=this._superApply(arguments);return this.options.tooltipClass&&t.tooltip.addClass(this.options.tooltipClass),t}}),t.ui.tooltip});"],"sourceRoot":""}